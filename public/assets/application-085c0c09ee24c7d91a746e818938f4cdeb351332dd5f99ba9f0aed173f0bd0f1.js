function UploadManager(t){var e=this;e.dropContainer=t.dropContainer,e.inputField=t.inputField,e.cancelContainer=t.cancelContainer,e.uploadsQueue=[],e._xhrs=[],e.activeUploads=0,e.data=t.data,e.key=t.key,e.maxSimultaneousUploads=t.maxSimultaneousUploads||-1,e.onFileAdded=t.onFileAdded||noop,e.uploadUrl=t.uploadUrl,e.onFileAddedProxy=function(t){console.log("Event: onFileAdded, file: "+t.fileName),e.onFileAdded(t)},e.initialize()}function FileUpload(t){var e=this;e.file=t,e.fileName=t.name,e.fileSize=t.size,e.uploadSize=t.size,e.uploadedBytes=0,e.eventHandlers={},e.events={onProgress:function(t,n){var i=n/t*100;console.log("Event: upload onProgress, progress = "+i+", fileSize = "+t+", uploadedBytes = "+n),(e.eventHandlers.onProgress||noop)(i,t,n)},onStart:function(){console.log("Event: upload onStart"),(e.eventHandlers.onStart||noop)()},onAborted:function(){console.log("Event: upload onAborted"),(e.eventHandlers.onAborted||noop)()},onCompleted:function(n){console.log("Event: upload onCompleted, data = "+n),t=null,(e.eventHandlers.onCompleted||noop)(n)}}}function escapeRegExp(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function difference(t,e){var n={};for(var i in t)if(i in e)if(_.isObject(e[i])&&!_.isArray(e[i])){var s=difference(t[i],e[i]);_.isEmpty(s)||(n[i]=s)}else _.isEqual(t[i],e[i])||(n[i]=e[i]);return n}function byteLength(t){for(var e=t.length,n=t.length-1;n>=0;n--){var i=t.charCodeAt(n);i>127&&i<=2047?e++:i>2047&&i<=65535&&(e+=2),i>=56320&&i<=57343&&n--}return e}function clone(t,e){if(!t)return t;var n=t.constructor.name;n===undefined&&(_.isArray(t)?n="Array":_.isNumber(t)?n="Number":_.isString(t)?n="String":_.isBoolean(t)?n="Boolean":_.isFunction(t)?n="Function":_.isObject(t)&&(n="Object"));var i=["Object","Number","String","Boolean","Array"];if(e&&i.push("Function"),n&&!_.contains(i,n))return console.log("no acceptedInstances",n,t),void console.trace();var s;if("Array"==n)s=[],t.forEach(function(t,n){s[n]=clone(t,e)});else if("Function"==n)s=t.bind({});else if("Object"==n){s={};for(var r in t)t.hasOwnProperty(r)&&(s[r]=clone(t[r],e))}else s=t;return s}function underscored(t){return t.trim().replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()}function toCamelCase(t){return t.replace(/\s(.)/g,function(t){return t.toUpperCase()}).replace(/\s/g,"").replace(/^(.)/,function(t){return t.toUpperCase()})}function isRetina(){if(window.matchMedia){var t=window.matchMedia("only screen and (min--moz-device-pixel-ratio: 1.3), only screen and (-o-min-device-pixel-ratio: 2.6/2), only screen and (-webkit-min-device-pixel-ratio: 1.3), only screen  and (min-device-pixel-ratio: 1.3), only screen and (min-resolution: 1.3dppx)");return t&&t.matches||window.devicePixelRatio>1}}!function(t,e){"object"!=typeof module||"object"!=typeof module.exports||window.process&&window.process.version&&window.process.versions.electron?e(t):module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}}("undefined"!=typeof window?window:this,function(t,e){function n(t){var e=!!t&&"length"in t&&t.length,n=rt.type(t);return"function"!==n&&!rt.isWindow(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}function i(t,e,n){if(rt.isFunction(e))return rt.grep(t,function(t,i){return!!e.call(t,i,t)!==n});if(e.nodeType)return rt.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(gt.test(e))return rt.filter(e,t,n);e=rt.filter(e,t)}return rt.grep(t,function(t){return Q.call(e,t)>-1!==n})}function s(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function r(t){var e={};return rt.each(t.match(_t)||[],function(t,n){e[n]=!0}),e}function o(){Y.removeEventListener("DOMContentLoaded",o),t.removeEventListener("load",o),rt.ready()}function a(){this.expando=rt.expando+a.uid++}function l(t,e,n){var i;if(n===undefined&&1===t.nodeType)if(i="data-"+e.replace(xt,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(i))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:At.test(n)?rt.parseJSON(n):n)}catch(t){}Ct.set(t,e,n)}else n=undefined;return n}function c(t,e,n,i){var s,r=1,o=20,a=i?function(){return i.cur()}:function(){return rt.css(t,e,"")},l=a(),c=n&&n[3]||(rt.cssNumber[e]?"":"px"),u=(rt.cssNumber[e]||"px"!==c&&+l)&&It.exec(rt.css(t,e));if(u&&u[3]!==c){c=c||u[3],n=n||[],u=+l||1;do{r=r||".5",u/=r,rt.style(t,e,u+c)}while(r!==(r=a()/l)&&1!==r&&--o)}return n&&(u=+u||+l||0,s=n[1]?u+(n[1]+1)*n[2]:+n[2],i&&(i.unit=c,i.start=u,i.end=s)),s}function u(t,e){var n="undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e||"*"):"undefined"!=typeof t.querySelectorAll?t.querySelectorAll(e||"*"):[];return e===undefined||e&&rt.nodeName(t,e)?rt.merge([t],n):n}function p(t,e){for(var n=0,i=t.length;n<i;n++)St.set(t[n],"globalEval",!e||St.get(e[n],"globalEval"))}function h(t,e,n,i,s){for(var r,o,a,l,c,h,d=e.createDocumentFragment(),f=[],g=0,m=t.length;g<m;g++)if((r=t[g])||0===r)if("object"===rt.type(r))rt.merge(f,r.nodeType?[r]:r);else if(Mt.test(r)){for(o=o||d.appendChild(e.createElement("div")),a=(Ot.exec(r)||["",""])[1].toLowerCase(),l=Rt[a]||Rt._default,o.innerHTML=l[1]+rt.htmlPrefilter(r)+l[2],h=l[0];h--;)o=o.lastChild;rt.merge(f,o.childNodes),o=d.firstChild,o.textContent=""}else f.push(e.createTextNode(r));for(d.textContent="",g=0;r=f[g++];)if(i&&rt.inArray(r,i)>-1)s&&s.push(r);else if(c=rt.contains(r.ownerDocument,r),o=u(d.appendChild(r),"script"),c&&p(o),n)for(h=0;r=o[h++];)Nt.test(r.type||"")&&n.push(r);return d}function d(){return!0}function f(){return!1}function g(){try{return Y.activeElement}catch(t){}}function m(t,e,n,i,s,r){var o,a;if("object"==typeof e){"string"!=typeof n&&(i=i||n,n=undefined);for(a in e)m(t,a,n,i,e[a],r);return t}if(null==i&&null==s?(s=n,i=n=undefined):null==s&&("string"==typeof n?(s=i,i=undefined):(s=i,i=n,n=undefined)),!1===s)s=f;else if(!s)return t;return 1===r&&(o=s,s=function(t){return rt().off(t),o.apply(this,arguments)},s.guid=o.guid||(o.guid=rt.guid++)),t.each(function(){rt.event.add(this,e,s,i,n)})}function v(t,e){return rt.nodeName(t,"table")&&rt.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function y(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function b(t){var e=Bt.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function _(t,e){var n,i,s,r,o,a,l,c;if(1===e.nodeType){if(St.hasData(t)&&(r=St.access(t),o=St.set(e,r),c=r.events)){delete o.handle,o.events={};for(s in c)for(n=0,i=c[s].length;n<i;n++)rt.event.add(e,s,c[s][n])}Ct.hasData(t)&&(a=Ct.access(t),l=rt.extend({},a),Ct.set(e,l))}}function w(t,e){var n=e.nodeName.toLowerCase();"input"===n&&Et.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function k(t,e,n,i){e=X.apply([],e);var s,r,o,a,l,c,p=0,d=t.length,f=d-1,g=e[0],m=rt.isFunction(g);if(m||d>1&&"string"==typeof g&&!it.checkClone&&Ft.test(g))return t.each(function(s){var r=t.eq(s);m&&(e[0]=g.call(this,s,r.html())),k(r,e,n,i)});if(d&&(s=h(e,t[0].ownerDocument,!1,t,i),r=s.firstChild,1===s.childNodes.length&&(s=r),r||i)){for(o=rt.map(u(s,"script"),y),a=o.length;p<d;p++)l=s,p!==f&&(l=rt.clone(l,!0,!0),a&&rt.merge(o,u(l,"script"))),n.call(t[p],l,p);if(a)for(c=o[o.length-1].ownerDocument,rt.map(o,b),p=0;p<a;p++)l=o[p],Nt.test(l.type||"")&&!St.access(l,"globalEval")&&rt.contains(c,l)&&(l.src?rt._evalUrl&&rt._evalUrl(l.src):rt.globalEval(l.textContent.replace(Jt,"")))}return t}function T(t,e,n){for(var i,s=e?rt.filter(e,t):t,r=0;null!=(i=s[r]);r++)n||1!==i.nodeType||rt.cleanData(u(i)),i.parentNode&&(n&&rt.contains(i.ownerDocument,i)&&p(u(i,"script")),i.parentNode.removeChild(i));return t}function S(t,e){var n=rt(e.createElement(t)).appendTo(e.body),i=rt.css(n[0],"display");return n.detach(),i}function C(t){var e=Y,n=Ht[t];return n||(n=S(t,e),"none"!==n&&n||(Wt=(Wt||rt("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=Wt[0].contentDocument,e.write(),e.close(),n=S(t,e),Wt.detach()),Ht[t]=n),n}function A(t,e,n){var i,s,r,o,a=t.style;return n=n||Yt(t),o=n?n.getPropertyValue(e)||n[e]:undefined,""!==o&&o!==undefined||rt.contains(t.ownerDocument,t)||(o=rt.style(t,e)),n&&!it.pixelMarginRight()&&Vt.test(o)&&Gt.test(e)&&(i=a.width,s=a.minWidth,r=a.maxWidth,a.minWidth=a.maxWidth=a.width=o,o=n.width,a.width=i,a.minWidth=s,a.maxWidth=r),o!==undefined?o+"":o}function x(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function j(t){if(t in ne)return t;for(var e=t[0].toUpperCase()+t.slice(1),n=ee.length;n--;)if((t=ee[n]+e)in ne)return t}function I(t,e,n){var i=It.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function D(t,e,n,i,s){for(var r=n===(i?"border":"content")?4:"width"===e?1:0,o=0;r<4;r+=2)"margin"===n&&(o+=rt.css(t,n+Dt[r],!0,s)),i?("content"===n&&(o-=rt.css(t,"padding"+Dt[r],!0,s)),"margin"!==n&&(o-=rt.css(t,"border"+Dt[r]+"Width",!0,s))):(o+=rt.css(t,"padding"+Dt[r],!0,s),"padding"!==n&&(o+=rt.css(t,"border"+Dt[r]+"Width",!0,s)));return o}function P(e,n,i){var s=!0,r="width"===n?e.offsetWidth:e.offsetHeight,o=Yt(e),a="border-box"===rt.css(e,"boxSizing",!1,o);if(Y.msFullscreenElement&&t.top!==t&&e.getClientRects().length&&(r=Math.round(100*e.getBoundingClientRect()[n])),r<=0||null==r){if(r=A(e,n,o),(r<0||null==r)&&(r=e.style[n]),Vt.test(r))return r;s=a&&(it.boxSizingReliable()||r===e.style[n]),r=parseFloat(r)||0}return r+D(e,n,i||(a?"border":"content"),s,o)+"px"}function E(t,e){for(var n,i,s,r=[],o=0,a=t.length;o<a;o++)i=t[o],i.style&&(r[o]=St.get(i,"olddisplay"),n=i.style.display,e?(r[o]||"none"!==n||(i.style.display=""),""===i.style.display&&Pt(i)&&(r[o]=St.access(i,"olddisplay",C(i.nodeName)))):(s=Pt(i),"none"===n&&s||St.set(i,"olddisplay",s?n:rt.css(i,"display"))));for(o=0;o<a;o++)i=t[o],i.style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?r[o]||"":"none"));return t}function O(t,e,n,i,s){return new O.prototype.init(t,e,n,i,s)}function N(){return t.setTimeout(function(){ie=undefined}),ie=rt.now()}function R(t,e){var n,i=0,s={height:t};for(e=e?1:0;i<4;i+=2-e)n=Dt[i],s["margin"+n]=s["padding"+n]=t;return e&&(s.opacity=s.width=t),s}function M(t,e,n){for(var i,s=(L.tweeners[e]||[]).concat(L.tweeners["*"]),r=0,o=s.length;r<o;r++)if(i=s[r].call(n,e,t))return i}function $(t,e,n){var i,s,r,o,a,l,c,u=this,p={},h=t.style,d=t.nodeType&&Pt(t),f=St.get(t,"fxshow");n.queue||(a=rt._queueHooks(t,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,u.always(function(){u.always(function(){a.unqueued--,rt.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],c=rt.css(t,"display"),"inline"===("none"===c?St.get(t,"olddisplay")||C(t.nodeName):c)&&"none"===rt.css(t,"float")&&(h.display="inline-block")),n.overflow&&(h.overflow="hidden",u.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}));for(i in e)if(s=e[i],re.exec(s)){if(delete e[i],r=r||"toggle"===s,s===(d?"hide":"show")){if("show"!==s||!f||f[i]===undefined)continue;d=!0}p[i]=f&&f[i]||rt.style(t,i)}else c=undefined;if(rt.isEmptyObject(p))"inline"===("none"===c?C(t.nodeName):c)&&(h.display=c);else{f?"hidden"in f&&(d=f.hidden):f=St.access(t,"fxshow",{}),r&&(f.hidden=!d),d?rt(t).show():u.done(function(){rt(t).hide()}),u.done(function(){var e;St.remove(t,"fxshow");for(e in p)rt.style(t,e,p[e])});for(i in p)o=M(d?f[i]:0,i,u),i in f||(f[i]=o.start,d&&(o.end=o.start,o.start="width"===i||"height"===i?1:0))}}function z(t,e){var n,i,s,r,o;for(n in t)if(i=rt.camelCase(n),s=e[i],r=t[n],rt.isArray(r)&&(s=r[1],r=t[n]=r[0]),n!==i&&(t[i]=r,delete t[n]),(o=rt.cssHooks[i])&&"expand"in o){r=o.expand(r),delete t[i];for(n in r)n in t||(t[n]=r[n],e[n]=s)}else e[i]=s}function L(t,e,n){var i,s,r=0,o=L.prefilters.length,a=rt.Deferred().always(function(){delete l.elem}),l=function(){if(s)return!1;for(var e=ie||N(),n=Math.max(0,c.startTime+c.duration-e),i=n/c.duration||0,r=1-i,o=0,l=c.tweens.length;o<l;o++)c.tweens[o].run(r);return a.notifyWith(t,[c,r,n]),r<1&&l?n:(a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:rt.extend({},e),opts:rt.extend(!0,{specialEasing:{},easing:rt.easing._default},n),originalProperties:e,originalOptions:n,startTime:ie||N(),duration:n.duration,tweens:[],createTween:function(e,n){var i=rt.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(i),i},stop:function(e){var n=0,i=e?c.tweens.length:0;if(s)return this;for(s=!0;n<i;n++)c.tweens[n].run(1);return e?(a.notifyWith(t,[c,1,0]),a.resolveWith(t,[c,e])):a.rejectWith(t,[c,e]),this}}),u=c.props;for(z(u,c.opts.specialEasing);r<o;r++)if(i=L.prefilters[r].call(c,t,u,c.opts))return rt.isFunction(i.stop)&&(rt._queueHooks(c.elem,c.opts.queue).stop=rt.proxy(i.stop,i)),i;return rt.map(u,M,c),rt.isFunction(c.opts.start)&&c.opts.start.call(t,c),rt.fx.timer(rt.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function U(t){return t.getAttribute&&t.getAttribute("class")||""}function q(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,s=0,r=e.toLowerCase().match(_t)||[];if(rt.isFunction(n))for(;i=r[s++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function F(t,e,n,i){function s(a){var l;return r[a]=!0,rt.each(t[a]||[],function(t,a){var c=a(e,n,i);return"string"!=typeof c||o||r[c]?o?!(l=c):void 0:(e.dataTypes.unshift(c),s(c),!1)}),l}var r={},o=t===Se;return s(e.dataTypes[0])||!r["*"]&&s("*")}function B(t,e){var n,i,s=rt.ajaxSettings.flatOptions||{};for(n in e)e[n]!==undefined&&((s[n]?t:i||(i={}))[n]=e[n]);return i&&rt.extend(!0,t,i),t}function J(t,e,n){for(var i,s,r,o,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),i===undefined&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(s in a)if(a[s]&&a[s].test(i)){l.unshift(s);break}if(l[0]in n)r=l[0];else{for(s in n){if(!l[0]||t.converters[s+" "+l[0]]){r=s;break}o||(o=s)}r=r||o}if(r)return r!==l[0]&&l.unshift(r),n[r]}function W(t,e,n,i){var s,r,o,a,l,c={},u=t.dataTypes.slice();if(u[1])for(o in t.converters)c[o.toLowerCase()]=t.converters[o];for(r=u.shift();r;)if(t.responseFields[r]&&(n[t.responseFields[r]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=r,r=u.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(!(o=c[l+" "+r]||c["* "+r]))for(s in c)if(a=s.split(" "),a[1]===r&&(o=c[l+" "+a[0]]||c["* "+a[0]])){!0===o?o=c[s]:!0!==c[s]&&(r=a[0],u.unshift(a[1]));break}if(!0!==o)if(o&&t["throws"])e=o(e);else try{e=o(e)}catch(t){return{state:"parsererror",error:o?t:"No conversion from "+l+" to "+r}}}return{state:"success",data:e}}function H(t,e,n,i){var s;if(rt.isArray(e))rt.each(e,function(e,s){n||je.test(t)?i(t,s):H(t+"["+("object"==typeof s&&null!=s?e:"")+"]",s,n,i)});else if(n||"object"!==rt.type(e))i(t,e);else for(s in e)H(t+"["+s+"]",e[s],n,i)}function G(t){return rt.isWindow(t)?t:9===t.nodeType&&t.defaultView}var V=[],Y=t.document,K=V.slice,X=V.concat,Z=V.push,Q=V.indexOf,tt={},et=tt.toString,nt=tt.hasOwnProperty,it={},st="2.2.1",rt=function(t,e){return new rt.fn.init(t,e)},ot=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,at=/^-ms-/,lt=/-([\da-z])/gi,ct=function(t,e){return e.toUpperCase()};rt.fn=rt.prototype={jquery:st,constructor:rt,selector:"",length:0,toArray:function(){return K.call(this)},get:function(t){return null!=t?t<0?this[t+this.length]:this[t]:K.call(this)},pushStack:function(t){var e=rt.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t){return rt.each(this,t)},map:function(t){return this.pushStack(rt.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(K.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:Z,sort:V.sort,splice:V.splice},rt.extend=rt.fn.extend=function(){var t,e,n,i,s,r,o=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[a]||{},a++),"object"==typeof o||rt.isFunction(o)||(o={}),a===l&&(o=this,a--);a<l;a++)if(null!=(t=arguments[a]))for(e in t)n=o[e],i=t[e],o!==i&&(c&&i&&(rt.isPlainObject(i)||(s=rt.isArray(i)))?(s?(s=!1,r=n&&rt.isArray(n)?n:[]):r=n&&rt.isPlainObject(n)?n:{},o[e]=rt.extend(c,r,i)):i!==undefined&&(o[e]=i));return o},rt.extend({expando:"jQuery"+(st+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===rt.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){var e=t&&t.toString();return!rt.isArray(t)&&e-parseFloat(e)+1>=0},isPlainObject:function(t){return"object"===rt.type(t)&&!t.nodeType&&!rt.isWindow(t)&&!(t.constructor&&!nt.call(t.constructor.prototype,"isPrototypeOf"))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?tt[et.call(t)]||"object":typeof t},globalEval:function(t){var e,n=eval;(t=rt.trim(t))&&(1===t.indexOf("use strict")?(e=Y.createElement("script"),e.text=t,Y.head.appendChild(e).parentNode.removeChild(e)):n(t))},camelCase:function(t){return t.replace(at,"ms-").replace(lt,ct)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e){var i,s=0;if(n(t))for(i=t.length;s<i&&!1!==e.call(t[s],s,t[s]);s++);else for(s in t)if(!1===e.call(t[s],s,t[s]))break;return t},trim:function(t){return null==t?"":(t+"").replace(ot,"")},makeArray:function(t,e){var i=e||[];return null!=t&&(n(Object(t))?rt.merge(i,"string"==typeof t?[t]:t):Z.call(i,t)),i},inArray:function(t,e,n){return null==e?-1:Q.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,s=t.length;i<n;i++)t[s++]=e[i];return t.length=s,t},grep:function(t,e,n){for(var i=[],s=0,r=t.length,o=!n;s<r;s++)!e(t[s],s)!==o&&i.push(t[s]);return i},map:function(t,e,i){var s,r,o=0,a=[];if(n(t))for(s=t.length;o<s;o++)null!=(r=e(t[o],o,i))&&a.push(r);else for(o in t)null!=(r=e(t[o],o,i))&&a.push(r);return X.apply([],a)},guid:1,proxy:function(t,e){var n,i,s;return"string"==typeof e&&(n=t[e],e=t,t=n),rt.isFunction(t)?(i=K.call(arguments,2),s=function(){return t.apply(e||this,i.concat(K.call(arguments)))},s.guid=t.guid=t.guid||rt.guid++,s):undefined},now:Date.now,support:it}),"function"==typeof Symbol&&(rt.fn[Symbol.iterator]=V[Symbol.iterator]),rt.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){tt["[object "+e+"]"]=e.toLowerCase()});var ut=function(t){function e(t,e,n,i){var s,r,o,a,l,c,p,d,f=e&&e.ownerDocument,g=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==g&&9!==g&&11!==g)return n;if(!i&&((e?e.ownerDocument||e:U)!==E&&P(e),e=e||E,N)){if(11!==g&&(c=vt.exec(t)))if(s=c[1]){if(9===g){if(!(o=e.getElementById(s)))return n;if(o.id===s)return n.push(o),n}else if(f&&(o=f.getElementById(s))&&z(e,o)&&o.id===s)return n.push(o),n}else{if(c[2])return Z.apply(n,e.getElementsByTagName(t)),n;if((s=c[3])&&w.getElementsByClassName&&e.getElementsByClassName)return Z.apply(n,e.getElementsByClassName(s)),n}if(w.qsa&&!W[t+" "]&&(!R||!R.test(t))){if(1!==g)f=e,d=t;else if("object"!==e.nodeName.toLowerCase()){for((a=e.getAttribute("id"))?a=a.replace(bt,"\\$&"):e.setAttribute("id",a=L),p=C(t),r=p.length,l=ht.test(a)?"#"+a:"[id='"+a+"']";r--;)p[r]=l+" "+h(p[r]);d=p.join(","),f=yt.test(t)&&u(e.parentNode)||e}if(d)try{return Z.apply(n,f.querySelectorAll(d)),n}catch(t){}finally{a===L&&e.removeAttribute("id")}}}return x(t.replace(at,"$1"),e,n,i)}function n(){function t(n,i){return e.push(n+" ")>k.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function i(t){return t[L]=!0,t}function s(t){var e=E.createElement("div");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function r(t,e){for(var n=t.split("|"),i=n.length;i--;)k.attrHandle[n[i]]=e}function o(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||G)-(~t.sourceIndex||G);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function a(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function l(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function c(t){return i(function(e){return e=+e,i(function(n,i){for(var s,r=t([],n.length,e),o=r.length;o--;)n[s=r[o]]&&(n[s]=!(i[s]=n[s]))})})}function u(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}function p(){}function h(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function d(t,e,n){var i=e.dir,s=n&&"parentNode"===i,r=F++;return e.first?function(e,n,r){for(;e=e[i];)if(1===e.nodeType||s)return t(e,n,r)}:function(e,n,o){var a,l,c,u=[q,r];if(o){for(;e=e[i];)if((1===e.nodeType||s)&&t(e,n,o))return!0}else for(;e=e[i];)if(1===e.nodeType||s){if(c=e[L]||(e[L]={}),l=c[e.uniqueID]||(c[e.uniqueID]={}),(a=l[i])&&a[0]===q&&a[1]===r)return u[2]=a[2];if(l[i]=u,u[2]=t(e,n,o))return!0}}}function f(t){return t.length>1?function(e,n,i){for(var s=t.length;s--;)if(!t[s](e,n,i))return!1;return!0}:t[0]}function g(t,n,i){for(var s=0,r=n.length;s<r;s++)e(t,n[s],i);return i}function m(t,e,n,i,s){for(var r,o=[],a=0,l=t.length,c=null!=e;a<l;a++)(r=t[a])&&(n&&!n(r,i,s)||(o.push(r),c&&e.push(a)));return o}function v(t,e,n,s,r,o){return s&&!s[L]&&(s=v(s)),r&&!r[L]&&(r=v(r,o)),i(function(i,o,a,l){var c,u,p,h=[],d=[],f=o.length,v=i||g(e||"*",a.nodeType?[a]:a,[]),y=!t||!i&&e?v:m(v,h,t,a,l),b=n?r||(i?t:f||s)?[]:o:y;if(n&&n(y,b,a,l),s)for(c=m(b,d),s(c,[],a,l),u=c.length;u--;)(p=c[u])&&(b[d[u]]=!(y[d[u]]=p));if(i){if(r||t){if(r){for(c=[],u=b.length;u--;)(p=b[u])&&c.push(y[u]=p);r(null,b=[],c,l)}for(u=b.length;u--;)(p=b[u])&&(c=r?tt(i,p):h[u])>-1&&(i[c]=!(o[c]=p))}}else b=m(b===o?b.splice(f,b.length):b),r?r(null,o,b,l):Z.apply(o,b)})}function y(t){for(var e,n,i,s=t.length,r=k.relative[t[0].type],o=r||k.relative[" "],a=r?1:0,l=d(function(t){return t===e},o,!0),c=d(function(t){return tt(e,t)>-1},o,!0),u=[function(t,n,i){var s=!r&&(i||n!==j)||((e=n).nodeType?l(t,n,i):c(t,n,i));return e=null,s}];a<s;a++)if(n=k.relative[t[a].type])u=[d(f(u),n)];else{if(n=k.filter[t[a].type].apply(null,t[a].matches),n[L]){for(i=++a;i<s&&!k.relative[t[i].type];i++);return v(a>1&&f(u),a>1&&h(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(at,"$1"),n,a<i&&y(t.slice(a,i)),i<s&&y(t=t.slice(i)),i<s&&h(t))}u.push(n)}return f(u)}function b(t,n){var s=n.length>0,r=t.length>0,o=function(i,o,a,l,c){var u,p,h,d=0,f="0",g=i&&[],v=[],y=j,b=i||r&&k.find.TAG("*",c),_=q+=null==y?1:Math.random()||.1,w=b.length;for(c&&(j=o===E||o||c);f!==w&&null!=(u=b[f]);f++){if(r&&u){for(p=0,o||u.ownerDocument===E||(P(u),a=!N);h=t[p++];)if(h(u,o||E,a)){l.push(u);break}c&&(q=_)}s&&((u=!h&&u)&&d--,i&&g.push(u))}if(d+=f,s&&f!==d){for(p=0;h=n[p++];)h(g,v,o,a);if(i){if(d>0)for(;f--;)g[f]||v[f]||(v[f]=K.call(l));v=m(v)}Z.apply(l,v),c&&!i&&v.length>0&&d+n.length>1&&e.uniqueSort(l)}return c&&(q=_,j=y),g};return s?i(o):o}var _,w,k,T,S,C,A,x,j,I,D,P,E,O,N,R,M,$,z,L="sizzle"+1*new Date,U=t.document,q=0,F=0,B=n(),J=n(),W=n(),H=function(t,e){return t===e&&(D=!0),0},G=1<<31,V={}.hasOwnProperty,Y=[],K=Y.pop,X=Y.push,Z=Y.push,Q=Y.slice,tt=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},et="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",nt="[\\x20\\t\\r\\n\\f]",it="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",st="\\["+nt+"*("+it+")(?:"+nt+"*([*^$|!~]?=)"+nt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+it+"))|)"+nt+"*\\]",rt=":("+it+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+st+")*)|.*)\\)|)",ot=new RegExp(nt+"+","g"),at=new RegExp("^"+nt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+nt+"+$","g"),lt=new RegExp("^"+nt+"*,"+nt+"*"),ct=new RegExp("^"+nt+"*([>+~]|"+nt+")"+nt+"*"),ut=new RegExp("="+nt+"*([^\\]'\"]*?)"+nt+"*\\]","g"),pt=new RegExp(rt),ht=new RegExp("^"+it+"$"),dt={ID:new RegExp("^#("+it+")"),CLASS:new RegExp("^\\.("+it+")"),TAG:new RegExp("^("+it+"|[*])"),ATTR:new RegExp("^"+st),PSEUDO:new RegExp("^"+rt),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+nt+"*(even|odd|(([+-]|)(\\d*)n|)"+nt+"*(?:([+-]|)"+nt+"*(\\d+)|))"+nt+"*\\)|)","i"),bool:new RegExp("^(?:"+et+")$","i"),needsContext:new RegExp("^"+nt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+nt+"*((?:-\\d)?\\d*)"+nt+"*\\)|)(?=[^-]|$)","i")},ft=/^(?:input|select|textarea|button)$/i,gt=/^h\d$/i,mt=/^[^{]+\{\s*\[native \w/,vt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,yt=/[+~]/,bt=/'|\\/g,_t=new RegExp("\\\\([\\da-f]{1,6}"+nt+"?|("+nt+")|.)","ig"),wt=function(t,e,n){var i="0x"+e-65536;return i!==i||n?e:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},kt=function(){P()};try{Z.apply(Y=Q.call(U.childNodes),U.childNodes),Y[U.childNodes.length].nodeType}catch(t){Z={apply:Y.length?function(t,e){X.apply(t,Q.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}w=e.support={},S=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},P=e.setDocument=function(t){var e,n,i=t?t.ownerDocument||t:U;return i!==E&&9===i.nodeType&&i.documentElement?(E=i,O=E.documentElement,N=!S(E),(n=E.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",kt,!1):n.attachEvent&&n.attachEvent("onunload",kt)),w.attributes=s(function(t){return t.className="i",!t.getAttribute("className")}),w.getElementsByTagName=s(function(t){return t.appendChild(E.createComment("")),!t.getElementsByTagName("*").length}),w.getElementsByClassName=mt.test(E.getElementsByClassName),w.getById=s(function(t){return O.appendChild(t).id=L,!E.getElementsByName||!E.getElementsByName(L).length}),w.getById?(k.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&N){var n=e.getElementById(t);return n?[n]:[]}},k.filter.ID=function(t){var e=t.replace(_t,wt);return function(t){return t.getAttribute("id")===e}}):(delete k.find.ID,k.filter.ID=function(t){var e=t.replace(_t,wt);return function(t){var n="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}}),k.find.TAG=w.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):w.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],s=0,r=e.getElementsByTagName(t);if("*"===t){for(;n=r[s++];)1===n.nodeType&&i.push(n);return i}return r},k.find.CLASS=w.getElementsByClassName&&function(t,e){if("undefined"!=typeof e.getElementsByClassName&&N)return e.getElementsByClassName(t)},M=[],R=[],(w.qsa=mt.test(E.querySelectorAll))&&(s(function(t){O.appendChild(t).innerHTML="<a id='"+L+"'></a><select id='"+L+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&R.push("[*^$]="+nt+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||R.push("\\["+nt+"*(?:value|"+et+")"),t.querySelectorAll("[id~="+L+"-]").length||R.push("~="),t.querySelectorAll(":checked").length||R.push(":checked"),t.querySelectorAll("a#"+L+"+*").length||R.push(".#.+[+~]")}),s(function(t){var e=E.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&R.push("name"+nt+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||R.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),R.push(",.*:")})),(w.matchesSelector=mt.test($=O.matches||O.webkitMatchesSelector||O.mozMatchesSelector||O.oMatchesSelector||O.msMatchesSelector))&&s(function(t){w.disconnectedMatch=$.call(t,"div"),$.call(t,"[s!='']:x"),M.push("!=",rt)}),R=R.length&&new RegExp(R.join("|")),M=M.length&&new RegExp(M.join("|")),e=mt.test(O.compareDocumentPosition),z=e||mt.test(O.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},H=e?function(t,e){if(t===e)return D=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!w.sortDetached&&e.compareDocumentPosition(t)===n?t===E||t.ownerDocument===U&&z(U,t)?-1:e===E||e.ownerDocument===U&&z(U,e)?1:I?tt(I,t)-tt(I,e):0:4&n?-1:1)}:function(t,e){if(t===e)return D=!0,0;var n,i=0,s=t.parentNode,r=e.parentNode,a=[t],l=[e];if(!s||!r)return t===E?-1:e===E?1:s?-1:r?1:I?tt(I,t)-tt(I,e):0;if(s===r)return o(t,e);for(n=t;n=n.parentNode;)a.unshift(n);for(n=e;n=n.parentNode;)l.unshift(n);for(;a[i]===l[i];)i++;return i?o(a[i],l[i]):a[i]===U?-1:l[i]===U?1:0},E):E},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==E&&P(t),n=n.replace(ut,"='$1']"),w.matchesSelector&&N&&!W[n+" "]&&(!M||!M.test(n))&&(!R||!R.test(n)))try{var i=$.call(t,n);if(i||w.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(t){}return e(n,E,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==E&&P(t),z(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==E&&P(t);var n=k.attrHandle[e.toLowerCase()],i=n&&V.call(k.attrHandle,e.toLowerCase())?n(t,e,!N):undefined;return i!==undefined?i:w.attributes||!N?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],i=0,s=0;if(D=!w.detectDuplicates,I=!w.sortStable&&t.slice(0),t.sort(H),D){for(;e=t[s++];)e===t[s]&&(i=n.push(s));for(;i--;)t.splice(n[i],1)}return I=null,t},T=e.getText=function(t){var e,n="",i=0,s=t.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=T(t)}else if(3===s||4===s)return t.nodeValue}else for(;e=t[i++];)n+=T(e);return n},k=e.selectors={cacheLength:50,createPseudo:i,match:dt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(_t,wt),t[3]=(t[3]||t[4]||t[5]||"").replace(_t,wt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return dt.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&pt.test(n)&&(e=C(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(_t,wt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=B[t+" "];return e||(e=new RegExp("(^|"+nt+")"+t+"("+nt+"|$)"))&&B(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,n,i){return function(s){var r=e.attr(s,t);return null==r?"!="===n:!n||(r+="","="===n?r===i:"!="===n?r!==i:"^="===n?i&&0===r.indexOf(i):"*="===n?i&&r.indexOf(i)>-1:"$="===n?i&&r.slice(-i.length)===i:"~="===n?(" "+r.replace(ot," ")+" ").indexOf(i)>-1:"|="===n&&(r===i||r.slice(0,i.length+1)===i+"-"))}},CHILD:function(t,e,n,i,s){var r="nth"!==t.slice(0,3),o="last"!==t.slice(-4),a="of-type"===e;return 1===i&&0===s?function(t){return!!t.parentNode}:function(e,n,l){var c,u,p,h,d,f,g=r!==o?"nextSibling":"previousSibling",m=e.parentNode,v=a&&e.nodeName.toLowerCase(),y=!l&&!a,b=!1;if(m){if(r){for(;g;){for(h=e;h=h[g];)if(a?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;f=g="only"===t&&!f&&"nextSibling"}return!0}if(f=[o?m.firstChild:m.lastChild],o&&y){for(h=m,p=h[L]||(h[L]={}),u=p[h.uniqueID]||(p[h.uniqueID]={}),c=u[t]||[],d=c[0]===q&&c[1],b=d&&c[2],h=d&&m.childNodes[d];h=++d&&h&&h[g]||(b=d=0)||f.pop();)if(1===h.nodeType&&++b&&h===e){u[t]=[q,d,b];break}}else if(y&&(h=e,p=h[L]||(h[L]={}),u=p[h.uniqueID]||(p[h.uniqueID]={}),c=u[t]||[],d=c[0]===q&&c[1],b=d),!1===b)for(;(h=++d&&h&&h[g]||(b=d=0)||f.pop())&&((a?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++b||(y&&(p=h[L]||(h[L]={}),u=p[h.uniqueID]||(p[h.uniqueID]={}),u[t]=[q,b]),h!==e)););return(b-=s)===i||b%i==0&&b/i>=0}}},PSEUDO:function(t,n){
var s,r=k.pseudos[t]||k.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return r[L]?r(n):r.length>1?(s=[t,t,"",n],k.setFilters.hasOwnProperty(t.toLowerCase())?i(function(t,e){for(var i,s=r(t,n),o=s.length;o--;)i=tt(t,s[o]),t[i]=!(e[i]=s[o])}):function(t){return r(t,0,s)}):r}},pseudos:{not:i(function(t){var e=[],n=[],s=A(t.replace(at,"$1"));return s[L]?i(function(t,e,n,i){for(var r,o=s(t,null,i,[]),a=t.length;a--;)(r=o[a])&&(t[a]=!(e[a]=r))}):function(t,i,r){return e[0]=t,s(e,null,r,n),e[0]=null,!n.pop()}}),has:i(function(t){return function(n){return e(t,n).length>0}}),contains:i(function(t){return t=t.replace(_t,wt),function(e){return(e.textContent||e.innerText||T(e)).indexOf(t)>-1}}),lang:i(function(t){return ht.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(_t,wt).toLowerCase(),function(e){var n;do{if(n=N?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===O},focus:function(t){return t===E.activeElement&&(!E.hasFocus||E.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return!1===t.disabled},disabled:function(t){return!0===t.disabled},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!k.pseudos.empty(t)},header:function(t){return gt.test(t.nodeName)},input:function(t){return ft.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:c(function(){return[0]}),last:c(function(t,e){return[e-1]}),eq:c(function(t,e,n){return[n<0?n+e:n]}),even:c(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:c(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:c(function(t,e,n){for(var i=n<0?n+e:n;--i>=0;)t.push(i);return t}),gt:c(function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t})}},k.pseudos.nth=k.pseudos.eq;for(_ in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})k.pseudos[_]=a(_);for(_ in{submit:!0,reset:!0})k.pseudos[_]=l(_);return p.prototype=k.filters=k.pseudos,k.setFilters=new p,C=e.tokenize=function(t,n){var i,s,r,o,a,l,c,u=J[t+" "];if(u)return n?0:u.slice(0);for(a=t,l=[],c=k.preFilter;a;){i&&!(s=lt.exec(a))||(s&&(a=a.slice(s[0].length)||a),l.push(r=[])),i=!1,(s=ct.exec(a))&&(i=s.shift(),r.push({value:i,type:s[0].replace(at," ")}),a=a.slice(i.length));for(o in k.filter)!(s=dt[o].exec(a))||c[o]&&!(s=c[o](s))||(i=s.shift(),r.push({value:i,type:o,matches:s}),a=a.slice(i.length));if(!i)break}return n?a.length:a?e.error(t):J(t,l).slice(0)},A=e.compile=function(t,e){var n,i=[],s=[],r=W[t+" "];if(!r){for(e||(e=C(t)),n=e.length;n--;)r=y(e[n]),r[L]?i.push(r):s.push(r);r=W(t,b(s,i)),r.selector=t}return r},x=e.select=function(t,e,n,i){var s,r,o,a,l,c="function"==typeof t&&t,p=!i&&C(t=c.selector||t);if(n=n||[],1===p.length){if(r=p[0]=p[0].slice(0),r.length>2&&"ID"===(o=r[0]).type&&w.getById&&9===e.nodeType&&N&&k.relative[r[1].type]){if(!(e=(k.find.ID(o.matches[0].replace(_t,wt),e)||[])[0]))return n;c&&(e=e.parentNode),t=t.slice(r.shift().value.length)}for(s=dt.needsContext.test(t)?0:r.length;s--&&(o=r[s],!k.relative[a=o.type]);)if((l=k.find[a])&&(i=l(o.matches[0].replace(_t,wt),yt.test(r[0].type)&&u(e.parentNode)||e))){if(r.splice(s,1),!(t=i.length&&h(r)))return Z.apply(n,i),n;break}}return(c||A(t,p))(i,e,!N,n,!e||yt.test(t)&&u(e.parentNode)||e),n},w.sortStable=L.split("").sort(H).join("")===L,w.detectDuplicates=!!D,P(),w.sortDetached=s(function(t){return 1&t.compareDocumentPosition(E.createElement("div"))}),s(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||r("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),w.attributes&&s(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||r("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),s(function(t){return null==t.getAttribute("disabled")})||r(et,function(t,e,n){var i;if(!n)return!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),e}(t);rt.find=ut,rt.expr=ut.selectors,rt.expr[":"]=rt.expr.pseudos,rt.uniqueSort=rt.unique=ut.uniqueSort,rt.text=ut.getText,rt.isXMLDoc=ut.isXML,rt.contains=ut.contains;var pt=function(t,e,n){for(var i=[],s=n!==undefined;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(s&&rt(t).is(n))break;i.push(t)}return i},ht=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},dt=rt.expr.match.needsContext,ft=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,gt=/^.[^:#\[\.,]*$/;rt.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?rt.find.matchesSelector(i,t)?[i]:[]:rt.find.matches(t,rt.grep(e,function(t){return 1===t.nodeType}))},rt.fn.extend({find:function(t){var e,n=this.length,i=[],s=this;if("string"!=typeof t)return this.pushStack(rt(t).filter(function(){for(e=0;e<n;e++)if(rt.contains(s[e],this))return!0}));for(e=0;e<n;e++)rt.find(t,s[e],i);return i=this.pushStack(n>1?rt.unique(i):i),i.selector=this.selector?this.selector+" "+t:t,i},filter:function(t){return this.pushStack(i(this,t||[],!1))},not:function(t){return this.pushStack(i(this,t||[],!0))},is:function(t){return!!i(this,"string"==typeof t&&dt.test(t)?rt(t):t||[],!1).length}});var mt,vt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(rt.fn.init=function(t,e,n){var i,s;if(!t)return this;if(n=n||mt,"string"==typeof t){if(!(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:vt.exec(t))||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof rt?e[0]:e,rt.merge(this,rt.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:Y,!0)),ft.test(i[1])&&rt.isPlainObject(e))for(i in e)rt.isFunction(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return s=Y.getElementById(i[2]),s&&s.parentNode&&(this.length=1,this[0]=s),this.context=Y,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):rt.isFunction(t)?n.ready!==undefined?n.ready(t):t(rt):(t.selector!==undefined&&(this.selector=t.selector,this.context=t.context),rt.makeArray(t,this))}).prototype=rt.fn,mt=rt(Y);var yt=/^(?:parents|prev(?:Until|All))/,bt={children:!0,contents:!0,next:!0,prev:!0};rt.fn.extend({has:function(t){var e=rt(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(rt.contains(this,e[t]))return!0})},closest:function(t,e){for(var n,i=0,s=this.length,r=[],o=dt.test(t)||"string"!=typeof t?rt(t,e||this.context):0;i<s;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&rt.find.matchesSelector(n,t))){r.push(n);break}return this.pushStack(r.length>1?rt.uniqueSort(r):r)},index:function(t){return t?"string"==typeof t?Q.call(rt(t),this[0]):Q.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(rt.uniqueSort(rt.merge(this.get(),rt(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),rt.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return pt(t,"parentNode")},parentsUntil:function(t,e,n){return pt(t,"parentNode",n)},next:function(t){return s(t,"nextSibling")},prev:function(t){return s(t,"previousSibling")},nextAll:function(t){return pt(t,"nextSibling")},prevAll:function(t){return pt(t,"previousSibling")},nextUntil:function(t,e,n){return pt(t,"nextSibling",n)},prevUntil:function(t,e,n){return pt(t,"previousSibling",n)},siblings:function(t){return ht((t.parentNode||{}).firstChild,t)},children:function(t){return ht(t.firstChild)},contents:function(t){return t.contentDocument||rt.merge([],t.childNodes)}},function(t,e){rt.fn[t]=function(n,i){var s=rt.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(s=rt.filter(i,s)),this.length>1&&(bt[t]||rt.uniqueSort(s),yt.test(t)&&s.reverse()),this.pushStack(s)}});var _t=/\S+/g;rt.Callbacks=function(t){t="string"==typeof t?r(t):rt.extend({},t);var e,n,i,s,o=[],a=[],l=-1,c=function(){for(s=t.once,i=e=!0;a.length;l=-1)for(n=a.shift();++l<o.length;)!1===o[l].apply(n[0],n[1])&&t.stopOnFalse&&(l=o.length,n=!1);t.memory||(n=!1),e=!1,s&&(o=n?[]:"")},u={add:function(){return o&&(n&&!e&&(l=o.length-1,a.push(n)),function e(n){rt.each(n,function(n,i){rt.isFunction(i)?t.unique&&u.has(i)||o.push(i):i&&i.length&&"string"!==rt.type(i)&&e(i)})}(arguments),n&&!e&&c()),this},remove:function(){return rt.each(arguments,function(t,e){for(var n;(n=rt.inArray(e,o,n))>-1;)o.splice(n,1),n<=l&&l--}),this},has:function(t){return t?rt.inArray(t,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return s=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return s=a=[],n||(o=n=""),this},locked:function(){return!!s},fireWith:function(t,n){return s||(n=n||[],n=[t,n.slice?n.slice():n],a.push(n),e||c()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!i}};return u},rt.extend({Deferred:function(t){var e=[["resolve","done",rt.Callbacks("once memory"),"resolved"],["reject","fail",rt.Callbacks("once memory"),"rejected"],["notify","progress",rt.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var t=arguments;return rt.Deferred(function(n){rt.each(e,function(e,r){var o=rt.isFunction(t[e])&&t[e];s[r[1]](function(){var t=o&&o.apply(this,arguments);t&&rt.isFunction(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this===i?n.promise():this,o?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?rt.extend(t,i):i}},s={};return i.pipe=i.then,rt.each(e,function(t,r){var o=r[2],a=r[3];i[r[1]]=o.add,a&&o.add(function(){n=a},e[1^t][2].disable,e[2][2].lock),s[r[0]]=function(){return s[r[0]+"With"](this===s?i:this,arguments),this},s[r[0]+"With"]=o.fireWith}),i.promise(s),t&&t.call(s,s),s},when:function(t){var e,n,i,s=0,r=K.call(arguments),o=r.length,a=1!==o||t&&rt.isFunction(t.promise)?o:0,l=1===a?t:rt.Deferred(),c=function(t,n,i){return function(s){n[t]=this,i[t]=arguments.length>1?K.call(arguments):s,i===e?l.notifyWith(n,i):--a||l.resolveWith(n,i)}};if(o>1)for(e=new Array(o),n=new Array(o),i=new Array(o);s<o;s++)r[s]&&rt.isFunction(r[s].promise)?r[s].promise().progress(c(s,n,e)).done(c(s,i,r)).fail(l.reject):--a;return a||l.resolveWith(i,r),l.promise()}});var wt;rt.fn.ready=function(t){return rt.ready.promise().done(t),this},rt.extend({isReady:!1,readyWait:1,holdReady:function(t){t?rt.readyWait++:rt.ready(!0)},ready:function(t){(!0===t?--rt.readyWait:rt.isReady)||(rt.isReady=!0,!0!==t&&--rt.readyWait>0||(wt.resolveWith(Y,[rt]),rt.fn.triggerHandler&&(rt(Y).triggerHandler("ready"),rt(Y).off("ready"))))}}),rt.ready.promise=function(e){return wt||(wt=rt.Deferred(),"complete"===Y.readyState||"loading"!==Y.readyState&&!Y.documentElement.doScroll?t.setTimeout(rt.ready):(Y.addEventListener("DOMContentLoaded",o),t.addEventListener("load",o))),wt.promise(e)},rt.ready.promise();var kt=function(t,e,n,i,s,r,o){var a=0,l=t.length,c=null==n;if("object"===rt.type(n)){s=!0;for(a in n)kt(t,e,a,n[a],!0,r,o)}else if(i!==undefined&&(s=!0,rt.isFunction(i)||(o=!0),c&&(o?(e.call(t,i),e=null):(c=e,e=function(t,e,n){return c.call(rt(t),n)})),e))for(;a<l;a++)e(t[a],n,o?i:i.call(t[a],a,e(t[a],n)));return s?t:c?e.call(t):l?e(t[0],n):r},Tt=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};a.uid=1,a.prototype={register:function(t,e){var n=e||{};return t.nodeType?t[this.expando]=n:Object.defineProperty(t,this.expando,{value:n,writable:!0,configurable:!0}),t[this.expando]},cache:function(t){if(!Tt(t))return{};var e=t[this.expando];return e||(e={},Tt(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var i,s=this.cache(t);if("string"==typeof e)s[e]=n;else for(i in e)s[i]=e[i];return s},get:function(t,e){return e===undefined?this.cache(t):t[this.expando]&&t[this.expando][e]},access:function(t,e,n){var i;return e===undefined||e&&"string"==typeof e&&n===undefined?(i=this.get(t,e),i!==undefined?i:this.get(t,rt.camelCase(e))):(this.set(t,e,n),n!==undefined?n:e)},remove:function(t,e){var n,i,s,r=t[this.expando];if(r!==undefined){if(e===undefined)this.register(t);else{rt.isArray(e)?i=e.concat(e.map(rt.camelCase)):(s=rt.camelCase(e),e in r?i=[e,s]:(i=s,i=i in r?[i]:i.match(_t)||[])),n=i.length;for(;n--;)delete r[i[n]]}(e===undefined||rt.isEmptyObject(r))&&(t.nodeType?t[this.expando]=undefined:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return e!==undefined&&!rt.isEmptyObject(e)}};var St=new a,Ct=new a,At=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,xt=/[A-Z]/g;rt.extend({hasData:function(t){return Ct.hasData(t)||St.hasData(t)},data:function(t,e,n){return Ct.access(t,e,n)},removeData:function(t,e){Ct.remove(t,e)},_data:function(t,e,n){return St.access(t,e,n)},_removeData:function(t,e){St.remove(t,e)}}),rt.fn.extend({data:function(t,e){var n,i,s,r=this[0],o=r&&r.attributes;if(t===undefined){if(this.length&&(s=Ct.get(r),1===r.nodeType&&!St.get(r,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&(i=o[n].name,0===i.indexOf("data-")&&(i=rt.camelCase(i.slice(5)),l(r,i,s[i])));St.set(r,"hasDataAttrs",!0)}return s}return"object"==typeof t?this.each(function(){Ct.set(this,t)}):kt(this,function(e){var n,i;if(r&&e===undefined){if((n=Ct.get(r,t)||Ct.get(r,t.replace(xt,"-$&").toLowerCase()))!==undefined)return n;if(i=rt.camelCase(t),(n=Ct.get(r,i))!==undefined)return n;if((n=l(r,i,undefined))!==undefined)return n}else i=rt.camelCase(t),this.each(function(){var n=Ct.get(this,i);Ct.set(this,i,e),t.indexOf("-")>-1&&n!==undefined&&Ct.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){Ct.remove(this,t)})}}),rt.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=St.get(t,e),n&&(!i||rt.isArray(n)?i=St.access(t,e,rt.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=rt.queue(t,e),i=n.length,s=n.shift(),r=rt._queueHooks(t,e),o=function(){rt.dequeue(t,e)};"inprogress"===s&&(s=n.shift(),i--),s&&("fx"===e&&n.unshift("inprogress"),delete r.stop,s.call(t,o,r)),!i&&r&&r.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return St.get(t,n)||St.access(t,n,{empty:rt.Callbacks("once memory").add(function(){St.remove(t,[e+"queue",n])})})}}),rt.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?rt.queue(this[0],t):e===undefined?this:this.each(function(){var n=rt.queue(this,t,e);rt._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&rt.dequeue(this,t)})},dequeue:function(t){return this.each(function(){rt.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,s=rt.Deferred(),r=this,o=this.length,a=function(){--i||s.resolveWith(r,[r])};for("string"!=typeof t&&(e=t,t=undefined),t=t||"fx";o--;)(n=St.get(r[o],t+"queueHooks"))&&n.empty&&(i++,n.empty.add(a));return a(),s.promise(e)}});var jt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,It=new RegExp("^(?:([+-])=|)("+jt+")([a-z%]*)$","i"),Dt=["Top","Right","Bottom","Left"],Pt=function(t,e){return t=e||t,"none"===rt.css(t,"display")||!rt.contains(t.ownerDocument,t)},Et=/^(?:checkbox|radio)$/i,Ot=/<([\w:-]+)/,Nt=/^$|\/(?:java|ecma)script/i,Rt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Rt.optgroup=Rt.option,Rt.tbody=Rt.tfoot=Rt.colgroup=Rt.caption=Rt.thead,Rt.th=Rt.td;var Mt=/<|&#?\w+;/;!function(){var t=Y.createDocumentFragment(),e=t.appendChild(Y.createElement("div")),n=Y.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),e.appendChild(n),it.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",it.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var $t=/^key/,zt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Lt=/^([^.]*)(?:\.(.+)|)/;rt.event={global:{},add:function(t,e,n,i,s){var r,o,a,l,c,u,p,h,d,f,g,m=St.get(t);if(m)for(n.handler&&(r=n,n=r.handler,s=r.selector),n.guid||(n.guid=rt.guid++),(l=m.events)||(l=m.events={}),(o=m.handle)||(o=m.handle=function(e){return void 0!==rt&&rt.event.triggered!==e.type?rt.event.dispatch.apply(t,arguments):undefined}),e=(e||"").match(_t)||[""],c=e.length;c--;)a=Lt.exec(e[c])||[],d=g=a[1],f=(a[2]||"").split(".").sort(),d&&(p=rt.event.special[d]||{},d=(s?p.delegateType:p.bindType)||d,p=rt.event.special[d]||{},u=rt.extend({type:d,origType:g,data:i,handler:n,guid:n.guid,selector:s,needsContext:s&&rt.expr.match.needsContext.test(s),namespace:f.join(".")},r),(h=l[d])||(h=l[d]=[],h.delegateCount=0,p.setup&&!1!==p.setup.call(t,i,f,o)||t.addEventListener&&t.addEventListener(d,o)),p.add&&(p.add.call(t,u),u.handler.guid||(u.handler.guid=n.guid)),s?h.splice(h.delegateCount++,0,u):h.push(u),rt.event.global[d]=!0)},remove:function(t,e,n,i,s){var r,o,a,l,c,u,p,h,d,f,g,m=St.hasData(t)&&St.get(t);if(m&&(l=m.events)){for(e=(e||"").match(_t)||[""],c=e.length;c--;)if(a=Lt.exec(e[c])||[],d=g=a[1],f=(a[2]||"").split(".").sort(),d){for(p=rt.event.special[d]||{},d=(i?p.delegateType:p.bindType)||d,h=l[d]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=r=h.length;r--;)u=h[r],!s&&g!==u.origType||n&&n.guid!==u.guid||a&&!a.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(h.splice(r,1),u.selector&&h.delegateCount--,p.remove&&p.remove.call(t,u));o&&!h.length&&(p.teardown&&!1!==p.teardown.call(t,f,m.handle)||rt.removeEvent(t,d,m.handle),delete l[d])}else for(d in l)rt.event.remove(t,d+e[c],n,i,!0);rt.isEmptyObject(l)&&St.remove(t,"handle events")}},dispatch:function(t){t=rt.event.fix(t);var e,n,i,s,r,o=[],a=K.call(arguments),l=(St.get(this,"events")||{})[t.type]||[],c=rt.event.special[t.type]||{};if(a[0]=t,t.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,t)){for(o=rt.event.handlers.call(this,t,l),e=0;(s=o[e++])&&!t.isPropagationStopped();)for(t.currentTarget=s.elem,n=0;(r=s.handlers[n++])&&!t.isImmediatePropagationStopped();)t.rnamespace&&!t.rnamespace.test(r.namespace)||(t.handleObj=r,t.data=r.data,(i=((rt.event.special[r.origType]||{}).handle||r.handler).apply(s.elem,a))!==undefined&&!1===(t.result=i)&&(t.preventDefault(),t.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,i,s,r,o=[],a=e.delegateCount,l=t.target;if(a&&l.nodeType&&("click"!==t.type||isNaN(t.button)||t.button<1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==t.type)){for(i=[],n=0;n<a;n++)r=e[n],s=r.selector+" ",i[s]===undefined&&(i[s]=r.needsContext?rt(s,this).index(l)>-1:rt.find(s,this,null,[l]).length),i[s]&&i.push(r);i.length&&o.push({elem:l,handlers:i})}return a<e.length&&o.push({elem:this,handlers:e.slice(a)}),o},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,i,s,r=e.button;return null==t.pageX&&null!=e.clientX&&(n=t.target.ownerDocument||Y,i=n.documentElement,s=n.body,t.pageX=e.clientX+(i&&i.scrollLeft||s&&s.scrollLeft||0)-(i&&i.clientLeft||s&&s.clientLeft||0),t.pageY=e.clientY+(i&&i.scrollTop||s&&s.scrollTop||0)-(i&&i.clientTop||s&&s.clientTop||0)),t.which||r===undefined||(t.which=1&r?1:2&r?3:4&r?2:0),t}},fix:function(t){if(t[rt.expando])return t;var e,n,i,s=t.type,r=t,o=this.fixHooks[s];for(o||(this.fixHooks[s]=o=zt.test(s)?this.mouseHooks:$t.test(s)?this.keyHooks:{}),i=o.props?this.props.concat(o.props):this.props,t=new rt.Event(r),e=i.length;e--;)n=i[e],t[n]=r[n];return t.target||(t.target=Y),3===t.target.nodeType&&(t.target=t.target.parentNode),o.filter?o.filter(t,r):t},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==g()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===g()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&rt.nodeName(this,"input"))return this.click(),!1},_default:function(t){return rt.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){t.result!==undefined&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},rt.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},rt.Event=function(t,e){if(!(this instanceof rt.Event))return new rt.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||t.defaultPrevented===undefined&&!1===t.returnValue?d:f):this.type=t,e&&rt.extend(this,e),this.timeStamp=t&&t.timeStamp||rt.now(),this[rt.expando]=!0},rt.Event.prototype={constructor:rt.Event,isDefaultPrevented:f,isPropagationStopped:f,isImmediatePropagationStopped:f,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=d,t&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=d,t&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=d,t&&t.stopImmediatePropagation(),this.stopPropagation()}},rt.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){rt.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,s=t.relatedTarget,r=t.handleObj;return s&&(s===i||rt.contains(i,s))||(t.type=r.origType,n=r.handler.apply(this,arguments),t.type=e),n}}}),rt.fn.extend({on:function(t,e,n,i){return m(this,t,e,n,i)},one:function(t,e,n,i){return m(this,t,e,n,i,1)},off:function(t,e,n){var i,s;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,rt(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(s in t)this.off(s,e,t[s]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=undefined),!1===n&&(n=f),this.each(function(){rt.event.remove(this,t,n,e)})}});var Ut=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,qt=/<script|<style|<link/i,Ft=/checked\s*(?:[^=]|=\s*.checked.)/i,Bt=/^true\/(.*)/,Jt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;rt.extend({htmlPrefilter:function(t){return t.replace(Ut,"<$1></$2>")},clone:function(t,e,n){var i,s,r,o,a=t.cloneNode(!0),l=rt.contains(t.ownerDocument,t);if(!(it.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||rt.isXMLDoc(t)))for(o=u(a),r=u(t),i=0,s=r.length;i<s;i++)w(r[i],o[i]);if(e)if(n)for(r=r||u(t),o=o||u(a),i=0,s=r.length;i<s;i++)_(r[i],o[i]);else _(t,a);return o=u(a,"script"),o.length>0&&p(o,!l&&u(t,"script")),a},cleanData:function(t){for(var e,n,i,s=rt.event.special,r=0;(n=t[r])!==undefined;r++)if(Tt(n)){if(e=n[St.expando]){if(e.events)for(i in e.events)s[i]?rt.event.remove(n,i):rt.removeEvent(n,i,e.handle);n[St.expando]=undefined}n[Ct.expando]&&(n[Ct.expando]=undefined)}}}),rt.fn.extend({domManip:k,detach:function(t){return T(this,t,!0)},remove:function(t){return T(this,t)},text:function(t){return kt(this,function(t){return t===undefined?rt.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return k(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){v(this,t).appendChild(t)}})},prepend:function(){return k(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=v(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return k(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return k(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(rt.cleanData(u(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return rt.clone(this,t,e)})},html:function(t){return kt(this,function(t){var e=this[0]||{},n=0,i=this.length;if(t===undefined&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!qt.test(t)&&!Rt[(Ot.exec(t)||["",""])[1].toLowerCase()]){t=rt.htmlPrefilter(t);try{for(;n<i;n++)e=this[n]||{},1===e.nodeType&&(rt.cleanData(u(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return k(this,arguments,function(e){var n=this.parentNode;rt.inArray(this,t)<0&&(rt.cleanData(u(this)),n&&n.replaceChild(e,this))},t)}}),rt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){rt.fn[t]=function(t){for(var n,i=[],s=rt(t),r=s.length-1,o=0;o<=r;o++)n=o===r?this:this.clone(!0),rt(s[o])[e](n),Z.apply(i,n.get());return this.pushStack(i)}});var Wt,Ht={HTML:"block",BODY:"block"},Gt=/^margin/,Vt=new RegExp("^("+jt+")(?!px)[a-z%]+$","i"),Yt=function(e){var n=e.ownerDocument.defaultView;return n&&n.opener||(n=t),n.getComputedStyle(e)},Kt=function(t,e,n,i){var s,r,o={};for(r in e)o[r]=t.style[r],t.style[r]=e[r];s=n.apply(t,i||[]);for(r in e)t.style[r]=o[r];return s},Xt=Y.documentElement;!function(){function e(){a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",a.innerHTML="",Xt.appendChild(o);var e=t.getComputedStyle(a);n="1%"!==e.top,r="2px"===e.marginLeft,i="4px"===e.width,a.style.marginRight="50%",s="4px"===e.marginRight,Xt.removeChild(o)}var n,i,s,r,o=Y.createElement("div"),a=Y.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",it.clearCloneStyle="content-box"===a.style.backgroundClip,o.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",o.appendChild(a),rt.extend(it,{pixelPosition:function(){return e(),n},boxSizingReliable:function(){return null==i&&e(),i},pixelMarginRight:function(){return null==i&&e(),s},reliableMarginLeft:function(){return null==i&&e(),r},reliableMarginRight:function(){var e,n=a.appendChild(Y.createElement("div"));return n.style.cssText=a.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",a.style.width="1px",Xt.appendChild(o),e=!parseFloat(t.getComputedStyle(n).marginRight),Xt.removeChild(o),a.removeChild(n),e}}))}();var Zt=/^(none|table(?!-c[ea]).+)/,Qt={position:"absolute",visibility:"hidden",display:"block"},te={letterSpacing:"0",fontWeight:"400"},ee=["Webkit","O","Moz","ms"],ne=Y.createElement("div").style;rt.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=A(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var s,r,o,a=rt.camelCase(e),l=t.style;if(e=rt.cssProps[a]||(rt.cssProps[a]=j(a)||a),o=rt.cssHooks[e]||rt.cssHooks[a],n===undefined)return o&&"get"in o&&(s=o.get(t,!1,i))!==undefined?s:l[e];r=typeof n,"string"===r&&(s=It.exec(n))&&s[1]&&(n=c(t,e,s),r="number"),null!=n&&n===n&&("number"===r&&(n+=s&&s[3]||(rt.cssNumber[a]?"":"px")),it.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),o&&"set"in o&&(n=o.set(t,n,i))===undefined||(l[e]=n))}},css:function(t,e,n,i){var s,r,o,a=rt.camelCase(e);return e=rt.cssProps[a]||(rt.cssProps[a]=j(a)||a),o=rt.cssHooks[e]||rt.cssHooks[a],o&&"get"in o&&(s=o.get(t,!0,n)),s===undefined&&(s=A(t,e,i)),"normal"===s&&e in te&&(s=te[e]),""===n||n?(r=parseFloat(s),!0===n||isFinite(r)?r||0:s):s}}),rt.each(["height","width"],function(t,e){rt.cssHooks[e]={get:function(t,n,i){if(n)return Zt.test(rt.css(t,"display"))&&0===t.offsetWidth?Kt(t,Qt,function(){return P(t,e,i)}):P(t,e,i)},set:function(t,n,i){var s,r=i&&Yt(t),o=i&&D(t,e,i,"border-box"===rt.css(t,"boxSizing",!1,r),r);return o&&(s=It.exec(n))&&"px"!==(s[3]||"px")&&(t.style[e]=n,n=rt.css(t,e)),I(t,n,o)}}}),rt.cssHooks.marginLeft=x(it.reliableMarginLeft,function(t,e){if(e)return(parseFloat(A(t,"marginLeft"))||t.getBoundingClientRect().left-Kt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),rt.cssHooks.marginRight=x(it.reliableMarginRight,function(t,e){if(e)return Kt(t,{display:"inline-block"},A,[t,"marginRight"])}),rt.each({margin:"",padding:"",border:"Width"},function(t,e){rt.cssHooks[t+e]={expand:function(n){for(var i=0,s={},r="string"==typeof n?n.split(" "):[n];i<4;i++)s[t+Dt[i]+e]=r[i]||r[i-2]||r[0];return s}},Gt.test(t)||(rt.cssHooks[t+e].set=I)}),rt.fn.extend({css:function(t,e){return kt(this,function(t,e,n){var i,s,r={},o=0;if(rt.isArray(e)){for(i=Yt(t),s=e.length;o<s;o++)r[e[o]]=rt.css(t,e[o],!1,i);return r}return n!==undefined?rt.style(t,e,n):rt.css(t,e)},t,e,arguments.length>1)},show:function(){return E(this,!0)},hide:function(){return E(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Pt(this)?rt(this).show():rt(this).hide()})}}),rt.Tween=O,O.prototype={constructor:O,init:function(t,e,n,i,s,r){this.elem=t,this.prop=n,this.easing=s||rt.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=r||(rt.cssNumber[n]?"":"px")},cur:function(){var t=O.propHooks[this.prop];return t&&t.get?t.get(this):O.propHooks._default.get(this)},run:function(t){var e,n=O.propHooks[this.prop];return this.options.duration?this.pos=e=rt.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):O.propHooks._default.set(this),this}},O.prototype.init.prototype=O.prototype,O.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=rt.css(t.elem,t.prop,""),e&&"auto"!==e?e:0)},set:function(t){rt.fx.step[t.prop]?rt.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[rt.cssProps[t.prop]]&&!rt.cssHooks[t.prop]?t.elem[t.prop]=t.now:rt.style(t.elem,t.prop,t.now+t.unit)}}},O.propHooks.scrollTop=O.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},rt.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},rt.fx=O.prototype.init,rt.fx.step={};var ie,se,re=/^(?:toggle|show|hide)$/,oe=/queueHooks$/;rt.Animation=rt.extend(L,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return c(n.elem,t,It.exec(e),n),n}]},tweener:function(t,e){rt.isFunction(t)?(e=t,t=["*"]):t=t.match(_t);for(var n,i=0,s=t.length;i<s;i++)n=t[i],L.tweeners[n]=L.tweeners[n]||[],L.tweeners[n].unshift(e)},prefilters:[$],prefilter:function(t,e){e?L.prefilters.unshift(t):L.prefilters.push(t)}}),rt.speed=function(t,e,n){var i=t&&"object"==typeof t?rt.extend({},t):{complete:n||!n&&e||rt.isFunction(t)&&t,duration:t,easing:n&&e||e&&!rt.isFunction(e)&&e};return i.duration=rt.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in rt.fx.speeds?rt.fx.speeds[i.duration]:rt.fx.speeds._default,null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){rt.isFunction(i.old)&&i.old.call(this),i.queue&&rt.dequeue(this,i.queue)},i},rt.fn.extend({fadeTo:function(t,e,n,i){return this.filter(Pt).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var s=rt.isEmptyObject(t),r=rt.speed(e,n,i),o=function(){var e=L(this,rt.extend({},t),r);(s||St.get(this,"finish"))&&e.stop(!0)};return o.finish=o,
s||!1===r.queue?this.each(o):this.queue(r.queue,o)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=undefined),e&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,s=null!=t&&t+"queueHooks",r=rt.timers,o=St.get(this);if(s)o[s]&&o[s].stop&&i(o[s]);else for(s in o)o[s]&&o[s].stop&&oe.test(s)&&i(o[s]);for(s=r.length;s--;)r[s].elem!==this||null!=t&&r[s].queue!==t||(r[s].anim.stop(n),e=!1,r.splice(s,1));!e&&n||rt.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,n=St.get(this),i=n[t+"queue"],s=n[t+"queueHooks"],r=rt.timers,o=i?i.length:0;for(n.finish=!0,rt.queue(this,t,[]),s&&s.stop&&s.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===t&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;e<o;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),rt.each(["toggle","show","hide"],function(t,e){var n=rt.fn[e];rt.fn[e]=function(t,i,s){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(R(e,!0),t,i,s)}}),rt.each({slideDown:R("show"),slideUp:R("hide"),slideToggle:R("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){rt.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),rt.timers=[],rt.fx.tick=function(){var t,e=0,n=rt.timers;for(ie=rt.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||rt.fx.stop(),ie=undefined},rt.fx.timer=function(t){rt.timers.push(t),t()?rt.fx.start():rt.timers.pop()},rt.fx.interval=13,rt.fx.start=function(){se||(se=t.setInterval(rt.fx.tick,rt.fx.interval))},rt.fx.stop=function(){t.clearInterval(se),se=null},rt.fx.speeds={slow:600,fast:200,_default:400},rt.fn.delay=function(e,n){return e=rt.fx?rt.fx.speeds[e]||e:e,n=n||"fx",this.queue(n,function(n,i){var s=t.setTimeout(n,e);i.stop=function(){t.clearTimeout(s)}})},function(){var t=Y.createElement("input"),e=Y.createElement("select"),n=e.appendChild(Y.createElement("option"));t.type="checkbox",it.checkOn=""!==t.value,it.optSelected=n.selected,e.disabled=!0,it.optDisabled=!n.disabled,t=Y.createElement("input"),t.value="t",t.type="radio",it.radioValue="t"===t.value}();var ae,le=rt.expr.attrHandle;rt.fn.extend({attr:function(t,e){return kt(this,rt.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){rt.removeAttr(this,t)})}}),rt.extend({attr:function(t,e,n){var i,s,r=t.nodeType;if(3!==r&&8!==r&&2!==r)return"undefined"==typeof t.getAttribute?rt.prop(t,e,n):(1===r&&rt.isXMLDoc(t)||(e=e.toLowerCase(),s=rt.attrHooks[e]||(rt.expr.match.bool.test(e)?ae:undefined)),n!==undefined?null===n?void rt.removeAttr(t,e):s&&"set"in s&&(i=s.set(t,n,e))!==undefined?i:(t.setAttribute(e,n+""),n):s&&"get"in s&&null!==(i=s.get(t,e))?i:(i=rt.find.attr(t,e),null==i?undefined:i))},attrHooks:{type:{set:function(t,e){if(!it.radioValue&&"radio"===e&&rt.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i,s=0,r=e&&e.match(_t);if(r&&1===t.nodeType)for(;n=r[s++];)i=rt.propFix[n]||n,rt.expr.match.bool.test(n)&&(t[i]=!1),t.removeAttribute(n)}}),ae={set:function(t,e,n){return!1===e?rt.removeAttr(t,n):t.setAttribute(n,n),n}},rt.each(rt.expr.match.bool.source.match(/\w+/g),function(t,e){var n=le[e]||rt.find.attr;le[e]=function(t,e,i){var s,r;return i||(r=le[e],le[e]=s,s=null!=n(t,e,i)?e.toLowerCase():null,le[e]=r),s}});var ce=/^(?:input|select|textarea|button)$/i,ue=/^(?:a|area)$/i;rt.fn.extend({prop:function(t,e){return kt(this,rt.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[rt.propFix[t]||t]})}}),rt.extend({prop:function(t,e,n){var i,s,r=t.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&rt.isXMLDoc(t)||(e=rt.propFix[e]||e,s=rt.propHooks[e]),n!==undefined?s&&"set"in s&&(i=s.set(t,n,e))!==undefined?i:t[e]=n:s&&"get"in s&&null!==(i=s.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=rt.find.attr(t,"tabindex");return e?parseInt(e,10):ce.test(t.nodeName)||ue.test(t.nodeName)&&t.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),it.optSelected||(rt.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),rt.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){rt.propFix[this.toLowerCase()]=this});var pe=/[\t\r\n\f]/g;rt.fn.extend({addClass:function(t){var e,n,i,s,r,o,a,l=0;if(rt.isFunction(t))return this.each(function(e){rt(this).addClass(t.call(this,e,U(this)))});if("string"==typeof t&&t)for(e=t.match(_t)||[];n=this[l++];)if(s=U(n),i=1===n.nodeType&&(" "+s+" ").replace(pe," ")){for(o=0;r=e[o++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");a=rt.trim(i),s!==a&&n.setAttribute("class",a)}return this},removeClass:function(t){var e,n,i,s,r,o,a,l=0;if(rt.isFunction(t))return this.each(function(e){rt(this).removeClass(t.call(this,e,U(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(_t)||[];n=this[l++];)if(s=U(n),i=1===n.nodeType&&(" "+s+" ").replace(pe," ")){for(o=0;r=e[o++];)for(;i.indexOf(" "+r+" ")>-1;)i=i.replace(" "+r+" "," ");a=rt.trim(i),s!==a&&n.setAttribute("class",a)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):rt.isFunction(t)?this.each(function(n){rt(this).toggleClass(t.call(this,n,U(this),e),e)}):this.each(function(){var e,i,s,r;if("string"===n)for(i=0,s=rt(this),r=t.match(_t)||[];e=r[i++];)s.hasClass(e)?s.removeClass(e):s.addClass(e);else t!==undefined&&"boolean"!==n||(e=U(this),e&&St.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":St.get(this,"__className__")||""))})},hasClass:function(t){var e,n,i=0;for(e=" "+t+" ";n=this[i++];)if(1===n.nodeType&&(" "+U(n)+" ").replace(pe," ").indexOf(e)>-1)return!0;return!1}});var he=/\r/g;rt.fn.extend({val:function(t){var e,n,i,s=this[0];{if(arguments.length)return i=rt.isFunction(t),this.each(function(n){var s;1===this.nodeType&&(s=i?t.call(this,n,rt(this).val()):t,null==s?s="":"number"==typeof s?s+="":rt.isArray(s)&&(s=rt.map(s,function(t){return null==t?"":t+""})),(e=rt.valHooks[this.type]||rt.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&e.set(this,s,"value")!==undefined||(this.value=s))});if(s)return(e=rt.valHooks[s.type]||rt.valHooks[s.nodeName.toLowerCase()])&&"get"in e&&(n=e.get(s,"value"))!==undefined?n:(n=s.value,"string"==typeof n?n.replace(he,""):null==n?"":n)}}}),rt.extend({valHooks:{option:{get:function(t){return rt.trim(t.value)}},select:{get:function(t){for(var e,n,i=t.options,s=t.selectedIndex,r="select-one"===t.type||s<0,o=r?null:[],a=r?s+1:i.length,l=s<0?a:r?s:0;l<a;l++)if(n=i[l],(n.selected||l===s)&&(it.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!rt.nodeName(n.parentNode,"optgroup"))){if(e=rt(n).val(),r)return e;o.push(e)}return o},set:function(t,e){for(var n,i,s=t.options,r=rt.makeArray(e),o=s.length;o--;)i=s[o],(i.selected=rt.inArray(rt.valHooks.option.get(i),r)>-1)&&(n=!0);return n||(t.selectedIndex=-1),r}}}}),rt.each(["radio","checkbox"],function(){rt.valHooks[this]={set:function(t,e){if(rt.isArray(e))return t.checked=rt.inArray(rt(t).val(),e)>-1}},it.checkOn||(rt.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var de=/^(?:focusinfocus|focusoutblur)$/;rt.extend(rt.event,{trigger:function(e,n,i,s){var r,o,a,l,c,u,p,h=[i||Y],d=nt.call(e,"type")?e.type:e,f=nt.call(e,"namespace")?e.namespace.split("."):[];if(o=a=i=i||Y,3!==i.nodeType&&8!==i.nodeType&&!de.test(d+rt.event.triggered)&&(d.indexOf(".")>-1&&(f=d.split("."),d=f.shift(),f.sort()),c=d.indexOf(":")<0&&"on"+d,e=e[rt.expando]?e:new rt.Event(d,"object"==typeof e&&e),e.isTrigger=s?2:3,e.namespace=f.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=undefined,e.target||(e.target=i),n=null==n?[e]:rt.makeArray(n,[e]),p=rt.event.special[d]||{},s||!p.trigger||!1!==p.trigger.apply(i,n))){if(!s&&!p.noBubble&&!rt.isWindow(i)){for(l=p.delegateType||d,de.test(l+d)||(o=o.parentNode);o;o=o.parentNode)h.push(o),a=o;a===(i.ownerDocument||Y)&&h.push(a.defaultView||a.parentWindow||t)}for(r=0;(o=h[r++])&&!e.isPropagationStopped();)e.type=r>1?l:p.bindType||d,u=(St.get(o,"events")||{})[e.type]&&St.get(o,"handle"),u&&u.apply(o,n),(u=c&&o[c])&&u.apply&&Tt(o)&&(e.result=u.apply(o,n),!1===e.result&&e.preventDefault());return e.type=d,s||e.isDefaultPrevented()||p._default&&!1!==p._default.apply(h.pop(),n)||!Tt(i)||c&&rt.isFunction(i[d])&&!rt.isWindow(i)&&(a=i[c],a&&(i[c]=null),rt.event.triggered=d,i[d](),rt.event.triggered=undefined,a&&(i[c]=a)),e.result}},simulate:function(t,e,n){var i=rt.extend(new rt.Event,n,{type:t,isSimulated:!0});rt.event.trigger(i,null,e),i.isDefaultPrevented()&&n.preventDefault()}}),rt.fn.extend({trigger:function(t,e){return this.each(function(){rt.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return rt.event.trigger(t,e,n,!0)}}),rt.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){rt.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),rt.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),it.focusin="onfocusin"in t,it.focusin||rt.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){rt.event.simulate(e,t.target,rt.event.fix(t))};rt.event.special[e]={setup:function(){var i=this.ownerDocument||this,s=St.access(i,e);s||i.addEventListener(t,n,!0),St.access(i,e,(s||0)+1)},teardown:function(){var i=this.ownerDocument||this,s=St.access(i,e)-1;s?St.access(i,e,s):(i.removeEventListener(t,n,!0),St.remove(i,e))}}});var fe=t.location,ge=rt.now(),me=/\?/;rt.parseJSON=function(t){return JSON.parse(t+"")},rt.parseXML=function(e){var n;if(!e||"string"!=typeof e)return null;try{n=(new t.DOMParser).parseFromString(e,"text/xml")}catch(t){n=undefined}return n&&!n.getElementsByTagName("parsererror").length||rt.error("Invalid XML: "+e),n};var ve=/#.*$/,ye=/([?&])_=[^&]*/,be=/^(.*?):[ \t]*([^\r\n]*)$/gm,_e=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,we=/^(?:GET|HEAD)$/,ke=/^\/\//,Te={},Se={},Ce="*/".concat("*"),Ae=Y.createElement("a");Ae.href=fe.href,rt.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:fe.href,type:"GET",isLocal:_e.test(fe.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ce,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":rt.parseJSON,"text xml":rt.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?B(B(t,rt.ajaxSettings),e):B(rt.ajaxSettings,t)},ajaxPrefilter:q(Te),ajaxTransport:q(Se),ajax:function(e,n){function i(e,n,i,a){var c,p,y,b,w,T=n;2!==_&&(_=2,l&&t.clearTimeout(l),s=undefined,o=a||"",k.readyState=e>0?4:0,c=e>=200&&e<300||304===e,i&&(b=J(h,k,i)),b=W(h,b,k,c),c?(h.ifModified&&(w=k.getResponseHeader("Last-Modified"),w&&(rt.lastModified[r]=w),(w=k.getResponseHeader("etag"))&&(rt.etag[r]=w)),204===e||"HEAD"===h.type?T="nocontent":304===e?T="notmodified":(T=b.state,p=b.data,y=b.error,c=!y)):(y=T,!e&&T||(T="error",e<0&&(e=0))),k.status=e,k.statusText=(n||T)+"",c?g.resolveWith(d,[p,T,k]):g.rejectWith(d,[k,T,y]),k.statusCode(v),v=undefined,u&&f.trigger(c?"ajaxSuccess":"ajaxError",[k,h,c?p:y]),m.fireWith(d,[k,T]),u&&(f.trigger("ajaxComplete",[k,h]),--rt.active||rt.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=undefined),n=n||{};var s,r,o,a,l,c,u,p,h=rt.ajaxSetup({},n),d=h.context||h,f=h.context&&(d.nodeType||d.jquery)?rt(d):rt.event,g=rt.Deferred(),m=rt.Callbacks("once memory"),v=h.statusCode||{},y={},b={},_=0,w="canceled",k={readyState:0,getResponseHeader:function(t){var e;if(2===_){if(!a)for(a={};e=be.exec(o);)a[e[1].toLowerCase()]=e[2];e=a[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===_?o:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return _||(t=b[n]=b[n]||t,y[t]=e),this},overrideMimeType:function(t){return _||(h.mimeType=t),this},statusCode:function(t){var e;if(t)if(_<2)for(e in t)v[e]=[v[e],t[e]];else k.always(t[k.status]);return this},abort:function(t){var e=t||w;return s&&s.abort(e),i(0,e),this}};if(g.promise(k).complete=m.add,k.success=k.done,k.error=k.fail,h.url=((e||h.url||fe.href)+"").replace(ve,"").replace(ke,fe.protocol+"//"),h.type=n.method||n.type||h.method||h.type,h.dataTypes=rt.trim(h.dataType||"*").toLowerCase().match(_t)||[""],null==h.crossDomain){c=Y.createElement("a");try{c.href=h.url,c.href=c.href,h.crossDomain=Ae.protocol+"//"+Ae.host!=c.protocol+"//"+c.host}catch(t){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=rt.param(h.data,h.traditional)),F(Te,h,n,k),2===_)return k;u=rt.event&&h.global,u&&0==rt.active++&&rt.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!we.test(h.type),r=h.url,h.hasContent||(h.data&&(r=h.url+=(me.test(r)?"&":"?")+h.data,delete h.data),!1===h.cache&&(h.url=ye.test(r)?r.replace(ye,"$1_="+ge++):r+(me.test(r)?"&":"?")+"_="+ge++)),h.ifModified&&(rt.lastModified[r]&&k.setRequestHeader("If-Modified-Since",rt.lastModified[r]),rt.etag[r]&&k.setRequestHeader("If-None-Match",rt.etag[r])),(h.data&&h.hasContent&&!1!==h.contentType||n.contentType)&&k.setRequestHeader("Content-Type",h.contentType),k.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Ce+"; q=0.01":""):h.accepts["*"]);for(p in h.headers)k.setRequestHeader(p,h.headers[p]);if(h.beforeSend&&(!1===h.beforeSend.call(d,k,h)||2===_))return k.abort();w="abort";for(p in{success:1,error:1,complete:1})k[p](h[p]);if(s=F(Se,h,n,k)){if(k.readyState=1,u&&f.trigger("ajaxSend",[k,h]),2===_)return k;h.async&&h.timeout>0&&(l=t.setTimeout(function(){k.abort("timeout")},h.timeout));try{_=1,s.send(y,i)}catch(t){if(!(_<2))throw t;i(-1,t)}}else i(-1,"No Transport");return k},getJSON:function(t,e,n){return rt.get(t,e,n,"json")},getScript:function(t,e){return rt.get(t,undefined,e,"script")}}),rt.each(["get","post"],function(t,e){rt[e]=function(t,n,i,s){return rt.isFunction(n)&&(s=s||i,i=n,n=undefined),rt.ajax(rt.extend({url:t,type:e,dataType:s,data:n,success:i},rt.isPlainObject(t)&&t))}}),rt._evalUrl=function(t){return rt.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},rt.fn.extend({wrapAll:function(t){var e;return rt.isFunction(t)?this.each(function(e){rt(this).wrapAll(t.call(this,e))}):(this[0]&&(e=rt(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return rt.isFunction(t)?this.each(function(e){rt(this).wrapInner(t.call(this,e))}):this.each(function(){var e=rt(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=rt.isFunction(t);return this.each(function(n){rt(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){rt.nodeName(this,"body")||rt(this).replaceWith(this.childNodes)}).end()}}),rt.expr.filters.hidden=function(t){return!rt.expr.filters.visible(t)},rt.expr.filters.visible=function(t){return t.offsetWidth>0||t.offsetHeight>0||t.getClientRects().length>0};var xe=/%20/g,je=/\[\]$/,Ie=/\r?\n/g,De=/^(?:submit|button|image|reset|file)$/i,Pe=/^(?:input|select|textarea|keygen)/i;rt.param=function(t,e){var n,i=[],s=function(t,e){e=rt.isFunction(e)?e():null==e?"":e,i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(e===undefined&&(e=rt.ajaxSettings&&rt.ajaxSettings.traditional),rt.isArray(t)||t.jquery&&!rt.isPlainObject(t))rt.each(t,function(){s(this.name,this.value)});else for(n in t)H(n,t[n],e,s);return i.join("&").replace(xe,"+")},rt.fn.extend({serialize:function(){return rt.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=rt.prop(this,"elements");return t?rt.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!rt(this).is(":disabled")&&Pe.test(this.nodeName)&&!De.test(t)&&(this.checked||!Et.test(t))}).map(function(t,e){var n=rt(this).val();return null==n?null:rt.isArray(n)?rt.map(n,function(t){return{name:e.name,value:t.replace(Ie,"\r\n")}}):{name:e.name,value:n.replace(Ie,"\r\n")}}).get()}}),rt.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(t){}};var Ee={0:200,1223:204},Oe=rt.ajaxSettings.xhr();it.cors=!!Oe&&"withCredentials"in Oe,it.ajax=Oe=!!Oe,rt.ajaxTransport(function(e){var n,i;if(it.cors||Oe&&!e.crossDomain)return{send:function(s,r){var o,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)a[o]=e.xhrFields[o];e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||s["X-Requested-With"]||(s["X-Requested-With"]="XMLHttpRequest");for(o in s)a.setRequestHeader(o,s[o]);n=function(t){return function(){n&&(n=i=a.onload=a.onerror=a.onabort=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?r(0,"error"):r(a.status,a.statusText):r(Ee[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=n(),i=a.onerror=n("error"),a.onabort!==undefined?a.onabort=i:a.onreadystatechange=function(){4===a.readyState&&t.setTimeout(function(){n&&i()})},n=n("abort");try{a.send(e.hasContent&&e.data||null)}catch(t){if(n)throw t}},abort:function(){n&&n()}}}),rt.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return rt.globalEval(t),t}}}),rt.ajaxPrefilter("script",function(t){t.cache===undefined&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),rt.ajaxTransport("script",function(t){if(t.crossDomain){var e,n;return{send:function(i,s){e=rt("<script>").prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&s("error"===t.type?404:200,t.type)}),Y.head.appendChild(e[0])},abort:function(){n&&n()}}}});var Ne=[],Re=/(=)\?(?=&|$)|\?\?/;rt.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ne.pop()||rt.expando+"_"+ge++;return this[t]=!0,t}}),rt.ajaxPrefilter("json jsonp",function(e,n,i){var s,r,o,a=!1!==e.jsonp&&(Re.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Re.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return s=e.jsonpCallback=rt.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Re,"$1"+s):!1!==e.jsonp&&(e.url+=(me.test(e.url)?"&":"?")+e.jsonp+"="+s),e.converters["script json"]=function(){return o||rt.error(s+" was not called"),o[0]},e.dataTypes[0]="json",r=t[s],t[s]=function(){o=arguments},i.always(function(){r===undefined?rt(t).removeProp(s):t[s]=r,e[s]&&(e.jsonpCallback=n.jsonpCallback,Ne.push(s)),o&&rt.isFunction(r)&&r(o[0]),o=r=undefined}),"script"}),it.createHTMLDocument=function(){var t=Y.implementation.createHTMLDocument("").body;return t.innerHTML="<form></form><form></form>",2===t.childNodes.length}(),rt.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||(it.createHTMLDocument?Y.implementation.createHTMLDocument(""):Y);var i=ft.exec(t),s=!n&&[];return i?[e.createElement(i[1])]:(i=h([t],e,s),s&&s.length&&rt(s).remove(),rt.merge([],i.childNodes))};var Me=rt.fn.load;rt.fn.load=function(t,e,n){if("string"!=typeof t&&Me)return Me.apply(this,arguments);var i,s,r,o=this,a=t.indexOf(" ");return a>-1&&(i=rt.trim(t.slice(a)),t=t.slice(0,a)),rt.isFunction(e)?(n=e,e=undefined):e&&"object"==typeof e&&(s="POST"),o.length>0&&rt.ajax({url:t,type:s||"GET",dataType:"html",data:e}).done(function(t){r=arguments,o.html(i?rt("<div>").append(rt.parseHTML(t)).find(i):t)}).always(n&&function(t,e){o.each(function(){n.apply(o,r||[t.responseText,e,t])})}),this},rt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){rt.fn[e]=function(t){return this.on(e,t)}}),rt.expr.filters.animated=function(t){return rt.grep(rt.timers,function(e){return t===e.elem}).length},rt.offset={setOffset:function(t,e,n){var i,s,r,o,a,l,c,u=rt.css(t,"position"),p=rt(t),h={};"static"===u&&(t.style.position="relative"),a=p.offset(),r=rt.css(t,"top"),l=rt.css(t,"left"),c=("absolute"===u||"fixed"===u)&&(r+l).indexOf("auto")>-1,c?(i=p.position(),o=i.top,s=i.left):(o=parseFloat(r)||0,s=parseFloat(l)||0),rt.isFunction(e)&&(e=e.call(t,n,rt.extend({},a))),null!=e.top&&(h.top=e.top-a.top+o),null!=e.left&&(h.left=e.left-a.left+s),"using"in e?e.using.call(t,h):p.css(h)}},rt.fn.extend({offset:function(t){if(arguments.length)return t===undefined?this:this.each(function(e){rt.offset.setOffset(this,t,e)});var e,n,i=this[0],s={top:0,left:0},r=i&&i.ownerDocument;if(r)return e=r.documentElement,rt.contains(e,i)?(s=i.getBoundingClientRect(),n=G(r),{top:s.top+n.pageYOffset-e.clientTop,left:s.left+n.pageXOffset-e.clientLeft}):s},position:function(){if(this[0]){var t,e,n=this[0],i={top:0,left:0};return"fixed"===rt.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),rt.nodeName(t[0],"html")||(i=t.offset()),i.top+=rt.css(t[0],"borderTopWidth",!0),i.left+=rt.css(t[0],"borderLeftWidth",!0)),{top:e.top-i.top-rt.css(n,"marginTop",!0),left:e.left-i.left-rt.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===rt.css(t,"position");)t=t.offsetParent;return t||Xt})}}),rt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n="pageYOffset"===e;rt.fn[t]=function(i){return kt(this,function(t,i,s){var r=G(t);if(s===undefined)return r?r[e]:t[i];r?r.scrollTo(n?r.pageXOffset:s,n?s:r.pageYOffset):t[i]=s},t,i,arguments.length)}}),rt.each(["top","left"],function(t,e){rt.cssHooks[e]=x(it.pixelPosition,function(t,n){if(n)return n=A(t,e),Vt.test(n)?rt(t).position()[e]+"px":n})}),rt.each({Height:"height",Width:"width"},function(t,e){rt.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,i){rt.fn[i]=function(i,s){var r=arguments.length&&(n||"boolean"!=typeof i),o=n||(!0===i||!0===s?"margin":"border");return kt(this,function(e,n,i){var s;return rt.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(s=e.documentElement,Math.max(e.body["scroll"+t],s["scroll"+t],e.body["offset"+t],s["offset"+t],s["client"+t])):i===undefined?rt.css(e,n,o):rt.style(e,n,i,o)},e,r?i:undefined,r,null)}})}),rt.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},size:function(){return this.length}}),rt.fn.andSelf=rt.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return rt});var $e=t.jQuery,ze=t.$;return rt.noConflict=function(e){return t.$===rt&&(t.$=ze),e&&t.jQuery===rt&&(t.jQuery=$e),rt},e||(t.jQuery=t.$=rt),rt}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){function e(e,i){var s,r,o,a=e.nodeName.toLowerCase();return"area"===a?(s=e.parentNode,r=s.name,!(!e.href||!r||"map"!==s.nodeName.toLowerCase())&&(!!(o=t("img[usemap='#"+r+"']")[0])&&n(o))):(/^(input|select|textarea|button|object)$/.test(a)?!e.disabled:"a"===a?e.href||i:i)&&n(e)}function n(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}t.ui=t.ui||{},t.extend(t.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({scrollParent:function(e){var n=this.css("position"),i="absolute"===n,s=e?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter(function(){var e=t(this);return(!i||"static"!==e.css("position"))&&s.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==n&&r.length?r:t(this[0].ownerDocument||document)},uniqueId:function(){var t=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++t)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(n){return!!t.data(n,e)}}):function(e,n,i){return!!t.data(e,i[3])},focusable:function(n){return e(n,!isNaN(t.attr(n,"tabindex")))},tabbable:function(n){var i=t.attr(n,"tabindex"),s=isNaN(i);return(s||i>=0)&&e(n,!s)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(e,n){function i(e,n,i,r){return t.each(s,function(){n-=parseFloat(t.css(e,"padding"+this))||0,i&&(n-=parseFloat(t.css(e,"border"+this+"Width"))||0),r&&(n-=parseFloat(t.css(e,"margin"+this))||0)}),n}var s="Width"===n?["Left","Right"]:["Top","Bottom"],r=n.toLowerCase(),o={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+n]=function(e){return e===undefined?o["inner"+n].call(this):this.each(function(){t(this).css(r,i(this,e)+"px")})},t.fn["outer"+n]=function(e,s){return"number"!=typeof e?o["outer"+n].call(this,e):this.each(function(){t(this).css(r,i(this,e,!0,s)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(n){return arguments.length?e.call(this,t.camelCase(n)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.fn.extend({focus:function(e){return function(n,i){return"number"==typeof n?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),i&&i.call(e)},n)}):e.apply(this,arguments)}}(t.fn.focus),disableSelection:function(){var t="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(t+".ui-disableSelection",function(t){t.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(e){if(e!==undefined)return this.css("zIndex",e);if(this.length)for(var n,i,s=t(this[0]);s.length&&s[0]!==document;){if(("absolute"===(n=s.css("position"))||"relative"===n||"fixed"===n)&&(i=parseInt(s.css("zIndex"),10),!isNaN(i)&&0!==i))return i;s=s.parent()}return 0}}),t.ui.plugin={add:function(e,n,i){var s,r=t.ui[e].prototype;for(s in i)r.plugins[s]=r.plugins[s]||[],r.plugins[s].push([n,i[s]])},call:function(t,e,n,i){var s,r=t.plugins[e];if(r&&(i||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(s=0;s<r.length;s++)t.options[r[s][0]]&&r[s][1].apply(t.element,n)}};var i=0,s=Array.prototype.slice;t.cleanData=function(e){return function(n){var i,s,r;for(r=0;null!=(s=n[r]);r++)try{i=t._data(s,"events"),i&&i.remove&&t(s).triggerHandler("remove")}catch(t){}e(n)}}(t.cleanData),t.widget=function(e,n,i){var s,r,o,a,l={},c=e.split(".")[0];return e=e.split(".")[1],s=c+"-"+e,i||(i=n,n=t.Widget),t.expr[":"][s.toLowerCase()]=function(e){return!!t.data(e,s)},t[c]=t[c]||{},r=t[c][e],o=t[c][e]=function(t,e){if(!this._createWidget)return new o(t,e);arguments.length&&this._createWidget(t,e)},t.extend(o,r,{version:i.version,_proto:t.extend({},i),_childConstructors:[]}),a=new n,a.options=t.widget.extend({},a.options),t.each(i,function(e,i){if(!t.isFunction(i))return void(l[e]=i);l[e]=function(){var t=function(){return n.prototype[e].apply(this,arguments)},s=function(t){return n.prototype[e].apply(this,t)};return function(){var e,n=this._super,r=this._superApply;return this._super=t,this._superApply=s,e=i.apply(this,arguments),this._super=n,this._superApply=r,e}}()}),o.prototype=t.widget.extend(a,{widgetEventPrefix:r?a.widgetEventPrefix||e:e},l,{constructor:o,namespace:c,widgetName:e,widgetFullName:s}),r?(t.each(r._childConstructors,function(e,n){var i=n.prototype;t.widget(i.namespace+"."+i.widgetName,o,n._proto)}),delete r._childConstructors):n._childConstructors.push(o),t.widget.bridge(e,o),o},t.widget.extend=function(e){for(var n,i,r=s.call(arguments,1),o=0,a=r.length;o<a;o++)for(n in r[o])i=r[o][n],r[o].hasOwnProperty(n)&&i!==undefined&&(t.isPlainObject(i)?e[n]=t.isPlainObject(e[n])?t.widget.extend({},e[n],i):t.widget.extend({},i):e[n]=i);return e},t.widget.bridge=function(e,n){var i=n.prototype.widgetFullName||e;t.fn[e]=function(r){var o="string"==typeof r,a=s.call(arguments,1),l=this;return o?this.each(function(){var n,s=t.data(this,i);return"instance"===r?(l=s,!1):s?t.isFunction(s[r])&&"_"!==r.charAt(0)?(n=s[r].apply(s,a),n!==s&&n!==undefined?(l=n&&n.jquery?l.pushStack(n.get()):n,!1):void 0):t.error("no such method '"+r+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+r+"'")}):(a.length&&(r=t.widget.extend.apply(null,[r].concat(a))),this.each(function(){var e=t.data(this,i);e?(e.option(r||{}),e._init&&e._init()):t.data(this,i,new n(r,this))})),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,n){n=t(n||this.defaultElement||this)[0],this.element=t(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),n!==this&&(t.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===n&&this.destroy()}}),this.document=t(n.style?n.ownerDocument:n.document||n),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(e,n){var i,s,r,o=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(o={},i=e.split("."),e=i.shift(),i.length){for(s=o[e]=t.widget.extend({},this.options[e]),r=0;r<i.length-1;r++)s[i[r]]=s[i[r]]||{},s=s[i[r]];if(e=i.pop(),1===arguments.length)return s[e]===undefined?null:s[e];s[e]=n}else{if(1===arguments.length)return this.options[e]===undefined?null:this.options[e];o[e]=n}return this._setOptions(o),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!e),e&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(e,n,i){var s,r=this;"boolean"!=typeof e&&(i=n,n=e,e=!1),i?(n=s=t(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,s=this.widget()),t.each(i,function(i,o){function a(){if(e||!0!==r.options.disabled&&!t(this).hasClass("ui-state-disabled"))return("string"==typeof o?r[o]:o).apply(r,arguments)}"string"!=typeof o&&(a.guid=o.guid=o.guid||a.guid||t.guid++);var l=i.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+r.eventNamespace,u=l[2];u?s.delegate(u,c,a):n.bind(c,a)})},_off:function(e,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(n).undelegate(n),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){function n(){return("string"==typeof t?i[t]:t).apply(i,arguments)}var i=this;return setTimeout(n,e||0)},_hoverable:function(e){
this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,n,i){var s,r,o=this.options[e];if(i=i||{},n=t.Event(n),n.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),n.target=this.element[0],r=n.originalEvent)for(s in r)s in n||(n[s]=r[s]);return this.element.trigger(n,i),!(t.isFunction(o)&&!1===o.apply(this.element[0],[n].concat(i))||n.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,n){t.Widget.prototype["_"+e]=function(i,s,r){"string"==typeof s&&(s={effect:s});var o,a=s?!0===s||"number"==typeof s?n:s.effect||n:e;s=s||{},"number"==typeof s&&(s={duration:s}),o=!t.isEmptyObject(s),s.complete=r,s.delay&&i.delay(s.delay),o&&t.effects&&t.effects.effect[a]?i[e](s):a!==e&&i[a]?i[a](s.duration,s.easing,r):i.queue(function(n){t(this)[e](),r&&r.call(i[0]),n()})}});var r=(t.widget,!1);t(document).mouseup(function(){r=!1});t.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(n){if(!0===t.data(n.target,e.widgetName+".preventClickEvent"))return t.removeData(n.target,e.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!r){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var n=this,i=1===e.which,s=!("string"!=typeof this.options.cancel||!e.target.nodeName)&&t(e.target).closest(this.options.cancel).length;return!(i&&!s&&this._mouseCapture(e))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(e),!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return n._mouseMove(t)},this._mouseUpDelegate=function(t){return n._mouseUp(t)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),r=!0,!0))}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),r=!1,!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}});!function(){function e(t,e,n){return[parseFloat(t[0])*(d.test(t[0])?e/100:1),parseFloat(t[1])*(d.test(t[1])?n/100:1)]}function n(e,n){return parseInt(t.css(e,n),10)||0}function i(e){var n=e[0];return 9===n.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(n)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}t.ui=t.ui||{};var s,r,o=Math.max,a=Math.abs,l=Math.round,c=/left|center|right/,u=/top|center|bottom/,p=/[\+\-]\d+(\.[\d]+)?%?/,h=/^\w+/,d=/%$/,f=t.fn.position;t.position={scrollbarWidth:function(){if(s!==undefined)return s;var e,n,i=t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),r=i.children()[0];return t("body").append(i),e=r.offsetWidth,i.css("overflow","scroll"),n=r.offsetWidth,e===n&&(n=i[0].clientWidth),i.remove(),s=e-n},getScrollInfo:function(e){var n=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),i=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),s="scroll"===n||"auto"===n&&e.width<e.element[0].scrollWidth;return{width:"scroll"===i||"auto"===i&&e.height<e.element[0].scrollHeight?t.position.scrollbarWidth():0,height:s?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var n=t(e||window),i=t.isWindow(n[0]),s=!!n[0]&&9===n[0].nodeType;return{element:n,isWindow:i,isDocument:s,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:i||s?n.width():n.outerWidth(),height:i||s?n.height():n.outerHeight()}}},t.fn.position=function(s){if(!s||!s.of)return f.apply(this,arguments);s=t.extend({},s);var d,g,m,v,y,b,_=t(s.of),w=t.position.getWithinInfo(s.within),k=t.position.getScrollInfo(w),T=(s.collision||"flip").split(" "),S={};return b=i(_),_[0].preventDefault&&(s.at="left top"),g=b.width,m=b.height,v=b.offset,y=t.extend({},v),t.each(["my","at"],function(){var t,e,n=(s[this]||"").split(" ");1===n.length&&(n=c.test(n[0])?n.concat(["center"]):u.test(n[0])?["center"].concat(n):["center","center"]),n[0]=c.test(n[0])?n[0]:"center",n[1]=u.test(n[1])?n[1]:"center",t=p.exec(n[0]),e=p.exec(n[1]),S[this]=[t?t[0]:0,e?e[0]:0],s[this]=[h.exec(n[0])[0],h.exec(n[1])[0]]}),1===T.length&&(T[1]=T[0]),"right"===s.at[0]?y.left+=g:"center"===s.at[0]&&(y.left+=g/2),"bottom"===s.at[1]?y.top+=m:"center"===s.at[1]&&(y.top+=m/2),d=e(S.at,g,m),y.left+=d[0],y.top+=d[1],this.each(function(){var i,c,u=t(this),p=u.outerWidth(),h=u.outerHeight(),f=n(this,"marginLeft"),b=n(this,"marginTop"),C=p+f+n(this,"marginRight")+k.width,A=h+b+n(this,"marginBottom")+k.height,x=t.extend({},y),j=e(S.my,u.outerWidth(),u.outerHeight());"right"===s.my[0]?x.left-=p:"center"===s.my[0]&&(x.left-=p/2),"bottom"===s.my[1]?x.top-=h:"center"===s.my[1]&&(x.top-=h/2),x.left+=j[0],x.top+=j[1],r||(x.left=l(x.left),x.top=l(x.top)),i={marginLeft:f,marginTop:b},t.each(["left","top"],function(e,n){t.ui.position[T[e]]&&t.ui.position[T[e]][n](x,{targetWidth:g,targetHeight:m,elemWidth:p,elemHeight:h,collisionPosition:i,collisionWidth:C,collisionHeight:A,offset:[d[0]+j[0],d[1]+j[1]],my:s.my,at:s.at,within:w,elem:u})}),s.using&&(c=function(t){var e=v.left-x.left,n=e+g-p,i=v.top-x.top,r=i+m-h,l={target:{element:_,left:v.left,top:v.top,width:g,height:m},element:{element:u,left:x.left,top:x.top,width:p,height:h},horizontal:n<0?"left":e>0?"right":"center",vertical:r<0?"top":i>0?"bottom":"middle"};g<p&&a(e+n)<g&&(l.horizontal="center"),m<h&&a(i+r)<m&&(l.vertical="middle"),o(a(e),a(n))>o(a(i),a(r))?l.important="horizontal":l.important="vertical",s.using.call(this,t,l)}),u.offset(t.extend(x,{using:c}))})},t.ui.position={fit:{left:function(t,e){var n,i=e.within,s=i.isWindow?i.scrollLeft:i.offset.left,r=i.width,a=t.left-e.collisionPosition.marginLeft,l=s-a,c=a+e.collisionWidth-r-s;e.collisionWidth>r?l>0&&c<=0?(n=t.left+l+e.collisionWidth-r-s,t.left+=l-n):t.left=c>0&&l<=0?s:l>c?s+r-e.collisionWidth:s:l>0?t.left+=l:c>0?t.left-=c:t.left=o(t.left-a,t.left)},top:function(t,e){var n,i=e.within,s=i.isWindow?i.scrollTop:i.offset.top,r=e.within.height,a=t.top-e.collisionPosition.marginTop,l=s-a,c=a+e.collisionHeight-r-s;e.collisionHeight>r?l>0&&c<=0?(n=t.top+l+e.collisionHeight-r-s,t.top+=l-n):t.top=c>0&&l<=0?s:l>c?s+r-e.collisionHeight:s:l>0?t.top+=l:c>0?t.top-=c:t.top=o(t.top-a,t.top)}},flip:{left:function(t,e){var n,i,s=e.within,r=s.offset.left+s.scrollLeft,o=s.width,l=s.isWindow?s.scrollLeft:s.offset.left,c=t.left-e.collisionPosition.marginLeft,u=c-l,p=c+e.collisionWidth-o-l,h="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,d="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];u<0?((n=t.left+h+d+f+e.collisionWidth-o-r)<0||n<a(u))&&(t.left+=h+d+f):p>0&&((i=t.left-e.collisionPosition.marginLeft+h+d+f-l)>0||a(i)<p)&&(t.left+=h+d+f)},top:function(t,e){var n,i,s=e.within,r=s.offset.top+s.scrollTop,o=s.height,l=s.isWindow?s.scrollTop:s.offset.top,c=t.top-e.collisionPosition.marginTop,u=c-l,p=c+e.collisionHeight-o-l,h="top"===e.my[1],d=h?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,f="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,g=-2*e.offset[1];u<0?((i=t.top+d+f+g+e.collisionHeight-o-r)<0||i<a(u))&&(t.top+=d+f+g):p>0&&((n=t.top-e.collisionPosition.marginTop+d+f+g-l)>0||a(n)<p)&&(t.top+=d+f+g)}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,n,i,s,o,a=document.getElementsByTagName("body")[0],l=document.createElement("div");e=document.createElement(a?"div":"body"),i={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},a&&t.extend(i,{position:"absolute",left:"-1000px",top:"-1000px"});for(o in i)e.style[o]=i[o];e.appendChild(l),n=a||document.documentElement,n.insertBefore(e,n.firstChild),l.style.cssText="position: absolute; left: 10.7432222px;",s=t(l).offset().left,r=s>10&&s<11,e.innerHTML="",n.removeChild(e)}()}();t.ui.position,t.widget("ui.sortable",t.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,n){return t>=e&&t<e+n},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),t.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(e,n){var i=null,s=!1,r=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(e),t(e.target).parents().each(function(){if(t.data(this,r.widgetName+"-item")===r)return i=t(this),!1}),t.data(e.target,r.widgetName+"-item")===r&&(i=t(e.target)),!!i&&(!(this.options.handle&&!n&&(t(this.options.handle,i).find("*").addBack().each(function(){this===e.target&&(s=!0)}),!s))&&(this.currentItem=i,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(e,n,i){var s,r,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(r=this.document.find("body"),this.storedCursor=r.css("cursor"),r.css("cursor",o.cursor),this.storedStylesheet=t("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(r)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(s=this.containers.length-1;s>=0;s--)this.containers[s]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!o.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var n,i,s,r,o=this.options,a=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+o.scrollSpeed:e.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+o.scrollSpeed:e.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(e.pageY-this.document.scrollTop()<o.scrollSensitivity?a=this.document.scrollTop(this.document.scrollTop()-o.scrollSpeed):this.window.height()-(e.pageY-this.document.scrollTop())<o.scrollSensitivity&&(a=this.document.scrollTop(this.document.scrollTop()+o.scrollSpeed)),e.pageX-this.document.scrollLeft()<o.scrollSensitivity?a=this.document.scrollLeft(this.document.scrollLeft()-o.scrollSpeed):this.window.width()-(e.pageX-this.document.scrollLeft())<o.scrollSensitivity&&(a=this.document.scrollLeft(this.document.scrollLeft()+o.scrollSpeed))),!1!==a&&t.ui.ddmanager&&!o.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),n=this.items.length-1;n>=0;n--)if(i=this.items[n],s=i.item[0],(r=this._intersectsWithPointer(i))&&i.instance===this.currentContainer&&!(s===this.currentItem[0]||this.placeholder[1===r?"next":"prev"]()[0]===s||t.contains(this.placeholder[0],s)||"semi-dynamic"===this.options.type&&t.contains(this.element[0],s))){if(this.direction=1===r?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(i))break;this._rearrange(e,i),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,n){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var i=this,s=this.placeholder.offset(),r=this.options.axis,o={};r&&"x"!==r||(o.left=s.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),r&&"y"!==r||(o.top=s.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){i._clear(e)})}else this._clear(e,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var n=this._getItemsAsjQuery(e&&e.connected),i=[];return e=e||{},t(n).each(function(){var n=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);n&&i.push((e.key||n[1]+"[]")+"="+(e.key&&e.expression?n[1]:n[2]))}),!i.length&&e.key&&i.push(e.key+"="),i.join("&")},toArray:function(e){var n=this._getItemsAsjQuery(e&&e.connected),i=[];return e=e||{},n.each(function(){i.push(t(e.item||this).attr(e.attribute||"id")||"")}),i},_intersectsWith:function(t){var e=this.positionAbs.left,n=e+this.helperProportions.width,i=this.positionAbs.top,s=i+this.helperProportions.height,r=t.left,o=r+t.width,a=t.top,l=a+t.height,c=this.offset.click.top,u=this.offset.click.left,p="x"===this.options.axis||i+c>a&&i+c<l,h="y"===this.options.axis||e+u>r&&e+u<o,d=p&&h;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?d:r<e+this.helperProportions.width/2&&n-this.helperProportions.width/2<o&&a<i+this.helperProportions.height/2&&s-this.helperProportions.height/2<l},_intersectsWithPointer:function(t){var e="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),n="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),i=e&&n,s=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return!!i&&(this.floating?r&&"right"===r||"down"===s?2:1:s&&("down"===s?2:1))},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),n=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),i=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?"right"===s&&n||"left"===s&&!n:i&&("down"===i&&e||"up"===i&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){function n(){a.push(this)}var i,s,r,o,a=[],l=[],c=this._connectWith();if(c&&e)for(i=c.length-1;i>=0;i--)for(r=t(c[i],this.document[0]),s=r.length-1;s>=0;s--)(o=t.data(r[s],this.widgetFullName))&&o!==this&&!o.options.disabled&&l.push([t.isFunction(o.options.items)?o.options.items.call(o.element):t(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(l.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=l.length-1;i>=0;i--)l[i][0].each(n);return t(a)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var n=0;n<e.length;n++)if(e[n]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var n,i,s,r,o,a,l,c,u=this.items,p=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(n=h.length-1;n>=0;n--)for(s=t(h[n],this.document[0]),i=s.length-1;i>=0;i--)(r=t.data(s[i],this.widgetFullName))&&r!==this&&!r.options.disabled&&(p.push([t.isFunction(r.options.items)?r.options.items.call(r.element[0],e,{item:this.currentItem}):t(r.options.items,r.element),r]),this.containers.push(r));for(n=p.length-1;n>=0;n--)for(o=p[n][1],a=p[n][0],i=0,c=a.length;i<c;i++)l=t(a[i]),l.data(this.widgetName+"-item",o),u.push({item:l,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(e){this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,i,s,r;for(n=this.items.length-1;n>=0;n--)i=this.items[n],i.instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0]||(s=this.options.toleranceElement?t(this.options.toleranceElement,i.item):i.item,e||(i.width=s.outerWidth(),i.height=s.outerHeight()),r=s.offset(),i.left=r.left,i.top=r.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)r=this.containers[n].element.offset(),this.containers[n].containerCache.left=r.left,this.containers[n].containerCache.top=r.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(e){e=e||this;var n,i=e.options;i.placeholder&&i.placeholder.constructor!==String||(n=i.placeholder,i.placeholder={element:function(){var i=e.currentItem[0].nodeName.toLowerCase(),s=t("<"+i+">",e.document[0]).addClass(n||e.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tbody"===i?e._createTrPlaceholder(e.currentItem.find("tr").eq(0),t("<tr>",e.document[0]).appendTo(s)):"tr"===i?e._createTrPlaceholder(e.currentItem,s):"img"===i&&s.attr("src",e.currentItem.attr("src")),n||s.css("visibility","hidden"),s},update:function(t,s){n&&!i.forcePlaceholderSize||(s.height()||s.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),s.width()||s.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(i.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),i.placeholder.update(e,e.placeholder)},_createTrPlaceholder:function(e,n){var i=this;e.children().each(function(){t("<td>&#160;</td>",i.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(n)})},_contactContainers:function(e){var n,i,s,r,o,a,l,c,u,p,h=null,d=null;for(n=this.containers.length-1;n>=0;n--)if(!t.contains(this.currentItem[0],this.containers[n].element[0]))if(this._intersectsWith(this.containers[n].containerCache)){if(h&&t.contains(this.containers[n].element[0],h.element[0]))continue;h=this.containers[n],d=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",e,this._uiHash(this)),this.containers[n].containerCache.over=0);if(h)if(1===this.containers.length)this.containers[d].containerCache.over||(this.containers[d]._trigger("over",e,this._uiHash(this)),this.containers[d].containerCache.over=1);else{for(s=1e4,r=null,u=h.floating||this._isFloating(this.currentItem),o=u?"left":"top",a=u?"width":"height",p=u?"clientX":"clientY",i=this.items.length-1;i>=0;i--)t.contains(this.containers[d].element[0],this.items[i].item[0])&&this.items[i].item[0]!==this.currentItem[0]&&(l=this.items[i].item.offset()[o],c=!1,e[p]-l>this.items[i][a]/2&&(c=!0),Math.abs(e[p]-l)<s&&(s=Math.abs(e[p]-l),r=this.items[i],this.direction=c?"up":"down"));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[d])return void(this.currentContainer.containerCache.over||(this.containers[d]._trigger("over",e,this._uiHash()),this.currentContainer.containerCache.over=1));r?this._rearrange(e,r,null,!0):this._rearrange(e,null,this.containers[d].element,!0),this._trigger("change",e,this._uiHash()),this.containers[d]._trigger("change",e,this._uiHash(this)),this.currentContainer=this.containers[d],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[d]._trigger("over",e,this._uiHash(this)),this.containers[d].containerCache.over=1}},_createHelper:function(e){var n=this.options,i=t.isFunction(n.helper)?t(n.helper.apply(this.element[0],[e,this.currentItem])):"clone"===n.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||t("parent"!==n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),i[0].style.width&&!n.forceHelperSize||i.width(this.currentItem.width()),i[0].style.height&&!n.forceHelperSize||i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,n,i,s=this.options;"parent"===s.containment&&(s.containment=this.helper[0].parentNode),"document"!==s.containment&&"window"!==s.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===s.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===s.containment?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(s.containment)||(e=t(s.containment)[0],n=t(s.containment).offset(),i="hidden"!==t(e).css("overflow"),this.containment=[n.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,n.left+(i?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(i?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,n){n||(n=this.position);var i="absolute"===e?1:-1,s="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(s[0].tagName);return{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():r?0:s.scrollTop())*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():r?0:s.scrollLeft())*i}},_generatePosition:function(e){var n,i,s=this.options,r=e.pageX,o=e.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(r=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(r=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),s.grid&&(n=this.originalPageY+Math.round((o-this.originalPageY)/s.grid[1])*s.grid[1],o=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-s.grid[1]:n+s.grid[1]:n,i=this.originalPageX+Math.round((r-this.originalPageX)/s.grid[0])*s.grid[0],r=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-s.grid[0]:i+s.grid[0]:i)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(t,e,n,i){n?n[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var s=this.counter;this._delay(function(){s===this.counter&&this.refreshPositions(!i)})},_clear:function(t,e){function n(t,e,n){return function(i){n._trigger(t,i,e._uiHash(e))}}this.reverting=!1;var i,s=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){
for(i in this._storedCSS)"auto"!==this._storedCSS[i]&&"static"!==this._storedCSS[i]||(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&s.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||s.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(s.push(function(t){this._trigger("remove",t,this._uiHash())}),s.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),s.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)e||s.push(n("deactivate",this,this.containers[i])),this.containers[i].containerCache.over&&(s.push(n("out",this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!e){for(i=0;i<s.length;i++)s[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===t.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(e){var n=e||this;return{helper:n.helper,placeholder:n.placeholder||t([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:e?e.element:null}}}),t.widget("ui.accordion",{version:"1.11.4",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var e=this.options;this.prevShow=this.prevHide=t(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),e.collapsible||!1!==e.active&&null!=e.active||(e.active=0),this._processPanels(),e.active<0&&(e.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():t()}},_createIcons:function(){var e=this.options.icons;e&&(t("<span>").addClass("ui-accordion-header-icon ui-icon "+e.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(e.header).addClass(e.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var t;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").removeUniqueId(),this._destroyIcons(),t=this.headers.next().removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&t.css("height","")},_setOption:function(t,e){if("active"===t)return void this._activate(e);"event"===t&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(e)),this._super(t,e),"collapsible"!==t||e||!1!==this.options.active||this._activate(0),"icons"===t&&(this._destroyIcons(),e&&this._createIcons()),"disabled"===t&&(this.element.toggleClass("ui-state-disabled",!!e).attr("aria-disabled",e),this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!e))},_keydown:function(e){if(!e.altKey&&!e.ctrlKey){var n=t.ui.keyCode,i=this.headers.length,s=this.headers.index(e.target),r=!1;switch(e.keyCode){case n.RIGHT:case n.DOWN:r=this.headers[(s+1)%i];break;case n.LEFT:case n.UP:r=this.headers[(s-1+i)%i];break;case n.SPACE:case n.ENTER:this._eventHandler(e);break;case n.HOME:r=this.headers[0];break;case n.END:r=this.headers[i-1]}r&&(t(e.target).attr("tabIndex",-1),t(r).attr("tabIndex",0),r.focus(),e.preventDefault())}},_panelKeyDown:function(e){e.keyCode===t.ui.keyCode.UP&&e.ctrlKey&&t(e.currentTarget).prev().focus()},refresh:function(){var e=this.options;this._processPanels(),!1===e.active&&!0===e.collapsible||!this.headers.length?(e.active=!1,this.active=t()):!1===e.active?this._activate(0):this.active.length&&!t.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(e.active=!1,this.active=t()):this._activate(Math.max(0,e.active-1)):e.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var t=this.headers,e=this.panels;this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-state-default ui-corner-all"),this.panels=this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide(),e&&(this._off(t.not(this.headers)),this._off(e.not(this.panels)))},_refresh:function(){var e,n=this.options,i=n.heightStyle,s=this.element.parent();this.active=this._findActive(n.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(){var e=t(this),n=e.uniqueId().attr("id"),i=e.next(),s=i.uniqueId().attr("id");e.attr("aria-controls",s),i.attr("aria-labelledby",n)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(n.event),"fill"===i?(e=s.height(),this.element.siblings(":visible").each(function(){var n=t(this),i=n.css("position");"absolute"!==i&&"fixed"!==i&&(e-=n.outerHeight(!0))}),this.headers.each(function(){e-=t(this).outerHeight(!0)}),this.headers.next().each(function(){t(this).height(Math.max(0,e-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===i&&(e=0,this.headers.next().each(function(){e=Math.max(e,t(this).css("height","").height())}).height(e))},_activate:function(e){var n=this._findActive(e)[0];n!==this.active[0]&&(n=n||this.active[0],this._eventHandler({target:n,currentTarget:n,preventDefault:t.noop}))},_findActive:function(e){return"number"==typeof e?this.headers.eq(e):t()},_setupEvents:function(e){var n={keydown:"_keydown"};e&&t.each(e.split(" "),function(t,e){n[e]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,n),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(e){var n=this.options,i=this.active,s=t(e.currentTarget),r=s[0]===i[0],o=r&&n.collapsible,a=o?t():s.next(),l=i.next(),c={oldHeader:i,oldPanel:l,newHeader:o?t():s,newPanel:a};e.preventDefault(),r&&!n.collapsible||!1===this._trigger("beforeActivate",e,c)||(n.active=!o&&this.headers.index(s),this.active=r?t():s,this._toggle(c),i.removeClass("ui-accordion-header-active ui-state-active"),n.icons&&i.children(".ui-accordion-header-icon").removeClass(n.icons.activeHeader).addClass(n.icons.header),r||(s.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),n.icons&&s.children(".ui-accordion-header-icon").removeClass(n.icons.header).addClass(n.icons.activeHeader),s.next().addClass("ui-accordion-content-active")))},_toggle:function(e){var n=e.newPanel,i=this.prevShow.length?this.prevShow:e.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=n,this.prevHide=i,this.options.animate?this._animate(n,i,e):(i.hide(),n.show(),this._toggleComplete(e)),i.attr({"aria-hidden":"true"}),i.prev().attr({"aria-selected":"false","aria-expanded":"false"}),n.length&&i.length?i.prev().attr({tabIndex:-1,"aria-expanded":"false"}):n.length&&this.headers.filter(function(){return 0===parseInt(t(this).attr("tabIndex"),10)}).attr("tabIndex",-1),n.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(t,e,n){var i,s,r,o=this,a=0,l=t.css("box-sizing"),c=t.length&&(!e.length||t.index()<e.index()),u=this.options.animate||{},p=c&&u.down||u,h=function(){o._toggleComplete(n)};return"number"==typeof p&&(r=p),"string"==typeof p&&(s=p),s=s||p.easing||u.easing,r=r||p.duration||u.duration,e.length?t.length?(i=t.show().outerHeight(),e.animate(this.hideProps,{duration:r,easing:s,step:function(t,e){e.now=Math.round(t)}}),void t.hide().animate(this.showProps,{duration:r,easing:s,complete:h,step:function(t,n){n.now=Math.round(t),"height"!==n.prop?"content-box"===l&&(a+=n.now):"content"!==o.options.heightStyle&&(n.now=Math.round(i-e.outerHeight()-a),a=0)}})):e.animate(this.hideProps,r,s,h):t.animate(this.showProps,r,s,h)},_toggleComplete:function(t){var e=t.oldPanel;e.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),e.length&&(e.parent()[0].className=e.parent()[0].className),this._trigger("activate",null,t)}}),t.widget("ui.menu",{version:"1.11.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item":function(t){t.preventDefault()},"click .ui-menu-item":function(e){var n=t(e.target);!this.mouseHandled&&n.not(".ui-state-disabled").length&&(this.select(e),e.isPropagationStopped()||(this.mouseHandled=!0),n.has(".ui-menu").length?this.expand(e):!this.element.is(":focus")&&t(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(e){if(!this.previousFilter){var n=t(e.currentTarget);n.siblings(".ui-state-active").removeClass("ui-state-active"),this.focus(e,n)}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var n=this.active||this.element.find(this.options.items).eq(0);e||this.focus(t,n)},blur:function(e){this._delay(function(){t.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(e)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){this._closeOnDocumentClick(t)&&this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var e=t(this);e.data("ui-menu-submenu-carat")&&e.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(e){var n,i,s,r,o=!0;switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move("first","first",e);break;case t.ui.keyCode.END:this._move("last","last",e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:o=!1,i=this.previousFilter||"",s=String.fromCharCode(e.keyCode),r=!1,clearTimeout(this.filterTimer),s===i?r=!0:s=i+s,n=this._filterMenuItems(s),n=r&&-1!==n.index(this.active.next())?this.active.nextAll(".ui-menu-item"):n,n.length||(s=String.fromCharCode(e.keyCode),n=this._filterMenuItems(s)),n.length?(this.focus(e,n),this.previousFilter=s,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}o&&e.preventDefault()},_activate:function(t){this.active.is(".ui-state-disabled")||(this.active.is("[aria-haspopup='true']")?this.expand(t):this.select(t))},refresh:function(){var e,n,i=this,s=this.options.icons.submenu,r=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),r.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var e=t(this),n=e.parent(),i=t("<span>").addClass("ui-menu-icon ui-icon "+s).data("ui-menu-submenu-carat",!0);n.attr("aria-haspopup","true").prepend(i),e.attr("aria-labelledby",n.attr("id"))}),e=r.add(this.element),n=e.find(this.options.items),n.not(".ui-menu-item").each(function(){var e=t(this);i._isDivider(e)&&e.addClass("ui-widget-content ui-menu-divider")}),n.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),n.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!t.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){"icons"===t&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(e.submenu),"disabled"===t&&this.element.toggleClass("ui-state-disabled",!!e).attr("aria-disabled",e),this._super(t,e)},focus:function(t,e){var n,i;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),i=this.active.addClass("ui-state-focus").removeClass("ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),this.active.parent().closest(".ui-menu-item").addClass("ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),n=e.children(".ui-menu"),n.length&&t&&/^mouse/.test(t.type)&&this._startOpening(n),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(e){var n,i,s,r,o,a;this._hasScroll()&&(n=parseFloat(t.css(this.activeMenu[0],"borderTopWidth"))||0,i=parseFloat(t.css(this.activeMenu[0],"paddingTop"))||0,s=e.offset().top-this.activeMenu.offset().top-n-i,r=this.activeMenu.scrollTop(),o=this.activeMenu.height(),a=e.outerHeight(),s<0?this.activeMenu.scrollTop(r+s):s+a>o&&this.activeMenu.scrollTop(r+s-o+a))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this.active.removeClass("ui-state-focus"),this.active=null,this._trigger("blur",t,{item:this.active}))},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(e){var n=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(e,n){clearTimeout(this.timer),this.timer=this._delay(function(){var i=n?this.element:t(e&&e.target).closest(this.element.find(".ui-menu"));i.length||(i=this.element),this._close(i),this.blur(e),this.activeMenu=i},this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")},_closeOnDocumentClick:function(e){return!t(e.target).closest(".ui-menu").length},_isDivider:function(t){return!/[^\-\u2014\u2013\s]/.test(t.text())},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,n){var i;this.active&&(i="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),i&&i.length&&this.active||(i=this.activeMenu.find(this.options.items)[e]()),this.focus(n,i)},nextPage:function(e){var n,i,s;if(!this.active)return void this.next(e);this.isLastItem()||(this._hasScroll()?(i=this.active.offset().top,s=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return n=t(this),n.offset().top-i-s<0}),this.focus(e,n)):this.focus(e,this.activeMenu.find(this.options.items)[this.active?"last":"first"]()))},previousPage:function(e){var n,i,s;if(!this.active)return void this.next(e);this.isFirstItem()||(this._hasScroll()?(i=this.active.offset().top,s=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return n=t(this),n.offset().top-i+s>0}),this.focus(e,n)):this.focus(e,this.activeMenu.find(this.options.items).first()))},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||t(e.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,n)},_filterMenuItems:function(e){var n=e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),i=new RegExp("^"+n,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return i.test(t.trim(t(this).text()))})}});t.widget("ui.autocomplete",{version:"1.11.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var e,n,i,s=this.element[0].nodeName.toLowerCase(),r="textarea"===s,o="input"===s;this.isMultiLine=!!r||!o&&this.element.prop("isContentEditable"),this.valueMethod=this.element[r||o?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(s){if(this.element.prop("readOnly"))return e=!0,i=!0,void(n=!0);e=!1,i=!1,n=!1;var r=t.ui.keyCode;switch(s.keyCode){case r.PAGE_UP:e=!0,this._move("previousPage",s);break;case r.PAGE_DOWN:e=!0,this._move("nextPage",s);break;case r.UP:e=!0,this._keyEvent("previous",s);break;case r.DOWN:e=!0,this._keyEvent("next",s);break;case r.ENTER:this.menu.active&&(e=!0,s.preventDefault(),this.menu.select(s));break;case r.TAB:this.menu.active&&this.menu.select(s);break;case r.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(s),s.preventDefault());break;default:n=!0,this._searchTimeout(s)}},keypress:function(i){if(e)return e=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||i.preventDefault());if(!n){var s=t.ui.keyCode;switch(i.keyCode){case s.PAGE_UP:this._move("previousPage",i);break;case s.PAGE_DOWN:this._move("nextPage",i);break;case s.UP:this._keyEvent("previous",i);break;case s.DOWN:this._keyEvent("next",i)}}},input:function(t){if(i)return i=!1,void t.preventDefault();this._searchTimeout(t)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){if(this.cancelBlur)return void delete this.cancelBlur;clearTimeout(this.searching),this.close(t),this._change(t)}}),this._initSource(),this.menu=t("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var n=this.menu.element[0];t(e.target).closest(".ui-menu-item").length||this._delay(function(){var e=this;this.document.one("mousedown",function(i){i.target===e.element[0]||i.target===n||t.contains(n,i.target)||e.close()})})},menufocus:function(e,n){var i,s;if(this.isNewMenu&&(this.isNewMenu=!1,e.originalEvent&&/^mouse/.test(e.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){t(e.target).trigger(e.originalEvent)});s=n.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",e,{item:s})&&e.originalEvent&&/^key/.test(e.originalEvent.type)&&this._value(s.value),(i=n.item.attr("aria-label")||s.value)&&t.trim(i).length&&(this.liveRegion.children().hide(),t("<div>").text(i).appendTo(this.liveRegion))},menuselect:function(t,e){var n=e.item.data("ui-autocomplete-item"),i=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=i,this._delay(function(){this.previous=i,this.selectedItem=n})),!1!==this._trigger("select",t,{item:n})&&this._value(n.value),this.term=this._value(),this.close(t),this.selectedItem=n}}),this.liveRegion=t("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this._appendTo()),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_appendTo:function(){var e=this.options.appendTo;return e&&(e=e.jquery||e.nodeType?t(e):this.document.find(e).eq(0)),e&&e[0]||(e=this.element.closest(".ui-front")),e.length||(e=this.document[0].body),e},_initSource:function(){var e,n,i=this;t.isArray(this.options.source)?(e=this.options.source,this.source=function(n,i){i(t.ui.autocomplete.filter(e,n.term))}):"string"==typeof this.options.source?(n=this.options.source,this.source=function(e,s){i.xhr&&i.xhr.abort(),i.xhr=t.ajax({url:n,data:e,dataType:"json",success:function(t){s(t)},error:function(){s([])}})}):this.source=this.options.source},_searchTimeout:function(t){clearTimeout(this.searching),this.searching=this._delay(function(){var e=this.term===this._value(),n=this.menu.element.is(":visible"),i=t.altKey||t.ctrlKey||t.metaKey||t.shiftKey;e&&(!e||n||i)||(this.selectedItem=null,this.search(null,t))},this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):!1!==this._trigger("search",e)?this._search(t):void 0},_search:function(t){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var e=++this.requestIndex;return t.proxy(function(t){e===this.requestIndex&&this.__response(t),--this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(t){t&&(t=this._normalize(t)),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:t.map(e,function(e){return"string"==typeof e?{label:e,value:e}:t.extend({},e,{label:e.label||e.value,value:e.value||e.label})})},_suggest:function(e){var n=this.menu.element.empty();this._renderMenu(n,e),this.isNewMenu=!0,this.menu.refresh(),n.show(),this._resizeMenu(),n.position(t.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(e,n){var i=this;t.each(n,function(t,n){i._renderItemData(e,n)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(e,n){return t("<li>").text(n.label).appendTo(e)},_move:function(t,e){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[t](e):void this.search(null,e)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(t,e),e.preventDefault())}}),t.extend(t.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,n){var i=new RegExp(t.ui.autocomplete.escapeRegex(n),"i");return t.grep(e,function(t){return i.test(t.label||t.value||t)})}}),t.widget("ui.autocomplete",t.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(t>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var n;this._superApply(arguments),this.options.disabled||this.cancelSearch||(n=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.children().hide(),t("<div>").text(n).appendTo(this.liveRegion))}});t.ui.autocomplete}),function(){function t(t){function e(e,n,i,s,r,o){for(;r>=0&&r<o;r+=t){var a=s?s[r]:r;i=n(i,e[a],a,e)}return i}return function(n,i,s,r){i=b(i,r,4);var o=!A(n)&&y.keys(n),a=(o||n).length,l=t>0?0:a-1;return arguments.length<3&&(s=n[o?o[l]:l],l+=t),e(n,i,s,o,l,a)}}function e(t){return function(e,n,i){n=_(n,i);for(var s=C(e),r=t>0?0:s-1;r>=0&&r<s;r+=t)if(n(e[r],r,e))return r;return-1}}function n(t,e,n){return function(i,s,r){var o=0,a=C(i);if("number"==typeof r)t>0?o=r>=0?r:Math.max(r+a,o):a=r>=0?Math.min(r+1,a):r+a+1;else if(n&&r&&a)return r=n(i,s),i[r]===s?r:-1;if(s!==s)return r=e(u.call(i,o,a),y.isNaN),r>=0?r+o:-1;for(r=t>0?o:a-1;r>=0&&r<a;r+=t)if(i[r]===s)return r;return-1}}function i(t,e){var n=P.length,i=t.constructor,s=y.isFunction(i)&&i.prototype||a,r="constructor";for(y.has(t,r)&&!y.contains(e,r)&&e.push(r);n--;)(r=P[n])in t&&t[r]!==s[r]&&!y.contains(e,r)&&e.push(r)}var s=this,r=s._,o=Array.prototype,a=Object.prototype,l=Function.prototype,c=o.push,u=o.slice,p=a.toString,h=a.hasOwnProperty,d=Array.isArray,f=Object.keys,g=l.bind,m=Object.create,v=function(){},y=function(t){return t instanceof y?t:this instanceof y?void(this._wrapped=t):new y(t)};"undefined"!=typeof exports?(void 0!==module&&module.exports&&(exports=module.exports=y),exports._=y):s._=y,y.VERSION="1.8.3";var b=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,s){return t.call(e,n,i,s)};case 4:return function(n,i,s,r){return t.call(e,n,i,s,r)}}return function(){return t.apply(e,arguments)}},_=function(t,e,n){return null==t?y.identity:y.isFunction(t)?b(t,e,n):y.isObject(t)?y.matcher(t):y.property(t)};y.iteratee=function(t,e){return _(t,e,Infinity)};var w=function(t,e){return function(n){var i=arguments.length;if(i<2||null==n)return n;for(var s=1;s<i;s++)for(var r=arguments[s],o=t(r),a=o.length,l=0;l<a;l++){var c=o[l];e&&void 0!==n[c]||(n[c]=r[c])}return n}},k=function(t){if(!y.isObject(t))return{};if(m)return m(t);v.prototype=t;var e=new v;return v.prototype=null,e},T=function(t){return function(e){return null==e?void 0:e[t]}},S=Math.pow(2,53)-1,C=T("length"),A=function(t){var e=C(t);return"number"==typeof e&&e>=0&&e<=S};y.each=y.forEach=function(t,e,n){e=b(e,n);var i,s;if(A(t))for(i=0,s=t.length;i<s;i++)e(t[i],i,t);else{var r=y.keys(t);for(i=0,s=r.length;i<s;i++)e(t[r[i]],r[i],t)}return t},y.map=y.collect=function(t,e,n){e=_(e,n);for(var i=!A(t)&&y.keys(t),s=(i||t).length,r=Array(s),o=0;o<s;o++){var a=i?i[o]:o;r[o]=e(t[a],a,t)}return r},y.reduce=y.foldl=y.inject=t(1),y.reduceRight=y.foldr=t(-1),y.find=y.detect=function(t,e,n){var i;if(void 0!==(i=A(t)?y.findIndex(t,e,n):y.findKey(t,e,n))&&-1!==i)return t[i]},y.filter=y.select=function(t,e,n){var i=[];return e=_(e,n),y.each(t,function(t,n,s){e(t,n,s)&&i.push(t)}),i},y.reject=function(t,e,n){return y.filter(t,y.negate(_(e)),n)},y.every=y.all=function(t,e,n){e=_(e,n);for(var i=!A(t)&&y.keys(t),s=(i||t).length,r=0;r<s;r++){var o=i?i[r]:r;if(!e(t[o],o,t))return!1}return!0},y.some=y.any=function(t,e,n){e=_(e,n);for(var i=!A(t)&&y.keys(t),s=(i||t).length,r=0;r<s;r++){var o=i?i[r]:r;if(e(t[o],o,t))return!0}return!1},y.contains=y.includes=y.include=function(t,e,n,i){return A(t)||(t=y.values(t)),("number"!=typeof n||i)&&(n=0),y.indexOf(t,e,n)>=0},y.invoke=function(t,e){var n=u.call(arguments,2),i=y.isFunction(e);return y.map(t,function(t){var s=i?e:t[e];return null==s?s:s.apply(t,n)})},y.pluck=function(t,e){return y.map(t,y.property(e))},y.where=function(t,e){return y.filter(t,y.matcher(e))},y.findWhere=function(t,e){return y.find(t,y.matcher(e))},y.max=function(t,e,n){var i,s,r=-Infinity,o=-Infinity;if(null==e&&null!=t){t=A(t)?t:y.values(t);for(var a=0,l=t.length;a<l;a++)(i=t[a])>r&&(r=i)}else e=_(e,n),y.each(t,function(t,n,i){((s=e(t,n,i))>o||s===-Infinity&&r===-Infinity)&&(r=t,o=s)});return r},y.min=function(t,e,n){var i,s,r=Infinity,o=Infinity;if(null==e&&null!=t){t=A(t)?t:y.values(t);for(var a=0,l=t.length;a<l;a++)(i=t[a])<r&&(r=i)}else e=_(e,n),y.each(t,function(t,n,i){((s=e(t,n,i))<o||s===Infinity&&r===Infinity)&&(r=t,o=s)});return r},y.shuffle=function(t){for(var e,n=A(t)?t:y.values(t),i=n.length,s=Array(i),r=0;r<i;r++)e=y.random(0,r),e!==r&&(s[r]=s[e]),s[e]=n[r];return s},y.sample=function(t,e,n){return null==e||n?(A(t)||(t=y.values(t)),t[y.random(t.length-1)]):y.shuffle(t).slice(0,Math.max(0,e))},y.sortBy=function(t,e,n){return e=_(e,n),y.pluck(y.map(t,function(t,n,i){return{value:t,index:n,criteria:e(t,n,i)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(n<i||void 0===i)return-1}return t.index-e.index}),"value")};var x=function(t){return function(e,n,i){var s={};return n=_(n,i),y.each(e,function(i,r){var o=n(i,r,e);t(s,i,o)}),s}};y.groupBy=x(function(t,e,n){y.has(t,n)?t[n].push(e):t[n]=[e]}),y.indexBy=x(function(t,e,n){t[n]=e}),y.countBy=x(function(t,e,n){y.has(t,n)?t[n]++:t[n]=1}),y.toArray=function(t){return t?y.isArray(t)?u.call(t):A(t)?y.map(t,y.identity):y.values(t):[]},y.size=function(t){return null==t?0:A(t)?t.length:y.keys(t).length},y.partition=function(t,e,n){e=_(e,n);var i=[],s=[];return y.each(t,function(t,n,r){(e(t,n,r)?i:s).push(t)}),[i,s]},y.first=y.head=y.take=function(t,e,n){if(null!=t)return null==e||n?t[0]:y.initial(t,t.length-e)},y.initial=function(t,e,n){
return u.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},y.last=function(t,e,n){if(null!=t)return null==e||n?t[t.length-1]:y.rest(t,Math.max(0,t.length-e))},y.rest=y.tail=y.drop=function(t,e,n){return u.call(t,null==e||n?1:e)},y.compact=function(t){return y.filter(t,y.identity)};var j=function(t,e,n,i){for(var s=[],r=0,o=i||0,a=C(t);o<a;o++){var l=t[o];if(A(l)&&(y.isArray(l)||y.isArguments(l))){e||(l=j(l,e,n));var c=0,u=l.length;for(s.length+=u;c<u;)s[r++]=l[c++]}else n||(s[r++]=l)}return s};y.flatten=function(t,e){return j(t,e,!1)},y.without=function(t){return y.difference(t,u.call(arguments,1))},y.uniq=y.unique=function(t,e,n,i){y.isBoolean(e)||(i=n,n=e,e=!1),null!=n&&(n=_(n,i));for(var s=[],r=[],o=0,a=C(t);o<a;o++){var l=t[o],c=n?n(l,o,t):l;e?(o&&r===c||s.push(l),r=c):n?y.contains(r,c)||(r.push(c),s.push(l)):y.contains(s,l)||s.push(l)}return s},y.union=function(){return y.uniq(j(arguments,!0,!0))},y.intersection=function(t){for(var e=[],n=arguments.length,i=0,s=C(t);i<s;i++){var r=t[i];if(!y.contains(e,r)){for(var o=1;o<n&&y.contains(arguments[o],r);o++);o===n&&e.push(r)}}return e},y.difference=function(t){var e=j(arguments,!0,!0,1);return y.filter(t,function(t){return!y.contains(e,t)})},y.zip=function(){return y.unzip(arguments)},y.unzip=function(t){for(var e=t&&y.max(t,C).length||0,n=Array(e),i=0;i<e;i++)n[i]=y.pluck(t,i);return n},y.object=function(t,e){for(var n={},i=0,s=C(t);i<s;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},y.findIndex=e(1),y.findLastIndex=e(-1),y.sortedIndex=function(t,e,n,i){n=_(n,i,1);for(var s=n(e),r=0,o=C(t);r<o;){var a=Math.floor((r+o)/2);n(t[a])<s?r=a+1:o=a}return r},y.indexOf=n(1,y.findIndex,y.sortedIndex),y.lastIndexOf=n(-1,y.findLastIndex),y.range=function(t,e,n){null==e&&(e=t||0,t=0),n=n||1;for(var i=Math.max(Math.ceil((e-t)/n),0),s=Array(i),r=0;r<i;r++,t+=n)s[r]=t;return s};var I=function(t,e,n,i,s){if(!(i instanceof e))return t.apply(n,s);var r=k(t.prototype),o=t.apply(r,s);return y.isObject(o)?o:r};y.bind=function(t,e){if(g&&t.bind===g)return g.apply(t,u.call(arguments,1));if(!y.isFunction(t))throw new TypeError("Bind must be called on a function");var n=u.call(arguments,2),i=function(){return I(t,i,e,this,n.concat(u.call(arguments)))};return i},y.partial=function(t){var e=u.call(arguments,1),n=function(){for(var i=0,s=e.length,r=Array(s),o=0;o<s;o++)r[o]=e[o]===y?arguments[i++]:e[o];for(;i<arguments.length;)r.push(arguments[i++]);return I(t,n,this,this,r)};return n},y.bindAll=function(t){var e,n,i=arguments.length;if(i<=1)throw new Error("bindAll must be passed function names");for(e=1;e<i;e++)n=arguments[e],t[n]=y.bind(t[n],t);return t},y.memoize=function(t,e){var n=function(i){var s=n.cache,r=""+(e?e.apply(this,arguments):i);return y.has(s,r)||(s[r]=t.apply(this,arguments)),s[r]};return n.cache={},n},y.delay=function(t,e){var n=u.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},y.defer=y.partial(y.delay,y,1),y.throttle=function(t,e,n){var i,s,r,o=null,a=0;n||(n={});var l=function(){a=!1===n.leading?0:y.now(),o=null,r=t.apply(i,s),o||(i=s=null)};return function(){var c=y.now();a||!1!==n.leading||(a=c);var u=e-(c-a);return i=this,s=arguments,u<=0||u>e?(o&&(clearTimeout(o),o=null),a=c,r=t.apply(i,s),o||(i=s=null)):o||!1===n.trailing||(o=setTimeout(l,u)),r}},y.debounce=function(t,e,n){var i,s,r,o,a,l=function(){var c=y.now()-o;c<e&&c>=0?i=setTimeout(l,e-c):(i=null,n||(a=t.apply(r,s),i||(r=s=null)))};return function(){r=this,s=arguments,o=y.now();var c=n&&!i;return i||(i=setTimeout(l,e)),c&&(a=t.apply(r,s),r=s=null),a}},y.wrap=function(t,e){return y.partial(e,t)},y.negate=function(t){return function(){return!t.apply(this,arguments)}},y.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,i=t[e].apply(this,arguments);n--;)i=t[n].call(this,i);return i}},y.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},y.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},y.once=y.partial(y.before,2);var D=!{toString:null}.propertyIsEnumerable("toString"),P=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];y.keys=function(t){if(!y.isObject(t))return[];if(f)return f(t);var e=[];for(var n in t)y.has(t,n)&&e.push(n);return D&&i(t,e),e},y.allKeys=function(t){if(!y.isObject(t))return[];var e=[];for(var n in t)e.push(n);return D&&i(t,e),e},y.values=function(t){for(var e=y.keys(t),n=e.length,i=Array(n),s=0;s<n;s++)i[s]=t[e[s]];return i},y.mapObject=function(t,e,n){e=_(e,n);for(var i,s=y.keys(t),r=s.length,o={},a=0;a<r;a++)i=s[a],o[i]=e(t[i],i,t);return o},y.pairs=function(t){for(var e=y.keys(t),n=e.length,i=Array(n),s=0;s<n;s++)i[s]=[e[s],t[e[s]]];return i},y.invert=function(t){for(var e={},n=y.keys(t),i=0,s=n.length;i<s;i++)e[t[n[i]]]=n[i];return e},y.functions=y.methods=function(t){var e=[];for(var n in t)y.isFunction(t[n])&&e.push(n);return e.sort()},y.extend=w(y.allKeys),y.extendOwn=y.assign=w(y.keys),y.findKey=function(t,e,n){e=_(e,n);for(var i,s=y.keys(t),r=0,o=s.length;r<o;r++)if(i=s[r],e(t[i],i,t))return i},y.pick=function(t,e,n){var i,s,r={},o=t;if(null==o)return r;y.isFunction(e)?(s=y.allKeys(o),i=b(e,n)):(s=j(arguments,!1,!1,1),i=function(t,e,n){return e in n},o=Object(o));for(var a=0,l=s.length;a<l;a++){var c=s[a],u=o[c];i(u,c,o)&&(r[c]=u)}return r},y.omit=function(t,e,n){if(y.isFunction(e))e=y.negate(e);else{var i=y.map(j(arguments,!1,!1,1),String);e=function(t,e){return!y.contains(i,e)}}return y.pick(t,e,n)},y.defaults=w(y.allKeys,!0),y.create=function(t,e){var n=k(t);return e&&y.extendOwn(n,e),n},y.clone=function(t){return y.isObject(t)?y.isArray(t)?t.slice():y.extend({},t):t},y.tap=function(t,e){return e(t),t},y.isMatch=function(t,e){var n=y.keys(e),i=n.length;if(null==t)return!i;for(var s=Object(t),r=0;r<i;r++){var o=n[r];if(e[o]!==s[o]||!(o in s))return!1}return!0};var E=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof y&&(t=t._wrapped),e instanceof y&&(e=e._wrapped);var s=p.call(t);if(s!==p.call(e))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e}var r="[object Array]"===s;if(!r){if("object"!=typeof t||"object"!=typeof e)return!1;var o=t.constructor,a=e.constructor;if(o!==a&&!(y.isFunction(o)&&o instanceof o&&y.isFunction(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],i=i||[];for(var l=n.length;l--;)if(n[l]===t)return i[l]===e;if(n.push(t),i.push(e),r){if((l=t.length)!==e.length)return!1;for(;l--;)if(!E(t[l],e[l],n,i))return!1}else{var c,u=y.keys(t);if(l=u.length,y.keys(e).length!==l)return!1;for(;l--;)if(c=u[l],!y.has(e,c)||!E(t[c],e[c],n,i))return!1}return n.pop(),i.pop(),!0};y.isEqual=function(t,e){return E(t,e)},y.isEmpty=function(t){return null==t||(A(t)&&(y.isArray(t)||y.isString(t)||y.isArguments(t))?0===t.length:0===y.keys(t).length)},y.isElement=function(t){return!(!t||1!==t.nodeType)},y.isArray=d||function(t){return"[object Array]"===p.call(t)},y.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},y.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){y["is"+t]=function(e){return p.call(e)==="[object "+t+"]"}}),y.isArguments(arguments)||(y.isArguments=function(t){return y.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(y.isFunction=function(t){return"function"==typeof t||!1}),y.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},y.isNaN=function(t){return y.isNumber(t)&&t!==+t},y.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===p.call(t)},y.isNull=function(t){return null===t},y.isUndefined=function(t){return void 0===t},y.has=function(t,e){return null!=t&&h.call(t,e)},y.noConflict=function(){return s._=r,this},y.identity=function(t){return t},y.constant=function(t){return function(){return t}},y.noop=function(){},y.property=T,y.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},y.matcher=y.matches=function(t){return t=y.extendOwn({},t),function(e){return y.isMatch(e,t)}},y.times=function(t,e,n){var i=Array(Math.max(0,t));e=b(e,n,1);for(var s=0;s<t;s++)i[s]=e(s);return i},y.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},y.now=Date.now||function(){return(new Date).getTime()};var O={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},N=y.invert(O),R=function(t){var e=function(e){return t[e]},n="(?:"+y.keys(t).join("|")+")",i=RegExp(n),s=RegExp(n,"g");return function(t){return t=null==t?"":""+t,i.test(t)?t.replace(s,e):t}};y.escape=R(O),y.unescape=R(N),y.result=function(t,e,n){var i=null==t?void 0:t[e];return void 0===i&&(i=n),y.isFunction(i)?i.call(t):i};var M=0;y.uniqueId=function(t){var e=++M+"";return t?t+e:e},y.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var $=/(.)^/,z={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},L=/\\|'|\r|\n|\u2028|\u2029/g,U=function(t){return"\\"+z[t]};y.template=function(t,e,n){!e&&n&&(e=n),e=y.defaults({},e,y.templateSettings);var i=RegExp([(e.escape||$).source,(e.interpolate||$).source,(e.evaluate||$).source].join("|")+"|$","g"),s=0,r="__p+='";t.replace(i,function(e,n,i,o,a){return r+=t.slice(s,a).replace(L,U),s=a+e.length,n?r+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?r+="'+\n((__t=("+i+"))==null?'':__t)+\n'":o&&(r+="';\n"+o+"\n__p+='"),e}),r+="';\n",e.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n";try{var o=new Function(e.variable||"obj","_",r)}catch(t){throw t.source=r,t}var a=function(t){return o.call(this,t,y)},l=e.variable||"obj";return a.source="function("+l+"){\n"+r+"}",a},y.chain=function(t){var e=y(t);return e._chain=!0,e};var q=function(t,e){return t._chain?y(e).chain():e};y.mixin=function(t){y.each(y.functions(t),function(e){var n=y[e]=t[e];y.prototype[e]=function(){var t=[this._wrapped];return c.apply(t,arguments),q(this,n.apply(y,t))}})},y.mixin(y),y.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=o[t];y.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],q(this,n)}}),y.each(["concat","join","slice"],function(t){var e=o[t];y.prototype[t]=function(){return q(this,e.apply(this._wrapped,arguments))}}),y.prototype.value=function(){return this._wrapped},y.prototype.valueOf=y.prototype.toJSON=y.prototype.value,y.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return y})}.call(this),function(t){function e(t){var e=t.length,i=n.type(t);return"function"!==i&&!n.isWindow(t)&&(!(1!==t.nodeType||!e)||("array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t))}if(!t.jQuery){var n=function(t,e){return new n.fn.init(t,e)};n.isWindow=function(t){return null!=t&&t==t.window},n.type=function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?s[o.call(t)]||"object":typeof t},n.isArray=Array.isArray||function(t){return"array"===n.type(t)},n.isPlainObject=function(t){var e;if(!t||"object"!==n.type(t)||t.nodeType||n.isWindow(t))return!1;try{if(t.constructor&&!r.call(t,"constructor")&&!r.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}for(e in t);return void 0===e||r.call(t,e)},n.each=function(t,n,i){var s=0,r=t.length,o=e(t);if(i){if(o)for(;r>s&&!1!==n.apply(t[s],i);s++);else for(s in t)if(!1===n.apply(t[s],i))break}else if(o)for(;r>s&&!1!==n.call(t[s],s,t[s]);s++);else for(s in t)if(!1===n.call(t[s],s,t[s]))break;return t},n.data=function(t,e,s){if(void 0===s){var r=t[n.expando],o=r&&i[r];if(void 0===e)return o;if(o&&e in o)return o[e]}else if(void 0!==e){var r=t[n.expando]||(t[n.expando]=++n.uuid);return i[r]=i[r]||{},i[r][e]=s,s}},n.removeData=function(t,e){var s=t[n.expando],r=s&&i[s];r&&n.each(e,function(t,e){delete r[e]})},n.extend=function(){var t,e,i,s,r,o,a=arguments[0]||{},l=1,c=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[l]||{},l++),"object"!=typeof a&&"function"!==n.type(a)&&(a={}),l===c&&(a=this,l--);c>l;l++)if(null!=(r=arguments[l]))for(s in r)t=a[s],i=r[s],a!==i&&(u&&i&&(n.isPlainObject(i)||(e=n.isArray(i)))?(e?(e=!1,o=t&&n.isArray(t)?t:[]):o=t&&n.isPlainObject(t)?t:{},a[s]=n.extend(u,o,i)):void 0!==i&&(a[s]=i));return a},n.queue=function(t,i,s){function r(t,n){var i=n||[];return null!=t&&(e(Object(t))?function(t,e){for(var n=+e.length,i=0,s=t.length;n>i;)t[s++]=e[i++];if(n!==n)for(;void 0!==e[i];)t[s++]=e[i++];t.length=s}(i,"string"==typeof t?[t]:t):[].push.call(i,t)),i}if(t){i=(i||"fx")+"queue";var o=n.data(t,i);return s?(!o||n.isArray(s)?o=n.data(t,i,r(s)):o.push(s),o):o||[]}},n.dequeue=function(t,e){n.each(t.nodeType?[t]:t,function(t,i){e=e||"fx";var s=n.queue(i,e),r=s.shift();"inprogress"===r&&(r=s.shift()),r&&("fx"===e&&s.unshift("inprogress"),r.call(i,function(){n.dequeue(i,e)}))})},n.fn=n.prototype={init:function(t){if(t.nodeType)return this[0]=t,this;throw new Error("Not a DOM node.")},offset:function(){var e=this[0].getBoundingClientRect?this[0].getBoundingClientRect():{top:0,left:0};return{top:e.top+(t.pageYOffset||document.scrollTop||0)-(document.clientTop||0),left:e.left+(t.pageXOffset||document.scrollLeft||0)-(document.clientLeft||0)}},position:function(){function t(){for(var t=this.offsetParent||document;t&&"html"===!t.nodeType.toLowerCase&&"static"===t.style.position;)t=t.offsetParent;return t||document}var e=this[0],t=t.apply(e),i=this.offset(),s=/^(?:body|html)$/i.test(t.nodeName)?{top:0,left:0}:n(t).offset();return i.top-=parseFloat(e.style.marginTop)||0,i.left-=parseFloat(e.style.marginLeft)||0,t.style&&(s.top+=parseFloat(t.style.borderTopWidth)||0,s.left+=parseFloat(t.style.borderLeftWidth)||0),{top:i.top-s.top,left:i.left-s.left}}};var i={};n.expando="velocity"+(new Date).getTime(),n.uuid=0;for(var s={},r=s.hasOwnProperty,o=s.toString,a="Boolean Number String Function Array Date RegExp Object Error".split(" "),l=0;l<a.length;l++)s["[object "+a[l]+"]"]=a[l].toLowerCase();n.fn.init.prototype=n.fn,t.Velocity={Utilities:n}}}(window),function(t){"object"==typeof module&&"object"==typeof module.exports?module.exports=t():"function"==typeof define&&define.amd?define(t):t()}(function(){return function(t,e,n,i){function s(t){for(var e=-1,n=t?t.length:0,i=[];++e<n;){var s=t[e];s&&i.push(s)}return i}function r(t){return g.isWrapped(t)?t=[].slice.call(t):g.isNode(t)&&(t=[t]),t}function o(t){var e=h.data(t,"velocity");return null===e?i:e}function a(t){return function(e){return Math.round(e*t)*(1/t)}}function l(t,n,i,s){function r(t,e){return 1-3*e+3*t}function o(t,e){return 3*e-6*t}function a(t){return 3*t}function l(t,e,n){return((r(e,n)*t+o(e,n))*t+a(e))*t}function c(t,e,n){return 3*r(e,n)*t*t+2*o(e,n)*t+a(e)}function u(e,n){for(var s=0;g>s;++s){var r=c(n,t,i);if(0===r)return n;n-=(l(n,t,i)-e)/r}return n}function p(){for(var e=0;b>e;++e)T[e]=l(e*_,t,i)}function h(e,n,s){var r,o,a=0;do{o=n+(s-n)/2,r=l(o,t,i)-e,r>0?s=o:n=o}while(Math.abs(r)>v&&++a<y);return o}function d(e){for(var n=0,s=1,r=b-1;s!=r&&T[s]<=e;++s)n+=_;--s;var o=(e-T[s])/(T[s+1]-T[s]),a=n+o*_,l=c(a,t,i);return l>=m?u(e,a):0==l?a:h(e,n,n+_)}function f(){S=!0,(t!=n||i!=s)&&p()}var g=4,m=.001,v=1e-7,y=10,b=11,_=1/(b-1),w="Float32Array"in e;if(4!==arguments.length)return!1;for(var k=0;4>k;++k)if("number"!=typeof arguments[k]||isNaN(arguments[k])||!isFinite(arguments[k]))return!1;t=Math.min(t,1),i=Math.min(i,1),t=Math.max(t,0),i=Math.max(i,0);var T=w?new Float32Array(b):new Array(b),S=!1,C=function(e){return S||f(),t===n&&i===s?e:0===e?0:1===e?1:l(d(e),n,s)};C.getControlPoints=function(){return[{x:t,y:n},{x:i,y:s}]};var A="generateBezier("+[t,n,i,s]+")";return C.toString=function(){return A},C}function c(t,e){var n=t;return g.isString(t)?b.Easings[t]||(n=!1):n=g.isArray(t)&&1===t.length?a.apply(null,t):g.isArray(t)&&2===t.length?_.apply(null,t.concat([e])):!(!g.isArray(t)||4!==t.length)&&l.apply(null,t),!1===n&&(n=b.Easings[b.defaults.easing]?b.defaults.easing:y),n}function u(t){if(t){var e=(new Date).getTime(),n=b.State.calls.length;n>1e4&&(b.State.calls=s(b.State.calls));for(var r=0;n>r;r++)if(b.State.calls[r]){var a=b.State.calls[r],l=a[0],c=a[2],d=a[3],f=!!d,m=null;d||(d=b.State.calls[r][3]=e-16);for(var v=Math.min((e-d)/c.duration,1),y=0,_=l.length;_>y;y++){var k=l[y],S=k.element;if(o(S)){var C=!1;if(c.display!==i&&null!==c.display&&"none"!==c.display){if("flex"===c.display){var A=["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex"];h.each(A,function(t,e){w.setPropertyValue(S,"display",e)})}w.setPropertyValue(S,"display",c.display)}c.visibility!==i&&"hidden"!==c.visibility&&w.setPropertyValue(S,"visibility",c.visibility);for(var x in k)if("element"!==x){var j,I=k[x],D=g.isString(I.easing)?b.Easings[I.easing]:I.easing;if(1===v)j=I.endValue;else{var P=I.endValue-I.startValue;if(j=I.startValue+P*D(v,c,P),!f&&j===I.currentValue)continue}if(I.currentValue=j,"tween"===x)m=j;else{if(w.Hooks.registered[x]){var E=w.Hooks.getRoot(x),O=o(S).rootPropertyValueCache[E];O&&(I.rootPropertyValue=O)}var N=w.setPropertyValue(S,x,I.currentValue+(0===parseFloat(j)?"":I.unitType),I.rootPropertyValue,I.scrollData);w.Hooks.registered[x]&&(o(S).rootPropertyValueCache[E]=w.Normalizations.registered[E]?w.Normalizations.registered[E]("extract",null,N[1]):N[1]),"transform"===N[0]&&(C=!0)}}c.mobileHA&&o(S).transformCache.translate3d===i&&(o(S).transformCache.translate3d="(0px, 0px, 0px)",C=!0),C&&w.flushTransformCache(S)}}c.display!==i&&"none"!==c.display&&(b.State.calls[r][2].display=!1),c.visibility!==i&&"hidden"!==c.visibility&&(b.State.calls[r][2].visibility=!1),c.progress&&c.progress.call(a[1],a[1],v,Math.max(0,d+c.duration-e),d,m),1===v&&p(r)}}b.State.isTicking&&T(u)}function p(t,e){if(!b.State.calls[t])return!1;for(var n=b.State.calls[t][0],s=b.State.calls[t][1],r=b.State.calls[t][2],a=b.State.calls[t][4],l=!1,c=0,u=n.length;u>c;c++){var p=n[c].element;if(e||r.loop||("none"===r.display&&w.setPropertyValue(p,"display",r.display),"hidden"===r.visibility&&w.setPropertyValue(p,"visibility",r.visibility)),!0!==r.loop&&(h.queue(p)[1]===i||!/\.velocityQueueEntryFlag/i.test(h.queue(p)[1]))&&o(p)){o(p).isAnimating=!1,o(p).rootPropertyValueCache={};var d=!1;h.each(w.Lists.transforms3D,function(t,e){var n=/^scale/.test(e)?1:0,s=o(p).transformCache[e];o(p).transformCache[e]!==i&&new RegExp("^\\("+n+"[^.]").test(s)&&(d=!0,delete o(p).transformCache[e])}),r.mobileHA&&(d=!0,delete o(p).transformCache.translate3d),d&&w.flushTransformCache(p),w.Values.removeClass(p,"velocity-animating")}if(!e&&r.complete&&!r.loop&&c===u-1)try{r.complete.call(s,s)}catch(t){setTimeout(function(){throw t},1)}a&&!0!==r.loop&&a(s),!0!==r.loop||e||(h.each(o(p).tweensContainer,function(t,e){/^rotate/.test(t)&&360===parseFloat(e.endValue)&&(e.endValue=0,e.startValue=360),/^backgroundPosition/.test(t)&&100===parseFloat(e.endValue)&&"%"===e.unitType&&(e.endValue=0,e.startValue=100)}),b(p,"reverse",{loop:!0,delay:r.delay})),!1!==r.queue&&h.dequeue(p,r.queue)}b.State.calls[t]=!1;for(var f=0,g=b.State.calls.length;g>f;f++)if(!1!==b.State.calls[f]){l=!0;break}!1===l&&(b.State.isTicking=!1,delete b.State.calls,b.State.calls=[])}var h,d=function(){if(n.documentMode)return n.documentMode;for(var t=7;t>4;t--){var e=n.createElement("div");if(e.innerHTML="<!--[if IE "+t+"]><span></span><![endif]-->",e.getElementsByTagName("span").length)return e=null,t}return i}(),f=function(){var t=0;return e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||function(e){var n,i=(new Date).getTime();return n=Math.max(0,16-(i-t)),t=i+n,setTimeout(function(){e(i+n)},n)}}(),g={isString:function(t){return"string"==typeof t},isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)},isNode:function(t){return t&&t.nodeType},isNodeList:function(t){return"object"==typeof t&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(t))&&t.length!==i&&(0===t.length||"object"==typeof t[0]&&t[0].nodeType>0)},isWrapped:function(t){return t&&(t.jquery||e.Zepto&&e.Zepto.zepto.isZ(t))},isSVG:function(t){return e.SVGElement&&t instanceof e.SVGElement},isEmptyObject:function(t){for(var e in t)return!1;return!0}},m=!1;if(t.fn&&t.fn.jquery?(h=t,m=!0):h=e.Velocity.Utilities,8>=d&&!m)throw new Error("Velocity: IE8 and below require jQuery to be loaded before Velocity.");if(7>=d)return void(jQuery.fn.velocity=jQuery.fn.animate);var v=400,y="swing",b={State:{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isAndroid:/Android/i.test(navigator.userAgent),isGingerbread:/Android 2\.3\.[3-7]/i.test(navigator.userAgent),isChrome:e.chrome,isFirefox:/Firefox/i.test(navigator.userAgent),prefixElement:n.createElement("div"),prefixMatches:{},scrollAnchor:null,scrollPropertyLeft:null,scrollPropertyTop:null,isTicking:!1,calls:[]},CSS:{},Utilities:h,Redirects:{},Easings:{},Promise:e.Promise,defaults:{queue:"",duration:v,easing:y,begin:i,complete:i,progress:i,display:i,visibility:i,loop:!1,delay:!1,mobileHA:!0,_cacheValues:!0},init:function(t){h.data(t,"velocity",{isSVG:g.isSVG(t),isAnimating:!1,computedStyle:null,tweensContainer:null,rootPropertyValueCache:{},transformCache:{}})},hook:null,mock:!1,version:{major:1,minor:2,patch:1},debug:!1};e.pageYOffset!==i?(b.State.scrollAnchor=e,b.State.scrollPropertyLeft="pageXOffset",b.State.scrollPropertyTop="pageYOffset"):(b.State.scrollAnchor=n.documentElement||n.body.parentNode||n.body,b.State.scrollPropertyLeft="scrollLeft",b.State.scrollPropertyTop="scrollTop");var _=function(){function t(t){return-t.tension*t.x-t.friction*t.v}function e(e,n,i){var s={x:e.x+i.dx*n,v:e.v+i.dv*n,tension:e.tension,friction:e.friction};return{dx:s.v,dv:t(s)}}function n(n,i){var s={dx:n.v,dv:t(n)},r=e(n,.5*i,s),o=e(n,.5*i,r),a=e(n,i,o),l=1/6*(s.dx+2*(r.dx+o.dx)+a.dx),c=1/6*(s.dv+2*(r.dv+o.dv)+a.dv);return n.x=n.x+l*i,n.v=n.v+c*i,n}return function t(e,i,s){var r,o,a,l={x:-1,v:0,tension:null,friction:null},c=[0],u=0,p=1e-4,h=.016;for(e=parseFloat(e)||500,i=parseFloat(i)||20,s=s||null,l.tension=e,l.friction=i,r=null!==s,r?(u=t(e,i),o=u/s*h):o=h;a=n(a||l,o),c.push(1+a.x),u+=16,Math.abs(a.x)>p&&Math.abs(a.v)>p;);return r?function(t){return c[t*(c.length-1)|0]}:u}}();b.Easings={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},spring:function(t){return 1-Math.cos(4.5*t*Math.PI)*Math.exp(6*-t)}},h.each([["ease",[.25,.1,.25,1]],["ease-in",[.42,0,1,1]],["ease-out",[0,0,.58,1]],["ease-in-out",[.42,0,.58,1]],["easeInSine",[.47,0,.745,.715]],["easeOutSine",[.39,.575,.565,1]],["easeInOutSine",[.445,.05,.55,.95]],["easeInQuad",[.55,.085,.68,.53]],["easeOutQuad",[.25,.46,.45,.94]],["easeInOutQuad",[.455,.03,.515,.955]],["easeInCubic",[.55,.055,.675,.19]],["easeOutCubic",[.215,.61,.355,1]],["easeInOutCubic",[.645,.045,.355,1]],["easeInQuart",[.895,.03,.685,.22]],["easeOutQuart",[.165,.84,.44,1]],["easeInOutQuart",[.77,0,.175,1]],["easeInQuint",[.755,.05,.855,.06]],["easeOutQuint",[.23,1,.32,1]],["easeInOutQuint",[.86,0,.07,1]],["easeInExpo",[.95,.05,.795,.035]],["easeOutExpo",[.19,1,.22,1]],["easeInOutExpo",[1,0,0,1]],["easeInCirc",[.6,.04,.98,.335]],["easeOutCirc",[.075,.82,.165,1]],["easeInOutCirc",[.785,.135,.15,.86]]],function(t,e){b.Easings[e[0]]=l.apply(null,e[1])});var w=b.CSS={RegEx:{isHex:/^#([A-f\d]{3}){1,2}$/i,valueUnwrap:/^[A-z]+\((.*)\)$/i,wrappedValueAlreadyExtracted:/[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,valueSplit:/([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/gi},Lists:{colors:["fill","stroke","stopColor","color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","outlineColor"],transformsBase:["translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ"],transforms3D:["transformPerspective","translateZ","scaleZ","rotateX","rotateY"]},Hooks:{templates:{textShadow:["Color X Y Blur","black 0px 0px 0px"],boxShadow:["Color X Y Blur Spread","black 0px 0px 0px 0px"],clip:["Top Right Bottom Left","0px 0px 0px 0px"],backgroundPosition:["X Y","0% 0%"],transformOrigin:["X Y Z","50% 50% 0px"],perspectiveOrigin:["X Y","50% 50%"]},registered:{},register:function(){for(var t=0;t<w.Lists.colors.length;t++){var e="color"===w.Lists.colors[t]?"0 0 0 1":"255 255 255 1";w.Hooks.templates[w.Lists.colors[t]]=["Red Green Blue Alpha",e]}var n,i,s;if(d)for(n in w.Hooks.templates){i=w.Hooks.templates[n],s=i[0].split(" ");var r=i[1].match(w.RegEx.valueSplit);"Color"===s[0]&&(s.push(s.shift()),r.push(r.shift()),w.Hooks.templates[n]=[s.join(" "),r.join(" ")])}for(n in w.Hooks.templates){i=w.Hooks.templates[n],s=i[0].split(" ");for(var t in s){var o=n+s[t],a=t;w.Hooks.registered[o]=[n,a]}}},getRoot:function(t){var e=w.Hooks.registered[t];return e?e[0]:t},cleanRootPropertyValue:function(t,e){return w.RegEx.valueUnwrap.test(e)&&(e=e.match(w.RegEx.valueUnwrap)[1]),w.Values.isCSSNullValue(e)&&(e=w.Hooks.templates[t][1]),e},extractValue:function(t,e){var n=w.Hooks.registered[t];if(n){var i=n[0],s=n[1];return e=w.Hooks.cleanRootPropertyValue(i,e),e.toString().match(w.RegEx.valueSplit)[s]}return e},injectValue:function(t,e,n){var i=w.Hooks.registered[t];if(i){var s,r=i[0],o=i[1];return n=w.Hooks.cleanRootPropertyValue(r,n),s=n.toString().match(w.RegEx.valueSplit),s[o]=e,s.join(" ")}return n}},Normalizations:{registered:{clip:function(t,e,n){switch(t){case"name":return"clip";case"extract":var i;return w.RegEx.wrappedValueAlreadyExtracted.test(n)?i=n:(i=n.toString().match(w.RegEx.valueUnwrap),i=i?i[1].replace(/,(\s+)?/g," "):n),i;case"inject":return"rect("+n+")"}},blur:function(t,e,n){switch(t){case"name":return b.State.isFirefox?"filter":"-webkit-filter";case"extract":var i=parseFloat(n);if(!i&&0!==i){var s=n.toString().match(/blur\(([0-9]+[A-z]+)\)/i);i=s?s[1]:0}return i;case"inject":return parseFloat(n)?"blur("+n+")":"none"}},opacity:function(t,e,n){if(8>=d)switch(t){case"name":return"filter";case"extract":var i=n.toString().match(/alpha\(opacity=(.*)\)/i);return n=i?i[1]/100:1;case"inject":return e.style.zoom=1,parseFloat(n)>=1?"":"alpha(opacity="+parseInt(100*parseFloat(n),10)+")"}else switch(t){case"name":return"opacity";case"extract":case"inject":return n}}},register:function(){9>=d||b.State.isGingerbread||(w.Lists.transformsBase=w.Lists.transformsBase.concat(w.Lists.transforms3D));for(var t=0;t<w.Lists.transformsBase.length;t++)!function(){var e=w.Lists.transformsBase[t];w.Normalizations.registered[e]=function(t,n,s){switch(t){case"name":return"transform";case"extract":return o(n)===i||o(n).transformCache[e]===i?/^scale/i.test(e)?1:0:o(n).transformCache[e].replace(/[()]/g,"");case"inject":var r=!1;switch(e.substr(0,e.length-1)){case"translate":r=!/(%|px|em|rem|vw|vh|\d)$/i.test(s);break;case"scal":case"scale":b.State.isAndroid&&o(n).transformCache[e]===i&&1>s&&(s=1),r=!/(\d)$/i.test(s);break;case"skew":r=!/(deg|\d)$/i.test(s);break;case"rotate":r=!/(deg|\d)$/i.test(s)}return r||(o(n).transformCache[e]="("+s+")"),o(n).transformCache[e]}}}();for(var t=0;t<w.Lists.colors.length;t++)!function(){var e=w.Lists.colors[t];w.Normalizations.registered[e]=function(t,n,s){switch(t){case"name":return e;case"extract":var r;if(w.RegEx.wrappedValueAlreadyExtracted.test(s))r=s;else{var o,a={black:"rgb(0, 0, 0)",blue:"rgb(0, 0, 255)",gray:"rgb(128, 128, 128)",green:"rgb(0, 128, 0)",red:"rgb(255, 0, 0)",white:"rgb(255, 255, 255)"};/^[A-z]+$/i.test(s)?o=a[s]!==i?a[s]:a.black:w.RegEx.isHex.test(s)?o="rgb("+w.Values.hexToRgb(s).join(" ")+")":/^rgba?\(/i.test(s)||(o=a.black),r=(o||s).toString().match(w.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g," ")}return 8>=d||3!==r.split(" ").length||(r+=" 1"),r;case"inject":return 8>=d?4===s.split(" ").length&&(s=s.split(/\s+/).slice(0,3).join(" ")):3===s.split(" ").length&&(s+=" 1"),(8>=d?"rgb":"rgba")+"("+s.replace(/\s+/g,",").replace(/\.(\d)+(?=,)/g,"")+")"}}}()}},Names:{camelCase:function(t){return t.replace(/-(\w)/g,function(t,e){return e.toUpperCase()})},SVGAttribute:function(t){var e="width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y2";return(d||b.State.isAndroid&&!b.State.isChrome)&&(e+="|transform"),new RegExp("^("+e+")$","i").test(t)},prefixCheck:function(t){if(b.State.prefixMatches[t])return[b.State.prefixMatches[t],!0];for(var e=["","Webkit","Moz","ms","O"],n=0,i=e.length;i>n;n++){var s;if(s=0===n?t:e[n]+t.replace(/^\w/,function(t){return t.toUpperCase()}),g.isString(b.State.prefixElement.style[s]))return b.State.prefixMatches[t]=s,[s,!0]}return[t,!1]}},Values:{hexToRgb:function(t){var e,n=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;return t=t.replace(n,function(t,e,n,i){return e+e+n+n+i+i}),e=i.exec(t),e?[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]:[0,0,0]},isCSSNullValue:function(t){return 0==t||/^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(t)},getUnitType:function(t){return/^(rotate|skew)/i.test(t)?"deg":/(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(t)?"":"px"},getDisplayType:function(t){var e=t&&t.tagName.toString().toLowerCase();return/^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(e)?"inline":/^(li)$/i.test(e)?"list-item":/^(tr)$/i.test(e)?"table-row":/^(table)$/i.test(e)?"table":/^(tbody)$/i.test(e)?"table-row-group":"block"},addClass:function(t,e){t.classList?t.classList.add(e):t.className+=(t.className.length?" ":"")+e},removeClass:function(t,e){t.classList?t.classList.remove(e):t.className=t.className.toString().replace(new RegExp("(^|\\s)"+e.split(" ").join("|")+"(\\s|$)","gi")," ")}},getPropertyValue:function(t,n,s,r){function a(t,n){function s(){c&&w.setPropertyValue(t,"display","none")}var l=0;if(8>=d)l=h.css(t,n);else{var c=!1;if(/^(width|height)$/.test(n)&&0===w.getPropertyValue(t,"display")&&(c=!0,w.setPropertyValue(t,"display",w.Values.getDisplayType(t))),!r){if("height"===n&&"border-box"!==w.getPropertyValue(t,"boxSizing").toString().toLowerCase()){var u=t.offsetHeight-(parseFloat(w.getPropertyValue(t,"borderTopWidth"))||0)-(parseFloat(w.getPropertyValue(t,"borderBottomWidth"))||0)-(parseFloat(w.getPropertyValue(t,"paddingTop"))||0)-(parseFloat(w.getPropertyValue(t,"paddingBottom"))||0);return s(),u}if("width"===n&&"border-box"!==w.getPropertyValue(t,"boxSizing").toString().toLowerCase()){var p=t.offsetWidth-(parseFloat(w.getPropertyValue(t,"borderLeftWidth"))||0)-(parseFloat(w.getPropertyValue(t,"borderRightWidth"))||0)-(parseFloat(w.getPropertyValue(t,"paddingLeft"))||0)-(parseFloat(w.getPropertyValue(t,"paddingRight"))||0);return s(),p}}var f;f=o(t)===i?e.getComputedStyle(t,null):o(t).computedStyle?o(t).computedStyle:o(t).computedStyle=e.getComputedStyle(t,null),"borderColor"===n&&(n="borderTopColor"),l=9===d&&"filter"===n?f.getPropertyValue(n):f[n],(""===l||null===l)&&(l=t.style[n]),s()}if("auto"===l&&/^(top|right|bottom|left)$/i.test(n)){var g=a(t,"position");("fixed"===g||"absolute"===g&&/top|left/i.test(n))&&(l=h(t).position()[n]+"px")}return l}var l;if(w.Hooks.registered[n]){var c=n,u=w.Hooks.getRoot(c);s===i&&(s=w.getPropertyValue(t,w.Names.prefixCheck(u)[0])),w.Normalizations.registered[u]&&(s=w.Normalizations.registered[u]("extract",t,s)),l=w.Hooks.extractValue(c,s)}else if(w.Normalizations.registered[n]){var p,f;p=w.Normalizations.registered[n]("name",t),"transform"!==p&&(f=a(t,w.Names.prefixCheck(p)[0]),w.Values.isCSSNullValue(f)&&w.Hooks.templates[n]&&(f=w.Hooks.templates[n][1])),l=w.Normalizations.registered[n]("extract",t,f)}if(!/^[\d-]/.test(l))if(o(t)&&o(t).isSVG&&w.Names.SVGAttribute(n))if(/^(height|width)$/i.test(n))try{l=t.getBBox()[n]}catch(t){l=0}else l=t.getAttribute(n);else l=a(t,w.Names.prefixCheck(n)[0]);return w.Values.isCSSNullValue(l)&&(l=0),b.debug>=2&&console.log("Get "+n+": "+l),l},setPropertyValue:function(t,n,i,s,r){var a=n;if("scroll"===n)r.container?r.container["scroll"+r.direction]=i:"Left"===r.direction?e.scrollTo(i,r.alternateValue):e.scrollTo(r.alternateValue,i);else if(w.Normalizations.registered[n]&&"transform"===w.Normalizations.registered[n]("name",t))w.Normalizations.registered[n]("inject",t,i),a="transform",i=o(t).transformCache[n];else{if(w.Hooks.registered[n]){var l=n,c=w.Hooks.getRoot(n);s=s||w.getPropertyValue(t,c),i=w.Hooks.injectValue(l,i,s),n=c}if(w.Normalizations.registered[n]&&(i=w.Normalizations.registered[n]("inject",t,i),n=w.Normalizations.registered[n]("name",t)),
a=w.Names.prefixCheck(n)[0],8>=d)try{t.style[a]=i}catch(t){b.debug&&console.log("Browser does not support ["+i+"] for ["+a+"]")}else o(t)&&o(t).isSVG&&w.Names.SVGAttribute(n)?t.setAttribute(n,i):t.style[a]=i;b.debug>=2&&console.log("Set "+n+" ("+a+"): "+i)}return[a,i]},flushTransformCache:function(t){function e(e){return parseFloat(w.getPropertyValue(t,e))}var n="";if((d||b.State.isAndroid&&!b.State.isChrome)&&o(t).isSVG){var i={translate:[e("translateX"),e("translateY")],skewX:[e("skewX")],skewY:[e("skewY")],scale:1!==e("scale")?[e("scale"),e("scale")]:[e("scaleX"),e("scaleY")],rotate:[e("rotateZ"),0,0]};h.each(o(t).transformCache,function(t){/^translate/i.test(t)?t="translate":/^scale/i.test(t)?t="scale":/^rotate/i.test(t)&&(t="rotate"),i[t]&&(n+=t+"("+i[t].join(" ")+") ",delete i[t])})}else{var s,r;h.each(o(t).transformCache,function(e){return s=o(t).transformCache[e],"transformPerspective"===e?(r=s,!0):(9===d&&"rotateZ"===e&&(e="rotate"),void(n+=e+s+" "))}),r&&(n="perspective"+r+" "+n)}w.setPropertyValue(t,"transform",n)}};w.Hooks.register(),w.Normalizations.register(),b.hook=function(t,e,n){var s=i;return t=r(t),h.each(t,function(t,r){if(o(r)===i&&b.init(r),n===i)s===i&&(s=b.CSS.getPropertyValue(r,e));else{var a=b.CSS.setPropertyValue(r,e,n);"transform"===a[0]&&b.CSS.flushTransformCache(r),s=a}}),s};var k=function(){function t(){return a?x.promise||null:l}function s(){function t(){function t(t,e){var n=i,s=i,o=i;return g.isArray(t)?(n=t[0],!g.isArray(t[1])&&/^[\d-]/.test(t[1])||g.isFunction(t[1])||w.RegEx.isHex.test(t[1])?o=t[1]:(g.isString(t[1])&&!w.RegEx.isHex.test(t[1])||g.isArray(t[1]))&&(s=e?t[1]:c(t[1],a.duration),t[2]!==i&&(o=t[2]))):n=t,e||(s=s||a.easing),g.isFunction(n)&&(n=n.call(r,S,T)),g.isFunction(o)&&(o=o.call(r,S,T)),[n||0,s,o]}function p(t,e){var n,i;return i=(e||"0").toString().toLowerCase().replace(/[%A-z]+$/,function(t){return n=t,""}),n||(n=w.Values.getUnitType(t)),[i,n]}function d(){var t={myParent:r.parentNode||n.body,position:w.getPropertyValue(r,"position"),fontSize:w.getPropertyValue(r,"fontSize")},i=t.position===N.lastPosition&&t.myParent===N.lastParent,s=t.fontSize===N.lastFontSize;N.lastParent=t.myParent,N.lastPosition=t.position,N.lastFontSize=t.fontSize;var a=100,l={};if(s&&i)l.emToPx=N.lastEmToPx,l.percentToPxWidth=N.lastPercentToPxWidth,l.percentToPxHeight=N.lastPercentToPxHeight;else{var c=o(r).isSVG?n.createElementNS("http://www.w3.org/2000/svg","rect"):n.createElement("div");b.init(c),t.myParent.appendChild(c),h.each(["overflow","overflowX","overflowY"],function(t,e){b.CSS.setPropertyValue(c,e,"hidden")}),b.CSS.setPropertyValue(c,"position",t.position),b.CSS.setPropertyValue(c,"fontSize",t.fontSize),b.CSS.setPropertyValue(c,"boxSizing","content-box"),h.each(["minWidth","maxWidth","width","minHeight","maxHeight","height"],function(t,e){b.CSS.setPropertyValue(c,e,a+"%")}),b.CSS.setPropertyValue(c,"paddingLeft",a+"em"),l.percentToPxWidth=N.lastPercentToPxWidth=(parseFloat(w.getPropertyValue(c,"width",null,!0))||1)/a,l.percentToPxHeight=N.lastPercentToPxHeight=(parseFloat(w.getPropertyValue(c,"height",null,!0))||1)/a,l.emToPx=N.lastEmToPx=(parseFloat(w.getPropertyValue(c,"paddingLeft"))||1)/a,t.myParent.removeChild(c)}return null===N.remToPx&&(N.remToPx=parseFloat(w.getPropertyValue(n.body,"fontSize"))||16),null===N.vwToPx&&(N.vwToPx=parseFloat(e.innerWidth)/100,N.vhToPx=parseFloat(e.innerHeight)/100),l.remToPx=N.remToPx,l.vwToPx=N.vwToPx,l.vhToPx=N.vhToPx,b.debug>=1&&console.log("Unit ratios: "+JSON.stringify(l),r),l}if(a.begin&&0===S)try{a.begin.call(f,f)}catch(t){setTimeout(function(){throw t},1)}if("scroll"===j){var v,_,k,C=/^x$/i.test(a.axis)?"Left":"Top",A=parseFloat(a.offset)||0;a.container?g.isWrapped(a.container)||g.isNode(a.container)?(a.container=a.container[0]||a.container,v=a.container["scroll"+C],k=v+h(r).position()[C.toLowerCase()]+A):a.container=null:(v=b.State.scrollAnchor[b.State["scrollProperty"+C]],_=b.State.scrollAnchor[b.State["scrollProperty"+("Left"===C?"Top":"Left")]],k=h(r).offset()[C.toLowerCase()]+A),l={scroll:{rootPropertyValue:!1,startValue:v,currentValue:v,endValue:k,unitType:"",easing:a.easing,scrollData:{container:a.container,direction:C,alternateValue:_}},element:r},b.debug&&console.log("tweensContainer (scroll): ",l.scroll,r)}else if("reverse"===j){if(!o(r).tweensContainer)return void h.dequeue(r,a.queue);"none"===o(r).opts.display&&(o(r).opts.display="auto"),"hidden"===o(r).opts.visibility&&(o(r).opts.visibility="visible"),o(r).opts.loop=!1,o(r).opts.begin=null,o(r).opts.complete=null,y.easing||delete a.easing,y.duration||delete a.duration,a=h.extend({},o(r).opts,a);var I=h.extend(!0,{},o(r).tweensContainer);for(var D in I)if("element"!==D){var P=I[D].startValue;I[D].startValue=I[D].currentValue=I[D].endValue,I[D].endValue=P,g.isEmptyObject(y)||(I[D].easing=a.easing),b.debug&&console.log("reverse tweensContainer ("+D+"): "+JSON.stringify(I[D]),r)}l=I}else if("start"===j){var I;o(r).tweensContainer&&!0===o(r).isAnimating&&(I=o(r).tweensContainer),h.each(m,function(e,n){if(RegExp("^"+w.Lists.colors.join("$|^")+"$").test(e)){var s=t(n,!0),r=s[0],o=s[1],a=s[2];if(w.RegEx.isHex.test(r)){for(var l=["Red","Green","Blue"],c=w.Values.hexToRgb(r),u=a?w.Values.hexToRgb(a):i,p=0;p<l.length;p++){var h=[c[p]];o&&h.push(o),u!==i&&h.push(u[p]),m[e+l[p]]=h}delete m[e]}}});for(var E in m){var O=t(m[E]),M=O[0],$=O[1],z=O[2];E=w.Names.camelCase(E);var L=w.Hooks.getRoot(E),U=!1;if(o(r).isSVG||"tween"===L||!1!==w.Names.prefixCheck(L)[1]||w.Normalizations.registered[L]!==i){(a.display!==i&&null!==a.display&&"none"!==a.display||a.visibility!==i&&"hidden"!==a.visibility)&&/opacity|filter/.test(E)&&!z&&0!==M&&(z=0),a._cacheValues&&I&&I[E]?(z===i&&(z=I[E].endValue+I[E].unitType),U=o(r).rootPropertyValueCache[L]):w.Hooks.registered[E]?z===i?(U=w.getPropertyValue(r,L),z=w.getPropertyValue(r,E,U)):U=w.Hooks.templates[L][1]:z===i&&(z=w.getPropertyValue(r,E));var q,F,B,J=!1;if(q=p(E,z),z=q[0],B=q[1],q=p(E,M),M=q[0].replace(/^([+-\/*])=/,function(t,e){return J=e,""}),F=q[1],z=parseFloat(z)||0,M=parseFloat(M)||0,"%"===F&&(/^(fontSize|lineHeight)$/.test(E)?(M/=100,F="em"):/^scale/.test(E)?(M/=100,F=""):/(Red|Green|Blue)$/i.test(E)&&(M=M/100*255,F="")),/[\/*]/.test(J))F=B;else if(B!==F&&0!==z)if(0===M)F=B;else{s=s||d();var W=/margin|padding|left|right|width|text|word|letter/i.test(E)||/X$/.test(E)||"x"===E?"x":"y";switch(B){case"%":z*="x"===W?s.percentToPxWidth:s.percentToPxHeight;break;case"px":break;default:z*=s[B+"ToPx"]}switch(F){case"%":z*=1/("x"===W?s.percentToPxWidth:s.percentToPxHeight);break;case"px":break;default:z*=1/s[F+"ToPx"]}}switch(J){case"+":M=z+M;break;case"-":M=z-M;break;case"*":M*=z;break;case"/":M=z/M}l[E]={rootPropertyValue:U,startValue:z,currentValue:z,endValue:M,unitType:F,easing:$},b.debug&&console.log("tweensContainer ("+E+"): "+JSON.stringify(l[E]),r)}else b.debug&&console.log("Skipping ["+L+"] due to a lack of browser support.")}l.element=r}l.element&&(w.Values.addClass(r,"velocity-animating"),R.push(l),""===a.queue&&(o(r).tweensContainer=l,o(r).opts=a),o(r).isAnimating=!0,S===T-1?(b.State.calls.push([R,f,a,null,x.resolver]),!1===b.State.isTicking&&(b.State.isTicking=!0,u())):S++)}var s,r=this,a=h.extend({},b.defaults,y),l={};switch(o(r)===i&&b.init(r),parseFloat(a.delay)&&!1!==a.queue&&h.queue(r,a.queue,function(t){b.velocityQueueEntryFlag=!0,o(r).delayTimer={setTimeout:setTimeout(t,parseFloat(a.delay)),next:t}}),a.duration.toString().toLowerCase()){case"fast":a.duration=200;break;case"normal":a.duration=v;break;case"slow":a.duration=600;break;default:a.duration=parseFloat(a.duration)||1}!1!==b.mock&&(!0===b.mock?a.duration=a.delay=1:(a.duration*=parseFloat(b.mock)||1,a.delay*=parseFloat(b.mock)||1)),a.easing=c(a.easing,a.duration),a.begin&&!g.isFunction(a.begin)&&(a.begin=null),a.progress&&!g.isFunction(a.progress)&&(a.progress=null),a.complete&&!g.isFunction(a.complete)&&(a.complete=null),a.display!==i&&null!==a.display&&(a.display=a.display.toString().toLowerCase(),"auto"===a.display&&(a.display=b.CSS.Values.getDisplayType(r))),a.visibility!==i&&null!==a.visibility&&(a.visibility=a.visibility.toString().toLowerCase()),a.mobileHA=a.mobileHA&&b.State.isMobile&&!b.State.isGingerbread,!1===a.queue?a.delay?setTimeout(t,a.delay):t():h.queue(r,a.queue,function(e,n){return!0===n?(x.promise&&x.resolver(f),!0):(b.velocityQueueEntryFlag=!0,void t(e))}),""!==a.queue&&"fx"!==a.queue||"inprogress"===h.queue(r)[0]||h.dequeue(r)}var a,l,d,f,m,y,_=arguments[0]&&(arguments[0].p||h.isPlainObject(arguments[0].properties)&&!arguments[0].properties.names||g.isString(arguments[0].properties));if(g.isWrapped(this)?(a=!1,d=0,f=this,l=this):(a=!0,d=1,f=_?arguments[0].elements||arguments[0].e:arguments[0]),f=r(f)){_?(m=arguments[0].properties||arguments[0].p,y=arguments[0].options||arguments[0].o):(m=arguments[d],y=arguments[d+1]);var T=f.length,S=0;if(!/^(stop|finish)$/i.test(m)&&!h.isPlainObject(y)){var C=d+1;y={};for(var A=C;A<arguments.length;A++)g.isArray(arguments[A])||!/^(fast|normal|slow)$/i.test(arguments[A])&&!/^\d/.test(arguments[A])?g.isString(arguments[A])||g.isArray(arguments[A])?y.easing=arguments[A]:g.isFunction(arguments[A])&&(y.complete=arguments[A]):y.duration=arguments[A]}var x={promise:null,resolver:null,rejecter:null};a&&b.Promise&&(x.promise=new b.Promise(function(t,e){x.resolver=t,x.rejecter=e}));var j;switch(m){case"scroll":j="scroll";break;case"reverse":j="reverse";break;case"finish":case"stop":h.each(f,function(t,e){o(e)&&o(e).delayTimer&&(clearTimeout(o(e).delayTimer.setTimeout),o(e).delayTimer.next&&o(e).delayTimer.next(),delete o(e).delayTimer)});var I=[];return h.each(b.State.calls,function(t,e){e&&h.each(e[1],function(n,s){var r=y===i?"":y;return!0!==r&&e[2].queue!==r&&(y!==i||!1!==e[2].queue)||void h.each(f,function(n,i){i===s&&((!0===y||g.isString(y))&&(h.each(h.queue(i,g.isString(y)?y:""),function(t,e){g.isFunction(e)&&e(null,!0)}),h.queue(i,g.isString(y)?y:"",[])),"stop"===m?(o(i)&&o(i).tweensContainer&&!1!==r&&h.each(o(i).tweensContainer,function(t,e){e.endValue=e.currentValue}),I.push(t)):"finish"===m&&(e[2].duration=1))})})}),"stop"===m&&(h.each(I,function(t,e){p(e,!0)}),x.promise&&x.resolver(f)),t();default:if(!h.isPlainObject(m)||g.isEmptyObject(m)){if(g.isString(m)&&b.Redirects[m]){var D=h.extend({},y),P=D.duration,E=D.delay||0;return!0===D.backwards&&(f=h.extend(!0,[],f).reverse()),h.each(f,function(t,e){parseFloat(D.stagger)?D.delay=E+parseFloat(D.stagger)*t:g.isFunction(D.stagger)&&(D.delay=E+D.stagger.call(e,t,T)),D.drag&&(D.duration=parseFloat(P)||(/^(callout|transition)/.test(m)?1e3:v),D.duration=Math.max(D.duration*(D.backwards?1-t/T:(t+1)/T),.75*D.duration,200)),b.Redirects[m].call(e,e,D||{},t,T,f,x.promise?x:i)}),t()}var O="Velocity: First argument ("+m+") was not a property map, a known action, or a registered redirect. Aborting.";return x.promise?x.rejecter(new Error(O)):console.log(O),t()}j="start"}var N={lastParent:null,lastPosition:null,lastFontSize:null,lastPercentToPxWidth:null,lastPercentToPxHeight:null,lastEmToPx:null,remToPx:null,vwToPx:null,vhToPx:null},R=[];h.each(f,function(t,e){g.isNode(e)&&s.call(e)});var M,D=h.extend({},b.defaults,y);if(D.loop=parseInt(D.loop),M=2*D.loop-1,D.loop)for(var $=0;M>$;$++){var z={delay:D.delay,progress:D.progress};$===M-1&&(z.display=D.display,z.visibility=D.visibility,z.complete=D.complete),k(f,"reverse",z)}return t()}};b=h.extend(k,b),b.animate=k;var T=e.requestAnimationFrame||f;return b.State.isMobile||n.hidden===i||n.addEventListener("visibilitychange",function(){n.hidden?(T=function(t){return setTimeout(function(){t(!0)},16)},u()):T=e.requestAnimationFrame||f}),t.Velocity=b,t!==e&&(t.fn.velocity=k,t.fn.velocity.defaults=b.defaults),h.each(["Down","Up"],function(t,e){b.Redirects["slide"+e]=function(t,n,s,r,o,a){var l=h.extend({},n),c=l.begin,u=l.complete,p={height:"",marginTop:"",marginBottom:"",paddingTop:"",paddingBottom:""},d={};l.display===i&&(l.display="Down"===e?"inline"===b.CSS.Values.getDisplayType(t)?"inline-block":"block":"none"),l.begin=function(){c&&c.call(o,o);for(var n in p){d[n]=t.style[n];var i=b.CSS.getPropertyValue(t,n);p[n]="Down"===e?[i,0]:[0,i]}d.overflow=t.style.overflow,t.style.overflow="hidden"},l.complete=function(){for(var e in d)t.style[e]=d[e];u&&u.call(o,o),a&&a.resolver(o)},b(t,p,l)}}),h.each(["In","Out"],function(t,e){b.Redirects["fade"+e]=function(t,n,s,r,o,a){var l=h.extend({},n),c={opacity:"In"===e?1:0},u=l.complete;l.complete=s!==r-1?l.begin=null:function(){u&&u.call(o,o),a&&a.resolver(o)},l.display===i&&(l.display="In"===e?"auto":"none"),b(this,c,l)}}),b}(window.jQuery||window.Zepto||window,window,document)}),function(t){"function"==typeof require&&"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(["velocity"],t):t()}(function(){return function(t,e,n,i){function s(t,e){var n=[];return!(!t||!e)&&(o.each([t,e],function(t,e){var i=[];o.each(e,function(t,e){for(;e.toString().length<5;)e="0"+e;i.push(e)}),n.push(i.join(""))}),parseFloat(n[0])>parseFloat(n[1]))}if(!t.Velocity||!t.Velocity.Utilities)return void(e.console&&console.log("Velocity UI Pack: Velocity must be loaded first. Aborting."));var r=t.Velocity,o=r.Utilities;if(s({major:1,minor:1,patch:0},r.version)){var a="Velocity UI Pack: You need to update Velocity (jquery.velocity.js) to a newer version. Visit http://github.com/julianshapiro/velocity.";throw alert(a),new Error(a)}r.RegisterEffect=r.RegisterUI=function(t,e){function n(t,e,n,i){var s,a=0;o.each(t.nodeType?[t]:t,function(t,e){i&&(n+=t*i),s=e.parentNode,o.each(["height","paddingTop","paddingBottom","marginTop","marginBottom"],function(t,n){a+=parseFloat(r.CSS.getPropertyValue(e,n))})}),r.animate(s,{height:("In"===e?"+":"-")+"="+a},{queue:!1,easing:"ease-in-out",duration:n*("In"===e?.6:1)})}return r.Redirects[t]=function(s,a,l,c,u,p){function h(){a.display!==i&&"none"!==a.display||!/Out$/.test(t)||o.each(u.nodeType?[u]:u,function(t,e){r.CSS.setPropertyValue(e,"display","none")}),a.complete&&a.complete.call(u,u),p&&p.resolver(u||s)}var d=l===c-1;"function"==typeof e.defaultDuration?e.defaultDuration=e.defaultDuration.call(u,u):e.defaultDuration=parseFloat(e.defaultDuration);for(var f=0;f<e.calls.length;f++){var g=e.calls[f],m=g[0],v=a.duration||e.defaultDuration||1e3,y=g[1],b=g[2]||{},_={};if(_.duration=v*(y||1),_.queue=a.queue||"",_.easing=b.easing||"ease",_.delay=parseFloat(b.delay)||0,_._cacheValues=b._cacheValues||!0,0===f){if(_.delay+=parseFloat(a.delay)||0,0===l&&(_.begin=function(){a.begin&&a.begin.call(u,u);var e=t.match(/(In|Out)$/);e&&"In"===e[0]&&m.opacity!==i&&o.each(u.nodeType?[u]:u,function(t,e){r.CSS.setPropertyValue(e,"opacity",0)}),a.animateParentHeight&&e&&n(u,e[0],v+_.delay,a.stagger)}),null!==a.display)if(a.display!==i&&"none"!==a.display)_.display=a.display;else if(/In$/.test(t)){var w=r.CSS.Values.getDisplayType(s);_.display="inline"===w?"inline-block":w}a.visibility&&"hidden"!==a.visibility&&(_.visibility=a.visibility)}f===e.calls.length-1&&(_.complete=function(){if(e.reset){for(var t in e.reset){var n=e.reset[t];r.CSS.Hooks.registered[t]!==i||"string"!=typeof n&&"number"!=typeof n||(e.reset[t]=[e.reset[t],e.reset[t]])}var o={duration:0,queue:!1};d&&(o.complete=h),r.animate(s,e.reset,o)}else d&&h()},"hidden"===a.visibility&&(_.visibility=a.visibility)),r.animate(s,m,_)}},r},r.RegisterEffect.packagedEffects={"callout.bounce":{defaultDuration:550,calls:[[{translateY:-30},.25],[{translateY:0},.125],[{translateY:-15},.125],[{translateY:0},.25]]},"callout.shake":{defaultDuration:800,calls:[[{translateX:-11},.125],[{translateX:11},.125],[{translateX:-11},.125],[{translateX:11},.125],[{translateX:-11},.125],[{translateX:11},.125],[{translateX:-11},.125],[{translateX:0},.125]]},"callout.flash":{defaultDuration:1100,calls:[[{opacity:[0,"easeInOutQuad",1]},.25],[{opacity:[1,"easeInOutQuad"]},.25],[{opacity:[0,"easeInOutQuad"]},.25],[{opacity:[1,"easeInOutQuad"]},.25]]},"callout.pulse":{defaultDuration:825,calls:[[{scaleX:1.1,scaleY:1.1},.5,{easing:"easeInExpo"}],[{scaleX:1,scaleY:1},.5]]},"callout.swing":{defaultDuration:950,calls:[[{rotateZ:15},.2],[{rotateZ:-10},.2],[{rotateZ:5},.2],[{rotateZ:-5},.2],[{rotateZ:0},.2]]},"callout.tada":{defaultDuration:1e3,calls:[[{scaleX:.9,scaleY:.9,rotateZ:-3},.1],[{scaleX:1.1,scaleY:1.1,rotateZ:3},.1],[{scaleX:1.1,scaleY:1.1,rotateZ:-3},.1],["reverse",.125],["reverse",.125],["reverse",.125],["reverse",.125],["reverse",.125],[{scaleX:1,scaleY:1,rotateZ:0},.2]]},"transition.fadeIn":{defaultDuration:500,calls:[[{opacity:[1,0]}]]},"transition.fadeOut":{defaultDuration:500,calls:[[{opacity:[0,1]}]]},"transition.flipXIn":{defaultDuration:700,calls:[[{opacity:[1,0],transformPerspective:[800,800],rotateY:[0,-55]}]],reset:{transformPerspective:0}},"transition.flipXOut":{defaultDuration:700,calls:[[{opacity:[0,1],transformPerspective:[800,800],rotateY:55}]],reset:{transformPerspective:0,rotateY:0}},"transition.flipYIn":{defaultDuration:800,calls:[[{opacity:[1,0],transformPerspective:[800,800],rotateX:[0,-45]}]],reset:{transformPerspective:0}},"transition.flipYOut":{defaultDuration:800,calls:[[{opacity:[0,1],transformPerspective:[800,800],rotateX:25}]],reset:{transformPerspective:0,rotateX:0}},"transition.flipBounceXIn":{defaultDuration:900,calls:[[{opacity:[.725,0],transformPerspective:[400,400],rotateY:[-10,90]},.5],[{opacity:.8,rotateY:10},.25],[{opacity:1,rotateY:0},.25]],reset:{transformPerspective:0}},"transition.flipBounceXOut":{defaultDuration:800,calls:[[{opacity:[.9,1],transformPerspective:[400,400],rotateY:-10},.5],[{opacity:0,rotateY:90},.5]],reset:{transformPerspective:0,rotateY:0}},"transition.flipBounceYIn":{defaultDuration:850,calls:[[{opacity:[.725,0],transformPerspective:[400,400],rotateX:[-10,90]},.5],[{opacity:.8,rotateX:10},.25],[{opacity:1,rotateX:0},.25]],reset:{transformPerspective:0}},"transition.flipBounceYOut":{defaultDuration:800,calls:[[{opacity:[.9,1],transformPerspective:[400,400],rotateX:-15},.5],[{opacity:0,rotateX:90},.5]],reset:{transformPerspective:0,rotateX:0}},"transition.swoopIn":{defaultDuration:850,calls:[[{opacity:[1,0],transformOriginX:["100%","50%"],transformOriginY:["100%","100%"],scaleX:[1,0],scaleY:[1,0],translateX:[0,-700],translateZ:0}]],reset:{transformOriginX:"50%",transformOriginY:"50%"}},"transition.swoopOut":{defaultDuration:850,calls:[[{opacity:[0,1],transformOriginX:["50%","100%"],transformOriginY:["100%","100%"],scaleX:0,scaleY:0,translateX:-700,translateZ:0}]],reset:{transformOriginX:"50%",transformOriginY:"50%",scaleX:1,scaleY:1,translateX:0}},"transition.whirlIn":{defaultDuration:850,calls:[[{opacity:[1,0],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:[1,0],scaleY:[1,0],rotateY:[0,160]},1,{easing:"easeInOutSine"}]]},"transition.whirlOut":{defaultDuration:750,calls:[[{opacity:[0,"easeInOutQuint",1],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:0,scaleY:0,rotateY:160},1,{easing:"swing"}]],reset:{scaleX:1,scaleY:1,rotateY:0}},"transition.shrinkIn":{defaultDuration:750,calls:[[{opacity:[1,0],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:[1,1.5],scaleY:[1,1.5],translateZ:0}]]},"transition.shrinkOut":{defaultDuration:600,calls:[[{opacity:[0,1],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:1.3,scaleY:1.3,translateZ:0}]],reset:{scaleX:1,scaleY:1}},"transition.expandIn":{defaultDuration:700,calls:[[{opacity:[1,0],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:[1,.625],scaleY:[1,.625],translateZ:0}]]},"transition.expandOut":{defaultDuration:700,calls:[[{opacity:[0,1],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:.5,scaleY:.5,translateZ:0}]],reset:{scaleX:1,scaleY:1}},"transition.bounceIn":{defaultDuration:800,calls:[[{opacity:[1,0],scaleX:[1.05,.3],scaleY:[1.05,.3]},.4],[{scaleX:.9,scaleY:.9,translateZ:0},.2],[{scaleX:1,scaleY:1},.5]]},"transition.bounceOut":{defaultDuration:800,calls:[[{scaleX:.95,scaleY:.95},.35],[{scaleX:1.1,scaleY:1.1,translateZ:0},.35],[{opacity:[0,1],scaleX:.3,scaleY:.3},.3]],reset:{scaleX:1,scaleY:1}},"transition.bounceUpIn":{defaultDuration:800,calls:[[{opacity:[1,0],translateY:[-30,1e3]},.6,{easing:"easeOutCirc"}],[{translateY:10},.2],[{translateY:0},.2]]},"transition.bounceUpOut":{defaultDuration:1e3,calls:[[{translateY:20},.2],[{opacity:[0,"easeInCirc",1],translateY:-1e3},.8]],reset:{translateY:0}},"transition.bounceDownIn":{defaultDuration:800,calls:[[{opacity:[1,0],translateY:[30,-1e3]},.6,{easing:"easeOutCirc"}],[{translateY:-10},.2],[{translateY:0},.2]]},"transition.bounceDownOut":{defaultDuration:1e3,calls:[[{translateY:-20},.2],[{opacity:[0,"easeInCirc",1],translateY:1e3},.8]],reset:{translateY:0}},"transition.bounceLeftIn":{defaultDuration:750,calls:[[{opacity:[1,0],translateX:[30,-1250]},.6,{easing:"easeOutCirc"}],[{translateX:-10},.2],[{translateX:0},.2]]},"transition.bounceLeftOut":{defaultDuration:750,calls:[[{translateX:30},.2],[{opacity:[0,"easeInCirc",1],translateX:-1250},.8]],reset:{translateX:0}},"transition.bounceRightIn":{defaultDuration:750,calls:[[{opacity:[1,0],translateX:[-30,1250]},.6,{easing:"easeOutCirc"}],[{translateX:10},.2],[{translateX:0},.2]]},"transition.bounceRightOut":{defaultDuration:750,calls:[[{translateX:-30},.2],[{opacity:[0,"easeInCirc",1],translateX:1250},.8]],reset:{translateX:0}},"transition.slideUpIn":{defaultDuration:900,calls:[[{opacity:[1,0],translateY:[0,20],translateZ:0}]]},"transition.slideUpOut":{defaultDuration:900,calls:[[{opacity:[0,1],translateY:-20,translateZ:0}]],reset:{translateY:0}},"transition.slideDownIn":{defaultDuration:900,calls:[[{opacity:[1,0],translateY:[0,-20],translateZ:0}]]},"transition.slideDownOut":{defaultDuration:900,calls:[[{opacity:[0,1],translateY:20,translateZ:0}]],reset:{translateY:0}},"transition.slideLeftIn":{defaultDuration:1e3,calls:[[{opacity:[1,0],translateX:[0,-20],translateZ:0}]]},"transition.slideLeftOut":{defaultDuration:1050,calls:[[{opacity:[0,1],translateX:-20,translateZ:0}]],reset:{translateX:0}},"transition.slideRightIn":{defaultDuration:1e3,calls:[[{opacity:[1,0],translateX:[0,20],translateZ:0}]]},"transition.slideRightOut":{defaultDuration:1050,calls:[[{opacity:[0,1],translateX:20,translateZ:0}]],reset:{translateX:0}},"transition.slideUpBigIn":{defaultDuration:850,calls:[[{opacity:[1,0],translateY:[0,75],translateZ:0}]]},"transition.slideUpBigOut":{defaultDuration:800,calls:[[{opacity:[0,1],translateY:-75,translateZ:0}]],reset:{translateY:0}},"transition.slideDownBigIn":{defaultDuration:850,calls:[[{opacity:[1,0],translateY:[0,-75],translateZ:0}]]},"transition.slideDownBigOut":{defaultDuration:800,calls:[[{opacity:[0,1],translateY:75,translateZ:0}]],reset:{translateY:0}},"transition.slideLeftBigIn":{defaultDuration:800,calls:[[{opacity:[1,0],translateX:[0,-75],translateZ:0}]]},"transition.slideLeftBigOut":{defaultDuration:750,calls:[[{opacity:[0,1],translateX:-75,translateZ:0}]],reset:{translateX:0}},"transition.slideRightBigIn":{defaultDuration:800,calls:[[{opacity:[1,0],translateX:[0,75],translateZ:0}]]},"transition.slideRightBigOut":{defaultDuration:750,calls:[[{opacity:[0,1],translateX:75,translateZ:0}]],reset:{translateX:0}},"transition.perspectiveUpIn":{defaultDuration:800,calls:[[{opacity:[1,0],transformPerspective:[800,800],transformOriginX:[0,0],transformOriginY:["100%","100%"],rotateX:[0,-180]}]]},"transition.perspectiveUpOut":{defaultDuration:850,calls:[[{opacity:[0,1],transformPerspective:[800,800],transformOriginX:[0,0],transformOriginY:["100%","100%"],rotateX:-180}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%",rotateX:0}},"transition.perspectiveDownIn":{defaultDuration:800,calls:[[{opacity:[1,0],transformPerspective:[800,800],transformOriginX:[0,0],transformOriginY:[0,0],rotateX:[0,180]}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%"}},"transition.perspectiveDownOut":{defaultDuration:850,calls:[[{opacity:[0,1],transformPerspective:[800,800],transformOriginX:[0,0],transformOriginY:[0,0],rotateX:180}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%",rotateX:0}},"transition.perspectiveLeftIn":{defaultDuration:950,calls:[[{opacity:[1,0],transformPerspective:[2e3,2e3],transformOriginX:[0,0],transformOriginY:[0,0],rotateY:[0,-180]}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%"}},"transition.perspectiveLeftOut":{defaultDuration:950,calls:[[{opacity:[0,1],transformPerspective:[2e3,2e3],transformOriginX:[0,0],transformOriginY:[0,0],rotateY:-180}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%",rotateY:0}},"transition.perspectiveRightIn":{defaultDuration:950,calls:[[{opacity:[1,0],transformPerspective:[2e3,2e3],transformOriginX:["100%","100%"],transformOriginY:[0,0],rotateY:[0,180]}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%"}},"transition.perspectiveRightOut":{defaultDuration:950,calls:[[{opacity:[0,1],transformPerspective:[2e3,2e3],transformOriginX:["100%","100%"],transformOriginY:[0,0],rotateY:180}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%",rotateY:0}}};for(var l in r.RegisterEffect.packagedEffects)r.RegisterEffect(l,r.RegisterEffect.packagedEffects[l]);r.RunSequence=function(t){var e=o.extend(!0,[],t);e.length>1&&(o.each(e.reverse(),function(t,n){var i=e[t+1];if(i){var s=n.options&&!1===n.options.sequenceQueue?"begin":"complete",a=i.options&&i.options[s],l={};l[s]=function(){var t=i.elements||i.e,e=t.nodeType?[t]:t;a&&a.call(e,e),r(n)},i.options=o.extend({},i.options,l)}}),e.reverse()),r(e[0])}}(window.jQuery||window.Zepto||window,window,document)}),function(){var t,e,n,i,s,r,o,a,l,c,u=[].slice,p=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},h=function(t,e){function n(){this.constructor=t}for(var i in e)d.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},d={}.hasOwnProperty,f=function(t,e){return function(){return t.apply(e,arguments)}};n={bind:function(t,e){var n,i,s,r,o;for(i=t.split(" "),this.hasOwnProperty("_callbacks")||this._callbacks||(this._callbacks={}),s=0,r=i.length;s<r;s++)o=i[s],(n=this._callbacks)[o]||(n[o]=[]),this._callbacks[o].push(e);return this},one:function(t,e){var n;return this.bind(t,n=function(){return this.unbind(t,n),e.apply(this,arguments)})},trigger:function(){var t,e,n,i,s,r,o;if(t=1<=arguments.length?u.call(arguments,0):[],n=t.shift(),r=null!=(o=this._callbacks)?o[n]:void 0){for(i=0,s=r.length;i<s&&(e=r[i],!1!==e.apply(this,t));i++);return!0}},listenTo:function(t,e,n){return t.bind(e,n),this.listeningTo||(this.listeningTo=[]),this.listeningTo.push({obj:t,ev:e,callback:n}),this},listenToOnce:function(t,e,n){var i,s;return s=this.listeningToOnce||(this.listeningToOnce=[]),t.bind(e,i=function(){var r,o,a,l,c;for(o=-1,r=a=0,l=s.length;a<l;r=++a)c=s[r],c.obj===t&&c.ev===e&&c.callback===i&&(o=r);return t.unbind(e,i),-1!==o&&s.splice(o,1),n.apply(this,arguments)}),s.push({obj:t,ev:e,callback:i}),this},stopListening:function(e,n,i){var s,r,o,a,l,c,u,h,d,f,g,m,v,y,b,_,w,k;if(0===arguments.length){for(_=[this.listeningTo,this.listeningToOnce],l=0,h=_.length;l<h;l++)if(m=_[l],null!=m?m.length:void 0)for(c=0,d=m.length;c<d;c++)v=m[c],v.obj.unbind(v.ev,v.callback);this.listeningTo=void 0,this.listeningToOnce=void 0}else if(e)for(n=n?n.split(" "):[void 0],w=[this.listeningTo,this.listeningToOnce],u=0,f=w.length;u<f;u++)if(m=w[u])for(y=0,g=n.length;y<g;y++)for(r=n[y],a=b=k=m.length-1;k<=0?b<=0:b>=0;a=k<=0?++b:--b)v=m[a],v.obj===e&&(i&&v.callback!==i||(r&&r!==v.ev?r&&(o=v.ev.split(" "),p.call(o,r)>=0&&(o=function(){var t,e,n;for(n=[],e=0,t=o.length;e<t;e++)(s=o[e])!==r&&n.push(s);return n}(),v.ev=t.trim(o.join(" ")),v.obj.unbind(r,v.callback))):(v.obj.unbind(v.ev,v.callback),-1!==a&&m.splice(a,1))));return this},unbind:function(t,e){var n,i,s,r,o,a,l,c,u;if(0===arguments.length)return this._callbacks={},this;if(!t)return this;for(n=t.split(" "),s=0,o=n.length;s<o;s++)if(c=n[s],l=null!=(u=this._callbacks)?u[c]:void 0)if(e){for(i=r=0,a=l.length;r<a;i=++r)if(l[i]===e){l=l.slice(),l.splice(i,1),this._callbacks[c]=l;break}}else delete this._callbacks[c];return this}},n.on=n.bind,n.off=n.unbind,i={trace:!0,logPrefix:"(App)",log:function(){var t;if(t=1<=arguments.length?u.call(arguments,0):[],this.trace)return this.logPrefix&&t.unshift(this.logPrefix),void 0!==console&&null!==console&&"function"==typeof console.log&&console.log.apply(console,t),this}},c=["included","extended"],r=function(){function t(){"function"==typeof this.init&&this.init.apply(this,arguments)}return t.include=function(t){var e,n,i;if(!t)throw new Error("include(obj) requires obj");for(e in t)i=t[e],p.call(c,e)<0&&(this.prototype[e]=i);return null!=(n=t.included)&&n.apply(this),this},t.extend=function(t){var e,n,i;if(!t)throw new Error("extend(obj) requires obj");for(e in t)i=t[e],p.call(c,e)<0&&(this[e]=i);return null!=(n=t.extended)&&n.apply(this),this},t.proxy=function(t){return function(e){return function(){return t.apply(e,arguments)}}(this)},t.prototype.proxy=function(t){return function(e){return function(){return t.apply(e,arguments)}}(this)},t}(),s=function(e){function i(t){i.__super__.constructor.apply(this,arguments),null!=this.constructor.uuid&&"function"==typeof this.constructor.uuid?(this.cid=this.constructor.uuid(),this.id||(this.id=this.cid)):this.cid=(null!=t?t.cid:void 0)||this.constructor.uid("c-"),t&&this.load(t)}return h(i,e),i.extend(n),i.include(n),i.records=[],i.irecords={},i.attributes=[],i.configure=function(){var t,e;return e=arguments[0],t=2<=arguments.length?u.call(arguments,1):[],this.className=e,this.deleteAll(),t.length&&(this.attributes=t),this.attributes&&(this.attributes=l(this.attributes)),this.attributes||(this.attributes=[]),this.unbind(),this},i.toString=function(){return this.className+"("+this.attributes.join(", ")+")"},i.find=function(t,e){var n;return null==e&&(e=this.notFound),(null!=(n=this.irecords[t])?n.clone():void 0)||("function"==typeof e?e(t):void 0)},i.findAll=function(t,e){var n,i,s,r;for(r=[],i=0,s=t.length;i<s;i++)n=t[i],this.find(n,e)&&r.push(this.find(n));return r},i.notFound=function(){return null},i.exists=function(t){return Boolean(this.irecords[t])},i.addRecord=function(t,e){var n;return(n=this.irecords[t.id||t.cid])?n.refresh(t):(t.id||(t.id=t.cid),this.irecords[t.id]=this.irecords[t.cid]=t,void 0!==e?this.records.splice(e,0,t):this.records.push(t)),t},i.refresh=function(t,e){var n,i,s,r,o;for(null==e&&(e={}),e.clear&&this.deleteAll(),r=this.fromJSON(t),Array.isArray(r)||(r=[r]),n=0,i=r.length;n<i;n++)s=r[n],this.addRecord(s);return this.sort(),o=this.cloneArray(r),this.trigger("refresh",o,e),o},i.select=function(t){var e,n,i,s,r;for(s=this.records,r=[],e=0,n=s.length;e<n;e++)i=s[e],t(i)&&r.push(i.clone());return r},i.findByAttribute=function(t,e){var n,i,s,r;for(r=this.records,n=0,i=r.length;n<i;n++)if(s=r[n],s[t]===e)return s.clone();return null},i.findAllByAttribute=function(t,e){return this.select(function(n){return n[t]===e})},i.each=function(t){var e,n,i,s,r;for(s=this.records,r=[],e=0,n=s.length;e<n;e++)i=s[e],r.push(t(i.clone()));return r},i.all=function(){return this.cloneArray(this.records)},i.slice=function(t,e){return null==t&&(t=0),this.cloneArray(this.records.slice(t,e))},i.first=function(t){var e;return null==t&&(t=1),t>1?this.cloneArray(this.records.slice(0,t)):null!=(e=this.records[0])?e.clone():void 0},i.last=function(t){var e;return"number"==typeof t?this.cloneArray(this.records.slice(-t)):null!=(e=this.records[this.records.length-1])?e.clone():void 0},i.count=function(){return this.records.length},i.deleteAll=function(){return this.records=[],this.irecords={}},i.destroyAll=function(t){var e,n,i,s,r;for(s=this.records,r=[],e=0,n=s.length;e<n;e++)i=s[e],r.push(i.destroy(t));return r},i.update=function(t,e,n){return this.find(t).updateAttributes(e,n)},i.create=function(t,e){var n;return n=new this(t),n.save(e)},i.destroy=function(t,e){var n;return null!=(n=this.find(t))?n.destroy(e):void 0},i.change=function(t){return"function"==typeof t?this.bind("change",t):this.trigger.apply(this,["change"].concat(u.call(arguments)))},i.fetch=function(t){return"function"==typeof t?this.bind("fetch",t):this.trigger.apply(this,["fetch"].concat(u.call(arguments)))},i.toJSON=function(){return this.records},i.beforeFromJSON=function(t){return t},i.fromJSON=function(t){var e,n,i,s;if(t){if("string"==typeof t&&(t=JSON.parse(t)),t=this.beforeFromJSON(t),Array.isArray(t)){for(i=[],e=0,n=t.length;e<n;e++)s=t[e],s instanceof this?i.push(s):i.push(new this(s));return i}return t instanceof this?t:new this(t)}},i.fromForm=function(){var t;return(t=new this).fromForm.apply(t,arguments)},i.sort=function(){
return this.comparator&&this.records.sort(this.comparator),this},i.cloneArray=function(t){var e,n,i,s;for(i=[],e=0,n=t.length;e<n;e++)s=t[e],i.push(s.clone());return i},i.idCounter=0,i.uid=function(t){var e;return null==t&&(t=""),e=t+this.idCounter++,this.exists(e)&&(e=this.uid(t)),e},i.prototype.isNew=function(){return!this.exists()},i.prototype.isValid=function(){return!this.validate()},i.prototype.validate=function(){},i.prototype.load=function(t){var e,n;t.id&&(this.id=t.id);for(e in t)if(n=t[e],"function"==typeof this[e]){if("function"==typeof n)continue;this[e](n)}else this[e]=n;return this},i.prototype.attributes=function(){var t,e,n,i,s;for(s={},i=this.constructor.attributes,t=0,n=i.length;t<n;t++)(e=i[t])in this&&("function"==typeof this[e]?s[e]=this[e]():s[e]=this[e]);return this.id&&(s.id=this.id),s},i.prototype.eql=function(t){return t&&t.constructor===this.constructor&&(t.cid===this.cid||t.id&&t.id===this.id)},i.prototype.save=function(t){var e,n;return null==t&&(t={}),!1!==t.validate&&(e=this.validate())?(this.trigger("error",this,e),!1):(this.trigger("beforeSave",this,t),n=this.isNew()?this.create(t):this.update(t),this.stripCloneAttrs(),this.trigger("save",n,t),n)},i.prototype.stripCloneAttrs=function(){var t,e;if(!this.hasOwnProperty("cid")){e=this;for(t in e)d.call(e,t)&&(e[t],p.call(this.constructor.attributes,t)>=0&&delete this[t]);return this}},i.prototype.updateAttribute=function(t,e,n){var i;return i={},i[t]=e,this.updateAttributes(i,n)},i.prototype.updateAttributes=function(t,e){return this.load(t),this.save(e)},i.prototype.changeID=function(t){var e;if(t!==this.id)return e=this.constructor.irecords,e[t]=e[this.id],this.cid!==this.id&&delete e[this.id],this.id=t},i.prototype.remove=function(t){var e,n,i,s,r;for(null==t&&(t={}),r=this.constructor.records.slice(0),e=n=0,i=r.length;n<i;e=++n)if(s=r[e],this.eql(s)){r.splice(e,1);break}if(this.constructor.records=r,t.clear)return delete this.constructor.irecords[this.id],delete this.constructor.irecords[this.cid]},i.prototype.destroy=function(t){return null==t&&(t={}),null==t.clear&&(t.clear=!0),this.trigger("beforeDestroy",this,t),this.remove(t),this.destroyed=!0,this.trigger("destroy",this,t),this.trigger("change",this,"destroy",t),this.listeningTo&&this.stopListening(),this.unbind(),this},i.prototype.dup=function(t){var e,n;return null==t&&(t=!0),e=this.attributes(),t?delete e.id:e.cid=this.cid,n=new this.constructor(e),t||this._callbacks&&(n._callbacks=this._callbacks),n},i.prototype.clone=function(){return a(this)},i.prototype.reload=function(){var t;return this.isNew()?this:(t=this.constructor.find(this.id),this.load(t.attributes()),t)},i.prototype.refresh=function(t){var e,n;return t=this.constructor.fromJSON(t),t.id&&this.id!==t.id&&this.changeID(t.id),this.constructor.irecords[this.id]?(this.constructor.irecords[this.id].load(t),this.trigger("refresh",this),this):(n=this.constructor.className,e=JSON.stringify(t),void console.log("Can't refresh not existing %s instance with ID %s and attributes %s. Possible race condition?",n,this.id,e))},i.prototype.toJSON=function(){return this.attributes()},i.prototype.toString=function(){return"<"+this.constructor.className+" ("+JSON.stringify(this)+")>"},i.prototype.fromForm=function(e){var n,i,s,r,o,a,l,c,u,p,h,d,f,g;for(g={},h=t(e).find("[type=checkbox]:not([value])"),i=0,a=h.length;i<a;i++)n=h[i],g[n.name]=t(n).prop("checked");for(d=t(e).find('[type=checkbox][name$="[]"]'),s=0,l=d.length;s<l;s++)n=d[s],u=n.name.replace(/\[\]$/,""),g[u]||(g[u]=[]),t(n).prop("checked")&&g[u].push(n.value);for(f=t(e).serializeArray(),o=0,c=f.length;o<c;o++)r=f[o],g[p=r.name]||(g[p]=r.value);return this.load(g)},i.prototype.exists=function(){return this.constructor.exists(this.id)},i.prototype.update=function(t){var e,n;return this.trigger("beforeUpdate",this,t),n=this.constructor.irecords,n[this.id].load(this.attributes()),this.constructor.sort(),e=n[this.id].clone(),e.trigger("update",e,t),e.trigger("change",e,"update",t),e},i.prototype.create=function(t){var e,n;return this.trigger("beforeCreate",this,t),this.id||(this.id=this.cid),n=this.dup(!1),this.constructor.addRecord(n,t.idx),this.constructor.sort(),e=n.clone(),e.trigger("create",e,t),e.trigger("change",e,"create",t),e},i.prototype.bind=function(){var t;return t=this.constructor.irecords[this.id]||this,n.bind.apply(t,arguments)},i.prototype.one=function(){var t;return t=this.constructor.irecords[this.id]||this,n.one.apply(t,arguments)},i.prototype.unbind=function(){var t;return t=this.constructor.irecords[this.id]||this,n.unbind.apply(t,arguments)},i.prototype.trigger=function(){var t;return n.trigger.apply(this,arguments),(t=this.constructor).trigger.apply(t,arguments)},i}(r),s.prototype.on=s.prototype.bind,s.prototype.off=s.prototype.unbind,e=function(e){function s(e){this.release=f(this.release,this);var n,i,r,o,a;this.options=e,o=this.options;for(i in o)a=o[i],this[i]=a;for(this.el||(this.el=document.createElement(this.tag)),this.el=t(this.el),this.className&&this.el.addClass(this.className),this.attributes&&this.el.attr(this.attributes),this.events||(this.events=this.constructor.events),this.elements||(this.elements=this.constructor.elements),n=this;r=n.constructor.__super__;)r.events&&(this.events=t.extend({},r.events,this.events)),r.elements&&(this.elements=t.extend({},r.elements,this.elements)),n=r;this.events&&this.delegateEvents(this.events),this.elements&&this.refreshElements(),s.__super__.constructor.apply(this,arguments)}return h(s,e),s.include(n),s.include(i),s.prototype.eventSplitter=/^(\S+)\s*(.*)$/,s.prototype.tag="div",s.prototype.release=function(){return this.trigger("release",this),this.el.remove(),this.unbind(),this.stopListening()},s.prototype.$=function(t){return this.el.find(t)},s.prototype.delegateEvents=function(t){var e,n,i,s,r,o;r=[];for(n in t){if("function"==typeof(s=t[n]))s=function(t){return function(e){return function(){return e.apply(t,arguments),!0}}}(this)(s);else{if(!this[s])throw new Error(s+" doesn't exist");s=function(t){return function(e){return function(){return t[e].apply(t,arguments),!0}}}(this)(s)}i=n.match(this.eventSplitter),e=i[1],o=i[2],""===o?r.push(this.el.bind(e,s)):r.push(this.el.on(e,o,s))}return r},s.prototype.refreshElements=function(){var t,e,n,i;e=this.elements,n=[];for(t in e)i=e[t],n.push(this[i]=this.$(t));return n},s.prototype.delay=function(t,e){return setTimeout(this.proxy(t),e||0)},s.prototype.html=function(t){return this.el.html(t.el||t),this.refreshElements(),this.el},s.prototype.append=function(){var t,e,n;return e=1<=arguments.length?u.call(arguments,0):[],e=function(){var n,i,s;for(s=[],n=0,i=e.length;n<i;n++)t=e[n],s.push(t.el||t);return s}(),(n=this.el).append.apply(n,e),this.refreshElements(),this.el},s.prototype.appendTo=function(t){return this.el.appendTo(t.el||t),this.refreshElements(),this.el},s.prototype.prepend=function(){var t,e,n;return e=1<=arguments.length?u.call(arguments,0):[],e=function(){var n,i,s;for(s=[],n=0,i=e.length;n<i;n++)t=e[n],s.push(t.el||t);return s}(),(n=this.el).prepend.apply(n,e),this.refreshElements(),this.el},s.prototype.replace=function(e){var n,i,s;return e=e.el||e,"string"==typeof e&&(e=t.trim(e)),s=[this.el,t((null!=(i=t.parseHTML(e))?i[0]:void 0)||e)],n=s[0],this.el=s[1],n.replaceWith(this.el),this.delegateEvents(this.events),this.refreshElements(),this.el},s}(r),t=("undefined"!=typeof window&&null!==window?window.jQuery:void 0)||("undefined"!=typeof window&&null!==window?window.Zepto:void 0)||function(t){return t},a=Object.create||function(t){var e;return e=function(){},e.prototype=t,new e},l=function(t){return Array.prototype.slice.call(t,0)},o=this.Spine={},void 0!==module&&null!==module&&(module.exports=o),o.version="1.6.1",o.$=t,o.Events=n,o.Log=i,o.Module=r,o.Controller=e,o.Model=s,r.extend.call(o,n),r.create=r.sub=e.create=e.sub=s.sub=function(t,e){var n;return n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return h(e,t),e}(this),t&&n.include(t),e&&n.extend(e),"function"==typeof n.unbind&&n.unbind(),n},s.setup=function(t,e){var n;return null==e&&(e=[]),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return h(e,t),e}(this),n.configure.apply(n,[t].concat(u.call(e))),n},o.Class=r}.call(this),function(){var t,e,n,i,s,r,o,a,l,c,u,p=[].slice,h=function(t,e){return function(){return t.apply(e,arguments)}},d=function(t,e){function n(){this.constructor=t}for(var i in e)f.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},f={}.hasOwnProperty;u=this.Spine||require("spine"),t=u.$,a=u.Model,l=t({}),e={getURL:function(t){return null!=t.className?this.generateURL(t):this.generateURL(t,encodeURIComponent(t.id))},getCollectionURL:function(t){return this.generateURL(t)},getScope:function(t){return("function"==typeof t.scope?t.scope():void 0)||t.scope},getCollection:function(t){return t.url!==t.generateURL?"function"==typeof t.url?t.url():t.url:null!=t.className?t.className.toLowerCase()+"s":void 0},generateURL:function(){var t,n,i,s,r;return i=arguments[0],t=2<=arguments.length?p.call(arguments,1):[],n=e.getCollection(i)||e.getCollection(i.constructor),r=e.getScope(i)||e.getScope(i.constructor),t.unshift(n),t.unshift(r),s=t.join("/"),s=s.replace(/(\/\/)/g,"/"),s=s.replace(/^\/|\/$/g,""),0!==s.indexOf("../")?a.host+"/"+s:s},enabled:!0,disable:function(t){if(!this.enabled)return t();this.enabled=!1;try{return t()}catch(t){throw t}finally{this.enabled=!0}},queue:function(t){return t?l.queue(t):l.queue()},clearQueue:function(){return this.queue([])},config:{loadMethod:"GET",updateMethod:"PUT",createMethod:"POST",destroyMethod:"DELETE"}},n=function(){function n(){}return n.prototype.defaults={dataType:"json",processData:!1,headers:{"X-Requested-With":"XMLHttpRequest"}},n.prototype.queue=e.queue,n.prototype.ajax=function(e,n){return t.ajax(this.ajaxSettings(e,n))},n.prototype.ajaxQueue=function(n,i,s){var r,o,a,c,u,h;return o=null,r=t.Deferred(),c=r.promise(),e.enabled?(h=this.ajaxSettings(n,i),a=void 0!==h.parallel?h.parallel:"GET"===h.type,u=function(n){var i,c,u;if(null!=(null!=s?s.id:void 0)&&(null==h.url&&(h.url=e.getURL(s)),null!=(i=h.data)&&(i.id=s.id)),"string"!=typeof h.data&&!0!==h.processData&&(h.data=JSON.stringify(h.data)),u=function(){return r.resolve.apply(this,p.call(arguments).concat([h]))},c=function(){return r.reject.apply(this,p.call(arguments).concat([h]))},o=t.ajax(h),o.done(u),o.fail(c),o.then(n,n),a)return l.dequeue()},c.abort=function(e){var n;return o?o.abort(e):(n=t.inArray(u,this.queue()),n>-1&&this.queue().splice(n,1),r.rejectWith(h.context||h,[c,e,""]),c)},this.queue(u),c):c},n.prototype.ajaxSettings=function(e,n){return t.extend({},this.defaults,n,e)},n}(),i=function(t){function n(t){this.model=t,this.failResponse=h(this.failResponse,this),this.recordsResponse=h(this.recordsResponse,this)}return d(n,t),n.prototype.find=function(t,n,i){var s;return null==i&&(i={}),s=new this.model({id:t}),this.ajaxQueue(n,{type:i.method||e.config.loadMethod,url:i.url||e.getURL(s),parallel:i.parallel}).done(this.recordsResponse(i)).fail(this.failResponse(i))},n.prototype.all=function(t,n){return null==n&&(n={}),this.ajaxQueue(t,{type:n.method||e.config.loadMethod,url:n.url||e.getURL(this.model),parallel:n.parallel}).done(this.recordsResponse(n)).fail(this.failResponse(n))},n.prototype.fetch=function(t,e){var n;return null==t&&(t={}),null==e&&(e={}),(n=t.id)?(delete t.id,this.find(n,t,e).done(function(t){return function(n){return t.model.refresh(n,e)}}(this))):this.all(t,e).done(function(t){return function(n){return t.model.refresh(n,e)}}(this))},n.prototype.recordsResponse=function(t){return function(e){return function(n,i,s,r){var o;return e.model.trigger("ajaxSuccess",null,i,s,r),null!=(o=t.done)?o.call(e.model,r):void 0}}(this)},n.prototype.failResponse=function(t){return function(e){return function(n,i,s,r){var o,a,l;return e.model.trigger("ajaxError",null,n,i,s,r),e.record.trigger("ajaxError",e.record,n,i,s,r),a=n.responseText,_.isEmpty(a)||(o=JSON.parse(a)),null!=(l=t.fail)?l.call(e.record,r,o):void 0}}(this)},n}(n),c=function(t){function n(t){this.record=t,this.failResponse=h(this.failResponse,this),this.recordResponse=h(this.recordResponse,this),this.model=this.record.constructor}return d(n,t),n.prototype.reload=function(t,n){return null==n&&(n={}),this.ajaxQueue(t,{type:n.method||e.config.loadMethod,url:n.url,parallel:n.parallel},this.record).done(this.recordResponse(n)).fail(this.failResponse(n))},n.prototype.create=function(t,n){return null==n&&(n={}),this.ajaxQueue(t,{type:n.method||e.config.createMethod,contentType:"application/json",data:this.record.toJSON(),url:n.url||e.getCollectionURL(this.record),parallel:n.parallel}).done(this.recordResponse(n)).fail(this.failResponse(n))},n.prototype.update=function(t,n){return null==n&&(n={}),this.ajaxQueue(t,{type:n.method||e.config.updateMethod,contentType:"application/json",data:this.record.toJSON(),url:n.url,parallel:n.parallel},this.record).done(this.recordResponse(n)).fail(this.failResponse(n))},n.prototype.destroy=function(t,n){return null==n&&(n={}),this.ajaxQueue(t,{type:n.method||e.config.destroyMethod,url:n.url,parallel:n.parallel},this.record).done(this.recordResponse(n)).fail(this.failResponse(n))},n.prototype.recordResponse=function(t){return function(e){return function(n,i,s,r){var o;return null!=n&&Object.getOwnPropertyNames(n).length&&!e.record.destroyed&&e.record.refresh(n,{ajax:!1}),e.record.trigger("ajaxSuccess",e.record,e.model.fromJSON(n),i,s,r),null!=(o=t.done)?o.call(e.record,r):void 0}}(this)},n.prototype.failResponse=function(t){return function(e){return function(n,i,s,r){var o,a,l;switch(r.type){case"POST":e.createFailed();break;case"DELETE":e.destroyFailed()}return e.record.trigger("ajaxError",e.record,n,i,s,r),a=n.responseText,_.isEmpty(a)||(o=JSON.parse(a)),null!=(l=t.fail)&&l.call(e.record,r,o),e.record.trigger("destroy",e.record)}}(this)},n.prototype.createFailed=function(){return this.record.remove({clear:!0})},n.prototype.destroyFailed=function(){return this.record.destroyed=!1,this.record.constructor.refresh(this.record)},n}(n),a.host="",r={include:function(){var t;return t=1<=arguments.length?p.call(arguments,0):[],t.unshift(encodeURIComponent(this.id)),e.generateURL.apply(e,[this].concat(p.call(t)))},extend:function(){var t;return t=1<=arguments.length?p.call(arguments,0):[],e.generateURL.apply(e,[this].concat(p.call(t)))}},o={ajax:function(){return new c(this)},generateURL:r.include,url:r.include},s={ajax:function(){return new i(this)},generateURL:r.extend,url:r.extend},a.Ajax={extended:function(){return this.fetch(this.ajaxFetch),this.change(this.ajaxChange),this.extend(s),this.include(o)},ajaxFetch:function(){var t;return(t=this.ajax()).fetch.apply(t,arguments)},ajaxChange:function(t,e,n){var i;if(null==n&&(n={}),!1!==n.ajax)return"function"==typeof(i=t.ajax())[e]?i[e](n.ajax,n):void 0}},a.Ajax.Methods={extended:function(){return this.extend(s),this.include(o)}},e.defaults=n.prototype.defaults,e.Base=n,e.Singleton=c,e.Collection=i,u.Ajax=e,void 0!==module&&null!==module&&(module.exports=e)}.call(this),function(){var t;t=this.Spine||require("spine"),t.Model.Local={extended:function(){var t;t="spine"+(new Date).getTime();try{localStorage.setItem(t,t),localStorage.removeItem(t)}catch(t){return void t}return this.change(this.saveLocal),this.fetch(this.loadLocal)},saveLocal:function(){var t;return t=JSON.stringify(this),localStorage[this.className]=t},loadLocal:function(t){var e;return null==t&&(t={}),t.hasOwnProperty("clear")||(t.clear=!0),e=localStorage[this.className],this.refresh(e||[],t)}},void 0!==module&&null!==module&&(module.exports=t.Model.Local)}.call(this),function(){var t,e,n,i,s,r,o,a,l=function(t,e){function n(){this.constructor=t}for(var i in e)c.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},c={}.hasOwnProperty,u=[].slice;i=this.Spine||require("spine"),t=i.$,r=/^#*/,o=/:([\w\d]+)/g,a=/\*([\w\d]+)/g,s=/[-[\]{}()+?.,\\^$|#\s]/g,e=function(t){function e(t,e){var n;if(this.names=[],this.path=t,this.callback=e,"string"==typeof t){for(o.lastIndex=0;null!==(n=o.exec(t));)this.names.push(n[1]);for(a.lastIndex=0;null!==(n=a.exec(t));)this.names.push(n[1]);t=t.replace(s,"\\$&").replace(o,"([^/]*)").replace(a,"(.*?)"),this.route=new RegExp("^"+t+"$")}else this.route=t}return l(e,t),e.prototype.match=function(t,e){var i,s,r,o,a,l;if(null==e&&(e={}),!(o=this.route.exec(t)))return!1;if(e.match=o,l=o.slice(1),this.names.length)for(i=s=0,r=l.length;s<r;i=++s)a=l[i],e[this.names[i]]=a;return n.trigger("before",this),!1!==this.callback.call(null,e)},e}(i.Module),n=function(n){function s(){this.routes=[]}var o;return l(s,n),s.extend(i.Events),s.historySupport=null!=(null!=(o=window.history)?o.pushState:void 0),s.options={trigger:!0,history:!1,shim:!1,replace:!1,redirect:!1},s.routers=[],s.setup=function(e){if(null==e&&(e={}),this.options=t.extend({},this.options,e),this.options.history&&(this.history=this.historySupport&&this.options.history),!this.options.shim)return this.history?t(window).bind("popstate",this.change):t(window).bind("hashchange",this.change),this.change()},s.unbind=function(){var e;return e=i.Events.unbind.apply(this,arguments),arguments.length>0?e:this.options.shim?void 0:this.history?t(window).unbind("popstate",this.change):t(window).unbind("hashchange",this.change)},s.navigate=function(){var e,n,i,s,r;if(e=1<=arguments.length?u.call(arguments,0):[],i={},n=e[e.length-1],"object"==typeof n?i=e.pop():"boolean"==typeof n&&(i.trigger=e.pop()),i=t.extend({},this.options,i),s=e.join("/"),this.path!==s){if(this.path=s,i.trigger&&(this.trigger("navigate",this.path),r=this.matchRoutes(this.path,i),!r.length)){if("function"==typeof i.redirect)return i.redirect.apply(this,[this.path,i]);!0===i.redirect&&this.redirect(this.path)}return!!i.shim||(this.history&&i.replace?history.replaceState({},document.title,this.path):this.history?history.pushState({},document.title,this.path):window.location.hash=this.path)}},s.create=function(){var t;return t=new this,this.routers.push(t),t},s.add=function(t,e){return this.router.add(t,e)},s.prototype.add=function(t,n){var i,s,r;if("object"!=typeof t||t instanceof RegExp)return this.routes.push(new e(t,n));s=[];for(i in t)r=t[i],s.push(this.add(i,r));return s},s.prototype.destroy=function(){var t;return this.routes.length=0,this.constructor.routers=function(){var e,n,i,s;for(i=this.constructor.routers,s=[],e=0,n=i.length;e<n;e++)(t=i[e])!==this&&s.push(t);return s}.call(this)},s.getPath=function(){var t;return this.history?(t=window.location.pathname,"/"!==t.substr(0,1)&&(t="/"+t)):(t=window.location.hash,t=t.replace(r,"")),t},s.getHost=function(){return window.location.protocol+"//"+window.location.host},s.change=function(){var t;if((t=s.getPath())!==s.path)return s.path=t,s.matchRoutes(s.path)},s.matchRoutes=function(t,e){var n,i,s,r,o,a;for(r=[],o=this.routers.concat([this.router]),n=0,i=o.length;n<i;n++)a=o[n],(s=a.matchRoute(t,e))&&r.push(s);return r.length&&this.trigger("change",r,t),r},s.redirect=function(t){return window.location=t},s.prototype.matchRoute=function(t,e){var n,i,s,r;for(s=this.routes,n=0,i=s.length;n<i;n++)if(r=s[n],r.match(t,e))return r},s.prototype.trigger=function(){var t,e;return t=1<=arguments.length?u.call(arguments,0):[],t.splice(1,0,this),(e=this.constructor).trigger.apply(e,t)},s}(i.Module),n.router=new n,i.Controller.include({route:function(t,e){return this.router instanceof i.Route?this.router.add(t,this.proxy(e)):i.Route.add(t,this.proxy(e))},routes:function(t){var e,n,i;n=[];for(e in t)i=t[e],n.push(this.route(e,i));return n},navigate:function(){return i.Route.navigate.apply(i.Route,arguments)}}),n.Path=e,i.Route=n,void 0!==module&&null!==module&&(module.exports=n)}.call(this),function(t){t.color={},t.color.make=function(e,n,i,s){var r={};return r.r=e||0,r.g=n||0,r.b=i||0,r.a=null!=s?s:1,r.add=function(t,e){for(var n=0;n<t.length;++n)r[t.charAt(n)]+=e;return r.normalize()},r.scale=function(t,e){for(var n=0;n<t.length;++n)r[t.charAt(n)]*=e;return r.normalize()},r.toString=function(){return r.a>=1?"rgb("+[r.r,r.g,r.b].join(",")+")":"rgba("+[r.r,r.g,r.b,r.a].join(",")+")"},r.normalize=function(){function t(t,e,n){return e<t?t:e>n?n:e}return r.r=t(0,parseInt(r.r),255),r.g=t(0,parseInt(r.g),255),r.b=t(0,parseInt(r.b),255),r.a=t(0,r.a,1),r},r.clone=function(){return t.color.make(r.r,r.b,r.g,r.a)},r.normalize()},t.color.extract=function(e,n){var i;do{if(""!=(i=e.css(n).toLowerCase())&&"transparent"!=i)break;e=e.parent()}while(!t.nodeName(e.get(0),"body"));return"rgba(0, 0, 0, 0)"==i&&(i="transparent"),t.color.parse(i)},t.color.parse=function(n){var i,s=t.color.make;if(i=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(n))return s(parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10));if(i=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(n))return s(parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10),parseFloat(i[4]));if(i=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(n))return s(2.55*parseFloat(i[1]),2.55*parseFloat(i[2]),2.55*parseFloat(i[3]));if(i=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(n))return s(2.55*parseFloat(i[1]),2.55*parseFloat(i[2]),2.55*parseFloat(i[3]),parseFloat(i[4]));if(i=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(n))return s(parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16));if(i=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(n))return s(parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16),parseInt(i[3]+i[3],16));var r=t.trim(n).toLowerCase();return"transparent"==r?s(255,255,255,0):(i=e[r]||[0,0,0],s(i[0],i[1],i[2]))};var e={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}}(jQuery),function(t){function e(e,s,r,o){function a(t,e){e=[_t].concat(e);for(var n=0;n<t.length;++n)t[n].apply(this,e)}function l(){for(var e=0;e<o.length;++e){var n=o[e];n.init(_t),n.options&&t.extend(!0,ot,n.options)}}function c(e){var n;for(t.extend(!0,ot,e),null==ot.xaxis.color&&(ot.xaxis.color=ot.grid.color),null==ot.yaxis.color&&(ot.yaxis.color=ot.grid.color),null==ot.xaxis.tickColor&&(ot.xaxis.tickColor=ot.grid.tickColor),null==ot.yaxis.tickColor&&(ot.yaxis.tickColor=ot.grid.tickColor),null==ot.grid.borderColor&&(ot.grid.borderColor=ot.grid.color),null==ot.grid.tickColor&&(ot.grid.tickColor=t.color.parse(ot.grid.color).scale("a",.22).toString()),n=0;n<Math.max(1,ot.xaxes.length);++n)ot.xaxes[n]=t.extend(!0,{},ot.xaxis,ot.xaxes[n]);for(n=0;n<Math.max(1,ot.yaxes.length);++n)ot.yaxes[n]=t.extend(!0,{},ot.yaxis,ot.yaxes[n]);for(ot.xaxis.noTicks&&null==ot.xaxis.ticks&&(ot.xaxis.ticks=ot.xaxis.noTicks),ot.yaxis.noTicks&&null==ot.yaxis.ticks&&(ot.yaxis.ticks=ot.yaxis.noTicks),ot.x2axis&&(ot.xaxes[1]=t.extend(!0,{},ot.xaxis,ot.x2axis),ot.xaxes[1].position="top"),ot.y2axis&&(ot.yaxes[1]=t.extend(!0,{},ot.yaxis,ot.y2axis),ot.yaxes[1].position="right"),ot.grid.coloredAreas&&(ot.grid.markings=ot.grid.coloredAreas),ot.grid.coloredAreasColor&&(ot.grid.markingsColor=ot.grid.coloredAreasColor),ot.lines&&t.extend(!0,ot.series.lines,ot.lines),ot.points&&t.extend(!0,ot.series.points,ot.points),ot.bars&&t.extend(!0,ot.series.bars,ot.bars),null!=ot.shadowSize&&(ot.series.shadowSize=ot.shadowSize),n=0;n<ot.xaxes.length;++n)m(ht,n+1).options=ot.xaxes[n];for(n=0;n<ot.yaxes.length;++n)m(dt,n+1).options=ot.yaxes[n];for(var i in bt)ot.hooks[i]&&ot.hooks[i].length&&(bt[i]=bt[i].concat(ot.hooks[i]));a(bt.processOptions,[ot])}function u(t){rt=p(t),v(),y()}function p(e){for(var n=[],i=0;i<e.length;++i){var s=t.extend(!0,{},ot.series);null!=e[i].data?(s.data=e[i].data,delete e[i].data,t.extend(!0,s,e[i]),e[i].data=s.data):s.data=e[i],n.push(s)}return n}function h(t,e){var n=t[e+"axis"];return"object"==typeof n&&(n=n.n),"number"!=typeof n&&(n=1),n}function d(){return t.grep(ht.concat(dt),function(t){return t})}function f(t){var e,n,i={};for(e=0;e<ht.length;++e)(n=ht[e])&&n.used&&(i["x"+n.n]=n.c2p(t.left));for(e=0;e<dt.length;++e)(n=dt[e])&&n.used&&(i["y"+n.n]=n.c2p(t.top));return i.x1!==undefined&&(i.x=i.x1),i.y1!==undefined&&(i.y=i.y1),i}function g(t){var e,n,i,s={};for(e=0;e<ht.length;++e)if((n=ht[e])&&n.used&&(i="x"+n.n,null==t[i]&&1==n.n&&(i="x"),null!=t[i])){s.left=n.p2c(t[i]);break}for(e=0;e<dt.length;++e)if((n=dt[e])&&n.used&&(i="y"+n.n,null==t[i]&&1==n.n&&(i="y"),null!=t[i])){s.top=n.p2c(t[i]);break}return s}function m(e,n){return e[n-1]||(e[n-1]={n:n,direction:e==ht?"x":"y",options:t.extend(!0,{},e==ht?ot.xaxis:ot.yaxis)}),e[n-1]}function v(){var e,n=rt.length,i=[],s=[];for(e=0;e<rt.length;++e){var r=rt[e].color;null!=r&&(--n,"number"==typeof r?s.push(r):i.push(t.color.parse(rt[e].color)))}for(e=0;e<s.length;++e)n=Math.max(n,s[e]+1);var o=[],a=0;for(e=0;o.length<n;){var l;l=ot.colors.length==e?t.color.make(100,100,100):t.color.parse(ot.colors[e]);var c=a%2==1?-1:1;l.scale("rgb",1+c*Math.ceil(a/2)*.2),o.push(l),++e,e>=ot.colors.length&&(e=0,++a)}var u,p=0;for(e=0;e<rt.length;++e){if(u=rt[e],null==u.color?(u.color=o[p].toString(),++p):"number"==typeof u.color&&(u.color=o[u.color].toString()),null==u.lines.show){var d,f=!0;for(d in u)if(u[d]&&u[d].show){f=!1;break}f&&(u.lines.show=!0)}u.xaxis=m(ht,h(u,"x")),u.yaxis=m(dt,h(u,"y"))}}function y(){function e(t,e,n){e<t.datamin&&e!=-m&&(t.datamin=e),n>t.datamax&&n!=m&&(t.datamax=n)}var n,i,s,r,o,l,c,u,p,h,f=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,m=Number.MAX_VALUE;for(t.each(d(),function(t,e){e.datamin=f,e.datamax=g,e.used=!1}),n=0;n<rt.length;++n)o=rt[n],o.datapoints={points:[]},a(bt.processRawData,[o,o.data,o.datapoints]);for(n=0;n<rt.length;++n){o=rt[n];var v=o.data,y=o.datapoints.format;if(y||(y=[],y.push({x:!0,number:!0,required:!0}),y.push({y:!0,number:!0,required:!0}),(o.bars.show||o.lines.show&&o.lines.fill)&&(y.push({y:!0,number:!0,required:!1,defaultValue:0}),o.bars.horizontal&&(delete y[y.length-1].y,y[y.length-1].x=!0)),o.datapoints.format=y),null==o.datapoints.pointsize)for(o.datapoints.pointsize=y.length,c=o.datapoints.pointsize,l=o.datapoints.points,insertSteps=o.lines.show&&o.lines.steps,o.xaxis.used=o.yaxis.used=!0,i=s=0;i<v.length;++i,s+=c){h=v[i];var b=null==h;if(!b)for(r=0;r<c;++r)u=h[r],p=y[r],p&&(p.number&&null!=u&&(u=+u,isNaN(u)?u=null:u==Infinity?u=m:u==-Infinity&&(u=-m)),null==u&&(p.required&&(b=!0),null!=p.defaultValue&&(u=p.defaultValue))),l[s+r]=u;if(b)for(r=0;r<c;++r)u=l[s+r],null!=u&&(p=y[r],p.x&&e(o.xaxis,u,u),p.y&&e(o.yaxis,u,u)),l[s+r]=null;else if(insertSteps&&s>0&&null!=l[s-c]&&l[s-c]!=l[s]&&l[s-c+1]!=l[s+1]){for(r=0;r<c;++r)l[s+c+r]=l[s+r];l[s+1]=l[s-c+1],s+=c}}}for(n=0;n<rt.length;++n)o=rt[n],a(bt.processDatapoints,[o,o.datapoints]);for(n=0;n<rt.length;++n){o=rt[n],l=o.datapoints.points,c=o.datapoints.pointsize;var _=f,w=f,k=g,T=g;for(i=0;i<l.length;i+=c)if(null!=l[i])for(r=0;r<c;++r)u=l[i+r],(p=y[r])&&u!=m&&u!=-m&&(p.x&&(u<_&&(_=u),u>k&&(k=u)),p.y&&(u<w&&(w=u),u>T&&(T=u)));if(o.bars.show){var S="left"==o.bars.align?0:-o.bars.barWidth/2;o.bars.horizontal?(w+=S,T+=S+o.bars.barWidth):(_+=S,k+=S+o.bars.barWidth)}e(o.xaxis,_,k),e(o.yaxis,w,T)}t.each(d(),function(t,e){e.datamin==f&&(e.datamin=null),e.datamax==g&&(e.datamax=null)})}function b(n,i){var s=document.createElement("canvas");return s.className=i,s.width=gt,s.height=mt,n||t(s).css({position:"absolute",left:0,top:0}),t(s).appendTo(e),s.getContext||(s=window.G_vmlCanvasManager.initElement(s)),s.getContext("2d").save(),s}function _(){if(gt=e.width(),mt=e.height(),gt<=0||mt<=0)throw"Invalid dimensions for plot, width = "+gt+", height = "+mt}function w(t){t.width!=gt&&(t.width=gt),t.height!=mt&&(t.height=mt);var e=t.getContext("2d");e.restore(),e.save()}function k(){var n,i=e.children("canvas.base"),s=e.children("canvas.overlay");0==i.length||0==s?(e.html(""),e.css({padding:0}),"static"==e.css("position")&&e.css("position","relative"),_(),at=b(!0,"base"),lt=b(!1,"overlay"),n=!1):(at=i.get(0),lt=s.get(0),n=!0),ut=at.getContext("2d"),pt=lt.getContext("2d"),ct=t([lt,at]),n&&(e.data("plot").shutdown(),_t.resize(),pt.clearRect(0,0,gt,mt),ct.unbind(),e.children().not([at,lt]).remove()),e.data("plot",_t)}function T(){ot.grid.hoverable&&(ct.mousemove(G),ct.mouseleave(V)),ot.grid.clickable&&ct.click(Y),a(bt.bindEvents,[ct])}function S(){kt&&clearTimeout(kt),ct.unbind("mousemove",G),ct.unbind("mouseleave",V),ct.unbind("click",Y),a(bt.shutdown,[ct])}function C(t){function e(t){return t}var n,i,s=t.options.transform||e,r=t.options.inverseTransform;"x"==t.direction?(n=t.scale=vt/Math.abs(s(t.max)-s(t.min)),i=Math.min(s(t.max),s(t.min))):(n=t.scale=yt/Math.abs(s(t.max)-s(t.min)),n=-n,i=Math.max(s(t.max),s(t.min))),t.p2c=s==e?function(t){return(t-i)*n}:function(t){return(s(t)-i)*n},t.c2p=r?function(t){return r(i+t/n)}:function(t){return i+t/n}}function A(n){function i(i,s){return t('<div style="position:absolute;top:-10000px;'+s+'font-size:smaller"><div class="'+n.direction+"Axis "+n.direction+n.n+'Axis">'+i.join("")+"</div></div>").appendTo(e)}var s,r,o,a=n.options,l=n.ticks||[],c=[],u=a.labelWidth,p=a.labelHeight;if("x"==n.direction){if(null==u&&(u=Math.floor(gt/(l.length>0?l.length:1))),null==p){for(c=[],s=0;s<l.length;++s)(r=l[s].label)&&c.push('<div class="tickLabel" style="float:left;width:'+u+'px">'+r+"</div>");c.length>0&&(c.push('<div style="clear:left"></div>'),o=i(c,"width:10000px;"),p=o.height(),o.remove())}}else if(null==u||null==p){for(s=0;s<l.length;++s)(r=l[s].label)&&c.push('<div class="tickLabel">'+r+"</div>");c.length>0&&(o=i(c,""),null==u&&(u=o.children().width()),null==p&&(p=o.find("div.tickLabel").height()),o.remove())}null==u&&(u=0),null==p&&(p=0),n.labelWidth=u,n.labelHeight=p}function x(e){var n=e.labelWidth,i=e.labelHeight,s=e.options.position,r=e.options.tickLength,o=ot.grid.axisMargin,a=ot.grid.labelMargin,l="x"==e.direction?ht:dt,c=t.grep(l,function(t){return t&&t.options.position==s&&t.reserveSpace});t.inArray(e,c)==c.length-1&&(o=0),null==r&&(r="full");var u=t.grep(l,function(t){return t&&t.reserveSpace}),p=0==t.inArray(e,u);p||"full"!=r||(r=5),isNaN(+r)||(a+=+r),"x"==e.direction?(i+=a,"bottom"==s?(ft.bottom+=i+o,e.box={top:mt-ft.bottom,height:i}):(e.box={top:ft.top+o,height:i},ft.top+=i+o)):(n+=a,"left"==s?(e.box={left:ft.left+o,width:n},ft.left+=n+o):(ft.right+=n+o,e.box={left:gt-ft.right,width:n})),e.position=s,e.tickLength=r,e.box.padding=a,e.innermost=p}function j(t){"x"==t.direction?(t.box.left=ft.left,t.box.width=vt):(t.box.top=ft.top,t.box.height=yt)}function I(){var e,n=d();if(t.each(n,function(t,e){e.show=e.options.show,null==e.show&&(e.show=e.used),e.reserveSpace=e.show||e.options.reserveSpace,D(e)}),allocatedAxes=t.grep(n,function(t){return t.reserveSpace}),ft.left=ft.right=ft.top=ft.bottom=0,ot.grid.show){for(t.each(allocatedAxes,function(t,e){P(e),E(e),O(e,e.ticks),A(e)}),e=allocatedAxes.length-1;e>=0;--e)x(allocatedAxes[e]);var i=ot.grid.minBorderMargin;if(null==i)for(i=0,e=0;e<rt.length;++e)i=Math.max(i,rt[e].points.radius+rt[e].points.lineWidth/2);for(var s in ft)ft[s]+=ot.grid.borderWidth,ft[s]=Math.max(i,ft[s])}vt=gt-ft.left-ft.right,yt=mt-ft.bottom-ft.top,t.each(n,function(t,e){C(e)}),ot.grid.show&&(t.each(allocatedAxes,function(t,e){j(e)}),z()),W()}function D(t){var e=t.options,n=+(null!=e.min?e.min:t.datamin),i=+(null!=e.max?e.max:t.datamax),s=i-n;if(0==s){var r=0==i?1:.01;null==e.min&&(n-=r),null!=e.max&&null==e.min||(i+=r)}else{var o=e.autoscaleMargin;null!=o&&(null==e.min&&(n-=s*o)<0&&null!=t.datamin&&t.datamin>=0&&(n=0),null==e.max&&(i+=s*o)>0&&null!=t.datamax&&t.datamax<=0&&(i=0))}t.min=n,t.max=i}function P(e){var i,s=e.options;i="number"==typeof s.ticks&&s.ticks>0?s.ticks:.3*Math.sqrt("x"==e.direction?gt:mt);var r,o,a,l,c,u,p,h=(e.max-e.min)/i;if("time"==s.mode){var d={second:1e3,minute:6e4,hour:36e5,day:864e5,month:2592e6,year:525949.2*60*1e3
},f=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"],[3,"month"],[6,"month"],[1,"year"]],g=0;null!=s.minTickSize&&(g="number"==typeof s.tickSize?s.tickSize:s.minTickSize[0]*d[s.minTickSize[1]]);for(var c=0;c<f.length-1&&!(h<(f[c][0]*d[f[c][1]]+f[c+1][0]*d[f[c+1][1]])/2&&f[c][0]*d[f[c][1]]>=g);++c);r=f[c][0],a=f[c][1],"year"==a&&(u=Math.pow(10,Math.floor(Math.log(h/d.year)/Math.LN10)),p=h/d.year/u,r=p<1.5?1:p<3?2:p<7.5?5:10,r*=u),e.tickSize=s.tickSize||[r,a],o=function(t){var e=[],i=t.tickSize[0],s=t.tickSize[1],r=new Date(t.min),o=i*d[s];"second"==s&&r.setUTCSeconds(n(r.getUTCSeconds(),i)),"minute"==s&&r.setUTCMinutes(n(r.getUTCMinutes(),i)),"hour"==s&&r.setUTCHours(n(r.getUTCHours(),i)),"month"==s&&r.setUTCMonth(n(r.getUTCMonth(),i)),"year"==s&&r.setUTCFullYear(n(r.getUTCFullYear(),i)),r.setUTCMilliseconds(0),o>=d.minute&&r.setUTCSeconds(0),o>=d.hour&&r.setUTCMinutes(0),o>=d.day&&r.setUTCHours(0),o>=4*d.day&&r.setUTCDate(1),o>=d.year&&r.setUTCMonth(0);var a,l=0,c=Number.NaN;do{if(a=c,c=r.getTime(),e.push(c),"month"==s)if(i<1){r.setUTCDate(1);var u=r.getTime();r.setUTCMonth(r.getUTCMonth()+1);var p=r.getTime();r.setTime(c+l*d.hour+(p-u)*i),l=r.getUTCHours(),r.setUTCHours(0)}else r.setUTCMonth(r.getUTCMonth()+i);else"year"==s?r.setUTCFullYear(r.getUTCFullYear()+i):r.setTime(c+o)}while(c<t.max&&c!=a);return e},l=function(e,n){var i=new Date(e);if(null!=s.timeformat)return t.plot.formatDate(i,s.timeformat,s.monthNames);var r=n.tickSize[0]*d[n.tickSize[1]],o=n.max-n.min,a=s.twelveHourClock?" %p":"";return r<d.minute?fmt="%h:%M:%S"+a:r<d.day?o<2*d.day?fmt="%h:%M"+a:fmt="%b %d %h:%M"+a:r<d.month?fmt="%b %d":r<d.year?o<d.year?fmt="%b":fmt="%b %y":fmt="%y",t.plot.formatDate(i,fmt,s.monthNames)}}else{var m=s.tickDecimals,v=-Math.floor(Math.log(h)/Math.LN10);null!=m&&v>m&&(v=m),u=Math.pow(10,-v),p=h/u,p<1.5?r=1:p<3?(r=2,p>2.25&&(null==m||v+1<=m)&&(r=2.5,++v)):r=p<7.5?5:10,r*=u,null!=s.minTickSize&&r<s.minTickSize&&(r=s.minTickSize),e.tickDecimals=Math.max(0,null!=m?m:v),e.tickSize=s.tickSize||r,o=function(t){var e,i=[],s=n(t.min,t.tickSize),r=0,o=Number.NaN;do{e=o,o=s+r*t.tickSize,i.push(o),++r}while(o<t.max&&o!=e);return i},l=function(t,e){return t.toFixed(e.tickDecimals)}}if(null!=s.alignTicksWithAxis){var y=("x"==e.direction?ht:dt)[s.alignTicksWithAxis-1];if(y&&y.used&&y!=e){var b=o(e);if(b.length>0&&(null==s.min&&(e.min=Math.min(e.min,b[0])),null==s.max&&b.length>1&&(e.max=Math.max(e.max,b[b.length-1]))),o=function(t){var e,n,i=[];for(n=0;n<y.ticks.length;++n)e=(y.ticks[n].v-y.min)/(y.max-y.min),e=t.min+e*(t.max-t.min),i.push(e);return i},"time"!=e.mode&&null==s.tickDecimals){var _=Math.max(0,1-Math.floor(Math.log(h)/Math.LN10)),w=o(e);w.length>1&&/\..*0$/.test((w[1]-w[0]).toFixed(_))||(e.tickDecimals=_)}}}e.tickGenerator=o,t.isFunction(s.tickFormatter)?e.tickFormatter=function(t,e){return""+s.tickFormatter(t,e)}:e.tickFormatter=l}function E(e){var n=e.options.ticks,i=[];null==n||"number"==typeof n&&n>0?i=e.tickGenerator(e):n&&(i=t.isFunction(n)?n({min:e.min,max:e.max}):n);var s,r;for(e.ticks=[],s=0;s<i.length;++s){var o=null,a=i[s];"object"==typeof a?(r=+a[0],a.length>1&&(o=a[1])):r=+a,null==o&&(o=e.tickFormatter(r,e)),isNaN(r)||e.ticks.push({v:r,label:o})}}function O(t,e){t.options.autoscaleMargin&&e.length>0&&(null==t.options.min&&(t.min=Math.min(t.min,e[0].v)),null==t.options.max&&e.length>1&&(t.max=Math.max(t.max,e[e.length-1].v)))}function N(){ut.clearRect(0,0,gt,mt);var t=ot.grid;t.show&&t.backgroundColor&&M(),t.show&&!t.aboveData&&$();for(var e=0;e<rt.length;++e)a(bt.drawSeries,[ut,rt[e]]),L(rt[e]);a(bt.draw,[ut]),t.show&&t.aboveData&&$()}function R(t,e){var n,s,r,o,a=d();for(i=0;i<a.length;++i)if(n=a[i],n.direction==e&&(o=e+n.n+"axis",t[o]||1!=n.n||(o=e+"axis"),t[o])){s=t[o].from,r=t[o].to;break}if(t[o]||(n="x"==e?ht[0]:dt[0],s=t[e+"1"],r=t[e+"2"]),null!=s&&null!=r&&s>r){var l=s;s=r,r=l}return{from:s,to:r,axis:n}}function M(){ut.save(),ut.translate(ft.left,ft.top),ut.fillStyle=st(ot.grid.backgroundColor,yt,0,"rgba(255, 255, 255, 0)"),ut.fillRect(0,0,vt,yt),ut.restore()}function $(){var e;ut.save(),ut.translate(ft.left,ft.top);var n=ot.grid.markings;if(n){if(t.isFunction(n)){var i=_t.getAxes();i.xmin=i.xaxis.min,i.xmax=i.xaxis.max,i.ymin=i.yaxis.min,i.ymax=i.yaxis.max,n=n(i)}for(e=0;e<n.length;++e){var s=n[e],r=R(s,"x"),o=R(s,"y");null==r.from&&(r.from=r.axis.min),null==r.to&&(r.to=r.axis.max),null==o.from&&(o.from=o.axis.min),null==o.to&&(o.to=o.axis.max),r.to<r.axis.min||r.from>r.axis.max||o.to<o.axis.min||o.from>o.axis.max||(r.from=Math.max(r.from,r.axis.min),r.to=Math.min(r.to,r.axis.max),o.from=Math.max(o.from,o.axis.min),o.to=Math.min(o.to,o.axis.max),r.from==r.to&&o.from==o.to||(r.from=r.axis.p2c(r.from),r.to=r.axis.p2c(r.to),o.from=o.axis.p2c(o.from),o.to=o.axis.p2c(o.to),r.from==r.to||o.from==o.to?(ut.beginPath(),ut.strokeStyle=s.color||ot.grid.markingsColor,ut.lineWidth=s.lineWidth||ot.grid.markingsLineWidth,ut.moveTo(r.from,o.from),ut.lineTo(r.to,o.to),ut.stroke()):(ut.fillStyle=s.color||ot.grid.markingsColor,ut.fillRect(r.from,o.to,r.to-r.from,o.from-o.to))))}}for(var i=d(),a=ot.grid.borderWidth,l=0;l<i.length;++l){var c,u,p,h,f=i[l],g=f.box,m=f.tickLength;if(f.show&&0!=f.ticks.length){for(ut.strokeStyle=f.options.tickColor||t.color.parse(f.options.color).scale("a",.22).toString(),ut.lineWidth=1,"x"==f.direction?(c=0,u="full"==m?"top"==f.position?0:yt:g.top-ft.top+("top"==f.position?g.height:0)):(u=0,c="full"==m?"left"==f.position?0:vt:g.left-ft.left+("left"==f.position?g.width:0)),f.innermost||(ut.beginPath(),p=h=0,"x"==f.direction?p=vt:h=yt,1==ut.lineWidth&&(c=Math.floor(c)+.5,u=Math.floor(u)+.5),ut.moveTo(c,u),ut.lineTo(c+p,u+h),ut.stroke()),ut.beginPath(),e=0;e<f.ticks.length;++e){var v=f.ticks[e].v;p=h=0,v<f.min||v>f.max||"full"==m&&a>0&&(v==f.min||v==f.max)||("x"==f.direction?(c=f.p2c(v),h="full"==m?-yt:m,"top"==f.position&&(h=-h)):(u=f.p2c(v),p="full"==m?-vt:m,"left"==f.position&&(p=-p)),1==ut.lineWidth&&("x"==f.direction?c=Math.floor(c)+.5:u=Math.floor(u)+.5),ut.moveTo(c,u),ut.lineTo(c+p,u+h))}ut.stroke()}}a&&(ut.lineWidth=a,ut.strokeStyle=ot.grid.borderColor,ut.strokeRect(-a/2,-a/2,vt+a,yt+a)),ut.restore()}function z(){e.find(".tickLabels").remove();for(var t=['<div class="tickLabels" style="font-size:smaller">'],n=d(),i=0;i<n.length;++i){var s=n[i],r=s.box;if(s.show){t.push('<div class="'+s.direction+"Axis "+s.direction+s.n+'Axis" style="color:'+s.options.color+'">');for(var o=0;o<s.ticks.length;++o){var a=s.ticks[o];if(!(!a.label||a.v<s.min||a.v>s.max)){var l,c={};"x"==s.direction?(l="center",c.left=Math.round(ft.left+s.p2c(a.v)-s.labelWidth/2),"bottom"==s.position?c.top=r.top+r.padding:c.bottom=mt-(r.top+r.height-r.padding)):(c.top=Math.round(ft.top+s.p2c(a.v)-s.labelHeight/2),"left"==s.position?(c.right=gt-(r.left+r.width-r.padding),l="right"):(c.left=r.left+r.padding,l="left")),c.width=s.labelWidth;var u=["position:absolute","white-space:nowrap","text-align:"+l];for(var p in c)u.push(p+":"+c[p]+"px");t.push('<div class="tickLabel" style="'+u.join(";")+'">'+a.label+"</div>")}}t.push("</div>")}}t.push("</div>"),e.append(t.join(""))}function L(t){t.lines.show&&U(t),t.bars.show&&B(t),t.points.show&&q(t)}function U(t){function e(t,e,n,i,s){var r=t.points,o=t.pointsize,a=null,l=null;ut.beginPath();for(var c=o;c<r.length;c+=o){var u=r[c-o],p=r[c-o+1],h=r[c],d=r[c+1];if(null!=u&&null!=h){if(p<=d&&p<s.min){if(d<s.min)continue;u=(s.min-p)/(d-p)*(h-u)+u,p=s.min}else if(d<=p&&d<s.min){if(p<s.min)continue;h=(s.min-p)/(d-p)*(h-u)+u,d=s.min}if(p>=d&&p>s.max){if(d>s.max)continue;u=(s.max-p)/(d-p)*(h-u)+u,p=s.max}else if(d>=p&&d>s.max){if(p>s.max)continue;h=(s.max-p)/(d-p)*(h-u)+u,d=s.max}if(u<=h&&u<i.min){if(h<i.min)continue;p=(i.min-u)/(h-u)*(d-p)+p,u=i.min}else if(h<=u&&h<i.min){if(u<i.min)continue;d=(i.min-u)/(h-u)*(d-p)+p,h=i.min}if(u>=h&&u>i.max){if(h>i.max)continue;p=(i.max-u)/(h-u)*(d-p)+p,u=i.max}else if(h>=u&&h>i.max){if(u>i.max)continue;d=(i.max-u)/(h-u)*(d-p)+p,h=i.max}u==a&&p==l||ut.moveTo(i.p2c(u)+e,s.p2c(p)+n),a=h,l=d,ut.lineTo(i.p2c(h)+e,s.p2c(d)+n)}}ut.stroke()}function n(t,e,n){for(var i=t.points,s=t.pointsize,r=Math.min(Math.max(0,n.min),n.max),o=0,a=!1,l=1,c=0,u=0;;){if(s>0&&o>i.length+s)break;o+=s;var p=i[o-s],h=i[o-s+l],d=i[o],f=i[o+l];if(a){if(s>0&&null!=p&&null==d){u=o,s=-s,l=2;continue}if(s<0&&o==c+s){ut.fill(),a=!1,s=-s,l=1,o=c=u+s;continue}}if(null!=p&&null!=d){if(p<=d&&p<e.min){if(d<e.min)continue;h=(e.min-p)/(d-p)*(f-h)+h,p=e.min}else if(d<=p&&d<e.min){if(p<e.min)continue;f=(e.min-p)/(d-p)*(f-h)+h,d=e.min}if(p>=d&&p>e.max){if(d>e.max)continue;h=(e.max-p)/(d-p)*(f-h)+h,p=e.max}else if(d>=p&&d>e.max){if(p>e.max)continue;f=(e.max-p)/(d-p)*(f-h)+h,d=e.max}if(a||(ut.beginPath(),ut.moveTo(e.p2c(p),n.p2c(r)),a=!0),h>=n.max&&f>=n.max)ut.lineTo(e.p2c(p),n.p2c(n.max)),ut.lineTo(e.p2c(d),n.p2c(n.max));else if(h<=n.min&&f<=n.min)ut.lineTo(e.p2c(p),n.p2c(n.min)),ut.lineTo(e.p2c(d),n.p2c(n.min));else{var g=p,m=d;h<=f&&h<n.min&&f>=n.min?(p=(n.min-h)/(f-h)*(d-p)+p,h=n.min):f<=h&&f<n.min&&h>=n.min&&(d=(n.min-h)/(f-h)*(d-p)+p,f=n.min),h>=f&&h>n.max&&f<=n.max?(p=(n.max-h)/(f-h)*(d-p)+p,h=n.max):f>=h&&f>n.max&&h<=n.max&&(d=(n.max-h)/(f-h)*(d-p)+p,f=n.max),p!=g&&ut.lineTo(e.p2c(g),n.p2c(h)),ut.lineTo(e.p2c(p),n.p2c(h)),ut.lineTo(e.p2c(d),n.p2c(f)),d!=m&&(ut.lineTo(e.p2c(d),n.p2c(f)),ut.lineTo(e.p2c(m),n.p2c(f)))}}}}ut.save(),ut.translate(ft.left,ft.top),ut.lineJoin="round";var i=t.lines.lineWidth,s=t.shadowSize;if(i>0&&s>0){ut.lineWidth=s,ut.strokeStyle="rgba(0,0,0,0.1)";var r=Math.PI/18;e(t.datapoints,Math.sin(r)*(i/2+s/2),Math.cos(r)*(i/2+s/2),t.xaxis,t.yaxis),ut.lineWidth=s/2,e(t.datapoints,Math.sin(r)*(i/2+s/4),Math.cos(r)*(i/2+s/4),t.xaxis,t.yaxis)}ut.lineWidth=i,ut.strokeStyle=t.color;var o=J(t.lines,t.color,0,yt);o&&(ut.fillStyle=o,n(t.datapoints,t.xaxis,t.yaxis)),i>0&&e(t.datapoints,0,0,t.xaxis,t.yaxis),ut.restore()}function q(t){function e(t,e,n,i,s,r,o,a){for(var l=t.points,c=t.pointsize,u=0;u<l.length;u+=c){var p=l[u],h=l[u+1];null==p||p<r.min||p>r.max||h<o.min||h>o.max||(ut.beginPath(),p=r.p2c(p),h=o.p2c(h)+i,"circle"==a?ut.arc(p,h,e,0,s?Math.PI:2*Math.PI,!1):a(ut,p,h,e,s),ut.closePath(),n&&(ut.fillStyle=n,ut.fill()),ut.stroke())}}ut.save(),ut.translate(ft.left,ft.top);var n=t.points.lineWidth,i=t.shadowSize,s=t.points.radius,r=t.points.symbol;if(n>0&&i>0){var o=i/2;ut.lineWidth=o,ut.strokeStyle="rgba(0,0,0,0.1)",e(t.datapoints,s,null,o+o/2,!0,t.xaxis,t.yaxis,r),ut.strokeStyle="rgba(0,0,0,0.2)",e(t.datapoints,s,null,o/2,!0,t.xaxis,t.yaxis,r)}ut.lineWidth=n,ut.strokeStyle=t.color,e(t.datapoints,s,J(t.points,t.color),0,!1,t.xaxis,t.yaxis,r),ut.restore()}function F(t,e,n,i,s,r,o,a,l,c,u,p){var h,d,f,g,m,v,y,b,_;u?(b=v=y=!0,m=!1,h=n,d=t,g=e+i,f=e+s,d<h&&(_=d,d=h,h=_,m=!0,v=!1)):(m=v=y=!0,b=!1,h=t+i,d=t+s,f=n,(g=e)<f&&(_=g,g=f,f=_,b=!0,y=!1)),d<a.min||h>a.max||g<l.min||f>l.max||(h<a.min&&(h=a.min,m=!1),d>a.max&&(d=a.max,v=!1),f<l.min&&(f=l.min,b=!1),g>l.max&&(g=l.max,y=!1),h=a.p2c(h),f=l.p2c(f),d=a.p2c(d),g=l.p2c(g),o&&(c.beginPath(),c.moveTo(h,f),c.lineTo(h,g),c.lineTo(d,g),c.lineTo(d,f),c.fillStyle=o(f,g),c.fill()),p>0&&(m||v||y||b)&&(c.beginPath(),c.moveTo(h,f+r),m?c.lineTo(h,g+r):c.moveTo(h,g+r),y?c.lineTo(d,g+r):c.moveTo(d,g+r),v?c.lineTo(d,f+r):c.moveTo(d,f+r),b?c.lineTo(h,f+r):c.moveTo(h,f+r),c.stroke()))}function B(t){function e(e,n,i,s,r,o,a){for(var l=e.points,c=e.pointsize,u=0;u<l.length;u+=c)null!=l[u]&&F(l[u],l[u+1],l[u+2],n,i,s,r,o,a,ut,t.bars.horizontal,t.bars.lineWidth)}ut.save(),ut.translate(ft.left,ft.top),ut.lineWidth=t.bars.lineWidth,ut.strokeStyle=t.color;var n="left"==t.bars.align?0:-t.bars.barWidth/2,i=t.bars.fill?function(e,n){return J(t.bars,t.color,e,n)}:null;e(t.datapoints,n,n+t.bars.barWidth,0,i,t.xaxis,t.yaxis),ut.restore()}function J(e,n,i,s){var r=e.fill;if(!r)return null;if(e.fillColor)return st(e.fillColor,i,s,n);var o=t.color.parse(n);return o.a="number"==typeof r?r:.4,o.normalize(),o.toString()}function W(){if(e.find(".legend").remove(),ot.legend.show){for(var n,i,s=[],r=!1,o=ot.legend.labelFormatter,a=0;a<rt.length;++a)n=rt[a],(i=n.label)&&(a%ot.legend.noColumns==0&&(r&&s.push("</tr>"),s.push("<tr>"),r=!0),o&&(i=o(i,n)),s.push('<td class="legendColorBox"><div style="border:1px solid '+ot.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+n.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+i+"</td>"));if(r&&s.push("</tr>"),0!=s.length){var l='<table style="font-size:smaller;color:'+ot.grid.color+'">'+s.join("")+"</table>";if(null!=ot.legend.container)t(ot.legend.container).html(l);else{var c="",u=ot.legend.position,p=ot.legend.margin;null==p[0]&&(p=[p,p]),"n"==u.charAt(0)?c+="top:"+(p[1]+ft.top)+"px;":"s"==u.charAt(0)&&(c+="bottom:"+(p[1]+ft.bottom)+"px;"),"e"==u.charAt(1)?c+="right:"+(p[0]+ft.right)+"px;":"w"==u.charAt(1)&&(c+="left:"+(p[0]+ft.left)+"px;");var h=t('<div class="legend">'+l.replace('style="','style="position:absolute;'+c+";")+"</div>").appendTo(e);if(0!=ot.legend.backgroundOpacity){var d=ot.legend.backgroundColor;null==d&&(d=ot.grid.backgroundColor,d=d&&"string"==typeof d?t.color.parse(d):t.color.extract(h,"background-color"),d.a=1,d=d.toString());var f=h.children();t('<div style="position:absolute;width:'+f.width()+"px;height:"+f.height()+"px;"+c+"background-color:"+d+';"> </div>').prependTo(h).css("opacity",ot.legend.backgroundOpacity)}}}}}function H(t,e,n){var i,s,r=ot.grid.mouseActiveRadius,o=r*r+1,a=null;for(i=rt.length-1;i>=0;--i)if(n(rt[i])){var l=rt[i],c=l.xaxis,u=l.yaxis,p=l.datapoints.points,h=l.datapoints.pointsize,d=c.c2p(t),f=u.c2p(e),g=r/c.scale,m=r/u.scale;if(c.options.inverseTransform&&(g=Number.MAX_VALUE),u.options.inverseTransform&&(m=Number.MAX_VALUE),l.lines.show||l.points.show)for(s=0;s<p.length;s+=h){var v=p[s],y=p[s+1];if(null!=v&&!(v-d>g||v-d<-g||y-f>m||y-f<-m)){var b=Math.abs(c.p2c(v)-t),_=Math.abs(u.p2c(y)-e),w=b*b+_*_;w<o&&(o=w,a=[i,s/h])}}if(l.bars.show&&!a){var k="left"==l.bars.align?0:-l.bars.barWidth/2,T=k+l.bars.barWidth;for(s=0;s<p.length;s+=h){var v=p[s],y=p[s+1],S=p[s+2];null!=v&&((rt[i].bars.horizontal?d<=Math.max(S,v)&&d>=Math.min(S,v)&&f>=y+k&&f<=y+T:d>=v+k&&d<=v+T&&f>=Math.min(S,y)&&f<=Math.max(S,y))&&(a=[i,s/h]))}}}return a?(i=a[0],s=a[1],h=rt[i].datapoints.pointsize,{datapoint:rt[i].datapoints.points.slice(s*h,(s+1)*h),dataIndex:s,series:rt[i],seriesIndex:i}):null}function G(t){ot.grid.hoverable&&K("plothover",t,function(t){return 0!=t.hoverable})}function V(t){ot.grid.hoverable&&K("plothover",t,function(){return!1})}function Y(t){K("plotclick",t,function(t){return 0!=t.clickable})}function K(t,n,i){var s=ct.offset(),r=n.pageX-s.left-ft.left,o=n.pageY-s.top-ft.top,a=f({left:r,top:o});a.pageX=n.pageX,a.pageY=n.pageY;var l=H(r,o,i);if(l&&(l.pageX=parseInt(l.series.xaxis.p2c(l.datapoint[0])+s.left+ft.left),l.pageY=parseInt(l.series.yaxis.p2c(l.datapoint[1])+s.top+ft.top)),ot.grid.autoHighlight){for(var c=0;c<wt.length;++c){var u=wt[c];u.auto!=t||l&&u.series==l.series&&u.point[0]==l.datapoint[0]&&u.point[1]==l.datapoint[1]||tt(u.series,u.point)}l&&Q(l.series,l.datapoint,t)}e.trigger(t,[a,l])}function X(){kt||(kt=setTimeout(Z,30))}function Z(){kt=null,pt.save(),pt.clearRect(0,0,gt,mt),pt.translate(ft.left,ft.top);var t,e;for(t=0;t<wt.length;++t)e=wt[t],e.series.bars.show?it(e.series,e.point):nt(e.series,e.point);pt.restore(),a(bt.drawOverlay,[pt])}function Q(t,e,n){if("number"==typeof t&&(t=rt[t]),"number"==typeof e){var i=t.datapoints.pointsize;e=t.datapoints.points.slice(i*e,i*(e+1))}var s=et(t,e);-1==s?(wt.push({series:t,point:e,auto:n}),X()):n||(wt[s].auto=!1)}function tt(t,e){null==t&&null==e&&(wt=[],X()),"number"==typeof t&&(t=rt[t]),"number"==typeof e&&(e=t.data[e]);var n=et(t,e);-1!=n&&(wt.splice(n,1),X())}function et(t,e){for(var n=0;n<wt.length;++n){var i=wt[n];if(i.series==t&&i.point[0]==e[0]&&i.point[1]==e[1])return n}return-1}function nt(e,n){var i=n[0],s=n[1],r=e.xaxis,o=e.yaxis;if(!(i<r.min||i>r.max||s<o.min||s>o.max)){var a=e.points.radius+e.points.lineWidth/2;pt.lineWidth=a,pt.strokeStyle=t.color.parse(e.color).scale("a",.5).toString();var l=1.5*a,i=r.p2c(i),s=o.p2c(s);pt.beginPath(),"circle"==e.points.symbol?pt.arc(i,s,l,0,2*Math.PI,!1):e.points.symbol(pt,i,s,l,!1),pt.closePath(),pt.stroke()}}function it(e,n){pt.lineWidth=e.bars.lineWidth,pt.strokeStyle=t.color.parse(e.color).scale("a",.5).toString();var i=t.color.parse(e.color).scale("a",.5).toString(),s="left"==e.bars.align?0:-e.bars.barWidth/2;F(n[0],n[1],n[2]||0,s,s+e.bars.barWidth,0,function(){return i},e.xaxis,e.yaxis,pt,e.bars.horizontal,e.bars.lineWidth)}function st(e,n,i,s){if("string"==typeof e)return e;for(var r=ut.createLinearGradient(0,i,0,n),o=0,a=e.colors.length;o<a;++o){var l=e.colors[o];if("string"!=typeof l){var c=t.color.parse(s);null!=l.brightness&&(c=c.scale("rgb",l.brightness)),null!=l.opacity&&(c.a*=l.opacity),l=c.toString()}r.addColorStop(o/(a-1),l)}return r}var rt=[],ot={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85},xaxis:{show:null,position:"bottom",mode:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null,monthNames:null,timeformat:null,twelveHourClock:!1},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1},shadowSize:3},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},hooks:{}},at=null,lt=null,ct=null,ut=null,pt=null,ht=[],dt=[],ft={left:0,right:0,top:0,bottom:0},gt=0,mt=0,vt=0,yt=0,bt={processOptions:[],processRawData:[],processDatapoints:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},_t=this;_t.setData=u,_t.setupGrid=I,_t.draw=N,_t.getPlaceholder=function(){return e},_t.getCanvas=function(){return at},_t.getPlotOffset=function(){return ft},_t.width=function(){return vt},_t.height=function(){return yt},_t.offset=function(){var t=ct.offset();return t.left+=ft.left,t.top+=ft.top,t},_t.getData=function(){return rt},_t.getAxes=function(){var e={};return t.each(ht.concat(dt),function(t,n){n&&(e[n.direction+(1!=n.n?n.n:"")+"axis"]=n)}),e},_t.getXAxes=function(){return ht},_t.getYAxes=function(){return dt},_t.c2p=f,_t.p2c=g,_t.getOptions=function(){return ot},_t.highlight=Q,_t.unhighlight=tt,_t.triggerRedrawOverlay=X,_t.pointOffset=function(t){return{left:parseInt(ht[h(t,"x")-1].p2c(+t.x)+ft.left),top:parseInt(dt[h(t,"y")-1].p2c(+t.y)+ft.top)}},_t.shutdown=S,_t.resize=function(){_(),w(at),w(lt)},_t.hooks=bt,l(_t),c(r),k(),u(s),I(),N(),T();var wt=[],kt=null}function n(t,e){return e*Math.floor(t/e)}t.plot=function(n,i,s){return new e(t(n),i,s,t.plot.plugins)},t.plot.version="0.7",t.plot.plugins=[],t.plot.formatDate=function(t,e,n){var i=function(t){return t=""+t,1==t.length?"0"+t:t},s=[],r=!1,o=!1,a=t.getUTCHours(),l=a<12;null==n&&(n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),-1!=e.search(/%p|%P/)&&(a>12?a-=12:0==a&&(a=12));for(var c=0;c<e.length;++c){var u=e.charAt(c);if(r){switch(u){case"h":u=""+a;break;case"H":u=i(a);break;case"M":u=i(t.getUTCMinutes());break;case"S":u=i(t.getUTCSeconds());break;case"d":u=""+t.getUTCDate();break;case"m":u=""+(t.getUTCMonth()+1);break;case"y":u=""+t.getUTCFullYear();break;case"b":u=""+n[t.getUTCMonth()];break;case"p":u=l?"am":"pm";break;case"P":u=l?"AM":"PM";break;case"0":u="",o=!0}u&&o&&(u=i(u),o=!1),s.push(u),o||(r=!1)}else"%"==u?r=!0:s.push(u)}return s.join("")}}(jQuery),function(t){function e(e){function n(t){f.active&&(c(t),e.getPlaceholder().trigger("plotselecting",[r()]))}function i(e){1==e.which&&(document.body.focus(),document.onselectstart!==undefined&&null==g.onselectstart&&(g.onselectstart=document.onselectstart,document.onselectstart=function(){return!1}),document.ondrag!==undefined&&null==g.ondrag&&(g.ondrag=document.ondrag,document.ondrag=function(){return!1}),l(f.first,e),f.active=!0,m=function(t){s(t)},t(document).one("mouseup",m))}function s(t){return m=null,document.onselectstart!==undefined&&(document.onselectstart=g.onselectstart),document.ondrag!==undefined&&(document.ondrag=g.ondrag),f.active=!1,c(t),d()?o():(e.getPlaceholder().trigger("plotunselected",[]),e.getPlaceholder().trigger("plotselecting",[null])),!1}function r(){if(!d())return null;var n={},i=f.first,s=f.second;return t.each(e.getAxes(),function(t,e){if(e.used){var r=e.c2p(i[e.direction]),o=e.c2p(s[e.direction]);n[t]={from:Math.min(r,o),to:Math.max(r,o)}}}),n}function o(){var t=r();e.getPlaceholder().trigger("plotselected",[t]),t.xaxis&&t.yaxis&&e.getPlaceholder().trigger("selected",[{x1:t.xaxis.from,y1:t.yaxis.from,x2:t.xaxis.to,y2:t.yaxis.to}])}function a(t,e,n){return e<t?t:e>n?n:e}function l(t,n){var i=e.getOptions(),s=e.getPlaceholder().offset(),r=e.getPlotOffset();t.x=a(0,n.pageX-s.left-r.left,e.width()),t.y=a(0,n.pageY-s.top-r.top,e.height()),"y"==i.selection.mode&&(t.x=t==f.first?0:e.width()),"x"==i.selection.mode&&(t.y=t==f.first?0:e.height())}function c(t){null!=t.pageX&&(l(f.second,t),d()?(f.show=!0,e.triggerRedrawOverlay()):u(!0))}function u(t){f.show&&(f.show=!1,e.triggerRedrawOverlay(),t||e.getPlaceholder().trigger("plotunselected",[]))}function p(t,n){var i,s,r,o,a=e.getAxes();for(var l in a)if(i=a[l],i.direction==n&&(o=n+i.n+"axis",t[o]||1!=i.n||(o=n+"axis"),t[o])){s=t[o].from,r=t[o].to;break}if(t[o]||(i="x"==n?e.getXAxes()[0]:e.getYAxes()[0],s=t[n+"1"],r=t[n+"2"]),null!=s&&null!=r&&s>r){var c=s;s=r,r=c}return{from:s,to:r,axis:i}}function h(t,n){var i,s=e.getOptions();"y"==s.selection.mode?(f.first.x=0,f.second.x=e.width()):(i=p(t,"x"),f.first.x=i.axis.p2c(i.from),f.second.x=i.axis.p2c(i.to)),"x"==s.selection.mode?(f.first.y=0,f.second.y=e.height()):(i=p(t,"y"),f.first.y=i.axis.p2c(i.from),f.second.y=i.axis.p2c(i.to)),f.show=!0,e.triggerRedrawOverlay(),!n&&d()&&o()}function d(){var t=5;return Math.abs(f.second.x-f.first.x)>=t&&Math.abs(f.second.y-f.first.y)>=t}var f={first:{x:-1,y:-1},second:{x:-1,y:-1},show:!1,active:!1},g={},m=null;e.clearSelection=u,e.setSelection=h,e.getSelection=r,e.hooks.bindEvents.push(function(t,e){null!=t.getOptions().selection.mode&&(e.mousemove(n),e.mousedown(i))}),e.hooks.drawOverlay.push(function(e,n){if(f.show&&d()){var i=e.getPlotOffset(),s=e.getOptions();n.save(),n.translate(i.left,i.top);var r=t.color.parse(s.selection.color);n.strokeStyle=r.scale("a",.8).toString(),n.lineWidth=1,n.lineJoin="round",n.fillStyle=r.scale("a",.4).toString();var o=Math.min(f.first.x,f.second.x),a=Math.min(f.first.y,f.second.y),l=Math.abs(f.second.x-f.first.x),c=Math.abs(f.second.y-f.first.y);n.fillRect(o,a,l,c),n.strokeRect(o,a,l,c),n.restore()}}),e.hooks.shutdown.push(function(e,s){s.unbind("mousemove",n),s.unbind("mousedown",i),m&&t(document).unbind("mouseup",m)})}t.plot.plugins.push({init:e,options:{selection:{mode:null,color:"#e8cfac"}},name:"selection",version:"1.1"})}(jQuery),function(t){"use strict";function e(e){e&&3===e.which||(t(s).remove(),t(r).each(function(){var i=t(this),s=n(i),r={relatedTarget:this};s.hasClass("open")&&(s.trigger(e=t.Event("hide.bs.dropdown",r)),e.isDefaultPrevented()||(i.attr("aria-expanded","false"),s.removeClass("open").trigger("hidden.bs.dropdown",r)))}))}function n(e){var n=e.attr("data-target");n||(n=e.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i=n&&t(n);return i&&i.length?i:e.parent()}function i(e){return this.each(function(){var n=t(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new o(this)),"string"==typeof e&&i[e].call(n)})}var s=".dropdown-backdrop",r='[data-toggle="dropdown"]',o=function(e){t(e).on("click.bs.dropdown",this.toggle)};o.VERSION="3.3.1",o.prototype.toggle=function(i){var s=t(this);if(!s.is(".disabled, :disabled")){var r=n(s),o=r.hasClass("open");if(e(),!o){"ontouchstart"in document.documentElement&&!r.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",e);var a={relatedTarget:this};if(r.trigger(i=t.Event("show.bs.dropdown",a)),i.isDefaultPrevented())return;s.trigger("focus").attr("aria-expanded","true"),r.toggleClass("open").trigger("shown.bs.dropdown",a)}return!1}},o.prototype.keydown=function(e){if(/(38|40|27|32)/.test(e.which)&&!/input|textarea/i.test(e.target.tagName)){var i=t(this);if(e.preventDefault(),e.stopPropagation(),!i.is(".disabled, :disabled")){var s=n(i),o=s.hasClass("open");if(!o&&27!=e.which||o&&27==e.which)return 27==e.which&&s.find(r).trigger("focus"),i.trigger("click");var a=" li:not(.divider):visible a",l=s.find('[role="menu"]'+a+', [role="listbox"]'+a);if(l.length){var c=l.index(e.target);38==e.which&&c>0&&c--,40==e.which&&c<l.length-1&&c++,~c||(c=0),l.eq(c).trigger("focus")}}}};var a=t.fn.dropdown;t.fn.dropdown=i,t.fn.dropdown.Constructor=o,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=a,this},t(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",r,o.prototype.toggle).on("keydown.bs.dropdown.data-api",r,o.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',o.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',o.prototype.keydown)}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var i=t(this),s=i.data("bs.tooltip"),r="object"==typeof e&&e,o=r&&r.selector;(s||"destroy"!=e)&&(o?(s||i.data("bs.tooltip",s={}),s[o]||(s[o]=new n(this,r))):s||i.data("bs.tooltip",s=new n(this,r)),"string"==typeof e&&s[e]())})}var n=function(t,e){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",t,e)};n.VERSION="3.3.1",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(e,n,i){this.enabled=!0,this.type=e,this.$element=t(n),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&t(this.options.viewport.selector||this.options.viewport);for(var s=this.options.trigger.split(" "),r=s.length;r--;){var o=s[r];if("click"==o)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=o){var a="hover"==o?"mouseenter":"focusin",l="hover"==o?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},n.prototype.getDelegateOptions=function(){var e={},n=this.getDefaults();return this._options&&t.each(this._options,function(t,i){n[t]!=i&&(e[t]=i)}),e},n.prototype.enter=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return n&&n.$tip&&n.$tip.is(":visible")?void(n.hoverState="in"):(n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show())},n.prototype.leave=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="out",!n.options.delay||!n.options.delay.hide)return n.hide();n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)},n.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var i=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!i)return;var s=this,r=this.tip(),o=this.getUID(this.type);this.setContent(),r.attr("id",o),this.$element.attr("aria-describedby",o),this.options.animation&&r.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,c=l.test(a);c&&(a=a.replace(l,"")||"top"),r.detach().css({top:0,left:0,display:"block"}).addClass(a).data("bs."+this.type,this),this.options.container?r.appendTo(this.options.container):r.insertAfter(this.$element);var u=this.getPosition(),p=r[0].offsetWidth,h=r[0].offsetHeight;if(c){var d=a,f=this.options.container?t(this.options.container):this.$element.parent(),g=this.getPosition(f);a="bottom"==a&&u.bottom+h>g.bottom?"top":"top"==a&&u.top-h<g.top?"bottom":"right"==a&&u.right+p>g.width?"left":"left"==a&&u.left-p<g.left?"right":a,r.removeClass(d).addClass(a)}var m=this.getCalculatedOffset(a,u,p,h);this.applyPlacement(m,a);var v=function(){var t=s.hoverState;s.$element.trigger("shown.bs."+s.type),s.hoverState=null,"out"==t&&s.leave(s)};t.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",v).emulateTransitionEnd(n.TRANSITION_DURATION):v()}},n.prototype.applyPlacement=function(e,n){var i=this.tip(),s=i[0].offsetWidth,r=i[0].offsetHeight,o=parseInt(i.css("margin-top"),10),a=parseInt(i.css("margin-left"),10);isNaN(o)&&(o=0),isNaN(a)&&(a=0),e.top=e.top+o,e.left=e.left+a,t.offset.setOffset(i[0],t.extend({using:function(t){i.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),i.addClass("in");var l=i[0].offsetWidth,c=i[0].offsetHeight;"top"==n&&c!=r&&(e.top=e.top+r-c);var u=this.getViewportAdjustedDelta(n,e,l,c);u.left?e.left+=u.left:e.top+=u.top;var p=/top|bottom/.test(n),h=p?2*u.left-s+l:2*u.top-r+c,d=p?"offsetWidth":"offsetHeight";i.offset(e),this.replaceArrow(h,i[0][d],p)},n.prototype.replaceArrow=function(t,e,n){this.arrow().css(n?"left":"top",50*(1-t/e)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},n.prototype.hide=function(e){function i(){"in"!=s.hoverState&&r.detach(),s.$element.removeAttr("aria-describedby").trigger("hidden.bs."+s.type),e&&e()}var s=this,r=this.tip(),o=t.Event("hide.bs."+this.type);if(this.$element.trigger(o),!o.isDefaultPrevented())return r.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i(),this.hoverState=null,this},n.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(e){e=e||this.$element;var n=e[0],i="BODY"==n.tagName,s=n.getBoundingClientRect();null==s.width&&(s=t.extend({},s,{width:s.right-s.left,height:s.bottom-s.top}));var r=i?{top:0,left:0}:e.offset(),o={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},a=i?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},s,o,a,r)},n.prototype.getCalculatedOffset=function(t,e,n,i){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"==t?{top:e.top-i,left:e.left+e.width/2-n/2}:"left"==t?{top:e.top+e.height/2-i/2,left:e.left-n}:{top:e.top+e.height/2-i/2,left:e.left+e.width}},n.prototype.getViewportAdjustedDelta=function(t,e,n,i){var s={top:0,left:0};if(!this.$viewport)return s;var r=this.options.viewport&&this.options.viewport.padding||0,o=this.getPosition(this.$viewport);if(/right|left/.test(t)){var a=e.top-r-o.scroll,l=e.top+r-o.scroll+i
;a<o.top?s.top=o.top-a:l>o.top+o.height&&(s.top=o.top+o.height-l)}else{var c=e.left-r,u=e.left+r+n;c<o.left?s.left=o.left-c:u>o.width&&(s.left=o.left+o.width-u)}return s},n.prototype.getTitle=function(){var t=this.$element,e=this.options;return t.attr("data-original-title")||("function"==typeof e.title?e.title.call(t[0]):e.title)},n.prototype.getUID=function(t){do{t+=~~(1e6*Math.random())}while(document.getElementById(t));return t},n.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(e){var n=this;e&&((n=t(e.currentTarget).data("bs."+this.type))||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n))),n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type)})};var i=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=n,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=i,this}}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var i=t(this),s=i.data("bs.popover"),r="object"==typeof e&&e,o=r&&r.selector;(s||"destroy"!=e)&&(o?(s||i.data("bs.popover",s={}),s[o]||(s[o]=new n(this,r))):s||i.data("bs.popover",s=new n(this,r)),"string"==typeof e&&s[e]())})}var n=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.3.1",n.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h2 class="popover-title"></h2><div class="popover-content"></div></div>'}),n.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},n.prototype.tip=function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip};var i=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=n,t.fn.popover.noConflict=function(){return t.fn.popover=i,this}}(jQuery);var originalLeave=$.fn.popover.Constructor.prototype.leave;$.fn.popover.Constructor.prototype.leave=function(t){var e,n,i=t instanceof this.constructor?t:$(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);originalLeave.call(this,t),t.currentTarget&&(e=$("body .popover"),n=i.timeout,e.one("mouseenter",function(){clearTimeout(n),e.one("mouseleave",function(){$.fn.popover.Constructor.prototype.leave.call(i,i)})}))},$.fn.popover.Constructor.DEFAULTS.viewport.padding=10,$.fn.popover.Constructor.DEFAULTS.template='<div class="popover" role="tooltip"><div class="arrow"></div><div class="popover-body"><h2 class="popover-title"></h2><div class="popover-content"></div></div></div>';var originalShow=$.fn.popover.Constructor.prototype.show;$.fn.popover.Constructor.prototype.show=function(){if(originalShow.call(this),this.$tip){var t=$(this.options.viewport.selector).height()-2*this.options.viewport.padding;this.$tip.find(".popover-body").css("maxHeight",t)}},function(t){"use strict";function e(e,i){return this.each(function(){var s=t(this),r=s.data("bs.modal"),o=t.extend({},n.DEFAULTS,s.data(),"object"==typeof e&&e);r||s.data("bs.modal",r=new n(this,o)),"string"==typeof e?r[e](i):o.show&&r.show(i)})}var n=function(e,n){this.options=n,this.$body=t(n.container||document.body),this.$element=t(e),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.1",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},n.prototype.show=function(e){var i=this,s=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(s),this.isShown||s.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.backdrop(function(){var s=t.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),i.options.backdrop&&i.adjustBackdrop(),i.adjustDialog(),s&&i.$element[0].offsetWidth,i.$element.addClass("in").attr("aria-hidden",!1),i.enforceFocus();var r=t.Event("shown.bs.modal",{relatedTarget:e});s?i.$element.find(".modal-dialog").one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(r)}).emulateTransitionEnd(n.TRANSITION_DURATION):i.$element.trigger("focus").trigger(r)}))},n.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?t(window).on("keydown.dismiss.bs.modal",t.proxy(function(e){27==e.which&&this.hide(),27==e.which&&(e=t.Event("dismiss.bs.modal"),this.$element.trigger(e))},this)):this.isShown||t(window).off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},n.prototype.remove=function(){this.$element.remove()},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(e){var i=this,s=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var r=t.support.transition&&s;if(this.$backdrop=t('<div class="modal-backdrop '+s+'" />').prependTo(this.$element).on("click.dismiss.bs.modal",t.proxy(function(t){t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),r&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;r?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var o=function(){i.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",o).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):o()}else e&&e()},n.prototype.handleUpdate=function(){this.options.backdrop&&this.adjustBackdrop(),this.adjustDialog()},n.prototype.adjustBackdrop=function(){this.$backdrop.css("left",this.$body.offset().left).css("top",this.$body.offset().top).css("width",this.$body.width()).css("height",0).css("height",this.$element[0].scrollHeight),"rtl"==App.i18n.dir()&&this.$backdrop.css("right","auto"),this.scrollbarWidth&&this.$backdrop.css("width",this.$body.width()-this.scrollbarWidth)},n.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight,e={left:this.$body.offset().left,top:this.$body.offset().top,width:this.$body.width(),paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""};if("rtl"==App.i18n.dir()){e.right="auto";var n=e.paddingLeft;e.paddingLeft=e.paddingRight,e.paddingRight=n}this.$element.css(e)},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){this.bodyIsOverflowing=document.body.scrollHeight>document.documentElement.clientHeight,this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},n.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var i=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=n,t.fn.modal.noConflict=function(){return t.fn.modal=i,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var i=t(this),s=i.attr("href"),r=t(i.attr("data-target")||s&&s.replace(/.*(?=#[^\s]+$)/,"")),o=r.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(s)&&s},r.data(),i.data());i.is("a")&&n.preventDefault(),r.one("show.bs.modal",function(t){t.isDefaultPrevented()||r.one("hidden.bs.modal",function(){i.is(":visible")&&i.trigger("focus")})}),e.call(r,o,this)})}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var i=t(this),s=i.data("bs.tab");s||i.data("bs.tab",s=new n(this)),"string"==typeof e&&s[e]()})}var n=function(e){this.element=t(e)};n.VERSION="3.3.1",n.TRANSITION_DURATION=150,n.prototype.show=function(){var e=this.element,n=e.closest("ul:not(.dropdown-menu)"),i=e.data("target");if(i||(i=e.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var s=n.find(".active:last a"),r=t.Event("hide.bs.tab",{relatedTarget:e[0]}),o=t.Event("show.bs.tab",{relatedTarget:s[0]});if(s.trigger(r),e.trigger(o),!o.isDefaultPrevented()&&!r.isDefaultPrevented()){var a=t(i);this.activate(e.closest("li"),n),this.activate(a,a.parent(),function(){s.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:s[0]})})}}},n.prototype.activate=function(e,i,s){function r(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),a?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),s&&s()}var o=i.find("> .active"),a=s&&t.support.transition&&(o.length&&o.hasClass("fade")||!!i.find("> .fade").length);o.length&&a?o.one("bsTransitionEnd",r).emulateTransitionEnd(n.TRANSITION_DURATION):r(),o.removeClass("in")};var i=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=n,t.fn.tab.noConflict=function(){return t.fn.tab=i,this};var s=function(n){n.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',s).on("click.bs.tab.data-api",'[data-toggle="pill"]',s)}(jQuery),function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(t.style[n]!==undefined)return{end:e[n]};return!1}t.fn.emulateTransitionEnd=function(e){var n=!1,i=this;t(this).one("bsTransitionEnd",function(){n=!0});var s=function(){n||t(i).trigger(t.support.transition.end)};return setTimeout(s,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){if(t(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}})})}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var i=t(this),s=i.data("bs.button"),r="object"==typeof e&&e;s||i.data("bs.button",s=new n(this,r)),"toggle"==e?s.toggle():e&&s.setState(e)})}var n=function(e,i){this.$element=t(e),this.options=t.extend({},n.DEFAULTS,i),this.isLoading=!1};n.VERSION="3.3.1",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(e){var n="disabled",i=this.$element,s=i.is("input")?"val":"html",r=i.data();e+="Text",null==r.resetText&&i.data("resetText",i[s]()),setTimeout(t.proxy(function(){i[s](null==r[e]?this.options[e]:r[e]),"loadingText"==e?(this.isLoading=!0,i.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,i.removeClass(n).removeAttr(n))},this),0)},n.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var n=this.$element.find("input");"radio"==n.prop("type")&&(n.prop("checked")&&this.$element.hasClass("active")?t=!1:e.find(".active").removeClass("active")),t&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active"));t&&this.$element.toggleClass("active")};var i=t.fn.button;t.fn.button=e,t.fn.button.Constructor=n,t.fn.button.noConflict=function(){return t.fn.button=i,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(n){var i=t(n.target);i.hasClass("btn")||(i=i.closest(".btn")),e.call(i,"toggle"),n.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),function(t){"use strict";function e(e){var n,i=e.attr("data-target")||(n=e.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return t(i)}function n(e){return this.each(function(){var n=t(this),s=n.data("bs.collapse"),r=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e);!s&&r.toggle&&"show"==e&&(r.toggle=!1),s||n.data("bs.collapse",s=new i(this,r)),"string"==typeof e&&s[e]()})}var i=function(e,n){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,n),this.$trigger=t(this.options.trigger).filter('[href="#'+e.id+'"], [data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};i.VERSION="3.3.1",i.TRANSITION_DURATION=350,i.DEFAULTS={toggle:!0,trigger:'[data-toggle="collapse"]'},i.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},i.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,s=this.$parent&&this.$parent.find("> .panel").children(".in, .collapsing");if(!(s&&s.length&&(e=s.data("bs.collapse"))&&e.transitioning)){var r=t.Event("show.bs.collapse");if(this.$element.trigger(r),!r.isDefaultPrevented()){s&&s.length&&(n.call(s,"hide"),e||s.data("bs.collapse",null));var o=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[o](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var a=function(){this.$element.removeClass("collapsing").addClass("collapse in")[o](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return a.call(this);var l=t.camelCase(["scroll",o].join("-"));this.$element.one("bsTransitionEnd",t.proxy(a,this)).emulateTransitionEnd(i.TRANSITION_DURATION)[o](this.$element[0][l])}}}},i.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var s=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!t.support.transition)return s.call(this);this.$element[n](0).one("bsTransitionEnd",t.proxy(s,this)).emulateTransitionEnd(i.TRANSITION_DURATION)}}},i.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},i.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(n,i){var s=t(i);this.addAriaAndCollapsedClass(e(s),s)},this)).end()},i.prototype.addAriaAndCollapsedClass=function(t,e){var n=t.hasClass("in");t.attr("aria-expanded",n),e.toggleClass("collapsed",!n).attr("aria-expanded",n)};var s=t.fn.collapse;t.fn.collapse=n,t.fn.collapse.Constructor=i,t.fn.collapse.noConflict=function(){return t.fn.collapse=s,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(i){var s=t(this);s.attr("data-target")||i.preventDefault();var r=e(s),o=r.data("bs.collapse"),a=o?"toggle":t.extend({},s.data(),{trigger:this});n.call(r,a)})}(jQuery),function(t,e,n,i){"use strict";var s=function(e,n){this.widget="",this.$element=t(e),this.defaultTime=n.defaultTime,this.disableFocus=n.disableFocus,this.disableMousewheel=n.disableMousewheel,this.isOpen=n.isOpen,this.minuteStep=n.minuteStep,this.modalBackdrop=n.modalBackdrop,this.orientation=n.orientation,this.secondStep=n.secondStep,this.snapToStep=n.snapToStep,this.showInputs=n.showInputs,this.showMeridian=n.showMeridian,this.showSeconds=n.showSeconds,this.maxHours=n.maxHours,this.template=n.template,this.appendWidgetTo=n.appendWidgetTo,this.showWidgetOnAddonClick=n.showWidgetOnAddonClick,this._init()};s.prototype={constructor:s,_init:function(){var e=this;this.$element.hasClass("time--12")?this.showMeridian=!0:this.showMeridian&&this.$element.addClass("time--12"),this.showWidgetOnAddonClick&&(this.$element.parent().hasClass("input-append")||this.$element.parent().hasClass("input-prepend"))?(this.$element.parent(".input-append, .input-prepend").find(".add-on").on({"click.timepicker":t.proxy(this.showWidget,this)}),this.$element.on({"focus.timepicker":t.proxy(this.highlightUnit,this),"click.timepicker":t.proxy(this.highlightUnit,this),"keydown.timepicker":t.proxy(this.elementKeydown,this),"keyup.timepicker":t.proxy(this.elementKeyup,this),"blur.timepicker":t.proxy(this.blurElement,this),"mousewheel.timepicker DOMMouseScroll.timepicker":t.proxy(this.mousewheel,this)})):this.template?this.$element.on({"focus.timepicker":t.proxy(this.showWidget,this),"click.timepicker":t.proxy(this.showWidget,this),"blur.timepicker":t.proxy(this.blurElement,this),"mousewheel.timepicker DOMMouseScroll.timepicker":t.proxy(this.mousewheel,this)}):this.$element.on({"focus.timepicker":t.proxy(this.highlightUnit,this),"click.timepicker":t.proxy(this.highlightUnit,this),"keydown.timepicker":t.proxy(this.elementKeydown,this),"keyup.timepicker":t.proxy(this.elementKeyup,this),"blur.timepicker":t.proxy(this.blurElement,this),"mousewheel.timepicker DOMMouseScroll.timepicker":t.proxy(this.mousewheel,this)}),!1!==this.template?this.$widget=t(this.getTemplate()).on("click",t.proxy(this.widgetClick,this)):this.$widget=!1,this.showInputs&&!1!==this.$widget&&this.$widget.find("input").each(function(){t(this).on({"click.timepicker":function(){t(this).select()},"keydown.timepicker":t.proxy(e.widgetKeydown,e),"keyup.timepicker":t.proxy(e.widgetKeyup,e)})}),this.maxHours>23&&(this.showMeridian=!1),this.setDefaultTime(this.defaultTime)},blurElement:function(){this.highlightedUnit=null,this.updateFromElementVal()},clear:function(){this.hour="",this.minute="",this.second="",this.meridian="",this.$element.val("")},decrementHour:function(){if(this.showMeridian)if(1===this.hour)this.hour=12;else{if(12===this.hour)return this.hour--,this.toggleMeridian();if(0===this.hour)return this.hour=11,this.toggleMeridian();this.hour--}else this.hour<=0?this.hour=this.maxHours:this.hour--},decrementMinute:function(t){var e;e=t?this.minute-t:this.minute-this.minuteStep,e<0?(this.decrementHour(),this.minute=e+60):this.minute=e},decrementSecond:function(){var t=this.second-this.secondStep;t<0?(this.decrementMinute(!0),this.second=t+60):this.second=t},elementKeydown:function(e){switch(e.keyCode){case 9:case 27:this.updateFromElementVal();break;case 37:e.preventDefault(),this.highlightPrevUnit();break;case 38:switch(e.preventDefault(),this.highlightedUnit){case"hour":this.incrementHour(),this.highlightHour();break;case"minute":this.incrementMinute(),this.highlightMinute();break;case"second":this.incrementSecond(),this.highlightSecond();break;case"meridian":this.toggleMeridian(),this.highlightMeridian()}this.update();break;case 39:e.preventDefault(),this.highlightNextUnit();break;case 40:switch(e.preventDefault(),this.highlightedUnit){case"hour":this.decrementHour(),this.highlightHour();break;case"minute":this.decrementMinute(),this.highlightMinute();break;case"second":this.decrementSecond(),this.highlightSecond();break;case"meridian":this.toggleMeridian(),this.highlightMeridian()}this.update();break;case 8:this.highlightedUnit=null;break;case 186:this.$element.val().length<=2&&(this.setTime(this.$element.val(),i,!0),this.$element.val(this.getTime()),this.highlightMinute(),e.preventDefault()),"hour"==this.highlightedUnit&&(setTimeout(t.proxy(this.highlightNextUnit,this),0),e.preventDefault());break;default:switch(this.getCursorPosition()){case 1:setTimeout(t.proxy(this.highlightMinute,this),0)}}},elementKeyup:function(t){-1==[8,9,27,37,38,39,40].indexOf(t.keyCode)&&this.updateFromElementVal(!0)},getCursorPosition:function(){var t=this.$element.get(0);if("selectionStart"in t)return t.selectionStart;if(n.selection){t.focus();var e=n.selection.createRange(),i=n.selection.createRange().text.length;return e.moveStart("character",-t.value.length),e.text.length-i}},getTemplate:function(){var t,e,n,i,s,r;switch(this.showInputs?(e='<input type="text" class="timepicker-hour" maxlength="2"/>',n='<input type="text" class="timepicker-minute" maxlength="2"/>',i='<input type="text" class="timepicker-second" maxlength="2"/>',s='<input type="text" class="timepicker-meridian" maxlength="2"/>'):(e='<span class="timepicker-hour"></span>',n='<span class="timepicker-minute"></span>',i='<span class="timepicker-second"></span>',s='<span class="timepicker-meridian"></span>'),r='<table><tr><td><a href="#" data-action="incrementHour"><svg class="icon icon-arrow-up"><use xlink:href="#icon-arrow-up" /></svg>"></i></a></td><td class="separator">&nbsp;</td><td><a href="#" data-action="incrementMinute"><svg class="icon icon-arrow-up"><use xlink:href="#icon-arrow-up" /></svg>"></i></a></td>'+(this.showSeconds?'<td class="separator">&nbsp;</td><td><a href="#" data-action="incrementSecond"><svg class="icon icon-arrow-up"><use xlink:href="#icon-arrow-up" /></svg>"></i></a></td>':"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td class="meridian-column"><a href="#" data-action="toggleMeridian"><svg class="icon icon-arrow-up"><use xlink:href="#icon-arrow-up" /></svg>"></i></a></td>':"")+"</tr><tr><td>"+e+'</td> <td class="separator">:</td><td>'+n+"</td> "+(this.showSeconds?'<td class="separator">:</td><td>'+i+"</td>":"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td>'+s+"</td>":"")+'</tr><tr><td><a href="#" data-action="decrementHour"><svg class="icon icon-arrow-down"><use xlink:href="#icon-arrow-down" /></svg>"></i></a></td><td class="separator"></td><td><a href="#" data-action="decrementMinute"><svg class="icon icon-arrow-down"><use xlink:href="#icon-arrow-down" /></svg>"></i></a></td>'+(this.showSeconds?'<td class="separator">&nbsp;</td><td><a href="#" data-action="decrementSecond"><svg class="icon icon-arrow-down"><use xlink:href="#icon-arrow-down" /></svg>"></i></a></td>':"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td><a href="#" data-action="toggleMeridian"><svg class="icon icon-arrow-down"><use xlink:href="#icon-arrow-down" /></svg>"></i></a></td>':"")+"</tr></table>",this.template){case"modal":t='<div class="timepicker-widget modal hide fade in" data-backdrop="'+(this.modalBackdrop?"true":"false")+'"><div class="modal-header"><a href="#" class="close" data-dismiss="modal">\xd7</a><h3>Pick a Time</h3></div><div class="modal-content">'+r+'</div><div class="modal-footer"><a href="#" class="btn btn-primary" data-dismiss="modal">OK</a></div></div>';break;case"dropdown":t='<div class="timepicker-widget dropdown-menu">'+r+"</div>"}return t},getTime:function(){return""===this.hour?"":(1===this.hour.toString().length?"0"+this.hour:this.hour)+":"+(1===this.minute.toString().length?"0"+this.minute:this.minute)+(this.showSeconds?":"+(1===this.second.toString().length?"0"+this.second:this.second):"")+(this.showMeridian?" "+this.meridian:"")},hideWidget:function(){!1!==this.isOpen&&(this.$element.trigger({type:"hide.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}}),"modal"===this.template&&this.$widget.modal?this.$widget.modal("hide"):this.$widget.removeClass("open"),t(n).off("mousedown.timepicker, touchend.timepicker"),this.isOpen=!1,this.$widget.detach())},highlightUnit:function(){this.position=this.getCursorPosition(),this.position>=0&&this.position<=2?this.highlightHour():this.position>=3&&this.position<=5?this.highlightMinute():this.position>=6&&this.position<=8?this.showSeconds?this.highlightSecond():this.highlightMeridian():this.position>=9&&this.position<=11&&this.highlightMeridian()},highlightNextUnit:function(){switch(this.highlightedUnit){case"hour":this.highlightMinute();break;case"minute":this.showSeconds?this.highlightSecond():this.showMeridian?this.highlightMeridian():this.highlightHour();break;case"second":this.showMeridian?this.highlightMeridian():this.highlightHour();break;case"meridian":this.highlightHour()}},highlightPrevUnit:function(){switch(this.highlightedUnit){case"hour":this.showMeridian?this.highlightMeridian():this.showSeconds?this.highlightSecond():this.highlightMinute();break;case"minute":this.highlightHour();break;case"second":this.highlightMinute();break;case"meridian":this.showSeconds?this.highlightSecond():this.highlightMinute()}},setSelectionRange:function(t,e){var n=this.$element.get(0);n.setSelectionRange&&setTimeout(function(){n.setSelectionRange(t,e)},0)},highlightHour:function(){var t=this.$element.val(),e=t.replace(/[^0-9\:]/g,"").split(":"),n=e[0]?e[0].toString():e.toString(),i=n.toString().length;this.highlightedUnit="hour",this.setSelectionRange(0,i)},highlightMinute:function(){var t=this.$element.val(),e=t.replace(/[^0-9\:]/g,"").split(":"),n=e[0]?e[0].toString():e.toString(),i=n.toString().length;this.highlightedUnit="minute",this.setSelectionRange(i+1,i+3)},highlightSecond:function(){this.highlightedUnit="second",this.setSelectionRange(6,8)},highlightMeridian:function(){this.highlightedUnit="meridian",this.showSeconds?this.setSelectionRange(9,11):this.setSelectionRange(6,8)},incrementHour:function(){if(this.showMeridian){if(11===this.hour)return this.hour++,this.toggleMeridian();12===this.hour&&(this.hour=0)}if(this.hour===this.maxHours)return void(this.hour=0);this.hour++},incrementMinute:function(t){var e;e=t?this.minute+t:this.minute+this.minuteStep-this.minute%this.minuteStep,e>59?(this.incrementHour(),this.minute=e-60):this.minute=e},incrementSecond:function(){var t=this.second+this.secondStep-this.second%this.secondStep;t>59?(this.incrementMinute(!0),this.second=t-60):this.second=t},mousewheel:function(e){if(!this.disableMousewheel){e.preventDefault(),e.stopPropagation();var n=e.originalEvent.wheelDelta||-e.originalEvent.detail,i=null;switch("mousewheel"===e.type?i=-1*e.originalEvent.wheelDelta:"DOMMouseScroll"===e.type&&(i=40*e.originalEvent.detail),i&&(e.preventDefault(),t(this).scrollTop(i+t(this).scrollTop())),this.highlightedUnit){case"minute":n>0?this.incrementMinute():this.decrementMinute(),this.highlightMinute();break;case"second":n>0?this.incrementSecond():this.decrementSecond(),this.highlightSecond();break;case"meridian":this.toggleMeridian(),this.highlightMeridian();break;default:n>0?this.incrementHour():this.decrementHour(),this.highlightHour()}return!1}},changeToNearestStep:function(t,e){return t%e==0?t:Math.round(t%e/e)?(t+(e-t%e))%60:t-t%e},place:function(){if(!this.isInline){var n=this.$widget.outerWidth(),i=this.$widget.outerHeight(),s=10,r=t(e).width(),o=t(e).height(),a=t(e).scrollTop(),l=parseInt(this.$element.parents().filter(function(){}).first().css("z-index"),10)+10,c=this.component?this.component.parent().offset():this.$element.offset(),u=this.component?this.component.outerHeight(!0):this.$element.outerHeight(!1),p=this.component?this.component.outerWidth(!0):this.$element.outerWidth(!1),h=c.left,d=c.top;this.$widget.removeClass("timepicker-orient-top timepicker-orient-bottom timepicker-orient-right timepicker-orient-left"),"auto"!==this.orientation.x?(this.picker.addClass("datepicker-orient-"+this.orientation.x),"right"===this.orientation.x&&(h-=n-p)):(this.$widget.addClass("timepicker-orient-left"),c.left<0?h-=c.left-s:c.left+n>r&&(h=r-n-s));var f,g,m=this.orientation.y;"auto"===m&&(f=-a+c.top-i,g=a+o-(c.top+u+i),m=Math.max(f,g)===g?"top":"bottom"),this.$widget.addClass("timepicker-orient-"+m),"top"===m?d+=u:d-=i+parseInt(this.$widget.css("padding-top"),10),this.$widget.css({top:d,left:h,zIndex:l})}},remove:function(){t("document").off(".timepicker"),this.$widget&&this.$widget.remove(),delete this.$element.data().timepicker},setDefaultTime:function(t){if(this.$element.val())this.updateFromElementVal();else if("current"===t){var e=new Date,n=e.getHours(),i=e.getMinutes(),s=e.getSeconds(),r="AM";0!==s&&60===(s=Math.ceil(e.getSeconds()/this.secondStep)*this.secondStep)&&(i+=1,s=0),0!==i&&60===(i=Math.ceil(e.getMinutes()/this.minuteStep)*this.minuteStep)&&(n+=1,i=0),this.showMeridian&&(0===n?n=12:n>=12?(n>12&&(n-=12),r="PM"):r="AM"),this.hour=n,this.minute=i,this.second=s,this.meridian=r,this.update()}else!1===t?(this.hour=0,this.minute=0,this.second=0,this.meridian="AM"):this.setTime(t)},setTime:function(t,e,n){if(!t)return void this.clear();var i,s,r,o,a,l;if("object"==typeof t&&t.getMonth)r=t.getHours(),o=t.getMinutes(),a=t.getSeconds(),this.showMeridian&&(l="AM",r>12&&(l="PM",r%=12),12===r&&(l="PM"));else{if((i=(/a/i.test(t)?1:0)+(/p/i.test(t)?2:0))>2)return void this.clear();s=t.replace(/[^0-9\:]/g,"").split(":"),r=s[0]?s[0].toString():s.toString();var c=this.maxHours.toString().length;if(this.explicitMode&&r.length>c&&r.length%2!=0)return void this.clear();o=s[1]?s[1].toString():"",a=s[2]?s[2].toString():"",r.length>4&&(a=r.slice(-2),r=r.slice(0,-2)),r.length>c&&(o=r.slice(-c),r=r.slice(0,-c)),o.length>2&&(a=o.slice(-2),o=o.slice(0,-2)),r=parseInt(r,10),o=parseInt(o,10),a=parseInt(a,10),isNaN(r)&&(r=0),isNaN(o)&&(o=0),isNaN(a)&&(a=0),a>59&&(a=59),o>59&&(o=59),r>this.maxHours&&(r=this.maxHours),this.showMeridian?(r>12&&(i=2,r-=12),i||(i=1),0===r&&(r=12),l=1===i?"AM":"PM"):r<12&&2===i?r+=12:r>this.maxHours?r=this.maxHours-1:(r<0||12===r&&1===i)&&(r=0)}this.hour=r,this.snapToStep?(this.minute=this.changeToNearestStep(o,this.minuteStep),this.second=this.changeToNearestStep(a,this.secondStep)):(this.minute=o,this.second=a),this.meridian=l,n||this.update(e)},showWidget:function(){if(!this.isOpen&&!this.$element.is(":disabled")){this.$widget.appendTo(this.appendWidgetTo);var e=this;t(n).on("mousedown.timepicker, touchend.timepicker",function(t){e.$element.parent().find(t.target).length||e.$widget.is(t.target)||e.$widget.find(t.target).length||e.hideWidget()}),this.$element.trigger({type:"show.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}}),this.place(),this.disableFocus&&this.$element.blur(),""===this.hour&&(this.defaultTime?this.setDefaultTime(this.defaultTime):this.setTime("0:0:0")),
"modal"===this.template&&this.$widget.modal?this.$widget.modal("show").on("hidden",t.proxy(this.hideWidget,this)):!1===this.isOpen&&this.$widget.addClass("open"),this.isOpen=!0}},toggleMeridian:function(){this.meridian="AM"===this.meridian?"PM":"AM"},update:function(t){this.updateElement(),t||this.updateWidget();var e=this.hour;this.showMeridian&&("PM"==this.meridian&&e<12&&(e+=12),"AM"==this.meridian&&12==e&&(e=0)),this.$element.trigger({type:"changeTime.timepicker",time:{value:this.getTime(),hoursAndMinutes:this.pad(e)+":"+this.pad(this.minute),hours:e,minutes:this.minute,seconds:this.second,meridian:this.meridian}})},pad:function(t){return 1===t.toString().length?"0"+t:t},updateElement:function(){this.$element.val(this.getTime()).change()},updateFromElementVal:function(t){this.setTime(this.$element.val(),i,t)},updateWidget:function(){if(!1!==this.$widget){var t=this.hour,e=1===this.minute.toString().length?"0"+this.minute:this.minute,n=1===this.second.toString().length?"0"+this.second:this.second;this.showInputs?(this.$widget.find("input.timepicker-hour").val(t),this.$widget.find("input.timepicker-minute").val(e),this.showSeconds&&this.$widget.find("input.timepicker-second").val(n),this.showMeridian&&this.$widget.find("input.timepicker-meridian").val(this.meridian)):(this.$widget.find("span.timepicker-hour").text(t),this.$widget.find("span.timepicker-minute").text(e),this.showSeconds&&this.$widget.find("span.timepicker-second").text(n),this.showMeridian&&this.$widget.find("span.timepicker-meridian").text(this.meridian))}},updateFromWidgetInputs:function(){if(!1!==this.$widget){var t=this.$widget.find("input.timepicker-hour").val()+":"+this.$widget.find("input.timepicker-minute").val()+(this.showSeconds?":"+this.$widget.find("input.timepicker-second").val():"")+(this.showMeridian?this.$widget.find("input.timepicker-meridian").val():"");this.setTime(t,!0)}},widgetClick:function(e){e.stopPropagation(),e.preventDefault();var n=t(e.target),i=n.closest("a").data("action");i&&this[i](),this.update(),n.is("input")&&n.get(0).setSelectionRange(0,2)},widgetKeydown:function(e){var n=t(e.target),i=n.attr("class").replace("timepicker-","");switch(e.keyCode){case 9:if(this.showMeridian&&"meridian"===i||this.showSeconds&&"second"===i||!this.showMeridian&&!this.showSeconds&&"minute"===i)return this.hideWidget();break;case 27:this.hideWidget();break;case 38:switch(e.preventDefault(),i){case"hour":this.incrementHour();break;case"minute":this.incrementMinute();break;case"second":this.incrementSecond();break;case"meridian":this.toggleMeridian()}this.setTime(this.getTime()),n.get(0).setSelectionRange(0,2);break;case 40:switch(e.preventDefault(),i){case"hour":this.decrementHour();break;case"minute":this.decrementMinute();break;case"second":this.decrementSecond();break;case"meridian":this.toggleMeridian()}this.setTime(this.getTime()),n.get(0).setSelectionRange(0,2)}},widgetKeyup:function(t){(65===t.keyCode||77===t.keyCode||80===t.keyCode||46===t.keyCode||8===t.keyCode||t.keyCode>=46&&t.keyCode<=57||t.keyCode>=96&&t.keyCode<=105)&&this.updateFromWidgetInputs()}},t.fn.timepicker=function(e){var n=Array.apply(null,arguments);return n.shift(),this.each(function(){var i=t(this),r=i.data("timepicker"),o="object"==typeof e&&e;r||i.data("timepicker",r=new s(this,t.extend({},t.fn.timepicker.defaults,o,t(this).data()))),"string"==typeof e&&r[e].apply(r,n)})},t.fn.timepicker.defaults={defaultTime:!1,disableFocus:!1,disableMousewheel:!0,isOpen:!1,minuteStep:15,modalBackdrop:!1,orientation:{x:"auto",y:"auto"},secondStep:15,showSeconds:!1,showInputs:!1,showMeridian:!1,template:!1,appendWidgetTo:"body",showWidgetOnAddonClick:!0,maxHours:23,snapToStep:!1},t.fn.timepicker.Constructor=s}(jQuery,window,document),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t,e){function n(){return new Date(Date.UTC.apply(Date,arguments))}function i(){var t=new Date;return n(t.getFullYear(),t.getMonth(),t.getDate())}function s(t,e){return t.getUTCFullYear()===e.getUTCFullYear()&&t.getUTCMonth()===e.getUTCMonth()&&t.getUTCDate()===e.getUTCDate()}function r(t){return function(){return this[t].apply(this,arguments)}}function o(t){return t&&!isNaN(t.getTime())}function a(e,n){function i(t,e){return e.toLowerCase()}var s,r=t(e).data(),o={},a=new RegExp("^"+n.toLowerCase()+"([A-Z])");n=new RegExp("^"+n.toLowerCase());for(var l in r)n.test(l)&&(s=l.replace(a,i),o[s]=r[l]);return o}function l(e){var n={};if(m[e]||(e=e.split("-")[0],m[e])){var i=m[e];return t.each(g,function(t,e){e in i&&(n[e]=i[e])}),n}}var c=function(){var e={get:function(t){return this.slice(t)[0]},contains:function(t){for(var e=t&&t.valueOf(),n=0,i=this.length;n<i;n++)if(this[n].valueOf()===e)return n;return-1},remove:function(t){this.splice(t,1)},replace:function(e){e&&(t.isArray(e)||(e=[e]),this.clear(),this.push.apply(this,e))},clear:function(){this.length=0},copy:function(){var t=new c;return t.replace(this),t}};return function(){var n=[];return n.push.apply(n,arguments),t.extend(n,e),n}}(),u=function(e,n){this._process_options(n),this.dates=new c,this.viewDate=this.o.defaultViewDate,this.focusDate=null,this.element=t(e),this.isInline=!1,this.isInput=this.element.is("input"),this.component=!!this.element.hasClass("date")&&this.element.find(".add-on, .input-group-addon, .btn"),this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.picker=t(this.o.template||v.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot .today, tfoot .clear").attr("colspan",function(t,e){return parseInt(e)+1}),this._allow_update=!1,this.setStartDate(this._o.startDate),this.setEndDate(this._o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.setDaysOfWeekHighlighted(this.o.daysOfWeekHighlighted),this.setDatesDisabled(this.o.datesDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};u.prototype={constructor:u,_process_options:function(s){this._o=t.extend({},this._o,s);var r=this.o=t.extend({},this._o),o=r.language;switch(m[o]||(o=o.split("-")[0],m[o]||(o=f.language)),r.language=o,r.startView){case 2:case"decade":r.startView=2;break;case 1:case"year":r.startView=1;break;default:r.startView=0}switch(r.minViewMode){case 1:case"months":r.minViewMode=1;break;case 2:case"years":r.minViewMode=2;break;default:r.minViewMode=0}switch(r.maxViewMode){case 0:case"days":r.maxViewMode=0;break;case 1:case"months":r.maxViewMode=1;break;default:r.maxViewMode=2}r.startView=Math.min(r.startView,r.maxViewMode),r.startView=Math.max(r.startView,r.minViewMode),!0!==r.multidate&&(r.multidate=Number(r.multidate)||!1,!1!==r.multidate&&(r.multidate=Math.max(0,r.multidate))),r.multidateSeparator=String(r.multidateSeparator),r.weekStart%=7,r.weekEnd=(r.weekStart+6)%7;var a=v.parseFormat(r.format);if(r.startDate!==-Infinity&&(r.startDate?r.startDate instanceof Date?r.startDate=this._local_to_utc(this._zero_time(r.startDate)):r.startDate=v.parseDate(r.startDate,a,r.language):r.startDate=-Infinity),r.endDate!==Infinity&&(r.endDate?r.endDate instanceof Date?r.endDate=this._local_to_utc(this._zero_time(r.endDate)):r.endDate=v.parseDate(r.endDate,a,r.language):r.endDate=Infinity),r.daysOfWeekDisabled=r.daysOfWeekDisabled||[],t.isArray(r.daysOfWeekDisabled)||(r.daysOfWeekDisabled=r.daysOfWeekDisabled.split(/[,\s]*/)),r.daysOfWeekDisabled=t.map(r.daysOfWeekDisabled,function(t){return parseInt(t,10)}),r.daysOfWeekHighlighted=r.daysOfWeekHighlighted||[],t.isArray(r.daysOfWeekHighlighted)||(r.daysOfWeekHighlighted=r.daysOfWeekHighlighted.split(/[,\s]*/)),r.daysOfWeekHighlighted=t.map(r.daysOfWeekHighlighted,function(t){return parseInt(t,10)}),r.datesDisabled=r.datesDisabled||[],!t.isArray(r.datesDisabled)){var l=[];l.push(v.parseDate(r.datesDisabled,a,r.language)),r.datesDisabled=l}r.datesDisabled=t.map(r.datesDisabled,function(t){return v.parseDate(t,a,r.language)});var c=String(r.orientation).toLowerCase().split(/\s+/g),u=r.orientation.toLowerCase();if(c=t.grep(c,function(t){return/^auto|left|right|top|bottom$/.test(t)}),r.orientation={x:"auto",y:"auto"},u&&"auto"!==u)if(1===c.length)switch(c[0]){case"top":case"bottom":r.orientation.y=c[0];break;case"left":case"right":r.orientation.x=c[0]}else u=t.grep(c,function(t){return/^left|right$/.test(t)}),r.orientation.x=u[0]||"auto",u=t.grep(c,function(t){return/^top|bottom$/.test(t)}),r.orientation.y=u[0]||"auto";else;if(r.defaultViewDate){var p=r.defaultViewDate.year||(new Date).getFullYear(),h=r.defaultViewDate.month||0,d=r.defaultViewDate.day||1;r.defaultViewDate=n(p,h,d)}else r.defaultViewDate=i();r.showOnFocus=r.showOnFocus===e||r.showOnFocus,r.zIndexOffset=r.zIndexOffset!==e?r.zIndexOffset:10},_events:[],_secondaryEvents:[],_applyEvents:function(t){for(var n,i,s,r=0;r<t.length;r++)n=t[r][0],2===t[r].length?(i=e,s=t[r][1]):3===t[r].length&&(i=t[r][1],s=t[r][2]),n.on(s,i)},_unapplyEvents:function(t){for(var n,i,s,r=0;r<t.length;r++)n=t[r][0],2===t[r].length?(s=e,i=t[r][1]):3===t[r].length&&(s=t[r][1],i=t[r][2]),n.off(i,s)},_buildEvents:function(){var e={keyup:t.proxy(function(e){-1===t.inArray(e.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:t.proxy(this.keydown,this),paste:t.proxy(this.paste,this)};!0===this.o.showOnFocus&&(e.focus=t.proxy(this.show,this)),this.isInput?this._events=[[this.element,e]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),e],[this.component,{click:t.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:t.proxy(this.show,this)}]],this._events.push([this.element,"*",{blur:t.proxy(function(t){this._focused_from=t.target},this)}],[this.element,{blur:t.proxy(function(t){this._focused_from=t.target},this)}]),this.o.immediateUpdates&&this._events.push([this.element,{"changeYear changeMonth":t.proxy(function(t){this.update(t.date)},this)}]),this._secondaryEvents=[[this.picker,{click:t.proxy(this.click,this)}],[t(window),{resize:t.proxy(this.place,this)}],[t(document),{mousedown:t.proxy(function(t){this.element.is(t.target)||this.element.find(t.target).length||this.picker.is(t.target)||this.picker.find(t.target).length||this.picker.hasClass("datepicker-inline")||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(e,n){var i=n||this.dates.get(-1),s=this._utc_to_local(i);this.element.trigger({type:e,date:s,dates:t.map(this.dates,this._utc_to_local),format:t.proxy(function(t,e){0===arguments.length?(t=this.dates.length-1,e=this.o.format):"string"==typeof t&&(e=t,t=this.dates.length-1),e=e||this.o.format;var n=this.dates.get(t);return v.formatDate(n,e,this.o.language)},this)})},show:function(){if(!this.element.attr("readonly")||!1!==this.o.enableOnReadonly)return this.isInline||this.picker.appendTo(this.o.container),this.place(),this.picker.show(),this._attachSecondaryEvents(),this._trigger("show"),(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&this.o.disableTouchKeyboard&&t(this.element).blur(),this},hide:function(){return this.isInline?this:this.picker.is(":visible")?(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide.bs.datepicker"),this):this},remove:function(){return this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date,this},paste:function(e){var n;if(e.originalEvent.clipboardData&&e.originalEvent.clipboardData.types&&-1!==t.inArray("text/plain",e.originalEvent.clipboardData.types))n=e.originalEvent.clipboardData.getData("text/plain");else{if(!window.clipboardData)return;n=window.clipboardData.getData("Text")}this.setDate(n),this.update(),e.preventDefault()},_utc_to_local:function(t){return t&&new Date(t.getTime()+6e4*t.getTimezoneOffset())},_local_to_utc:function(t){return t&&new Date(t.getTime()-6e4*t.getTimezoneOffset())},_zero_time:function(t){return t&&new Date(t.getFullYear(),t.getMonth(),t.getDate())},_zero_utc_time:function(t){return t&&new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()))},getDates:function(){return t.map(this.dates,this._utc_to_local)},getUTCDates:function(){return t.map(this.dates,function(t){return new Date(t)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){var t=this.dates.get(-1);return void 0!==t?new Date(t):null},clearDates:function(){var t;this.isInput?t=this.element:this.component&&(t=this.element.find("input")),t&&t.val(""),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()},setDates:function(){var e=t.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,e),this._trigger("changeDate"),this.setValue(),this},setUTCDates:function(){var e=t.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,t.map(e,this._utc_to_local)),this._trigger("changeDate"),this.setValue(),this},setDate:r("setDates"),setUTCDate:r("setUTCDates"),setValue:function(){var t=this.getFormattedDate();return this.isInput?this.element.val(t):this.component&&this.element.find("input").val(t),this},getFormattedDate:function(n){n===e&&(n=this.o.format);var i=this.o.language;return t.map(this.dates,function(t){return v.formatDate(t,n,i)}).join(this.o.multidateSeparator)},setStartDate:function(t){return this._process_options({startDate:t}),this.update(),this.updateNavArrows(),this},setEndDate:function(t){return this._process_options({endDate:t}),this.update(),this.updateNavArrows(),this},setDaysOfWeekDisabled:function(t){return this._process_options({daysOfWeekDisabled:t}),this.update(),this.updateNavArrows(),this},setDaysOfWeekHighlighted:function(t){return this._process_options({daysOfWeekHighlighted:t}),this.update(),this},setDatesDisabled:function(t){this._process_options({datesDisabled:t}),this.update(),this.updateNavArrows()},place:function(){if(this.isInline)return this;var e=this.picker.outerWidth(),n=this.picker.outerHeight(),i=10,s=t(this.o.container),r=t(window).width(),o=s.scrollParent().scrollTop(),a=s.offset().top+s.height(),l=s.scrollParent().prop("scrollHeight"),c=s.offset(),u=[];this.element.parents().each(function(){var e=t(this).css("z-index");"auto"!==e&&0!==e&&u.push(parseInt(e))});var p=Math.max.apply(Math,u)+this.o.zIndexOffset,h=this.component?this.component.parent().offset():this.element.offset(),d=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),f=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),g=h.left-c.left,m=h.top-c.top,v=s.width()-f-g;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(g-=e-f),this.o.rtl&&(v-=e-f)):h.left<0?(this.picker.addClass("datepicker-orient-left"),g-=h.left-i):g+e>r?(this.picker.addClass("datepicker-orient-right"),g=h.left+f-e,v=0):this.picker.addClass("datepicker-orient-left");var y,b=this.o.orientation.y;"auto"===b&&(y=l-a-o,b=y>n?"bottom":"top"),this.picker.addClass("datepicker-orient-"+b),"top"===b?m-=n+parseInt(this.picker.css("padding-top")):m+=d,this.o.rtl?this.picker.css({top:m,right:v,zIndex:p}):this.picker.css({top:m,left:g,zIndex:p});var _=this.picker.scrollParent(),a=h.top+d+this.picker.outerHeight(),w=_.scrollTop()+_.height();return a>w&&_.scrollTop(_.scrollTop()+(a-w)+10),this},_allow_update:!0,rerender:function(){return this.fill(),this.element.change(),this},update:function(){if(!this._allow_update)return this;var e=this.dates.copy(),n=[],i=!1;return arguments.length?(t.each(arguments,t.proxy(function(t,e){e instanceof Date&&(e=this._local_to_utc(e)),n.push(e)},this)),i=!0):(n=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),n=n&&this.o.multidate?n.split(this.o.multidateSeparator):[n],delete this.element.data().date),n=t.map(n,t.proxy(function(t){return v.parseDate(t,this.o.format,this.o.language)},this)),n=t.grep(n,t.proxy(function(t){return t<this.o.startDate||t>this.o.endDate||!t},this),!0),this.dates.replace(n),this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate?this.viewDate=new Date(this.o.endDate):this.viewDate=this.o.defaultViewDate,i?this.setValue():n.length&&String(e)!==String(this.dates)&&this._trigger("changeDate"),!this.dates.length&&e.length&&this._trigger("clearDate"),this.fill(),this.element.change(),this},fillDow:function(){var t=this.o.weekStart,e="<tr>";for(this.o.calendarWeeks&&(this.picker.find(".datepicker-days .datepicker-switch").attr("colspan",function(t,e){return parseInt(e)+1}),e+='<th class="cw">&#160;</th>');t<this.o.weekStart+7;)e+='<th class="dow">'+m[this.o.language].daysMin[t++%7]+"</th>";e+="</tr>",this.picker.find(".datepicker-days thead").append(e)},fillMonths:function(){for(var t="",e=0;e<12;)t+='<span class="month">'+m[this.o.language].monthsShort[e++]+"</span>";this.picker.find(".datepicker-months td").html(t)},setRange:function(e){e&&e.length?this.range=t.map(e,function(t){return t.valueOf()}):delete this.range,this.fill()},getClassNames:function(e){var n=[],i=this.viewDate.getUTCFullYear(),r=this.viewDate.getUTCMonth(),o=new Date;return e.getUTCFullYear()<i||e.getUTCFullYear()===i&&e.getUTCMonth()<r?n.push("old"):(e.getUTCFullYear()>i||e.getUTCFullYear()===i&&e.getUTCMonth()>r)&&n.push("new"),this.focusDate&&e.valueOf()===this.focusDate.valueOf()&&n.push("focused"),this.o.todayHighlight&&e.getUTCFullYear()===o.getFullYear()&&e.getUTCMonth()===o.getMonth()&&e.getUTCDate()===o.getDate()&&n.push("today"),-1!==this.dates.contains(e)&&n.push("active"),(e.valueOf()<this.o.startDate||e.valueOf()>this.o.endDate||-1!==t.inArray(e.getUTCDay(),this.o.daysOfWeekDisabled))&&n.push("disabled"),-1!==t.inArray(e.getUTCDay(),this.o.daysOfWeekHighlighted)&&n.push("highlighted"),this.o.datesDisabled.length>0&&t.grep(this.o.datesDisabled,function(t){return s(e,t)}).length>0&&n.push("disabled","disabled-date"),this.range&&(e>this.range[0]&&e<this.range[this.range.length-1]&&n.push("range"),-1!==t.inArray(e.valueOf(),this.range)&&n.push("selected"),e.valueOf()===this.range[0]&&n.push("range-start"),e.valueOf()===this.range[this.range.length-1]&&n.push("range-end")),n},fill:function(){var i,s=new Date(this.viewDate),r=s.getUTCFullYear(),o=s.getUTCMonth(),a=this.o.startDate!==-Infinity?this.o.startDate.getUTCFullYear():-Infinity,l=this.o.startDate!==-Infinity?this.o.startDate.getUTCMonth():-Infinity,c=this.o.endDate!==Infinity?this.o.endDate.getUTCFullYear():Infinity,u=this.o.endDate!==Infinity?this.o.endDate.getUTCMonth():Infinity,p=m[this.o.language].today||m.en.today||"",h=m[this.o.language].clear||m.en.clear||"",d=m[this.o.language].titleFormat||m.en.titleFormat;if(!isNaN(r)&&!isNaN(o)){this.picker.find(".datepicker-days thead .datepicker-switch").text(v.formatDate(new n(r,o),d,this.o.language)),this.picker.find("tfoot .today").text(p).toggleClass("hidden",0==this.o.todayBtn),this.picker.find("tfoot .clear").text(h).toggle(!1!==this.o.clearBtn),this.picker.find("thead .datepicker-title").text(this.o.title).toggle(""!==this.o.title),this.updateNavArrows(),this.fillMonths();var f=n(r,o-1,28),g=v.getDaysInMonth(f.getUTCFullYear(),f.getUTCMonth());f.setUTCDate(g),f.setUTCDate(g-(f.getUTCDay()-this.o.weekStart+7)%7);var y=new Date(f);f.getUTCFullYear()<100&&y.setUTCFullYear(f.getUTCFullYear()),y.setUTCDate(y.getUTCDate()+42),y=y.valueOf();for(var b,_=[];f.valueOf()<y;){if(f.getUTCDay()===this.o.weekStart&&(_.push("<tr>"),this.o.calendarWeeks)){var w=new Date(+f+(this.o.weekStart-f.getUTCDay()-7)%7*864e5),k=new Date(Number(w)+(11-w.getUTCDay())%7*864e5),T=new Date(Number(T=n(k.getUTCFullYear(),0,1))+(11-T.getUTCDay())%7*864e5),S=(k-T)/864e5/7+1;_.push('<td class="cw">'+S+"</td>")}if(b=this.getClassNames(f),b.push("day"),this.o.beforeShowDay!==t.noop){var C=this.o.beforeShowDay(this._utc_to_local(f));C===e?C={}:"boolean"==typeof C?C={enabled:C}:"string"==typeof C&&(C={classes:C}),!1===C.enabled&&b.push("disabled"),C.classes&&(b=b.concat(C.classes.split(/\s+/))),C.tooltip&&(i=C.tooltip)}b=t.unique(b),_.push('<td class="'+b.join(" ")+'"'+(i?' title="'+i+'"':"")+">"+f.getUTCDate()+"</td>"),i=null,f.getUTCDay()===this.o.weekEnd&&_.push("</tr>"),f.setUTCDate(f.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(_.join(""));var A=this.picker.find(".datepicker-months").find(".datepicker-switch").text(this.o.maxViewMode<2?"Months":r).end().find("span").removeClass("active");if(t.each(this.dates,function(t,e){e.getUTCFullYear()===r&&A.eq(e.getUTCMonth()).addClass("active")}),(r<a||r>c)&&A.addClass("disabled"),r===a&&A.slice(0,l).addClass("disabled"),r===c&&A.slice(u+1).addClass("disabled"),this.o.beforeShowMonth!==t.noop){var x=this;t.each(A,function(e,n){if(!t(n).hasClass("disabled")){var i=new Date(r,e,1);!1===x.o.beforeShowMonth(i)&&t(n).addClass("disabled")}})}_="",r=10*parseInt(r/10,10);var j=this.picker.find(".datepicker-years").find(".datepicker-switch").text(r+"-"+(r+9)).end().find("td");r-=1;for(var I,D=t.map(this.dates,function(t){return t.getUTCFullYear()}),P=-1;P<11;P++){if(I=["year"],i=null,-1===P?I.push("old"):10===P&&I.push("new"),-1!==t.inArray(r,D)&&I.push("active"),(r<a||r>c)&&I.push("disabled"),this.o.beforeShowYear!==t.noop){var E=this.o.beforeShowYear(new Date(r,0,1));E===e?E={}:"boolean"==typeof E?E={enabled:E}:"string"==typeof E&&(E={classes:E}),!1===E.enabled&&I.push("disabled"),E.classes&&(I=I.concat(E.classes.split(/\s+/))),E.tooltip&&(i=E.tooltip)}_+='<span class="'+I.join(" ")+'"'+(i?' title="'+i+'"':"")+">"+r+"</span>",r+=1}j.html(_)}},updateNavArrows:function(){if(this._allow_update){var t=new Date(this.viewDate),e=t.getUTCFullYear(),n=t.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-Infinity&&e<=this.o.startDate.getUTCFullYear()&&n<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==Infinity&&e>=this.o.endDate.getUTCFullYear()&&n>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-Infinity&&e<=this.o.startDate.getUTCFullYear()||this.o.maxViewMode<2?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==Infinity&&e>=this.o.endDate.getUTCFullYear()||this.o.maxViewMode<2?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(e){e.preventDefault(),e.stopPropagation();var i,s,r,o=t(e.target).closest("span, td, th");if(1===o.length)switch(o[0].nodeName.toLowerCase()){case"th":switch(o[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var a=v.modes[this.viewMode].navStep*("prev"===o[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,a),this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,a),1===this.viewMode&&this._trigger("changeYear",this.viewDate)}this.fill();break;case"today":var l=new Date;l=n(l.getFullYear(),l.getMonth(),l.getDate(),0,0,0),this.showMode(-2);var c="linked"===this.o.todayBtn?null:"view";this._setDate(l,c);break;case"clear":this.clearDates()}break;case"span":o.hasClass("disabled")||(this.viewDate.setUTCDate(1),o.hasClass("month")?(r=1,s=o.parent().find("span").index(o),i=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(s),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode?(this._setDate(n(i,s,r)),this.showMode()):this.showMode(-1)):(r=1,s=0,i=parseInt(o.text(),10)||0,this.viewDate.setUTCFullYear(i),this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(n(i,s,r)),this.showMode(-1)),this.fill());break;case"td":o.hasClass("day")&&!o.hasClass("disabled")&&(r=parseInt(o.text(),10)||1,i=this.viewDate.getUTCFullYear(),s=this.viewDate.getUTCMonth(),o.hasClass("old")?0===s?(s=11,i-=1):s-=1:o.hasClass("new")&&(11===s?(s=0,i+=1):s+=1),this._setDate(n(i,s,r)))}this.picker.is(":visible")&&this._focused_from&&t(this._focused_from).focus(),delete this._focused_from},_toggle_multidate:function(t){var e=this.dates.contains(t);if(t||this.dates.clear(),-1!==e?(!0===this.o.multidate||this.o.multidate>1||this.o.toggleActive)&&this.dates.remove(e):!1===this.o.multidate?(this.dates.clear(),this.dates.push(t)):this.dates.push(t),"number"==typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(t,e){e&&"date"!==e||this._toggle_multidate(t&&new Date(t)),e&&"view"!==e||(this.viewDate=t&&new Date(t)),this.fill(),this.setValue(),e&&"view"===e||this._trigger("changeDate");var n;this.isInput?n=this.element:this.component&&(n=this.element.find("input")),n&&n.change(),!this.o.autoclose||e&&"date"!==e||this.hide()},moveMonth:function(t,e){if(!o(t))return this.o.defaultViewDate;if(!e)return t;var n,i,s=new Date(t.valueOf()),r=s.getUTCDate(),a=s.getUTCMonth(),l=Math.abs(e);if(e=e>0?1:-1,1===l)i=-1===e?function(){return s.getUTCMonth()===a}:function(){return s.getUTCMonth()!==n},n=a+e,s.setUTCMonth(n),(n<0||n>11)&&(n=(n+12)%12);else{for(var c=0;c<l;c++)s=this.moveMonth(s,e);n=s.getUTCMonth(),s.setUTCDate(r),i=function(){return n!==s.getUTCMonth()}}for(;i();)s.setUTCDate(--r),s.setUTCMonth(n);return s},moveYear:function(t,e){return this.moveMonth(t,12*e)},dateWithinRange:function(t){return t>=this.o.startDate&&t<=this.o.endDate},keydown:function(t){if(!this.picker.is(":visible"))return void(40!==t.keyCode&&27!==t.keyCode||(this.show(),t.stopPropagation()));var e,n,s,r=!1,o=this.focusDate||this.viewDate;switch(t.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),t.preventDefault(),t.stopPropagation();break;case 37:case 39:if(!this.o.keyboardNavigation)break;e=37===t.keyCode?-1:1,t.ctrlKey?(n=this.moveYear(this.dates.get(-1)||i(),e),s=this.moveYear(o,e),this._trigger("changeYear",this.viewDate)):t.shiftKey?(n=this.moveMonth(this.dates.get(-1)||i(),e),s=this.moveMonth(o,e),this._trigger("changeMonth",this.viewDate)):(n=new Date(this.dates.get(-1)||i()),n.setUTCDate(n.getUTCDate()+e),s=new Date(o),s.setUTCDate(o.getUTCDate()+e)),this.dateWithinRange(s)&&(this.focusDate=this.viewDate=s,this.setValue(),this.fill(),t.preventDefault());break;case 38:case 40:if(!this.o.keyboardNavigation)break;e=38===t.keyCode?-1:1,t.ctrlKey?(n=this.moveYear(this.dates.get(-1)||i(),e),s=this.moveYear(o,e),this._trigger("changeYear",this.viewDate)):t.shiftKey?(n=this.moveMonth(this.dates.get(-1)||i(),e),s=this.moveMonth(o,e),this._trigger("changeMonth",this.viewDate)):(n=new Date(this.dates.get(-1)||i()),n.setUTCDate(n.getUTCDate()+7*e),s=new Date(o),s.setUTCDate(o.getUTCDate()+7*e)),this.dateWithinRange(s)&&(this.focusDate=this.viewDate=s,this.setValue(),this.fill(),t.preventDefault());break;case 32:break;case 13:if(!this.o.forceParse)break;o=this.focusDate||this.dates.get(-1)||this.viewDate,this.o.keyboardNavigation&&(this._toggle_multidate(o),r=!0),this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(t.preventDefault(),"function"==typeof t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}if(r){this.dates.length?this._trigger("changeDate"):this._trigger("clearDate");var a;this.isInput?a=this.element:this.component&&(a=this.element.find("input")),a&&a.change()}},showMode:function(t){t&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(this.o.maxViewMode,this.viewMode+t))),this.picker.children("div").hide().filter(".datepicker-"+v.modes[this.viewMode].clsName).show(),this.updateNavArrows()}};var p=function(e,n){this.element=t(e),this.inputs=t.map(n.inputs,function(t){return t.jquery?t[0]:t}),delete n.inputs,d.call(t(this.inputs),n).on("changeDate",t.proxy(this.dateUpdated,this)),this.pickers=t.map(this.inputs,function(e){return t(e).data("datepicker")}),this.updateDates()};p.prototype={updateDates:function(){this.dates=t.map(this.pickers,function(t){return t.getUTCDate()}),this.updateRanges()},updateRanges:function(){var e=t.map(this.dates,function(t){return t.valueOf()});t.each(this.pickers,function(t,n){n.setRange(e)})},dateUpdated:function(e){if(!this.updating){this.updating=!0;var n=t(e.target).data("datepicker");if(void 0!==n){var i=n.getUTCDate(),s=t.inArray(e.target,this.inputs),r=s-1,o=s+1,a=this.inputs.length;if(-1!==s){if(t.each(this.pickers,function(t,e){e.getUTCDate()||e.setUTCDate(i)}),i<this.dates[r])for(;r>=0&&i<this.dates[r];)this.pickers[r--].setUTCDate(i);else if(i>this.dates[o])for(;o<a&&i>this.dates[o];)this.pickers[o++].setUTCDate(i);this.updateDates(),delete this.updating}}}},remove:function(){t.map(this.pickers,function(t){t.remove()}),delete this.element.data().datepicker}};var h=t.fn.datepicker,d=function(n){var i=Array.apply(null,arguments);i.shift();var s;if(this.each(function(){var e=t(this),r=e.data("datepicker"),o="object"==typeof n&&n;if(!r){var c=a(this,"date"),h=t.extend({},f,c,o),d=l(h.language),g=t.extend({},f,d,c,o);if(e.hasClass("input-daterange")||g.inputs){var m={inputs:g.inputs||e.find("input").toArray()};e.data("datepicker",r=new p(this,t.extend(g,m)))}else e.data("datepicker",r=new u(this,g))}"string"==typeof n&&"function"==typeof r[n]&&(s=r[n].apply(r,i))}),s===e||s instanceof u||s instanceof p)return this;if(this.length>1)throw new Error("Using only allowed for the collection of a single element ("+n+" function)");return s};t.fn.datepicker=d;var f=t.fn.datepicker.defaults={autoclose:!1,beforeShowDay:t.noop,beforeShowMonth:t.noop,beforeShowYear:t.noop,calendarWeeks:!1,clearBtn:!1,toggleActive:!1,daysOfWeekDisabled:[],daysOfWeekHighlighted:[],datesDisabled:[],endDate:Infinity,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,maxViewMode:2,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-Infinity,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0,disableTouchKeyboard:!1,enableOnReadonly:!0,container:"body",immediateUpdates:!1,title:""},g=t.fn.datepicker.locale_opts=["format","rtl","weekStart"];t.fn.datepicker.Constructor=u;var m=t.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM yyyy"}},v={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(t){return t%4==0&&t%100!=0||t%400==0},getDaysInMonth:function(t,e){return[31,v.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(t){if("function"==typeof t.toValue&&"function"==typeof t.toDisplay)return t;var e=t.replace(this.validParts,"\0").split("\0"),n=t.match(this.validParts);if(!e||!e.length||!n||0===n.length)throw new Error("Invalid date format.");return{separators:e,parts:n}},parseDate:function(i,s,r){function o(){var t=this.slice(0,h[c].length),e=h[c].slice(0,t.length);return t.toLowerCase()===e.toLowerCase()}if(!i)return e;if(i instanceof Date)return i;if("string"==typeof s&&(s=v.parseFormat(s)),s.toValue)return s.toValue(i,s,r)
;var a,l,c,p=/([\-+]\d+)([dmwy])/,h=i.match(/([\-+]\d+)([dmwy])/g);if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(i)){for(i=new Date,c=0;c<h.length;c++)switch(a=p.exec(h[c]),l=parseInt(a[1]),a[2]){case"d":i.setUTCDate(i.getUTCDate()+l);break;case"m":i=u.prototype.moveMonth.call(u.prototype,i,l);break;case"w":i.setUTCDate(i.getUTCDate()+7*l);break;case"y":i=u.prototype.moveYear.call(u.prototype,i,l)}return n(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),0,0,0)}h=i&&i.match(this.nonpunctuation)||[],i=new Date;var d,f,g={},y=["yyyy","yy","M","MM","m","mm","d","dd"],b={yyyy:function(t,e){return t.setUTCFullYear(e)},yy:function(t,e){return t.setUTCFullYear(2e3+e)},m:function(t,e){if(isNaN(t))return t;for(e-=1;e<0;)e+=12;for(e%=12,t.setUTCMonth(e);t.getUTCMonth()!==e;)t.setUTCDate(t.getUTCDate()-1);return t},d:function(t,e){return t.setUTCDate(e)}};b.M=b.MM=b.mm=b.m,b.dd=b.d,i=n(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0);var _=s.parts.slice();if(h.length!==_.length&&(_=t(_).filter(function(e,n){return-1!==t.inArray(n,y)}).toArray()),h.length===_.length){var w;for(c=0,w=_.length;c<w;c++){if(d=parseInt(h[c],10),a=_[c],isNaN(d))switch(a){case"MM":f=t(m[r].months).filter(o),d=t.inArray(f[0],m[r].months)+1;break;case"M":f=t(m[r].monthsShort).filter(o),d=t.inArray(f[0],m[r].monthsShort)+1}g[a]=d}var k,T;for(c=0;c<y.length;c++)(T=y[c])in g&&!isNaN(g[T])&&(k=new Date(i),b[T](k,g[T]),isNaN(k)||(i=k))}return i},formatDate:function(e,n,i){if(!e)return"";if("string"==typeof n&&(n=v.parseFormat(n)),n.toDisplay)return n.toDisplay(e,n,i);var s={d:e.getUTCDate(),D:m[i].daysShort[e.getUTCDay()],DD:m[i].days[e.getUTCDay()],m:e.getUTCMonth()+1,M:m[i].monthsShort[e.getUTCMonth()],MM:m[i].months[e.getUTCMonth()],yy:e.getUTCFullYear().toString().substring(2),yyyy:e.getUTCFullYear()};s.dd=(s.d<10?"0":"")+s.d,s.mm=(s.m<10?"0":"")+s.m,e=[];for(var r=t.extend([],n.separators),o=0,a=n.parts.length;o<=a;o++)r.length&&e.push(r.shift()),e.push(s[n.parts[o]]);return e.join("")},headTemplate:'<thead><tr><th colspan="7" class="datepicker-title"></th></tr><tr><th class="prev">&#171;</th><th colspan="5" class="datepicker-switch"></th><th class="next">&#187;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};v.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+v.headTemplate+"<tbody></tbody>"+v.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+v.headTemplate+v.contTemplate+v.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+v.headTemplate+v.contTemplate+v.footTemplate+"</table></div></div>",t.fn.datepicker.DPGlobal=v,t.fn.datepicker.noConflict=function(){return t.fn.datepicker=h,this},t.fn.datepicker.version="1.4.1-dev",t(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(e){var n=t(this);n.data("datepicker")||(e.preventDefault(),d.call(n,"show"))}),t(function(){d.call(t('[data-provide="datepicker-inline"]'))})}),function(t,e){"function"==typeof define&&define.amd?define(t):void 0!==module&&"object"==typeof exports?module.exports=t():e.rangy=t()}(function(){function t(t,e){var n=typeof t[e];return n==y||!(n!=v||!t[e])||"unknown"==n}function e(t,e){return!(typeof t[e]!=v||!t[e])}function n(t,e){return typeof t[e]!=b}function i(t){return function(e,n){for(var i=n.length;i--;)if(!t(e,n[i]))return!1;return!0}}function s(t){return t&&S(t,T)&&A(t,k)}function r(t){return e(t,"body")?t.body:t.getElementsByTagName("body")[0]}function o(e){typeof console!=b&&t(console,"log")&&console.log(e)}function a(t,e){I&&e?alert(t):o(t)}function l(t){P.initialized=!0,P.supported=!1,a("Rangy is not supported in this environment. Reason: "+t,P.config.alertOnFail)}function c(t){a("Rangy warning: "+t,P.config.alertOnWarn)}function u(t){return t.message||t.description||String(t)}function p(){if(I&&!P.initialized){var e,n=!1,i=!1;t(document,"createRange")&&(e=document.createRange(),S(e,w)&&A(e,_)&&(n=!0));var a=r(document);if(!a||"body"!=a.nodeName.toLowerCase())return void l("No body element found");if(a&&t(a,"createTextRange")&&(e=a.createTextRange(),s(e)&&(i=!0)),!n&&!i)return void l("Neither Range nor TextRange are available");P.initialized=!0,P.features={implementsDomRange:n,implementsTextRange:i};var c,p;for(var h in j)(c=j[h])instanceof d&&c.init(c,P);for(var f=0,g=N.length;g>f;++f)try{N[f](P)}catch(t){p="Rangy init listener threw an exception. Continuing. Detail: "+u(t),o(p)}}}function h(t){t=t||window,p();for(var e=0,n=R.length;n>e;++e)R[e](t)}function d(t,e,n){this.name=t,this.dependencies=e,this.initialized=!1,this.supported=!1,this.initializer=n}function f(t,e,n){var i=new d(t,e,function(e){if(!e.initialized){e.initialized=!0;try{n(P,e),e.supported=!0}catch(e){var i="Module '"+t+"' failed to load: "+u(e);o(i),e.stack&&o(e.stack)}}});return j[t]=i,i}function g(){}function m(){}var v="object",y="function",b="undefined",_=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],w=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],k=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],T=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"],S=i(t),C=i(e),A=i(n),x=[].forEach?function(t,e){t.forEach(e)}:function(t,e){for(var n=0,i=t.length;i>n;++n)e(t[n],n)},j={},I=typeof window!=b&&typeof document!=b,D={isHostMethod:t,isHostObject:e,isHostProperty:n,areHostMethods:S,areHostObjects:C,areHostProperties:A,isTextRange:s,getBody:r,forEach:x},P={version:"1.3.0-beta.1",initialized:!1,isBrowser:I,supported:!0,util:D,features:{},modules:j,config:{alertOnFail:!0,alertOnWarn:!1,preferTextRange:!1,autoInitialize:typeof rangyAutoInitialize==b||rangyAutoInitialize}};P.fail=l,P.warn=c;var E;!{}.hasOwnProperty?l("hasOwnProperty not supported"):(D.extend=E=function(t,e,n){var i,s;for(var r in e)e.hasOwnProperty(r)&&(i=t[r],s=e[r],n&&null!==i&&"object"==typeof i&&null!==s&&"object"==typeof s&&E(i,s,!0),t[r]=s);return e.hasOwnProperty("toString")&&(t.toString=e.toString),t},D.createOptions=function(t,e){var n={};return E(n,e),t&&E(n,t),n}),I||l("Rangy can only run in a browser"),function(){var t;if(I){var e=document.createElement("div");e.appendChild(document.createElement("span"));var n=[].slice;try{1==n.call(e.childNodes,0)[0].nodeType&&(t=function(t){return n.call(t,0)})}catch(t){}}t||(t=function(t){for(var e=[],n=0,i=t.length;i>n;++n)e[n]=t[n];return e}),D.toArray=t}();var O;I&&(t(document,"addEventListener")?O=function(t,e,n){t.addEventListener(e,n,!1)}:t(document,"attachEvent")?O=function(t,e,n){t.attachEvent("on"+e,n)}:l("Document does not have required addEventListener or attachEvent method"),D.addListener=O);var N=[];P.init=p,P.addInitListener=function(t){P.initialized?t(P):N.push(t)};var R=[];P.addShimListener=function(t){R.push(t)},I&&(P.shim=P.createMissingNativeApi=h),d.prototype={init:function(){for(var t,e,n=this.dependencies||[],i=0,s=n.length;s>i;++i){if(e=n[i],!((t=j[e])&&t instanceof d))throw new Error("required module '"+e+"' not found");if(t.init(),!t.supported)throw new Error("required module '"+e+"' not supported")}this.initializer(this)},fail:function(t){throw this.initialized=!0,this.supported=!1,new Error("Module '"+this.name+"' failed to load: "+t)},warn:function(t){P.warn("Module "+this.name+": "+t)},deprecationNotice:function(t,e){P.warn("DEPRECATED: "+t+" in module "+this.name+"is deprecated. Please use "+e+" instead")},createError:function(t){return new Error("Error in Rangy "+this.name+" module: "+t)}},P.createModule=function(t){var e,n;2==arguments.length?(e=arguments[1],n=[]):(e=arguments[2],n=arguments[1]);var i=f(t,n,e);P.initialized&&P.supported&&i.init()},P.createCoreModule=function(t,e,n){f(t,e,n)},P.RangePrototype=g,P.rangePrototype=new g,P.selectionPrototype=new m,P.createCoreModule("DomUtil",[],function(t,e){function n(t){var e;return typeof t.namespaceURI==I||null===(e=t.namespaceURI)||"http://www.w3.org/1999/xhtml"==e}function i(t){var e=t.parentNode;return 1==e.nodeType?e:null}function s(t){for(var e=0;t=t.previousSibling;)++e;return e}function r(t){switch(t.nodeType){case 7:case 10:return 0;case 3:case 8:return t.length;default:return t.childNodes.length}}function o(t,e){var n,i=[];for(n=t;n;n=n.parentNode)i.push(n);for(n=e;n;n=n.parentNode)if(O(i,n))return n;return null}function a(t,e,n){for(var i=n?e:e.parentNode;i;){if(i===t)return!0;i=i.parentNode}return!1}function l(t,e){return a(t,e,!0)}function c(t,e,n){for(var i,s=n?t:t.parentNode;s;){if((i=s.parentNode)===e)return s;s=i}return null}function u(t){var e=t.nodeType;return 3==e||4==e||8==e}function p(t){if(!t)return!1;var e=t.nodeType;return 3==e||8==e}function h(t,e){var n=e.nextSibling,i=e.parentNode;return n?i.insertBefore(t,n):i.appendChild(t),t}function d(t,e,n){var i=t.cloneNode(!1);if(i.deleteData(0,e),t.deleteData(e,t.length-e),h(i,t),n)for(var r,o=0;r=n[o++];)r.node==t&&r.offset>e?(r.node=i,r.offset-=e):r.node==t.parentNode&&r.offset>s(t)&&++r.offset;return i}function f(t){if(9==t.nodeType)return t;if(typeof t.ownerDocument!=I)return t.ownerDocument;if(typeof t.document!=I)return t.document;if(t.parentNode)return f(t.parentNode);throw e.createError("getDocument: no document found for node")}function g(t){var n=f(t);if(typeof n.defaultView!=I)return n.defaultView;if(typeof n.parentWindow!=I)return n.parentWindow;throw e.createError("Cannot get a window object for node")}function m(t){if(typeof t.contentDocument!=I)return t.contentDocument;if(typeof t.contentWindow!=I)return t.contentWindow.document;throw e.createError("getIframeDocument: No Document object found for iframe element")}function v(t){if(typeof t.contentWindow!=I)return t.contentWindow;if(typeof t.contentDocument!=I)return t.contentDocument.defaultView;throw e.createError("getIframeWindow: No Window object found for iframe element")}function y(t){return t&&D.isHostMethod(t,"setTimeout")&&D.isHostObject(t,"document")}function b(t,e,n){var i;if(t?D.isHostProperty(t,"nodeType")?i=1==t.nodeType&&"iframe"==t.tagName.toLowerCase()?m(t):f(t):y(t)&&(i=t.document):i=document,!i)throw e.createError(n+"(): Parameter must be a Window object or DOM node");return i}function _(t){for(var e;e=t.parentNode;)t=e;return t}function w(t,n,i,r){var a,l,u,p,h;if(t==i)return n===r?0:r>n?-1:1;if(a=c(i,t,!0))return n<=s(a)?-1:1;if(a=c(t,i,!0))return s(a)<r?-1:1;if(!(l=o(t,i)))throw new Error("comparePoints error: nodes have no common ancestor");if(u=t===l?l:c(t,l,!0),p=i===l?l:c(i,l,!0),u===p)throw e.createError("comparePoints got to case 4 and childA and childB are the same!");for(h=l.firstChild;h;){if(h===u)return-1;if(h===p)return 1;h=h.nextSibling}}function k(t){try{return t.parentNode,!1}catch(t){return!0}}function T(t){if(!t)return"[No node]";if(N&&k(t))return"[Broken node]";if(u(t))return'"'+t.data+'"';if(1==t.nodeType){var e=t.id?' id="'+t.id+'"':"";return"<"+t.nodeName+e+">[index:"+s(t)+",length:"+t.childNodes.length+"]["+(t.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}return t.nodeName}function S(t){for(var e,n=f(t).createDocumentFragment();e=t.firstChild;)n.appendChild(e);return n}function C(t){this.root=t,this._next=t}function A(t){return new C(t)}function x(t,e){this.node=t,this.offset=e}function j(t){this.code=this[t],this.codeName=t,this.message="DOMException: "+this.codeName}var I="undefined",D=t.util;D.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||e.fail("document missing a Node creation method"),D.isHostMethod(document,"getElementsByTagName")||e.fail("document missing getElementsByTagName method");var P=document.createElement("div");D.areHostMethods(P,["insertBefore","appendChild","cloneNode"]||!D.areHostObjects(P,["previousSibling","nextSibling","childNodes","parentNode"]))||e.fail("Incomplete Element implementation"),D.isHostProperty(P,"innerHTML")||e.fail("Element is missing innerHTML property");var E=document.createTextNode("test");D.areHostMethods(E,["splitText","deleteData","insertData","appendData","cloneNode"]||!D.areHostObjects(P,["previousSibling","nextSibling","childNodes","parentNode"])||!D.areHostProperties(E,["data"]))||e.fail("Incomplete Text Node implementation");var O=function(t,e){for(var n=t.length;n--;)if(t[n]===e)return!0;return!1},N=!1;!function(){var e=document.createElement("b");e.innerHTML="1";var n=e.firstChild;e.innerHTML="<br />",N=k(n),t.features.crashyTextNodes=N}();var R;typeof window.getComputedStyle!=I?R=function(t,e){return g(t).getComputedStyle(t,null)[e]}:typeof document.documentElement.currentStyle!=I?R=function(t,e){return t.currentStyle[e]}:e.fail("No means of obtaining computed style properties found"),C.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var t,e,n=this._current=this._next;if(this._current)if(t=n.firstChild)this._next=t;else{for(e=null;n!==this.root&&!(e=n.nextSibling);)n=n.parentNode;this._next=e}return this._current},detach:function(){this._current=this._next=this.root=null}},x.prototype={equals:function(t){return!!t&&this.node===t.node&&this.offset==t.offset},inspect:function(){return"[DomPosition("+T(this.node)+":"+this.offset+")]"},toString:function(){return this.inspect()}},j.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24},j.prototype.toString=function(){return this.message},t.dom={arrayContains:O,isHtmlNamespace:n,parentElement:i,getNodeIndex:s,getNodeLength:r,getCommonAncestor:o,isAncestorOf:a,isOrIsAncestorOf:l,getClosestAncestorIn:c,isCharacterDataNode:u,isTextOrCommentNode:p,insertAfter:h,splitDataNode:d,getDocument:f,getWindow:g,getIframeWindow:v,getIframeDocument:m,getBody:D.getBody,isWindow:y,getContentDocument:b,getRootContainer:_,comparePoints:w,isBrokenNode:k,inspectNode:T,getComputedStyleProperty:R,fragmentFromNodeChildren:S,createIterator:A,DomPosition:x},t.DOMException=j}),P.createCoreModule("DomRange",["DomUtil"],function(t){function e(t,e){return 3!=t.nodeType&&(U(t,e.startContainer)||U(t,e.endContainer))}function n(t){return t.document||q(t.startContainer)}function i(t){return new M(t.parentNode,L(t))}function s(t){return new M(t.parentNode,L(t)+1)}function r(t,e,n){var i=11==t.nodeType?t.firstChild:t;return z(e)?n==e.length?N.insertAfter(t,e):e.parentNode.insertBefore(t,0==n?e:B(e,n)):n>=e.childNodes.length?e.appendChild(t):e.insertBefore(t,e.childNodes[n]),i}function o(t,e,i){if(S(t),S(e),n(e)!=n(t))throw new $("WRONG_DOCUMENT_ERR");var s=F(t.startContainer,t.startOffset,e.endContainer,e.endOffset),r=F(t.endContainer,t.endOffset,e.startContainer,e.startOffset);return i?0>=s&&r>=0:0>s&&r>0}function a(t){for(var e,i,s,r=n(t.range).createDocumentFragment();i=t.next();){if(e=t.isPartiallySelectedSubtree(),i=i.cloneNode(!e),e&&(s=t.getSubtreeIterator(),i.appendChild(a(s)),s.detach()),10==i.nodeType)throw new $("HIERARCHY_REQUEST_ERR");r.appendChild(i)}return r}function l(t,e,n){var i,s;n=n||{stop:!1};for(var r,o;r=t.next();)if(t.isPartiallySelectedSubtree()){if(!1===e(r))return void(n.stop=!0);if(o=t.getSubtreeIterator(),l(o,e,n),o.detach(),n.stop)return}else for(i=N.createIterator(r);s=i.next();)if(!1===e(s))return void(n.stop=!0)}function c(t){for(var e;t.next();)t.isPartiallySelectedSubtree()?(e=t.getSubtreeIterator(),c(e),e.detach()):t.remove()}function u(t){for(var e,i,s=n(t.range).createDocumentFragment();e=t.next();){if(t.isPartiallySelectedSubtree()?(e=e.cloneNode(!1),i=t.getSubtreeIterator(),e.appendChild(u(i)),i.detach()):t.remove(),10==e.nodeType)throw new $("HIERARCHY_REQUEST_ERR");s.appendChild(e)}return s}function p(t,e,n){var i,s=!(!e||!e.length),r=!!n;s&&(i=new RegExp("^("+e.join("|")+")$"));var o=[];return l(new d(t,!1),function(e){if(!(s&&!i.test(e.nodeType)||r&&!n(e))){var a=t.startContainer;if(e!=a||!z(a)||t.startOffset!=a.length){var l=t.endContainer;e==l&&z(l)&&0==t.endOffset||o.push(e)}}}),o}function h(t){return"["+("undefined"==typeof t.getName?"Range":t.getName())+"("+N.inspectNode(t.startContainer)+":"+t.startOffset+", "+N.inspectNode(t.endContainer)+":"+t.endOffset+")]"}function d(t,e){if(this.range=t,this.clonePartiallySelectedTextNodes=e,!t.collapsed){this.sc=t.startContainer,this.so=t.startOffset,this.ec=t.endContainer,this.eo=t.endOffset;var n=t.commonAncestorContainer;this.sc===this.ec&&z(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==n||z(this.sc)?J(this.sc,n,!0):this.sc.childNodes[this.so],this._last=this.ec!==n||z(this.ec)?J(this.ec,n,!0):this.ec.childNodes[this.eo-1])}}function f(t){return function(e,n){for(var i,s=n?e:e.parentNode;s;){if(i=s.nodeType,H(t,i))return s;s=s.parentNode}return null}}function g(t,e){if(nt(t,e))throw new $("INVALID_NODE_TYPE_ERR")}function m(t,e){if(!H(e,t.nodeType))throw new $("INVALID_NODE_TYPE_ERR")}function v(t,e){if(0>e||e>(z(t)?t.length:t.childNodes.length))throw new $("INDEX_SIZE_ERR")}function y(t,e){if(tt(t,!0)!==tt(e,!0))throw new $("WRONG_DOCUMENT_ERR")}function b(t){if(et(t,!0))throw new $("NO_MODIFICATION_ALLOWED_ERR")}function _(t,e){if(!t)throw new $(e)}function w(t){return V&&N.isBrokenNode(t)||!H(K,t.nodeType)&&!tt(t,!0)}function k(t,e){return e<=(z(t)?t.length:t.childNodes.length)}function T(t){return!!t.startContainer&&!!t.endContainer&&!w(t.startContainer)&&!w(t.endContainer)&&k(t.startContainer,t.startOffset)&&k(t.endContainer,t.endOffset)}function S(t){if(!T(t))throw new Error("Range error: Range is no longer valid after DOM mutation ("+t.inspect()+")")}function C(t,e){S(t);var n=t.startContainer,i=t.startOffset,s=t.endContainer,r=t.endOffset,o=n===s;z(s)&&r>0&&r<s.length&&B(s,r,e),z(n)&&i>0&&i<n.length&&(n=B(n,i,e),o?(r-=i,s=n):s==n.parentNode&&r>=L(n)&&r++,i=0),t.setStartAndEnd(n,i,s,r)}function A(t){S(t);var e=t.commonAncestorContainer.parentNode.cloneNode(!1);return e.appendChild(t.cloneContents()),e.innerHTML}function x(t){t.START_TO_START=at,t.START_TO_END=lt,t.END_TO_END=ct,t.END_TO_START=ut,t.NODE_BEFORE=pt,t.NODE_AFTER=ht,t.NODE_BEFORE_AND_AFTER=dt,t.NODE_INSIDE=ft}function j(t){x(t),x(t.prototype)}function I(t,e){return function(){S(this);var n,i,r=this.startContainer,o=this.startOffset,a=this.commonAncestorContainer,c=new d(this,!0);r!==a&&(n=J(r,a,!0),i=s(n),r=i.node,o=i.offset),l(c,b),c.reset();var u=t(c);return c.detach(),e(this,r,o,r,o),u}}function D(n,r){function o(t,e){return function(n){m(n,Y),m(G(n),K);var r=(t?i:s)(n);(e?a:l)(this,r.node,r.offset)}}function a(t,e,n){var i=t.endContainer,s=t.endOffset;(e!==t.startContainer||n!==t.startOffset)&&((G(e)!=G(i)||1==F(e,n,i,s))&&(i=e,s=n),r(t,e,n,i,s))}function l(t,e,n){var i=t.startContainer,s=t.startOffset;(e!==t.endContainer||n!==t.endOffset)&&((G(e)!=G(i)||-1==F(e,n,i,s))&&(i=e,s=n),r(t,i,s,e,n))}var p=function(){};p.prototype=t.rangePrototype,n.prototype=new p,R.extend(n.prototype,{setStart:function(t,e){g(t,!0),v(t,e),a(this,t,e)},setEnd:function(t,e){g(t,!0),v(t,e),l(this,t,e)},setStartAndEnd:function(){var t=arguments,e=t[0],n=t[1],i=e,s=n;switch(t.length){case 3:s=t[2];break;case 4:i=t[2],s=t[3]}r(this,e,n,i,s)},setBoundary:function(t,e,n){this["set"+(n?"Start":"End")](t,e)},setStartBefore:o(!0,!0),setStartAfter:o(!1,!0),setEndBefore:o(!0,!1),setEndAfter:o(!1,!1),collapse:function(t){S(this),t?r(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):r(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(t){g(t,!0),r(this,t,0,t,W(t))},selectNode:function(t){g(t,!1),m(t,Y);var e=i(t),n=s(t);r(this,e.node,e.offset,n.node,n.offset)},extractContents:I(u,r),deleteContents:I(c,r),canSurroundContents:function(){S(this),b(this.startContainer),b(this.endContainer);var t=new d(this,!0),n=t._first&&e(t._first,this)||t._last&&e(t._last,this);return t.detach(),!n},splitBoundaries:function(){C(this)},splitBoundariesPreservingPositions:function(t){C(this,t)},normalizeBoundaries:function(){S(this);var t=this.startContainer,e=this.startOffset,n=this.endContainer,i=this.endOffset,s=function(t){var e=t.nextSibling;e&&e.nodeType==t.nodeType&&(n=t,i=t.length,t.appendData(e.data),e.parentNode.removeChild(e))},o=function(s){var r=s.previousSibling;if(r&&r.nodeType==s.nodeType){t=s;var o=s.length;if(e=r.length,s.insertData(0,r.data),r.parentNode.removeChild(r),t==n)i+=e,n=t;else if(n==s.parentNode){var a=L(s);i==a?(n=s,i=o):i>a&&i--}}},a=!0;if(z(n))n.length==i&&s(n);else{if(i>0){var l=n.childNodes[i-1];l&&z(l)&&s(l)}a=!this.collapsed}if(a){if(z(t))0==e&&o(t);else if(e<t.childNodes.length){var c=t.childNodes[e];c&&z(c)&&o(c)}}else t=n,e=i;r(this,t,e,n,i)},collapseToPoint:function(t,e){g(t,!0),v(t,e),this.setStartAndEnd(t,e)}}),j(n)}function P(t){t.collapsed=t.startContainer===t.endContainer&&t.startOffset===t.endOffset,t.commonAncestorContainer=t.collapsed?t.startContainer:N.getCommonAncestor(t.startContainer,t.endContainer)}function E(t,e,n,i,s){t.startContainer=e,t.startOffset=n,t.endContainer=i,t.endOffset=s,t.document=N.getDocument(e),P(t)}function O(t){this.startContainer=t,this.startOffset=0,this.endContainer=t,this.endOffset=0,this.document=t,P(this)}var N=t.dom,R=t.util,M=N.DomPosition,$=t.DOMException,z=N.isCharacterDataNode,L=N.getNodeIndex,U=N.isOrIsAncestorOf,q=N.getDocument,F=N.comparePoints,B=N.splitDataNode,J=N.getClosestAncestorIn,W=N.getNodeLength,H=N.arrayContains,G=N.getRootContainer,V=t.features.crashyTextNodes;d.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var t=this._current=this._next;return t&&(this._next=t!==this._last?t.nextSibling:null,z(t)&&this.clonePartiallySelectedTextNodes&&(t===this.ec&&(t=t.cloneNode(!0)).deleteData(this.eo,t.length-this.eo),this._current===this.sc&&(t=t.cloneNode(!0)).deleteData(0,this.so))),t},remove:function(){var t,e,n=this._current;!z(n)||n!==this.sc&&n!==this.ec?n.parentNode&&n.parentNode.removeChild(n):(t=n===this.sc?this.so:0,e=n===this.ec?this.eo:n.length,t!=e&&n.deleteData(t,e-t))},isPartiallySelectedSubtree:function(){return e(this._current,this.range)},getSubtreeIterator:function(){var t;if(this.isSingleCharacterDataNode)t=this.range.cloneRange(),t.collapse(!1);else{t=new O(n(this.range));var e=this._current,i=e,s=0,r=e,o=W(e);U(e,this.sc)&&(i=this.sc,s=this.so),U(e,this.ec)&&(r=this.ec,o=this.eo),E(t,i,s,r,o)}return new d(t,this.clonePartiallySelectedTextNodes)},detach:function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};var Y=[1,3,4,5,7,8,10],K=[2,9,11],X=[5,6,10,12],Z=[1,3,4,5,7,8,10,11],Q=[1,3,4,5,7,8],tt=f([9,11]),et=f(X),nt=f([6,10,12]),it=document.createElement("style"),st=!1;try{it.innerHTML="<b>x</b>",st=3==it.firstChild.nodeType}catch(t){}t.features.htmlParsingConforms=st;var rt=st?function(t){var e=this.startContainer,n=q(e);if(!e)throw new $("INVALID_STATE_ERR");var i=null;return 1==e.nodeType?i=e:z(e)&&(i=N.parentElement(e)),i=null===i||"HTML"==i.nodeName&&N.isHtmlNamespace(q(i).documentElement)&&N.isHtmlNamespace(i)?n.createElement("body"):i.cloneNode(!1),i.innerHTML=t,N.fragmentFromNodeChildren(i)}:function(t){var e=n(this),i=e.createElement("body");return i.innerHTML=t,N.fragmentFromNodeChildren(i)},ot=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],at=0,lt=1,ct=2,ut=3,pt=0,ht=1,dt=2,ft=3;R.extend(t.rangePrototype,{compareBoundaryPoints:function(t,e){S(this),y(this.startContainer,e.startContainer);var n,i,s,r,o=t==ut||t==at?"start":"end",a=t==lt||t==at?"start":"end";return n=this[o+"Container"],i=this[o+"Offset"],s=e[a+"Container"],r=e[a+"Offset"],F(n,i,s,r)},insertNode:function(t){if(S(this),m(t,Z),b(this.startContainer),U(t,this.startContainer))throw new $("HIERARCHY_REQUEST_ERR");var e=r(t,this.startContainer,this.startOffset);this.setStartBefore(e)},cloneContents:function(){S(this);var t,e;if(this.collapsed)return n(this).createDocumentFragment();if(this.startContainer===this.endContainer&&z(this.startContainer))return t=this.startContainer.cloneNode(!0),t.data=t.data.slice(this.startOffset,this.endOffset),e=n(this).createDocumentFragment(),e.appendChild(t),e;var i=new d(this,!0);return t=a(i),i.detach(),t},canSurroundContents:function(){S(this),b(this.startContainer),b(this.endContainer);var t=new d(this,!0),n=t._first&&e(t._first,this)||t._last&&e(t._last,this);return t.detach(),!n},surroundContents:function(t){if(m(t,Q),!this.canSurroundContents())throw new $("INVALID_STATE_ERR");var e=this.extractContents();if(t.hasChildNodes())for(;t.lastChild;)t.removeChild(t.lastChild);r(t,this.startContainer,this.startOffset),t.appendChild(e),this.selectNode(t)},cloneRange:function(){S(this);for(var t,e=new O(n(this)),i=ot.length;i--;)t=ot[i],e[t]=this[t];return e},toString:function(){S(this);var t=this.startContainer;if(t===this.endContainer&&z(t))return 3==t.nodeType||4==t.nodeType?t.data.slice(this.startOffset,this.endOffset):"";var e=[],n=new d(this,!0);return l(n,function(t){(3==t.nodeType||4==t.nodeType)&&e.push(t.data)}),n.detach(),e.join("")},compareNode:function(t){S(this);var e=t.parentNode,n=L(t);if(!e)throw new $("NOT_FOUND_ERR");var i=this.comparePoint(e,n),s=this.comparePoint(e,n+1);return 0>i?s>0?dt:pt:s>0?ht:ft},comparePoint:function(t,e){return S(this),_(t,"HIERARCHY_REQUEST_ERR"),y(t,this.startContainer),F(t,e,this.startContainer,this.startOffset)<0?-1:F(t,e,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:rt,toHtml:function(){return A(this)},intersectsNode:function(t,e){if(S(this),_(t,"NOT_FOUND_ERR"),q(t)!==n(this))return!1;var i=t.parentNode,s=L(t);_(i,"NOT_FOUND_ERR");var r=F(i,s,this.endContainer,this.endOffset),o=F(i,s+1,this.startContainer,this.startOffset);return e?0>=r&&o>=0:0>r&&o>0},isPointInRange:function(t,e){return S(this),_(t,"HIERARCHY_REQUEST_ERR"),y(t,this.startContainer),F(t,e,this.startContainer,this.startOffset)>=0&&F(t,e,this.endContainer,this.endOffset)<=0},intersectsRange:function(t){return o(this,t,!1)},intersectsOrTouchesRange:function(t){return o(this,t,!0)},intersection:function(t){if(this.intersectsRange(t)){var e=F(this.startContainer,this.startOffset,t.startContainer,t.startOffset),n=F(this.endContainer,this.endOffset,t.endContainer,t.endOffset),i=this.cloneRange();return-1==e&&i.setStart(t.startContainer,t.startOffset),1==n&&i.setEnd(t.endContainer,t.endOffset),i}return null},union:function(t){if(this.intersectsOrTouchesRange(t)){var e=this.cloneRange();return-1==F(t.startContainer,t.startOffset,this.startContainer,this.startOffset)&&e.setStart(t.startContainer,t.startOffset),1==F(t.endContainer,t.endOffset,this.endContainer,this.endOffset)&&e.setEnd(t.endContainer,t.endOffset),e}throw new $("Ranges do not intersect")},containsNode:function(t,e){return e?this.intersectsNode(t,!1):this.compareNode(t)==ft},containsNodeContents:function(t){return this.comparePoint(t,0)>=0&&this.comparePoint(t,W(t))<=0},containsRange:function(t){var e=this.intersection(t);return null!==e&&t.equals(e)},containsNodeText:function(t){var e=this.cloneRange();e.selectNode(t);var n=e.getNodes([3]);if(n.length>0){e.setStart(n[0],0);var i=n.pop();return e.setEnd(i,i.length),this.containsRange(e)}return this.containsNodeContents(t)},getNodes:function(t,e){return S(this),p(this,t,e)},getDocument:function(){return n(this)},collapseBefore:function(t){this.setEndBefore(t),this.collapse(!1)},collapseAfter:function(t){this.setStartAfter(t),this.collapse(!0)},getBookmark:function(e){var i=n(this),s=t.createRange(i);e=e||N.getBody(i),s.selectNodeContents(e);var r=this.intersection(s),o=0,a=0;return r&&(s.setEnd(r.startContainer,r.startOffset),o=s.toString().length,a=o+r.toString().length),{start:o,end:a,containerNode:e}},moveToBookmark:function(t){var e=t.containerNode,n=0;this.setStart(e,0),this.collapse(!0);for(var i,s,r,o,a=[e],l=!1,c=!1;!c&&(i=a.pop());)if(3==i.nodeType)s=n+i.length,!l&&t.start>=n&&t.start<=s&&(this.setStart(i,t.start-n),l=!0),l&&t.end>=n&&t.end<=s&&(this.setEnd(i,t.end-n),c=!0),n=s;else for(o=i.childNodes,r=o.length;r--;)a.push(o[r])},getName:function(){return"DomRange"},equals:function(t){return O.rangesEqual(this,t)},isValid:function(){return T(this)},inspect:function(){return h(this)},detach:function(){}}),D(O,E),R.extend(O,{rangeProperties:ot,RangeIterator:d,copyComparisonConstants:j,createPrototypeRange:D,inspect:h,toHtml:A,getRangeDocument:n,rangesEqual:function(t,e){return t.startContainer===e.startContainer&&t.startOffset===e.startOffset&&t.endContainer===e.endContainer&&t.endOffset===e.endOffset}}),t.DomRange=O}),P.createCoreModule("WrappedRange",["DomRange"],function(t,e){var n,i,s=t.dom,r=t.util,o=s.DomPosition,a=t.DomRange,l=s.getBody,c=s.getContentDocument,u=s.isCharacterDataNode;if(t.features.implementsDomRange&&function(){function i(t){for(var e,n=h.length;n--;)e=h[n],t[e]=t.nativeRange[e];t.collapsed=t.startContainer===t.endContainer&&t.startOffset===t.endOffset}function o(t,e,n,i,s){var r=t.startContainer!==e||t.startOffset!=n,o=t.endContainer!==i||t.endOffset!=s,a=!t.equals(t.nativeRange);(r||o||a)&&(t.setEnd(i,s),t.setStart(e,n))}var u,p,h=a.rangeProperties;n=function(t){if(!t)throw e.createError("WrappedRange: Range must be specified");this.nativeRange=t,i(this)},a.createPrototypeRange(n,o),u=n.prototype,u.selectNode=function(t){this.nativeRange.selectNode(t),i(this)},u.cloneContents=function(){return this.nativeRange.cloneContents()},u.surroundContents=function(t){this.nativeRange.surroundContents(t),i(this)},u.collapse=function(t){this.nativeRange.collapse(t),i(this)},u.cloneRange=function(){return new n(this.nativeRange.cloneRange())},u.refresh=function(){i(this)},u.toString=function(){return this.nativeRange.toString()};var d=document.createTextNode("test");l(document).appendChild(d);var f=document.createRange();f.setStart(d,0),f.setEnd(d,0);try{f.setStart(d,1),u.setStart=function(t,e){this.nativeRange.setStart(t,e),i(this)},u.setEnd=function(t,e){this.nativeRange.setEnd(t,e),i(this)},p=function(t){return function(e){this.nativeRange[t](e),i(this)}}}catch(t){u.setStart=function(t,e){try{this.nativeRange.setStart(t,e)}catch(n){this.nativeRange.setEnd(t,e),this.nativeRange.setStart(t,e)}i(this)},u.setEnd=function(t,e){try{this.nativeRange.setEnd(t,e)}catch(n){this.nativeRange.setStart(t,e),this.nativeRange.setEnd(t,e)}i(this)},p=function(t,e){return function(n){try{this.nativeRange[t](n)}catch(i){this.nativeRange[e](n),this.nativeRange[t](n)}i(this)}}}u.setStartBefore=p("setStartBefore","setEndBefore"),u.setStartAfter=p("setStartAfter","setEndAfter"),u.setEndBefore=p("setEndBefore","setStartBefore"),u.setEndAfter=p("setEndAfter","setStartAfter"),u.selectNodeContents=function(t){this.setStartAndEnd(t,0,s.getNodeLength(t))},f.selectNodeContents(d),f.setEnd(d,3);var g=document.createRange();g.selectNodeContents(d),g.setEnd(d,4),g.setStart(d,2),u.compareBoundaryPoints=-1==f.compareBoundaryPoints(f.START_TO_END,g)&&1==f.compareBoundaryPoints(f.END_TO_START,g)?function(t,e){return e=e.nativeRange||e,t==e.START_TO_END?t=e.END_TO_START:t==e.END_TO_START&&(t=e.START_TO_END),this.nativeRange.compareBoundaryPoints(t,e)}:function(t,e){return this.nativeRange.compareBoundaryPoints(t,e.nativeRange||e)};var m=document.createElement("div");m.innerHTML="123";var v=m.firstChild,y=l(document);y.appendChild(m),f.setStart(v,1),f.setEnd(v,2),f.deleteContents(),"13"==v.data&&(u.deleteContents=function(){this.nativeRange.deleteContents(),i(this)},u.extractContents=function(){var t=this.nativeRange.extractContents();return i(this),t}),y.removeChild(m),y=null,r.isHostMethod(f,"createContextualFragment")&&(u.createContextualFragment=function(t){return this.nativeRange.createContextualFragment(t)}),l(document).removeChild(d),u.getName=function(){return"WrappedRange"},t.WrappedRange=n,t.createNativeRange=function(t){return t=c(t,e,"createNativeRange"),t.createRange()}}(),t.features.implementsTextRange){var p=function(t){var e=t.parentElement(),n=t.duplicate();n.collapse(!0);var i=n.parentElement();n=t.duplicate(),n.collapse(!1);var r=n.parentElement(),o=i==r?i:s.getCommonAncestor(i,r);return o==e?o:s.getCommonAncestor(e,o)},h=function(t){return 0==t.compareEndPoints("StartToEnd",t)},d=function(t,e,n,i,r){
var a=t.duplicate();a.collapse(n);var l=a.parentElement();if(s.isOrIsAncestorOf(e,l)||(l=e),!l.canHaveHTML){var c=new o(l.parentNode,s.getNodeIndex(l));return{boundaryPosition:c,nodeInfo:{nodeIndex:c.offset,containerElement:c.node}}}var p=s.getDocument(l).createElement("span");p.parentNode&&p.parentNode.removeChild(p);for(var h,d,f,g,m,v=n?"StartToStart":"StartToEnd",y=r&&r.containerElement==l?r.nodeIndex:0,b=l.childNodes.length,_=b,w=_;w==b?l.appendChild(p):l.insertBefore(p,l.childNodes[w]),a.moveToElementText(p),0!=(h=a.compareEndPoints(v,t))&&y!=_;){if(-1==h){if(_==y+1)break;y=w}else _=_==y+1?y:w;w=Math.floor((y+_)/2),l.removeChild(p)}if(m=p.nextSibling,-1==h&&m&&u(m)){a.setEndPoint(n?"EndToStart":"EndToEnd",t);var k;if(/[\r\n]/.test(m.data)){var T=a.duplicate(),S=T.text.replace(/\r\n/g,"\r").length;for(k=T.moveStart("character",S);-1==(h=T.compareEndPoints("StartToEnd",T));)k++,T.moveStart("character",1)}else k=a.text.length;g=new o(m,k)}else d=(i||!n)&&p.previousSibling,f=(i||n)&&p.nextSibling,g=f&&u(f)?new o(f,0):d&&u(d)?new o(d,d.data.length):new o(l,s.getNodeIndex(p));return p.parentNode.removeChild(p),{boundaryPosition:g,nodeInfo:{nodeIndex:w,containerElement:l}}},f=function(t,e){var n,i,r,o,a=t.offset,c=s.getDocument(t.node),p=l(c).createTextRange(),h=u(t.node);return h?(n=t.node,i=n.parentNode):(o=t.node.childNodes,n=a<o.length?o[a]:null,i=t.node),r=c.createElement("span"),r.innerHTML="&#feff;",n?i.insertBefore(r,n):i.appendChild(r),p.moveToElementText(r),p.collapse(!e),i.removeChild(r),h&&p[e?"moveStart":"moveEnd"]("character",a),p};i=function(t){this.textRange=t,this.refresh()},i.prototype=new a(document),i.prototype.refresh=function(){var t,e,n,i=p(this.textRange);h(this.textRange)?e=t=d(this.textRange,i,!0,!0).boundaryPosition:(n=d(this.textRange,i,!0,!1),t=n.boundaryPosition,e=d(this.textRange,i,!1,!1,n.nodeInfo).boundaryPosition),this.setStart(t.node,t.offset),this.setEnd(e.node,e.offset)},i.prototype.getName=function(){return"WrappedTextRange"},a.copyComparisonConstants(i);var g=function(t){if(t.collapsed)return f(new o(t.startContainer,t.startOffset),!0);var e=f(new o(t.startContainer,t.startOffset),!0),n=f(new o(t.endContainer,t.endOffset),!1),i=l(a.getRangeDocument(t)).createTextRange();return i.setEndPoint("StartToStart",e),i.setEndPoint("EndToEnd",n),i};if(i.rangeToTextRange=g,i.prototype.toTextRange=function(){return g(this)},t.WrappedTextRange=i,!t.features.implementsDomRange||t.config.preferTextRange){var m=function(t){return t("return this;")()}(Function);"undefined"==typeof m.Range&&(m.Range=i),t.createNativeRange=function(t){return t=c(t,e,"createNativeRange"),l(t).createTextRange()},t.WrappedRange=i}}t.createRange=function(n){return n=c(n,e,"createRange"),new t.WrappedRange(t.createNativeRange(n))},t.createRangyRange=function(t){return t=c(t,e,"createRangyRange"),new a(t)},t.createIframeRange=function(n){return e.deprecationNotice("createIframeRange()","createRange(iframeEl)"),t.createRange(n)},t.createIframeRangyRange=function(n){return e.deprecationNotice("createIframeRangyRange()","createRangyRange(iframeEl)"),t.createRangyRange(n)},t.addShimListener(function(e){var n=e.document;"undefined"==typeof n.createRange&&(n.createRange=function(){return t.createRange(n)}),n=e=null})}),P.createCoreModule("WrappedSelection",["DomRange","WrappedRange"],function(t,e){function n(t){return"string"==typeof t?/^backward(s)?$/i.test(t):!!t}function i(t,n){if(t){if(j.isWindow(t))return t;if(t instanceof v)return t.win;var i=j.getContentDocument(t,e,n);return j.getWindow(i)}return window}function s(t){return i(t,"getWinSelection").getSelection()}function r(t){return i(t,"getDocSelection").document.selection}function o(t){var e=!1;return t.anchorNode&&(e=1==j.comparePoints(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset)),e}function a(t,e,n){var i=n?"end":"start",s=n?"start":"end";t.anchorNode=e[i+"Container"],t.anchorOffset=e[i+"Offset"],t.focusNode=e[s+"Container"],t.focusOffset=e[s+"Offset"]}function l(t){var e=t.nativeSelection;t.anchorNode=e.anchorNode,t.anchorOffset=e.anchorOffset,t.focusNode=e.focusNode,t.focusOffset=e.focusOffset}function c(t){t.anchorNode=t.focusNode=null,t.anchorOffset=t.focusOffset=0,t.rangeCount=0,t.isCollapsed=!0,t._ranges.length=0}function u(e){var n;return e instanceof P?(n=t.createNativeRange(e.getDocument()),n.setEnd(e.endContainer,e.endOffset),n.setStart(e.startContainer,e.startOffset)):e instanceof E?n=e.nativeRange:R.implementsDomRange&&e instanceof j.getWindow(e.startContainer).Range&&(n=e),n}function p(t){if(!t.length||1!=t[0].nodeType)return!1;for(var e=1,n=t.length;n>e;++e)if(!j.isAncestorOf(t[0],t[e]))return!1;return!0}function h(t){var n=t.getNodes();if(!p(n))throw e.createError("getSingleElementFromRange: range "+t.inspect()+" did not consist of a single element");return n[0]}function d(t){return!!t&&"undefined"!=typeof t.text}function f(t,e){var n=new E(e);t._ranges=[n],a(t,n,!1),t.rangeCount=1,t.isCollapsed=n.collapsed}function g(e){if(e._ranges.length=0,"None"==e.docSelection.type)c(e);else{var n=e.docSelection.createRange();if(d(n))f(e,n);else{e.rangeCount=n.length;for(var i,s=$(n.item(0)),r=0;r<e.rangeCount;++r)i=t.createRange(s),i.selectNode(n.item(r)),e._ranges.push(i);e.isCollapsed=1==e.rangeCount&&e._ranges[0].collapsed,a(e,e._ranges[e.rangeCount-1],!1)}}}function m(t,n){for(var i=t.docSelection.createRange(),s=h(n),r=$(i.item(0)),o=z(r).createControlRange(),a=0,l=i.length;l>a;++a)o.add(i.item(a));try{o.add(s)}catch(t){throw e.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}o.select(),g(t)}function v(t,e,n){this.nativeSelection=t,this.docSelection=e,this._ranges=[],this.win=n,this.refresh()}function y(t){t.win=t.anchorNode=t.focusNode=t._ranges=null,t.rangeCount=t.anchorOffset=t.focusOffset=0,t.detached=!0}function b(t,e){for(var n,i,s=et.length;s--;)if(n=et[s],i=n.selection,"deleteAll"==e)y(i);else if(n.win==t)return"delete"==e?(et.splice(s,1),!0):i;return"deleteAll"==e&&(et.length=0),null}function _(t,n){for(var i,s=$(n[0].startContainer),r=z(s).createControlRange(),o=0,a=n.length;a>o;++o){i=h(n[o]);try{r.add(i)}catch(t){throw e.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)")}}r.select(),g(t)}function w(t,e){if(t.win.document!=$(e))throw new O("WRONG_DOCUMENT_ERR")}function k(e){return function(n,i){var s;this.rangeCount?(s=this.getRangeAt(0),s["set"+(e?"Start":"End")](n,i)):(s=t.createRange(this.win.document),s.setStartAndEnd(n,i)),this.setSingleRange(s,this.isBackward())}}function T(t){var e=[],n=new N(t.anchorNode,t.anchorOffset),i=new N(t.focusNode,t.focusOffset),s="function"==typeof t.getName?t.getName():"Selection";if("undefined"!=typeof t.rangeCount)for(var r=0,o=t.rangeCount;o>r;++r)e[r]=P.inspect(t.getRangeAt(r));return"["+s+"(Ranges: "+e.join(", ")+")(anchor: "+n.inspect()+", focus: "+i.inspect()+"]"}t.config.checkSelectionRanges=!0;var S,C,A="boolean",x="number",j=t.dom,I=t.util,D=I.isHostMethod,P=t.DomRange,E=t.WrappedRange,O=t.DOMException,N=j.DomPosition,R=t.features,M="Control",$=j.getDocument,z=j.getBody,L=P.rangesEqual,U=D(window,"getSelection"),q=I.isHostObject(document,"selection");R.implementsWinGetSelection=U,R.implementsDocSelection=q;var F=q&&(!U||t.config.preferTextRange);F?(S=r,t.isSelectionValid=function(t){var e=i(t,"isSelectionValid").document,n=e.selection;return"None"!=n.type||$(n.createRange().parentElement())==e}):U?(S=s,t.isSelectionValid=function(){return!0}):e.fail("Neither document.selection or window.getSelection() detected."),t.getNativeSelection=S;var B=S(),J=t.createNativeRange(document),W=z(document),H=I.areHostProperties(B,["anchorNode","focusNode","anchorOffset","focusOffset"]);R.selectionHasAnchorAndFocus=H;var G=D(B,"extend");R.selectionHasExtend=G;var V=typeof B.rangeCount==x;R.selectionHasRangeCount=V;var Y=!1,K=!0,X=G?function(e,n){var i=P.getRangeDocument(n),s=t.createRange(i);s.collapseToPoint(n.endContainer,n.endOffset),e.addRange(u(s)),e.extend(n.startContainer,n.startOffset)}:null;I.areHostMethods(B,["addRange","getRangeAt","removeAllRanges"])&&typeof B.rangeCount==x&&R.implementsDomRange&&function(){var e=window.getSelection();if(e){for(var n=e.rangeCount,i=n>1,s=[],r=o(e),a=0;n>a;++a)s[a]=e.getRangeAt(a);var l=z(document),c=l.appendChild(document.createElement("div"));c.contentEditable="false";var u=c.appendChild(document.createTextNode("\xa0\xa0\xa0")),p=document.createRange();if(p.setStart(u,1),p.collapse(!0),e.addRange(p),K=1==e.rangeCount,e.removeAllRanges(),!i){var h=window.navigator.appVersion.match(/Chrome\/(.*?) /);if(h&&parseInt(h[1])>=36)Y=!1;else{var d=p.cloneRange();p.setStart(u,0),d.setEnd(u,3),d.setStart(u,2),e.addRange(p),e.addRange(d),Y=2==e.rangeCount}}for(l.removeChild(c),e.removeAllRanges(),a=0;n>a;++a)0==a&&r?X?X(e,s[a]):(t.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend"),e.addRange(s[a])):e.addRange(s[a])}}(),R.selectionSupportsMultipleRanges=Y,R.collapsedNonEditableSelectionsSupported=K;var Z,Q=!1;W&&D(W,"createControlRange")&&(Z=W.createControlRange(),I.areHostProperties(Z,["item","add"])&&(Q=!0)),R.implementsControlRange=Q,C=H?function(t){return t.anchorNode===t.focusNode&&t.anchorOffset===t.focusOffset}:function(t){return!!t.rangeCount&&t.getRangeAt(t.rangeCount-1).collapsed};var tt;D(B,"getRangeAt")?tt=function(t,e){try{return t.getRangeAt(e)}catch(t){return null}}:H&&(tt=function(e){var n=$(e.anchorNode),i=t.createRange(n);return i.setStartAndEnd(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset),i.collapsed!==this.isCollapsed&&i.setStartAndEnd(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset),i}),v.prototype=t.selectionPrototype;var et=[],nt=function(t){if(t&&t instanceof v)return t.refresh(),t;t=i(t,"getNativeSelection");var e=b(t),n=S(t),s=q?r(t):null;return e?(e.nativeSelection=n,e.docSelection=s,e.refresh()):(e=new v(n,s,t),et.push({win:t,selection:e})),e};t.getSelection=nt,t.getIframeSelection=function(n){return e.deprecationNotice("getIframeSelection()","getSelection(iframeEl)"),t.getSelection(j.getIframeWindow(n))};var it=v.prototype;if(!F&&H&&I.areHostMethods(B,["removeAllRanges","addRange"])){it.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),c(this)};var st=function(t,e){X(t.nativeSelection,e),t.refresh()};it.addRange=V?function(e,i){if(Q&&q&&this.docSelection.type==M)m(this,e);else if(n(i)&&G)st(this,e);else{var s;Y?s=this.rangeCount:(this.removeAllRanges(),s=0);var r=u(e).cloneRange();try{this.nativeSelection.addRange(r)}catch(t){}if(this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==s+1){if(t.config.checkSelectionRanges){var o=tt(this.nativeSelection,this.rangeCount-1);o&&!L(o,e)&&(e=new E(o))}this._ranges[this.rangeCount-1]=e,a(this,e,at(this.nativeSelection)),this.isCollapsed=C(this)}else this.refresh()}}:function(t,e){n(e)&&G?st(this,t):(this.nativeSelection.addRange(u(t)),this.refresh())},it.setRanges=function(t){if(Q&&q&&t.length>1)_(this,t);else{this.removeAllRanges();for(var e=0,n=t.length;n>e;++e)this.addRange(t[e])}}}else{if(!(D(B,"empty")&&D(J,"select")&&Q&&F))return e.fail("No means of selecting a Range or TextRange was found"),!1;it.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var t;if(this.anchorNode)t=$(this.anchorNode);else if(this.docSelection.type==M){var e=this.docSelection.createRange();e.length&&(t=$(e.item(0)))}if(t){z(t).createTextRange().select(),this.docSelection.empty()}}}catch(t){}c(this)},it.addRange=function(e){this.docSelection.type==M?m(this,e):(t.WrappedTextRange.rangeToTextRange(e).select(),this._ranges[0]=e,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,a(this,e,!1))},it.setRanges=function(t){this.removeAllRanges();var e=t.length;e>1?_(this,t):e&&this.addRange(t[0])}}it.getRangeAt=function(t){if(0>t||t>=this.rangeCount)throw new O("INDEX_SIZE_ERR");return this._ranges[t].cloneRange()};var rt;if(F)rt=function(e){var n;t.isSelectionValid(e.win)?n=e.docSelection.createRange():(n=z(e.win.document).createTextRange(),n.collapse(!0)),e.docSelection.type==M?g(e):d(n)?f(e,n):c(e)};else if(D(B,"getRangeAt")&&typeof B.rangeCount==x)rt=function(e){if(Q&&q&&e.docSelection.type==M)g(e);else if(e._ranges.length=e.rangeCount=e.nativeSelection.rangeCount,e.rangeCount){for(var n=0,i=e.rangeCount;i>n;++n)e._ranges[n]=new t.WrappedRange(e.nativeSelection.getRangeAt(n));a(e,e._ranges[e.rangeCount-1],at(e.nativeSelection)),e.isCollapsed=C(e)}else c(e)};else{if(!H||typeof B.isCollapsed!=A||typeof J.collapsed!=A||!R.implementsDomRange)return e.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;rt=function(t){var e,n=t.nativeSelection;n.anchorNode?(e=tt(n,0),t._ranges=[e],t.rangeCount=1,l(t),t.isCollapsed=C(t)):c(t)}}it.refresh=function(t){var e=t?this._ranges.slice(0):null,n=this.anchorNode,i=this.anchorOffset;if(rt(this),t){var s=e.length;if(s!=this._ranges.length)return!0;if(this.anchorNode!=n||this.anchorOffset!=i)return!0;for(;s--;)if(!L(e[s],this._ranges[s]))return!0;return!1}};var ot=function(t,e){var n=t.getAllRanges();t.removeAllRanges();for(var i=0,s=n.length;s>i;++i)L(e,n[i])||t.addRange(n[i]);t.rangeCount||c(t)};it.removeRange=Q&&q?function(t){if(this.docSelection.type==M){for(var e,n=this.docSelection.createRange(),i=h(t),s=$(n.item(0)),r=z(s).createControlRange(),o=!1,a=0,l=n.length;l>a;++a)e=n.item(a),e!==i||o?r.add(n.item(a)):o=!0;r.select(),g(this)}else ot(this,t)}:function(t){ot(this,t)};var at;!F&&H&&R.implementsDomRange?(at=o,it.isBackward=function(){return at(this)}):at=it.isBackward=function(){return!1},it.isBackwards=it.isBackward,it.toString=function(){for(var t=[],e=0,n=this.rangeCount;n>e;++e)t[e]=""+this._ranges[e];return t.join("")},it.collapse=function(e,n){w(this,e);var i=t.createRange(e);i.collapseToPoint(e,n),this.setSingleRange(i),this.isCollapsed=!0},it.collapseToStart=function(){if(!this.rangeCount)throw new O("INVALID_STATE_ERR");var t=this._ranges[0];this.collapse(t.startContainer,t.startOffset)},it.collapseToEnd=function(){if(!this.rangeCount)throw new O("INVALID_STATE_ERR");var t=this._ranges[this.rangeCount-1];this.collapse(t.endContainer,t.endOffset)},it.selectAllChildren=function(e){w(this,e);var n=t.createRange(e);n.selectNodeContents(e),this.setSingleRange(n)},it.deleteFromDocument=function(){if(Q&&q&&this.docSelection.type==M){for(var t,e=this.docSelection.createRange();e.length;)t=e.item(0),e.remove(t),t.parentNode.removeChild(t);this.refresh()}else if(this.rangeCount){var n=this.getAllRanges();if(n.length){this.removeAllRanges();for(var i=0,s=n.length;s>i;++i)n[i].deleteContents();this.addRange(n[s-1])}}},it.eachRange=function(t,e){for(var n=0,i=this._ranges.length;i>n;++n)if(t(this.getRangeAt(n)))return e},it.getAllRanges=function(){var t=[];return this.eachRange(function(e){t.push(e)}),t},it.setSingleRange=function(t,e){this.removeAllRanges(),this.addRange(t,e)},it.callMethodOnEachRange=function(t,e){var n=[];return this.eachRange(function(i){n.push(i[t].apply(i,e))}),n},it.setStart=k(!0),it.setEnd=k(!1),t.rangePrototype.select=function(t){nt(this.getDocument()).setSingleRange(this,t)},it.changeEachRange=function(t){var e=[],n=this.isBackward();this.eachRange(function(n){t(n),e.push(n)}),this.removeAllRanges(),n&&1==e.length?this.addRange(e[0],"backward"):this.setRanges(e)},it.containsNode=function(t,e){return this.eachRange(function(n){return n.containsNode(t,e)},!0)||!1},it.getBookmark=function(t){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[t])}},it.moveToBookmark=function(e){for(var n,i,s=[],r=0;n=e.rangeBookmarks[r++];)i=t.createRange(this.win),i.moveToBookmark(n),s.push(i);e.backward?this.setSingleRange(s[0],"backward"):this.setRanges(s)},it.toHtml=function(){var t=[];return this.eachRange(function(e){t.push(P.toHtml(e))}),t.join("")},R.implementsTextRange&&(it.getNativeTextRange=function(){var n;if(n=this.docSelection){var i=n.createRange();if(d(i))return i;throw e.createError("getNativeTextRange: selection is a control selection")}if(this.rangeCount>0)return t.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));throw e.createError("getNativeTextRange: selection contains no range")}),it.getName=function(){return"WrappedSelection"},it.inspect=function(){return T(this)},it.detach=function(){b(this.win,"delete"),y(this)},v.detachAll=function(){b(null,"deleteAll")},v.inspect=T,v.isDirectionBackward=n,t.Selection=v,t.selectionPrototype=it,t.addShimListener(function(t){"undefined"==typeof t.getSelection&&(t.getSelection=function(){return nt(t)}),t=null})});var M=!1,$=function(){M||(M=!0,!P.initialized&&P.config.autoInitialize&&p())};return I&&("complete"==document.readyState?$():(t(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",$,!1),O(window,"load",$))),P},this),function(t,e){"function"==typeof define&&define.amd?define(["./rangy-core"],t):void 0!==module&&"object"==typeof exports?module.exports=t(require("rangy")):t(e.rangy)}(function(t){return t.createModule("ClassApplier",["WrappedSelection"],function(t,e){function n(t,e){for(var n in t)if(t.hasOwnProperty(n)&&!1===e(n,t[n]))return!1;return!0}function s(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function r(t){return t&&t.split(/\s+/).sort().join(" ")}function o(t){return r(t.className)}function a(t,e){return o(t)==o(e)}function l(t,e){for(var n=e.split(/\s+/),i=0,r=n.length;r>i;++i)if(!E(t,s(n[i])))return!1;return!0}function c(t,e,n,i,s){var r=t.node,o=t.offset,a=r,l=o;r==i&&o>s&&++l,r!=e||o!=n&&o!=n+1||(a=i,l+=s-n),r==e&&o>n+1&&--l,t.node=a,t.offset=l}function u(t,e,n){t.node==e&&t.offset>n&&--t.offset}function p(t,e,n,i){-1==n&&(n=e.childNodes.length);var s=t.parentNode,r=R.getNodeIndex(t);L(i,function(t){c(t,s,r,e,n)}),e.childNodes.length==n?e.appendChild(t):e.insertBefore(t,e.childNodes[n])}function h(t,e){var n=t.parentNode,i=R.getNodeIndex(t);L(e,function(t){u(t,n,i)}),t.parentNode.removeChild(t)}function d(t,e,n,i,s){for(var r,o=[];r=t.firstChild;)p(r,e,n++,s),o.push(r);return i&&h(t,s),o}function f(t,e){return d(t,t.parentNode,R.getNodeIndex(t),!0,e)}function g(t,e){var n=t.cloneRange();n.selectNodeContents(e);var i=n.intersection(t);return""!=(i?i.toString():"")}function m(t){for(var e,n=t.getNodes([3]),i=0;(e=n[i])&&!g(t,e);)++i;for(var s=n.length-1;(e=n[s])&&!g(t,e);)--s;return n.slice(i,s+1)}function v(t,e){if(t.attributes.length!=e.attributes.length)return!1;for(var n,i,s,r=0,o=t.attributes.length;o>r;++r)if(n=t.attributes[r],"class"!=(s=n.name)){if(i=e.attributes.getNamedItem(s),null===n!=(null===i))return!1;if(n.specified!=i.specified)return!1;if(n.specified&&n.nodeValue!==i.nodeValue)return!1}return!0}function y(t,e){for(var n,i=0,s=t.attributes.length;s>i;++i)if(n=t.attributes[i].name,(!e||!$(e,n))&&t.attributes[i].specified&&"class"!=n)return!0;return!1}function b(t){var e;return t&&1==t.nodeType&&((e=t.parentNode)&&9==e.nodeType&&"on"==e.designMode||F(t)&&!F(t.parentNode))}function _(t){return(F(t)||1!=t.nodeType&&F(t.parentNode))&&!b(t)}function w(t){return t&&1==t.nodeType&&!B.test(q(t,"display"))}function k(t){if(0==t.data.length)return!0;if(J.test(t.data))return!1;switch(q(t.parentNode,"whiteSpace")){case"pre":case"pre-wrap":case"-moz-pre-wrap":return!1;case"pre-line":if(/[\r\n]/.test(t.data))return!1}return w(t.previousSibling)||w(t.nextSibling)}function T(t){var e,n,i=[];for(e=0;n=t[e++];)i.push(new M(n.startContainer,n.startOffset),new M(n.endContainer,n.endOffset));return i}function S(t,e){for(var n,i,s,r=0,o=t.length;o>r;++r)n=t[r],i=e[2*r],s=e[2*r+1],n.setStartAndEnd(i.node,i.offset,s.node,s.offset)}function C(t,e){return R.isCharacterDataNode(t)?0==e?!!t.previousSibling:e!=t.length||!!t.nextSibling:e>0&&e<t.childNodes.length}function A(t,n,i,s){var r,o,a=0==i;if(R.isAncestorOf(n,t))return t;if(R.isCharacterDataNode(n)){var l=R.getNodeIndex(n);if(0==i)i=l;else{if(i!=n.length)throw e.createError("splitNodeAt() should not be called with offset in the middle of a data node ("+i+" in "+n.data);i=l+1}n=n.parentNode}if(C(n,i)){r=n.cloneNode(!1),o=n.parentNode,r.id&&r.removeAttribute("id");for(var c,u=0;c=n.childNodes[i];)p(c,r,u++,s);return p(r,o,R.getNodeIndex(n)+1,s),n==t?r:A(t,o,R.getNodeIndex(r),s)}if(t!=n){r=n.parentNode;var h=R.getNodeIndex(n);return a||h++,A(t,r,h,s)}return t}function x(t,e){return t.namespaceURI==e.namespaceURI&&t.tagName.toLowerCase()==e.tagName.toLowerCase()&&a(t,e)&&v(t,e)&&"inline"==q(t,"display")&&"inline"==q(e,"display")}function j(t){var e=t?"nextSibling":"previousSibling";return function(n,i){var s=n.parentNode,r=n[e];if(r){if(r&&3==r.nodeType)return r}else if(i&&(r=s[e])&&1==r.nodeType&&x(s,r)){var o=r[t?"firstChild":"lastChild"];if(o&&3==o.nodeType)return o}return null}}function I(t){this.isElementMerge=1==t.nodeType,this.textNodes=[];var e=this.isElementMerge?t.lastChild:t;e&&(this.textNodes[0]=e)}function D(t,e,i){var o,a,l,c,u=this;u.cssClass=u.className=t;var p=null,h={};if("object"==typeof e&&null!==e){for("undefined"!=typeof e.elementTagName&&(e.elementTagName=e.elementTagName.toLowerCase()),i=e.tagNames,p=e.elementProperties,h=e.elementAttributes,a=0;c=G[a++];)e.hasOwnProperty(c)&&(u[c]=e[c]);o=e.normalize}else o=e;u.normalize=void 0===o||o,u.attrExceptions=[];var d=document.createElement(u.elementTagName);u.elementProperties=u.copyPropertiesToElement(p,d,!0),n(h,function(t){u.attrExceptions.push(t)}),u.elementAttributes=h,u.elementSortedClassName=u.elementProperties.hasOwnProperty("className")?r(u.elementProperties.className+" "+t):t,u.applyToAnyTagName=!1;var f=typeof i;if("string"==f)"*"==i?u.applyToAnyTagName=!0:u.tagNames=s(i.toLowerCase()).split(/\s*,\s*/);else if("object"==f&&"number"==typeof i.length)for(u.tagNames=[],a=0,l=i.length;l>a;++a)"*"==i[a]?u.applyToAnyTagName=!0:u.tagNames.push(i[a].toLowerCase());else u.tagNames=[u.elementTagName]}function P(t,e,n){return new D(t,e,n)}var E,O,N,R=t.dom,M=R.DomPosition,$=R.arrayContains,z=R.isHtmlNamespace,L=t.util.forEach,U="span";t.util.isHostObject(document.createElement("div"),"classList")?(E=function(t,e){return t.classList.contains(e)},O=function(t,e){return t.classList.add(e)},N=function(t,e){return t.classList.remove(e)}):(E=function(t,e){return t.className&&new RegExp("(?:^|\\s)"+e+"(?:\\s|$)").test(t.className)},O=function(t,e){t.className?E(t,e)||(t.className+=" "+e):t.className=e},N=function(){function t(t,e,n){return e&&n?" ":""}return function(e,n){e.className&&(e.className=e.className.replace(new RegExp("(^|\\s)"+n+"(\\s|$)"),t))}}());var q=R.getComputedStyleProperty,F=function(){return"boolean"==typeof document.createElement("div").isContentEditable?function(t){return t&&1==t.nodeType&&t.isContentEditable}:function(t){return!(!t||1!=t.nodeType||"false"==t.contentEditable)&&("true"==t.contentEditable||F(t.parentNode))}}(),B=/^inline(-block|-table)?$/i,J=/[^\r\n\t\f \u200B]/,W=j(!1),H=j(!0);I.prototype={doMerge:function(t){var e=this.textNodes,n=e[0];if(e.length>1){var i,s=R.getNodeIndex(n),r=[],o=0;L(e,function(e,a){i=e.parentNode,a>0&&(i.removeChild(e),i.hasChildNodes()||i.parentNode.removeChild(i),t&&L(t,function(t){t.node==e&&(t.node=n,t.offset+=o),t.node==i&&t.offset>s&&--t.offset==s+1&&len-1>a&&(t.node=n,t.offset=o)})),r[a]=e.data,o+=e.data.length}),n.data=r.join("")}return n.data},getLength:function(){for(var t=this.textNodes.length,e=0;t--;)e+=this.textNodes[t].length;return e},toString:function(){var t=[];return L(this.textNodes,function(e,n){t[n]="'"+e.data+"'"}),"[Merge("+t.join(",")+")]"}};var G=["elementTagName","ignoreWhiteSpace","applyToEditableOnly","useExistingElements","removeEmptyElements","onElementCreate"],V={};D.prototype={elementTagName:U,elementProperties:{},elementAttributes:{},ignoreWhiteSpace:!0,applyToEditableOnly:!1,useExistingElements:!0,removeEmptyElements:!0,onElementCreate:null,copyPropertiesToElement:function(t,e,n){var i,s,o,a,l,c,u={};for(var p in t)if(t.hasOwnProperty(p))if(a=t[p],l=e[p],"className"==p)O(e,a),O(e,this.className),e[p]=r(e[p]),n&&(u[p]=a);else if("style"==p){s=l,n&&(u[p]=o={});for(i in t[p])t[p].hasOwnProperty(i)&&(s[i]=a[i],n&&(o[i]=s[i]));this.attrExceptions.push(p)}else e[p]=a,n&&(u[p]=e[p],c=V.hasOwnProperty(p)?V[p]:p,this.attrExceptions.push(c));return n?u:""},copyAttributesToElement:function(t,e){for(var n in t)t.hasOwnProperty(n)&&!/^class(?:Name)?$/i.test(n)&&e.setAttribute(n,t[n])},appliesToElement:function(t){return $(this.tagNames,t.tagName.toLowerCase())},getEmptyElements:function(t){var e=this;return t.getNodes([1],function(t){return e.appliesToElement(t)&&!t.hasChildNodes()})},hasClass:function(t){return 1==t.nodeType&&(this.applyToAnyTagName||this.appliesToElement(t))&&E(t,this.className)},getSelfOrAncestorWithClass:function(t){for(;t;){if(this.hasClass(t))return t;t=t.parentNode}return null},isModifiable:function(t){return!this.applyToEditableOnly||_(t)},isIgnorableWhiteSpaceNode:function(t){return this.ignoreWhiteSpace&&t&&3==t.nodeType&&k(t)},postApply:function(t,e,n,s){var r,o,a=t[0],l=t[t.length-1],c=[],u=a,p=l,h=0,d=l.length;L(t,function(t){o=W(t,!s),o?(r||(r=new I(o),c.push(r)),r.textNodes.push(t),t===a&&(u=r.textNodes[0],h=u.length),t===l&&(p=r.textNodes[0],d=r.getLength())):r=null});var f=H(l,!s);if(f&&(r||(r=new I(l),c.push(r)),r.textNodes.push(f)),c.length){for(i=0,len=c.length;len>i;++i)c[i].doMerge(n);e.setStartAndEnd(u,h,p,d)}},createContainer:function(t){var e=t.createElement(this.elementTagName);return this.copyPropertiesToElement(this.elementProperties,e,!1),this.copyAttributesToElement(this.elementAttributes,e),O(e,this.className),this.onElementCreate&&this.onElementCreate(e,this),e},elementHasProperties:function(t,e){var i=this;return n(e,function(e,n){if("className"==e)return l(t,n);if("object"==typeof n){if(!i.elementHasProperties(t[e],n))return!1}else if(t[e]!==n)return!1})},elementHasAttributes:function(t,e){return n(e,function(e,n){return t.getAttribute(e)===n&&void 0})},applyToTextNode:function(t){var e=t.parentNode;if(1==e.childNodes.length&&this.useExistingElements&&z(e)&&this.appliesToElement(e)&&this.elementHasProperties(e,this.elementProperties)&&this.elementHasAttributes(e,this.elementAttributes))O(e,this.className);else{var n=this.createContainer(R.getDocument(t));t.parentNode.insertBefore(n,t),n.appendChild(t)}},isRemovable:function(t){return z(t)&&t.tagName.toLowerCase()==this.elementTagName&&o(t)==this.elementSortedClassName&&this.elementHasProperties(t,this.elementProperties)&&!y(t,this.attrExceptions)&&this.elementHasAttributes(t,this.elementAttributes)&&this.isModifiable(t)},isEmptyContainer:function(t){var e=t.childNodes.length;return 1==t.nodeType&&this.isRemovable(t)&&(0==e||1==e&&this.isEmptyContainer(t.firstChild))},removeEmptyContainers:function(t){var e=this,n=t.getNodes([1],function(t){return e.isEmptyContainer(t)}),i=[t],s=T(i);L(n,function(t){h(t,s)}),S(i,s)},undoToTextNode:function(t,e,n,i){if(!e.containsNode(n)){var s=e.cloneRange();s.selectNode(n),s.isPointInRange(e.endContainer,e.endOffset)&&(A(n,e.endContainer,e.endOffset,i),e.setEndAfter(n)),s.isPointInRange(e.startContainer,e.startOffset)&&(n=A(n,e.startContainer,e.startOffset,i))}this.isRemovable(n)?f(n,i):N(n,this.className)},splitAncestorWithClass:function(t,e,n){var i=this.getSelfOrAncestorWithClass(t);i&&A(i,t,e,n)},undoToAncestor:function(t,e){this.isRemovable(t)?f(t,e):N(t,this.className)},applyToRange:function(t,e){var n=this;e=e||[];var i=T(e||[]);t.splitBoundariesPreservingPositions(i),n.removeEmptyElements&&n.removeEmptyContainers(t);var s=m(t);if(s.length){L(s,function(t){n.isIgnorableWhiteSpaceNode(t)||n.getSelfOrAncestorWithClass(t)||!n.isModifiable(t)||n.applyToTextNode(t,i)});var r=s[s.length-1];t.setStartAndEnd(s[0],0,r,r.length),n.normalize&&n.postApply(s,t,i,!1),S(e,i)}var o=n.getEmptyElements(t);L(o,function(t){O(t,n.className)})},applyToRanges:function(t){for(var e=t.length;e--;)this.applyToRange(t[e],t);return t},applyToSelection:function(e){var n=t.getSelection(e);n.setRanges(this.applyToRanges(n.getAllRanges()))},undoToRange:function(t,e){var n=this;e=e||[];var i=T(e);t.splitBoundariesPreservingPositions(i),n.removeEmptyElements&&n.removeEmptyContainers(t,i);var s,r,o=m(t),a=o[o.length-1];if(o.length){n.splitAncestorWithClass(t.endContainer,t.endOffset,i),n.splitAncestorWithClass(t.startContainer,t.startOffset,i);for(var l=0,c=o.length;c>l;++l)s=o[l],(r=n.getSelfOrAncestorWithClass(s))&&n.isModifiable(s)&&n.undoToAncestor(r,i);t.setStartAndEnd(o[0],0,a,a.length),n.normalize&&n.postApply(o,t,i,!0),S(e,i)}var u=n.getEmptyElements(t);L(u,function(t){N(t,n.className)})},undoToRanges:function(t){for(var e=t.length;e--;)this.undoToRange(t[e],t);return t},undoToSelection:function(e){var n=t.getSelection(e),i=t.getSelection(e).getAllRanges();this.undoToRanges(i),n.setRanges(i)},isAppliedToRange:function(t){if(t.collapsed||""==t.toString())return!!this.getSelfOrAncestorWithClass(t.commonAncestorContainer);var e=t.getNodes([3]);if(e.length)for(var n,i=0;n=e[i++];)if(!this.isIgnorableWhiteSpaceNode(n)&&g(t,n)&&this.isModifiable(n)&&!this.getSelfOrAncestorWithClass(n))return!1;return!0},isAppliedToRanges:function(t){var e=t.length;if(0==e)return!1;for(;e--;)if(!this.isAppliedToRange(t[e]))return!1;return!0},isAppliedToSelection:function(e){var n=t.getSelection(e);return this.isAppliedToRanges(n.getAllRanges())},toggleRange:function(t){this.isAppliedToRange(t)?this.undoToRange(t):this.applyToRange(t)},toggleSelection:function(t){this.isAppliedToSelection(t)?this.undoToSelection(t):this.applyToSelection(t)},getElementsWithClassIntersectingRange:function(t){var e=[],n=this;return t.getNodes([3],function(t){var i=n.getSelfOrAncestorWithClass(t);i&&!$(e,i)&&e.push(i)}),e},detach:function(){}},D.util={hasClass:E,addClass:O,removeClass:N,hasSameClasses:a,hasAllClasses:l,replaceWithOwnChildren:f,elementsHaveSameNonClassAttributes:v,elementHasNonClassAttributes:y,splitNodeAt:A,isEditableElement:F,isEditingHost:b,isEditable:_},t.CssClassApplier=t.ClassApplier=D,t.createCssClassApplier=t.createClassApplier=P}),t},this),function(t,e){"function"==typeof define&&define.amd?define(["./rangy-core"],t):void 0!==module&&"object"==typeof exports?module.exports=t(require("rangy")):t(e.rangy)}(function(t){return t.createModule("TextRange",["WrappedSelection"],function(t,e){function n(t,e){function n(e,n,i){for(var s=t.slice(e,n),r={isWord:i,chars:s,toString:function(){return s.join("")}},o=0,l=s.length;l>o;++o)s[o].token=r;a.push(r)}for(var i,s,r,o=t.join(""),a=[],l=0;i=e.wordRegex.exec(o);){if(s=i.index,r=s+i[0].length,s>l&&n(l,s,!1),e.includeTrailingSpace)for(;K.test(t[r]);)++r;n(s,r,!0),l=r}return l<t.length&&n(l,t.length,!1),a}function i(t){var e=t||"",n="string"==typeof e?e.split(""):e;return n.sort(function(t,e){return t.charCodeAt(0)-e.charCodeAt(0)}),n.join("").replace(/(.)\1+/g,"$1")}function s(t){var e,n;return t?(e=t.language||X,n={},J(n,ot[e]||ot[X]),J(n,t),n):ot[X]}function r(t,e){var n=W(t,e);return e.hasOwnProperty("wordOptions")&&(n.wordOptions=s(n.wordOptions)),e.hasOwnProperty("characterOptions")&&(n.characterOptions=W(n.characterOptions,st)),n}function o(t,e){var n=pt(t,"display",e),i=t.tagName.toLowerCase();return"block"==n&&it&&ht.hasOwnProperty(i)?ht[i]:n}function a(t){for(var e=h(t),n=0,i=e.length;i>n;++n)if(1==e[n].nodeType&&"none"==o(e[n]))return!0;return!1}function l(t){var e;return 3==t.nodeType&&(e=t.parentNode)&&"hidden"==pt(e,"visibility")}function c(t){return t&&(1==t.nodeType&&!/^(inline(-block|-table)?|none)$/.test(o(t))||9==t.nodeType||11==t.nodeType)}function u(t){return F.isCharacterDataNode(t)||!/^(area|base|basefont|br|col|frame|hr|img|input|isindex|link|meta|param)$/i.test(t.nodeName)}function p(t){for(var e=[];t.parentNode;)e.unshift(t.parentNode),t=t.parentNode;return e}function h(t){return p(t).concat([t])}function d(t){for(;t&&!t.nextSibling;)t=t.parentNode;return t?t.nextSibling:null}function f(t,e){return!e&&t.hasChildNodes()?t.firstChild:d(t)}function g(t){var e=t.previousSibling;if(e){for(t=e;t.hasChildNodes();)t=t.lastChild;return t}var n=t.parentNode;return n&&1==n.nodeType?n:null}function m(t){if(!t||3!=t.nodeType)return!1;var e=t.data;if(""===e)return!0;var n=t.parentNode;if(!n||1!=n.nodeType)return!1;var i=pt(t.parentNode,"whiteSpace");return/^[\t\n\r ]+$/.test(e)&&/^(normal|nowrap)$/.test(i)||/^[\t\r ]+$/.test(e)&&"pre-line"==i}function v(t){return""===t.data||!!m(t)&&(!t.parentNode||!!a(t))}function y(t){var e=t.nodeType;return 7==e||8==e||a(t)||/^(script|style)$/i.test(t.nodeName)||l(t)||v(t)}function b(t,e){var n=t.nodeType;return 7==n||8==n||1==n&&"none"==o(t,e)}function _(){this.store={}}function w(t,e,n){
return function(i){var s=this.cache;if(s.hasOwnProperty(t))return dt++,s[t];ft++;var r=e.call(this,n?this[n]:this,i);return s[t]=r,r}}function k(t,e){this.node=t,this.session=e,this.cache=new _,this.positions=new _}function T(t,e){this.offset=e,this.nodeWrapper=t,this.node=t.node,this.session=t.session,this.cache=new _}function S(){return"[Position("+F.inspectNode(this.node)+":"+this.offset+")]"}function C(){return x(),At=new xt}function A(){return At||C()}function x(){At&&At.detach(),At=null}function j(t,n,i,s){function r(){var t=null;return n?(t=a,l||(a=a.previousVisible(),l=!a||i&&a.equals(i))):l||(t=a=a.nextVisible(),l=!a||i&&a.equals(i)),l&&(a=null),t}i&&(n?y(i.node)&&(i=t.previousVisible()):y(i.node)&&(i=i.nextVisible()));var o,a=t,l=!1,c=!1;return{next:function(){if(c)return c=!1,o;for(var t;t=r();)if(t.getCharacter(s))return o=t,t;return null},rewind:function(){if(!o)throw e.createError("createCharacterIterator: cannot rewind. Only one position can be rewound.");c=!0},dispose:function(){t=i=null}}}function I(t,e,n){function i(t){for(var e,n,i=[],o=t?s:r,a=!1,l=!1;e=o.next();){if(n=e.character,Y.test(n))l&&(l=!1,a=!0);else{if(a){o.rewind();break}l=!0}i.push(e)}return i}var s=j(t,!1,null,e),r=j(t,!0,null,e),o=n.tokenizer,a=i(!0),l=i(!1).reverse(),c=o(l.concat(a),n),u=a.length?c.slice(jt(c,a[0].token)):[],p=l.length?c.slice(0,jt(c,l.pop().token)+1):[];return{nextEndToken:function(){for(var t,e;1==u.length&&!(t=u[0]).isWord&&(e=i(!0)).length>0;)u=o(t.chars.concat(e),n);return u.shift()},previousStartToken:function(){for(var t,e;1==p.length&&!(t=p[0]).isWord&&(e=i(!1)).length>0;)p=o(e.reverse().concat(t.chars),n);return p.pop()},dispose:function(){s.dispose(),r.dispose(),u=p=null}}}function D(t,e,n,i,s){var r,o,a,l,c=0,u=t,p=Math.abs(n);if(0!==n){var h=0>n;switch(e){case U:for(o=j(t,h,null,i);(r=o.next())&&p>c;)++c,u=r;a=r,o.dispose();break;case q:for(var d=I(t,i,s),f=h?d.previousStartToken:d.nextEndToken;(l=f())&&p>c;)l.isWord&&(++c,u=h?l.chars[0]:l.chars[l.chars.length-1]);break;default:throw new Error("movePositionBy: unit '"+e+"' not implemented")}h?(u=u.previousVisible(),c=-c):u&&u.isLeadingSpace&&(e==q&&(o=j(t,!1,null,i),a=o.next(),o.dispose()),a&&(u=a.previousVisible()))}return{position:u,unitsMoved:c}}function P(t,e,n,i){var s=t.getRangeBoundaryPosition(e,!0),r=t.getRangeBoundaryPosition(e,!1);return j(i?r:s,!!i,i?s:r,n)}function E(t,e,n){for(var i,s=[],r=P(t,e,n);i=r.next();)s.push(i);return r.dispose(),s}function O(e,n,i){var s=t.createRange(e.node);return s.setStartAndEnd(e.node,e.offset,n.node,n.offset),!s.expand("word",{wordOptions:i})}function N(t,e,n,i,s){function r(t,e){var n=g[t].previousVisible(),i=g[e-1];return{startPos:n,endPos:i,valid:!s.wholeWordsOnly||O(n,i,s.wordOptions)}}for(var o,a,l,c,u,p,h=Z(s.direction),d=j(t,h,t.session.getRangeBoundaryPosition(i,h),s.characterOptions),f="",g=[],m=null;o=d.next();)if(a=o.character,n||s.caseSensitive||(a=a.toLowerCase()),h?(g.unshift(o),f=a+f):(g.push(o),f+=a),n){if(u=e.exec(f))if(l=u.index,c=l+u[0].length,p){if(!h&&c<f.length||h&&l>0){m=r(l,c);break}}else p=!0}else if(-1!=(l=f.indexOf(e))){m=r(l,l+e.length);break}return p&&(m=r(l,c)),d.dispose(),m}function R(t){return function(){var e=!!At,n=A(),i=[n].concat(B.toArray(arguments)),s=t.apply(this,i);return e||x(),s}}function M(t,e){return R(function(n,i,s,o){typeof s==L&&(s=i,i=U),o=r(o,lt);var a=t;e&&(a=s>=0,this.collapse(!a));var l=D(n.getRangeBoundaryPosition(this,a),i,s,o.characterOptions,o.wordOptions),c=l.position;return this[a?"setStart":"setEnd"](c.node,c.offset),l.unitsMoved})}function $(t){return R(function(e,n){n=W(n,st);for(var i,s=P(e,this,n,!t),r=0;(i=s.next())&&Y.test(i.character);)++r;s.dispose();var o=r>0;return o&&this[t?"moveStart":"moveEnd"]("character",t?r:-r,{characterOptions:n}),o})}function z(t){return R(function(e,n){var i=!1;return this.changeEachRange(function(e){i=e[t](n)||i}),i})}var L="undefined",U="character",q="word",F=t.dom,B=t.util,J=B.extend,W=B.createOptions,H=F.getBody,G=/^[ \t\f\r\n]+$/,V=/^[ \t\f\r]+$/,Y=/^[\t-\r \u0085\u00A0\u1680\u180E\u2000-\u200B\u2028\u2029\u202F\u205F\u3000]+$/,K=/^[\t \u00A0\u1680\u180E\u2000-\u200B\u202F\u205F\u3000]+$/,X="en",Z=t.Selection.isDirectionBackward,Q=!1,tt=!1,et=!1,nt=!0;!function(){var e=document.createElement("div");e.contentEditable="true",e.innerHTML="<p>1 </p><p></p>";var n=H(document),i=e.firstChild,s=t.getSelection();n.appendChild(e),s.collapse(i.lastChild,2),s.setStart(i.firstChild,0),Q=1==(""+s).length,e.innerHTML="1 <br>",s.collapse(e,2),s.setStart(e.firstChild,0),tt=1==(""+s).length,e.innerHTML="1 <p>1</p>",s.collapse(e,2),s.setStart(e.firstChild,0),et=1==(""+s).length,n.removeChild(e),s.removeAllRanges()}();var it,st={includeBlockContentTrailingSpace:!0,includeSpaceBeforeBr:!0,includeSpaceBeforeBlock:!0,includePreLineTrailingSpace:!0,ignoreCharacters:""},rt={includeBlockContentTrailingSpace:!nt,includeSpaceBeforeBr:!tt,includeSpaceBeforeBlock:!et,includePreLineTrailingSpace:!0},ot={en:{wordRegex:/[a-z0-9]+('[a-z0-9]+)*/gi,includeTrailingSpace:!1,tokenizer:n}},at={caseSensitive:!1,withinRange:null,wholeWordsOnly:!1,wrap:!1,direction:"forward",wordOptions:null,characterOptions:null},lt={wordOptions:null,characterOptions:null},ct={wordOptions:null,characterOptions:null,trim:!1,trimStart:!0,trimEnd:!0},ut={wordOptions:null,characterOptions:null,direction:"forward"},pt=F.getComputedStyleProperty;!function(){var t=document.createElement("table"),e=H(document);e.appendChild(t),it="block"==pt(t,"display"),e.removeChild(t)}(),t.features.tableCssDisplayBlock=it;var ht={table:"table",caption:"table-caption",colgroup:"table-column-group",col:"table-column",thead:"table-header-group",tbody:"table-row-group",tfoot:"table-footer-group",tr:"table-row",td:"table-cell",th:"table-cell"};_.prototype={get:function(t){return this.store.hasOwnProperty(t)?this.store[t]:null},set:function(t,e){return this.store[t]=e}};var dt=0,ft=0,gt={getPosition:function(t){var e=this.positions;return e.get(t)||e.set(t,new T(this,t))},toString:function(){return"[NodeWrapper("+F.inspectNode(this.node)+")]"}};k.prototype=gt;var mt="EMPTY",vt="NON_SPACE",yt="UNCOLLAPSIBLE_SPACE",bt="COLLAPSIBLE_SPACE",_t="TRAILING_SPACE_BEFORE_BLOCK",wt="TRAILING_SPACE_IN_BLOCK",kt="TRAILING_SPACE_BEFORE_BR",Tt="PRE_LINE_TRAILING_SPACE_BEFORE_LINE_BREAK",St="TRAILING_LINE_BREAK_AFTER_BR";J(gt,{isCharacterDataNode:w("isCharacterDataNode",F.isCharacterDataNode,"node"),getNodeIndex:w("nodeIndex",F.getNodeIndex,"node"),getLength:w("nodeLength",F.getNodeLength,"node"),containsPositions:w("containsPositions",u,"node"),isWhitespace:w("isWhitespace",m,"node"),isCollapsedWhitespace:w("isCollapsedWhitespace",v,"node"),getComputedDisplay:w("computedDisplay",o,"node"),isCollapsed:w("collapsed",y,"node"),isIgnored:w("ignored",b,"node"),next:w("nextPos",f,"node"),previous:w("previous",g,"node"),getTextNodeInfo:w("textNodeInfo",function(t){var e=null,n=!1,i=pt(t.parentNode,"whiteSpace"),s="pre-line"==i;return s?(e=V,n=!0):("normal"==i||"nowrap"==i)&&(e=G,n=!0),{node:t,text:t.data,spaceRegex:e,collapseSpaces:n,preLine:s}},"node"),hasInnerText:w("hasInnerText",function(t,e){for(var n=this.session,i=n.getPosition(t.parentNode,this.getNodeIndex()+1),s=n.getPosition(t,0),r=e?i:s,o=e?s:i;r!==o;){if(r.prepopulateChar(),r.isDefinitelyNonEmpty())return!0;r=e?r.previousVisible():r.nextVisible()}return!1},"node"),isRenderedBlock:w("isRenderedBlock",function(t){for(var e=t.getElementsByTagName("br"),n=0,i=e.length;i>n;++n)if(!y(e[n]))return!0;return this.hasInnerText()},"node"),getTrailingSpace:w("trailingSpace",function(t){if("br"==t.tagName.toLowerCase())return"";switch(this.getComputedDisplay()){case"inline":for(var e=t.lastChild;e;){if(!b(e))return 1==e.nodeType?this.session.getNodeWrapper(e).getTrailingSpace():"";e=e.previousSibling}break;case"inline-block":case"inline-table":case"none":case"table-column":case"table-column-group":break;case"table-cell":return"\t";default:return this.isRenderedBlock(!0)?"\n":""}return""},"node"),getLeadingSpace:w("leadingSpace",function(){switch(this.getComputedDisplay()){case"inline":case"inline-block":case"inline-table":case"none":case"table-column":case"table-column-group":case"table-cell":break;default:return this.isRenderedBlock(!1)?"\n":""}return""},"node")});var Ct={character:"",characterType:mt,isBr:!1,prepopulateChar:function(){var t=this;if(!t.prepopulatedChar){var e=t.node,n=t.offset,i="",s=mt,r=!1;if(n>0)if(3==e.nodeType){var o=e.data,a=o.charAt(n-1),l=t.nodeWrapper.getTextNodeInfo(),c=l.spaceRegex;l.collapseSpaces?c.test(a)?n>1&&c.test(o.charAt(n-2))||(l.preLine&&"\n"===o.charAt(n)?(i=" ",s=Tt):(i=" ",s=bt)):(i=a,s=vt,r=!0):(i=a,s=yt,r=!0)}else{var u=e.childNodes[n-1];if(u&&1==u.nodeType&&!y(u)&&("br"==u.tagName.toLowerCase()?(i="\n",t.isBr=!0,s=bt,r=!1):t.checkForTrailingSpace=!0),!i){var p=e.childNodes[n];p&&1==p.nodeType&&!y(p)&&(t.checkForLeadingSpace=!0)}}t.prepopulatedChar=!0,t.character=i,t.characterType=s,t.isCharInvariant=r}},isDefinitelyNonEmpty:function(){var t=this.characterType;return t==vt||t==yt},resolveLeadingAndTrailingSpaces:function(){if(this.prepopulatedChar||this.prepopulateChar(),this.checkForTrailingSpace){var t=this.session.getNodeWrapper(this.node.childNodes[this.offset-1]).getTrailingSpace();t&&(this.isTrailingSpace=!0,this.character=t,this.characterType=bt),this.checkForTrailingSpace=!1}if(this.checkForLeadingSpace){var e=this.session.getNodeWrapper(this.node.childNodes[this.offset]).getLeadingSpace();e&&(this.isLeadingSpace=!0,this.character=e,this.characterType=bt),this.checkForLeadingSpace=!1}},getPrecedingUncollapsedPosition:function(t){for(var e=this;e=e.previousVisible();)if(""!==e.getCharacter(t))return e;return null},getCharacter:function(t){function e(){return h||(c=d.getPrecedingUncollapsedPosition(t),h=!0),c}this.resolveLeadingAndTrailingSpaces();var n=this.character,s=i(t.ignoreCharacters),r=""!==n&&s.indexOf(n)>-1;if(this.isCharInvariant)return r?"":n;var o=["character",t.includeSpaceBeforeBr,t.includeBlockContentTrailingSpace,t.includePreLineTrailingSpace,s].join("_"),a=this.cache.get(o);if(null!==a)return a;var l,c,u="",p=this.characterType==bt,h=!1,d=this;return p?(" "!=n||e()&&!c.isTrailingSpace&&"\n"!=c.character)&&("\n"==n&&this.isLeadingSpace?e()&&"\n"!=c.character&&(u="\n"):(l=this.nextUncollapsed())&&(l.isBr?this.type=kt:l.isTrailingSpace&&"\n"==l.character?this.type=wt:l.isLeadingSpace&&"\n"==l.character&&(this.type=_t),"\n"==l.character?(this.type!=kt||t.includeSpaceBeforeBr)&&(this.type!=_t||t.includeSpaceBeforeBlock)&&(this.type==wt&&l.isTrailingSpace&&!t.includeBlockContentTrailingSpace||(this.type!=Tt||l.type!=vt||t.includePreLineTrailingSpace)&&("\n"==n?l.isTrailingSpace?this.isTrailingSpace||this.isBr&&(l.type=St,e()&&c.isLeadingSpace&&"\n"==c.character&&(l.character="")):u="\n":" "==n&&(u=" "))):u=n)):"\n"==n&&(!(l=this.nextUncollapsed())||l.isTrailingSpace),s.indexOf(u)>-1&&(u=""),this.cache.set(o,u),u},equals:function(t){return!!t&&this.node===t.node&&this.offset===t.offset},inspect:S,toString:function(){return this.character}};T.prototype=Ct,J(Ct,{next:w("nextPos",function(t){var e=t.nodeWrapper,n=t.node,i=t.offset,s=e.session;if(!n)return null;var r,o,a;return i==e.getLength()?(r=n.parentNode,o=r?e.getNodeIndex()+1:0):e.isCharacterDataNode()?(r=n,o=i+1):(a=n.childNodes[i],s.getNodeWrapper(a).containsPositions()?(r=a,o=0):(r=n,o=i+1)),r?s.getPosition(r,o):null}),previous:w("previous",function(t){var e,n,i,s=t.nodeWrapper,r=t.node,o=t.offset,a=s.session;return 0==o?(e=r.parentNode,n=e?s.getNodeIndex():0):s.isCharacterDataNode()?(e=r,n=o-1):(i=r.childNodes[o-1],a.getNodeWrapper(i).containsPositions()?(e=i,n=F.getNodeLength(i)):(e=r,n=o-1)),e?a.getPosition(e,n):null}),nextVisible:w("nextVisible",function(t){var e=t.next();if(!e)return null;var n=e.nodeWrapper,i=e.node,s=e;return n.isCollapsed()&&(s=n.session.getPosition(i.parentNode,n.getNodeIndex()+1)),s}),nextUncollapsed:w("nextUncollapsed",function(t){for(var e=t;e=e.nextVisible();)if(e.resolveLeadingAndTrailingSpaces(),""!==e.character)return e;return null}),previousVisible:w("previousVisible",function(t){var e=t.previous();if(!e)return null;var n=e.nodeWrapper,i=e.node,s=e;return n.isCollapsed()&&(s=n.session.getPosition(i.parentNode,n.getNodeIndex())),s})});var At=null,xt=function(){function t(t){var e=new _;return{get:function(n){var i=e.get(n[t]);if(i)for(var s,r=0;s=i[r++];)if(s.node===n)return s;return null},set:function(n){var i=n.node[t];(e.get(i)||e.set(i,[])).push(n)}}}function e(){this.initCaches()}var n=B.isHostProperty(document.documentElement,"uniqueID");return e.prototype={initCaches:function(){this.elementCache=n?function(){var t=new _;return{get:function(e){return t.get(e.uniqueID)},set:function(e){t.set(e.node.uniqueID,e)}}}():t("tagName"),this.textNodeCache=t("data"),this.otherNodeCache=t("nodeName")},getNodeWrapper:function(t){var e;switch(t.nodeType){case 1:e=this.elementCache;break;case 3:e=this.textNodeCache;break;default:e=this.otherNodeCache}var n=e.get(t);return n||(n=new k(t,this),e.set(n)),n},getPosition:function(t,e){return this.getNodeWrapper(t).getPosition(e)},getRangeBoundaryPosition:function(t,e){var n=e?"start":"end";return this.getPosition(t[n+"Container"],t[n+"Offset"])},detach:function(){this.elementCache=this.textNodeCache=this.otherNodeCache=null}},e}();J(F,{nextNode:f,previousNode:g});var jt=Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var n=0,i=t.length;i>n;++n)if(t[n]===e)return n;return-1};J(t.rangePrototype,{moveStart:M(!0,!1),moveEnd:M(!1,!1),move:M(!0,!0),trimStart:$(!0),trimEnd:$(!1),trim:R(function(t,e){var n=this.trimStart(e),i=this.trimEnd(e);return n||i}),expand:R(function(t,e,n){var i=!1;n=r(n,ct);var s=n.characterOptions;if(e||(e=U),e==q){var o,a,l=n.wordOptions,c=t.getRangeBoundaryPosition(this,!0),u=t.getRangeBoundaryPosition(this,!1),p=I(c,s,l),h=p.nextEndToken(),d=h.chars[0].previousVisible();if(this.collapsed)o=h;else{o=I(u,s,l).previousStartToken()}return a=o.chars[o.chars.length-1],d.equals(c)||(this.setStart(d.node,d.offset),i=!0),a&&!a.equals(u)&&(this.setEnd(a.node,a.offset),i=!0),n.trim&&(n.trimStart&&(i=this.trimStart(s)||i),n.trimEnd&&(i=this.trimEnd(s)||i)),i}return this.moveEnd(U,1,n)}),text:R(function(t,e){return this.collapsed?"":E(t,this,W(e,st)).join("")}),selectCharacters:R(function(t,e,n,i,s){var r={characterOptions:s};e||(e=H(this.getDocument())),this.selectNodeContents(e),this.collapse(!0),this.moveStart("character",n,r),this.collapse(!0),this.moveEnd("character",i-n,r)}),toCharacterRange:R(function(t,e,n){e||(e=H(this.getDocument()));var i,s,r=e.parentNode,o=F.getNodeIndex(e),a=-1==F.comparePoints(this.startContainer,this.endContainer,r,o),l=this.cloneRange();return a?(l.setStartAndEnd(this.startContainer,this.startOffset,r,o),i=-l.text(n).length):(l.setStartAndEnd(r,o,this.startContainer,this.startOffset),i=l.text(n).length),s=i+this.text(n).length,{start:i,end:s}}),findText:R(function(e,n,i){i=r(i,at),i.wholeWordsOnly&&(i.wordOptions.includeTrailingSpace=!1);var s=Z(i.direction),o=i.withinRange;o||(o=t.createRange(),o.selectNodeContents(this.getDocument()));var a=n,l=!1;"string"==typeof a?i.caseSensitive||(a=a.toLowerCase()):l=!0;var c=e.getRangeBoundaryPosition(this,!s),u=o.comparePoint(c.node,c.offset);-1===u?c=e.getRangeBoundaryPosition(o,!0):1===u&&(c=e.getRangeBoundaryPosition(o,!1));for(var p,h=c,d=!1;;)if(p=N(h,a,l,o,i)){if(p.valid)return this.setStartAndEnd(p.startPos.node,p.startPos.offset,p.endPos.node,p.endPos.offset),!0;h=s?p.startPos:p.endPos}else{if(!i.wrap||d)return!1;o=o.cloneRange(),h=e.getRangeBoundaryPosition(o,!s),o.setBoundary(c.node,c.offset,s),d=!0}}),pasteHtml:function(t){if(this.deleteContents(),t){var e=this.createContextualFragment(t),n=e.lastChild;this.insertNode(e),this.collapseAfter(n)}}}),J(t.selectionPrototype,{expand:R(function(t,e,n){this.changeEachRange(function(t){t.expand(e,n)})}),move:R(function(t,e,n,i){var s=0;if(this.focusNode){this.collapse(this.focusNode,this.focusOffset);var r=this.getRangeAt(0);i||(i={}),i.characterOptions=W(i.characterOptions,rt),s=r.move(e,n,i),this.setSingleRange(r)}return s}),trimStart:z("trimStart"),trimEnd:z("trimEnd"),trim:z("trim"),selectCharacters:R(function(e,n,i,s,r,o){var a=t.createRange(n);a.selectCharacters(n,i,s,o),this.setSingleRange(a,r)}),saveCharacterRanges:R(function(t,e,n){for(var i=this.getAllRanges(),s=i.length,r=[],o=1==s&&this.isBackward(),a=0,l=i.length;l>a;++a)r[a]={characterRange:i[a].toCharacterRange(e,n),backward:o,characterOptions:n};return r}),restoreCharacterRanges:R(function(e,n,i){this.removeAllRanges();for(var s,r,o,a=0,l=i.length;l>a;++a)r=i[a],o=r.characterRange,s=t.createRange(n),s.selectCharacters(n,o.start,o.end,r.characterOptions),this.addRange(s,r.backward)}),text:R(function(t,e){for(var n=[],i=0,s=this.rangeCount;s>i;++i)n[i]=this.getRangeAt(i).text(e);return n.join("")})}),t.innerText=function(e,n){var i=t.createRange(e);return i.selectNodeContents(e),i.text(n)},t.createWordIterator=function(t,e,n){var i=A();n=r(n,ut);var s=i.getPosition(t,e),o=I(s,n.characterOptions,n.wordOptions),a=Z(n.direction);return{next:function(){return a?o.previousStartToken():o.nextEndToken()},dispose:function(){o.dispose(),this.next=function(){}}}},t.noMutation=function(t){t(A()),x()},t.noMutation.createEntryPointFunction=R,t.textRange={isBlockNode:c,isCollapsedWhitespaceNode:v,createPosition:R(function(t,e,n){return t.getPosition(e,n)})}}),t},this),function(t,e){"function"==typeof define&&define.amd?define(["./rangy-core"],t):void 0!==module&&"object"==typeof exports?module.exports=t(require("rangy")):t(e.rangy)}(function(t){return t.createModule("Highlighter",["ClassApplier"],function(t){function e(t,e){return t.characterRange.start-e.characterRange.start}function n(t,e){this.type=t,this.converterCreator=e}function i(t,e){f[t]=new n(t,e)}function s(t){var e=f[t];if(e instanceof n)return e.create();throw new Error("Highlighter type '"+t+"' is not valid")}function r(t,e){this.start=t,this.end=e}function o(t,e,n,i,s,r){s?(this.id=s,d=Math.max(d,s+1)):this.id=d++,this.characterRange=e,this.doc=t,this.classApplier=n,this.converter=i,this.containerElementId=r||null,this.applied=!1}function a(t,e){e=e||"textContent",this.doc=t||document,this.classAppliers={},this.highlights=[],this.converter=s(e)}var l=t.dom,c=l.arrayContains,u=l.getBody,p=t.util.createOptions,h=t.util.forEach,d=1,f={};n.prototype.create=function(){var t=this.converterCreator();return t.type=this.type,t},t.registerHighlighterType=i,r.prototype={intersects:function(t){return this.start<t.end&&this.end>t.start},isContiguousWith:function(t){return this.start==t.end||this.end==t.start},union:function(t){return new r(Math.min(this.start,t.start),Math.max(this.end,t.end))},intersection:function(t){return new r(Math.max(this.start,t.start),Math.min(this.end,t.end))},getComplements:function(t){var e=[];if(this.start>=t.start){if(this.end<=t.end)return[];e.push(new r(t.end,this.end))}else e.push(new r(this.start,Math.min(this.end,t.start))),this.end>t.end&&e.push(new r(t.end,this.end));return e},toString:function(){return"[CharacterRange("+this.start+", "+this.end+")]"}},r.fromCharacterRange=function(t){return new r(t.start,t.end)};var g={rangeToCharacterRange:function(t,e){var n=t.getBookmark(e);return new r(n.start,n.end)},characterRangeToRange:function(e,n,i){var s=t.createRange(e);return s.moveToBookmark({start:n.start,end:n.end,containerNode:i}),s},serializeSelection:function(t,e){for(var n=t.getAllRanges(),i=n.length,s=[],r=1==i&&t.isBackward(),o=0,a=n.length;a>o;++o)s[o]={characterRange:this.rangeToCharacterRange(n[o],e),backward:r};return s},restoreSelection:function(t,e,n){t.removeAllRanges();for(var i,s,r=t.win.document,o=0,a=e.length;a>o;++o)s=e[o],s.characterRange,i=this.characterRangeToRange(r,s.characterRange,n),t.addRange(i,s.backward)}};i("textContent",function(){return g}),i("TextRange",function(){var e;return function(){if(!e){var n=t.modules.TextRange;if(!n)throw new Error("TextRange module is missing.");if(!n.supported)throw new Error("TextRange module is present but not supported.");e={rangeToCharacterRange:function(t,e){return r.fromCharacterRange(t.toCharacterRange(e))},characterRangeToRange:function(e,n,i){var s=t.createRange(e);return s.selectCharacters(i,n.start,n.end),s},serializeSelection:function(t,e){return t.saveCharacterRanges(e)},restoreSelection:function(t,e,n){t.restoreCharacterRanges(n,e)}}}return e}}()),o.prototype={getContainerElement:function(){return this.containerElementId?this.doc.getElementById(this.containerElementId):u(this.doc)},getRange:function(){return this.converter.characterRangeToRange(this.doc,this.characterRange,this.getContainerElement())},fromRange:function(t){this.characterRange=this.converter.rangeToCharacterRange(t,this.getContainerElement())},getText:function(){return this.getRange().toString()},containsElement:function(t){return this.getRange().containsNodeContents(t.firstChild)},unapply:function(){this.classApplier.undoToRange(this.getRange()),this.applied=!1},apply:function(){this.classApplier.applyToRange(this.getRange()),this.applied=!0},getHighlightElements:function(){return this.classApplier.getElementsWithClassIntersectingRange(this.getRange())},toString:function(){return"[Highlight(ID: "+this.id+", class: "+this.classApplier.className+", character range: "+this.characterRange.start+" - "+this.characterRange.end+")]"}},a.prototype={addClassApplier:function(t){this.classAppliers[t.className]=t},getHighlightForElement:function(t){for(var e=this.highlights,n=0,i=e.length;i>n;++n)if(e[n].containsElement(t))return e[n];return null},removeHighlights:function(t){for(var e,n=0,i=this.highlights.length;i>n;++n)e=this.highlights[n],c(t,e)&&(e.unapply(),this.highlights.splice(n--,1))},removeAllHighlights:function(){this.removeHighlights(this.highlights)},getIntersectingHighlights:function(t){var e=[],n=this.highlights;return h(t,function(t){h(n,function(n){t.intersectsRange(n.getRange())&&!c(e,n)&&e.push(n)})}),e},highlightCharacterRanges:function(e,n,i){var s,a,l,c=this.highlights,u=this.converter,d=this.doc,f=[],g=e?this.classAppliers[e]:null;i=p(i,{containerElementId:null,exclusive:!0});var m,v,y,b=i.containerElementId,_=i.exclusive;b&&(m=this.doc.getElementById(b))&&(v=t.createRange(this.doc),v.selectNodeContents(m),y=new r(0,v.toString().length));var w,k,T,S,C,A;for(s=0,a=n.length;a>s;++s)if(w=n[s],C=[],y&&(w=w.intersection(y)),w.start!=w.end){for(l=0;l<c.length;++l)T=!1,b==c[l].containerElementId&&(k=c[l].characterRange,S=g==c[l].classApplier,A=!S&&_,(k.intersects(w)||k.isContiguousWith(w))&&(S||A)&&(A&&h(k.getComplements(w),function(t){C.push(new o(d,t,c[l].classApplier,u,null,b))}),T=!0,S&&(w=k.union(w)))),T?(f.push(c[l]),c[l]=new o(d,k.union(w),g,u,null,b)):C.push(c[l]);g&&C.push(new o(d,w,g,u,null,b)),this.highlights=c=C}h(f,function(t){t.unapply()});var x=[];return h(c,function(t){t.applied||(t.apply(),x.push(t))}),x},highlightRanges:function(e,n,i){var s=[],r=this.converter;i=p(i,{containerElement:null,exclusive:!0});var o,a=i.containerElement,l=a?a.id:null;return a&&(o=t.createRange(a),o.selectNodeContents(a)),h(n,function(t){var e=a?o.intersection(t):t;s.push(r.rangeToCharacterRange(e,a||u(t.getDocument())))}),this.highlightCharacterRanges(e,s,{containerElementId:l,exclusive:i.exclusive})},highlightSelection:function(e,n){var i=this.converter,s=!!e&&this.classAppliers[e];n=p(n,{containerElementId:null,selection:t.getSelection(),exclusive:!0});var o=n.containerElementId,a=n.exclusive,l=n.selection,c=l.win.document,d=o?c.getElementById(o):u(c);if(!s&&!1!==e)throw new Error("No class applier found for class '"+e+"'");var f=i.serializeSelection(l,d),g=[];h(f,function(t){g.push(r.fromCharacterRange(t.characterRange))});var m=this.highlightCharacterRanges(e,g,{containerElementId:o,exclusive:a});return i.restoreSelection(l,f,d),m},unhighlightSelection:function(e){e=e||t.getSelection();var n=this.getIntersectingHighlights(e.getAllRanges());return this.removeHighlights(n),e.removeAllRanges(),n},getHighlightsInSelection:function(e){return e=e||t.getSelection(),this.getIntersectingHighlights(e.getAllRanges())},selectionOverlapsHighlight:function(t){return this.getHighlightsInSelection(t).length>0},serialize:function(t){var n=this.highlights;n.sort(e);var i=["type:"+this.converter.type];return t=p(t,{serializeHighlightText:!1}),h(n,function(e){var n=e.characterRange,s=[n.start,n.end,e.id,e.classApplier.className,e.containerElementId];t.serializeHighlightText&&s.push(e.getText()),i.push(s.join("$"))}),i.join("|")},deserialize:function(t){var e,n,i,a=t.split("|"),l=[],c=a[0],p=!1;if(!c||!(e=/^type:(\w+)$/.exec(c)))throw new Error("Serialized highlights are invalid.");n=e[1],n!=this.converter.type&&(i=s(n),p=!0),a.shift();for(var h,d,f,g,m,v,y=a.length;y-- >0;){if(v=a[y].split("$"),f=new r(+v[0],+v[1]),g=v[4]||null,m=g?this.doc.getElementById(g):u(this.doc),p&&(f=this.converter.rangeToCharacterRange(i.characterRangeToRange(this.doc,f,m),m)),!(h=this.classAppliers[v[3]]))throw new Error("No class applier found for class '"+v[3]+"'");d=new o(this.doc,f,h,this.converter,parseInt(v[2]),g),d.apply(),l.push(d)}this.highlights=l}},t.Highlighter=a,t.createHighlighter=function(t,e){return new a(t,e)}}),t},this),window.linkify=function(){var t="[a-z\\d.-]+://",e="(?:(?:[0-9]|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.){3}(?:[0-9]|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])",n="(?:(?:[^\\s!@#$%^&*()_=+[\\]{}\\\\|;:'\",.<>/?]+)\\.)+",i="(?:ac|ad|aero|ae|af|ag|ai|al|am|an|ao|aq|arpa|ar|asia|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|biz|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|cat|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|coop|com|co|cr|cu|cv|cx|cy|cz|de|dj|dk|dm|do|dz|ec|edu|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gov|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|info|int|in|io|iq|ir|is|it|je|jm|jobs|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mil|mk|ml|mm|mn|mobi|mo|mp|mq|mr|ms|mt|museum|mu|mv|mw|mx|my|mz|name|na|nc|net|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|org|pa|pe|pf|pg|ph|pk|pl|pm|pn|pro|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sy|sz|tc|td|tel|tf|tg|th|tj|tk|tl|tm|tn|to|tp|travel|tr|tt|tv|tw|tz|ua|ug|uk|um|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|xn--0zwm56d|xn--11b5bs3a9aj6g|xn--80akhbyknj4f|xn--9t4b11yi5a|xn--deba0ad|xn--g6w251d|xn--hgbk6aj7f53bba|xn--hlcj6aya9esc7a|xn--jxalpdlp|xn--kgbechtv|xn--zckzah|ye|yt|yu|za|zm|zw)",s="(?:"+n+i+"|"+e+")",r="(?:[;/][^#?<>\\s]*)?",o="(?:\\?[^#<>\\s]*)?(?:#[^<>\\s]*)?",a="\\b"+t+"[^<>\\s]+",l="\\b"+s+r+o+"(?!\\w)",c="mailto:",u="(?:"+c+")?[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@"+s+o+"(?!\\w)",p=new RegExp("(?:"+a+"|"+l+"|"+u+")","ig"),h=new RegExp("^"+t,"i"),d={"'":"`",">":"<",")":"(","]":"[","}":"{","\xbb":"\xab","\u203a":"\u2039"},f={callback:function(t,e){return e?'<a href="'+e+'" title="'+e+'" target="_blank">'+t+"</a>":t},punct_regexp:/(?:[!?.,:;'"]|(?:&|&amp;)(?:lt|gt|quot|apos|raquo|laquo|rsaquo|lsaquo);)$/};return function(t,e){e=e||{},t=t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;");var n,i,s,r,o,a,l,u,g,m,v,y,b="",_=[];for(i in f)e[i]===undefined&&(e[i]=f[i]);for(;n=p.exec(t);)if(s=n[0],a=p.lastIndex,l=a-s.length,!/[\/:]/.test(t.charAt(l-1))){do{u=s,y=s.substr(-1),v=d[y],v&&(g=s.match(new RegExp("\\"+v+"(?!$)","g")),m=s.match(new RegExp("\\"+y,"g")),(g?g.length:0)<(m?m.length:0)&&(s=s.substr(0,s.length-1),a--)),e.punct_regexp&&(s=s.replace(e.punct_regexp,function(t){return a-=t.length,""}))}while(s.length&&s!==u);r=s,h.test(r)||(r=(-1!==r.indexOf("@")?r.indexOf(c)?c:"":r.indexOf("irc.")?r.indexOf("ftp.")?"http://":"ftp://":"irc://")+r),o!=l&&(_.push([t.slice(o,l)]),o=a),r&&r.substr&&"mailto:"!=r.substr(0,7)?_.push([s,r]):_.push([s,undefined])}for(_.push([t.substr(o)]),i=0;i<_.length;i++)b+=e.callback.apply(window,_[i]);return b||t}}(),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=global.window&&global.window.$?t(global.window.$):function(e){if(!e.$&&!e.fn)throw new Error("Tokenfield requires a window object with jQuery or a jQuery instance");return t(e.$||e)}:t(jQuery,window)}(function(t,e){"use strict";var n=function(n,i){var s=this;this.$element=t(n),this.textDirection=this.$element.css("direction"),this.options=t.extend(!0,{},t.fn.tokenfield.defaults,{tokens:this.$element.val()},this.$element.data(),i),this._delimiters="string"==typeof this.options.delimiter?[this.options.delimiter]:this.options.delimiter,this._triggerKeys=t.map(this._delimiters,function(t){return t.charCodeAt(0)}),this._firstDelimiter=this._delimiters[0];var r=t.inArray(" ",this._delimiters),o=t.inArray("-",this._delimiters);r>=0&&(this._delimiters[r]="\\s"),o>=0&&(delete this._delimiters[o],this._delimiters.unshift("-"));var a=["\\","$","[","{","^",".","|","?","*","+","(",")"];t.each(this._delimiters,function(e,n){t.inArray(n,a)>=0&&(s._delimiters[e]="\\"+n)});var l,c=e&&"function"==typeof e.getMatchedCSSRules?e.getMatchedCSSRules(n):null,u=n.style.width,p=this.$element.width();c&&t.each(c,function(t,e){e.style.width&&(l=e.style.width)});var h="rtl"===t("body").css("direction")?"right":"left",d={position:this.$element.css("position")};d[h]=this.$element.css(h),this.$element.data("original-styles",d).data("original-tabindex",this.$element.prop("tabindex")).css("position","absolute").css(h,"-10000px").prop("tabindex",-1),this.$wrapper=t('<div class="tokenfield form-control" />'),this.$element.hasClass("input-lg")&&this.$wrapper.addClass("input-lg"),this.$element.hasClass("input-sm")&&this.$wrapper.addClass("input-sm"),"rtl"===this.textDirection&&this.$wrapper.addClass("rtl");var f=this.$element.prop("id")||(new Date).getTime()+""+Math.floor(100*(1+Math.random()));this.$input=t('<input type="'+this.options.inputType+'" class="token-input" autocomplete="off" />').appendTo(this.$wrapper).prop("placeholder",this.$element.prop("placeholder")).prop("id",f+"-tokenfield").prop("tabindex",this.$element.data("original-tabindex"));var g=t('label[for="'+this.$element.prop("id")+'"]');if(g.length&&g.prop("for",this.$input.prop("id")),this.$copyHelper=t('<input type="text" />').css("position","absolute").css(h,"-10000px").prop("tabindex",-1).prependTo(this.$wrapper),u?this.$wrapper.css("width",u):l?this.$wrapper.css("width",l):this.$element.parents(".form-inline").length&&this.$wrapper.width(p),(this.$element.prop("disabled")||this.$element.parents("fieldset[disabled]").length)&&this.disable(),this.$element.prop("readonly")&&this.readonly(),this.$mirror=t('<span style="position:absolute; top:-999px; left:0; white-space:pre;"/>'),this.$input.css("min-width",this.options.minWidth+"px"),t.each(["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent"],function(t,e){s.$mirror[0].style[e]=s.$input.css(e)}),this.$mirror.appendTo("body"),this.$wrapper.insertBefore(this.$element),this.$element.prependTo(this.$wrapper),this.update(),this.setTokens(this.options.tokens,!1,!this.$element.val()&&this.options.tokens),this.listen(),!t.isEmptyObject(this.options.autocomplete)){var m="rtl"===this.textDirection?"right":"left",v=t.extend({minLength:this.options.showAutocompleteOnFocus?0:null,position:{my:m+" top",at:m+" bottom",of:this.$wrapper}},this.options.autocomplete);this.$input.autocomplete(v)}if(!t.isEmptyObject(this.options.typeahead)){var y=this.options.typeahead,b={minLength:this.options.showAutocompleteOnFocus?0:null},_=t.isArray(y)?y:[y,y];_[0]=t.extend({},b,_[0]),this.$input.typeahead.apply(this.$input,_),this.typeahead=!0}};n.prototype={constructor:n,createToken:function(e,n){var i=this;if(e="string"==typeof e?{value:e,label:e}:t.extend({},e),void 0===n&&(n=!0),e.value=t.trim(e.value.toString()),e.label=e.label&&e.label.length?t.trim(e.label):e.value,e.value.length&&e.label.length&&!(e.label.length<=this.options.minLength)&&!(this.options.limit&&this.getTokens().length>=this.options.limit)){var s=t.Event("tokenfield:createtoken",{attrs:e});if(this.$element.trigger(s),s.attrs&&!s.isDefaultPrevented()){var r=t('<div class="token" />').append('<span class="token-label" />').append('<a href="#" class="close" tabindex="-1">&times;</a>').data("attrs",e);this.$input.hasClass("tt-input")?this.$input.parent().before(r):this.$input.before(r),this.$input.css("width",this.options.minWidth+"px");var o=r.find(".token-label"),a=r.find(".close");this.options.html?o.html(e.label):o.text(e.label),r.on("mousedown",function(){if(i._disabled||i._readonly)return!1;i.preventDeactivation=!0}).on("click",function(t){return!i._disabled&&!i._readonly&&(i.preventDeactivation=!1,
t.ctrlKey||t.metaKey?(t.preventDefault(),i.toggle(r)):void i.activate(r,t.shiftKey,t.shiftKey))}).on("dblclick",function(){if(i._disabled||i._readonly||!i.options.allowEditing)return!1;i.edit(r)}),a.on("click",t.proxy(this.remove,this)),this.$element.trigger(t.Event("tokenfield:createdtoken",{attrs:e,relatedTarget:r.get(0)})),n&&this.$element.val(this.getTokensList()).trigger(t.Event("change",{initiator:"tokenfield"}));var i=this;return setTimeout(function(){i.update()},0),this.$element.get(0)}}},setTokens:function(e,n,i){if(n||this.$wrapper.find(".token").remove(),e){void 0===i&&(i=!0),"string"==typeof e&&(e=this._delimiters.length?e.split(new RegExp("["+this._delimiters.join("")+"]")):[e]);var s=this;return t.each(e,function(t,e){s.createToken(e,i)}),this.$element.get(0)}},getTokenData:function(e){var n=e.map(function(){return t(this).data("attrs")}).get();return 1==n.length&&(n=n[0]),n},getTokens:function(e){var n=this,i=[],s=e?".active":"";return this.$wrapper.find(".token"+s).each(function(){i.push(n.getTokenData(t(this)))}),i},getTokensList:function(e,n,i){e=e||this._firstDelimiter,n=void 0!==n&&null!==n?n:this.options.beautify;var s=e+(n&&" "!==e?" ":"");return t.map(this.getTokens(i),function(t){return t.value}).join(s)},getInput:function(){return this.$input.val()},setInput:function(t){this.$input.hasClass("tt-input")?this.$input.typeahead("val",t):this.$input.val(t)},listen:function(){var n=this;this.$element.on("change",t.proxy(this.change,this)),this.$wrapper.on("mousedown",t.proxy(this.focusInput,this)),this.$input.on("focus",t.proxy(this.focus,this)).on("blur",t.proxy(this.blur,this)).on("paste",t.proxy(this.paste,this)).on("keydown",t.proxy(this.keydown,this)).on("keypress",t.proxy(this.keypress,this)).on("keyup",t.proxy(this.keyup,this)),this.$copyHelper.on("focus",t.proxy(this.focus,this)).on("blur",t.proxy(this.blur,this)).on("keydown",t.proxy(this.keydown,this)).on("keyup",t.proxy(this.keyup,this)),this.$input.on("keypress",t.proxy(this.update,this)).on("keyup",t.proxy(this.update,this)),this.$input.on("autocompletecreate",function(){var e=t(this).data("ui-autocomplete").menu.element,i=n.$wrapper.outerWidth()-parseInt(e.css("border-left-width"),10)-parseInt(e.css("border-right-width"),10);e.css("min-width",i+"px")}).on("autocompleteselect",function(t,e){return n.createToken(e.item)&&(n.$input.val(""),n.$input.data("edit")&&n.unedit(!0)),!1}).on("typeahead:selected typeahead:autocompleted",function(t,e){n.createToken(e)&&(n.$input.typeahead("val",""),n.$input.data("edit")&&n.unedit(!0))}),t(e).on("resize",t.proxy(this.update,this))},keydown:function(e){function n(t){if(s.$input.is(document.activeElement)){if(s.$input.val().length>0)return;t+="All";var n=s.$input.hasClass("tt-input")?s.$input.parent()[t](".token:first"):s.$input[t](".token:first");if(!n.length)return;s.preventInputFocus=!0,s.preventDeactivation=!0,s.activate(n),e.preventDefault()}else s[t](e.shiftKey),e.preventDefault()}function i(n){if(e.shiftKey){if(s.$input.is(document.activeElement)){if(s.$input.val().length>0)return;var i=s.$input.hasClass("tt-input")?s.$input.parent()[n+"All"](".token:first"):s.$input[n+"All"](".token:first");if(!i.length)return;s.activate(i)}var r="prev"===n?"next":"prev",o="prev"===n?"first":"last";s.$firstActiveToken[r+"All"](".token").each(function(){s.deactivate(t(this))}),s.activate(s.$wrapper.find(".token:"+o),!0,!0),e.preventDefault()}}if(this.focused){var s=this;switch(e.keyCode){case 8:if(!this.$input.is(document.activeElement))break;this.lastInputValue=this.$input.val();break;case 37:n("rtl"===this.textDirection?"next":"prev");break;case 38:i("prev");break;case 39:n("rtl"===this.textDirection?"prev":"next");break;case 40:i("next");break;case 65:if(this.$input.val().length>0||!e.ctrlKey&&!e.metaKey)break;this.activateAll(),e.preventDefault();break;case 9:case 13:if(this.$input.data("ui-autocomplete")&&this.$input.data("ui-autocomplete").menu.element.find("li:has(a.ui-state-focus), li.ui-state-focus").length)break;if(this.$input.hasClass("tt-input")&&this.$wrapper.find(".tt-cursor").length)break;if(this.$input.hasClass("tt-input")&&this.$wrapper.find(".tt-hint").val()&&this.$wrapper.find(".tt-hint").val().length)break;if(this.$input.is(document.activeElement)&&this.$input.val().length||this.$input.data("edit"))return this.createTokensFromInput(e,this.$input.data("edit"));if(13===e.keyCode){if(!this.$copyHelper.is(document.activeElement)||1!==this.$wrapper.find(".token.active").length)break;if(!s.options.allowEditing)break;this.edit(this.$wrapper.find(".token.active"))}}this.lastKeyDown=e.keyCode}},keypress:function(e){if(-1!==t.inArray(e.which,this._triggerKeys)&&this.$input.is(document.activeElement))return this.$input.val()&&this.createTokensFromInput(e),!1},keyup:function(t){if(this.preventInputFocus=!1,this.focused){switch(t.keyCode){case 8:if(this.$input.is(document.activeElement)){if(this.$input.val().length||this.lastInputValue.length&&8===this.lastKeyDown)break;this.preventDeactivation=!0;var e=this.$input.hasClass("tt-input")?this.$input.parent().prevAll(".token:first"):this.$input.prevAll(".token:first");if(!e.length)break;this.activate(e)}else this.remove(t);break;case 46:this.remove(t,"next")}this.lastKeyUp=t.keyCode}},focus:function(){this.focused=!0,this.$wrapper.addClass("focus"),this.$input.is(document.activeElement)&&(this.$wrapper.find(".active").removeClass("active"),this.$firstActiveToken=null,this.options.showAutocompleteOnFocus&&this.search())},blur:function(t){this.focused=!1,this.$wrapper.removeClass("focus"),this.preventDeactivation||this.$element.is(document.activeElement)||(this.$wrapper.find(".active").removeClass("active"),this.$firstActiveToken=null),!this.preventCreateTokens&&(this.$input.data("edit")&&!this.$input.is(document.activeElement)||this.options.createTokensOnBlur)&&this.createTokensFromInput(t),this.preventDeactivation=!1,this.preventCreateTokens=!1},paste:function(t){var e=this;e.options.allowPasting&&setTimeout(function(){e.createTokensFromInput(t)},1)},change:function(t){"tokenfield"!==t.initiator&&this.setTokens(this.$element.val())},createTokensFromInput:function(t,e){if(!(this.$input.val().length<this.options.minLength)){var n=this.getTokensList();return this.setTokens(this.$input.val(),!0),n==this.getTokensList()&&this.$input.val().length?!1:(this.setInput(""),this.$input.data("edit")&&this.unedit(e),!1)}},next:function(t){if(t){var e=this.$wrapper.find(".active:first");if(!(!e||!this.$firstActiveToken)&&e.index()<this.$firstActiveToken.index())return this.deactivate(e)}var n=this.$wrapper.find(".active:last"),i=n.nextAll(".token:first");if(!i.length)return void this.$input.focus();this.activate(i,t)},prev:function(t){if(t){var e=this.$wrapper.find(".active:last");if(!(!e||!this.$firstActiveToken)&&e.index()>this.$firstActiveToken.index())return this.deactivate(e)}var n=this.$wrapper.find(".active:first"),i=n.prevAll(".token:first");if(i.length||(i=this.$wrapper.find(".token:first")),!i.length&&!t)return void this.$input.focus();this.activate(i,t)},activate:function(e,n,i,s){if(e){if(void 0===s)var s=!0;if(i)var n=!0;if(this.$copyHelper.focus(),n||(this.$wrapper.find(".active").removeClass("active"),s?this.$firstActiveToken=e:delete this.$firstActiveToken),i&&this.$firstActiveToken){var r=this.$firstActiveToken.index()-2,o=e.index()-2,a=this;this.$wrapper.find(".token").slice(Math.min(r,o)+1,Math.max(r,o)).each(function(){a.activate(t(this),!0)})}e.addClass("active"),this.$copyHelper.val(this.getTokensList(null,null,!0)).select()}},activateAll:function(){var e=this;this.$wrapper.find(".token").each(function(n){e.activate(t(this),0!==n,!1,!1)})},deactivate:function(t){t&&(t.removeClass("active"),this.$copyHelper.val(this.getTokensList(null,null,!0)).select())},toggle:function(t){t&&(t.toggleClass("active"),this.$copyHelper.val(this.getTokensList(null,null,!0)).select())},edit:function(e){if(e){var n=e.data("attrs"),i={attrs:n,relatedTarget:e.get(0)},s=t.Event("tokenfield:edittoken",i);if(this.$element.trigger(s),!s.isDefaultPrevented()){e.find(".token-label").text(n.value);var r=e.outerWidth(),o=this.$input.hasClass("tt-input")?this.$input.parent():this.$input;e.replaceWith(o),this.preventCreateTokens=!0,this.$input.val(n.value).select().data("edit",!0).width(r),this.update(),this.$element.trigger(t.Event("tokenfield:editedtoken",i))}}},unedit:function(t){if((this.$input.hasClass("tt-input")?this.$input.parent():this.$input).appendTo(this.$wrapper),this.$input.data("edit",!1),this.$mirror.text(""),this.update(),t){var e=this;setTimeout(function(){e.$input.focus()},1)}},remove:function(e,n){if(!(this.$input.is(document.activeElement)||this._disabled||this._readonly)){var i="click"===e.type?t(e.target).closest(".token"):this.$wrapper.find(".token.active");if("click"!==e.type){if(!n)var n="prev";if(this[n](),"prev"===n)var s=0===i.first().prevAll(".token:first").length}var r={attrs:this.getTokenData(i),relatedTarget:i.get(0)},o=t.Event("tokenfield:removetoken",r);if(this.$element.trigger(o),!o.isDefaultPrevented()){var a=t.Event("tokenfield:removedtoken",r),l=t.Event("change",{initiator:"tokenfield"});i.remove(),this.$element.val(this.getTokensList()).trigger(a).trigger(l),this.$wrapper.find(".token").length&&"click"!==e.type&&!s||this.$input.focus(),this.$input.css("width",this.options.minWidth+"px"),this.update(),e.preventDefault(),e.stopPropagation()}}},update:function(){var t=this.$input.val(),e=parseInt(this.$input.css("padding-left"),10),n=parseInt(this.$input.css("padding-right"),10),i=e+n;if(this.$input.data("edit")){if(t||(t=this.$input.prop("placeholder")),t===this.$mirror.text())return;this.$mirror.text(t);var s=this.$mirror.width()+10;if(s>this.$wrapper.width())return this.$input.width(this.$wrapper.width());this.$input.width(s)}else{this.$input.width(this.options.minWidth);var r="rtl"===this.textDirection?this.$input.offset().left+this.$input.outerWidth()-this.$wrapper.offset().left-parseInt(this.$wrapper.css("padding-left"),10)-i-1:this.$wrapper.offset().left+this.$wrapper.width()+parseInt(this.$wrapper.css("padding-left"),10)-this.$input.offset().left-i;isNaN(r)?this.$input.width("100%"):this.$input.width(r)}},focusInput:function(e){if(!(t(e.target).closest(".token").length||t(e.target).closest(".token-input").length||t(e.target).closest(".tt-dropdown-menu").length)){var n=this;setTimeout(function(){n.$input.focus()},0)}},search:function(){this.$input.data("ui-autocomplete")&&this.$input.autocomplete("search")},disable:function(){this.setProperty("disabled",!0)},enable:function(){this.setProperty("disabled",!1)},readonly:function(){this.setProperty("readonly",!0)},writeable:function(){this.setProperty("readonly",!1)},setProperty:function(t,e){this["_"+t]=e,this.$input.prop(t,e),this.$element.prop(t,e),this.$wrapper[e?"addClass":"removeClass"](t)},destroy:function(){this.$element.val(this.getTokensList()),this.$element.css(this.$element.data("original-styles")),this.$element.prop("tabindex",this.$element.data("original-tabindex"));var e=t('label[for="'+this.$input.prop("id")+'"]');return e.length&&e.prop("for",this.$element.prop("id")),this.$element.insertBefore(this.$wrapper),this.$element.removeData("original-styles").removeData("original-tabindex").removeData("bs.tokenfield"),this.$wrapper.remove(),this.$mirror.remove(),this.$element}};var i=t.fn.tokenfield;return t.fn.tokenfield=function(e,i){var s,r=[];Array.prototype.push.apply(r,arguments);var o=this.each(function(){var o=t(this),a=o.data("bs.tokenfield"),l="object"==typeof e&&e;"string"==typeof e&&a&&a[e]?(r.shift(),s=a[e].apply(a,r)):a||"string"==typeof e||i||(o.data("bs.tokenfield",a=new n(this,l)),o.trigger("tokenfield:initialize"))});return void 0!==s?s:o},t.fn.tokenfield.defaults={minWidth:60,minLength:0,html:!0,allowEditing:!0,allowPasting:!0,limit:0,autocomplete:{},typeahead:{},showAutocompleteOnFocus:!1,createTokensOnBlur:!1,delimiter:",",beautify:!0,inputType:"text"},t.fn.tokenfield.Constructor=n,t.fn.tokenfield.noConflict=function(){return t.fn.tokenfield=i,this},n}),window.clipboard=function(){var t={};return t.copy=function(){function t(){e=!1,n=null}var e=!1,n=null;return document.addEventListener("copy",function(t){if(e){for(var i in n)t.clipboardData.setData(i,n[i]);t.preventDefault()}}),function(i){return new Promise(function(s,r){e=!0,n="string"==typeof i?{"text/plain":i}:i instanceof Node?{"text/html":(new XMLSerializer).serializeToString(i)}:i;try{if(!document.execCommand("copy"))throw new Error("Unable to copy. Perhaps it's not available in your browser?");t(),s()}catch(e){t(),r(e)}})}}(),t.paste=function(){var t,e,n=!1;return document.addEventListener("paste",function(i){if(n){n=!1,i.preventDefault();var s=t;t=null,s(i.clipboardData.getData(e))}}),function(i){return new Promise(function(s,r){n=!0,t=s,e=i||"text/plain";try{document.execCommand("paste")||(n=!1,r(new Error("Unable to paste. Pasting only works in Internet Explorer at the moment.")))}catch(t){n=!1,r(new Error(t))}})}}(),"undefined"==typeof ClipboardEvent&&"undefined"!=typeof window.clipboardData&&"undefined"!=typeof window.clipboardData.setData&&(!function(t){function e(t,e){return function(){t.apply(e,arguments)}}function n(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],l(t,e(s,this),e(r,this))}function i(t){var e=this;return null===this._state?void this._deferreds.push(t):void c(function(){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return void(e._state?t.resolve:t.reject)(e._value);var i;try{i=n(e._value)}catch(e){return void t.reject(e)}t.resolve(i)})}function s(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void l(e(n,t),e(s,this),e(r,this))}this._state=!0,this._value=t,o.call(this)}catch(t){r.call(this,t)}}function r(t){this._state=!1,this._value=t,o.call(this)}function o(){for(var t=0,e=this._deferreds.length;e>t;t++)i.call(this,this._deferreds[t]);this._deferreds=null}function a(t,e,n,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=i}function l(t,e,n){var i=!1;try{t(function(t){i||(i=!0,e(t))},function(t){i||(i=!0,n(t))})}catch(t){if(i)return;i=!0,n(t)}}var c=n.immediateFn||"function"==typeof setImmediate&&setImmediate||function(t){setTimeout(t,1)},u=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};n.prototype["catch"]=function(t){return this.then(null,t)},n.prototype.then=function(t,e){var s=this;return new n(function(n,r){i.call(s,new a(t,e,n,r))})},n.all=function(){var t=Array.prototype.slice.call(1===arguments.length&&u(arguments[0])?arguments[0]:arguments);return new n(function(e,n){function i(r,o){try{if(o&&("object"==typeof o||"function"==typeof o)){var a=o.then;if("function"==typeof a)return void a.call(o,function(t){i(r,t)},n)}t[r]=o,0==--s&&e(t)}catch(t){n(t)}}if(0===t.length)return e([]);for(var s=t.length,r=0;r<t.length;r++)i(r,t[r])})},n.resolve=function(t){return t&&"object"==typeof t&&t.constructor===n?t:new n(function(e){e(t)})},n.reject=function(t){return new n(function(e,n){n(t)})},n.race=function(t){return new n(function(e,n){for(var i=0,s=t.length;s>i;i++)t[i].then(e,n)})},void 0!==module&&module.exports?module.exports=n:t.Promise||(t.Promise=n)}(this),t.copy=function(t){return new Promise(function(e,n){if("string"!=typeof t&&!("text/plain"in t))throw new Error("You must provide a text/plain type.");var i="string"==typeof t?t:t["text/plain"];window.clipboardData.setData("Text",i)?e():n(new Error("Copying was rejected."))})},t.paste=function(){return new Promise(function(t,e){var n=window.clipboardData.getData("Text");n?t(n):e(new Error("Pasting was rejected."))})}),t}(),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(t){return"number"==typeof t&&!isNaN(t)}function n(t){return void 0===t}function i(t,n){var i=[];return e(n)&&i.push(n),i.slice.apply(t,i)}function s(t,e){var n=i(arguments,2);return function(){return t.apply(e,n.concat(i(arguments)))}}function r(t){var e=t.match(/^(https?:)\/\/([^\:\/\?#]+):?(\d*)/i);return e&&(e[1]!==f.protocol||e[2]!==f.hostname||e[3]!==f.port)}function o(t){var e="timestamp="+(new Date).getTime();return t+(-1===t.indexOf("?")?"?":"&")+e}function a(t,e){var n;if(t.naturalWidth)return e(t.naturalWidth,t.naturalHeight);n=document.createElement("img"),n.onload=function(){e(this.width,this.height)},n.src=t.src}function l(t){var n=[],i=t.rotate,s=t.scaleX,r=t.scaleY;return e(i)&&n.push("rotate("+i+"deg)"),e(s)&&e(r)&&n.push("scale("+s+","+r+")"),n.length?n.join(" "):"none"}function c(t,e){var n,i,s=nt(t.degree)%180,r=(s>90?180-s:s)*Math.PI/180,o=it(r),a=st(r),l=t.width,c=t.height,u=t.aspectRatio;return e?(n=l/(a+o/u),i=n/u):(n=l*a+c*o,i=l*o+c*a),{width:n,height:i}}function u(n,i){var s,r,o,a=t("<canvas>")[0],l=a.getContext("2d"),u=0,p=0,h=i.naturalWidth,d=i.naturalHeight,f=i.rotate,g=i.scaleX,m=i.scaleY,v=e(g)&&e(m)&&(1!==g||1!==m),y=e(f)&&0!==f,b=y||v,_=h,w=d;return v&&(s=h/2,r=d/2),y&&(o=c({width:h,height:d,degree:f}),_=o.width,w=o.height,s=o.width/2,r=o.height/2),a.width=_,a.height=w,b&&(u=-h/2,p=-d/2,l.save(),l.translate(s,r)),y&&l.rotate(f*Math.PI/180),v&&l.scale(g,m),l.drawImage(n,u,p,h,d),b&&l.restore(),a}function p(e,n){this.$element=t(e),this.options=t.extend({},p.DEFAULTS,t.isPlainObject(n)&&n),this.ready=!1,this.built=!1,this.complete=!1,this.rotated=!1,this.cropped=!1,this.disabled=!1,this.replaced=!1,this.isImg=!1,this.originalUrl="",this.canvas=null,this.cropBox=null,this.init()}var h=t(window),d=t(document),f=window.location,g="cropper",m="preview."+g,v="cropper-modal",y="cropper-hide",b="cropper-hidden",_="cropper-move",w="cropper-crop",k="cropper-disabled",T="mousedown touchstart pointerdown MSPointerDown",S="mousemove touchmove pointermove MSPointerMove",C="mouseup touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",A="wheel mousewheel DOMMouseScroll",x="dblclick",j="load."+g,I="error."+g,D="resize."+g,P="build."+g,E="built."+g,O="cropstart."+g,N="cropmove."+g,R="cropend."+g,M="crop."+g,$="zoom."+g,z=/^(e|w|s|n|se|sw|ne|nw|all|crop|move|zoom)$/,L="e",U="w",q="s",F="n",B="se",J="sw",W="ne",H="nw",G="all",V="crop",Y="move",K="zoom",X="none",Z=t.isFunction(t("<canvas>")[0].getContext),Q=Math.sqrt,tt=Math.min,et=Math.max,nt=Math.abs,it=Math.sin,st=Math.cos,rt=parseFloat,ot={};t.extend(ot,{init:function(){var t,e=this.$element;if(e.is("img")){if(this.isImg=!0,this.originalUrl=t=e.attr("src"),!t)return;t=e.prop("src")}else e.is("canvas")&&Z&&(t=e[0].toDataURL());this.load(t)},trigger:function(e,n){var i=t.Event(e,n);return this.$element.trigger(i),i.isDefaultPrevented()},load:function(e){var n,i,s=this.options,a=this.$element,l="";e&&(this.url=e,a.one(P,s.build),this.trigger(P)||(s.checkImageOrigin&&r(e)&&(l=' crossOrigin="anonymous"',a.prop("crossOrigin")||(n=o(e))),this.$clone=i=t("<img"+l+' src="'+(n||e)+'">'),this.isImg?a[0].complete?this.start():a.one(j,t.proxy(this.start,this)):i.one(j,t.proxy(this.start,this)).one(I,t.proxy(this.stop,this)).addClass(y).insertAfter(a)))},start:function(){a(this.isImg?this.$element[0]:this.$clone[0],t.proxy(function(t,e){this.image={naturalWidth:t,naturalHeight:e,aspectRatio:t/e},this.ready=!0,this.build()},this))},stop:function(){this.$clone.remove(),this.$clone=null}}),t.extend(ot,{build:function(){var e,n,i,s=this.options,r=this.$element,o=this.$clone;this.ready&&(this.built&&this.unbuild(),this.$container=r.parent(),this.$cropper=e=t(p.TEMPLATE),this.$canvas=e.find(".cropper-canvas").append(o),this.$dragBox=e.find(".cropper-drag-box"),this.$cropBox=n=e.find(".cropper-crop-box"),this.$viewBox=e.find(".cropper-view-box"),this.$face=i=n.find(".cropper-face"),r.addClass(b).after(e),this.isImg||o.removeClass(y),this.initPreview(),this.bind(),s.aspectRatio=rt(s.aspectRatio)||NaN,s.autoCrop?(this.cropped=!0,s.modal&&this.$dragBox.addClass(v)):n.addClass(b),s.guides||n.find(".cropper-dashed").addClass(b),s.center||n.find(".cropper-center").addClass(b),s.cropBoxMovable&&i.addClass(_).data("action",G),s.highlight||i.addClass("cropper-invisible"),s.background&&e.addClass("cropper-bg"),s.cropBoxResizable||n.find(".cropper-line, .cropper-point").addClass(b),this.setDragMode(s.dragCrop?V:s.movable?Y:X),this.render(),this.built=!0,this.setData(s.data),r.one(E,s.built),setTimeout(t.proxy(function(){this.trigger(E),this.complete=!0},this),0))},unbuild:function(){this.built&&(this.built=!1,this.initialImage=null,this.initialCanvas=null,this.initialCropBox=null,this.container=null,this.canvas=null,this.cropBox=null,this.unbind(),this.resetPreview(),this.$preview=null,this.$viewBox=null,this.$cropBox=null,this.$dragBox=null,this.$canvas=null,this.$container=null,this.$cropper.remove(),this.$cropper=null)}}),t.extend(ot,{render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.options,e=this.$element,n=this.$container,i=this.$cropper;i.addClass(b),e.removeClass(b),i.css(this.container={width:et(n.width(),rt(t.minContainerWidth)||200),height:et(n.height(),rt(t.minContainerHeight)||100)}),e.addClass(b),i.removeClass(b)},initCanvas:function(){var e=this.container,n=e.width,i=e.height,s=this.image,r=s.aspectRatio,o={aspectRatio:r,width:n,height:i};i*r>n?o.height=n/r:o.width=i*r,o.oldLeft=o.left=(n-o.width)/2,o.oldTop=o.top=(i-o.height)/2,this.canvas=o,this.limitCanvas(!0,!0),this.initialImage=t.extend({},s),this.initialCanvas=t.extend({},o)},limitCanvas:function(e,n){var i,s,r=this.options,o=r.strict,a=this.container,l=a.width,c=a.height,u=this.canvas,p=u.aspectRatio,h=this.cropBox,d=this.cropped&&h,f=this.initialCanvas||u,g=f.width,m=f.height;e&&(i=rt(r.minCanvasWidth)||0,s=rt(r.minCanvasHeight)||0,i?(o&&(i=et(d?h.width:g,i)),s=i/p):s?(o&&(s=et(d?h.height:m,s)),i=s*p):o&&(d?(i=h.width,s=h.height,s*p>i?i=s*p:s=i/p):(i=g,s=m)),t.extend(u,{minWidth:i,minHeight:s,maxWidth:Infinity,maxHeight:Infinity})),n&&(o?d?(u.minLeft=tt(h.left,h.left+h.width-u.width),u.minTop=tt(h.top,h.top+h.height-u.height),u.maxLeft=h.left,u.maxTop=h.top):(u.minLeft=tt(0,l-u.width),u.minTop=tt(0,c-u.height),u.maxLeft=et(0,l-u.width),u.maxTop=et(0,c-u.height)):(u.minLeft=-u.width,u.minTop=-u.height,u.maxLeft=l,u.maxTop=c))},renderCanvas:function(t){var e,n,i=this.options,s=this.canvas,r=this.image;this.rotated&&(this.rotated=!1,n=c({width:r.width,height:r.height,degree:r.rotate}),(e=n.width/n.height)!==s.aspectRatio&&(s.left-=(n.width-s.width)/2,s.top-=(n.height-s.height)/2,s.width=n.width,s.height=n.height,s.aspectRatio=e,this.limitCanvas(!0,!1))),(s.width>s.maxWidth||s.width<s.minWidth)&&(s.left=s.oldLeft),(s.height>s.maxHeight||s.height<s.minHeight)&&(s.top=s.oldTop),s.width=tt(et(s.width,s.minWidth),s.maxWidth),s.height=tt(et(s.height,s.minHeight),s.maxHeight),this.limitCanvas(!1,!0),s.oldLeft=s.left=tt(et(s.left,s.minLeft),s.maxLeft),s.oldTop=s.top=tt(et(s.top,s.minTop),s.maxTop),this.$canvas.css({width:s.width,height:s.height,left:s.left,top:s.top}),this.renderImage(),this.cropped&&i.strict&&this.limitCropBox(!0,!0),t&&this.output()},renderImage:function(e){var n,i=this.canvas,s=this.image;s.rotate&&(n=c({width:i.width,height:i.height,degree:s.rotate,aspectRatio:s.aspectRatio},!0)),t.extend(s,n?{width:n.width,height:n.height,left:(i.width-n.width)/2,top:(i.height-n.height)/2}:{width:i.width,height:i.height,left:0,top:0}),this.$clone.css({width:s.width,height:s.height,marginLeft:s.left,marginTop:s.top,transform:l(s)}),e&&this.output()},initCropBox:function(){var e=this.options,n=this.canvas,i=e.aspectRatio,s=rt(e.autoCropArea)||.8,r={width:n.width,height:n.height};i&&(n.height*i>n.width?r.height=r.width/i:r.width=r.height*i),this.cropBox=r,this.limitCropBox(!0,!0),r.width=tt(et(r.width,r.minWidth),r.maxWidth),r.height=tt(et(r.height,r.minHeight),r.maxHeight),r.width=et(r.minWidth,r.width*s),r.height=et(r.minHeight,r.height*s),r.oldLeft=r.left=n.left+(n.width-r.width)/2,r.oldTop=r.top=n.top+(n.height-r.height)/2,this.initialCropBox=t.extend({},r)},limitCropBox:function(t,e){var n,i,s=this.options,r=s.strict,o=this.container,a=o.width,l=o.height,c=this.canvas,u=this.cropBox,p=s.aspectRatio;t&&(n=rt(s.minCropBoxWidth)||0,i=rt(s.minCropBoxHeight)||0,u.minWidth=tt(a,n),u.minHeight=tt(l,i),u.maxWidth=tt(a,r?c.width:a),u.maxHeight=tt(l,r?c.height:l),p&&(u.maxHeight*p>u.maxWidth?(u.minHeight=u.minWidth/p,u.maxHeight=u.maxWidth/p):(u.minWidth=u.minHeight*p,u.maxWidth=u.maxHeight*p)),u.minWidth=tt(u.maxWidth,u.minWidth),u.minHeight=tt(u.maxHeight,u.minHeight)),e&&(r?(u.minLeft=et(0,c.left),u.minTop=et(0,c.top),u.maxLeft=tt(a,c.left+c.width)-u.width,u.maxTop=tt(l,c.top+c.height)-u.height):(u.minLeft=0,u.minTop=0,u.maxLeft=a-u.width,u.maxTop=l-u.height))},renderCropBox:function(){var t=this.options,e=this.container,n=e.width,i=e.height,s=this.cropBox;(s.width>s.maxWidth||s.width<s.minWidth)&&(s.left=s.oldLeft),(s.height>s.maxHeight||s.height<s.minHeight)&&(s.top=s.oldTop),s.width=tt(et(s.width,s.minWidth),s.maxWidth),s.height=tt(et(s.height,s.minHeight),s.maxHeight),this.limitCropBox(!1,!0),s.oldLeft=s.left=tt(et(s.left,s.minLeft),s.maxLeft),s.oldTop=s.top=tt(et(s.top,s.minTop),s.maxTop),t.movable&&t.cropBoxMovable&&this.$face.data("action",s.width===n&&s.height===i?Y:G),this.$cropBox.css({width:s.width,height:s.height,left:s.left,top:s.top}),this.cropped&&t.strict&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),this.complete?this.trigger(M,this.getData()):this.built||this.$element.one(E,t.proxy(function(){this.trigger(M,this.getData())},this))}}),t.extend(ot,{initPreview:function(){var e=this.url;this.$preview=t(this.options.preview),this.$viewBox.html('<img src="'+e+'">'),this.$preview.each(function(){var n=t(this);n.data(m,{width:n.width(),height:n.height(),original:n.html()}),n.html('<img src="'+e+'" style="display:block;width:100%;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important">')})},resetPreview:function(){this.$preview.each(function(){var e=t(this);e.html(e.data(m).original).removeData(m)})},preview:function(){var e=this.image,n=this.canvas,i=this.cropBox,s=e.width,r=e.height,o=i.left-n.left-e.left,a=i.top-n.top-e.top;this.cropped&&!this.disabled&&(this.$viewBox.find("img").css({width:s,height:r,marginLeft:-o,marginTop:-a,transform:l(e)}),this.$preview.each(function(){var n=t(this),c=n.data(m),u=c.width/i.width,p=c.width,h=i.height*u;h>c.height&&(u=c.height/i.height,p=i.width*u,h=c.height),n.width(p).height(h).find("img").css({width:s*u,height:r*u,marginLeft:-o*u,marginTop:-a*u,transform:l(e)})}))}}),t.extend(ot,{bind:function(){var e=this.options,n=this.$element,i=this.$cropper;t.isFunction(e.cropstart)&&n.on(O,e.cropstart),t.isFunction(e.cropmove)&&n.on(N,e.cropmove),t.isFunction(e.cropend)&&n.on(R,e.cropend),t.isFunction(e.crop)&&n.on(M,e.crop),t.isFunction(e.zoom)&&n.on($,e.zoom),i.on(T,t.proxy(this.cropStart,this)),e.zoomable&&e.mouseWheelZoom&&i.on(A,t.proxy(this.wheel,this)),e.doubleClickToggle&&i.on(x,t.proxy(this.dblclick,this)),d.on(S,this._cropMove=s(this.cropMove,this)).on(C,this._cropEnd=s(this.cropEnd,this)),e.responsive&&h.on(D,this._resize=s(this.resize,this))},unbind:function(){var e=this.options,n=this.$element,i=this.$cropper;t.isFunction(e.cropstart)&&n.off(O,e.cropstart),t.isFunction(e.cropmove)&&n.off(N,e.cropmove),t.isFunction(e.cropend)&&n.off(R,e.cropend),t.isFunction(e.crop)&&n.off(M,e.crop),t.isFunction(e.zoom)&&n.off($,e.zoom),i.off(T,this.cropStart),e.zoomable&&e.mouseWheelZoom&&i.off(A,this.wheel),e.doubleClickToggle&&i.off(x,this.dblclick),d.off(S,this._cropMove).off(C,this._cropEnd),e.responsive&&h.off(D,this._resize)}}),t.extend(ot,{resize:function(){var e,n,i,s=this.$container,r=this.container;!this.disabled&&r&&(1==(i=s.width()/r.width)&&s.height()===r.height||(e=this.getCanvasData(),n=this.getCropBoxData(),this.render(),this.setCanvasData(t.each(e,function(t,n){e[t]=n*i})),this.setCropBoxData(t.each(n,function(t,e){n[t]=e*i}))))},dblclick:function(){this.disabled||(this.$dragBox.hasClass(w)?this.setDragMode(Y):this.setDragMode(V))},wheel:function(t){var e=t.originalEvent,n=e,i=rt(this.options.wheelZoomRatio)||.1,s=1;this.disabled||(t.preventDefault(),n.deltaY?s=n.deltaY>0?1:-1:n.wheelDelta?s=-n.wheelDelta/120:n.detail&&(s=n.detail>0?1:-1),this.zoom(-s*i,e))},cropStart:function(e){var n,i,s=this.options,r=e.originalEvent,o=r&&r.touches,a=e;if(!this.disabled){if(o){if((n=o.length)>1){if(!s.zoomable||!s.touchDragZoom||2!==n)return;a=o[1],this.startX2=a.pageX,this.startY2=a.pageY,i=K}a=o[0]}if(i=i||t(a.target).data("action"),z.test(i)){if(this.trigger(O,{originalEvent:r,action:i}))return;e.preventDefault(),this.action=i,this.cropping=!1,this.startX=a.pageX||r&&r.pageX,this.startY=a.pageY||r&&r.pageY,i===V&&(this.cropping=!0,this.$dragBox.addClass(v))}}},cropMove:function(t){var e,n=this.options,i=t.originalEvent,s=i&&i.touches,r=t,o=this.action;if(!this.disabled){if(s){if((e=s.length)>1){if(!n.zoomable||!n.touchDragZoom||2!==e)return;r=s[1],this.endX2=r.pageX,this.endY2=r.pageY}r=s[0]}if(o){if(this.trigger(N,{originalEvent:i,action:o}))return;t.preventDefault(),this.endX=r.pageX||i&&i.pageX,this.endY=r.pageY||i&&i.pageY,this.change(r.shiftKey,o===K?i:null)}}},cropEnd:function(t){var e=t.originalEvent,n=this.action;this.disabled||n&&(t.preventDefault(),this.cropping&&(this.cropping=!1,this.$dragBox.toggleClass(v,this.cropped&&this.options.modal)),this.action="",this.trigger(R,{originalEvent:e,action:n}))}}),t.extend(ot,{change:function(t,e){var n,i,s=this.options,r=s.aspectRatio,o=this.action,a=this.container,l=this.canvas,c=this.cropBox,u=c.width,p=c.height,h=c.left,d=c.top,f=h+u,g=d+p,m=0,v=0,y=a.width,_=a.height,w=!0;switch(!r&&t&&(r=u&&p?u/p:1),s.strict&&(m=c.minLeft,v=c.minTop,y=m+tt(a.width,l.width),_=v+tt(a.height,l.height)),i={x:this.endX-this.startX,y:this.endY-this.startY},r&&(i.X=i.y*r,i.Y=i.x/r),o){case G:h+=i.x,d+=i.y;break;case L:if(i.x>=0&&(f>=y||r&&(d<=v||g>=_))){w=!1;break}u+=i.x,r&&(p=u/r,d-=i.Y/2),u<0&&(o=U,u=0);break;case F:if(i.y<=0&&(d<=v||r&&(h<=m||f>=y))){w=!1;break}p-=i.y,d+=i.y,r&&(u=p*r,h+=i.X/2),p<0&&(o=q,p=0);break;case U:if(i.x<=0&&(h<=m||r&&(d<=v||g>=_))){w=!1;break}u-=i.x,h+=i.x,r&&(p=u/r,d+=i.Y/2),u<0&&(o=L,u=0);break;case q:if(i.y>=0&&(g>=_||r&&(h<=m||f>=y))){w=!1;break}p+=i.y,r&&(u=p*r,h-=i.X/2),p<0&&(o=F,p=0);break;case W:if(r){if(i.y<=0&&(d<=v||f>=y)){w=!1;break}p-=i.y,d+=i.y,u=p*r}else i.x>=0?f<y?u+=i.x:i.y<=0&&d<=v&&(w=!1):u+=i.x,i.y<=0?d>v&&(p-=i.y,d+=i.y):(p-=i.y,d+=i.y);u<0&&p<0?(o=J,p=0,u=0):u<0?(o=H,u=0):p<0&&(o=B,p=0);break;case H:if(r){if(i.y<=0&&(d<=v||h<=m)){w=!1;break}p-=i.y,d+=i.y,u=p*r,h+=i.X}else i.x<=0?h>m?(u-=i.x,h+=i.x):i.y<=0&&d<=v&&(w=!1):(u-=i.x,h+=i.x),i.y<=0?d>v&&(p-=i.y,d+=i.y):(p-=i.y,d+=i.y);u<0&&p<0?(o=B,p=0,u=0):u<0?(o=W,u=0):p<0&&(o=J,p=0);break;case J:if(r){if(i.x<=0&&(h<=m||g>=_)){w=!1;break}u-=i.x,h+=i.x,p=u/r}else i.x<=0?h>m?(u-=i.x,h+=i.x):i.y>=0&&g>=_&&(w=!1):(u-=i.x,h+=i.x),i.y>=0?g<_&&(p+=i.y):p+=i.y;u<0&&p<0?(o=W,p=0,u=0):u<0?(o=B,u=0):p<0&&(o=H,p=0);break;case B:if(r){if(i.x>=0&&(f>=y||g>=_)){w=!1;break}u+=i.x,p=u/r}else i.x>=0?f<y?u+=i.x:i.y>=0&&g>=_&&(w=!1):u+=i.x,i.y>=0?g<_&&(p+=i.y):p+=i.y;u<0&&p<0?(o=H,p=0,u=0):u<0?(o=J,u=0):p<0&&(o=W,p=0);break;case Y:this.move(i.x,i.y),w=!1;break;case K:this.zoom(function(t,e,n,i){var s=Q(t*t+e*e);return(Q(n*n+i*i)-s)/s}(nt(this.startX-this.startX2),nt(this.startY-this.startY2),nt(this.endX-this.endX2),nt(this.endY-this.endY2)),e),this.startX2=this.endX2,this.startY2=this.endY2,w=!1;break;case V:i.x&&i.y&&(n=this.$cropper.offset(),h=this.startX-n.left,d=this.startY-n.top,u=c.minWidth,p=c.minHeight,i.x>0?i.y>0?o=B:(o=W,d-=p):i.y>0?(o=J,h-=u):(o=H,h-=u,d-=p),this.cropped||(this.cropped=!0,this.$cropBox.removeClass(b)))}w&&(c.width=u,c.height=p,c.left=h,c.top=d,this.action=o,this.renderCropBox()),this.startX=this.endX,this.startY=this.endY}}),t.extend(ot,{crop:function(){this.built&&!this.disabled&&(this.cropped||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&this.$dragBox.addClass(v),this.$cropBox.removeClass(b)),this.setCropBoxData(this.initialCropBox))},reset:function(){this.built&&!this.disabled&&(this.image=t.extend({},this.initialImage),this.canvas=t.extend({},this.initialCanvas),this.cropBox=t.extend({},this.initialCropBox),this.renderCanvas(),this.cropped&&this.renderCropBox())},clear:function(){
this.cropped&&!this.disabled&&(t.extend(this.cropBox,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(),this.renderCanvas(),this.$dragBox.removeClass(v),this.$cropBox.addClass(b))},replace:function(t){!this.disabled&&t&&(this.isImg&&(this.replaced=!0,this.$element.attr("src",t)),this.options.data=null,this.load(t))},enable:function(){this.built&&(this.disabled=!1,this.$cropper.removeClass(k))},disable:function(){this.built&&(this.disabled=!0,this.$cropper.addClass(k))},destroy:function(){var t=this.$element;this.ready?(this.isImg&&this.replaced&&t.attr("src",this.originalUrl),this.unbuild(),t.removeClass(b)):this.isImg?t.off(j,this.start):this.$clone&&this.$clone.remove(),t.removeData(g)},move:function(t,i){var s=this.canvas;n(i)&&(i=t),t=rt(t),i=rt(i),this.built&&!this.disabled&&this.options.movable&&(s.left+=e(t)?t:0,s.top+=e(i)?i:0,this.renderCanvas(!0))},zoom:function(t,e){var n,i,s=this.canvas;if((t=rt(t))&&this.built&&!this.disabled&&this.options.zoomable){if(this.trigger($,{originalEvent:e,ratio:t}))return;t=t<0?1/(1-t):1+t,n=s.width*t,i=s.height*t,s.left-=(n-s.width)/2,s.top-=(i-s.height)/2,s.width=n,s.height=i,this.renderCanvas(!0),this.setDragMode(Y)}},rotate:function(t){var e=this.image,n=e.rotate||0;t=rt(t)||0,this.built&&!this.disabled&&this.options.rotatable&&(e.rotate=(n+t)%360,this.rotated=!0,this.renderCanvas(!0))},scale:function(t,i){var s=this.image;n(i)&&(i=t),t=rt(t),i=rt(i),this.built&&!this.disabled&&this.options.scalable&&(s.scaleX=e(t)?t:1,s.scaleY=e(i)?i:1,this.renderImage(!0))},getData:function(e){var n,i,s=this.options,r=this.image,o=this.canvas,a=this.cropBox;return this.built&&this.cropped?(i={x:a.left-o.left,y:a.top-o.top,width:a.width,height:a.height},n=r.width/r.naturalWidth,t.each(i,function(t,s){s/=n,i[t]=e?Math.round(s):s})):i={x:0,y:0,width:0,height:0},s.rotatable&&(i.rotate=r.rotate||0),s.scalable&&(i.scaleX=r.scaleX||1,i.scaleY=r.scaleY||1),i},setData:function(n){var i,s=this.image,r=this.canvas,o={};t.isFunction(n)&&(n=n.call(this.$element)),this.built&&!this.disabled&&t.isPlainObject(n)&&(e(n.rotate)&&n.rotate!==s.rotate&&this.options.rotatable&&(s.rotate=n.rotate,this.rotated=!0,this.renderCanvas(!0)),i=s.width/s.naturalWidth,e(n.x)&&(o.left=n.x*i+r.left),e(n.y)&&(o.top=n.y*i+r.top),e(n.width)&&(o.width=n.width*i),e(n.height)&&(o.height=n.height*i),this.setCropBoxData(o))},getContainerData:function(){return this.built?this.container:{}},getImageData:function(){return this.ready?this.image:{}},getCanvasData:function(){var t,e=this.canvas;return this.built&&(t={left:e.left,top:e.top,width:e.width,height:e.height}),t||{}},setCanvasData:function(n){var i=this.canvas,s=i.aspectRatio;t.isFunction(n)&&(n=n.call(this.$element)),this.built&&!this.disabled&&t.isPlainObject(n)&&(e(n.left)&&(i.left=n.left),e(n.top)&&(i.top=n.top),e(n.width)?(i.width=n.width,i.height=n.width/s):e(n.height)&&(i.height=n.height,i.width=n.height*s),this.renderCanvas(!0))},getCropBoxData:function(){var t,e=this.cropBox;return this.built&&this.cropped&&(t={left:e.left,top:e.top,width:e.width,height:e.height}),t||{}},setCropBoxData:function(n){var i,s,r=this.cropBox,o=this.options.aspectRatio;t.isFunction(n)&&(n=n.call(this.$element)),this.built&&this.cropped&&!this.disabled&&t.isPlainObject(n)&&(e(n.left)&&(r.left=n.left),e(n.top)&&(r.top=n.top),e(n.width)&&n.width!==r.width&&(i=!0,r.width=n.width),e(n.height)&&n.height!==r.height&&(s=!0,r.height=n.height),o&&(i?r.height=r.width/o:s&&(r.width=r.height*o)),this.renderCropBox())},getCroppedCanvas:function(e){var n,i,s,r,o,a,l,c,p,h,d;if(this.built&&this.cropped&&Z)return t.isPlainObject(e)||(e={}),d=this.getData(),n=d.width,i=d.height,c=n/i,t.isPlainObject(e)&&(o=e.width,a=e.height,o?(a=o/c,l=o/n):a&&(o=a*c,l=a/i)),s=o||n,r=a||i,p=t("<canvas>")[0],p.width=s,p.height=r,h=p.getContext("2d"),e.fillColor&&(h.fillStyle=e.fillColor,h.fillRect(0,0,s,r)),h.drawImage.apply(h,function(){var t,e,s,r,o,a,c=u(this.$clone[0],this.image),p=c.width,h=c.height,f=[c],g=d.x,m=d.y;return g<=-n||g>p?g=t=s=o=0:g<=0?(s=-g,g=0,t=o=tt(p,n+g)):g<=p&&(s=0,t=o=tt(n,p-g)),t<=0||m<=-i||m>h?m=e=r=a=0:m<=0?(r=-m,m=0,e=a=tt(h,i+m)):m<=h&&(r=0,e=a=tt(i,h-m)),f.push(g,m,t,e),l&&(s*=l,r*=l,o*=l,a*=l),o>0&&a>0&&f.push(s,r,o,a),f}.call(this)),p},setAspectRatio:function(t){var e=this.options;this.disabled||n(t)||(e.aspectRatio=rt(t)||NaN,this.built&&(this.initCropBox(),this.cropped&&this.renderCropBox()))},setDragMode:function(t){var e,n,i=this.options;this.ready&&!this.disabled&&(e=i.dragCrop&&t===V,n=i.movable&&t===Y,t=e||n?t:X,this.$dragBox.data("action",t).toggleClass(w,e).toggleClass(_,n),i.cropBoxMovable||this.$face.data("action",t).toggleClass(w,e).toggleClass(_,n))}}),t.extend(p.prototype,ot),p.DEFAULTS={aspectRatio:NaN,data:null,preview:"",strict:!0,responsive:!0,checkImageOrigin:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,dragCrop:!0,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,mouseWheelZoom:!0,wheelZoomRatio:.1,touchDragZoom:!0,cropBoxMovable:!0,cropBoxResizable:!0,doubleClickToggle:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,build:null,built:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},p.setDefaults=function(e){t.extend(p.DEFAULTS,e)},p.TEMPLATE='<div class="cropper-container"><div class="cropper-canvas"></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-action="e"></span><span class="cropper-line line-n" data-action="n"></span><span class="cropper-line line-w" data-action="w"></span><span class="cropper-line line-s" data-action="s"></span><span class="cropper-point point-e" data-action="e"></span><span class="cropper-point point-n" data-action="n"></span><span class="cropper-point point-w" data-action="w"></span><span class="cropper-point point-s" data-action="s"></span><span class="cropper-point point-ne" data-action="ne"></span><span class="cropper-point point-nw" data-action="nw"></span><span class="cropper-point point-sw" data-action="sw"></span><span class="cropper-point point-se" data-action="se"></span></div></div>',p.other=t.fn.cropper,t.fn.cropper=function(e){var s,r=i(arguments,1);return this.each(function(){var n,i=t(this),o=i.data(g);if(!o){if(/destroy/.test(e))return;i.data(g,o=new p(this,e))}"string"==typeof e&&t.isFunction(n=o[e])&&(s=n.apply(o,r))}),n(s)?this:s},t.fn.cropper.Constructor=p,t.fn.cropper.setDefaults=p.setDefaults,t.fn.cropper.noConflict=function(){return t.fn.cropper=p.other,this}}),function(t){function e(e,n){var i;return t.Notification?i=new t.Notification(e,{icon:y(n.icon)?n.icon:n.icon.x32,body:n.body||f,tag:n.tag||f}):t.webkitNotifications?(i=t.webkitNotifications.createNotification(n.icon,e,n.body),i.show()):navigator.mozNotification?(i=navigator.mozNotification.createNotification(e,n.body,n.icon),i.show()):t.external&&t.external.msIsSiteMode()&&(t.external.msSiteModeClearIconOverlay(),t.external.msSiteModeSetIconOverlay(y(n.icon)?n.icon:n.icon.x16,e),t.external.msSiteModeActivate(),i={ieVerification:m+1}),i}function n(e){return{close:function(){e&&(e.close?e.close():t.external&&t.external.msIsSiteMode()&&e.ieVerification===m&&t.external.msSiteModeClearIconOverlay())}}}function i(e){if(g){var n=v(e)?e:w;t.webkitNotifications&&t.webkitNotifications.checkPermission?t.webkitNotifications.requestPermission(n):t.Notification&&t.Notification.requestPermission&&t.Notification.requestPermission(n)}}function s(){var e;if(g)return t.Notification&&t.Notification.permissionLevel?e=t.Notification.permissionLevel():t.webkitNotifications&&t.webkitNotifications.checkPermission?e=p[t.webkitNotifications.checkPermission()]:navigator.mozNotification?e=c:t.Notification&&t.Notification.permission?e=t.Notification.permission:t.external&&t.external.msIsSiteMode()!==undefined&&(e=t.external.msIsSiteMode()?c:l),e}function r(t){return t&&b(t)&&_(k,t),k}function o(){return!k.pageVisibility||(document.hidden||document.msHidden||document.mozHidden||document.webkitHidden)}function a(i,r){var a,l;return g&&o()&&y(i)&&r&&(y(r.icon)||b(r.icon))&&s()===c&&(a=e(i,r)),l=n(a),k.autoClose&&a&&!a.ieVerification&&a.addEventListener&&a.addEventListener("show",function(){var e=l;t.setTimeout(function(){e.close()},k.autoClose)}),l}var l="default",c="granted",u="denied",p=[c,l,u],h={pageVisibility:!0,autoClose:5e3},d={},f="",g=function(){var e=!1;try{e=!!(t.Notification||t.webkitNotifications||navigator.mozNotification||t.external&&t.external.msIsSiteMode()!==undefined)}catch(t){}return e}(),m=Math.floor(10*Math.random()+1),v=function(t){return t&&t.constructor===Function},y=function(t){return t&&t.constructor===String},b=function(t){return t&&t.constructor===Object},_=function(t,e){var n,i;for(n in e)i=e[n],n in t&&(t[n]===i||n in d&&d[n]===i)||(t[n]=i);return t},w=function(){},k=h;t.notify={PERMISSION_DEFAULT:l,PERMISSION_GRANTED:c,PERMISSION_DENIED:u,isSupported:g,config:r,createNotification:a,permissionLevel:s,requestPermission:i},v(Object.freeze)&&Object.freeze(t.notify)}(window),function(t){"use strict";function e(t){function e(){return Et<Ot}function n(){return Pt[Et]}function i(){return Et}function s(t){Et=t}function r(){Et+=1}function o(){Et=0,Ot=Pt.length}function l(t,e){return{name:t,tokens:e||"",semantic:e||"",children:[]}}function c(t,e){var n;return null===e?null:(n=l(t),n.tokens=e.tokens,n.semantic=e.semantic,n.children.push(e),n)}function u(t,e){return null!==e&&(t.tokens+=e.tokens,t.semantic+=e.semantic),t.children.push(e),t}function p(t){var i;return e()?(i=n(),t(i)?(r(),l("token",i)):null):null}function h(t){return function(){return c("literal",p(function(e){return e===t}))}}function d(){var t=arguments;return function(){var e,n,r,o;for(o=i(),n=l("and"),e=0;e<t.length;e+=1){if(null===(r=t[e]()))return s(o),null;u(n,r)}return n}}function f(){var t=arguments;return function(){var e,n,r;for(r=i(),e=0;e<t.length;e+=1){if(null!==(n=t[e]()))return n;s(r)}return null}}function g(t){return function(){var e,n;return n=i(),e=t(),null!==e?e:(s(n),l("opt"))}}function m(t){return function(){var e=t();return null!==e&&(e.semantic=""),e}}function v(t){return function(){var e=t();return null!==e&&e.semantic.length>0&&(e.semantic=" "),e}}function y(t,e){return function(){var n,r,o,a,c;for(a=i(),n=l("star"),o=0,c=e===undefined?0:e;null!==(r=t());)o+=1,u(n,r);return o>=c?n:(s(a),null)}}function b(t){return t.replace(/([ \t]|\r\n)+/g," ").replace(/^\s*/,"").replace(/\s*$/,"")}function _(t){return t.charCodeAt(0)>=128}function w(){return c("cr",h("\r")())}function k(){return c("crlf",d(w,C)())}function T(){return c("dquote",h('"')())}function S(){return c("htab",h("\t")())}function C(){return c("lf",h("\n")())}function A(){return c("sp",h(" ")())}function x(){return c("vchar",p(function(e){var n=e.charCodeAt(0),i=33<=n&&n<=126;return t.rfc6532&&(i=i||_(e)),i}))}function j(){return c("wsp",f(A,S)())}function I(){var t=c("quoted-pair",f(d(h("\\"),f(x,j)),ut)());return null===t?null:(t.semantic=t.semantic[1],t)}function D(){return c("fws",f(ht,d(g(d(y(j),m(k))),y(j,1)))())}function P(){return c("ctext",f(function(){return p(function(e){var n=e.charCodeAt(0),i=33<=n&&n<=39||42<=n&&n<=91||93<=n&&n<=126;return t.rfc6532&&(i=i||_(e)),i})},lt)())}function E(){return c("ccontent",f(P,I,O)())}function O(){return c("comment",d(h("("),y(d(g(D),E)),g(D),h(")"))())}function N(){return c("cfws",f(d(y(d(g(D),O),1),g(D)),D)())}function R(){return c("atext",p(function(e){var n="a"<=e&&e<="z"||"A"<=e&&e<="Z"||"0"<=e&&e<="9"||["!","#","$","%","&","'","*","+","-","/","=","?","^","_","`","{","|","}","~"].indexOf(e)>=0;return t.rfc6532&&(n=n||_(e)),n}))}function M(){return c("atom",d(v(g(N)),y(R,1),v(g(N)))())}function $(){var t,e;return null===(t=c("dot-atom-text",y(R,1)()))?t:(e=y(d(h("."),y(R,1)))(),null!==e&&u(t,e),t)}function z(){return c("dot-atom",d(m(g(N)),$,m(g(N)))())}function L(){return c("qtext",f(function(){return p(function(e){var n=e.charCodeAt(0),i=33===n||35<=n&&n<=91||93<=n&&n<=126;return t.rfc6532&&(i=i||_(e)),i})},ct)())}function U(){return c("qcontent",f(L,I)())}function q(){return c("quoted-string",d(m(g(N)),m(T),y(d(g(v(D)),U)),g(m(D)),m(T),m(g(N)))())}function F(){return c("word",f(M,q)())}function B(){return c("phrase",f(pt,y(F,1))())}function J(){return c("address",f(W,V)())}function W(){return c("mailbox",f(H,it)())}function H(){return c("name-addr",d(g(Y),G)())}function G(){return c("angle-addr",f(d(m(g(N)),h("<"),it,h(">"),m(g(N))),dt)())}function V(){return c("group",d(Y,h(":"),g(Z),h(";"),m(g(N)))())}function Y(){return c("display-name",function(){var t=B();return null!==t&&(t.semantic=b(t.semantic)),t}())}function K(){return c("mailbox-list",f(d(W,y(d(h(","),W))),mt)())}function X(){return c("address-list",f(d(J,y(d(h(","),J))),vt)())}function Z(){return c("group-list",f(K,m(N),yt)())}function Q(){return c("local-part",f(bt,z,q)())}function tt(){return c("dtext",f(function(){return p(function(e){var n=e.charCodeAt(0),i=33<=n&&n<=90||94<=n&&n<=126;return t.rfc6532&&(i=i||_(e)),i})},wt)())}function et(){return c("domain-literal",d(m(g(N)),h("["),y(d(g(D),tt)),g(D),h("]"),m(g(N)))())}function nt(){return c("domain",function(){var e=f(_t,z,et)();return t.rejectTLD&&e&&e.semantic&&e.semantic.indexOf(".")<0?null:(e&&(e.semantic=e.semantic.replace(/\s+/g,"")),e)}())}function it(){return c("addr-spec",d(Q,h("@"),nt)())}function st(){return c("from",f(K,X)())}function rt(){return c("sender",f(W,J)())}function ot(){return c("reply-to",X())}function at(){return t.strict?null:c("obs-NO-WS-CTL",p(function(t){var e=t.charCodeAt(0);return 1<=e&&e<=8||11===e||12===e||14<=e&&e<=31||127===e}))}function lt(){return t.strict?null:c("obs-ctext",at())}function ct(){return t.strict?null:c("obs-qtext",at())}function ut(){return t.strict?null:c("obs-qp",d(h("\\"),f(h("\0"),at,C,w))())}function pt(){return t.strict?null:c("obs-phrase",d(F,y(f(F,h("."),v(N))))())}function ht(){return t.strict?null:c("obs-FWS",y(d(m(g(k)),j),1)())}function dt(){return t.strict?null:c("obs-angle-addr",d(m(g(N)),h("<"),ft,it,h(">"),m(g(N)))())}function ft(){return t.strict?null:c("obs-route",d(gt,h(":"))())}function gt(){return t.strict?null:c("obs-domain-list",d(y(f(m(N),h(","))),h("@"),nt,y(d(h(","),m(g(N)),g(d(h("@"),nt)))))())}function mt(){return t.strict?null:c("obs-mbox-list",d(y(d(m(g(N)),h(","))),W,y(d(h(","),g(d(W,m(N))))))())}function vt(){return t.strict?null:c("obs-addr-list",d(y(d(m(g(N)),h(","))),J,y(d(h(","),g(d(J,m(N))))))())}function yt(){return t.strict?null:c("obs-group-list",d(y(d(m(g(N)),h(",")),1),m(g(N)))())}function bt(){return t.strict?null:c("obs-local-part",d(F,y(d(h("."),F)))())}function _t(){return t.strict?null:c("obs-domain",d(M,y(d(h("."),M)))())}function wt(){return t.strict?null:c("obs-dtext",f(at,I)())}function kt(t,e){var n,i,s;if(null===e||e===undefined)return null;for(i=[e];i.length>0;){if(s=i.pop(),s.name===t)return s;for(n=s.children.length-1;n>=0;n-=1)i.push(s.children[n])}return null}function Tt(t,e){var n,i,s,r;if(null===e||e===undefined)return null;for(i=[e],r=[];i.length>0;)for(s=i.pop(),s.name===t&&r.push(s),n=s.children.length-1;n>=0;n-=1)i.push(s.children[n]);return r}function St(t,e){var n,i,s,r,o;if(null===e||e===undefined)return null;for(i=[e],r=[],o={},n=0;n<t.length;n+=1)o[t[n]]=!0;for(;i.length>0;)if(s=i.pop(),s.name in o)r.push(s);else for(n=s.children.length-1;n>=0;n-=1)i.push(s.children[n]);return r}function Ct(e){var n,i,s,r,o;if(null===e)return null;for(n=[],i=St(["group","mailbox"],e),s=0;s<i.length;s+=1)r=i[s],"group"===r.name?n.push(At(r)):"mailbox"===r.name&&n.push(xt(r));return o={ast:e,addresses:n},t.simple&&(o=It(o)),t.oneResult?Dt(o):t.simple?o&&o.addresses:o}function At(t){var e,n=kt("display-name",t),i=[],s=St(["mailbox"],t);for(e=0;e<s.length;e+=1)i.push(xt(s[e]));return{node:t,parts:{name:n},type:t.name,name:jt(n),addresses:i}}function xt(t){var e=kt("display-name",t),n=kt("addr-spec",t),i=Tt("cfws",t),s=kt("local-part",n),r=kt("domain",n);return{node:t,parts:{name:e,address:n,local:s,domain:r,comments:i},type:t.name,name:jt(e),address:jt(n),local:jt(s),domain:jt(r),groupName:jt(t.groupName)}}function jt(t){return null!==t&&t!==undefined?t.semantic:null}function It(t){var e;if(t&&t.addresses)for(e=0;e<t.addresses.length;e+=1)delete t.addresses[e].node;return t}function Dt(e){return e?!t.partial&&e.addresses.length>1?null:e.addresses&&e.addresses[0]:null}var Pt,Et,Ot,Nt,Rt;if(null===(t=a(t,{})))return null;if(Pt=t.input,Rt={address:J,"address-list":X,"angle-addr":G,from:st,group:V,mailbox:W,"mailbox-list":K,"reply-to":ot,sender:rt}[t.startAt]||X,!t.strict){if(o(),t.strict=!0,Nt=Rt(Pt),t.partial||!e())return Ct(Nt);t.strict=!1}return o(),Nt=Rt(Pt),!t.partial&&e()?null:Ct(Nt)}function n(t){return e(a(t,{oneResult:!0,rfc6532:!0,simple:!0,startAt:"address-list"}))}function i(t){return e(a(t,{rfc6532:!0,simple:!0,startAt:"address-list"}))}function s(t){return e(a(t,{rfc6532:!0,simple:!0,startAt:"from"}))}function r(t){return e(a(t,{oneResult:!0,rfc6532:!0,simple:!0,startAt:"sender"}))}function o(t){return e(a(t,{rfc6532:!0,simple:!0,startAt:"reply-to"}))}function a(t,e){function n(t){return"[object String]"===Object.prototype.toString.call(t)}function i(t){return t===Object(t)}function s(t){return null===t||t===undefined}var r,o;if(n(t))t={input:t};else if(!i(t))return null;if(!n(t.input))return null;if(!e)return null;r={oneResult:!1,partial:!1,rejectTLD:!1,rfc6532:!1,simple:!1,startAt:"address-list",strict:!1};for(o in r)s(t[o])&&(t[o]=s(e[o])?r[o]:e[o]);return t}e.parseOneAddress=n,e.parseAddressList=i,e.parseFrom=s,e.parseSender=r,e.parseReplyTo=o,t.emailAddresses=e}(this),function(){function t(t){return!!t.exifdata}function e(t,e){e=e||t.match(/^data\:([^\;]+)\;base64,/im)[1]||"",t=t.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var n=atob(t),i=n.length,s=new ArrayBuffer(i),r=new Uint8Array(s),o=0;o<i;o++)r[o]=n.charCodeAt(o);return s}function i(t,e){var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="blob",n.onload=function(){200!=this.status&&0!==this.status||e(this.response)},n.send()}function s(t,n){function s(e){var i=r(e),s=o(e);t.exifdata=i||{},t.iptcdata=s||{},n&&n.call(t)}if(t.src)if(/^data\:/i.test(t.src)){var a=e(t.src);s(a)}else if(/^blob\:/i.test(t.src)){var l=new FileReader;l.onload=function(t){s(t.target.result)},i(t.src,function(t){l.readAsArrayBuffer(t)})}else{var c=new XMLHttpRequest;c.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";s(c.response),c=null},c.open("GET",t.src,!0),c.responseType="arraybuffer",c.send(null)}else if(window.FileReader&&(t instanceof window.Blob||t instanceof window.File)){var l=new FileReader;l.onload=function(t){h&&console.log("Got file of length "+t.target.result.byteLength),s(t.target.result)},l.readAsArrayBuffer(t)}}function r(t){var e=new DataView(t);if(h&&console.log("Got file of length "+t.byteLength),255!=e.getUint8(0)||216!=e.getUint8(1))return h&&console.log("Not a valid JPEG"),!1;for(var n,i=2,s=t.byteLength;i<s;){if(255!=e.getUint8(i))return h&&console.log("Not a valid marker at offset "+i+", found: "+e.getUint8(i)),!1;if(n=e.getUint8(i+1),h&&console.log(n),225==n)return h&&console.log("Found 0xFFE1 marker"),p(e,i+4,e.getUint16(i+2)-2);i+=2+e.getUint16(i+2)}}function o(t){var e=new DataView(t);if(h&&console.log("Got file of length "+t.byteLength),255!=e.getUint8(0)||216!=e.getUint8(1))return h&&console.log("Not a valid JPEG"),!1;for(var n=2,i=t.byteLength,s=function(t,e){return 56===t.getUint8(e)&&66===t.getUint8(e+1)&&73===t.getUint8(e+2)&&77===t.getUint8(e+3)&&4===t.getUint8(e+4)&&4===t.getUint8(e+5)};n<i;){if(s(e,n)){var r=e.getUint8(n+7);r%2!=0&&(r+=1),0===r&&(r=4);return a(t,n+8+r,e.getUint16(n+6+r))}n++}}function a(t,e,n){for(var i,s,r,o,a=new DataView(t),l={},c=e;c<e+n;)28===a.getUint8(c)&&2===a.getUint8(c+1)&&(o=a.getUint8(c+2))in b&&(r=a.getInt16(c+3),r+5,s=b[o],i=u(a,c+5,r),l.hasOwnProperty(s)?l[s]instanceof Array?l[s].push(i):l[s]=[l[s],i]:l[s]=i),c++;return l}function l(t,e,n,i,s){var r,o,a,l=t.getUint16(n,!s),u={};for(a=0;a<l;a++)r=n+12*a+2,o=i[t.getUint16(r,!s)],!o&&h&&console.log("Unknown tag: "+t.getUint16(r,!s)),u[o]=c(t,r,e,n,s);return u}function c(t,e,n,i,s){var r,o,a,l,c,p,h=t.getUint16(e+2,!s),d=t.getUint32(e+4,!s),f=t.getUint32(e+8,!s)+n;switch(h){case 1:case 7:if(1==d)return t.getUint8(e+8,!s);for(r=d>4?f:e+8,o=[],l=0;l<d;l++)o[l]=t.getUint8(r+l);return o;case 2:return r=d>4?f:e+8,u(t,r,d-1);case 3:if(1==d)return t.getUint16(e+8,!s);for(r=d>2?f:e+8,o=[],l=0;l<d;l++)o[l]=t.getUint16(r+2*l,!s);return o;case 4:if(1==d)return t.getUint32(e+8,!s);for(o=[],l=0;l<d;l++)o[l]=t.getUint32(f+4*l,!s);return o;case 5:if(1==d)return c=t.getUint32(f,!s),p=t.getUint32(f+4,!s),a=new Number(c/p),a.numerator=c,a.denominator=p,a;for(o=[],l=0;l<d;l++)c=t.getUint32(f+8*l,!s),p=t.getUint32(f+4+8*l,!s),o[l]=new Number(c/p),o[l].numerator=c,o[l].denominator=p;return o;case 9:if(1==d)return t.getInt32(e+8,!s);for(o=[],l=0;l<d;l++)o[l]=t.getInt32(f+4*l,!s);return o;case 10:if(1==d)return t.getInt32(f,!s)/t.getInt32(f+4,!s);for(o=[],l=0;l<d;l++)o[l]=t.getInt32(f+8*l,!s)/t.getInt32(f+4+8*l,!s);return o}}function u(t,e,i){var s="";for(n=e;n<e+i;n++)s+=String.fromCharCode(t.getUint8(n));return s}function p(t,e){if("Exif"!=u(t,e,4))return h&&console.log("Not valid EXIF data! "+u(t,e,4)),!1;var n,i,s,r,o,a=e+6;if(18761==t.getUint16(a))n=!1;else{if(19789!=t.getUint16(a))return h&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;n=!0}if(42!=t.getUint16(a+2,!n))return h&&console.log("Not valid TIFF data! (no 0x002A)"),!1;var c=t.getUint32(a+4,!n);if(c<8)return h&&console.log("Not valid TIFF data! (First offset less than 8)",t.getUint32(a+4,!n)),!1;if(i=l(t,a,a+c,m,n),i.ExifIFDPointer){r=l(t,a,a+i.ExifIFDPointer,g,n);for(s in r){switch(s){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":r[s]=y[s][r[s]];break;case"ExifVersion":case"FlashpixVersion":r[s]=String.fromCharCode(r[s][0],r[s][1],r[s][2],r[s][3]);break;case"ComponentsConfiguration":r[s]=y.Components[r[s][0]]+y.Components[r[s][1]]+y.Components[r[s][2]]+y.Components[r[s][3]]}i[s]=r[s]}}if(i.GPSInfoIFDPointer){o=l(t,a,a+i.GPSInfoIFDPointer,v,n);for(s in o){switch(s){case"GPSVersionID":o[s]=o[s][0]+"."+o[s][1]+"."+o[s][2]+"."+o[s][3]}i[s]=o[s]}}return i}var h=!1,d=this,f=function(t){return t instanceof f?t:this instanceof f?void(this.EXIFwrapped=t):new f(t)};"undefined"!=typeof exports?(void 0!==module&&module.exports&&(exports=module.exports=f),exports.EXIF=f):d.EXIF=f;var g=f.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},m=f.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},v=f.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},y=f.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}},b={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};f.getData=function(e,n){return!((e instanceof Image||e instanceof HTMLImageElement)&&!e.complete)&&(t(e)?n&&n.call(e):s(e,n),!0)},f.getTag=function(e,n){if(t(e))return e.exifdata[n]},f.getAllTags=function(e){if(!t(e))return{};var n,i=e.exifdata,s={};for(n in i)i.hasOwnProperty(n)&&(s[n]=i[n]);return s},f.pretty=function(e){if(!t(e))return"";var n,i=e.exifdata,s="";for(n in i)i.hasOwnProperty(n)&&("object"==typeof i[n]?i[n]instanceof Number?s+=n+" : "+i[n]+" ["+i[n].numerator+"/"+i[n].denominator+"]\r\n":s+=n+" : ["+i[n].length+" values]\r\n":s+=n+" : "+i[n]+"\r\n");return s},f.readFromBinaryFile=function(t){return r(t)},"function"==typeof define&&define.amd&&define("exif-js",[],function(){return f})}.call(this),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){function e(t){window.console&&console.warn&&console.warn(t)}var n=function(e,i){n._registry.push(this),this.$textarea=e,this.$textCopy=t("<span />"),this.$clone=t("<pre class='expanding-clone'><br /></pre>").prepend(this.$textCopy),this._resetStyles(),this._setCloneStyles(),this._setTextareaStyles(),e.wrap(t("<div class='expanding-wrapper' style='position:relative' />")).after(this.$clone),this.attach(),this.update(),i.update&&e.bind("update.expanding",i.update)};n._registry=[],n.getExpandingInstance=function(e){var i=t.map(n._registry,function(t){return t.$textarea[0]}),s=t.inArray(e,i);return s>-1?n._registry[s]:null};var i=function(){var t=-1;if("Microsoft Internet Explorer"===navigator.appName){var e=navigator.userAgent;null!==new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})").exec(e)&&(t=parseFloat(RegExp.$1))}return t}(),s="oninput"in document.createElement("input")&&9!==i;n.prototype={attach:function(){var t="input.expanding change.expanding",e=this;s||(t+=" keyup.expanding"),this.$textarea.bind(t,function(){e.update()})},update:function(){this.$textCopy.text(this.$textarea.val().replace(/\r\n/g,"\n")),this.$textarea.triggerHandler("update.expanding")},destroy:function(){this.$clone.remove(),this.$textarea.unwrap().attr("style",this._oldTextareaStyles||""),delete this._oldTextareaStyles;var e=t.inArray(this,n._registry);e>-1&&n._registry.splice(e,1),this.$textarea.unbind("input.expanding change.expanding keyup.expanding update.expanding")},_resetStyles:function(){this._oldTextareaStyles=this.$textarea.attr("style"),this.$textarea.add(this.$clone).css({margin:0,webkitBoxSizing:"border-box",mozBoxSizing:"border-box",boxSizing:"border-box",width:"100%"})},_setCloneStyles:function(){var t={display:"block",border:"0 solid",visibility:"hidden",minHeight:this.$textarea.outerHeight()};"off"===this.$textarea.attr("wrap")?t.overflowX="scroll":t.whiteSpace="pre-wrap",this.$clone.css(t),this._copyTextareaStylesToClone()},_copyTextareaStylesToClone:function(){var e=this,n=["lineHeight","textDecoration","letterSpacing","fontSize","fontFamily","fontStyle","fontWeight","textTransform","textAlign","direction","wordSpacing","fontSizeAdjust","wordWrap","word-break","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth","paddingLeft","paddingRight","paddingTop","paddingBottom","maxHeight"];t.each(n,function(t,n){var i=e.$textarea.css(n);e.$clone.css(n)!==i&&(e.$clone.css(n,i),"maxHeight"===n&&"none"!==i&&e.$clone.css("overflow","hidden"))})},_setTextareaStyles:function(){this.$textarea.css({position:"absolute",top:0,left:0,height:"100%",resize:"none",overflow:"auto"})}},t.expanding=t.extend({autoInitialize:!0,initialSelector:"textarea.expanding",opts:{update:function(){}}},t.expanding||{}),t.fn.expanding=function(i){if("destroy"===i)return this.each(function(){var t=n.getExpandingInstance(this);t&&t.destroy()}),this;if("active"===i)return!!this.filter(function(){return!!n.getExpandingInstance(this)}).length;var s=t.extend({},t.expanding.opts,i);return this.filter("textarea").each(function(){var i=this.offsetWidth>0||this.offsetHeight>0,r=n.getExpandingInstance(this);i&&!r?new n(t(this),s):(i||e("ExpandingTextareas: attempt to initialize an invisible textarea. Call expanding() again once it has been inserted into the page and/or is visible."),
r&&e("ExpandingTextareas: attempt to initialize a textarea that has already been initialized. Subsequent calls are ignored."))}),this},t(function(){t.expanding.autoInitialize&&t(t.expanding.initialSelector).expanding()})}),function(t){var e="object"==typeof window&&window||"object"==typeof self&&self;"undefined"!=typeof exports?t(exports):e&&(e.hljs=t({}),"function"==typeof define&&define.amd&&define([],function(){return e.hljs}))}(function(t){function e(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function n(t){return t.nodeName.toLowerCase()}function i(t,e){var n=t&&t.exec(e);return n&&0===n.index}function s(t){return A.test(t)}function r(t){var e,n,i,r,o=t.className+" ";if(o+=t.parentNode?t.parentNode.className:"",n=x.exec(o))return w(n[1])?n[1]:"no-highlight";for(o=o.split(/\s+/),e=0,i=o.length;i>e;e++)if(r=o[e],s(r)||w(r))return r}function o(t){var e,n={},i=Array.prototype.slice.call(arguments,1);for(e in t)n[e]=t[e];return i.forEach(function(t){for(e in t)n[e]=t[e]}),n}function a(t){var e=[];return function t(i,s){for(var r=i.firstChild;r;r=r.nextSibling)3===r.nodeType?s+=r.nodeValue.length:1===r.nodeType&&(e.push({event:"start",offset:s,node:r}),s=t(r,s),n(r).match(/br|hr|img|input/)||e.push({event:"stop",offset:s,node:r}));return s}(t,0),e}function l(t,i,s){function r(){return t.length&&i.length?t[0].offset!==i[0].offset?t[0].offset<i[0].offset?t:i:"start"===i[0].event?t:i:t.length?t:i}function o(t){function i(t){return" "+t.nodeName+'="'+e(t.value).replace('"',"&quot;")+'"'}u+="<"+n(t)+k.map.call(t.attributes,i).join("")+">"}function a(t){u+="</"+n(t)+">"}function l(t){("start"===t.event?o:a)(t.node)}for(var c=0,u="",p=[];t.length||i.length;){var h=r();if(u+=e(s.substring(c,h[0].offset)),c=h[0].offset,h===t){p.reverse().forEach(a);do{l(h.splice(0,1)[0]),h=r()}while(h===t&&h.length&&h[0].offset===c);p.reverse().forEach(o)}else"start"===h[0].event?p.push(h[0].node):p.pop(),l(h.splice(0,1)[0])}return u+e(s.substr(c))}function c(t){return t.v&&!t.cached_variants&&(t.cached_variants=t.v.map(function(e){return o(t,{v:null},e)})),t.cached_variants||t.eW&&[o(t)]||[t]}function u(t){function e(t){return t&&t.source||t}function n(n,i){return new RegExp(e(n),"m"+(t.cI?"i":"")+(i?"g":""))}function i(s,r){if(!s.compiled){if(s.compiled=!0,s.k=s.k||s.bK,s.k){var o={},a=function(e,n){t.cI&&(n=n.toLowerCase()),n.split(" ").forEach(function(t){var n=t.split("|");o[n[0]]=[e,n[1]?Number(n[1]):1]})};"string"==typeof s.k?a("keyword",s.k):T(s.k).forEach(function(t){a(t,s.k[t])}),s.k=o}s.lR=n(s.l||/\w+/,!0),r&&(s.bK&&(s.b="\\b("+s.bK.split(" ").join("|")+")\\b"),s.b||(s.b=/\B|\b/),s.bR=n(s.b),s.e||s.eW||(s.e=/\B|\b/),s.e&&(s.eR=n(s.e)),s.tE=e(s.e)||"",s.eW&&r.tE&&(s.tE+=(s.e?"|":"")+r.tE)),s.i&&(s.iR=n(s.i)),null==s.r&&(s.r=1),s.c||(s.c=[]),s.c=Array.prototype.concat.apply([],s.c.map(function(t){return c("self"===t?s:t)})),s.c.forEach(function(t){i(t,s)}),s.starts&&i(s.starts,r);var l=s.c.map(function(t){return t.bK?"\\.?("+t.b+")\\.?":t.b}).concat([s.tE,s.i]).map(e).filter(Boolean);s.t=l.length?n(l.join("|"),!0):{exec:function(){return null}}}}i(t)}function p(t,n,s,r){function o(t,e){var n,s;for(n=0,s=e.c.length;s>n;n++)if(i(e.c[n].bR,t))return e.c[n]}function a(t,e){if(i(t.eR,e)){for(;t.endsParent&&t.parent;)t=t.parent;return t}return t.eW?a(t.parent,e):void 0}function l(t,e){return!s&&i(e.iR,t)}function c(t,e){var n=b.cI?e[0].toLowerCase():e[0];return t.k.hasOwnProperty(n)&&t.k[n]}function d(t,e,n,i){var s=i?"":D.classPrefix,r='<span class="'+s,o=n?"":I;return(r+=t+'">')+e+o}function f(){var t,n,i,s;if(!k.k)return e(A);for(s="",n=0,k.lR.lastIndex=0,i=k.lR.exec(A);i;)s+=e(A.substring(n,i.index)),t=c(k,i),t?(x+=t[1],s+=d(t[0],e(i[0]))):s+=e(i[0]),n=k.lR.lastIndex,i=k.lR.exec(A);return s+e(A.substr(n))}function g(){var t="string"==typeof k.sL;if(t&&!S[k.sL])return e(A);var n=t?p(k.sL,A,!0,T[k.sL]):h(A,k.sL.length?k.sL:void 0);return k.r>0&&(x+=n.r),t&&(T[k.sL]=n.top),d(n.language,n.value,!1,!0)}function m(){C+=null!=k.sL?g():f(),A=""}function v(t){C+=t.cN?d(t.cN,"",!0):"",k=Object.create(t,{parent:{value:k}})}function y(t,e){if(A+=t,null==e)return m(),0;var n=o(e,k);if(n)return n.skip?A+=e:(n.eB&&(A+=e),m(),n.rB||n.eB||(A=e)),v(n,e),n.rB?0:e.length;var i=a(k,e);if(i){var s=k;s.skip?A+=e:(s.rE||s.eE||(A+=e),m(),s.eE&&(A=e));do{k.cN&&(C+=I),k.skip||(x+=k.r),k=k.parent}while(k!==i.parent);return i.starts&&v(i.starts,""),s.rE?0:e.length}if(l(e,k))throw new Error('Illegal lexeme "'+e+'" for mode "'+(k.cN||"<unnamed>")+'"');return A+=e,e.length||1}var b=w(t);if(!b)throw new Error('Unknown language: "'+t+'"');u(b);var _,k=r||b,T={},C="";for(_=k;_!==b;_=_.parent)_.cN&&(C=d(_.cN,"",!0)+C);var A="",x=0;try{for(var j,P,E=0;k.t.lastIndex=E,j=k.t.exec(n);)P=y(n.substring(E,j.index),j[0]),E=j.index+P;for(y(n.substr(E)),_=k;_.parent;_=_.parent)_.cN&&(C+=I);return{r:x,value:C,language:t,top:k}}catch(t){if(t.message&&-1!==t.message.indexOf("Illegal"))return{r:0,value:e(n)};throw t}}function h(t,n){n=n||D.languages||T(S);var i={r:0,value:e(t)},s=i;return n.filter(w).forEach(function(e){var n=p(e,t,!1);n.language=e,n.r>s.r&&(s=n),n.r>i.r&&(s=i,i=n)}),s.language&&(i.second_best=s),i}function d(t){return D.tabReplace||D.useBR?t.replace(j,function(t,e){return D.useBR&&"\n"===t?"<br>":D.tabReplace?e.replace(/\t/g,D.tabReplace):""}):t}function f(t,e,n){var i=e?C[e]:n,s=[t.trim()];return t.match(/\bhljs\b/)||s.push("hljs"),-1===t.indexOf(i)&&s.push(i),s.join(" ").trim()}function g(t){var e,n,i,o,c,u=r(t);s(u)||(D.useBR?(e=document.createElementNS("http://www.w3.org/1999/xhtml","div"),e.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/<br[ \/]*>/g,"\n")):e=t,c=e.textContent,i=u?p(u,c,!0):h(c),n=a(e),n.length&&(o=document.createElementNS("http://www.w3.org/1999/xhtml","div"),o.innerHTML=i.value,i.value=l(n,a(o),c)),i.value=d(i.value),t.innerHTML=i.value,t.className=f(t.className,u,i.language),t.result={language:i.language,re:i.r},i.second_best&&(t.second_best={language:i.second_best.language,re:i.second_best.r}))}function m(t){D=o(D,t)}function v(){if(!v.called){v.called=!0;var t=document.querySelectorAll("pre code");k.forEach.call(t,g)}}function y(){addEventListener("DOMContentLoaded",v,!1),addEventListener("load",v,!1)}function b(e,n){var i=S[e]=n(t);i.aliases&&i.aliases.forEach(function(t){C[t]=e})}function _(){return T(S)}function w(t){return t=(t||"").toLowerCase(),S[t]||S[C[t]]}var k=[],T=Object.keys,S={},C={},A=/^(no-?highlight|plain|text)$/i,x=/\blang(?:uage)?-([\w-]+)\b/i,j=/((^(<[^>]+>|\t|)+|(?:\n)))/gm,I="</span>",D={classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:void 0};return t.highlight=p,t.highlightAuto=h,t.fixMarkup=d,t.highlightBlock=g,t.configure=m,t.initHighlighting=v,t.initHighlightingOnLoad=y,t.registerLanguage=b,t.listLanguages=_,t.getLanguage=w,t.inherit=o,t.IR="[a-zA-Z]\\w*",t.UIR="[a-zA-Z_]\\w*",t.NR="\\b\\d+(\\.\\d+)?",t.CNR="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",t.BNR="\\b(0b[01]+)",t.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",t.BE={b:"\\\\[\\s\\S]",r:0},t.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[t.BE]},t.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[t.BE]},t.PWM={b:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},t.C=function(e,n,i){var s=t.inherit({cN:"comment",b:e,e:n,c:[]},i||{});return s.c.push(t.PWM),s.c.push({cN:"doctag",b:"(?:TODO|FIXME|NOTE|BUG|XXX):",r:0}),s},t.CLCM=t.C("//","$"),t.CBCM=t.C("/\\*","\\*/"),t.HCM=t.C("#","$"),t.NM={cN:"number",b:t.NR,r:0},t.CNM={cN:"number",b:t.CNR,r:0},t.BNM={cN:"number",b:t.BNR,r:0},t.CSSNM={cN:"number",b:t.NR+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",r:0},t.RM={cN:"regexp",b:/\//,e:/\/[gimuy]*/,i:/\n/,c:[t.BE,{b:/\[/,e:/\]/,r:0,c:[t.BE]}]},t.TM={cN:"title",b:t.IR,r:0},t.UTM={cN:"title",b:t.UIR,r:0},t.METHOD_GUARD={b:"\\.\\s*"+t.UIR,r:0},t}),hljs.registerLanguage("ruby",function(t){var e="[a-zA-Z_]\\w*[!?=]?|[-+~]\\@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?",n={keyword:"and then defined module in return redo if BEGIN retry end for self when next until do begin unless END rescue else break undef not super class case require yield alias while ensure elsif or include attr_reader attr_writer attr_accessor",literal:"true false nil"},i={cN:"doctag",b:"@[A-Za-z]+"},s={b:"#<",e:">"},r=[t.C("#","$",{c:[i]}),t.C("^\\=begin","^\\=end",{c:[i],r:10}),t.C("^__END__","\\n$")],o={cN:"subst",b:"#\\{",e:"}",k:n},a={cN:"string",c:[t.BE,o],v:[{b:/'/,e:/'/},{b:/"/,e:/"/},{b:/`/,e:/`/},{b:"%[qQwWx]?\\(",e:"\\)"},{b:"%[qQwWx]?\\[",e:"\\]"},{b:"%[qQwWx]?{",e:"}"},{b:"%[qQwWx]?<",e:">"},{b:"%[qQwWx]?/",e:"/"},{b:"%[qQwWx]?%",e:"%"},{b:"%[qQwWx]?-",e:"-"},{b:"%[qQwWx]?\\|",e:"\\|"},{b:/\B\?(\\\d{1,3}|\\x[A-Fa-f0-9]{1,2}|\\u[A-Fa-f0-9]{4}|\\?\S)\b/},{b:/<<(-?)\w+$/,e:/^\s*\w+$/}]},l={cN:"params",b:"\\(",e:"\\)",endsParent:!0,k:n},c=[a,s,{cN:"class",bK:"class module",e:"$|;",i:/=/,c:[t.inherit(t.TM,{b:"[A-Za-z_]\\w*(::\\w+)*(\\?|\\!)?"}),{b:"<\\s*",c:[{b:"("+t.IR+"::)?"+t.IR}]}].concat(r)},{cN:"function",bK:"def",e:"$|;",c:[t.inherit(t.TM,{b:e}),l].concat(r)},{b:t.IR+"::"},{cN:"symbol",b:t.UIR+"(\\!|\\?)?:",r:0},{cN:"symbol",b:":(?!\\s)",c:[a,{b:e}],r:0},{cN:"number",b:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",r:0},{b:"(\\$\\W)|((\\$|\\@\\@?)(\\w+))"},{cN:"params",b:/\|/,e:/\|/,k:n},{b:"("+t.RSR+"|unless)\\s*",k:"unless",c:[s,{cN:"regexp",c:[t.BE,o],i:/\n/,v:[{b:"/",e:"/[a-z]*"},{b:"%r{",e:"}[a-z]*"},{b:"%r\\(",e:"\\)[a-z]*"},{b:"%r!",e:"![a-z]*"},{b:"%r\\[",e:"\\][a-z]*"}]}].concat(r),r:0}].concat(r);o.c=c,l.c=c;var u="[>?]>",p="[\\w#]+\\(\\w+\\):\\d+:\\d+>",h="(\\w+-)?\\d+\\.\\d+\\.\\d(p\\d+)?[^>]+>",d=[{b:/^\s*=>/,starts:{e:"$",c:c}},{cN:"meta",b:"^("+u+"|"+p+"|"+h+")",starts:{e:"$",c:c}}];return{aliases:["rb","gemspec","podspec","thor","irb"],k:n,i:/\/\*/,c:r.concat(d).concat(c)}}),hljs.registerLanguage("bash",function(t){var e={cN:"variable",v:[{b:/\$[\w\d#@][\w\d_]*/},{b:/\$\{(.*?)}/}]},n={cN:"string",b:/"/,e:/"/,c:[t.BE,e,{cN:"variable",b:/\$\(/,e:/\)/,c:[t.BE]}]},i={cN:"string",b:/'/,e:/'/};return{aliases:["sh","zsh"],l:/\b-?[a-z\._]+\b/,k:{keyword:"if then else elif fi for while in do done case esac function",literal:"true false",built_in:"break cd continue eval exec exit export getopts hash pwd readonly return shift test times trap umask unset alias bind builtin caller command declare echo enable help let local logout mapfile printf read readarray source type typeset ulimit unalias set shopt autoload bg bindkey bye cap chdir clone comparguments compcall compctl compdescribe compfiles compgroups compquote comptags comptry compvalues dirs disable disown echotc echoti emulate fc fg float functions getcap getln history integer jobs kill limit log noglob popd print pushd pushln rehash sched setcap setopt stat suspend ttyctl unfunction unhash unlimit unsetopt vared wait whence where which zcompile zformat zftp zle zmodload zparseopts zprof zpty zregexparse zsocket zstyle ztcp",_:"-ne -eq -lt -gt -f -d -e -s -l -a"},c:[{cN:"meta",b:/^#![^\n]+sh\s*$/,r:10},{cN:"function",b:/\w[\w\d_]*\s*\(\s*\)\s*\{/,rB:!0,c:[t.inherit(t.TM,{b:/\w[\w\d_]*/})],r:0},t.HCM,n,i,e]}}),hljs.registerLanguage("javascript",function(t){var e="[A-Za-z$_][0-9A-Za-z$_]*",n={keyword:"in of if for while finally var new function do return void else break catch instanceof with throw case default try this switch continue typeof delete let yield const export super debugger as async await static import from as",literal:"true false null undefined NaN Infinity",built_in:"eval isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape Object Function Boolean Error EvalError InternalError RangeError ReferenceError StopIteration SyntaxError TypeError URIError Number Math Date String RegExp Array Float32Array Float64Array Int16Array Int32Array Int8Array Uint16Array Uint32Array Uint8Array Uint8ClampedArray ArrayBuffer DataView JSON Intl arguments require module console window document Symbol Set Map WeakSet WeakMap Proxy Reflect Promise"},i={cN:"number",v:[{b:"\\b(0[bB][01]+)"},{b:"\\b(0[oO][0-7]+)"},{b:t.CNR}],r:0},s={cN:"subst",b:"\\$\\{",e:"\\}",k:n,c:[]},r={cN:"string",b:"`",e:"`",c:[t.BE,s]};s.c=[t.ASM,t.QSM,r,i,t.RM];var o=s.c.concat([t.CBCM,t.CLCM]);return{aliases:["js","jsx"],k:n,c:[{cN:"meta",r:10,b:/^\s*['"]use (strict|asm)['"]/},{cN:"meta",b:/^#!/,e:/$/},t.ASM,t.QSM,r,t.CLCM,t.CBCM,i,{b:/[{,]\s*/,r:0,c:[{b:e+"\\s*:",rB:!0,r:0,c:[{cN:"attr",b:e,r:0}]}]},{b:"("+t.RSR+"|\\b(case|return|throw)\\b)\\s*",k:"return throw case",c:[t.CLCM,t.CBCM,t.RM,{cN:"function",b:"(\\(.*?\\)|"+e+")\\s*=>",rB:!0,e:"\\s*=>",c:[{cN:"params",v:[{b:e},{b:/\(\s*\)/},{b:/\(/,e:/\)/,eB:!0,eE:!0,k:n,c:o}]}]},{b:/</,e:/(\/\w+|\w+\/)>/,sL:"xml",c:[{b:/<\w+\s*\/>/,skip:!0},{b:/<\w+/,e:/(\/\w+|\w+\/)>/,skip:!0,c:[{b:/<\w+\s*\/>/,skip:!0},"self"]}]}],r:0},{cN:"function",bK:"function",e:/\{/,eE:!0,c:[t.inherit(t.TM,{b:e}),{cN:"params",b:/\(/,e:/\)/,eB:!0,eE:!0,c:o}],i:/\[|%/},{b:/\$[(.]/},t.METHOD_GUARD,{cN:"class",bK:"class",e:/[{;=]/,eE:!0,i:/[:"\[\]]/,c:[{bK:"extends"},t.UTM]},{bK:"constructor",e:/\{/,eE:!0}],i:/#(?!!)/}}),hljs.registerLanguage("css",function(t){var e={b:/[A-Z\_\.\-]+\s*:/,rB:!0,e:";",eW:!0,c:[{cN:"attribute",b:/\S/,e:":",eE:!0,starts:{eW:!0,eE:!0,c:[{b:/[\w-]+\(/,rB:!0,c:[{cN:"built_in",b:/[\w-]+/},{b:/\(/,e:/\)/,c:[t.ASM,t.QSM]}]},t.CSSNM,t.QSM,t.ASM,t.CBCM,{cN:"number",b:"#[0-9A-Fa-f]+"},{cN:"meta",b:"!important"}]}}]};return{cI:!0,i:/[=\/|'\$]/,c:[t.CBCM,{cN:"selector-id",b:/#[A-Za-z0-9_-]+/},{cN:"selector-class",b:/\.[A-Za-z0-9_-]+/},{cN:"selector-attr",b:/\[/,e:/\]/,i:"$"},{cN:"selector-pseudo",b:/:(:)?[a-zA-Z0-9\_\-\+\(\)"'.]+/},{b:"@(font-face|page)",l:"[a-z-]+",k:"font-face page"},{b:"@",e:"[{;]",i:/:/,c:[{cN:"keyword",b:/\w+/},{b:/\s/,eW:!0,eE:!0,r:0,c:[t.ASM,t.QSM,t.CSSNM]}]},{cN:"selector-tag",b:"[a-zA-Z-][a-zA-Z0-9_-]*",r:0},{b:"{",e:"}",i:/\S/,c:[t.CBCM,e]}]}}),hljs.registerLanguage("xml",function(t){var e="[A-Za-z0-9\\._:-]+",n={eW:!0,i:/</,r:0,c:[{cN:"attr",b:e,r:0},{b:/=\s*/,r:0,c:[{cN:"string",endsParent:!0,v:[{b:/"/,e:/"/},{b:/'/,e:/'/},{b:/[^\s"'=<>`]+/}]}]}]};return{aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist"],cI:!0,c:[{cN:"meta",b:"<!DOCTYPE",e:">",r:10,c:[{b:"\\[",e:"\\]"}]},t.C("<!--","-->",{r:10}),{b:"<\\!\\[CDATA\\[",e:"\\]\\]>",r:10},{b:/<\?(php)?/,e:/\?>/,sL:"php",c:[{b:"/\\*",e:"\\*/",skip:!0}]},{cN:"tag",b:"<style(?=\\s|>|$)",e:">",k:{name:"style"},c:[n],starts:{e:"</style>",rE:!0,sL:["css","xml"]}},{cN:"tag",b:"<script(?=\\s|>|$)",e:">",k:{name:"script"},c:[n],starts:{e:"</script>",rE:!0,sL:["actionscript","javascript","handlebars","xml"]}},{cN:"meta",v:[{b:/<\?xml/,e:/\?>/,r:10},{b:/<\?\w+/,e:/\?>/}]},{cN:"tag",b:"</?",e:"/?>",c:[{cN:"name",b:/[^\/><\s]+/,r:0},n]}]}});var module={},noop=function(){},console=window.console||{log:noop},supportsFileApi;FileUpload.prototype={on:function(t){this.eventHandlers=t}},UploadManager.prototype={initialize:function(){var t=this,e=t.dropContainer,n=t.inputField,i=t.cancelContainer,s=0,r=function(t){t.preventDefault(),t.stopPropagation(),s++,showDropZone(e)};stopEvent=function(t){t.preventDefault(),t.stopPropagation()},leaveEvent=function(t){t.preventDefault(),t.stopPropagation(),0==--s&&hideDropZone(e)},showDropZone=function(t){$(t).find(".article-content, .richtext").hasClass("is-dropTarget")||$(t).find(".article-content, .richtext").addClass("is-dropTarget")},hideDropZone=function(t){$(t).find(".article-content, .richtext").hasClass("is-dropTarget")&&$(t).find(".article-content, .richtext").removeClass("is-dropTarget")},e&&(t.on(e,"dragleave",leaveEvent),t.on(e,"dragover",stopEvent),t.on(e,"dragenter",r),t.on(e,"drop",function(n){s=0,stopEvent(n),hideDropZone(e),t.processFiles(n.dataTransfer.files)})),n&&t.on(n,"change",function(){t.processFiles(this.files)}),i&&i.on("click",function(){t.uploadCancel()})},processFiles:function(t){console.log("Processing files: "+t.length);var e,n,i,s=this,r=t.length;for(i=0;i<r;i+=1){if(e=t[i],0===e.size){alert("Files with files size zero cannot be uploaded or multiple file uploads are not supported by your browser");break}n=new FileUpload(e),s.uploadFile(n)}},uploadCancel:function(){var t=this;_.each(t._xhrs,function(t){t.abort()}),t._xhrs=[]},uploadFile:function(t){var e=this;if(e.onFileAdded(t),e.activeUploads===e.maxSimultaneousUploads)return console.log("Queue upload: "+t.fileName),void e.uploadsQueue.push(t);e.ajaxUpload(t)},ajaxUpload:function(t){var e,n,i,s,r=this,o=t.file,a=r.data,l=r.key||"file";if(console.log("Beging upload: "+t.fileName),r.activeUploads+=1,e=new window.XMLHttpRequest,r._xhrs.push(e),n=new window.FormData,i=o.name,e.open("POST",r.uploadUrl),App.Ajax&&App.Ajax.token&&e.setRequestHeader("X-CSRF-Token",App.Ajax.token()),e.upload.onloadstart=function(){console.log("Upload started: "+i),t.events.onStart()},e.upload.onprogress=function(e){e.lengthComputable&&t.events.onProgress(e.total,e.loaded)},e.onload=function(e){console.log("Upload completed: "+i),r.activeUploads-=1,t.events.onCompleted(e.target.responseText),r.uploadsQueue.length&&r.ajaxUpload(r.uploadsQueue.shift())},e.abort=function(){console.log("Upload abort"),r.activeUploads-=1,t.events.onAborted(),r.uploadsQueue=[]},e.onerror=function(){console.log("Upload failed: ",t.fileName)},a)for(s in a)a.hasOwnProperty(s)&&(console.log("Adding data: "+s+" = "+a[s]),n.append(s,a[s]));n.append(l,o),e.send(n)},on:function(t,e,n){t&&(t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n)}},module.fileApiSupported=function(){if("boolean"!=typeof supportsFileApi){var t=document.createElement("input");t.setAttribute("type","file"),supportsFileApi=!!t.files}return supportsFileApi},module.initialize=function(t){return new UploadManager(t)},window.html5Upload=module,function(t,e,n){void 0!==module&&module.exports?module.exports=n():"function"==typeof define&&define.amd?define(n):e[t]=n()}("jquery-scrollto",this,function(){var t,e;return t=window.jQuery||require("jquery"),t.propHooks.scrollTop=t.propHooks.scrollLeft={get:function(t,e){var n=null;return"HTML"!==t.tagName&&"BODY"!==t.tagName||("scrollLeft"===e?n=window.scrollX:"scrollTop"===e&&(n=window.scrollY)),null==n&&(n=t[e]),n}},t.Tween.propHooks.scrollTop=t.Tween.propHooks.scrollLeft={get:function(e){return t.propHooks.scrollTop.get(e.elem,e.prop)},set:function(t){"HTML"===t.elem.tagName||"BODY"===t.elem.tagName?(t.options.bodyScrollLeft=t.options.bodyScrollLeft||window.scrollX,t.options.bodyScrollTop=t.options.bodyScrollTop||window.scrollY,"scrollLeft"===t.prop?t.options.bodyScrollLeft=Math.round(t.now):"scrollTop"===t.prop&&(t.options.bodyScrollTop=Math.round(t.now)),window.scrollTo(t.options.bodyScrollLeft,t.options.bodyScrollTop)):t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},e={config:{duration:400,easing:"swing",callback:undefined,durationMode:"each",offsetTop:0,offsetLeft:0},configure:function(n){return t.extend(e.config,n||{}),this},scroll:function(n,i){var s,r,o,a,l,c,u,p,h,d,f,g,m,v,y,b,_;return s=n.pop(),r=s.$container,o=s.$target,r.prop("tagName"),a=t("<span/>").css({position:"absolute",top:"0px",left:"0px"}),l=r.css("position"),r.css({position:"relative"}),a.appendTo(r),d=a.offset().top,f=o.offset().top,g=f-d-parseInt(i.offsetTop,10),m=a.offset().left,v=o.offset().left,y=v-m-parseInt(i.offsetLeft,10),c=r.prop("scrollTop"),u=r.prop("scrollLeft"),a.remove(),r.css({position:l}),b={},_=function(){return 0===n.length?"function"==typeof i.callback&&i.callback():e.scroll(n,i),!0},i.onlyIfOutside&&(p=c+r.height(),h=u+r.width(),c<g&&g<p&&(g=c),u<y&&y<h&&(y=u)),g!==c&&(b.scrollTop=g),y!==u&&(b.scrollLeft=y),r.prop("scrollHeight")===r.width()&&delete b.scrollTop,r.prop("scrollWidth")===r.width()&&delete b.scrollLeft,null!=b.scrollTop||null!=b.scrollLeft?r.animate(b,{duration:i.duration,easing:i.easing,complete:_}):_(),!0},fn:function(n){var i,s,r,o;i=[];var a=t(this);if(0===a.length)return this;for(s=t.extend({},e.config,n),r=a.parent(),o=r.get(0);1===r.length&&o!==document.body&&o!==document;){var l,c;l="visible"!==r.css("overflow-y")&&o.scrollHeight!==o.clientHeight,c="visible"!==r.css("overflow-x")&&o.scrollWidth!==o.clientWidth,(l||c)&&(i.push({$container:r,$target:a}),a=r),r=r.parent(),o=r.get(0)}return i.push({$container:t("html"),$target:a}),"all"===s.durationMode&&(s.duration/=i.length),e.scroll(i,s),this}},t.ScrollTo=t.ScrollTo||e,t.fn.ScrollTo=t.fn.ScrollTo||e.fn,e}),function(t){function e(e,s){this.element=e,this.$element=t(e),this.options=t.extend({},i,s),this._defaults=i,this._name=n,!this.options.placeholder&&this.$element.data("placeholder")&&(this.options.placeholder=this.$element.data("placeholder")),this.preventInput=!1,this.browserMagicKey=App.Browser.magicKey(),this.browserHotkeys=App.Browser.hotkeys(),this.init()}var n="ce",i={debug:!1,mode:"richtext",multiline:!0,imageWidth:"absolute",allowKey:{8:!0,9:!0,16:!0,17:!0,18:!0,20:!0,37:!0,38:!0,39:!0,40:!0,91:!0,92:!0,224:!0},extraAllowKey:{65:!0,67:!0,86:!0,88:!0,90:!0},richTextFormatKey:{66:!0,73:!0,85:!0,83:!0}};e.prototype.init=function(){this.bindEvents(),this.$element.enableObjectResizingShim()},e.prototype.bindEvents=function(){this.$element.on("keydown",this.onKeydown.bind(this)),this.$element.on("paste",this.onPaste.bind(this)),this.$element.on("dragover",this.onDragover.bind(this)),this.$element.on("drop",this.onDrop.bind(this))},e.prototype.toggleBlock=function(e){sel=window.getSelection(),node=t(sel.anchorNode),node.is(e)||node.parent().is(e)||node.parent().parent().is(e)?document.execCommand("formatBlock",!1,"div"):document.execCommand("formatBlock",!1,e)},e.prototype.onKeydown=function(e){if(this.log("keydown",e.keyCode),this.preventInput)return void this.log("preventInput",this.preventInput);if(13===e.keyCode){if(!this.options.multiline)return void e.preventDefault();if(sel=window.getSelection(),sel&&(node=t(sel.anchorNode),node&&node.parent()&&node.parent().is("blockquote")))return e.preventDefault(),document.execCommand("Insertparagraph"),void document.execCommand("Outdent");if(!e.shiftKey&&e.altKey&&!e.ctrlKey&&!e.metaKey)return e.preventDefault(),void this.paste("<br><br>")}var n=!1;if("cmd"==this.browserMagicKey?e.altKey||e.ctrlKey||!e.metaKey||(n=!0):e.altKey||!e.ctrlKey||e.metaKey||(n=!0),n&&this.options.richTextFormatKey[e.keyCode]){if(e.preventDefault(),66==e.keyCode)return document.execCommand("bold"),!0;if(73==e.keyCode)return document.execCommand("italic"),!0;if(85==e.keyCode)return document.execCommand("underline"),!0;if(83==e.keyCode)return document.execCommand("strikeThrough"),!0}var i=!1;if("ctrl+shift"==this.browserHotkeys?!e.altKey&&e.ctrlKey&&!e.metaKey&&e.shiftKey&&(i=!0):e.altKey&&e.ctrlKey&&!e.metaKey&&(i=!0),i&&(this.options.richTextFormatKey[e.keyCode]||49==e.keyCode||50==e.keyCode||51==e.keyCode||66==e.keyCode||70==e.keyCode||90==e.keyCode||70==e.keyCode||73==e.keyCode||75==e.keyCode||76==e.keyCode||85==e.keyCode||86==e.keyCode||88==e.keyCode||90==e.keyCode||89==e.keyCode)){if(e.preventDefault(),"textonly"===this.options.mode)return;if(49==e.keyCode&&this.toggleBlock("h1"),50==e.keyCode&&this.toggleBlock("h2"),51==e.keyCode&&this.toggleBlock("h3"),66==e.keyCode&&document.execCommand("bold"),70==e.keyCode&&document.execCommand("removeFormat"),73==e.keyCode&&document.execCommand("italic"),75==e.keyCode&&document.execCommand("insertOrderedList"),76==e.keyCode&&document.execCommand("insertUnorderedList"),85==e.keyCode&&document.execCommand("underline"),86==e.keyCode&&document.execCommand("strikeThrough"),88==e.keyCode&&document.execCommand("unlink"),89==e.keyCode){var s=App.Utils.htmlRemoveRichtext(this.$element.html());this.$element.html(s)}return 90==e.keyCode&&document.execCommand("insertHorizontalRule"),this.log("content editable richtext key",e.keyCode),!0}return this.allowKey(e)||this.maxLengthOk(1)?void 0:void e.preventDefault()},e.prototype.onPaste=function(e){e.preventDefault(),this.log("paste");var n;if(e.clipboardData)n=e.clipboardData;else if(window.clipboardData)n=window.clipboardData;else{if(!e.originalEvent.clipboardData)throw"No clipboardData support";n=e.originalEvent.clipboardData}if(n&&n.items&&n.items[0]){var i=!1,s=n.items[0];if("file"==s.kind&&("image/png"==s.type||"image/jpeg"==s.type)){this.log("paste image",s),console.log(s);var r=s.getAsFile(),o=new FileReader;o.onload=t.proxy(function(e){var n=e.target.result,i=document.createElement("img");i.src=n,maxWidth=this.$element.width()||500,scaleFactor=2,insert=t.proxy(function(t,e,s){this.log("image inserted"),n=t,i="absolute"==this.options.imageWidth?'<img tabindex="0" style="width: '+e+"px; height: "+s+'px" src="'+n+'">':'<img tabindex="0" style="width: 100%; max-width: '+e+'px;" src="'+n+'">',this.paste(i)},this),App.ImageService.resize(i.src,maxWidth,"auto",scaleFactor,"image/jpeg","auto",insert)},this),o.readAsDataURL(r),i=!0}}if(!i){var a,l;try{a=n.getData("text/html"),l="html",a&&0!==a.length||(l="text",a=n.getData("text/plain")),a&&0!==a.length||(l="text2",a=n.getData("text"))}catch(e){console.log("Sorry, can't insert markup because browser is not supporting it."),l="text3",a=n.getData("text")}if(this.log("paste",l,a),"html"==l?("textonly"===this.options.mode?this.options.multiline?(this.log("htmlRemoveRichtext",a),a=App.Utils.htmlRemoveRichtext(a)):(a=App.Utils.htmlRemoveTags(a),this.log("htmlRemoveTags",a)):(this.log("htmlCleanup",a),a=App.Utils.htmlCleanup(a)),a=a.html(),this.log("text.html()",a),a||(a=App.Utils.text2html(a.text()),this.log("text2html",a))):(a=App.Utils.text2html(a),this.log("text2html",a)),this.maxLengthOk(a.length))return a=App.Utils.removeEmptyLines(a),this.log("insert",a),this.paste(a),!0}},e.prototype.onDragover=function(t){t.stopPropagation(),t.preventDefault(),this.log("dragover")},e.prototype.onDrop=function(e){e.stopPropagation(),e.preventDefault(),this.log("drop");var n;if(window.dataTransfer)n=window.dataTransfer;else{if(!e.originalEvent.dataTransfer)throw"No clipboardData support";n=e.originalEvent.dataTransfer}x=e.clientX,y=e.clientY;var i=n.files[0];if(i.type.match("image.*")){var s=new FileReader;s.onload=function(e){var n=e.target.result,i=document.createElement("img");i.src=n,maxWidth=this.$element.width()||500,scaleFactor=2,insert=function(e,s,r){if(this.log("image inserted"),n=e,i=t("absolute"==this.options.imageWidth?'<img tabindex="0" style="width: '+s+"px; height: "+r+'px" src="'+n+'">':'<img tabindex="0" style="width: 100%; max-width: '+s+'px;" src="'+n+'">'),i=i.get(0),document.caretPositionFromPoint){var o=document.caretPositionFromPoint(x,y);range=document.createRange(),range.setStart(o.offsetNode,o.offset),range.collapse(),range.insertNode(i)}else document.caretRangeFromPoint?(range=document.caretRangeFromPoint(x,y),range.insertNode(i)):console.log("could not find carat")},App.ImageService.resize(i.src,maxWidth,"auto",scaleFactor,"image/jpeg","auto",insert)},s.readAsDataURL(i)}},e.prototype.allowKey=function(t){return!!this.options.allowKey[t.keyCode]||!(!t.ctrlKey&&!t.metaKey||!this.options.extraAllowKey[t.keyCode])},e.prototype.maxLengthOk=function(e){if(!this.options.maxlength)return!0;var n=this.$element.text().length;if(e&&(n+=e),this.log("maxLengthOk",n,this.options.maxlength),n>this.options.maxlength){this.log("maxLengthOk, text too long");var i=this.$element.parent().parent();return i.hasClass("controls")?(i.addClass("has-error"),setTimeout(t.proxy(function(){i.removeClass("has-error")},this),1e3),!1):(this.$element.addClass("invalid"),setTimeout(t.proxy(function(){this.$element.removeClass("invalid")},this),1e3),!1)}return!0},e.prototype.value=function(){return"textonly"===this.options.mode?this.options.multiline?(text_plain=this.$element.text().trim(),text_plain&&""!=text_plain?this.$element.html():text_plain):this.$element.text().trim():(text_plain=this.$element.text().trim(),text_plain&&""!=text_plain||this.$element.find("img").get(0)?this.$element.html().trim():text_plain)},e.prototype.log=function(){App&&App.Log&&App.Log.debug("contenteditable",arguments),this.options.debug&&console.log(this._name,arguments)},e.prototype.paste=function(t){var e=!!window.MSInputMethodContext&&!!document.documentMode;if(document.selection&&document.selection.createRange){var n=document.selection.createRange();n.pasteHTML&&n.pasteHTML(t)}else if(e&&document.getSelection){var n=document.getSelection().getRangeAt(0),i=document.createElement("div");n.surroundContents(i),i.innerHTML=t}else document.execCommand("insertHTML",!1,t)},t.fn[n]=function(i){return this.each(function(){t.data(this,"plugin_"+n)||t.data(this,"plugin_"+n,new e(this,i))})},t.fn.ceg=function(){var e=t.data(this[0],"plugin_"+n);if(e)return e.value()}}(jQuery),function(t){function e(e,n){this.element=e,this.$element=t(e),this.options=t.extend({},s,n),this._defaults=s,this._name=i,document.queryCommandSupported("enableObjectResizing")||this.bindEvents()}function n(e){this.$element=e,this.isResizing=!1,this.$element.data("objectResizingEditor",this),this.$element.addClass("objectResizingEditorActive"),this.$element.wrap('<div class="enableObjectResizingShim" contenteditable="false"></div>');for(var n=0;n<4;n++)this.$element.before('<div class="enableObjectResizingShim-handle"></div>');t(document).one("click.objectResizingEditor",this.destroy.bind(this)),t(document).one("keydown.objectResizingEditor",this.onKeydown.bind(this)),this.$element.on("click.objectResizingEditor",this.stopPropagation.bind(this)),this.$element.parent().find(".enableObjectResizingShim-handle").on("mousedown",this.startResize.bind(this))}var i="enableObjectResizingShim",s={debug:!1};e.prototype.bindEvents=function(){this.$element.on("click","img",this.createEditor.bind(this)),this.$element.on("click",this.destroyEditors.bind(this))},e.prototype.createEditor=function(e){e.stopPropagation(),this.destroyEditors();var i=t(e.currentTarget);i.hasClass("objectResizingEditorActive")||new n(i)},e.prototype.destroyEditors=function(){this.$element.find("img.objectResizingEditorActive").each(function(e,n){editor=t(n).data("objectResizingEditor"),editor&&editor.destroy()})},n.prototype.onKeydown=function(t){switch(this.destroy(),t.keyCode){case 8:this.$element.remove();break;default:t.stopPropagation()}},n.prototype.stopPropagation=function(t){t.stopPropagation()},n.prototype.destroy=function(){this.isResizing||(this.$element.off("click.objectResizingEditor"),t(document).off("click.objectResizingEditor"),t(document).off("keydown.objectResizingEditor"),this.$element.removeClass("objectResizingEditorActive"),this.$element.siblings().remove(),this.$element.unwrap())},n.prototype.startResize=function(e){var n=t(e.currentTarget);this.resizeCorner=n.index(),this.resizeDir=0==this.resizeCorner||3==this.resizeCorner?-1:1,this.startX=e.pageX,this.startWidth=this.$element.width(),this.$clone=this.$element.clone().css({width:"",height:""}).addClass("enableObjectResizingShim-clone enableObjectResizingShim-clone--"+this.resizeCorner),this.$element.after(this.$clone),this.isResizing=!0,t(document).on("mousemove.enableObjectResizing",this.resize.bind(this)),t(document).on("mouseup.enableObjectResizing",this.resizeEnd.bind(this))},n.prototype.resize=function(t){t.preventDefault();var e=t.pageX-this.startX;this.$clone.css("width",this.startWidth+this.resizeDir*e)},n.prototype.resizeEnd=function(){t(document).off("mousemove.enableObjectResizing"),t(document).off("mouseup.enableObjectResizing"),this.$element.css({width:this.$clone.width(),height:this.$clone.height()}),this.$clone.remove(),setTimeout(function(){this.isResizing=!1}.bind(this))},t.fn[i]=function(n){return this.each(function(){t.data(this,"plugin_"+i)||t.data(this,"plugin_"+i,new e(this,n))})}}(jQuery,window);var qq=qq||{},qq=function(t){"use strict";return{hide:function(){return t.style.display="none",this},attach:function(e,n){return t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&t.attachEvent("on"+e,n),function(){qq(t).detach(e,n)}},detach:function(e,n){return t.removeEventListener?t.removeEventListener(e,n,!1):t.attachEvent&&t.detachEvent("on"+e,n),this},contains:function(e){return t==e||(t.contains?t.contains(e):!!(8&e.compareDocumentPosition(t)))},insertBefore:function(e){return e.parentNode.insertBefore(t,e),this},remove:function(){return t.parentNode.removeChild(t),this},css:function(e){return null!=e.opacity&&"string"!=typeof t.style.opacity&&"undefined"!=typeof t.filters&&(e.filter="alpha(opacity="+Math.round(100*e.opacity)+")"),qq.extend(t.style,e),this},hasClass:function(e){return new RegExp("(^| )"+e+"( |$)").test(t.className)},addClass:function(e){
return qq(t).hasClass(e)||(t.className+=" "+e),this},removeClass:function(e){var n=new RegExp("(^| )"+e+"( |$)");return t.className=t.className.replace(n," ").replace(/^\s+|\s+$/g,""),this},getByClass:function(e){if(t.querySelectorAll)return t.querySelectorAll("."+e);for(var n=[],i=t.getElementsByTagName("*"),s=i.length,r=0;r<s;r++)qq(i[r]).hasClass(e)&&n.push(i[r]);return n},children:function(){for(var e=[],n=t.firstChild;n;)1==n.nodeType&&e.push(n),n=n.nextSibling;return e},setText:function(e){return t.innerText=e,t.textContent=e,this},clearText:function(){return qq(t).setText("")}}};qq.log=function(t,e){App&&App.Log&&App.Log.debug(this._name,arguments),window.console&&(e&&"info"!==e?window.console[e]?window.console[e](t):window.console.log("<"+e+"> "+t):window.console.log(t))},qq.isObject=function(t){"use strict";return null!==t&&t&&"object"==typeof t&&t.constructor===Object},qq.extend=function(t,e,n){"use strict";var i;for(i in e)e.hasOwnProperty(i)&&(n&&qq.isObject(e[i])?(t[i]===undefined&&(t[i]={}),qq.extend(t[i],e[i],!0)):t[i]=e[i])},qq.indexOf=function(t,e,n){if(t.indexOf)return t.indexOf(e,n);n=n||0;var i=t.length;for(n<0&&(n+=i);n<i;n++)if(n in t&&t[n]===e)return n;return-1},qq.getUniqueId=function(){var t=0;return function(){return t++}}(),qq.ie=function(){return-1!=navigator.userAgent.indexOf("MSIE")},qq.ie10=function(){return-1!=navigator.userAgent.indexOf("MSIE 10")},qq.safari=function(){return navigator.vendor!=undefined&&-1!=navigator.vendor.indexOf("Apple")},qq.chrome=function(){return navigator.vendor!=undefined&&-1!=navigator.vendor.indexOf("Google")},qq.firefox=function(){return-1!=navigator.userAgent.indexOf("Mozilla")&&navigator.vendor!=undefined&&""==navigator.vendor},qq.windows=function(){return"Win32"==navigator.platform},qq.preventDefault=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},qq.toElement=function(){var t=document.createElement("div");return function(e){t.innerHTML=e;var n=t.firstChild;return t.removeChild(n),n}}(),qq.obj2url=function(t,e,n){var i=[],s="&",r=function(t,n){var s=e?/\[\]$/.test(e)?e:e+"["+n+"]":n;"undefined"!=s&&"undefined"!=n&&i.push("object"==typeof t?qq.obj2url(t,s,!0):"[object Function]"===Object.prototype.toString.call(t)?encodeURIComponent(s)+"="+encodeURIComponent(t()):encodeURIComponent(s)+"="+encodeURIComponent(t))};if(!n&&e)s=/\?/.test(e)?/\?$/.test(e)?"":"&":"?",i.push(e),i.push(qq.obj2url(t));else if("[object Array]"===Object.prototype.toString.call(t)&&void 0!==t)for(var o=0,a=t.length;o<a;++o)r(t[o],o);else if(void 0!==t&&null!==t&&"object"==typeof t)for(var o in t)r(t[o],o);else i.push(encodeURIComponent(e)+"="+encodeURIComponent(t));return e?i.join(s):i.join(s).replace(/^&/,"").replace(/%20/g,"+")},qq.DisposeSupport={_disposers:[],dispose:function(){for(var t;t=this._disposers.shift();)t()},addDisposer:function(t){this._disposers.push(t)},_attach:function(){this.addDisposer(qq(arguments[0]).attach.apply(this,Array.prototype.slice.call(arguments,1)))}},qq.UploadButton=function(t){this._options={element:null,multiple:!1,acceptFiles:null,name:"file",onChange:function(){},hoverClass:"qq-upload-button-hover",focusClass:"qq-upload-button-focus"},qq.extend(this._options,t),qq.extend(this,qq.DisposeSupport),this._element=this._options.element,qq(this._element).css({position:"relative",overflow:"hidden",direction:"ltr"}),this._input=this._createInput()},qq.UploadButton.prototype={getInput:function(){return this._input},reset:function(){this._input.parentNode&&qq(this._input).remove(),qq(this._element).removeClass(this._options.focusClass),this._input=this._createInput()},_createInput:function(){var t=document.createElement("input");this._options.multiple&&t.setAttribute("multiple","multiple"),this._options.acceptFiles&&t.setAttribute("accept",this._options.acceptFiles),t.setAttribute("type","file"),t.setAttribute("name",this._options.name),qq(t).css({position:"absolute",right:0,top:0,fontFamily:"Arial",fontSize:"118px",margin:0,padding:0,cursor:"pointer",opacity:0}),this._element.appendChild(t);var e=this;return this._attach(t,"change",function(){e._options.onChange(t)}),this._attach(t,"mouseover",function(){qq(e._element).addClass(e._options.hoverClass)}),this._attach(t,"mouseout",function(){qq(e._element).removeClass(e._options.hoverClass)}),this._attach(t,"focus",function(){qq(e._element).addClass(e._options.focusClass)}),this._attach(t,"blur",function(){qq(e._element).removeClass(e._options.focusClass)}),window.attachEvent&&t.setAttribute("tabIndex","-1"),t}},qq.FineUploaderBasic=function(t){this._options={debug:!1,button:null,multiple:!0,maxConnections:3,disableCancelForFormUploads:!1,autoUpload:!0,request:{endpoint:"/server/upload",params:{},customHeaders:{},forceMultipart:!1,inputName:"qqfile"},validation:{allowedExtensions:[],sizeLimit:0,minSizeLimit:0,stopOnFirstInvalidFile:!0},callbacks:{onSubmit:function(){},onComplete:function(){},onCancel:function(){},onUpload:function(){},onProgress:function(){},onError:function(){},onAutoRetry:function(){},onManualRetry:function(){},onValidate:function(){}},messages:{typeError:"{file} has an invalid extension. Valid extension(s): {extensions}.",sizeError:"{file} is too large, maximum file size is {sizeLimit}.",minSizeError:"{file} is too small, minimum file size is {minSizeLimit}.",emptyError:"{file} is empty, please select files again without it.",noFilesError:"No files to upload.",onLeave:"The files are being uploaded, if you leave now the upload will be cancelled."},retry:{enableAuto:!1,maxAutoAttempts:3,autoAttemptDelay:5,preventRetryResponseProperty:"preventRetry"}},qq.extend(this._options,t,!0),this._wrapCallbacks(),qq.extend(this,qq.DisposeSupport),this._filesInProgress=0,this._storedFileIds=[],this._autoRetries=[],this._retryTimeouts=[],this._preventRetries=[],this._handler=this._createUploadHandler(),this._options.button&&(this._button=this._createUploadButton(this._options.button)),this._preventLeaveInProgress()},qq.FineUploaderBasic.prototype={log:function(t,e){!this._options.debug||e&&"info"!==e?e&&"info"!==e&&qq.log("[FineUploader] "+t,e):qq.log("[FineUploader] "+t)},setParams:function(t){this._options.request.params=t},getInProgress:function(){return this._filesInProgress},uploadStoredFiles:function(){"use strict";for(;this._storedFileIds.length;)this._filesInProgress++,this._handler.upload(this._storedFileIds.shift(),this._options.request.params)},clearStoredFiles:function(){this._storedFileIds=[]},retry:function(t){return!!this._onBeforeManualRetry(t)&&(this._handler.retry(t),!0)},cancel:function(t){this._handler.cancel(t)},reset:function(){this.log("Resetting uploader..."),this._handler.reset(),this._filesInProgress=0,this._storedFileIds=[],this._autoRetries=[],this._retryTimeouts=[],this._preventRetries=[],this._button.reset()},_createUploadButton:function(t){var e=this,n=new qq.UploadButton({element:t,multiple:this._options.multiple&&qq.UploadHandlerXhr.isSupported(),acceptFiles:this._options.validation.acceptFiles,onChange:function(t){e._onInputChange(t)}});return this.addDisposer(function(){n.dispose()}),n},_createUploadHandler:function(){var t,e=this;return t=qq.UploadHandlerXhr.isSupported()?"UploadHandlerXhr":"UploadHandlerForm",new qq[t]({debug:this._options.debug,endpoint:this._options.request.endpoint,forceMultipart:this._options.request.forceMultipart,maxConnections:this._options.maxConnections,customHeaders:this._options.request.customHeaders,inputName:this._options.request.inputName,demoMode:this._options.demoMode,log:this.log,onProgress:function(t,n,i,s){e._onProgress(t,n,i,s),e._options.callbacks.onProgress(t,n,i,s)},onComplete:function(t,n,i,s){e._onComplete(t,n,i,s),e._options.callbacks.onComplete(t,n,i)},onCancel:function(t,n){e._onCancel(t,n),e._options.callbacks.onCancel(t,n)},onUpload:function(t,n,i){e._onUpload(t,n,i),e._options.callbacks.onUpload(t,n,i)},onAutoRetry:function(t,n,i,s){return e._preventRetries[t]=i[e._options.retry.preventRetryResponseProperty],!!e._shouldAutoRetry(t,n,i)&&(e._maybeParseAndSendUploadError(t,n,i,s),e._options.callbacks.onAutoRetry(t,n,e._autoRetries[t]+1),e._onBeforeAutoRetry(t,n),e._retryTimeouts[t]=setTimeout(function(){e._onAutoRetry(t,n,i)},1e3*e._options.retry.autoAttemptDelay),!0)}})},_preventLeaveInProgress:function(){var t=this;this._attach(window,"beforeunload",function(e){if(t._filesInProgress){var e=e||window.event;return e.returnValue=t._options.messages.onLeave,t._options.messages.onLeave}})},_onSubmit:function(){this._options.autoUpload&&this._filesInProgress++},_onProgress:function(){},_onComplete:function(t,e,n,i){this._filesInProgress--,this._maybeParseAndSendUploadError(t,e,n,i)},_onCancel:function(t){clearTimeout(this._retryTimeouts[t]);var e=qq.indexOf(this._storedFileIds,t);this._options.autoUpload||e<0?this._filesInProgress--:this._options.autoUpload||this._storedFileIds.splice(e,1)},_onUpload:function(){},_onInputChange:function(t){this._handler instanceof qq.UploadHandlerXhr?this._uploadFileList(t.files):this._validateFile(t)&&this._uploadFile(t),this._button.reset()},_onBeforeAutoRetry:function(t,e){this.log("Waiting "+this._options.retry.autoAttemptDelay+" seconds before retrying "+e+"...")},_onAutoRetry:function(t,e){this.log("Retrying "+e+"..."),this._autoRetries[t]++,this._handler.retry(t)},_shouldAutoRetry:function(t){return!(this._preventRetries[t]||!this._options.retry.enableAuto)&&(this._autoRetries[t]===undefined&&(this._autoRetries[t]=0),this._autoRetries[t]<this._options.retry.maxAutoAttempts)},_onBeforeManualRetry:function(t){if(this._preventRetries[t])return this.log("Retries are forbidden for id "+t,"warn"),!1;if(this._handler.isValid(t)){var e=this._handler.getName(t);return!1!==this._options.callbacks.onManualRetry(t,e)&&(this.log("Retrying upload for '"+e+"' (id: "+t+")..."),this._filesInProgress++,!0)}return this.log("'"+t+"' is not a valid file ID","error"),!1},_maybeParseAndSendUploadError:function(t,e,n,i){if(!n.success)if(i&&200!==i.status&&!n.error)this._options.callbacks.onError(t,e,"XHR returned response code "+i.status);else{var s=n.error?n.error:"Upload failure reason unknown";this._options.callbacks.onError(t,e,s)}},_uploadFileList:function(t){var e,n,i;if(e=this._getValidationDescriptors(t),e.length>1&&(i=!1===this._options.callbacks.onValidate(e)),!i)if(t.length>0){for(n=0;n<t.length;n++)if(this._validateFile(t[n]))this._uploadFile(t[n]);else if(this._options.validation.stopOnFirstInvalidFile)return}else this._error("noFilesError","")},_uploadFile:function(t){var e=this._handler.add(t),n=this._handler.getName(e);!1!==this._options.callbacks.onSubmit(e,n)&&(this._onSubmit(e,n),this._options.autoUpload?this._handler.upload(e,this._options.request.params):this._storeFileForLater(e))},_storeFileForLater:function(t){this._storedFileIds.push(t)},_validateFile:function(t){var e,n,i;return e=this._getValidationDescriptor(t),n=e.name,i=e.size,!1!==this._options.callbacks.onValidate([e])&&(this._isAllowedExtension(n)?0===i?(this._error("emptyError",n),!1):i&&this._options.validation.sizeLimit&&i>this._options.validation.sizeLimit?(this._error("sizeError",n),!1):!(i&&i<this._options.validation.minSizeLimit)||(this._error("minSizeError",n),!1):(this._error("typeError",n),!1))},_error:function(t,e){function n(t,e){i=i.replace(t,e)}var i=this._options.messages[t],s=this._options.validation.allowedExtensions.join(", ");return n("{file}",this._formatFileName(e)),n("{extensions}",s),n("{sizeLimit}",this._formatSize(this._options.validation.sizeLimit)),n("{minSizeLimit}",this._formatSize(this._options.validation.minSizeLimit)),this._options.callbacks.onError(null,e,i),i},_formatFileName:function(t){return t.length>33&&(t=t.slice(0,19)+"..."+t.slice(-13)),t},_isAllowedExtension:function(t){var e=-1!==t.indexOf(".")?t.replace(/.*[.]/,"").toLowerCase():"",n=this._options.validation.allowedExtensions;if(!n.length)return!0;for(var i=0;i<n.length;i++)if(n[i].toLowerCase()==e)return!0;return!1},_formatSize:function(t){var e=-1;do{t/=1024,e++}while(t>99);return Math.max(t,.1).toFixed(1)+["kB","MB","GB","TB","PB","EB"][e]},_wrapCallbacks:function(){var t,e;t=this,e=function(e,n,i){try{return n.apply(t,i)}catch(n){t.log("Caught exception in '"+e+"' callback - "+n,"error")}};for(var n in this._options.callbacks)!function(){var i=t._options.callbacks[n];t._options.callbacks[n]=function(){return e(n,i,arguments)}}()},_parseFileName:function(t){return t.value?t.value.replace(/.*(\/|\\)/,""):null!==t.fileName&&t.fileName!==undefined?t.fileName:t.name},_parseFileSize:function(t){var e;return t.value||(e=null!==t.fileSize&&t.fileSize!==undefined?t.fileSize:t.size),e},_getValidationDescriptor:function(t){var e,n,i;return i={},e=this._parseFileName(t),n=this._parseFileSize(t),i.name=e,n&&(i.size=n),i},_getValidationDescriptors:function(t){var e,n;for(n=[],e=0;e<t.length;e++)n.push(t[e]);return n}},qq.FineUploader=function(t){qq.FineUploaderBasic.apply(this,arguments),qq.extend(this._options,{element:null,listElement:null,dragAndDrop:{extraDropzones:[],hideDropzones:!0,disableDefaultDropzone:!1},text:{uploadButton:"Upload a file",cancelButton:"Cancel",retryButton:"Retry",failUpload:"Upload failed",dragZone:"Drop files here to upload",formatProgress:"{percent}% of {total_size}",waitingForResponse:"Processing..."},template:'<div class="qq-uploader">'+(this._options.dragAndDrop&&this._options.dragAndDrop.disableDefaultDropzone?"":'<div class="qq-upload-drop-area"><span>{dragZoneText}</span></div>')+(this._options.button?"":'<div class="qq-upload-button"><div>{uploadButtonText}</div></div>')+(this._options.listElement?"":'<ul class="qq-upload-list"></ul>')+"</div>",fileTemplate:'<li><div class="qq-progress-bar"></div><span class="qq-upload-spinner"></span><span class="qq-upload-finished"></span><span class="qq-upload-file"></span><span class="qq-upload-size"></span><a class="qq-upload-cancel" href="#">{cancelButtonText}</a><a class="qq-upload-retry" href="#">{retryButtonText}</a><span class="qq-upload-status-text">{statusText}</span></li>',classes:{button:"qq-upload-button",drop:"qq-upload-drop-area",dropActive:"qq-upload-drop-area-active",dropDisabled:"qq-upload-drop-area-disabled",list:"qq-upload-list",progressBar:"qq-progress-bar",file:"qq-upload-file",spinner:"qq-upload-spinner",finished:"qq-upload-finished",retrying:"qq-upload-retrying",retryable:"qq-upload-retryable",size:"qq-upload-size",cancel:"qq-upload-cancel",retry:"qq-upload-retry",statusText:"qq-upload-status-text",success:"qq-upload-success",fail:"qq-upload-fail",successIcon:null,failIcon:null},failedUploadTextDisplay:{mode:"default",maxChars:50,responseProperty:"error",enableTooltip:!0},messages:{tooManyFilesError:"You may only drop one file"},retry:{showAutoRetryNote:!0,autoRetryNote:"Retrying {retryNum}/{maxAuto}...",showButton:!1},showMessage:function(t){alert(t)}},!0),qq.extend(this._options,t,!0),this._wrapCallbacks(),this._options.template=this._options.template.replace(/\{dragZoneText\}/g,this._options.text.dragZone),this._options.template=this._options.template.replace(/\{uploadButtonText\}/g,this._options.text.uploadButton),this._options.fileTemplate=this._options.fileTemplate.replace(/\{cancelButtonText\}/g,this._options.text.cancelButton),this._options.fileTemplate=this._options.fileTemplate.replace(/\{retryButtonText\}/g,this._options.text.retryButton),this._options.fileTemplate=this._options.fileTemplate.replace(/\{statusText\}/g,""),this._element=this._options.element,this._element.innerHTML=this._options.template,this._listElement=this._options.listElement||this._find(this._element,"list"),this._classes=this._options.classes,this._button||(this._button=this._createUploadButton(this._find(this._element,"button"))),this._bindCancelAndRetryEvents(),this._setupDragDrop()},qq.extend(qq.FineUploader.prototype,qq.FineUploaderBasic.prototype),qq.extend(qq.FineUploader.prototype,{clearStoredFiles:function(){qq.FineUploaderBasic.prototype.clearStoredFiles.apply(this,arguments),this._listElement.innerHTML=""},addExtraDropzone:function(t){this._setupExtraDropzone(t)},removeExtraDropzone:function(t){var e=this._options.dragAndDrop.extraDropzones;for(var n in e)if(e[n]===t)return this._options.dragAndDrop.extraDropzones.splice(n,1)},getItemByFileId:function(t){for(var e=this._listElement.firstChild;e;){if(e.qqFileId==t)return e;e=e.nextSibling}},reset:function(){qq.FineUploaderBasic.prototype.reset.apply(this,arguments),this._element.innerHTML=this._options.template,this._listElement=this._options.listElement||this._find(this._element,"list"),this._options.button||(this._button=this._createUploadButton(this._find(this._element,"button"))),this._bindCancelAndRetryEvents(),this._setupDragDrop()},_leaving_document_out:function(t){return(qq.chrome()||qq.safari()&&qq.windows())&&0==t.clientX&&0==t.clientY||qq.firefox()&&!t.relatedTarget},_storeFileForLater:function(t){qq.FineUploaderBasic.prototype._storeFileForLater.apply(this,arguments);var e=this.getItemByFileId(t);qq(this._find(e,"spinner")).hide()},_find:function(t,e){var n=qq(t).getByClass(this._options.classes[e])[0];if(!n)throw new Error("element not found "+e);return n},_setupExtraDropzone:function(t){this._options.dragAndDrop.extraDropzones.push(t),this._setupDropzone(t)},_setupDropzone:function(t){var e=this,n=new qq.UploadDropZone({element:t,onEnter:function(n){qq(t).addClass(e._classes.dropActive),n.stopPropagation()},onLeave:function(){},onLeaveNotDescendants:function(){qq(t).removeClass(e._classes.dropActive)},onDrop:function(n){e._options.dragAndDrop.hideDropzones&&qq(t).hide(),qq(t).removeClass(e._classes.dropActive),n.dataTransfer.files.length>1&&!e._options.multiple?e._error("tooManyFilesError",""):e._uploadFileList(n.dataTransfer.files)}});this.addDisposer(function(){n.dispose()}),this._options.dragAndDrop.hideDropzones&&qq(t).hide()},_setupDragDrop:function(){var t,e;t=this,this._options.dragAndDrop.disableDefaultDropzone||(e=this._find(this._element,"drop"),this._options.dragAndDrop.extraDropzones.push(e));var n,i=this._options.dragAndDrop.extraDropzones;for(n=0;n<i.length;n++)this._setupDropzone(i[n]);this._options.dragAndDrop.disableDefaultDropzone||qq.ie()&&!qq.ie10()||this._attach(document,"dragenter",function(){if(!qq(e).hasClass(t._classes.dropDisabled))for(e.style.display="block",n=0;n<i.length;n++)i[n].style.display="block"}),this._attach(document,"dragleave",function(e){if(t._options.dragAndDrop.hideDropzones&&qq.FineUploader.prototype._leaving_document_out(e))for(n=0;n<i.length;n++)qq(i[n]).hide()}),qq(document).attach("drop",function(e){if(t._options.dragAndDrop.hideDropzones)for(n=0;n<i.length;n++)qq(i[n]).hide();e.preventDefault()})},_onSubmit:function(t,e){qq.FineUploaderBasic.prototype._onSubmit.apply(this,arguments),this._addToList(t,e)},_onProgress:function(t,e,n,i){qq.FineUploaderBasic.prototype._onProgress.apply(this,arguments);var s,r,o,a,l,c;s=this.getItemByFileId(t),r=this._find(s,"progressBar"),a=Math.round(n/i*100),n===i?(l=this._find(s,"cancel"),qq(l).hide(),qq(r).hide(),qq(this._find(s,"statusText")).setText(this._options.text.waitingForResponse),o=this._formatSize(i)):(o=this._formatProgress(n,i),qq(r).css({display:"block"})),qq(r).css({width:a+"%"}),c=this._find(s,"size"),qq(c).css({display:"inline"}),qq(c).setText(o)},_onComplete:function(t,e,n){qq.FineUploaderBasic.prototype._onComplete.apply(this,arguments);var i=this.getItemByFileId(t);qq(this._find(i,"statusText")).clearText(),qq(i).removeClass(this._classes.retrying),qq(this._find(i,"progressBar")).hide(),this._options.disableCancelForFormUploads&&!qq.UploadHandlerXhr.isSupported()||qq(this._find(i,"cancel")).hide(),qq(this._find(i,"spinner")).hide(),n.success?(qq(i).addClass(this._classes.success),this._classes.successIcon&&(this._find(i,"finished").style.display="inline-block",qq(i).addClass(this._classes.successIcon))):(qq(i).addClass(this._classes.fail),this._classes.failIcon&&(this._find(i,"finished").style.display="inline-block",qq(i).addClass(this._classes.failIcon)),this._options.retry.showButton&&!this._preventRetries[t]&&qq(i).addClass(this._classes.retryable),this._controlFailureTextDisplay(i,n))},_onUpload:function(t){qq.FineUploaderBasic.prototype._onUpload.apply(this,arguments);var e=this.getItemByFileId(t);this._showSpinner(e)},_onBeforeAutoRetry:function(t){var e,n,i,s,r,o;qq.FineUploaderBasic.prototype._onBeforeAutoRetry.apply(this,arguments),e=this.getItemByFileId(t),n=this._find(e,"progressBar"),this._showCancelLink(e),n.style.width=0,qq(n).hide(),this._options.retry.showAutoRetryNote&&(i=this._find(e,"statusText"),s=this._autoRetries[t]+1,r=this._options.retry.maxAutoAttempts,o=this._options.retry.autoRetryNote.replace(/\{retryNum\}/g,s),o=o.replace(/\{maxAuto\}/g,r),qq(i).setText(o),1===s&&qq(e).addClass(this._classes.retrying))},_onBeforeManualRetry:function(t){if(qq.FineUploaderBasic.prototype._onBeforeManualRetry.apply(this,arguments)){var e=this.getItemByFileId(t);return this._find(e,"progressBar").style.width=0,qq(e).removeClass(this._classes.fail),this._showSpinner(e),this._showCancelLink(e),!0}return!1},_addToList:function(t,e){var n=qq.toElement(this._options.fileTemplate);if(this._options.disableCancelForFormUploads&&!qq.UploadHandlerXhr.isSupported()){var i=this._find(n,"cancel");qq(i).remove()}n.qqFileId=t;var s=this._find(n,"file");qq(s).setText(this._formatFileName(e)),qq(this._find(n,"size")).hide(),this._options.multiple||this._clearList(),this._listElement.appendChild(n)},_clearList:function(){this._listElement.innerHTML="",this.clearStoredFiles()},_bindCancelAndRetryEvents:function(){var t=this,e=this._listElement;this._attach(e,"click",function(e){e=e||window.event;var n=e.target||e.srcElement;if(qq(n).hasClass(t._classes.cancel)||qq(n).hasClass(t._classes.retry)){qq.preventDefault(e);for(var i=n.parentNode;i.qqFileId==undefined;)i=n=n.parentNode;qq(n).hasClass(t._classes.cancel)?(t.cancel(i.qqFileId),qq(i).remove()):(qq(i).removeClass(t._classes.retryable),t.retry(i.qqFileId))}})},_formatProgress:function(t,e){function n(t,e){i=i.replace(t,e)}var i=this._options.text.formatProgress;return n("{percent}",Math.round(t/e*100)),n("{total_size}",this._formatSize(e)),i},_controlFailureTextDisplay:function(t,e){var n,i,s,r,o;n=this._options.failedUploadTextDisplay.mode,i=this._options.failedUploadTextDisplay.maxChars,s=this._options.failedUploadTextDisplay.responseProperty,"custom"===n?(r=e[s],r?r.length>i&&(o=r.substring(0,i)+"..."):(r=this._options.text.failUpload,this.log("'"+s+"' is not a valid property on the server response.","warn")),qq(this._find(t,"statusText")).setText(o||r),this._options.failedUploadTextDisplay.enableTooltip&&this._showTooltip(t,r)):"default"===n?qq(this._find(t,"statusText")).setText(this._options.text.failUpload):"none"!==n&&this.log("failedUploadTextDisplay.mode value of '"+n+"' is not valid","warn")},_showTooltip:function(t,e){t.title=e},_showSpinner:function(t){this._find(t,"spinner").style.display="inline-block"},_showCancelLink:function(t){if(!this._options.disableCancelForFormUploads||qq.UploadHandlerXhr.isSupported()){this._find(t,"cancel").style.display="inline"}},_error:function(){var t=qq.FineUploaderBasic.prototype._error.apply(this,arguments);this._options.showMessage(t)}}),qq.UploadDropZone=function(t){this._options={element:null,onEnter:function(){},onLeave:function(){},onLeaveNotDescendants:function(){},onDrop:function(){}},qq.extend(this._options,t),qq.extend(this,qq.DisposeSupport),this._element=this._options.element,this._disableDropOutside(),this._attachEvents()},qq.UploadDropZone.prototype={_dragover_should_be_canceled:function(){return qq.safari()||qq.firefox()&&qq.windows()},_disableDropOutside:function(){qq.UploadDropZone.dropOutsideDisabled||(this._dragover_should_be_canceled?qq(document).attach("dragover",function(t){t.preventDefault()}):qq(document).attach("dragover",function(t){t.dataTransfer&&(t.dataTransfer.dropEffect="none",t.preventDefault())}),qq.UploadDropZone.dropOutsideDisabled=!0)},_attachEvents:function(){var t=this;t._attach(t._element,"dragover",function(e){if(t._isValidFileDrag(e)){var n=qq.ie()?null:e.dataTransfer.effectAllowed;e.dataTransfer.dropEffect="move"==n||"linkMove"==n?"move":"copy",e.stopPropagation(),e.preventDefault()}}),t._attach(t._element,"dragenter",function(e){t._isValidFileDrag(e)&&t._options.onEnter(e)}),t._attach(t._element,"dragleave",function(e){if(t._isValidFileDrag(e)){t._options.onLeave(e);var n=document.elementFromPoint(e.clientX,e.clientY);qq(this).contains(n)||t._options.onLeaveNotDescendants(e)}}),t._attach(t._element,"drop",function(e){t._isValidFileDrag(e)&&(e.preventDefault(),t._options.onDrop(e))})},_isValidFileDrag:function(t){if(qq.ie()&&!qq.ie10())return!1;var e=t.dataTransfer,n=qq.safari(),i=!!qq.ie10()||"none"!=e.effectAllowed;return e&&i&&(e.files||!n&&e.types.contains&&e.types.contains("Files"))}},qq.UploadHandlerAbstract=function(t){this._options={debug:!1,endpoint:"/upload.php",maxConnections:999,log:function(){},onProgress:function(){},onComplete:function(){},onCancel:function(){},onUpload:function(){},onAutoRetry:function(){}},qq.extend(this._options,t),this._queue=[],this._params=[],this.log=this._options.log},qq.UploadHandlerAbstract.prototype={add:function(){},upload:function(t,e){var n=this._queue.push(t),i={};qq.extend(i,e),this._params[t]=i,n<=this._options.maxConnections&&this._upload(t,this._params[t])},retry:function(t){qq.indexOf(this._queue,t)>=0?this._upload(t,this._params[t]):this.upload(t,this._params[t])},cancel:function(t){this.log("Cancelling "+t),this._cancel(t),this._dequeue(t)},cancelAll:function(){for(var t=0;t<this._queue.length;t++)this._cancel(this._queue[t]);this._queue=[]},getName:function(){},getSize:function(){},getQueue:function(){return this._queue},reset:function(){this.log("Resetting upload handler"),this._queue=[],this._params=[]},_upload:function(){},_cancel:function(){},_dequeue:function(t){var e=qq.indexOf(this._queue,t);this._queue.splice(e,1);var n=this._options.maxConnections;if(this._queue.length>=n&&e<n){var i=this._queue[n-1];this._upload(i,this._params[i])}},isValid:function(){}},qq.UploadHandlerForm=function(){qq.UploadHandlerAbstract.apply(this,arguments),this._inputs={},this._detach_load_events={}},qq.extend(qq.UploadHandlerForm.prototype,qq.UploadHandlerAbstract.prototype),qq.extend(qq.UploadHandlerForm.prototype,{add:function(t){t.setAttribute("name",this._options.inputName);var e="qq-upload-handler-iframe"+qq.getUniqueId();return this._inputs[e]=t,t.parentNode&&qq(t).remove(),e},getName:function(t){return this._inputs[t].value.replace(/.*(\/|\\)/,"")},isValid:function(t){return this._inputs[t]!==undefined},reset:function(){qq.UploadHandlerAbstract.prototype.reset.apply(this,arguments),this._inputs={},this._detach_load_events={}},_cancel:function(t){this._options.onCancel(t,this.getName(t)),delete this._inputs[t],delete this._detach_load_events[t];var e=document.getElementById(t);e&&(e.setAttribute("src","javascript:false;"),qq(e).remove())},_upload:function(t,e){this._options.onUpload(t,this.getName(t),!1);var n=this._inputs[t];if(!n)throw new Error("file with passed id was not added, or already uploaded or cancelled");var i=this.getName(t);e[this._options.inputName]=i;var s=this._createIframe(t),r=this._createForm(s,e);r.appendChild(n);var o=this;return this._attachLoadEvent(s,function(){o.log("iframe loaded");var e=o._getIframeContentJSON(s);setTimeout(function(){o._detach_load_events[t](),delete o._detach_load_events[t],qq(s).remove()},1),!e.success&&o._options.onAutoRetry(t,i,e)||(o._options.onComplete(t,i,e),o._dequeue(t))}),this.log("Sending upload request for "+t),r.submit(),qq(r).remove(),t},_attachLoadEvent:function(t,e){var n=this;this._detach_load_events[t.id]=qq(t).attach("load",function(){if(n.log("Received response for "+t.id),t.parentNode){try{if(t.contentDocument&&t.contentDocument.body&&"false"==t.contentDocument.body.innerHTML)return}catch(t){n.log("Error when attempting to access iframe during handling of upload response ("+t+")","error")}e()}})},_getIframeContentJSON:function(iframe){try{var doc=iframe.contentDocument?iframe.contentDocument:iframe.contentWindow.document,response,innerHTML=doc.body.innerHTML;this.log("converting iframe's innerHTML to JSON"),this.log("innerHTML = "+innerHTML),innerHTML&&innerHTML.match(/^<pre/i)&&(innerHTML=doc.body.firstChild.firstChild.nodeValue),response=eval("("+innerHTML+")")}catch(t){this.log("Error when attempting to parse form upload response ("+t+")","error"),response={success:!1}}return response},_createIframe:function(t){var e=qq.toElement('<iframe src="javascript:false;" name="'+t+'" />');return e.setAttribute("id",t),e.style.display="none",document.body.appendChild(e),e},_createForm:function(t,e){var n=this._options.demoMode?"GET":"POST",i=qq.toElement('<form method="'+n+'" enctype="multipart/form-data"></form>'),s=qq.obj2url(e,this._options.endpoint);return i.setAttribute("action",s),i.setAttribute("target",t.name),i.style.display="none",document.body.appendChild(i),i}}),qq.UploadHandlerXhr=function(){qq.UploadHandlerAbstract.apply(this,arguments),this._files=[],this._xhrs=[],this._loaded=[]},qq.UploadHandlerXhr.isSupported=function(){var t=document.createElement("input");return t.type="file","multiple"in t&&"undefined"!=typeof File&&"undefined"!=typeof FormData&&"undefined"!=typeof(new XMLHttpRequest).upload},qq.extend(qq.UploadHandlerXhr.prototype,qq.UploadHandlerAbstract.prototype),qq.extend(qq.UploadHandlerXhr.prototype,{add:function(t){if(!(t instanceof File))throw new Error("Passed obj in not a File (in qq.UploadHandlerXhr)");return this._files.push(t)-1},getName:function(t){var e=this._files[t];return null!==e.fileName&&e.fileName!==undefined?e.fileName:e.name},getSize:function(t){var e=this._files[t];return null!=e.fileSize?e.fileSize:e.size},getLoaded:function(t){return this._loaded[t]||0},isValid:function(t){return this._files[t]!==undefined},reset:function(){qq.UploadHandlerAbstract.prototype.reset.apply(this,arguments),this._files=[],this._xhrs=[],this._loaded=[]},_upload:function(t,e){this._options.onUpload(t,this.getName(t),!0);var n=this._files[t],i=this.getName(t);this.getSize(t);this._loaded[t]=0;var s=this._xhrs[t]=new XMLHttpRequest,r=this;s.upload.onprogress=function(e){e.lengthComputable&&(r._loaded[t]=e.loaded,r._options.onProgress(t,i,e.loaded,e.total))},s.onreadystatechange=function(){4==s.readyState&&r._onComplete(t,s)},e=e||{},e[this._options.inputName]=i;var o=qq.obj2url(e,this._options.endpoint),a=this._options.demoMode?"GET":"POST";if(s.open(a,o,!0),s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.setRequestHeader("X-File-Name",encodeURIComponent(i)),s.setRequestHeader("Cache-Control","no-cache"),this._options.forceMultipart){var l=new FormData;l.append(this._options.inputName,n),n=l}else s.setRequestHeader("Content-Type","application/octet-stream"),s.setRequestHeader("X-Mime-Type",n.type);for(key in this._options.customHeaders)s.setRequestHeader(key,this._options.customHeaders[key]);this.log("Sending upload request for "+t),s.send(n)},_onComplete:function(id,xhr){"use strict";if(this._files[id]){var name=this.getName(id),size=this.getSize(id),response;this._options.onProgress(id,name,size,size),this.log("xhr - server response received for "+id),this.log("responseText = "+xhr.responseText);try{response="function"==typeof JSON.parse?JSON.parse(xhr.responseText):eval("("+xhr.responseText+")")}catch(t){this.log("Error when attempting to parse xhr response text ("+t+")","error"),response={}}(200===xhr.status&&response.success||!this._options.onAutoRetry(id,name,response,xhr))&&(this._options.onComplete(id,name,response,xhr),this._xhrs[id]=null,this._dequeue(id))}},_cancel:function(t){this._options.onCancel(t,this.getName(t)),this._files[t]=null,this._xhrs[t]&&(this._xhrs[t].abort(),this._xhrs[t]=null)}}),function(t){"use strict";var e,n,i,s,r,o,a,l,c,u;o=["uploaderType"],i=function(t){if(t){var i=l(t);a(i),e("basic"===r("uploaderType")?new qq.FineUploaderBasic(i):new qq.FineUploader(i))}return n},s=function(t,e){var i=n.data("fineuploader");if(!e)return i===undefined?null:i[t];i===undefined&&(i={}),i[t]=e,n.data("fineuploader",i)},e=function(t){return s("uploader",t)},r=function(t,e){return s(t,e)},a=function(e){var i=e.callbacks={};t.each((new qq.FineUploaderBasic)._options.callbacks,function(t){var e,s;e=/^on(\w+)/.exec(t)[1],e=e.substring(0,1).toLowerCase()+e.substring(1),s=n,i[t]=function(){var t=Array.prototype.slice.call(arguments);return s.triggerHandler(e,t)}})},l=function(e,i){var s,a;if(s=i===undefined?"basic"!==e.uploaderType?{element:n[0]}:{}:i,t.each(e,function(e,n){t.inArray(e,o)>=0?r(e,n):n instanceof t?s[e]=n[0]:t.isPlainObject(n)?(s[e]={},l(n,s[e])):t.isArray(n)?(a=[],t.each(n,function(e,n){
n instanceof t?t.merge(a,n):a.push(n)}),s[e]=a):s[e]=n}),i===undefined)return s},c=function(n){return"string"===t.type(n)&&!n.match(/^_/)&&e()[n]!==undefined},u=function(t){return e()[t].apply(e(),Array.prototype.slice.call(arguments,1))},t.fn.fineUploader=function(s){return n=this,e()&&c(s)?u.apply(this,arguments):"object"!=typeof s&&s?(t.error("Method "+s+" does not exist on jQuery.fineUploader"),this):i.apply(this,arguments)}}(jQuery),function(t){function e(e){if("string"==typeof e.data&&(e.data={keys:e.data}),e.data&&e.data.keys&&"string"==typeof e.data.keys){var n=e.handler,i=e.data.keys.toLowerCase().split(" ");e.handler=function(e){if(this===e.target||!(t.hotkeys.options.filterInputAcceptingElements&&t.hotkeys.textInputTypes.test(e.target.nodeName)||t.hotkeys.options.filterContentEditable&&t(e.target).attr("contenteditable")||t.hotkeys.options.filterTextInputs&&t.inArray(e.target.type,t.hotkeys.textAcceptingInputTypes)>-1)){var s="keypress"!==e.type&&t.hotkeys.specialKeys[e.which],r=String.fromCharCode(e.which).toLowerCase(),o="",a={};t.each(["alt","ctrl","shift"],function(t,n){e[n+"Key"]&&s!==n&&(o+=n+"+")}),e.metaKey&&!e.ctrlKey&&"meta"!==s&&(o+="meta+"),e.metaKey&&"meta"!==s&&o.indexOf("alt+ctrl+shift+")>-1&&(o=o.replace("alt+ctrl+shift+","hyper+")),s?a[o+s]=!0:(a[o+r]=!0,a[o+t.hotkeys.shiftNums[r]]=!0,"shift+"===o&&(a[t.hotkeys.shiftNums[r]]=!0));for(var l=0,c=i.length;l<c;l++)if(a[i[l]])return n.apply(this,arguments)}}}}t.hotkeys={version:"0.2.0",specialKeys:{8:"backspace",9:"tab",10:"return",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",59:";",61:"=",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"},textAcceptingInputTypes:["text","password","number","email","url","range","date","month","week","time","datetime","datetime-local","search","color","tel"],textInputTypes:/textarea|input|select/i,options:{filterInputAcceptingElements:!1,filterTextInputs:!1,filterContentEditable:!1}},t.each(["keydown","keyup","keypress"],function(){t.event.special[this]={add:e}})}(jQuery||this.jQuery||window.jQuery),function(t,e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(t.jQuery)}(this,function(t){"function"!=typeof Object.create&&(Object.create=function(t){function e(){}return e.prototype=t,new e});var e={init:function(e){return this.options=t.extend({},t.noty.defaults,e),this.options.layout=this.options.custom?t.noty.layouts.inline:t.noty.layouts[this.options.layout],t.noty.themes[this.options.theme]?this.options.theme=t.noty.themes[this.options.theme]:e.themeClassName=this.options.theme,delete e.layout,delete e.theme,this.options=t.extend({},this.options,this.options.layout.options),this.options.id="noty_"+(new Date).getTime()*Math.floor(1e6*Math.random()),this.options=t.extend({},this.options,e),this._build(),this},_build:function(){var e=t('<div class="noty_bar noty_type_'+this.options.type+'"></div>').attr("id",this.options.id);if(e.append(this.options.template).find(".noty_text").html(this.options.text),this.$bar=null!==this.options.layout.parent.object?t(this.options.layout.parent.object).css(this.options.layout.parent.css).append(e):e,this.options.themeClassName&&this.$bar.addClass(this.options.themeClassName).addClass("noty_container_type_"+this.options.type),this.options.buttons){this.options.closeWith=[],this.options.timeout=!1;var n=t("<div/>").addClass("noty_buttons");null!==this.options.layout.parent.object?this.$bar.find(".noty_bar").append(n):this.$bar.append(n);var i=this;t.each(this.options.buttons,function(e,n){var s=t("<button/>").addClass(n.addClass?n.addClass:"gray").html(n.text).attr("id",n.id?n.id:"button-"+e).attr("title",n.title).appendTo(i.$bar.find(".noty_buttons")).on("click",function(e){t.isFunction(n.onClick)&&n.onClick.call(s,i,e)})})}this.$message=this.$bar.find(".noty_message"),this.$closeButton=this.$bar.find(".noty_close"),this.$buttons=this.$bar.find(".noty_buttons"),t.noty.store[this.options.id]=this},show:function(){var e=this;return e.options.custom?e.options.custom.find(e.options.layout.container.selector).append(e.$bar):t(e.options.layout.container.selector).append(e.$bar),e.options.theme&&e.options.theme.style&&e.options.theme.style.apply(e),"function"===t.type(e.options.layout.css)?this.options.layout.css.apply(e.$bar):e.$bar.css(this.options.layout.css||{}),e.$bar.addClass(e.options.layout.addClass),e.options.layout.container.style.apply(t(e.options.layout.container.selector),[e.options.within]),e.showing=!0,e.options.theme&&e.options.theme.style&&e.options.theme.callback.onShow.apply(this),t.inArray("click",e.options.closeWith)>-1&&e.$bar.css("cursor","pointer").one("click",function(t){e.stopPropagation(t),e.options.callback.onCloseClick&&e.options.callback.onCloseClick.apply(e),e.close()}),t.inArray("hover",e.options.closeWith)>-1&&e.$bar.one("mouseenter",function(){e.close()}),t.inArray("button",e.options.closeWith)>-1&&e.$closeButton.one("click",function(t){e.stopPropagation(t),e.close()}),-1==t.inArray("button",e.options.closeWith)&&e.$closeButton.remove(),e.options.callback.onShow&&e.options.callback.onShow.apply(e),"string"==typeof e.options.animation.open?(e.$bar.css("height",e.$bar.innerHeight()),e.$bar.on("click",function(){e.wasClicked=!0}),e.$bar.show().addClass(e.options.animation.open).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){e.options.callback.afterShow&&e.options.callback.afterShow.apply(e),e.showing=!1,e.shown=!0,e.hasOwnProperty("wasClicked")&&(e.$bar.off("click",function(){e.wasClicked=!0}),e.close())})):e.$bar.animate(e.options.animation.open,e.options.animation.speed,e.options.animation.easing,function(){e.options.callback.afterShow&&e.options.callback.afterShow.apply(e),e.showing=!1,e.shown=!0}),e.options.timeout&&e.$bar.delay(e.options.timeout).promise().done(function(){e.close()}),this},close:function(){if(!(this.closed||this.$bar&&this.$bar.hasClass("i-am-closing-now"))){var e=this;if(this.showing)return void e.$bar.queue(function(){e.close.apply(e)});if(!this.shown&&!this.showing){var n=[];return t.each(t.noty.queue,function(t,i){i.options.id!=e.options.id&&n.push(i)}),void(t.noty.queue=n)}e.$bar.addClass("i-am-closing-now"),e.options.callback.onClose&&e.options.callback.onClose.apply(e),"string"==typeof e.options.animation.close?e.$bar.addClass(e.options.animation.close).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){e.options.callback.afterClose&&e.options.callback.afterClose.apply(e),e.closeCleanUp()}):e.$bar.clearQueue().stop().animate(e.options.animation.close,e.options.animation.speed,e.options.animation.easing,function(){e.options.callback.afterClose&&e.options.callback.afterClose.apply(e)}).promise().done(function(){e.closeCleanUp()})}},closeCleanUp:function(){var e=this;e.options.modal&&(t.notyRenderer.setModalCount(-1),0==t.notyRenderer.getModalCount()&&t(".noty_modal").fadeOut(e.options.animation.fadeSpeed,function(){t(this).remove()})),t.notyRenderer.setLayoutCountFor(e,-1),0==t.notyRenderer.getLayoutCountFor(e)&&t(e.options.layout.container.selector).remove(),"undefined"!=typeof e.$bar&&null!==e.$bar&&("string"==typeof e.options.animation.close?(e.$bar.css("transition","all 100ms ease").css("border",0).css("margin",0).height(0),e.$bar.one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){e.$bar.remove(),e.$bar=null,e.closed=!0,e.options.theme.callback&&e.options.theme.callback.onClose&&e.options.theme.callback.onClose.apply(e)})):(e.$bar.remove(),e.$bar=null,e.closed=!0)),delete t.noty.store[e.options.id],e.options.theme.callback&&e.options.theme.callback.onClose&&e.options.theme.callback.onClose.apply(e),e.options.dismissQueue||(t.noty.ontap=!0,t.notyRenderer.render()),e.options.maxVisible>0&&e.options.dismissQueue&&t.notyRenderer.render()},setText:function(t){return this.closed||(this.options.text=t,this.$bar.find(".noty_text").html(t)),this},setType:function(t){return this.closed||(this.options.type=t,this.options.theme.style.apply(this),this.options.theme.callback.onShow.apply(this)),this},setTimeout:function(t){if(!this.closed){var e=this;this.options.timeout=t,e.$bar.delay(e.options.timeout).promise().done(function(){e.close()})}return this},stopPropagation:function(t){t=t||window.event,"undefined"!=typeof t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},closed:!1,showing:!1,shown:!1};t.notyRenderer={},t.notyRenderer.init=function(n){var i=Object.create(e).init(n);return i.options.killer&&t.noty.closeAll(),i.options.force?t.noty.queue.unshift(i):t.noty.queue.push(i),t.notyRenderer.render(),"object"==t.noty.returns?i:i.options.id},t.notyRenderer.render=function(){var e=t.noty.queue[0];"object"===t.type(e)?e.options.dismissQueue?e.options.maxVisible>0?t(e.options.layout.container.selector+" > li").length<e.options.maxVisible&&t.notyRenderer.show(t.noty.queue.shift()):t.notyRenderer.show(t.noty.queue.shift()):t.noty.ontap&&(t.notyRenderer.show(t.noty.queue.shift()),t.noty.ontap=!1):t.noty.ontap=!0},t.notyRenderer.show=function(e){e.options.modal&&(t.notyRenderer.createModalFor(e),t.notyRenderer.setModalCount(1)),e.options.custom?0==e.options.custom.find(e.options.layout.container.selector).length?e.options.custom.append(t(e.options.layout.container.object).addClass("i-am-new")):e.options.custom.find(e.options.layout.container.selector).removeClass("i-am-new"):0==t(e.options.layout.container.selector).length?t("body").append(t(e.options.layout.container.object).addClass("i-am-new")):t(e.options.layout.container.selector).removeClass("i-am-new"),t.notyRenderer.setLayoutCountFor(e,1),e.show()},t.notyRenderer.createModalFor=function(e){if(0==t(".noty_modal").length){var n=t("<div/>").addClass("noty_modal").addClass(e.options.theme).data("noty_modal_count",0);e.options.theme.modal&&e.options.theme.modal.css&&n.css(e.options.theme.modal.css),n.prependTo(t("body")).fadeIn(e.options.animation.fadeSpeed),t.inArray("backdrop",e.options.closeWith)>-1&&n.on("click",function(){t.noty.closeAll()})}},t.notyRenderer.getLayoutCountFor=function(e){return t(e.options.layout.container.selector).data("noty_layout_count")||0},t.notyRenderer.setLayoutCountFor=function(e,n){return t(e.options.layout.container.selector).data("noty_layout_count",t.notyRenderer.getLayoutCountFor(e)+n)},t.notyRenderer.getModalCount=function(){return t(".noty_modal").data("noty_modal_count")||0},t.notyRenderer.setModalCount=function(e){return t(".noty_modal").data("noty_modal_count",t.notyRenderer.getModalCount()+e)},t.fn.noty=function(e){return e.custom=t(this),t.notyRenderer.init(e)},t.noty={},t.noty.queue=[],t.noty.ontap=!0,t.noty.layouts={},t.noty.themes={},t.noty.returns="object",t.noty.store={},t.noty.get=function(e){return!!t.noty.store.hasOwnProperty(e)&&t.noty.store[e]},t.noty.close=function(e){return!!t.noty.get(e)&&t.noty.get(e).close()},t.noty.setText=function(e,n){return!!t.noty.get(e)&&t.noty.get(e).setText(n)},t.noty.setType=function(e,n){return!!t.noty.get(e)&&t.noty.get(e).setType(n)},t.noty.clearQueue=function(){t.noty.queue=[]},t.noty.closeAll=function(){t.noty.clearQueue(),t.each(t.noty.store,function(t,e){e.close()})};var n=window.alert;return t.noty.consumeAlert=function(e){window.alert=function(n){e?e.text=n:e={text:n},t.notyRenderer.init(e)}},t.noty.stopConsumeAlert=function(){window.alert=n},t.noty.defaults={layout:"top",theme:"defaultTheme",type:"alert",text:"",dismissQueue:!0,template:'<div class="noty_message"><span class="noty_text"></span><div class="noty_close"></div></div>',animation:{open:{height:"toggle"},close:{height:"toggle"},easing:"swing",speed:500,fadeSpeed:"fast"},timeout:!1,force:!1,modal:!1,maxVisible:5,killer:!1,closeWith:["click"],callback:{onShow:function(){},afterShow:function(){},onClose:function(){},afterClose:function(){},onCloseClick:function(){}},buttons:!1},t(window).on("resize",function(){t.each(t.noty.layouts,function(e,n){n.container.style.apply(t(n.container.selector))})}),window.noty=function(e){return t.notyRenderer.init(e)},t.noty.layouts.bottom={name:"bottom",options:{},container:{object:'<ul id="noty_bottom_layout_container" />',selector:"ul#noty_bottom_layout_container",style:function(){t(this).css({bottom:0,left:"5%",position:"fixed",width:"90%",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:9999999})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""},t.noty.layouts.bottomCenter={name:"bottomCenter",options:{},container:{object:'<ul id="noty_bottomCenter_layout_container" />',selector:"ul#noty_bottomCenter_layout_container",style:function(){t(this).css({bottom:20,left:0,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),t(this).css({left:(t(window).width()-t(this).outerWidth(!1))/2+"px"})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},t.noty.layouts.bottomLeft={name:"bottomLeft",options:{},container:{object:'<ul id="noty_bottomLeft_layout_container" />',selector:"ul#noty_bottomLeft_layout_container",style:function(){t(this).css({bottom:20,left:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&t(this).css({left:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},t.noty.layouts.bottomRight={name:"bottomRight",options:{},container:{object:'<ul id="noty_bottomRight_layout_container" />',selector:"ul#noty_bottomRight_layout_container",style:function(){t(this).css({bottom:20,right:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&t(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},t.noty.layouts.center={name:"center",options:{},container:{object:'<ul id="noty_center_layout_container" />',selector:"ul#noty_center_layout_container",style:function(){t(this).css({position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7});var e=t(this).clone().css({visibility:"hidden",display:"block",position:"absolute",top:0,left:0}).attr("id","dupe");t("body").append(e),e.find(".i-am-closing-now").remove(),e.find("li").css("display","block");var n=e.height();e.remove(),t(this).hasClass("i-am-new")?t(this).css({left:(t(window).width()-t(this).outerWidth(!1))/2+"px",top:(t(window).height()-n)/2+"px"}):t(this).animate({left:(t(window).width()-t(this).outerWidth(!1))/2+"px",top:(t(window).height()-n)/2+"px"},500)}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},t.noty.layouts.centerLeft={name:"centerLeft",options:{},container:{object:'<ul id="noty_centerLeft_layout_container" />',selector:"ul#noty_centerLeft_layout_container",style:function(){t(this).css({left:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7});var e=t(this).clone().css({visibility:"hidden",display:"block",position:"absolute",top:0,left:0}).attr("id","dupe");t("body").append(e),e.find(".i-am-closing-now").remove(),e.find("li").css("display","block");var n=e.height();e.remove(),t(this).hasClass("i-am-new")?t(this).css({top:(t(window).height()-n)/2+"px"}):t(this).animate({top:(t(window).height()-n)/2+"px"},500),window.innerWidth<600&&t(this).css({left:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},t.noty.layouts.centerRight={name:"centerRight",options:{},container:{object:'<ul id="noty_centerRight_layout_container" />',selector:"ul#noty_centerRight_layout_container",style:function(){t(this).css({right:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7});var e=t(this).clone().css({visibility:"hidden",display:"block",position:"absolute",top:0,left:0}).attr("id","dupe");t("body").append(e),e.find(".i-am-closing-now").remove(),e.find("li").css("display","block");var n=e.height();e.remove(),t(this).hasClass("i-am-new")?t(this).css({top:(t(window).height()-n)/2+"px"}):t(this).animate({top:(t(window).height()-n)/2+"px"},500),window.innerWidth<600&&t(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},t.noty.layouts.inline={name:"inline",options:{},container:{object:'<ul class="noty_inline_layout_container" />',selector:"ul.noty_inline_layout_container",style:function(){t(this).css({width:"100%",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:9999999})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""},t.noty.layouts.top={name:"top",options:{},container:{object:'<ul id="noty_top_layout_container" />',selector:"ul#noty_top_layout_container",style:function(){t(this).css({top:0,left:"5%",position:"fixed",width:"90%",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:9999999})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""},t.noty.layouts.topCenter={name:"topCenter",options:{},container:{object:'<ul id="noty_topCenter_layout_container" />',selector:"ul#noty_topCenter_layout_container",style:function(){t(this).css({top:20,left:0,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),t(this).css({left:(t(window).width()-t(this).outerWidth(!1))/2+"px"})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},t.noty.layouts.topLeft={name:"topLeft",options:{},container:{object:'<ul id="noty_topLeft_layout_container" />',selector:"ul#noty_topLeft_layout_container",style:function(){t(this).css({top:20,left:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&t(this).css({left:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},t.noty.layouts.topRight={name:"topRight",options:{},container:{object:'<ul id="noty_topRight_layout_container" />',selector:"ul#noty_topRight_layout_container",style:function(){t(this).css({top:20,right:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&t(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},window.noty}),function(t,e){function n(e,n){this.element=e,this.$element=t(e),this.options=t.extend({},s,n),this._defaults=s,this._name=i,this.collection=[],this.active=!1,this.buffer="",this._width=380,t.data(e,"plugin_ce")&&(this.ce=t.data(e,"plugin_ce")),this.init()}var i="textmodule",s={debug:!1};n.prototype.init=function(){this.renderBase(),this.bindEvents()},n.prototype.bindEvents=function(){this.$element.on("keydown",this.onKeydown.bind(this)),this.$element.on("keypress",this.onKeypress.bind(this)),this.$element.on("focus",this.onFocus.bind(this))},n.prototype.onFocus=function(){this.close()},n.prototype.onKeydown=function(t){if(this.isActive()){if(27===t.keyCode)return t.preventDefault(),t.stopPropagation(),void this.close();if(13===t.keyCode){t.preventDefault(),t.stopPropagation();var e=this.$widget.find(".dropdown-menu li.is-active").data("id");return e||(e=this.$widget.find(".dropdown-menu li:hover").data("id")),e||(e=this.$widget.find(".dropdown-menu li:first-child").data("id")),void this.take(e)}if(37===t.keyCode||39===t.keyCode)return t.preventDefault(),void t.stopPropagation();if(38===t.keyCode||40===t.keyCode){t.preventDefault(),t.stopPropagation();var n=this.$widget.find(".dropdown-menu li.is-active");n.removeClass("is-active"),38==t.keyCode&&n.prev().size()?n=n.prev():40==t.keyCode&&n.next().size()&&(n=n.next()),n.addClass("is-active");var i=this.$widget.find(".dropdown-menu");if(!n.get(0))return;if(n.position().top<0)i.scrollTop(i.scrollTop()+n.position().top);else if(n.position().top+n.height()>i.height()){var s=n.position().top+n.height()-i.height();i.scrollTop(i.scrollTop()+s)}}}if(27===t.keyCode&&this.close(),8===t.keyCode&&this.buffer){if("::"===this.buffer)return this.close(!0),void t.preventDefault();var r=this.buffer.length;this.buffer=this.buffer.substr(0,r-1),this.log("BS backspace",this.buffer),this.result(this.buffer.substr(2,r-1))}},n.prototype.onKeypress=function(t){if(this.log("BUFF",this.buffer,t.keyCode,String.fromCharCode(t.which)),16!==t.keyCode&&13!==t.keyCode&&37!==t.keyCode&&38!==t.keyCode&&39!==t.keyCode&&40!==t.keyCode&&(":"===this.buffer&&":"!==String.fromCharCode(t.which)&&(this.buffer=""),":"===this.buffer&&":"===String.fromCharCode(t.which)&&(this.buffer=this.buffer+":"),this.buffer||":"!==String.fromCharCode(t.which)||(this.buffer=this.buffer+":"),this.buffer&&"::"===this.buffer.substr(0,2))){var e=String.fromCharCode(t.which);e&&":"!==e&&8!=t.which&&(this.buffer=this.buffer+e),this.log("BUFF HINT",this.buffer,this.buffer.length,t.which,String.fromCharCode(t.which)),this.isActive()||this.open(),this.result(this.buffer.substr(2,this.buffer.length))}},n.prototype.renderBase=function(){this.$element.after('<div class="shortcut dropdown"><ul class="dropdown-menu" style="max-height: 200px;"></ul></div>'),this.$widget=this.$element.next(),this.$widget.on("mousedown","li",t.proxy(this.onEntryClick,this)),this.$widget.on("mouseenter","li",t.proxy(this.onMouseEnter,this))},n.prototype.movePosition=function(){if(this._position){var t=this.$element.outerHeight()+2,e=this.$widget.find("ul").height(),n="rtl"==document.dir,i=-(e+t)+this._position.top,s=this._position.left-6,r=this.$element.innerWidth();n&&(s=r-s),s+this._width>r&&(s=this.$element.innerWidth()-this._width);var o={top:i,width:this._width};o[n?"right":"left"]=s,this.$widget.css(o)}},n.prototype.updatePosition=function(){if(this.$widget.find(".dropdown-menu").scrollTop(300),this.$element.is(":visible")){this.getFirstRange().cloneRange().pasteHtml('<span id="js-cursor-position"></span>'),this._position=t("#js-cursor-position").position(),t("#js-cursor-position").remove(),this._position&&this.movePosition()}},n.prototype.open=function(){this.active=!0,this.updatePosition(),this.renderBase(),this.$widget.addClass("open"),t(e).on("click.textmodule",t.proxy(this.close,this))},n.prototype.close=function(n){this.$widget.removeClass("open"),n&&this.active&&this.cutInput(!0),this.buffer="",this.active=!1,this.$widget.remove(),t(e).off("click.textmodule")},n.prototype.isActive=function(){return this.active},n.prototype.paste=function(t){var n=!!e.MSInputMethodContext&&!!document.documentMode;if(document.selection&&document.selection.createRange){var i=document.selection.createRange();i.pasteHTML&&i.pasteHTML(t)}else if(n&&document.getSelection){var i=document.getSelection().getRangeAt(0),s=document.createElement("div");i.surroundContents(s),s.innerHTML=t}else document.execCommand("insertHTML",!1,t)},n.prototype.cut=function(t){var e=this.getFirstRange();if(e){var n=e.cloneRange();if(start=e.startOffset-t.length,start<0&&(start=0),start){n.setStart(e.startContainer,start-1),n.setEnd(e.startContainer,start);var i=n.toString();" "===i&&(start-=1)}n.setStart(e.startContainer,start),n.setEnd(e.startContainer,e.startOffset),n.deleteContents(),start&&" "===i&&this.paste("&nbsp;")}},n.prototype.onMouseEnter=function(e){this.$widget.find(".is-active").removeClass("is-active"),t(e.currentTarget).addClass("is-active")},n.prototype.onEntryClick=function(e){e.preventDefault();var n=t(e.currentTarget).data("id");this.take(n)},n.prototype.take=function(t){if(!t)return void this.close(!0);for(var e=0;e<this.collection.length;e++){var n=this.collection[e];if(n.id==t){var i=n.content;return this.cutInput(),this.paste(i),void this.close(!0)}}},n.prototype.getFirstRange=function(){var t=rangy.getSelection();return t.rangeCount?t.getRangeAt(0):null},n.prototype.cutInput=function(){this.buffer&&this.$element.text()&&(this.cut(this.buffer),this.buffer="")},n.prototype.result=function(e){var n=_.filter(this.collection,function(t){var n=new RegExp(e,"i");return t.name&&t.name.match(n)?t:t.keywords&&t.keywords.match(n)?t:void 0});n.reverse(),this.$widget.find("ul").html(""),this.log("result",e,n);for(var i=t(),s=0;s<n.length;s++){var r=n[s],o=t("<li>");o.attr("data-id",r.id),o.text(r.name),o.addClass("u-clickable u-textTruncate"),s==n.length-1&&o.addClass("is-active"),r.keywords&&o.append(t("<kbd>").text(r.keywords)),i=i.add(o)}this.$widget.find("ul").append(i).scrollTop(9999),this.movePosition()},n.prototype.log=function(){App&&App.Log&&App.Log.debug(this._name,arguments),this.options.debug&&console.log(this._name,arguments)},t.fn[i]=function(e){return this.each(function(){t.data(this,"plugin_"+i)||t.data(this,"plugin_"+i,new n(this,e))})}}(jQuery,window),function(t){var e=t(window);t.fn.visible=function(t,n,i){if(!(this.length<1)){var s=this.length>1?this.eq(0):this,r=s.get(0),o=e.width(),a=e.height(),i=i||"both",l=!0!==n||r.offsetWidth*r.offsetHeight;if("function"==typeof r.getBoundingClientRect){var c=r.getBoundingClientRect(),u=c.top>=0&&c.top<a,p=c.bottom>0&&c.bottom<=a,h=c.left>=0&&c.left<o,d=c.right>0&&c.right<=o,f=t?u||p:u&&p,g=t?h||d:h&&d;if("both"===i)return l&&f&&g;if("vertical"===i)return l&&f;if("horizontal"===i)return l&&g}else{var m=e.scrollTop(),v=m+a,y=e.scrollLeft(),b=y+o,_=s.offset(),w=_.top,k=w+s.height(),T=_.left,S=T+s.width(),C=!0===t?k:w,A=!0===t?w:k,x=!0===t?S:T,j=!0===t?T:S;if("both"===i)return!!l&&A<=v&&C>=m&&j<=b&&x>=y;if("vertical"===i)return!!l&&A<=v&&C>=m;if("horizontal"===i)return!!l&&j<=b&&x>=y}}}}(jQuery),function(){function t(t){this.tokens=[],this.tokens.links={},this.options=t||c.defaults,this.rules=u.normal,this.options.gfm&&(this.options.tables?this.rules=u.tables:this.rules=u.gfm)}function e(t,e){if(this.options=e||c.defaults,this.links=t,this.rules=p.normal,this.renderer=this.options.renderer||new n,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=p.breaks:this.rules=p.gfm:this.options.pedantic&&(this.rules=p.pedantic)}function n(t){this.options=t||{}}function i(t){this.tokens=[],this.token=null,this.options=t||c.defaults,this.options.renderer=this.options.renderer||new n,this.renderer=this.options.renderer,this.renderer.options=this.options}function s(t,e){return t.replace(e?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function r(t){return t.replace(/&([#\w]+);/g,function(t,e){return e=e.toLowerCase(),"colon"===e?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""})}function o(t,e){return t=t.source,e=e||"",function n(i,s){return i?(s=s.source||s,s=s.replace(/(^|[^\[])\^/g,"$1"),t=t.replace(i,s),n):new RegExp(t,e)}}function a(){}function l(t){for(var e,n,i=1;i<arguments.length;i++){e=arguments[i];for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t}function c(e,n,r){if(r||"function"==typeof n){r||(r=n,n=null),n=l({},c.defaults,n||{});var o,a,u=n.highlight,p=0;try{o=t.lex(e,n)}catch(t){return r(t)}a=o.length;var h=function(t){if(t)return n.highlight=u,r(t);var e;try{e=i.parse(o,n)}catch(e){t=e}return n.highlight=u,t?r(t):r(null,e)};if(!u||u.length<3)return h();if(delete n.highlight,!a)return h();for(;p<o.length;p++)!function(t){"code"!==t.type?--a||h():u(t.text,t.lang,function(e,n){return e?h(e):null==n||n===t.text?--a||h():(t.text=n,t.escaped=!0,void(--a||h()))})}(o[p])}else try{return n&&(n=l({},c.defaults,n)),i.parse(t.lex(e,n),n)}catch(t){if(t.message+="\nPlease report this to https://github.com/chjj/marked.",(n||c.defaults).silent)return"<p>An error occured:</p><pre>"+s(t.message+"",!0)+"</pre>";throw t}}var u={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:a,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:a,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:a,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};u.bullet=/(?:[*+-]|\d+\.)/,u.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,u.item=o(u.item,"gm")(/bull/g,u.bullet)(),u.list=o(u.list)(/bull/g,u.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+u.def.source+")")(),u.blockquote=o(u.blockquote)("def",u.def)(),u._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",u.html=o(u.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,u._tag)(),u.paragraph=o(u.paragraph)("hr",u.hr)("heading",u.heading)("lheading",u.lheading)("blockquote",u.blockquote)("tag","<"+u._tag)("def",u.def)(),u.normal=l({},u),u.gfm=l({},u.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\s*\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),u.gfm.paragraph=o(u.paragraph)("(?!","(?!"+u.gfm.fences.source.replace("\\1","\\2")+"|"+u.list.source.replace("\\1","\\3")+"|")(),u.tables=l({},u.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),t.rules=u,t.lex=function(e,n){return new t(n).lex(e)},t.prototype.lex=function(t){return t=t.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(t,!0)},t.prototype.token=function(t,e,n){for(var i,s,r,o,a,l,c,p,h,t=t.replace(/^ +$/gm,"");t;)if((r=this.rules.newline.exec(t))&&(t=t.substring(r[0].length),r[0].length>1&&this.tokens.push({type:"space"})),r=this.rules.code.exec(t))t=t.substring(r[0].length),r=r[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?r:r.replace(/\n+$/,"")});else if(r=this.rules.fences.exec(t))t=t.substring(r[0].length),this.tokens.push({type:"code",lang:r[2],text:r[3]||""});else if(r=this.rules.heading.exec(t))t=t.substring(r[0].length),this.tokens.push({type:"heading",depth:r[1].length,text:r[2]});else if(e&&(r=this.rules.nptable.exec(t))){for(t=t.substring(r[0].length),l={type:"table",header:r[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:r[3].replace(/\n$/,"").split("\n")},p=0;p<l.align.length;p++)/^ *-+: *$/.test(l.align[p])?l.align[p]="right":/^ *:-+: *$/.test(l.align[p])?l.align[p]="center":/^ *:-+ *$/.test(l.align[p])?l.align[p]="left":l.align[p]=null;for(p=0;p<l.cells.length;p++)l.cells[p]=l.cells[p].split(/ *\| */);this.tokens.push(l)}else if(r=this.rules.lheading.exec(t))t=t.substring(r[0].length),this.tokens.push({type:"heading",depth:"="===r[2]?1:2,text:r[1]});else if(r=this.rules.hr.exec(t))t=t.substring(r[0].length),this.tokens.push({type:"hr"});else if(r=this.rules.blockquote.exec(t))t=t.substring(r[0].length),this.tokens.push({type:"blockquote_start"}),r=r[0].replace(/^ *> ?/gm,""),this.token(r,e,!0),this.tokens.push({type:"blockquote_end"});else if(r=this.rules.list.exec(t)){for(t=t.substring(r[0].length),o=r[2],this.tokens.push({type:"list_start",ordered:o.length>1}),r=r[0].match(this.rules.item),i=!1,h=r.length,p=0;p<h;p++)l=r[p],c=l.length,l=l.replace(/^ *([*+-]|\d+\.) +/,""),~l.indexOf("\n ")&&(c-=l.length,l=this.options.pedantic?l.replace(/^ {1,4}/gm,""):l.replace(new RegExp("^ {1,"+c+"}","gm"),"")),this.options.smartLists&&p!==h-1&&(a=u.bullet.exec(r[p+1])[0],o===a||o.length>1&&a.length>1||(t=r.slice(p+1).join("\n")+t,p=h-1)),s=i||/\n\n(?!\s*$)/.test(l),p!==h-1&&(i="\n"===l.charAt(l.length-1),s||(s=i)),this.tokens.push({type:s?"loose_item_start":"list_item_start"}),this.token(l,!1,n),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(r=this.rules.html.exec(t))t=t.substring(r[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",
pre:!this.options.sanitizer&&("pre"===r[1]||"script"===r[1]||"style"===r[1]),text:r[0]});else if(!n&&e&&(r=this.rules.def.exec(t)))t=t.substring(r[0].length),this.tokens.links[r[1].toLowerCase()]={href:r[2],title:r[3]};else if(e&&(r=this.rules.table.exec(t))){for(t=t.substring(r[0].length),l={type:"table",header:r[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:r[3].replace(/(?: *\| *)?\n$/,"").split("\n")},p=0;p<l.align.length;p++)/^ *-+: *$/.test(l.align[p])?l.align[p]="right":/^ *:-+: *$/.test(l.align[p])?l.align[p]="center":/^ *:-+ *$/.test(l.align[p])?l.align[p]="left":l.align[p]=null;for(p=0;p<l.cells.length;p++)l.cells[p]=l.cells[p].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(l)}else if(e&&(r=this.rules.paragraph.exec(t)))t=t.substring(r[0].length),this.tokens.push({type:"paragraph",text:"\n"===r[1].charAt(r[1].length-1)?r[1].slice(0,-1):r[1]});else if(r=this.rules.text.exec(t))t=t.substring(r[0].length),this.tokens.push({type:"text",text:r[0]});else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0));return this.tokens};var p={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:a,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:a,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};p._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,p._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,p.link=o(p.link)("inside",p._inside)("href",p._href)(),p.reflink=o(p.reflink)("inside",p._inside)(),p.normal=l({},p),p.pedantic=l({},p.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),p.gfm=l({},p.normal,{escape:o(p.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:o(p.text)("]|","~]|")("|","|https?://|")()}),p.breaks=l({},p.gfm,{br:o(p.br)("{2,}","*")(),text:o(p.gfm.text)("{2,}","*")()}),e.rules=p,e.output=function(t,n,i){return new e(n,i).output(t)},e.prototype.output=function(t){for(var e,n,i,r,o="";t;)if(r=this.rules.escape.exec(t))t=t.substring(r[0].length),o+=r[1];else if(r=this.rules.autolink.exec(t))t=t.substring(r[0].length),"@"===r[2]?(n=":"===r[1].charAt(6)?this.mangle(r[1].substring(7)):this.mangle(r[1]),i=this.mangle("mailto:")+n):(n=s(r[1]),i=n),o+=this.renderer.link(i,null,n);else if(this.inLink||!(r=this.rules.url.exec(t))){if(r=this.rules.tag.exec(t))!this.inLink&&/^<a /i.test(r[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(r[0])&&(this.inLink=!1),t=t.substring(r[0].length),o+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):s(r[0]):r[0];else if(r=this.rules.link.exec(t))t=t.substring(r[0].length),this.inLink=!0,o+=this.outputLink(r,{href:r[2],title:r[3]}),this.inLink=!1;else if((r=this.rules.reflink.exec(t))||(r=this.rules.nolink.exec(t))){if(t=t.substring(r[0].length),e=(r[2]||r[1]).replace(/\s+/g," "),!(e=this.links[e.toLowerCase()])||!e.href){o+=r[0].charAt(0),t=r[0].substring(1)+t;continue}this.inLink=!0,o+=this.outputLink(r,e),this.inLink=!1}else if(r=this.rules.strong.exec(t))t=t.substring(r[0].length),o+=this.renderer.strong(this.output(r[2]||r[1]));else if(r=this.rules.em.exec(t))t=t.substring(r[0].length),o+=this.renderer.em(this.output(r[2]||r[1]));else if(r=this.rules.code.exec(t))t=t.substring(r[0].length),o+=this.renderer.codespan(s(r[2],!0));else if(r=this.rules.br.exec(t))t=t.substring(r[0].length),o+=this.renderer.br();else if(r=this.rules.del.exec(t))t=t.substring(r[0].length),o+=this.renderer.del(this.output(r[1]));else if(r=this.rules.text.exec(t))t=t.substring(r[0].length),o+=this.renderer.text(s(this.smartypants(r[0])));else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0))}else t=t.substring(r[0].length),n=s(r[1]),i=n,o+=this.renderer.link(i,null,n);return o},e.prototype.outputLink=function(t,e){var n=s(e.href),i=e.title?s(e.title):null;return"!"!==t[0].charAt(0)?this.renderer.link(n,i,this.output(t[1])):this.renderer.image(n,i,s(t[1]))},e.prototype.smartypants=function(t){return this.options.smartypants?t.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026"):t},e.prototype.mangle=function(t){if(!this.options.mangle)return t;for(var e,n="",i=t.length,s=0;s<i;s++)e=t.charCodeAt(s),Math.random()>.5&&(e="x"+e.toString(16)),n+="&#"+e+";";return n},n.prototype.code=function(t,e,n){if(this.options.highlight){var i=this.options.highlight(t,e);null!=i&&i!==t&&(n=!0,t=i)}return e?'<pre><code class="'+this.options.langPrefix+s(e,!0)+'">'+(n?t:s(t,!0))+"\n</code></pre>\n":"<pre><code>"+(n?t:s(t,!0))+"\n</code></pre>"},n.prototype.blockquote=function(t){return"<blockquote>\n"+t+"</blockquote>\n"},n.prototype.html=function(t){return t},n.prototype.heading=function(t,e,n){return"<h"+e+' id="'+this.options.headerPrefix+n.toLowerCase().replace(/[^\w]+/g,"-")+'">'+t+"</h"+e+">\n"},n.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},n.prototype.list=function(t,e){var n=e?"ol":"ul";return"<"+n+">\n"+t+"</"+n+">\n"},n.prototype.listitem=function(t){return"<li>"+t+"</li>\n"},n.prototype.paragraph=function(t){return"<p>"+t+"</p>\n"},n.prototype.table=function(t,e){return"<table>\n<thead>\n"+t+"</thead>\n<tbody>\n"+e+"</tbody>\n</table>\n"},n.prototype.tablerow=function(t){return"<tr>\n"+t+"</tr>\n"},n.prototype.tablecell=function(t,e){var n=e.header?"th":"td";return(e.align?"<"+n+' style="text-align:'+e.align+'">':"<"+n+">")+t+"</"+n+">\n"},n.prototype.strong=function(t){return"<strong>"+t+"</strong>"},n.prototype.em=function(t){return"<em>"+t+"</em>"},n.prototype.codespan=function(t){return"<code>"+t+"</code>"},n.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},n.prototype.del=function(t){return"<del>"+t+"</del>"},n.prototype.link=function(t,e,n){if(this.options.sanitize){try{var i=decodeURIComponent(r(t)).replace(/[^\w:]/g,"").toLowerCase()}catch(t){return""}if(0===i.indexOf("javascript:")||0===i.indexOf("vbscript:"))return""}var s='<a href="'+t+'"';return e&&(s+=' title="'+e+'"'),s+=">"+n+"</a>"},n.prototype.image=function(t,e,n){var i='<img src="'+t+'" alt="'+n+'"';return e&&(i+=' title="'+e+'"'),i+=this.options.xhtml?"/>":">"},n.prototype.text=function(t){return t},i.parse=function(t,e,n){return new i(e,n).parse(t)},i.prototype.parse=function(t){this.inline=new e(t.links,this.options,this.renderer),this.tokens=t.reverse();for(var n="";this.next();)n+=this.tok();return n},i.prototype.next=function(){return this.token=this.tokens.pop()},i.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},i.prototype.parseText=function(){for(var t=this.token.text;"text"===this.peek().type;)t+="\n"+this.next().text;return this.inline.output(t)},i.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var t,e,n,i,s="",r="";for(n="",t=0;t<this.token.header.length;t++)({header:!0,align:this.token.align[t]}),n+=this.renderer.tablecell(this.inline.output(this.token.header[t]),{header:!0,align:this.token.align[t]});for(s+=this.renderer.tablerow(n),t=0;t<this.token.cells.length;t++){for(e=this.token.cells[t],n="",i=0;i<e.length;i++)n+=this.renderer.tablecell(this.inline.output(e[i]),{header:!1,align:this.token.align[i]});r+=this.renderer.tablerow(n)}return this.renderer.table(s,r);case"blockquote_start":for(var r="";"blockquote_end"!==this.next().type;)r+=this.tok();return this.renderer.blockquote(r);case"list_start":for(var r="",o=this.token.ordered;"list_end"!==this.next().type;)r+=this.tok();return this.renderer.list(r,o);case"list_item_start":for(var r="";"list_item_end"!==this.next().type;)r+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(r);case"loose_item_start":for(var r="";"list_item_end"!==this.next().type;)r+=this.tok();return this.renderer.listitem(r);case"html":var a=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(a);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},a.exec=a,c.options=c.setOptions=function(t){return l(c.defaults,t),c},c.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,sanitizer:null,mangle:!0,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new n,xhtml:!1},c.Parser=i,c.parser=i.parse,c.Renderer=n,c.Lexer=t,c.lexer=t.lex,c.InlineLexer=e,c.inlineLexer=e.output,c.parse=c,void 0!==module&&"object"==typeof exports?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):this.marked=c}.call(function(){return this||("undefined"!=typeof window?window:global)}()),window.Modernizr=function(t,e,n){function i(t){m.cssText=t}function s(t,e){return typeof t===e}function r(t,e){return!!~(""+t).indexOf(e)}function o(t,e){for(var i in t){var s=t[i];if(!r(s,"-")&&m[s]!==n)return"pfx"!=e||s}return!1}function a(t,e,i){for(var r in t){var o=e[t[r]];if(o!==n)return!1===i?t[r]:s(o,"function")?o.bind(i||e):o}return!1}function l(t,e,n){var i=t.charAt(0).toUpperCase()+t.slice(1),r=(t+" "+y.join(i+" ")+i).split(" ");return s(e,"string")||s(e,"undefined")?o(r,e):(r=(t+" "+b.join(i+" ")+i).split(" "),a(r,e,n))}var c,u,p="2.8.3",h={},d=e.documentElement,f="modernizr",g=e.createElement(f),m=g.style,v=({}.toString,"Webkit Moz O ms"),y=v.split(" "),b=v.toLowerCase().split(" "),_={},w=[],k=w.slice,T={}.hasOwnProperty;u=s(T,"undefined")||s(T.call,"undefined")?function(t,e){return e in t&&s(t.constructor.prototype[e],"undefined")}:function(t,e){return T.call(t,e)},Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;if("function"!=typeof e)throw new TypeError;var n=k.call(arguments,1),i=function(){if(this instanceof i){var s=function(){};s.prototype=e.prototype;var r=new s,o=e.apply(r,n.concat(k.call(arguments)));return Object(o)===o?o:r}return e.apply(t,n.concat(k.call(arguments)))};return i});for(var S in _)u(_,S)&&(c=S.toLowerCase(),h[c]=_[S](),w.push((h[c]?"":"no-")+c));return h.addTest=function(t,e){if("object"==typeof t)for(var i in t)u(t,i)&&h.addTest(i,t[i]);else{if(t=t.toLowerCase(),h[t]!==n)return h;e="function"==typeof e?e():e,"undefined"!=typeof enableClasses&&enableClasses&&(d.className+=" "+(e?"":"no-")+t),h[t]=e}return h},i(""),g=null,h._version=p,h._domPrefixes=b,h._cssomPrefixes=y,h.testProp=function(t){return o([t])},h.testAllProps=l,h.prefixed=function(t,e,n){return e?l(t,e,n):l(t,"pfx")},h}(0,this.document),function(t,e){function n(n,c,u){var d=[];c=1==c?{entropy:!0}:c||{};var y=o(r(c.entropy?[n,l(t)]:null==n?a():n,3),d),b=new i(d),_=function(){for(var t=b.g(h),e=g,n=0;t<m;)t=(t+n)*p,e*=p,n=b.g(1);for(;t>=v;)t/=2,e/=2,n>>>=1;return(t+n)/e};return _.int32=function(){return 0|b.g(4)},_.quick=function(){return b.g(4)/4294967296},_["double"]=_,o(l(b.S),t),(c.pass||u||function(t,n,i,r){return r&&(r.S&&s(r,b),t.state=function(){return s(b,{})}),i?(e[f]=t,n):t})(_,y,"global"in c?c.global:this==e,c.state)}function i(t){var e,n=t.length,i=this,s=0,r=i.i=i.j=0,o=i.S=[];for(n||(t=[n++]);s<p;)o[s]=s++;for(s=0;s<p;s++)o[s]=o[r=y&r+t[s%n]+(e=o[s])],o[r]=e;(i.g=function(t){for(var e,n=0,s=i.i,r=i.j,o=i.S;t--;)e=o[s=y&s+1],n=n*p+o[y&(o[s]=o[r=y&r+e])+(o[r]=e)];return i.i=s,i.j=r,n})(p)}function s(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function r(t,e){var n,i=[],s=typeof t;if(e&&"object"==s)for(n in t)try{i.push(r(t[n],e-1))}catch(t){}return i.length?i:"string"==s?t:t+"\0"}function o(t,e){for(var n,i=t+"",s=0;s<i.length;)e[y&s]=y&(n^=19*e[y&s])+i.charCodeAt(s++);return l(e)}function a(){try{if(c)return l(c.randomBytes(p));var e=new Uint8Array(p);return(u.crypto||u.msCrypto).getRandomValues(e),l(e)}catch(e){var n=u.navigator,i=n&&n.plugins;return[+new Date,u,i,u.screen,l(t)]}}function l(t){return String.fromCharCode.apply(0,t)}var c,u=this,p=256,h=6,d=52,f="random",g=e.pow(p,h),m=e.pow(2,d),v=2*m,y=p-1;if(e["seed"+f]=n,o(e.random(),t),"object"==typeof module&&module.exports){module.exports=n;try{c=require("crypto")}catch(t){}}else"function"==typeof define&&define.amd&&define(function(){return n})}([],Math),function(t){function e(t,i){if(t=t||"",i=i||{},t instanceof e)return t;if(!(this instanceof e))return new e(t,i);var s=n(t);this._originalInput=t,this._r=s.r,this._g=s.g,this._b=s.b,this._a=s.a,this._roundA=q(100*this._a)/100,this._format=i.format||s.format,this._gradientType=i.gradientType,this._r<1&&(this._r=q(this._r)),this._g<1&&(this._g=q(this._g)),this._b<1&&(this._b=q(this._b)),this._ok=s.ok,this._tc_id=U++}function n(t){var e={r:0,g:0,b:0},n=1,s=null,o=null,l=null,c=!1,u=!1;return"string"==typeof t&&(t=M(t)),"object"==typeof t&&(R(t.r)&&R(t.g)&&R(t.b)?(e=i(t.r,t.g,t.b),c=!0,u="%"===String(t.r).substr(-1)?"prgb":"rgb"):R(t.h)&&R(t.s)&&R(t.v)?(s=E(t.s),o=E(t.v),e=a(t.h,s,o),c=!0,u="hsv"):R(t.h)&&R(t.s)&&R(t.l)&&(s=E(t.s),l=E(t.l),e=r(t.h,s,l),c=!0,u="hsl"),t.hasOwnProperty("a")&&(n=t.a)),n=C(n),{ok:c,format:t.format||u,r:F(255,B(e.r,0)),g:F(255,B(e.g,0)),b:F(255,B(e.b,0)),a:n}}function i(t,e,n){return{r:255*A(t,255),g:255*A(e,255),b:255*A(n,255)}}function s(t,e,n){t=A(t,255),e=A(e,255),n=A(n,255);var i,s,r=B(t,e,n),o=F(t,e,n),a=(r+o)/2;if(r==o)i=s=0;else{var l=r-o;switch(s=a>.5?l/(2-r-o):l/(r+o),r){case t:i=(e-n)/l+(e<n?6:0);break;case e:i=(n-t)/l+2;break;case n:i=(t-e)/l+4}i/=6}return{h:i,s:s,l:a}}function r(t,e,n){function i(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}var s,r,o;if(t=A(t,360),e=A(e,100),n=A(n,100),0===e)s=r=o=n;else{var a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;s=i(l,a,t+1/3),r=i(l,a,t),o=i(l,a,t-1/3)}return{r:255*s,g:255*r,b:255*o}}function o(t,e,n){t=A(t,255),e=A(e,255),n=A(n,255);var i,s,r=B(t,e,n),o=F(t,e,n),a=r,l=r-o;if(s=0===r?0:l/r,r==o)i=0;else{switch(r){case t:i=(e-n)/l+(e<n?6:0);break;case e:i=(n-t)/l+2;break;case n:i=(t-e)/l+4}i/=6}return{h:i,s:s,v:a}}function a(e,n,i){e=6*A(e,360),n=A(n,100),i=A(i,100);var s=t.floor(e),r=e-s,o=i*(1-n),a=i*(1-r*n),l=i*(1-(1-r)*n),c=s%6;return{r:255*[i,a,o,o,l,i][c],g:255*[l,i,i,a,o,o][c],b:255*[o,o,l,i,i,a][c]}}function l(t,e,n,i){var s=[P(q(t).toString(16)),P(q(e).toString(16)),P(q(n).toString(16))];return i&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0):s.join("")}function c(t,e,n,i,s){var r=[P(q(t).toString(16)),P(q(e).toString(16)),P(q(n).toString(16)),P(O(i))];return s&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)&&r[3].charAt(0)==r[3].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0)+r[3].charAt(0):r.join("")}function u(t,e,n,i){return[P(O(i)),P(q(t).toString(16)),P(q(e).toString(16)),P(q(n).toString(16))].join("")}function p(t,n){n=0===n?0:n||10;var i=e(t).toHsl();return i.s-=n/100,i.s=x(i.s),e(i)}function h(t,n){n=0===n?0:n||10;var i=e(t).toHsl();return i.s+=n/100,i.s=x(i.s),e(i)}function d(t){return e(t).desaturate(100)}function f(t,n){n=0===n?0:n||10;var i=e(t).toHsl();return i.l+=n/100,i.l=x(i.l),e(i)}function g(t,n){n=0===n?0:n||10;var i=e(t).toRgb();return i.r=B(0,F(255,i.r-q(-n/100*255))),i.g=B(0,F(255,i.g-q(-n/100*255))),i.b=B(0,F(255,i.b-q(-n/100*255))),e(i)}function m(t,n){n=0===n?0:n||10;var i=e(t).toHsl();return i.l-=n/100,i.l=x(i.l),e(i)}function v(t,n){var i=e(t).toHsl(),s=(i.h+n)%360;return i.h=s<0?360+s:s,e(i)}function y(t){var n=e(t).toHsl();return n.h=(n.h+180)%360,e(n)}function b(t){var n=e(t).toHsl(),i=n.h;return[e(t),e({h:(i+120)%360,s:n.s,l:n.l}),e({h:(i+240)%360,s:n.s,l:n.l})]}function _(t){var n=e(t).toHsl(),i=n.h;return[e(t),e({h:(i+90)%360,s:n.s,l:n.l}),e({h:(i+180)%360,s:n.s,l:n.l}),e({h:(i+270)%360,s:n.s,l:n.l})]}function w(t){var n=e(t).toHsl(),i=n.h;return[e(t),e({h:(i+72)%360,s:n.s,l:n.l}),e({h:(i+216)%360,s:n.s,l:n.l})]}function k(t,n,i){n=n||6,i=i||30;var s=e(t).toHsl(),r=360/i,o=[e(t)];for(s.h=(s.h-(r*n>>1)+720)%360;--n;)s.h=(s.h+r)%360,o.push(e(s));return o}function T(t,n){n=n||6;for(var i=e(t).toHsv(),s=i.h,r=i.s,o=i.v,a=[],l=1/n;n--;)a.push(e({h:s,s:r,v:o})),o=(o+l)%1;return a}function S(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function C(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function A(e,n){I(e)&&(e="100%");var i=D(e);return e=F(n,B(0,parseFloat(e))),i&&(e=parseInt(e*n,10)/100),t.abs(e-n)<1e-6?1:e%n/parseFloat(n)}function x(t){return F(1,B(0,t))}function j(t){return parseInt(t,16)}function I(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)}function D(t){return"string"==typeof t&&-1!=t.indexOf("%")}function P(t){return 1==t.length?"0"+t:""+t}function E(t){return t<=1&&(t=100*t+"%"),t}function O(e){return t.round(255*parseFloat(e)).toString(16)}function N(t){return j(t)/255}function R(t){return!!G.CSS_UNIT.exec(t)}function M(t){t=t.replace(z,"").replace(L,"").toLowerCase();var e=!1;if(W[t])t=W[t],e=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};var n;return(n=G.rgb.exec(t))?{r:n[1],g:n[2],b:n[3]}:(n=G.rgba.exec(t))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=G.hsl.exec(t))?{h:n[1],s:n[2],l:n[3]}:(n=G.hsla.exec(t))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=G.hsv.exec(t))?{h:n[1],s:n[2],v:n[3]}:(n=G.hsva.exec(t))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=G.hex8.exec(t))?{r:j(n[1]),g:j(n[2]),b:j(n[3]),a:N(n[4]),format:e?"name":"hex8"}:(n=G.hex6.exec(t))?{r:j(n[1]),g:j(n[2]),b:j(n[3]),format:e?"name":"hex"}:(n=G.hex4.exec(t))?{r:j(n[1]+""+n[1]),g:j(n[2]+""+n[2]),b:j(n[3]+""+n[3]),a:N(n[4]+""+n[4]),format:e?"name":"hex8"}:!!(n=G.hex3.exec(t))&&{r:j(n[1]+""+n[1]),g:j(n[2]+""+n[2]),b:j(n[3]+""+n[3]),format:e?"name":"hex"}}function $(t){var e,n;return t=t||{level:"AA",size:"small"},e=(t.level||"AA").toUpperCase(),n=(t.size||"small").toLowerCase(),"AA"!==e&&"AAA"!==e&&(e="AA"),"small"!==n&&"large"!==n&&(n="small"),{level:e,size:n}}var z=/^\s+/,L=/\s+$/,U=0,q=t.round,F=t.min,B=t.max,J=t.random;e.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var e,n,i,s,r,o,a=this.toRgb();return e=a.r/255,n=a.g/255,i=a.b/255,s=e<=.03928?e/12.92:t.pow((e+.055)/1.055,2.4),r=n<=.03928?n/12.92:t.pow((n+.055)/1.055,2.4),o=i<=.03928?i/12.92:t.pow((i+.055)/1.055,2.4),.2126*s+.7152*r+.0722*o},setAlpha:function(t){return this._a=C(t),this._roundA=q(100*this._a)/100,this},toHsv:function(){var t=o(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=o(this._r,this._g,this._b),e=q(360*t.h),n=q(100*t.s),i=q(100*t.v);return 1==this._a?"hsv("+e+", "+n+"%, "+i+"%)":"hsva("+e+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var t=s(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=s(this._r,this._g,this._b),e=q(360*t.h),n=q(100*t.s),i=q(100*t.l);return 1==this._a?"hsl("+e+", "+n+"%, "+i+"%)":"hsla("+e+", "+n+"%, "+i+"%, "+this._roundA+")"},toHex:function(t){return l(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return c(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:q(this._r),g:q(this._g),b:q(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+q(this._r)+", "+q(this._g)+", "+q(this._b)+")":"rgba("+q(this._r)+", "+q(this._g)+", "+q(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:q(100*A(this._r,255))+"%",g:q(100*A(this._g,255))+"%",b:q(100*A(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+q(100*A(this._r,255))+"%, "+q(100*A(this._g,255))+"%, "+q(100*A(this._b,255))+"%)":"rgba("+q(100*A(this._r,255))+"%, "+q(100*A(this._g,255))+"%, "+q(100*A(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(H[l(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var n="#"+u(this._r,this._g,this._b,this._a),i=n,s=this._gradientType?"GradientType = 1, ":"";if(t){var r=e(t);i="#"+u(r._r,r._g,r._b,r._a)}return"progid:DXImageTransform.Microsoft.gradient("+s+"startColorstr="+n+",endColorstr="+i+")"},toString:function(t){var e=!!t;t=t||this._format;var n=!1,i=this._a<1&&this._a>=0;return e||!i||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex4"===t&&(n=this.toHex8String(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),"hsv"===t&&(n=this.toHsvString()),n||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return e(this.toString())},_applyModification:function(t,e){var n=t.apply(null,[this].concat([].slice.call(e)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(f,arguments)},brighten:function(){return this._applyModification(g,arguments)},darken:function(){return this._applyModification(m,arguments)},desaturate:function(){return this._applyModification(p,arguments)},saturate:function(){return this._applyModification(h,arguments)},greyscale:function(){return this._applyModification(d,arguments)},spin:function(){return this._applyModification(v,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(k,arguments)},complement:function(){return this._applyCombination(y,arguments)},monochromatic:function(){return this._applyCombination(T,arguments)},splitcomplement:function(){return this._applyCombination(w,arguments)},triad:function(){return this._applyCombination(b,arguments)},tetrad:function(){return this._applyCombination(_,arguments)}},e.fromRatio=function(t,n){if("object"==typeof t){var i={};for(var s in t)t.hasOwnProperty(s)&&(i[s]="a"===s?t[s]:E(t[s]));t=i}return e(t,n)},e.equals=function(t,n){return!(!t||!n)&&e(t).toRgbString()==e(n).toRgbString()},e.random=function(){return e.fromRatio({r:J(),g:J(),b:J()})},e.mix=function(t,n,i){i=0===i?0:i||50;var s=e(t).toRgb(),r=e(n).toRgb(),o=i/100;return e({r:(r.r-s.r)*o+s.r,g:(r.g-s.g)*o+s.g,b:(r.b-s.b)*o+s.b,a:(r.a-s.a)*o+s.a})},e.readability=function(n,i){var s=e(n),r=e(i);return(t.max(s.getLuminance(),r.getLuminance())+.05)/(t.min(s.getLuminance(),r.getLuminance())+.05)},e.isReadable=function(t,n,i){var s,r,o=e.readability(t,n);switch(r=!1,s=$(i),s.level+s.size){case"AAsmall":case"AAAlarge":r=o>=4.5;break;case"AAlarge":r=o>=3;break;case"AAAsmall":r=o>=7}return r},e.mostReadable=function(t,n,i){var s,r,o,a,l=null,c=0;i=i||{},r=i.includeFallbackColors,o=i.level,a=i.size;for(var u=0;u<n.length;u++)(s=e.readability(t,n[u]))>c&&(c=s,l=e(n[u]));return e.isReadable(t,l,{level:o,size:a})||!r?l:(i.includeFallbackColors=!1,e.mostReadable(t,["#fff","#000"],i))};var W=e.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},H=e.hexNames=S(W),G=function(){var t="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",n="(?:"+e+")|(?:"+t+")",i="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",s="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{CSS_UNIT:new RegExp(n),rgb:new RegExp("rgb"+i),rgba:new RegExp("rgba"+s),hsl:new RegExp("hsl"+i),hsla:new RegExp("hsla"+s),hsv:new RegExp("hsv"+i),hsva:new RegExp("hsva"+s),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();window.tinycolor=e}(Math),function(t,e){"use strict";var n="",i="?",s="function",r="undefined",o="object",a="string",l="model",c="name",u="type",p="vendor",h="version",d="architecture",f="console",g="mobile",m="tablet",v="smarttv",y="wearable",b={extend:function(t,e){for(var n in e)-1!=="browser cpu device engine os".indexOf(n)&&e[n].length%2==0&&(t[n]=e[n].concat(t[n]));return t},has:function(t,e){return"string"==typeof t&&-1!==e.toLowerCase().indexOf(t.toLowerCase())},lowerize:function(t){return t.toLowerCase()},major:function(t){return typeof t===a?t.split(".")[0]:e}},_={rgx:function(){for(var t,n,i,a,l,c,u,p=0,h=arguments;p<h.length&&!c;){var d=h[p],f=h[p+1];if(typeof t===r){t={};for(a in f)l=f[a],typeof l===o?t[l[0]]=e:t[l]=e}for(n=i=0;n<d.length&&!c;)if(c=d[n++].exec(this.getUA()))for(a=0;a<f.length;a++)u=c[++i],l=f[a],typeof l===o&&l.length>0?2==l.length?typeof l[1]==s?t[l[0]]=l[1].call(this,u):t[l[0]]=l[1]:3==l.length?typeof l[1]!==s||l[1].exec&&l[1].test?t[l[0]]=u?u.replace(l[1],l[2]):e:t[l[0]]=u?l[1].call(this,u,l[2]):e:4==l.length&&(t[l[0]]=u?l[3].call(this,u.replace(l[1],l[2])):e):t[l]=u||e;p+=2}return t},str:function(t,n){for(var s in n)if(typeof n[s]===o&&n[s].length>0){for(var r=0;r<n[s].length;r++)if(b.has(n[s][r],t))return s===i?e:s}else if(b.has(n[s],t))return s===i?e:s;return t}},w={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},k={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[c,h],[/\s(opr)\/([\w\.]+)/i],[[c,"Opera"],h],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi)\/([\w\.-]+)/i],[c,h],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[c,"IE"],h],[/(edge)\/((\d+)?[\w\.]+)/i],[c,h],[/(yabrowser)\/([\w\.]+)/i],[[c,"Yandex"],h],[/(comodo_dragon)\/([\w\.]+)/i],[[c,/_/g," "],h],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(uc\s?browser|qqbrowser)[\/\s]?([\w\.]+)/i],[c,h],[/(dolfin)\/([\w\.]+)/i],[[c,"Dolphin"],h],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[c,"Chrome"],h],[/XiaoMi\/MiuiBrowser\/([\w\.]+)/i],[h,[c,"MIUI Browser"]],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],[h,[c,"Android Browser"]],[/FBAV\/([\w\.]+);/i],[h,[c,"Facebook"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[h,[c,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[h,c],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[c,[h,_.str,w.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[c,h],[/(navigator|netscape)\/([\w\.-]+)/i],[[c,"Netscape"],h],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[c,h]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[d,"amd64"]],[/(ia32(?=;))/i],[[d,b.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[d,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[d,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[d,/ower/,"",b.lowerize]],[/(sun4\w)[;\)]/i],[[d,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[d,b.lowerize]]],
device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[l,p,[u,m]],[/applecoremedia\/[\w\.]+ \((ipad)/],[l,[p,"Apple"],[u,m]],[/(apple\s{0,1}tv)/i],[[l,"Apple TV"],[p,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[p,l,[u,m]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[l,[p,"Amazon"],[u,m]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[l,_.str,w.device.amazon.model],[p,"Amazon"],[u,g]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[l,p,[u,g]],[/\((ip[honed|\s\w*]+);/i],[l,[p,"Apple"],[u,g]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[p,l,[u,g]],[/\(bb10;\s(\w+)/i],[l,[p,"BlackBerry"],[u,g]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7)/i],[l,[p,"Asus"],[u,m]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[p,"Sony"],[l,"Xperia Tablet"],[u,m]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[p,"Sony"],[l,"Xperia Phone"],[u,g]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[p,l,[u,f]],[/android.+;\s(shield)\sbuild/i],[l,[p,"Nvidia"],[u,f]],[/(playstation\s[3portablevi]+)/i],[l,[p,"Sony"],[u,f]],[/(sprint\s(\w+))/i],[[p,_.str,w.device.sprint.vendor],[l,_.str,w.device.sprint.model],[u,g]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[p,l,[u,m]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[p,[l,/_/g," "],[u,g]],[/(nexus\s9)/i],[l,[p,"HTC"],[u,m]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[l,[p,"Microsoft"],[u,f]],[/(kin\.[onetw]{3})/i],[[l,/\./g," "],[p,"Microsoft"],[u,g]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i],[l,[p,"Motorola"],[u,g]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[l,[p,"Motorola"],[u,m]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n8000|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[p,"Samsung"],l,[u,m]],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-n900))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[p,"Samsung"],l,[u,g]],[/(samsung);smarttv/i],[p,l,[u,v]],[/\(dtv[\);].+(aquos)/i],[l,[p,"Sharp"],[u,v]],[/sie-(\w+)*/i],[l,[p,"Siemens"],[u,g]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[p,"Nokia"],l,[u,g]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[l,[p,"Acer"],[u,m]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[p,"LG"],l,[u,m]],[/(lg) netcast\.tv/i],[p,l,[u,v]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[l,[p,"LG"],[u,g]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[l,[p,"Lenovo"],[u,m]],[/linux;.+((jolla));/i],[p,l,[u,g]],[/((pebble))app\/[\d\.]+\s/i],[p,l,[u,y]],[/android.+;\s(glass)\s\d/i],[l,[p,"Google"],[u,y]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus)?[\s_]*(?:\d\w)?)\s+build/i],[[l,/_/g," "],[p,"Xiaomi"],[u,g]],[/(mobile|tablet);.+rv\:.+gecko\//i],[[u,b.lowerize],p,l]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[h,[c,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[c,h],[/rv\:([\w\.]+).*(gecko)/i],[h,c]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[c,h],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[c,[h,_.str,w.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[c,"Windows"],[h,_.str,w.os.windows.version]],[/\((bb)(10);/i],[[c,"BlackBerry"],h],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[c,h],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[c,"Symbian"],h],[/\((series40);/i],[c],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[c,"Firefox OS"],h],[/(nintendo|playstation)\s([wids3portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[c,h],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[c,"Chromium OS"],h],[/(sunos)\s?([\w\.]+\d)*/i],[[c,"Solaris"],h],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[c,h],[/(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[c,"iOS"],[h,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[c,"Mac OS"],[h,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[c,h]]},T=function(e,i){if(!(this instanceof T))return new T(e,i).getResult();var s=e||(t&&t.navigator&&t.navigator.userAgent?t.navigator.userAgent:n),r=i?b.extend(k,i):k;return this.getBrowser=function(){var t=_.rgx.apply(this,r.browser);return t.major=b.major(t.version),t},this.getCPU=function(){return _.rgx.apply(this,r.cpu)},this.getDevice=function(){return _.rgx.apply(this,r.device)},this.getEngine=function(){return _.rgx.apply(this,r.engine)},this.getOS=function(){return _.rgx.apply(this,r.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return s},this.setUA=function(t){return s=t,this},this.setUA(s),this};T.VERSION="0.7.8",T.BROWSER={NAME:c,MAJOR:"major",VERSION:h},T.CPU={ARCHITECTURE:d},T.DEVICE={MODEL:l,VENDOR:p,TYPE:u,CONSOLE:f,MOBILE:g,SMARTTV:v,TABLET:m,WEARABLE:y,EMBEDDED:"embedded"},T.ENGINE={NAME:c,VERSION:h},T.OS={NAME:c,VERSION:h},typeof exports!==r?(typeof module!==r&&module.exports&&(exports=module.exports=T),exports.UAParser=T):typeof define===s&&define.amd?define(function(){return T}):t.UAParser=T;var S=t.jQuery||t.Zepto;if(typeof S!==r){var C=new T;S.ua=C.getResult(),S.ua.get=function(){return C.getUA()},S.ua.set=function(t){C.setUA(t);var e=C.getResult();for(var n in e)S.ua[n]=e[n]}}}("object"==typeof window?window:this),window.word_filter=function(t){var e=t.html();e=e.replace(/<!--[\s\S]+?-->/gi,""),e=e.replace(/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,""),e=e.replace(/<(\/?)s>/gi,"<$1strike>"),e=e.replace(/&nbsp;/gi," "),e=e.replace(/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(t,e){return e.length>0?e.replace(/./," ").slice(Math.floor(e.length/2)).split("").join("\xa0"):""}),t.html(e),$("p",t).each(function(){var t=$(this).attr("style"),e=/mso-list:\w+ \w+([0-9]+)/.exec(t);e&&$(this).data("_listLevel",parseInt(e[1],10))});var n=0,i=null;return $("p",t).each(function(){var t=$(this).data("_listLevel");if(t!=undefined){var e=$(this).text(),s="<ul></ul>";if(/^\s*\w+\./.test(e)){var r=/([0-9])\./.exec(e);if(r){var o=parseInt(r[1],10);s=o>1?'<ol start="'+o+'"></ol>':"<ol></ol>"}else s="<ol></ol>"}if(t>n&&(0==n?($(this).before(s),i=$(this).prev()):i=$(s).appendTo(i)),t<n)for(var a=0;a<n-t;a++)i=i.parent();$("span:first",this).remove(),i.append("<li>"+$(this).html()+"</li>"),$(this).remove(),n=t}else n=0}),$("span",t).replaceWith(function(){return $(this).contents()}),$("span:empty",t).remove(),$("[class^='Mso']",t).removeAttr("class"),$("p:empty",t).remove(),t},function(){var t,e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty,i=[].slice;t=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}var s;return e(n,t),s={P:function(t,e,i,s){return null==s&&(s=!1),n.viewPrint(t,e,i,s)},date:function(t){var e,i,s;return t?(s=new Date(t),e=n.Utils.formatTime(s.getDate(),2),i=n.Utils.formatTime(s.getMonth()+1,2),s.getFullYear()+"-"+i+"-"+e):""},datetime:function(t){var e,i,s,r,o,a,l;return t?(a=new Date(t),r=n.Utils.formatTime(a.getDate(),2),o=n.Utils.formatTime(a.getMonth()+1,2),l=a.getFullYear(),s=n.Utils.formatTime(a.getSeconds(),2),i=n.Utils.formatTime(a.getMinutes(),2),e=n.Utils.formatTime(a.getHours(),2),l+"-"+o+"-"+r+" "+e+":"+i+":"+s):""},decimal:function(t,e){return null==e&&(e=2),n.Utils.decimal(t,e)},M:function(t,e,n){var i,s,r,o;if(null==e&&(e=1),null==n&&(n=2),!t)return"";for(o="",n=t.length-n-1,s=i=0,r=t.length-1;0<=r?i<=r:i>=r;s=0<=r?++i:--i)o+=e<=s&&n>=s?"*":t[s];return o},T:function(){var t,e,s;return e=arguments[0],t=2<=arguments.length?i.call(arguments,1):[],(s=n.i18n).translateContent.apply(s,[e].concat(i.call(t)))},Ti:function(){var t,e,s;return e=arguments[0],t=2<=arguments.length?i.call(arguments,1):[],(s=n.i18n).translateInline.apply(s,[e].concat(i.call(t)))},Tdate:function(){var t,e,s;return e=arguments[0],t=2<=arguments.length?i.call(arguments,1):[],(s=n.i18n).translateDate.apply(s,[e].concat(i.call(t)))},Ttimestamp:function(){var t,e,s;return e=arguments[0],t=2<=arguments.length?i.call(arguments,1):[],(s=n.i18n).translateTimestamp.apply(s,[e].concat(i.call(t)))},L:function(t){return t&&"string"==typeof t?n.Utils.linkify(t):t},C:function(t){return n.Config.get(t)},S:function(t){return n.Session.get(t)},AddressLine:function(t){var e,i,s,r,o;if(!t)return"";if(!(s=emailAddresses.parseAddressList(t)))return n.Utils.htmlEscape(t);for(o="",e=0,r=s.length;e<r;e++)i=s[e],o&&(o+=", "),i.name&&(i.name=i.name.replace(",","").replace(";","").replace('"',"").replace("'",""),i.name.match(/\@|,|;|\^|\+|#|\xa7|\$|%|&|\/|\(|\)|=|\?|\*/)&&(i.name='"'+i.name+'"'),o=""+o+n.Utils.htmlEscape(i.name)+" "),i.address&&(o=o+' <span class="text-muted">&lt;'+n.Utils.htmlEscape(i.address)+"&gt</span>");return o},humanFileSize:function(t){return n.Utils.humanFileSize(t)},humanTime:function(t,e,i){var s,r;return null==e&&(e=!1),null==i&&(i=""),r=n.i18n.translateTimestamp(t),e&&(i+=" escalation"),s=n.PrettyDate.humanTime(t,e),'<time class="humanTimeFromNow '+i+'" data-time="'+t+'" title="'+r+'">'+s+"</time>"},Icon:function(t,e){return null==e&&(e=""),n.Utils.icon(t,e)},RichText:function(t){return t?t.match(/@T\('/)?(t=t.replace(/@T\('(.+?)'\)/g,function(t,e){return n.i18n.translateContent(e)}),marked(t)):n.i18n.translateContent(t):t},ContentTypeIcon:function(t){var e;return t=n.Utils.contentTypeCleanup(t),e={"image/jpeg":"file-image","image/jpg":"file-image","image/png":"file-image","image/svg":"file-image","image/gif":"file-image","application/pdf":"file-pdf","application/msword":"file-word","application/vnd.ms-word":"file-word","application/vnd.oasis.opendocument.text":"file-word","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"file-word","application/vnd.openxmlformats-officedocument.wordprocessingml.template":"file-word","application/vnd.ms-excel":"file-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"file-excel","application/vnd.oasis.opendocument.spreadsheet":"file-excel","application/vnd.ms-powerpoint":"file-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation":"file-powerpoint","application/vnd.oasis.opendocument.presentation":"file-powerpoint","text/plain":"file-text","text/html":"file-code","application/json":"file-code","message/rfc822":"file-email","application/json":"file-code","text/plain":"file-text","text/rtf":"file-text","application/gzip":"file-archive","application/zip":"file-archive"},e[t]},canDownload:function(t){return"text/html"!==(t=n.Utils.contentTypeCleanup(t))},canPreview:function(t){return!_.isEmpty(t)&&!!t.match(/image\/(png|jpg|jpeg|gif)/i)}},n.viewPrint=function(t,e,n,i){var s,r,o,a,l,c;return n||(n={},t.constructor.attributesGet&&(n=t.constructor.attributesGet())),s=n[e],l=t[e],c=void 0,s||(r=e+"_id",(s=n[r])&&(e=r,t[e]&&(c=l,l=t[e]))),l||(a=e.split("::"),a[0]&&a[1]&&t[a[0]]&&(l=t[a[0]][a[1]])),s?(c||"_id"===e.substr(e.length-3,e.length)&&(o=e.substr(0,e.length-3),t[o]&&(c=t[o])),this.viewPrintItem(l,s,c,i)):this.viewPrintItem(l)},n.viewPrintItem=function(t,e,i,s){var r,o,a,l,c,u,p,h,d,f,g;if(null==e&&(e={}),void 0===t)return"-";if(""===t)return"-";if(null===t)return t;for(d="",p=[t],_.isArray(t)&&(p=t),l=0,h=p.length;l<h;l++)t=p[l],f=t,(e.relation||i)&&(t=i||n[e.relation].find(t)),u=!1,t&&"object"==typeof t&&(u=!0,f=t.displayNameLong?t.displayNameLong():t.displayName?t.displayName():t.name),e.callback&&(f=e.callback(f,e)),c=!1,"textarea"===e.tag?(c=!0,f=n.Utils.text2html(f)):"richtext"===e.tag&&(c=!0),_.isEmpty(e.options)||e.options[f]&&(f=e.options[f]),"boolean"===e.tag&&(!0===f?f="yes":!1===f&&(f="no")),(e.translate||u&&t.translate&&t.translate())&&(c=!0,f=n.i18n.translateContent(f)),"date"===e.tag&&(c=!0,f=n.i18n.translateDate(f)),"input"===e.tag?(f="tel"===e.type?'<a href="'+n.Utils.phoneify(f)+'">'+n.Utils.htmlEscape(f)+"</a>":"url"===e.type?n.Utils.linkify(f):n.Utils.htmlEscape(f),c=!0):"datetime"===e.tag&&(c=!0,g=n.i18n.translateTimestamp(f),o=!1,r=e["class"]||"",r.match("escalation")&&(o=!0),a="",s||(a=n.PrettyDate.humanTime(f,o)),f='<time class="humanTimeFromNow '+r+'" data-time="'+f+'" title="'+g+'">'+a+"</time>"),c||"string"!=typeof f||(f=n.Utils.htmlEscape(f)),_.isEmpty(d)||(d+=", "),d+=f;return d},n.view=function(t){return function(e){return null==e&&(e={}),JST["app/views/"+t](_.extend(e,s))}},n}(Spine.Controller),t.UiElement=function(){function t(){}return t}(),window.App=t}.call(this),function(){var t;App.Config=function(){function e(){}var n;return n=void 0,e.init=function(){return null!=n?n:n=new t},e.get=function(e,i){return void 0===n&&null==n&&(n=new t),n.get(e,i)},e.set=function(e,i,s){return void 0===n&&null==n&&(n=new t),n.set(e,i,s)},e.all=function(){return void 0===n&&null==n&&(n=new t),n.all()},e}(),t=function(){function t(){this.config={}}return t.prototype.get=function(t,e){if(e){if(!e in this.config)return;if(void 0===this.config[e])return;return this.config[e][t]}return this.config[t]},t.prototype.set=function(t,e,n){return n?(this.config[n]||(this.config[n]={}),this.config[n][t]=e):this.config[t]=e},t.prototype.all=function(){return this.config},t}()}.call(this),function(){var t;App.LocalStorage=function(){function e(){}var n;return n=void 0,e.set=function(e,i,s){return void 0===n&&null==n&&(n=new t),n.set(e,i,s)},e.get=function(e,i){return void 0===n&&null==n&&(n=new t),n.get(e,i)},e["delete"]=function(e){return void 0===n&&null==n&&(n=new t),n["delete"](e)},e.clear=function(){return void 0===n&&null==n&&(n=new t),n.clear()},e.list=function(){return void 0===n&&null==n&&(n=new t),n.list()},e.usage=function(){return void 0===n&&null==n&&(n=new t),n.usage()},e}(),t=function(){function t(){}return t.prototype.set=function(t,e,n){var i;try{return n&&(t="personal::"+n+"::"+t),localStorage.setItem(t,JSON.stringify(e))}catch(t){return i=t,App.Log.error("App.LocalStorage","Local storage error!",i)}},t.prototype.get=function(t,e){var n;if(e&&(t="personal::"+e+"::"+t),n=localStorage.getItem(t))return JSON.parse(n)},t.prototype["delete"]=function(t,e){return e&&(t="personal::"+e+"::"+t),localStorage.removeItem(t)},t.prototype.clear=function(){return localStorage.clear()},t.prototype.list=function(){return window.localStorage},t.prototype.usage=function(){var t,e,n;e="";for(t in window.localStorage)n=localStorage.getItem(t),_.isString(n)&&(e+=n);return byteLength(e)},t}()}.call(this),function(){var t,e,n=[].slice,i=function(t,e){return function(){return t.apply(e,arguments)}};e=void 0,App.LogInclude=function(){function i(){}return i.log=function(){var i,s,r;return s=arguments[0],i=2<=arguments.length?n.call(arguments,1):[],void 0===e&&null==e&&(e=new t),r=this.constructor.name,e.log(r,s,i)},i}(),App.Log=function(){function i(){}return i.debug=function(){var i,s;return s=arguments[0],i=2<=arguments.length?n.call(arguments,1):[],void 0===e&&null==e&&(e=new t),e.log(s,"debug",i)},i.notice=function(){var i,s;return s=arguments[0],i=2<=arguments.length?n.call(arguments,1):[],void 0===e&&null==e&&(e=new t),e.log(s,"notice",i)},i.error=function(){var i,s;return s=arguments[0],i=2<=arguments.length?n.call(arguments,1):[],void 0===e&&null==e&&(e=new t),e.log(s,"error",i)},i.config=function(n,i){return void 0===e&&null==e&&(e=new t),e.config(n,i)},i.timeTrack=function(n){return void 0===e&&null==e&&(e=new t),e.timeTrack(n)},i}(),t=function(){function t(){this.timeTrack=i(this.timeTrack,this),this.yieldColor=i(this.yieldColor,this);var t,e;this.moduleColorsMap={},this.currentConfig={},this.currentConfigReady={},window.localStorage&&(e=window.localStorage.getItem("log_config"))&&(this.currentConfig=JSON.parse(e),this.configReady()),this.colorSupport=!1,t=App.Browser.detection(),t.browser&&("Chrome"===t.browser.name?this.colorSupport=!0:"Firefox"===t.browser.anem?t.browser.major>=31&&(this.colorSupport=!0):"Safari"===t.browser.name&&(this.colorSupport=!0))}return t.prototype.configReady=function(){var t,e,n,i;t=this.currentConfig,e=[];for(n in t)i=t[n],"module"===n||"content"===n?e.push(this.currentConfigReady[n]=new RegExp(i,"i")):e.push(this.currentConfigReady[n]=i);return e},t.prototype.config=function(t,e){return null==t&&(t=void 0),null==e&&(e=void 0),void 0===e?t?this.currentConfig[t]:this.currentConfig:(this.currentConfig[t]=e,this.configReady(),window.localStorage?window.localStorage.setItem("log_config",JSON.stringify(this.currentConfig)):void 0)},t.prototype.log=function(t,e,n){if("debug"===e){if(!this.currentConfigReady.module&&!this.currentConfigReady.content)return;if(this.currentConfigReady.module&&!t.match(this.currentConfigReady.module))return;if(this.currentConfigReady.content&&!n.toString().match(this.currentConfigReady.content))return}return this._log(t,e,n)},t.prototype._log=function(t,e,n){var i,s,r,o,a;return a=32,o="App."+t+"("+e+")",o.length<a&&(o+=Array(a-o.length).join(" ")),o+="|",this.colorSupport?(o="%c"+o,this.moduleColorsMap[t]||(this.moduleColorsMap[t]=this.yieldColor()),i=this.moduleColorsMap[t],s="color: hsl("+i+",99%,40%); font-weight: bold",r=[o,s].concat(n)):r=[o].concat(n),"error"===e?console.error.apply(console,r):"debug"===e?console.debug.apply(console,r):console.log.apply(console,r)},t.prototype.yieldColor=function(){var t;return this.hue||(this.hue=0),this.hue+=1,t=.618033988749895,this.hue+=t,this.hue=this.hue%1,360*this.hue},t.prototype.timeTrack=function(t){var e,n;return e=(new Date).getTime(),this.lastTime?(n=e-this.lastTime,this.lastTime=e,console.log("timeTrack start",t,n)):(this.lastTime=e,console.log("timeTrack start",t))},t}()}.call(this),function(){var t;App.QueueManager=function(){function e(){}var n;return n=void 0,e.init=function(){return null!=n?n:n=new t},e.add=function(e,i){return void 0===n&&null==n&&(n=new t),n.add(e,i)},e.pull=function(e){return void 0===n&&null==n&&(n=new t),n.pull(e)},e.all=function(e){return void 0===n&&null==n&&(n=new t),n.all(e)},e.run=function(e,i){return void 0===n&&null==n&&(n=new t),n.run(e,i)},e}(),t=function(){function t(){this.queues={},this.queueRunning={}}return t.prototype.add=function(t,e){return this.queues[t]||(this.queues[t]=[]),this.queues[t].push(e),!0},t.prototype.pull=function(t){if(this.queues[t])return this.queues[t].shift()},t.prototype.all=function(t){return this.queues[t]},t.prototype.run=function(t,e){var n;if(this.queues[t]&&!this.queueRunning[t]&&(n=this.queues[t],!_.isEmpty(n))){for(this.queueRunning[t]=!0;;)if(e=n.shift(),e(),!n[0]){this.queueRunning[t]=!1;break}return!0}},t}()}.call(this),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.Session=function(){function e(){}var n;return n=void 0,e.init=function(){return null==n&&(n=new t),n.clear()},e.get=function(e){return void 0===n&&null==n&&(n=new t),n.get(e)},e.set=function(e){return void 0===n&&null==n&&(n=new t),n.set(e)},e}(),t=function(t){function n(){this.clear()}return e(n,t),n.include(App.LogInclude),n.prototype.clear=function(){return this.user=void 0},n.prototype.get=function(t){if(this.user)return t?this.user[t]:this.user},n.prototype.set=function(t){return this.user=t},n}(Spine.Module)}.call(this),function(){var t;App.SessionStorage=function(){function e(){}var n;return n=void 0,e.set=function(e,i){return void 0===n&&null==n&&(n=new t),n.set(e,i)},e.get=function(e){return void 0===n&&null==n&&(n=new t),n.get(e)},e["delete"]=function(e){return void 0===n&&null==n&&(n=new t),n["delete"](e)},e.clear=function(){return void 0===n&&null==n&&(n=new t),n.clear()},e.list=function(){return void 0===n&&null==n&&(n=new t),n.list()},e.usage=function(){return void 0===n&&null==n&&(n=new t),n.usage()},e}(),t=function(){function t(){App.Event.bind("clearStore",function(t){return function(){return t.clear()}}(this))}return t.prototype.set=function(t,e){var n;try{return sessionStorage.setItem(t,JSON.stringify(e))}catch(i){return n=i,this.clear(),App.Log.error("App.SessionStorage","Session storage error!",n),sessionStorage.setItem(t,JSON.stringify(e))}},t.prototype.get=function(t){var e;if(e=sessionStorage.getItem(t))return JSON.parse(e)},t.prototype["delete"]=function(t){return sessionStorage.removeItem(t)},t.prototype.clear=function(){return sessionStorage.clear()},t.prototype.list=function(){return window.sessionStorage},t.prototype.usage=function(){var t,e,n;e="";for(t in window.sessionStorage)n=sessionStorage.getItem(t),_.isString(n)&&(e+=n);return byteLength(e)},t}()}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};App.Track=function(){function e(){}var n;return n=void 0,e.init=function(){return null!=n?n:n=new t},e.log=function(e,i,s){return void 0===n&&null==n&&(n=new t),n.log(e,i,s)},e.send=function(){return void 0===n&&null==n&&(n=new t),n.send()},e.force=function(e){return void 0===n&&null==n&&(n=new t),n.force(e)},e._all=function(){return void 0===n&&null==n&&(n=new t),n._all()},e}(),t=function(){function t(){this.send=e(this.send,this),this.log=e(this.log,this);var t;this.trackId="track-"+(new Date).getTime()+"-"+Math.floor(99999*Math.random()),this.browser=App.Browser.detection(),this.data=[],this.url="https://log.zammad.com/api/v1/ui",this.logClick=!0,this.logAjax=!1,this.forceSending=!1,this.log("start","notice",{}),t=function(t){return function(){return App.Interval.set(t.send,6e4)}}(this),App.Delay.set(t,3e4),this.logClick&&$(document).bind("click",function(t){return function(e){var n,i,s,r,o;return o=window.screen.width,i=window.screen.height,n=$(e.target),n.attr("href")||(r=$(e.target).parents("a"),r[0]&&(n=r)),s={level:"notice",href:n.attr("href"),title:n.attr("title"),text:n.text(),clickX:e.pageX,clickY:e.pageY,screenX:o,screenY:i},t.log("click","notice",s)}}(this)),this.logAjax&&$(document).bind("ajaxComplete",function(t){return function(e,n,i){var s,r;if(i.url&&"/ui"!==i.url.substr(i.url.length-3,3))return s="notice",r="",n.status>=400&&(s="error",r=n.responseText),i.data&&(i.data.length>3e3&&(i.data=i.data.substr(0,3e3)),"string"==typeof i.data&&(i.data=i.data.replace(/"password":".+?"/gi,'"password":"xxx"'))),t.log("ajax.send",s,{type:i.type,dataType:i.dataType,async:i.async,url:i.url,data:i.data,status:n.status,responseText:r})}}(this)),$(window).bind("beforeunload",function(t){return function(){t.log("good bye","notice",{}),t.send(!1)}}(this))}return t.prototype.log=function(t,e,n){var i;if(this.shouldSend())return i={time:Math.round((new Date).getTime()/1e3),facility:t,level:e,location:window.location.pathname+window.location.hash,message:n},this.data.push(i)},t.prototype.send=function(t){var e,n,i,s,r,o;if(null==t&&(t=!0),this.shouldSend()&&!_.isEmpty(this.data)){for(r=_.clone(this.data),this.data=[],o=[],n=0,s=r.length;n<s;n++){i=r[n];try{JSON.stringify(i),o.push(i)}catch(t){e=t,console.log("error",e)}}return App.Ajax.request({type:"POST",url:this.url,async:t,data:JSON.stringify({meta:{track_id:this.trackId,host:window.location.host,protocol:window.location.protocol},browser:this.browser,log:o}),crossDomain:!0,headers:{"X-Requested-With":"XMLHttpRequest"},error:function(t){return function(){var e,n,s;for(s=[],e=0,n=o.length;e<n;e++)i=o[e],s.push(t.data.push(i));return s}}(this)})}},t.prototype.force=function(t){return null==t&&(t=!0),this.forceSending=t},t.prototype.shouldSend=function(){return!!this.forceSending||!App.Config.get("developer_mode")&&!!App.Config.get("ui_send_client_stats")},t.prototype._all=function(){return this.data},t}(),function(){function t(t){var n=e[t];e[t]=function(){if(App.Track.log("console."+t,t,arguments),"error"==t&&App.Track.log("traceback",t,window.getStackTrace().join("\n")),n.apply)n.apply(e,arguments);else{var i=Array.prototype.slice.apply(arguments).join(" ");n(i)}}}window.getStackTrace=function(){var t;try{throw new Error("")}catch(e){t=e.stack||""}return t=t.split("\n").map(function(t){return t.trim()}),t.splice("Error"==t[0]?2:1)},window.onerrorOld=window.onerror,window.onerror=function(t,e,n,i,s){var r="";return s!==undefined&&s.stack&&(r="\n"+s.stack),App.Track.log("console.error","error",t+" - in "+e+", line "+n+r),window.onerrorOld&&window.onerrorOld(t,e,n,i,s),!1};var e=window.console;if(e)for(var n=["debug","log","warn","error"],i=0;i<n.length;i++)t(n[i])}.call(this)}.call(this),function(){App.TicketNavigable={taskOpenTicket:function(t,e){return t instanceof App.Ticket&&(t=t.id),this.taskLoadTicket(t),this.navigate(null!=e?e:"ticket/zoom/"+t)},taskLoadTicket:function(t){return App.TaskManager.execute({key:"Ticket-"+t,controller:"TicketZoom",params:{ticket_id:t,overview_id:this.overview_id},show:!0})},taskOpenNextTicketInOverview:function(){var t;return null==this.overview_id||null==this.ticket?void this.taskCloseTicket(!0):(t=App.Overview.find(this.overview_id).nextTicket(this.ticket),t?(this.taskCloseTicket(),void this.taskLoadTicket(t.id)):this.taskCloseTicket(!0))},taskCloseTicket:function(t){var e;if(null==t&&(t=!1),App.TaskManager.remove(this.taskKey),t)return e=App.TaskManager.nextTaskUrl(),e?void this.navigate(e):this.navigate("#")}}}.call(this),function(){App.Config.set("api_path","api/v1"),App.Config.set("image_path","/assets/images")}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.Model=function(e){function n(){n.__super__.constructor.apply(this,arguments)}return t(n,e),n.apiPath=App.Config.get("api_path"),n.prototype.uiUrl=function(){return"#"},n.prototype.translate=function(){return App[this.constructor.className].configure_translate},n.prototype.objectDisplayName=function(){return this.constructor.className},n.prototype.displayName=function(){var t;return this.name?this.name:this.realname?this.realname+" <"+this.email+">":(_.isEmpty(this.firstname)||(t=this.firstname),_.isEmpty(this.lastname)||(_.isEmpty(t)?t="":t+=" ",t+=this.lastname),_.isEmpty(t)?this.email?this.email:this.title?this.title:this.subject?this.subject:this.phone?this.phone:this.login?this.login:"???":t)},n.prototype.displayNameLong=function(){var t;return this.name?this.name:(_.isEmpty(this.firstname)||(t=this.firstname),_.isEmpty(this.lastname)||(_.isEmpty(t)?t="":t+=" ",t+=this.lastname),_.isEmpty(t)||(_.isEmpty(this.organization)?_.isEmpty(this.department)||(t=t+" ("+this.department+")"):t="object"==typeof this.organization?t+" ("+this.organization.name+")":t+" ("+this.organization+")"),_.isEmpty(t)?this.email?this.email:this.title?this.title:this.subject?this.subject:this.phone?this.phone:this.login?this.login:"???":t)},n.prototype.icon=function(){return""},n.prototype.iconTitle=function(){return""},n.prototype.iconActivity=function(){return""},n.validate=function(t){var e,n,i,s,r,o,a,l,c,u,p,h,d,f,g,m;null==t&&(t={}),App[t.model]&&App[t.model].attributesGet?i=App[t.model].attributesGet(t.screen):t.model.configure_attributes&&(i=App.Model.attributesGet(t.screen,t.model.configure_attributes));for(n in i)if(e=i[n],e.required_if){f=e.required_if;for(a in f){for(m=f[a],p=t.params[a],_.isArray(p)||(p=[p]),h=!1,r=0,l=m.length;r<l;r++)if(g=m[r],p)for(o=0,c=p.length;o<c;o++)u=p[o],g&&u&&g.toString()===u.toString()&&(h=!0);e["null"]=!0!==h}}s={};for(n in i)if(e=i[n],!e.readonly){if("null"in e&&!e["null"])if(d=e.name.split("::"),d[0]&&!d[1])n in t.params&&""!==t.params[n]&&void 0!==t.params[n]&&null!==t.params[n]||(s[n]="is required");else{if(!d[0]||!d[1]||d[2])throw"can't parse '"+e.name+"'";t.params[d[0]]&&d[1]in t.params[d[0]]&&""!==t.params[d[0]][d[1]]&&void 0!==t.params[d[0]][d[1]]&&null!==t.params[d[0]][d[1]]||(s[n]="is required")}"password"===e.type&&t.params[n]&&n+"_confirm"in t.params&&t.params[n]!==t.params[n+"_confirm"]&&(s[n]="didn't match",s[n+"_confirm"]=""),"email"===e.type&&t.params[n]&&(t.params[n].match(/\S+@\S+\.\S+/)||(s[n]="invalid"),t.params[n].match(/ /)&&(s[n]="invalid")),"datetime"===e.tag&&"invalid"===t.params[n]&&(s[n]="invalid"),"date"===e.tag&&"invalid"===t.params[n]&&(s[n]="invalid")}if(!_.isEmpty(s))return App.Log.error("Model","validation failed",s),s},n.attributesSet=function(t){var e,n,i,s,r,o,a,l,c,u,p;for(i=App[this.className].configure_attributes,n=[],r=0,l=i.length;r<l;r++){for(p=i[r],s=!1,o=0,c=t.length;o<c;o++)if(e=t[o],e.name===p.name){s=!0;break}s||n.push(p)}for(a=0,u=t.length;a<u;a++)e=t[a],App[this.className].attributes.push(e.name),n.push(e);return App[this.className].configure_attributes=n},n.attributesGet=function(t,e,n){var i,s,r,o,a,l,c,u,p;if(null==t&&(t=void 0),null==e&&(e=!1),null==n&&(n=!1),!(e=e?clone(e,!0):clone(App[this.className].configure_attributes,!0)))return{};if(s={},t)for(r=0,l=e.length;r<l;r++)if((i=e[r])&&i.screen&&i.screen[t]&&!_.isEmpty(i.screen[t])&&(!0===i.screen[t].shown||void 0===i.screen[t].shown)){u=i.screen[t];for(o in u)p=u[o],i[o]=p;s[i.name]=i}if((!t||_.isEmpty(s))&&!n)for(a=0,c=e.length;a<c;a++)i=e[a],s[i.name]=i;return s},n.prototype.validate=function(t){return null==t&&(t={}),App.Model.validate({model:this.constructor.className,params:this,screen:t.screen})},n.prototype.isOnline=function(){return!!this.id&&("number"==typeof this.id||"c"!==this.id[0])},n.fullLocal=function(t){return this._fillUp(App[this.className].find(t))},n.full=function(t,e,n,i){var s,r,o,a;return null==e&&(e=!1),null==n&&(n=!1),null==i&&(i=!1),a=this.url+"/"+t+"?full=true",o=void 0,i&&(o=App[this.className].subscribeItem(t,e)),!n&&App[this.className].exists(t)?(s=App[this.className].find(t),s=this._fillUp(s),e&&e(s,"full"),o):(this.FULL_CALLBACK||(this.FULL_CALLBACK={}),this.FULL_CALLBACK[t]||(this.FULL_CALLBACK[t]={}),e&&(r=this.className+"-"+Math.floor(99999*Math.random()),this.FULL_CALLBACK[t][r]=e),this.FULL_FETCH||(this.FULL_FETCH={}),this.FULL_FETCH[t]||(this.FULL_FETCH[t]=!0,App.Log.debug("Model","fetch "+this.className+".find("+t+") from server",a),App.Ajax.request({type:"GET",url:a,processData:!0,success:function(n){return function(i){var s;if(n.FULL_FETCH[t]=!1,App.Log.debug("Model","got "+n.className+".find("+t+") from server",i),i.assets?App.Collection.loadAssets(i.assets,{targetModel:n.className}):App[n.className].refresh(i),n.FULL_CALLBACK[i.id]){s=n.FULL_CALLBACK[i.id];for(r in s)e=s[r],e(n._fillUp(App[n.className].find(i.id))),delete n.FULL_CALLBACK[i.id][r];if(_.isEmpty(n.FULL_CALLBACK[i.id]))return delete n.FULL_CALLBACK[i.id]}}}(this),error:function(e){return function(n,i,s){return e.FULL_FETCH[t]=!1,App.Log.error("Model",i,s,a)}}(this)})),o)},n.subscribe=function(t,e){var n,i,s;return null==e&&(e={}),this.SUBSCRIPTION_COLLECTION||(this.SUBSCRIPTION_COLLECTION={},this.bind("refresh",function(e){return function(n){var i,s,r;_.isArray(n)||(n=[n]),App.Log.debug("Model","local collection refresh "+e.className,n),s=e.SUBSCRIPTION_COLLECTION,r=[];for(i in s)t=s[i],r.push(t(n,"refresh"));return r}}(this)),this.bind("change",function(e){return function(n,i){var s,r,o;if("destroy"!==i){_.isArray(n)||(n=[n]),App.Log.debug("Model","local collection change "+e.className,n),r=e.SUBSCRIPTION_COLLECTION,o=[];for(s in r)t=r[s],o.push(t(n,"change"));return o}}}(this)),this.bind("destroy",function(e){return function(n){var i,s,r;_.isArray(n)||(n=[n]),App.Log.debug("Model","local collection destroy "+e.className,n),s=e.SUBSCRIPTION_COLLECTION,r=[];for(i in s)t=s[i],r.push(t(n,"destroy"));return r}}(this)),i=this.className+":create "+this.className+":update "+this.className+":touch "+this.className+":destroy",App.Event.bind(i,function(e){return function(){if(!_.isEmpty(e.SUBSCRIPTION_COLLECTION))return App.Log.debug("Model","server notify collection change "+e.className),t=function(){return e.fetchFull(function(){},{clear:!0})},
App.Delay.set(t,200,"fullcollection-"+e.className,"model-"+e.className)}}(this),"Collection::Subscribe::"+this.className)),s=this.className+"-"+Math.floor(99999*Math.random()),this.SUBSCRIPTION_COLLECTION[s]=t,!0===e.initFetch&&(n=!0,!0!==e.clear&&!1!==e.clear||(n=e.clear),this.initFetchActives||0!==this.count()?t(this.all()):(this.initFetchActive=!0,this.one("refresh",function(e){return function(n){return e.initFetchActive=!1,t(n)}}(this)),this.fetchFull(function(){},{clear:n}))),s},n.prototype.subscribe=function(t){return App[this.constructor.className].subscribeItem(this.id,t)},n.subscribeItem=function(t,e){var n,i;return this._subscribeItemBindDone||(this._subscribeItemBindDone=!0,this.bind("change",function(t){return function(n){var i,s,r,o,a;for(_.isArray(n)||(n=[n]),App.Log.debug("Model","local change "+t.className,n),a=[],i=0,o=n.length;i<o;i++)s=n[i],a.push(function(){var t,n;t=App[this.className].SUBSCRIPTION_ITEM[s.id],n=[];for(r in t)e=t[r],n.push(e(App[this.className]._fillUp(s),"change"));return n}.call(t));return a}}(this)),this.bind("destroy",function(t){return function(n){var i,s,r,o,a;for(_.isArray(n)||(n=[n]),App.Log.debug("Model","local destroy "+t.className,n),a=[],i=0,o=n.length;i<o;i++)s=n[i],a.push(function(){var t,n;t=App[this.className].SUBSCRIPTION_ITEM[s.id],n=[];for(r in t)e=t[r],n.push(e(App[this.className]._fillUp(s),"destroy"));return n}.call(t));return a}}(this)),this.changeTable={},this.bind("refresh",function(t){return function(n){var i,s,r,o,a;for(_.isArray(n)||(n=[n]),App.Log.debug("Model","local refresh "+t.className,n),a=[],i=0,o=n.length;i<o;i++)s=n[i],a.push(function(){var t,n;t=App[this.className].SUBSCRIPTION_ITEM[s.id],n=[];for(r in t)e=t[r],!this.changeTable[r]||this.changeTable[r]<s.updated_at?(this.changeTable[r]=s.updated_at,n.push(e(App[this.className]._fillUp(s),"refresh"))):n.push(void 0);return n}.call(t));return a}}(this)),n=this.className+":create "+this.className+":update "+this.className+":touch",App.Event.bind(n,function(t){return function(n){if(t.SUBSCRIPTION_ITEM&&t.SUBSCRIPTION_ITEM[n.id])return App.Log.debug("Model","server change on "+t.className+".find("+n.id+") "+n.updated_at),e=function(){var e;if(e=void 0,App[t.className].exists(n.id)&&(e=App[t.className].find(n.id)),!e||new Date(n.updated_at)>new Date(e.updated_at))return App.Log.debug("Model","request "+t.className+".find("+n.id+") from server"),t.full(n.id,!1,!0)},App.Delay.set(e,600,"full-"+n.id,"model-"+t.className)}}(this),"Item::Subscribe::"+this.className),n=this.className+":destroy",App.Event.bind(n,function(t){return function(n){var i;if(t.SUBSCRIPTION_ITEM&&t.SUBSCRIPTION_ITEM[n.id]&&App[t.className].exists(n.id))return i=App[t.className].find(n.id),App.Log.debug("Model","server delete on "+t.className+".find("+n.id+") "+n.updated_at),e=function(){return i.trigger("destroy",i)},App.Delay.set(e,500,"delete-"+n.id,"model-"+t.className)}}(this),"Item::SubscribeDelete::"+this.className)),this.SUBSCRIPTION_ITEM||(this.SUBSCRIPTION_ITEM={}),this.SUBSCRIPTION_ITEM[t]||(this.SUBSCRIPTION_ITEM[t]={}),i=this.className+"-"+Math.floor(99999*Math.random()),this.SUBSCRIPTION_ITEM[t][i]=e,i},n.unsubscribe=function(t){var e,n,i;if(this.SUBSCRIPTION_ITEM){i=this.SUBSCRIPTION_ITEM;for(e in i)n=i[e],n[t]&&delete n[t]}if(this.SUBSCRIPTION_COLLECTION&&this.SUBSCRIPTION_COLLECTION[t])return delete this.SUBSCRIPTION_COLLECTION[t]},n.fetchFull=function(t,e){var n,i,s;return null==e&&(e={}),s=this.url+"/?full=true",App.Log.debug("Model","fetchFull collection "+this.className,s),i=this.className+"::fetchFull",!1===e.force&&0!==App[this.className].count()?void(t&&(n=function(e){return function(){return t(App[e.className].all(),"full")}}(this),App.QueueManager.add(i,n),App.QueueManager.run(i))):(t&&(n=function(e){return function(){return t(App[e.className].all())}}(this),App.QueueManager.add(i,n)),this.fetchFullActive&&this.fetchFullActive>(new Date).getTime()-500?void 0:(this.fetchFullActive=(new Date).getTime(),App.Ajax.request({type:"GET",url:s,processData:!0,success:function(t){return function(n){return t.fetchFullActive=!1,App.Log.debug("Model","got fetchFull collection "+t.className,n),e.clear&&App[t.className].deleteAll(),n.assets?(App.Collection.loadAssets(n.assets,{targetModel:t.className}),n.record_ids&&_.isEmpty(n.record_ids)&&App[t.className].trigger("refresh",[])):App[t.className].refresh(n),App.QueueManager.run(i)}}(this),error:function(t){return function(e,n,i){return t.fetchFullActive=!1,App.Log.error("Model",n,i,s)}}(this)})))},n._bindsEmpty=function(){var t,e,n;if(this.SUBSCRIPTION_ITEM){n=this.SUBSCRIPTION_ITEM;for(t in n)if(e=n[t],!_.isEmpty(e))return!1}return!(this.SUBSCRIPTION_COLLECTION&&!_.isEmpty(this.SUBSCRIPTION_COLLECTION))},n._fillUp=function(t,e){var n,i,s,r,o,a;if(null==e&&(e=[]),!App[this.className].configure_attributes)return t;for(o=App[this.className].configure_attributes,i=0,r=o.length;i<r;i++)n=o[i],n.relation&&(_.contains(e,this.className)||App[n.relation]&&(a=n.name.substr(0,n.name.length-3),"_id"===n.name.substr(n.name.length-3,n.name.length)&&t[n.name]&&(App[n.relation].exists(t[n.name])?(s=App[n.relation].findNative(t[n.name]),s=App[n.relation]._fillUp(s,e.concat(this.className)),t[a]=s):n.do_not_log||console.log("ERROR, cant find "+n.name+" App."+n.relation+".find("+t[n.name]+") for '"+t.constructor.className+"' "+t.displayName()))));return t},n.search=function(t){var e,n,i,s,r,o,a,l;if(e=this.all(),n=[],!t){for(i=0,a=e.length;i<a;i++)s=e[i],r=this.findNative(s.id),n.push(this._fillUp(r));return n}for(o=0,l=e.length;o<l;o++)s=e[o],r=this.findNative(s.id),n.push(this._fillUp(r));return t.filter&&(n=this._filter(n,t.filter)),t.filterExtended&&(n=this._filterExtended(n,t.filterExtended)),null!==t.sortBy&&(n=this._sortBy(n,t.sortBy)),t.order&&(n=this._order(n,t.order)),n},n._sortBy=function(t,e){return _.sortBy(t,function(t){if(e||(e="displayName"),"displayName"===e){if(t.displayName)return t.displayName().toLowerCase();e="name"}return void 0===t[e]?"":null===t[e]?"":t[e].toLowerCase?t[e].toLowerCase():t[e]})},n._order=function(t,e){return"DESC"===e?t.reverse():t},n._filter=function(t,e){var n,i;for(n in e)i=e[n],t=_.filter(t,function(t){if(t[n]===i)return t});return t},n._filterExtended=function(t,e){return t=_.filter(t,function(t){var n,i,s,r,o,a,l;for(i=0,r=e.length;i<r;i++){n=e[i],o=void 0;for(s in n)l=n[s],!1!==o&&(a=new RegExp(l,"i"),o=!(void 0===t[s]||null===t[s]||!t[s].match(a)));if(!0===o)return t}})},n.prototype.activityMessage=function(t){return"Need own activityMessage() in model to generate text ("+this.objectDisplayName()+"/"+t.type+")."},n.lastUpdatedAt=function(){var t,e,n,i,s;for(i=this.all(),t=0,n=i.length;t<n;t++)e=i[t],e.updated_at&&(s?e.updated_at>s&&(s=e.updated_at):s=e.updated_at);return s},n.updatedAt=function(t){if(this.irecords[t])return this.irecords[t].updated_at},n.findNative=function(t){return this.irecords[t]||("function"==typeof notFound?notFound(t):void 0)},n.tagGet=function(t,e,n){return App.Ajax.request({id:e,type:"GET",url:this.apiPath+"/tags",data:{object:this.className,o_id:t},processData:!0,success:function(t){return n(t)}})},n.tagAdd=function(t,e){return App.Ajax.request({type:"GET",url:this.apiPath+"/tags/add",data:{object:this.className,o_id:t,item:e},processData:!0})},n.tagRemove=function(t,e){return App.Ajax.request({type:"GET",url:this.apiPath+"/tags/remove",data:{object:this.className,o_id:t,item:e},processData:!0})},n.clearInMemory=function(){return App.Delay.clearLevel("model-"+this.className),this.resetCallbacks(),this.resetAttributes(),this.deleteAll()},n.updateAttributes=function(t){var e,n,i,s,r,o,a,l,c,u;for(_.isEmpty(this.org_configure_attributes)&&(this.org_configure_attributes=$.extend(!0,[],this.configure_attributes)),u=[],s=0,a=t.length;s<a;s++){for(e=t[s],this.attributes.push(e.name),i=!1,c=this.configure_attributes,r=o=0,l=c.length;o<l;r=++o)if(n=c[r],n.name===e.name){this.configure_attributes[r]=_.extend(n,e),i=!0;break}i?u.push(void 0):u.push(this.configure_attributes.push(e))}return u},n.resetAttributes=function(){if(!_.isEmpty(this.org_configure_attributes))return this.configure_attributes=$.extend(!0,[],this.org_configure_attributes)},n.resetCallbacks=function(){if(this.SUBSCRIPTION_ITEM&&(this.SUBSCRIPTION_ITEM={}),this.SUBSCRIPTION_COLLECTION)return this.SUBSCRIPTION_COLLECTION={}},n}(Spine.Model)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.ActivityStream=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.configure("ActivityStream","name"),n.extend(Spine.Model.Ajax),n.url=n.apiPath+"/activity_steams",n}(App.Model)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.Application=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.configure("Application","name","redirect_uri"),n.extend(Spine.Model.Ajax),n.url=n.apiPath+"/applications",n.configure_attributes=[{name:"name",display:"Name",tag:"input",type:"text",limit:100,"null":!1},{name:"redirect_uri",display:"Callback URL",tag:"textarea",limit:250,"null":!1,note:"Use one line per URI"},{name:"clients",display:"Clients",tag:"input",readonly:1},{name:"created_at",display:"Created",tag:"datetime",readonly:1},{name:"updated_at",display:"Updated",tag:"datetime",readonly:1}],n.configure_overview=["name","redirect_uri","clients"],n.configure_delete=!0,n}(App.Model)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.Calendar=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.configure("Calendar","name","timezone","default","business_hours","ical_url","public_holidays","note"),n.extend(Spine.Model.Ajax),n.url=n.apiPath+"/calendars",n.configure_attributes=[{name:"name",display:"Name",tag:"input",type:"text",limit:100,"null":!1},{name:"timezone",display:"Time zone",tag:"timezone","null":!1},{name:"business_hours",display:"Business Hours",tag:"business_hours","null":!0},{name:"ical_url",display:"Holidays iCalendar Feed",tag:"ical_feed",placeholder:"http://example.com/public_holidays.ical","null":!0},{name:"public_holidays",display:"Holidays",tag:"holiday_selector","null":!0},{name:"note",display:"Note",tag:"textarea",limit:250,"null":!0},{name:"created_by_id",display:"Created by",relation:"User",readonly:1},{name:"created_at",display:"Created",tag:"datetime",readonly:1},{name:"updated_by_id",display:"Updated by",relation:"User",readonly:1},{name:"updated_at",display:"Updated",tag:"datetime",readonly:1}],n.prototype.displayName=function(){return this.name+" - "+this.timezone},n.description='A **calendar** is needed for calculation of escalation based on business hours and sending out escalation notifications..\n\nDefine a **"standard"** calendar which is valid system-wide. Only in the defined business hours the escalation notifications will be sent to your agents.\n\nDo you have customers with different business hours, you can create multiple calendars. Tickets are linked to calendars using **SLAs**.',n}(App.Model)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.Channel=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.configure("Channel","adapter","area","options","group_id","active","updated_at"),n.extend(Spine.Model.Ajax),n.url=n.apiPath+"/channels",n.prototype.displayName=function(){var t;return t="",this.options&&(this.options.inbound&&(t+=this.options.inbound.options.user+"@"+this.options.inbound.options.host+" ("+this.options.inbound.adapter+")"),this.options.outbound&&this.options.outbound&&(""!==t&&(t+=" / "),this.options.outbound.options?t+=this.options.outbound.options.host+" ("+this.options.outbound.adapter+")":t+=" ("+this.options.outbound.adapter+")")),""===t&&(t="???"),t},n}(App.Model)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.Chat=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.configure("Chat","name","active","public","max_queue","block_ip","block_country","note"),n.extend(Spine.Model.Ajax),n.url=n.apiPath+"/chats",n.countries={AF:"Afghanistan",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua And Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia And Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, The Democratic Republic Of The",CK:"Cook Islands",CR:"Costa Rica",CI:"Cote D'ivoire",HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",TP:"East Timor",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GN:"Guinea",GW:"Guinea-bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island And Mcdonald Islands",VA:"Holy See (vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran, Islamic Republic Of",IQ:"Iraq",IE:"Ireland",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JO:"Jordan",KZ:"Kazakstan",KE:"Kenya",KI:"Kiribati",KP:"Korea, Democratic People's Republic Of",KR:"Korea, Republic Of",KV:"Kosovo",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libyan Arab Jamahiriya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macau",MK:"Macedonia, The Former Yugoslav Republic Of",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia, Federated States Of",MD:"Moldova, Republic Of",MC:"Monaco",MN:"Mongolia",MS:"Montserrat",ME:"Montenegro",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestinian Territory, Occupied",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",SH:"Saint Helena",KN:"Saint Kitts And Nevis",LC:"Saint Lucia",PM:"Saint Pierre And Miquelon",VC:"Saint Vincent And The Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome And Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia And The South Sandwich Islands",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard And Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan, Province Of China",TJ:"Tajikistan",TZ:"Tanzania, United Republic Of",TH:"Thailand",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad And Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks And Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Minor Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.s.",WF:"Wallis And Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"},n.configure_attributes=[{name:"name",display:"Name",tag:"input",type:"text",limit:100,"null":!1},{name:"note",display:"Note",tag:"textarea",limit:250,"null":!0},{name:"max_queue",display:"Max. clients in waitlist",tag:"input","default":2},{name:"block_ip",display:"Blocked IPs (separated by ;)",tag:"input","default":"","null":!0},{name:"block_country",display:"Blocked countries",tag:"column_select",multiple:!0,"null":!0,"default":"",options:n.countries,seperator:";"},{name:"active",display:"Active",tag:"active","default":!0},{name:"created_by_id",display:"Created by",relation:"User",readonly:1},{name:"created_at",display:"Created",tag:"datetime",readonly:1},{name:"updated_by_id",display:"Updated by",relation:"User",readonly:1},{name:"updated_at",display:"Updated",tag:"datetime",readonly:1}],n}(App.Model)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.ChatSession=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.configure("ChatSession","name","note"),n.extend(Spine.Model.Ajax),n.url=n.apiPath+"/chat_sessions",n.configure_attributes=[{name:"name",display:"Name",tag:"input",type:"text",limit:100,"null":!1},{name:"state",display:"State",readonly:1},{name:"created_by_id",display:"Created by",relation:"User",readonly:1},{name:"created_at",display:"Created",tag:"datetime",readonly:1},{name:"updated_by_id",display:"Updated by",relation:"User",readonly:1},{name:"updated_at",display:"Updated",tag:"datetime",readonly:1}],n.configure_overview=["name","state","created_at"],n.prototype.uiUrl=function(){return"#customer_chat/session/"+this.id},n.prototype.searchResultAttributes=function(){var t;return t="",_.isEmpty(this.name)||(t=this.displayName()),{display:"#"+this.id+" "+t,id:this.id,"class":"chat_session chat_session-popover",url:this.uiUrl(),icon:"chat"}},n}(App.Model)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.EmailAddress=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.configure("EmailAddress","realname","email","channel_id","note","active","updated_at"),n.extend(Spine.Model.Ajax),n.url=n.apiPath+"/email_addresses",n.filterChannel=function(t,e){return"collection"!==e?t:_.filter(t,function(t){if(t&&"Email::Account"===t.area)return t})},n.configure_attributes=[{name:"realname",display:"Real name",tag:"input",type:"text",limit:250,"null":!1},{name:"email",display:"Email",tag:"input",type:"email",limit:250,"null":!1},{name:"channel_id",display:"Channel",tag:"select",multiple:!1,"null":!0,relation:"Channel",nulloption:!0,filter:n.filterChannel,do_not_log:!0},{name:"note",display:"Note",tag:"textarea",note:"Notes are visible to agents only, never to customers.",limit:250,"null":!0},{name:"updated_at",display:"Updated",tag:"datetime",readonly:1},{name:"active",display:"Active",tag:"active",readonly:1}],n.configure_overview=["realname","email"],n}(App.Model)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.ExternalCredential=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.configure("ExternalCredential","name","credentials"),n.extend(Spine.Model.Ajax),n.url=n.apiPath+"/external_credentials",n}(App.Model)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.Group=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.configure("Group","name","assignment_timeout","follow_up_possible","follow_up_assignment","email_address_id","signature_id","note","active","updated_at"),n.extend(Spine.Model.Ajax),n.url=n.apiPath+"/groups",n.configure_attributes=[{name:"name",display:"Name",tag:"input",type:"text",limit:100,"null":!1},{name:"assignment_timeout",display:"Assignment Timeout",tag:"input",note:"Assignment timeout in minutes if assigned agent is not working on it. Ticket will be shown as unassigend.",type:"text",limit:100,"null":!0},{name:"follow_up_possible",display:"Follow up possible",tag:"select","default":"yes",options:{yes:"yes",new_ticket:"do not reopen Ticket but create new Ticket"},"null":!1,note:"Follow up for closed ticket possible or not.",translate:!0},{name:"follow_up_assignment",display:"Assign Follow Ups",tag:"select","default":"yes",options:{"true":"yes","false":"no"},"null":!1,note:"Assign follow up to latest agent again.",translate:!0},{name:"email_address_id",display:"Email",tag:"select",multiple:!1,"null":!0,relation:"EmailAddress",nulloption:!0,do_not_log:!0},{name:"signature_id",display:"Signature",tag:"select",multiple:!1,"null":!0,relation:"Signature",nulloption:!0,do_not_log:!0},{name:"note",display:"Note",tag:"textarea",note:"Notes are visible to agents only, never to customers.",limit:250,"null":!0},{name:"updated_at",display:"Updated",tag:"datetime",readonly:1},{name:"active",display:"Active",tag:"active","default":!0}],n.configure_clone=!0,n.configure_overview=["name"],n.prototype.uiUrl=function(){return"#group/zoom/"+this.id},n.prototype.activityMessage=function(t){return"create"===t.type?App.i18n.translateContent("%s created Group |%s|",t.created_by.displayName(),t.title):"update"===t.type?App.i18n.translateContent("%s updated Group |%s|",t.created_by.displayName(),t.title):"Unknow action for ("+this.objectDisplayName()+"/"+t.type+"), extend activityMessage() of model."},n.prototype.avatar=function(t,e){return null==t&&(t=40),null==e&&(e=[]),t=parseInt(t,10),e.push("size-"+t),e.push("avatar--group-color-"+this.id%3),App.view("avatar_group")({cssClass:e.join(" ")})},n.accesses=function(){return{read:"Read",create:"Create",change:"Change",overview:"Overview",full:"Full"}},n}(App.Model)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.Job=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.configure("Job","name","timeplan","condition","perform","disable_notification","note","active"),n.extend(Spine.Model.Ajax),n.url=n.apiPath+"/jobs",n.configure_attributes=[{name:"name",display:"Name",tag:"input",type:"text",limit:100,"null":!1},{name:"timeplan",display:"When should the job run?",tag:"timer","null":!0},{name:"condition",display:"Conditions for effected objects",tag:"ticket_selector","null":!0},{name:"perform",display:"Execute changes on objects",tag:"ticket_perform_action","null":!0,notification:!0,ticket_delete:!0},{name:"disable_notification",display:"Disable Notifications",tag:"boolean","default":!0},{name:"note",display:"Note",tag:"textarea",note:"Notes are visible to agents only, never to customers.",limit:250,"null":!0},{name:"active",display:"Active",tag:"active","default":!0},{name:"matching",display:"Will process",readonly:1},{name:"processed",display:"Has processed",readonly:1},{name:"last_run_at",display:"Last run",tag:"datetime",readonly:1},{name:"next_run_at",display:"Scheduled for",tag:"datetime",readonly:1},{name:"running",display:"Running",tag:"boolean",readonly:1},{name:"created_by_id",display:"Created by",relation:"User",readonly:1},{name:"created_at",display:"Created",tag:"datetime",readonly:1},{name:"updated_by_id",display:"Updated by",relation:"User",readonly:1},{name:"updated_at",display:"Updated",tag:"datetime",readonly:1}],n.configure_delete=!0,n.configure_clone=!0,n.configure_overview=["name","last_run_at","processed","next_run_at","matching"],n}(App.Model)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.Locale=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.configure("Locale","name","alias","locale"),n.extend(Spine.Model.Ajax),n.url=n.apiPath+"/locales",n}(App.Model)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.Macro=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.configure("Macro","name","perform","ux_flow_next_up","note","active"),n.extend(Spine.Model.Ajax),n.url=n.apiPath+"/macros",n.configure_attributes=[{name:"name",display:"Name",tag:"input",type:"text",limit:100,"null":!1},{name:"perform",display:"Actions",tag:"ticket_perform_action","null":!0},{name:"ux_flow_next_up",display:"Once completed...",tag:"select","default":"none",options:{none:"Stay on tab",next_task:"Close tab",next_from_overview:"Advance to next ticket from overview"}},{name:"updated_at",display:"Updated",tag:"datetime",readonly:1},{name:"note",display:"Note",tag:"textarea",limit:250,"null":!0},{name:"active",display:"Active",tag:"active","default":!0}],n.configure_delete=!0,n.configure_clone=!0,n.configure_overview=["name"],n.description="Macros are....\n",n}(App.Model)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.ObjectManagerAttribute=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.configure("ObjectManagerAttribute","name","object","display","active","editable","data_type","data_option","screens","position"),n.extend(Spine.Model.Ajax),n.url=n.apiPath+"/object_manager_attributes",n.configure_attributes=[{name:"name",display:"Name",tag:"input",type:"text",limit:100,"null":!1},{name:"display",display:"Display",tag:"input",type:"text",limit:100,"null":!1},{name:"object",display:"Object",tag:"input",readonly:1},{name:"position",display:"Position",tag:"input",readonly:1},{name:"active",display:"Active",tag:"active","default":!0},{name:"data_type",display:"Format",tag:"object_manager_attribute","null":!1},{name:"updated_at",display:"Updated",tag:"datetime",readonly:1}],n}(App.Model)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.OnlineNotification=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.configure("OnlineNotification","name","seen"),n.extend(Spine.Model.Ajax),n.url=n.apiPath+"/online_notifications",n.play=function(t){var e;return t?(e=new Audio("assets/sounds/"+t),void e.play()):App.Session.get("preferences")&&App.OnlineNotification.soundEnabled()&&(!(e=App.Config.get("latest_online_notification_sond"))||e.ended)?(t=App.OnlineNotification.soundFile(),e=new Audio("assets/sounds/"+t),App.Config.set("latest_online_notification_sond",e),e.play()):void 0},n.soundEnabled=function(){var t;return!!(t=App.Session.get("preferences"))&&(t.notification_sound||(t.notification_sound={}),void 0===t.notification_sound.enabled&&(t.notification_sound.enabled=!0),"false"!==t.notification_sound.enabled.toString())},n.soundFile=function(){var t,e;return t="Xylo.mp3",e=App.Session.get("preferences"),e&&e.notification_sound&&e.notification_sound.file?e.notification_sound.file:t},n.seen=function(t,e){var n,i,s,r,o;for(r=App.OnlineNotification.all(),o=[],n=0,i=r.length;n<i;n++)s=r[n],s.object===t&&s.o_id.toString()===e.toString()&&!0!==s.seen?(s.seen=!0,o.push(s.save())):o.push(void 0);return o},n}(App.Model)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.Organization=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.configure("Organization","name","shared","note","member_ids","active","updated_at"),n.extend(Spine.Model.Ajax),n.url=n.apiPath+"/organizations",n.configure_attributes=[{name:"name",display:"Name",tag:"input",type:"text",limit:100,"null":!1,info:!0},{name:"shared",display:"Shared organization",tag:"boolean",note:"Customers in the organization can view each other items.",type:"boolean","default":!0,"null":!1,info:!1},{name:"created_by_id",display:"Created by",relation:"User",readonly:1,info:!1},{name:"created_at",display:"Created at",tag:"datetime",readonly:1,info:!1},{name:"updated_by_id",display:"Updated by",relation:"User",readonly:1,info:!1},{name:"updated_at",display:"Updated at",tag:"datetime",readonly:1,info:!1}],n.configure_clone=!0,n.configure_overview=["name","shared"],n.description='Using **Organisations** you can **group** customers. This has among others two important benefits:\n\n1. As an **Agent** you do not only have an overview of the open tickets for one person but an **overview over their whole organisation**.\n2. As a **Customer** you can also check the **Tickets which your colleagues created** and modify their tickets (if your organization is set to "shared", which can be defined per organization)).',n.prototype.uiUrl=function(){return"#organization/profile/"+this.id},n.prototype.icon=function(){return"organization"},n._fillUp=function(t){var e,n,i,s,r;if(t.member_ids)for(t.members=[],i=t.member_ids,e=0,n=i.length;e<n;e++)r=i[e],App.User.exists(r)&&(s=App.User.findNative(r),t.members.push(s));return t},n.prototype.searchResultAttributes=function(){return{display:""+this.displayName(),id:this.id,"class":"organization organization-popover",url:this.uiUrl(),icon:"organization"}},n.prototype.activityMessage=function(t){return"create"===t.type?App.i18n.translateContent("%s created Organization |%s|",t.created_by.displayName(),t.title):"update"===t.type?App.i18n.translateContent("%s updated Organization |%s|",t.created_by.displayName(),t.title):"Unknow action for ("+this.objectDisplayName()+"/"+t.type+"), extend activityMessage() of model."},n}(App.Model)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.Overview=function(n){function i(){return this.prevTicket=t(this.prevTicket,this),this.nextTicket=t(this.nextTicket,this),this.indexOf=t(this.indexOf,this),this.tickets=t(this.tickets,this),i.__super__.constructor.apply(this,arguments)}return e(i,n),i.configure("Overview","name","prio","condition","order","group_by","group_direction","view","user_ids","organization_shared","role_ids","active"),i.extend(Spine.Model.Ajax),i.url=i.apiPath+"/overviews",i.configure_attributes=[{name:"name",display:"Name",tag:"input",type:"text",limit:100,"null":!1},{name:"link",display:"Link",readonly:1},{name:"role_ids",display:"Available for Role",tag:"column_select",multiple:!0,"null":!1,relation:"Role",translate:!0},{name:"user_ids",display:"Available for User",tag:"column_select",multiple:!0,"null":!0,relation:"User",sortBy:"firstname"},{name:"organization_shared",display:"Only available for Users with shared Organization",tag:"select",options:{"true":"yes","false":"no"},"default":!1,"null":!0},{name:"out_of_office",
display:"Only available for Users which are replacements for other users.",tag:"select",options:{"true":"yes","false":"no"},"default":!1,"null":!0},{name:"condition",display:"Conditions for shown Tickets",tag:"ticket_selector","null":!1,out_of_office:!0},{name:"prio",display:"Prio",readonly:1},{name:"view::s",display:"Attributes",tag:"checkboxTicketAttributes","default":["number","title","state","created_at"],"null":!1,translate:!0},{name:"order::by",display:"Order",tag:"selectTicketAttributes","default":"created_at","null":!1,translate:!0},{name:"order::direction",display:"Order by Direction",tag:"select","default":"down","null":!1,translate:!0,options:{ASC:"up",DESC:"down"}},{name:"group_by",display:"Group by",tag:"select","default":"","null":!0,nulloption:!0,translate:!0,options:{customer:"Customer",state:"State",priority:"Priority",group:"Group",owner:"Owner"}},{name:"group_direction",display:"Group by Direction",tag:"select","default":"down","null":!1,translate:!0,options:{ASC:"up",DESC:"down"}},{name:"active",display:"Active",tag:"active","default":!0},{name:"created_by_id",display:"Created by",relation:"User",readonly:1},{name:"created_at",display:"Created",tag:"datetime",readonly:1},{name:"updated_by_id",display:"Updated by",relation:"User",readonly:1},{name:"updated_at",display:"Updated",tag:"datetime",readonly:1}],i.configure_delete=!0,i.configure_clone=!0,i.configure_overview=["name","link","role_ids"],i.description="You can create **overviews** for your agents and your customers. These could for instance serve as a sort of work list for items for which your agents would work.\n\nYou can also create overvies and limit them to specific agents or to groups of agents.",i.prototype.uiUrl=function(){return"#ticket/view/"+this.link},i.prototype.tickets=function(){return App.OverviewListCollection.get(this.link).tickets},i.prototype.indexOf=function(t){return isNaN(t)||(t=App.Ticket.find(t)),_.findIndex(this.tickets(),function(e){return e.id===t.id})},i.prototype.nextTicket=function(t){var e;return e=this.indexOf(t),e>=0?this.tickets()[e+1]:void 0},i.prototype.prevTicket=function(t){return this.tickets()[this.indexOf(t)-1]},i.groupByAttributes=function(){var t,e,n,i;e={},i=App.Ticket.attributesGet();for(n in i)t=i[n],n.match(/(_at|_no)$/)||"datetime"===t.tag||"number"===n||"tags"===n||(n=n.replace(/_(id|ids)$/,""),e[n]=t.display);return e},i}(App.Model)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.Permission=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.configure("Permission","name","note","active"),n.extend(Spine.Model.Ajax),n.url=n.apiPath+"/permissions",n}(App.Model)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.PostmasterFilter=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.configure("PostmasterFilter","name","channel","match","perform","note","active","updated_at"),n.extend(Spine.Model.Ajax),n.url=n.apiPath+"/postmaster_filters",n.configure_attributes=[{name:"name",display:"Name",tag:"input",type:"text",limit:250,"null":!1},{name:"channel",display:"Channel",type:"input",readonly:1},{name:"match",display:"Match all of the following",tag:"postmaster_match",note:'You can use regular expression by using "regex:your_reg_exp".'},{name:"perform",display:"Perform action of the following",tag:"postmaster_set"},{name:"note",display:"Note",tag:"textarea",limit:250,"null":!0},{name:"updated_at",display:"Updated",tag:"datetime",readonly:1},{name:"active",display:"Active",tag:"active","default":!0},{name:"created_by_id",display:"Created by",relation:"User",readonly:1},{name:"created_at",display:"Created",tag:"datetime",readonly:1},{name:"updated_by_id",display:"Updated by",relation:"User",readonly:1},{name:"updated_at",display:"Updated",tag:"datetime",readonly:1}],n.configure_delete=!0,n.configure_overview=["name"],n.configure_clone=!0,n.on("create",function(t){return t.channel="email"}),n}(App.Model)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.RecentView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.configure("RecentView","name"),n.extend(Spine.Model.Ajax),n.url=n.apiPath+"/recent_view",n}(App.Model)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.ReportProfile=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.configure("ReportProfile","name","condition","active"),n.extend(Spine.Model.Ajax),n.url=n.apiPath+"/report_profiles",n.configure_attributes=[{name:"name",display:"Name",tag:"input",type:"text",limit:100,"null":!1},{name:"condition",display:"Filter",tag:"ticket_selector","null":!0},{name:"updated_at",display:"Updated",tag:"datetime",readonly:1},{name:"active",display:"Active",tag:"active","default":!0}],n.configure_delete=!0,n.configure_clone=!0,n.configure_overview=["name"],n}(App.Model)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.Role=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.configure("Role","name","permission_ids","group_ids","default_at_signup","note","active","updated_at"),n.extend(Spine.Model.Ajax),n.url=n.apiPath+"/roles",n.configure_attributes=[{name:"name",display:"Name",tag:"input",type:"text",limit:100,"null":!1},{name:"permission_ids",display:"Permissions",tag:"permission",item_class:"checkbox"},{name:"default_at_signup",display:"Default at Signup",tag:"boolean","default":!1,translate:!0},{name:"note",display:"Note",tag:"textarea",note:"Notes are visible to agents only, never to customers.",limit:250,"null":!0},{name:"active",display:"Active",tag:"active","default":!0},{name:"created_by_id",display:"Created by",relation:"User",readonly:1},{name:"created_at",display:"Created",tag:"datetime",readonly:1},{name:"updated_by_id",display:"Updated by",relation:"User",readonly:1},{name:"updated_at",display:"Updated",tag:"datetime",readonly:1}],n.configure_clone=!0,n.configure_overview=["name","default_at_signup"],n.prototype.activityMessage=function(t){return"create"===t.type?App.i18n.translateContent("%s created Role |%s|",t.created_by.displayName(),t.title):"update"===t.type?App.i18n.translateContent("%s updated Role |%s|",t.created_by.displayName(),t.title):"Unknow action for ("+this.objectDisplayName()+"/"+t.type+"), extend activityMessage() of model."},n._fillUp=function(t){var e,n,i,s,r;if(t.permission_ids)for(t.permissions=[],r=t.permission_ids,e=0,n=r.length;e<n;e++)s=r[e],App.Permission.exists(s)&&(i=App.Permission.findNative(s),t.permissions.push(i));return t},n}(App.Model)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.Setting=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.configure("Setting","name","state_current"),n.extend(Spine.Model.Ajax),n.url=n.apiPath+"/settings",n.get=function(t){var e;if(!(e=App.Setting.findByAttribute("name",t)))throw"No such setting '"+t+"' found!";return e.state_current.value},n.set=function(t,e,n){var i;if(null==n&&(n={}),!(i=App.Setting.findByAttribute("name",t)))throw"No such setting '"+t+"' found!";return i.state_current.value=e,n.done||(n.done=function(){if(n.notify&&App.Event.trigger("notify",{type:"success",msg:App.i18n.translateContent("Update successful!"),timeout:2e3}),App.Setting.preferencesPost(this),n.doneLocal)return n.doneLocal(this)}),n.fail||(n.fail=function(t,e){if(App.Event.trigger("notify",{type:"error",msg:App.i18n.translateContent(e.error_human||e.error||"Unable to update object!"),timeout:2e3}),n.failLocal)return n.failLocal(this)}),i.frontend&&App.Config.set(t,e),i.save(n)},n.preferencesPost=function(t){var e,n,i,s,r,o,a;if(t.preferences&&(t.preferences.render&&((e=t.preferences).trigger||(e.trigger=[]),t.preferences.trigger.push("ui:rerender")),!_.isEmpty(t.preferences.trigger))){for(s=t.preferences.trigger,_.isArray(t.preferences.trigger)||(s=[t.preferences.trigger]),n=0,a=[],r=0,o=s.length;r<o;r++)i=s[r],n+=1,a.push(function(t,e){var n;return n=function(){return App.Event.trigger(t)},App.Delay.set(n,300*e)}(i,n));return a}},n}(App.Model)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.Signature=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.configure("Signature","name","body","note","active","updated_at"),n.extend(Spine.Model.Ajax),n.url=n.apiPath+"/signatures",n.configure_attributes=[{name:"name",display:"Name",tag:"input",type:"text",limit:100,"null":!1},{name:"body",display:"Text",tag:"richtext",limit:500,"null":!0,plugins:[{controller:"WidgetPlaceholder",params:{objects:[{prefix:"ticket",object:"Ticket",display:"Ticket"},{prefix:"user",object:"User",display:"Current User"}]}}]},{name:"note",display:"Note",tag:"textarea",note:"Notes are visible to agents only, never to customers.",limit:250,"null":!0},{name:"active",display:"Active",tag:"active","default":!0},{name:"created_by_id",display:"Created by",relation:"User",readonly:1},{name:"created_at",display:"Created",tag:"datetime",readonly:1},{name:"updated_by_id",display:"Updated by",relation:"User",readonly:1},{name:"updated_at",display:"Updated",tag:"datetime",readonly:1}],n.configure_overview=["name"],n.configure_clone=!0,n}(App.Model)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.Sla=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.configure("Sla","name","first_response_time","update_time","solution_time","condition","calendar_id"),n.extend(Spine.Model.Ajax),n.url=n.apiPath+"/slas",n.configure_attributes=[{name:"name",display:"Name",tag:"input",type:"text",limit:100,"null":!1},{name:"condition",display:"Ticket Selector",tag:"ticket_selector","null":!1,note:"Create rules that single out the tickets for the Service Level Agreement."},{name:"calendar_id",display:"Calendar",tag:"select",relation:"Calendar","null":!1},{name:"sla_times",display:"SLA Times",tag:"sla_times","null":!0},{name:"created_by_id",display:"Created by",relation:"User",readonly:1},{name:"created_at",display:"Created",tag:"datetime",readonly:1},{name:"updated_by_id",display:"Updated by",relation:"User",readonly:1},{name:"updated_at",display:"Updated",tag:"datetime",readonly:1}],n.configure_delete=!0,n.configure_overview=["name"],n.description="** Service Level Agreements **, abbreviated ** SLAs **, help you to meet certain customers' time-related responses. Thus, for example, you can say customers should always get a response from you after 8 hours at the latest. In the event of an imminent violation or a breach, Zammad will alert you to such events.\n\nIt can be ** response time ** (time between the creation of a ticket and the first reaction of an agent), ** update time ** (time between a customer's request and an agent's reaction) and ** solution time ** (time between creation and closing a ticket ) To be defined.\n\nAny violations are displayed in a separate view in the overviews. You can also configure ** e-mail notifications **.",n}(App.Model)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.StatsStore=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.configure("StatsStore","name","state"),n.extend(Spine.Model.Ajax),n.url=n.apiPath+"/stats_store",n}(App.Model)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.Taskbar=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.configure("Taskbar","key","client_id","callback","state","params","prio","notify","active","attachments","updated_at"),n.extend(Spine.Model.Ajax),n.url=n.apiPath+"/taskbar",n}(App.Model)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.Template=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.configure("Template","name","options","group_ids","user_id","updated_at"),n.extend(Spine.Model.Ajax),n.url=n.apiPath+"/templates",n}(App.Model)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.TextModule=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.configure("TextModule","name","keywords","content","active","group_ids","user_id","updated_at"),n.extend(Spine.Model.Ajax),n.url=n.apiPath+"/text_modules",n.configure_attributes=[{name:"name",display:"Name",tag:"input",type:"text",limit:100,"null":!1},{name:"keywords",display:"Keywords",tag:"input",type:"text",limit:100,"null":!0},{name:"content",display:"Content",tag:"richtext",limit:2e3,"null":!1,plugins:[{controller:"WidgetPlaceholder",params:{objects:[{prefix:"ticket",object:"Ticket",display:"Ticket"},{prefix:"user",object:"User",display:"Current User"}]}}],note:'To select placeholders from a list, just enter "::".'},{name:"updated_at",display:"Updated",tag:"datetime",readonly:1},{name:"active",display:"Active",tag:"active","default":!0}],n.configure_delete=!0,n.configure_clone=!0,n.configure_overview=["name","keywords","content"],n.description='Create Text Modules to **spend less time writing responses**. TextModules can include smart variables like the users name or email address.\n\nExamples of snippets are:\n\n* Hello Mrs. #{ticket.customer.lastname},\n* Hello Mr. #{ticket.customer.lastname},\n* Hello #{ticket.customer.firstname},\n* My Name is #{user.firstname},\n\nOf course you can also use multi line snippets.\n\nAvailable objects are:\n* ticket (e. g. ticket.state, ticket.group)\n* ticket.customer (e. g. ticket.customer.firstname, ticket.customer.lastname)\n* ticket.owner (e. g. ticket.owner.firstname, ticket.owner.lastname)\n* ticket.organization (e. g. ticket.organization.name)\n* user (e. g. user.firstname, user.email)\n\nTo select placeholders from a list, just enter "::".\n',n}(App.Model)}.call(this),function(){var extend=function(t,e){function n(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;App.Ticket=function(superClass){function Ticket(){return Ticket.__super__.constructor.apply(this,arguments)}return extend(Ticket,superClass),Ticket.configure("Ticket","number","title","group_id","owner_id","customer_id","state_id","priority_id","article","tags","links","updated_at","preferences"),Ticket.extend(Spine.Model.Ajax),Ticket.url=Ticket.apiPath+"/tickets",Ticket.configure_attributes=[{name:"number",display:"#",tag:"input",type:"text",limit:100,"null":!0,readonly:1,width:"68px"},{name:"title",display:"Title",tag:"input",type:"text",limit:100,"null":!1},{name:"customer_id",display:"Customer",tag:"input",type:"text",limit:100,"null":!1,autocapitalize:!1,relation:"User"},{name:"organization_id",display:"Organization",tag:"select",relation:"Organization",readonly:1},{name:"group_id",display:"Group",tag:"select",multiple:!1,limit:100,"null":!1,relation:"Group",width:"10%",edit:!0},{name:"owner_id",display:"Owner",tag:"select",multiple:!1,limit:100,"null":!0,relation:"User",width:"12%",edit:!0},{name:"state_id",display:"State",tag:"select",multiple:!1,"null":!1,relation:"TicketState","default":"new",width:"12%",edit:!0,customer:!0},{name:"pending_time",display:"Pending till",tag:"datetime","null":!0,width:"130px"},{name:"priority_id",display:"Priority",tag:"select",multiple:!1,"null":!1,relation:"TicketPriority","default":"2 normal",width:"12%",edit:!0,customer:!0},{name:"article_count",display:"Article#",readonly:1,width:"12%"},{name:"escalation_at",display:"Escalation",tag:"datetime","null":!0,readonly:1,width:"110px","class":"escalation"},{name:"last_contact_at",display:"Last contact",tag:"datetime","null":!0,readonly:1,width:"110px"},{name:"last_contact_agent_at",display:"Last contact (agent)",tag:"datetime","null":!0,readonly:1,width:"110px"},{name:"last_contact_customer_at",display:"Last contact (customer)",tag:"datetime","null":!0,readonly:1,width:"110px"},{name:"first_response_at",display:"First response",tag:"datetime","null":!0,readonly:1,width:"110px"},{name:"close_at",display:"Closing time",tag:"datetime","null":!0,readonly:1,width:"110px"},{name:"created_by_id",display:"Created by",relation:"User",readonly:1},{name:"created_at",display:"Created at",tag:"datetime",width:"110px",align:"right",readonly:1},{name:"updated_by_id",display:"Updated by",relation:"User",readonly:1},{name:"updated_at",display:"Updated at",tag:"datetime",width:"110px",align:"right",readonly:1}],Ticket.prototype.uiUrl=function(){return"#ticket/zoom/"+this.id},Ticket.prototype.getState=function(){var t,e,n;return n=App.TicketState.find(this.state_id),e=App.TicketStateType.find(n.state_type_id),t="closed","new"===e.name||"open"===e.name?(t="open",this.escalation_at&&new Date(Date.parse(this.escalation_at))<new Date&&(t="escalating")):"pending reminder"===e.name?(t="pending",this.pending_time&&new Date(Date.parse(this.pending_time))<new Date&&(t="open")):"pending action"===e.name&&(t="pending"),t},Ticket.prototype.icon=function(){return"task-state"},Ticket.prototype.iconClass=function(){return this.getState()},Ticket.prototype.iconTitle=function(){var t,e;return e=App.TicketState.find(this.state_id),t=App.TicketStateType.find(e.state_type_id),"pending reminder"===t.name&&this.pending_time&&new Date(Date.parse(this.pending_time))<new Date?App.i18n.translateInline(e.displayName())+" - "+App.i18n.translateInline("reached"):this.escalation_at&&new Date(Date.parse(this.escalation_at))<new Date?App.i18n.translateInline(e.displayName())+" - "+App.i18n.translateInline("escalated"):App.i18n.translateInline(e.displayName())},Ticket.prototype.iconTextClass=function(){return"task-state-"+this.getState()+"-color"},Ticket.prototype.iconActivity=function(t){if(t)return this.owner_id===t.id?"important":""},Ticket.prototype.searchResultAttributes=function(){return{display:"#"+this.number+" - "+this.title,id:this.id,"class":"task-state-"+this.getState()+" ticket-popover",url:this.uiUrl(),icon:"task-state",iconClass:this.getState()}},Ticket.prototype.activityMessage=function(t){if(t)return"create"===t.type?App.i18n.translateContent("%s created Ticket |%s|",t.created_by.displayName(),t.title):"update"===t.type?App.i18n.translateContent("%s updated Ticket |%s|",t.created_by.displayName(),t.title):"reminder_reached"===t.type?App.i18n.translateContent("Pending reminder reached for Ticket |%s|",t.title):"escalation"===t.type?App.i18n.translateContent("Ticket |%s| is escalated!",t.title):"escalation_warning"===t.type?App.i18n.translateContent("Ticket |%s| will escalate soon!",t.title):"Unknow action for ("+this.objectDisplayName()+"/"+t.type+"), extend activityMessage() of model."},Ticket.macro=function(t){var e,n,i,s,r,o,a;s=t.macro,r=[];for(i in s)n=s[i],e=i.split("."),"ticket"===e[0]?"tags"===e[1]?(a=n.value.split(","),r.push(function(){var e,i,s;for(s=[],e=0,i=a.length;e<i;e++)o=a[e],"remove"===n.operator?t.callback&&t.callback.tagRemove?s.push(t.callback.tagRemove(o)):s.push(this.tagRemove(t.ticket.id,o)):t.callback&&t.callback.tagAdd?s.push(t.callback.tagAdd(o)):s.push(this.tagAdd(t.ticket.id,o));return s}.call(this))):"owner_id"===e[1]&&"current_user.id"===n.pre_condition?r.push(t.ticket[e[1]]=App.Session.get("id")):r.push(t.ticket[e[1]]=n.value):r.push(void 0);return r},Ticket.selector=function(t,e){var n,i,s,r,o,a;if(_.isEmpty(e))return!0;for(r in e)if(i=e[r],a=r.split("."),o=a[0],n=a[1],"article.subject"!==r||t.article.subject||(o="ticket",n="title"),"article.created_by_id"!==r||t.article.created_by_id||(t.article.created_by_id=App.Session.get("id")),s="ticket"===o?t:t[o]||{},!this._selectorMatch(s,o,n,i))return!1;return!0},Ticket._selectorConditionDate=function(condition,operator){var conditionValue;if("+"===operator||"-"===operator)return conditionValue=new Date,"minute"===condition.range?conditionValue.setTime(eval(conditionValue.getTime()+operator+6e4)):"hour"===condition.range?conditionValue.setTime(eval(conditionValue.getTime()+operator+36e5)):"day"===condition.range?conditionValue.setTime(eval(conditionValue.getTime()+operator+864e5)):"month"===condition.range?conditionValue.setTime(eval(conditionValue.getTime()+operator+108e6)):"year"===condition.range&&conditionValue.setTime(eval(conditionValue.getTime()+operator+1314e6)),conditionValue},Ticket._selectorMatch=function(t,e,n,i){var s,r,o,a,l,c,u,p,h,d,f,g,m,v,y,b,w,k,T;o=i.value,void 0===o&&(o=""),w=t[n],void 0===w&&(w=""),i.pre_condition&&(k=i.pre_condition.split("."),r=k[0],s=k[1],"current_user"===r?o=App.Session.get(s):"not_set"===i.pre_condition&&(o="")),a=new RegExp(App.Utils.escapeRegExp(o.toString()),"i"),_.isArray(w)||(w=[w]),_.isArray(o)||(o=[o]),T=!1;for(y in w){b=w[y];for(m in o)if(v=o[m],"contains"===i.operator)w.toString().match(a)&&(T=!0);else if("contains not"===i.operator)w.toString().match(a)||(T=!0);else if("contains all"===i.operator)for(T=!0,l=0,h=o.length;l<h;l++)v=o[l],_.contains(w,v)||(T=!1);else if("contains one"===i.operator)for(T=!1,c=0,d=o.length;c<d;c++)v=o[c],_.contains(w,v)&&(T=!0);else if("contains all not"===i.operator)for(T=!0,u=0,f=w.length;u<f;u++)b=w[u],_.contains(o,b)&&(T=!1);else if("contains one not"===i.operator)for(T=!1,p=0,g=w.length;p<g;p++)b=w[p],_.contains(o,b)||(T=!0);else if("is"===i.operator)w.toString().trim().toLowerCase()===v.toString().trim().toLowerCase()&&(T=!0);else if("is not"===i.operator)w.toString().trim().toLowerCase()!==v.toString().trim().toLowerCase()&&(T=!0);else if("after (absolute)"===i.operator)new Date(w.toString())>new Date(v.toString())&&(T=!0);else if("before (absolute)"===i.operator)new Date(w.toString())<new Date(v.toString())&&(T=!0);else if("before (relative)"===i.operator)v=this._selectorConditionDate(i,"-"),new Date(w.toString())<new Date(v.toString())&&(T=!0);else if("within last (relative)"===i.operator)v=this._selectorConditionDate(i,"-"),new Date(w.toString())<new Date&&new Date(w.toString())>new Date(v.toString())&&(T=!0);else if("after (relative)"===i.operator)v=this._selectorConditionDate(i,"+"),new Date(w.toString())>new Date(v.toString())&&(T=!0);else{if("within next (relative)"!==i.operator)throw"Unknown operator: "+i.operator;v=this._selectorConditionDate(i,"+"),new Date(w.toString())>new Date&&new Date(w.toString())<new Date(v.toString())&&(T=!0)}}return T},Ticket.prototype.editable=function(t){var e,n,i,s,r;if(null==t&&(t="change"),(r=App.Session.get("id"))===this.customer_id)return!0;if(!App.User.exists(r))return!1;for(e=App.User.find(r).all_group_ids(t),n=0,i=e.length;n<i;n++)if(s=e[n],s.toString()===this.group_id.toString())return!0;return!1},Ticket}(App.Model)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.TicketArticle=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.configure("TicketArticle","from","to","cc","subject","body","content_type","ticket_id","type_id","sender_id","internal","in_reply_to","form_id","subtype","time_unit","preferences","updated_at"),n.extend(Spine.Model.Ajax),n.url=n.apiPath+"/ticket_articles",n.configure_attributes=[{name:"ticket_id",display:"TicketID","null":!1,readonly:1,searchable:!1},{name:"from",display:"From",tag:"input",type:"text",limit:100,"null":!1},{name:"to",display:"To",tag:"input",type:"text",limit:100,"null":!0},{name:"cc",display:"Cc",tag:"input",type:"text",limit:100,"null":!0},{name:"subject",display:"Subject",tag:"input",type:"text",limit:100,"null":!0},{name:"body",display:"Text",tag:"textarea",rows:5,limit:100,"null":!1,searchable:!0},{name:"type_id",display:"Type",tag:"select",multiple:!1,"null":!1,relation:"TicketArticleType","default":""},{name:"sender_id",display:"Sender",tag:"select",multiple:!1,"null":!1,relation:"TicketArticleSender","default":""},{name:"internal",display:"Visibility",tag:"radio","default":!1,"null":!0,options:{"true":"internal","false":"public"}},{name:"created_by_id",display:"Created by",relation:"User",readonly:1},{name:"created_at",display:"Created",tag:"datetime",readonly:1,searchable:!1},{name:"updated_by_id",display:"Updated by",relation:"User",readonly:1,searchable:!1},{name:"updated_at",display:"Updated",tag:"datetime",readonly:1,searchable:!1}],n.prototype.uiUrl=function(){return"#ticket/zoom/"+this.ticket_id+"/"+this.id},n.prototype.objectDisplayName=function(){return"Article"},n.prototype.displayName=function(){var t;return this.subject?this.subject:(App.Ticket.exists(this.ticket_id)&&(t=App.Ticket.find(this.ticket_id)),t?t.title:"???")},n.prototype.iconActivity=function(t){var e;if(t)return e=App.Ticket.find(this.ticket_id),e.owner_id===t.id?"important":""},n.prototype.activityMessage=function(t){if(t)return"create"===t.type?App.i18n.translateContent("%s created Article for |%s|",t.created_by.displayName(),t.title):"update"===t.type?App.i18n.translateContent("%s updated Article for |%s|",t.created_by.displayName(),t.title):"Unknow action for ("+this.objectDisplayName()+"/"+t.type+"), extend activityMessage() of model."},n.contentAttachments=function(t){var e,n,i,s,r;if(!t)return[];if(!t.attachments)return[];for(n=[],r=t.attachments,i=0,s=r.length;i<s;i++)(e=r[i])&&(!e.preferences||e.preferences&&!0!==e.preferences["original-format"])&&n.push(e);return n},n}(App.Model)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.TicketArticleSender=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.configure("TicketArticleSender","name","updated_at"),n.extend(Spine.Model.Ajax),n.url=n.apiPath+"/ticket_article_senders",n.configure_translate=!0,n}(App.Model)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.TicketArticleType=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.configure("TicketArticleType","name","updated_at"),n.extend(Spine.Model.Ajax),n.url=n.apiPath+"/ticket_article_types",n.configure_translate=!0,n}(App.Model)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.TicketPriority=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.configure("TicketPriority","name","note","active","updated_at"),n.extend(Spine.Model.Ajax),n.url=n.apiPath+"/ticket_priorities",n.configure_attributes=[{name:"name",display:"Name",tag:"input",type:"text",limit:100,"null":!1,translate:!0},{name:"active",display:"Active",tag:"active","default":!0},{name:"updated_at",display:"Updated",tag:"datetime",readonly:1},{name:"created_at",display:"Created",tag:"datetime",readonly:1}],n.configure_translate=!0,n.configure_overview=["name"],n}(App.Model)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.TicketState=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.configure("TicketState","name","note","active"),n.extend(Spine.Model.Ajax),n.url=n.apiPath+"/ticket_states",n.configure_attributes=[{name:"name",display:"Name",tag:"input",type:"text",limit:100,"null":!1,translate:!0},{name:"active",display:"Active",tag:"active","default":!0},{name:"updated_at",display:"Updated",tag:"datetime",readonly:1},{name:"created_at",display:"Created",tag:"datetime",readonly:1}],n.configure_translate=!0,n.configure_overview=["name"],n}(App.Model)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.TicketStateType=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.configure("TicketStateType","name","note","active","updated_at"),n.extend(Spine.Model.Ajax),n.url=n.apiPath+"/ticket_state_types",n}(App.Model)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.Translation=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.configure("Translation","source","target","target_initial","locale"),n.extend(Spine.Model.Ajax),n.url=n.apiPath+"/translations",n}(App.Model)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.Trigger=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.configure("Trigger","name","condition","perform","active"),n.extend(Spine.Model.Ajax),n.url=n.apiPath+"/triggers",n.configure_attributes=[{name:"name",display:"Name",tag:"input",type:"text",limit:100,"null":!1},{name:"condition",display:"Conditions for effected objects",tag:"ticket_selector","null":!1,preview:!1,action:!0,hasChanged:!0},{name:"perform",display:"Execute changes on objects",tag:"ticket_perform_action","null":!0,notification:!0,trigger:!0},{name:"active",display:"Active",tag:"active","default":!0},{name:"updated_at",display:"Updated",tag:"datetime",readonly:1}],n.configure_delete=!0,n.configure_clone=!0,n.configure_overview=["name"],n}(App.Model)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.Twitter=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.configure("Twitter","name","channels"),n.extend(Spine.Model.Ajax),n.url=n.apiPath+"/twitter",n.configure_attributes=[{name:"name",display:"Name",tag:"input",type:"text",limit:100,"null":!1}],n.configure_delete=!0,n.configure_overview=["name"],n}(App.Model)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.User=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),
n.configure("User","login","firstname","lastname","email","web","password","phone","fax","mobile","street","zip","city","country","organization_id","department","note","role_ids","group_ids","active","invite","signup","updated_at"),n.extend(Spine.Model.Ajax),n.url=n.apiPath+"/users",n.configure_attributes=[{name:"login",display:"Login",tag:"input",type:"text",limit:100,"null":!1,autocapitalize:!1,signup:!1,quick:!1},{name:"firstname",display:"Firstname",tag:"input",type:"text",limit:100,"null":!1,signup:!0,info:!0,invite_agent:!0,invite_customer:!0},{name:"lastname",display:"Lastname",tag:"input",type:"text",limit:100,"null":!1,signup:!0,info:!0,invite_agent:!0,invite_customer:!0},{name:"email",display:"Email",tag:"input",type:"email",limit:100,"null":!1,signup:!0,info:!0,invite_agent:!0,invite_customer:!0},{name:"organization_id",display:"Organization",tag:"select",multiple:!1,nulloption:!0,"null":!0,relation:"Organization",signup:!1,info:!0,invite_customer:!0},{name:"created_by_id",display:"Created by",relation:"User",readonly:1},{name:"created_at",display:"Created at",tag:"datetime",readonly:1},{name:"updated_by_id",display:"Updated by",relation:"User",readonly:1},{name:"updated_at",display:"Updated at",tag:"datetime",readonly:1}],n.configure_overview=["login","firstname","lastname","organization"],n.prototype.uiUrl=function(){return"#user/profile/"+this.id},n.prototype.icon=function(){return"user"},n.prototype.initials=function(){return this.firstname&&this.lastname&&this.firstname[0]&&this.lastname[0]?this.firstname[0]+this.lastname[0]:this.firstname&&this.firstname[0]&&!this.lastname?this.firstname[1]?this.firstname[0]+this.firstname[1]:this.firstname[0]:!this.firstname&&this.lastname&&this.lastname[0]?this.lastname[1]?this.lastname[0]+this.lastname[1]:this.lastname[0]:this.email?this.email[0]+this.email[1]:"??"},n.prototype.avatar=function(t,e,n,i,s,r){var o,a,l,c,u,p,h,d;return null==t&&(t=40),null==e&&(e=""),null==n&&(n=""),null==i&&(i=!1),null==r&&(r=void 0),o=40,t=parseInt(t,10),n&&(n+=" "),n+="size-"+t,!1===this.active&&(n+=" avatar--inactive"),this.isOutOfOffice()&&(n+=" avatar--vacation"),e&&(e=" data-placement='"+e+"'"),s?(u=!1,a=' data-avatar-id="'+s.id+'"'):"personal"===r?(u=!1,a=' data-id="'+this.id+'"'):(n+=" user-popover",a=' data-id="'+this.id+'"'),u=this.vip,"personal"===r?u=!1:n+=" user-popover",1===this.id?App.view("avatar_system")():!this.image||"none"===this.image||i?(p=300*t/o,l=226*t/o,c=new Math.seedrandom(this.id),h=c()*(p-t),d=c()*(l-t),App.view("avatar_unique")({data:a,cssClass:n,placement:e,vip:u,x:h,y:d,initials:this.initials()})):App.view("avatar")({data:a,cssClass:n,placement:e,vip:u,url:this.imageUrl()})},n.prototype.isOutOfOffice=function(){var t,e,n;return!0===this.out_of_office&&(!!(n=this.out_of_office_start_at)&&(!!(t=this.out_of_office_end_at)&&(n=new Date(Date.parse(n)),t=new Date(Date.parse(t)),e=new Date((new Date).toDateString()),e.setDate(e.getDate()+1),n<=e&&t>=e)))},n.prototype.imageUrl=function(){if(this.image)return this.constructor.apiPath+"/users/image/"+this.image},n._fillUp=function(t){var e,n,i,s,r,o,a,l,c,u,p;if(t.accounts)for(e in t.accounts)"twitter"===e&&(t.accounts[e].link="https://twitter.com/"+t.accounts[e].username),"facebook"===e&&(t.accounts[e].link="https://www.facebook.com/profile.php?id="+t.accounts[e].uid);if(t.organization_id&&(t.organization=App.Organization.findNative(t.organization_id)),t.role_ids)for(t.roles=[],l=t.role_ids,s=0,o=l.length;s<o;s++)p=l[s],App.Role.exists(p)&&(u=App.Role.findNative(p),t.roles.push(u));if(t.group_ids)for(t.groups=[],c=t.group_ids,r=0,a=c.length;r<a;r++)i=c[r],App.Group.exists(i)&&(n=App.Group.findNative(i),t.groups.push(n));return t},n.prototype.searchResultAttributes=function(){return{display:""+this.displayName(),id:this.id,"class":"user user-popover",url:this.uiUrl(),icon:"user"}},n.prototype.activityMessage=function(t){var e;return"create"===t.type?App.i18n.translateContent("%s created User |%s|",t.created_by.displayName(),t.title):"update"===t.type?App.i18n.translateContent("%s updated User |%s|",t.created_by.displayName(),t.title):"session started"===t.type?App.i18n.translateContent("%s started a new session",t.created_by.displayName()):"switch to"===t.type?(e=t.title,t.objectNative&&(e=t.objectNative.displayName()),App.i18n.translateContent("%s switched to |%s|!",t.created_by.displayName(),e)):"ended switch to"===t.type?(e=t.title,t.objectNative&&(e=t.objectNative.displayName()),App.i18n.translateContent("%s ended switch to |%s|!",t.created_by.displayName(),e)):"Unknow action for ("+this.objectDisplayName()+"/"+t.type+"), extend activityMessage() of model."},n.prototype.permission=function(t){var e,n,i,s,r,o,a,l,c,u,p,h,d,f,g,m,v,y,b,w,k,T,S,C,A,x,j,I,D,P;if(r=t,_.isArray(t)||(r=[t]),_.contains(r,"*"))return!0;for(n=0,a=r.length;n<a;n++)if(t=r[n],(k=App.Permission.findByAttribute("name",t))&&!1===k.active)return!1;for(C={},A=this.role_ids,i=0,l=A.length;i<l;i++)if(P=A[i],D=App.Role.findNative(P),!0===D.active)for(x=D.permission_ids,s=0,c=x.length;s<c;s++){if(T=x[s],!(k=App.Permission.findNative(T)))throw"No such permission for id "+T;!0===k.active&&(C[k.name]=!0)}for(o=0,u=r.length;o<u;o++){for(g=r[o],I=g.split("+"),e=!1,m=0,p=I.length;m<p;m++){if(j=I[m],f=!1,b="",w=j.split("."),"*"===w[w.length-1])for(S in C)!0===C[S]&&(d=j.length-1,S.substr(0,d)===j.substr(0,d)&&(f=!0));if(!f)for(v=0,h=w.length;v<h;v++)y=w[v],""!==b&&(b+="."),b+=y,C[b]&&(f=!0);if(!f){e=!1;break}e=!0}if(e)return e}return!1},n.prototype.all_group_ids=function(t){var e,n,i,s,r,o,a,l,c,u;if(null==t&&(t="full"),e=[],c=App.Session.get("group_ids"))for(s in c)r=c[s],(_.include(r,t)||_.include(r,"full"))&&e.push(s);if(u=App.Session.get("role_ids"))for(n=0,i=u.length;n<i;n++)if(l=u[n],App.Role.exists(l)&&(a=App.Role.find(l),a.group_ids)){o=a.group_ids;for(s in o)r=o[s],(_.include(r,t)||_.include(r,"full"))&&e.push(s)}return _.uniq(e)},n.outOfOfficeTextPlaceholder=function(){var t,e;return e=new Date,t="Christmas holiday",e.getMonth()<3?t="Easter holiday":e.getMonth()<9&&(t="Summer holiday"),t},n.prototype.outOfOfficeText=function(){return _.isEmpty(this.preferences.out_of_office_text)?App.User.outOfOfficeTextPlaceholder():this.preferences.out_of_office_text},n.prototype.isAccessibleBy=function(t,e){var n,i;return!!t.permission("admin")||(i=e.charAt(0).toUpperCase()+e.slice(1),n="is"+i+"ableBy",this[n](t))},n.prototype.isReadableBy=function(t){return!!this.ownAccount(t)||(!!t.permission("admin.*")||(!!t.permission("ticket.agent")||!!t.permission("ticket.customer")&&("function"==typeof this.sameOrganization?this.sameOrganization(t):void 0)))},n.prototype.isChangeableBy=function(t){return!!t.permission("admin.user")||!!t.permission("ticket.agent")&&this.permission("ticket.customer")},n.prototype.isDeleteableBy=function(t){return t.permission("admin.user")},n.prototype.ownAccount=function(t){return this.id===t.id},n.prototype.sameOrganization=function(t){return null!==this.organization_id&&(null!==t.organization_id&&this.organization_id===t.organization_id)},n}(App.Model)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.Controller=function(n){function i(e){this.locationExecute=t(this.locationExecute,this),this.locationExecuteOrNavigate=t(this.locationExecuteOrNavigate,this),this.locationVerify=t(this.locationVerify,this),this.stopLoading=t(this.stopLoading,this),this.startLoading=t(this.startLoading,this),this.recentView=t(this.recentView,this),this.userTicketPopupsDestroy=t(this.userTicketPopupsDestroy,this),this.organizationPopupsDestroy=t(this.organizationPopupsDestroy,this),this.userPopupsDestroy=t(this.userPopupsDestroy,this),this.ticketPopupsDestroy=t(this.ticketPopupsDestroy,this),this.frontendTimeUpdateItem=t(this.frontendTimeUpdateItem,this),this.frontendTimeUpdateElement=t(this.frontendTimeUpdateElement,this),this.frontendTimeUpdate=t(this.frontendTimeUpdate,this),this.closeTab=t(this.closeTab,this),this.updateNavMenu=t(this.updateNavMenu,this),this.releaseController=t(this.releaseController,this),this.interval=t(this.interval,this),this.clearInterval=t(this.clearInterval,this),this.delay=t(this.delay,this),this.clearDelay=t(this.clearDelay,this),this.unbind=t(this.unbind,this),this.bind=t(this.bind,this),e&&e.el&&e.el.unbind&&e.el.unbind(),i.__super__.constructor.apply(this,arguments),this.controllerId="controller-"+(new Date).getTime()+"-"+Math.floor(999999*Math.random()),this.el.on("remove",this.releaseController),this.el.on("remove",this.release),this.Config=App.Config,this.Session=App.Session,this.apiPath=this.Config.get("api_path"),this.ajaxCalls=[],this.ajax=function(t){return function(e){var n;return n=App.Ajax.request(e),t.ajaxCalls.push(n)}}(this)}return e(i,n),i.include(App.LogInclude),i.prototype.navigate=function(t,e){var n,s;return null==e&&(e=!1),this.log("debug","navigate to '"+t+"', hide from history '"+e+"'"),e&&window.history&&(n=App.Config.get("History"),(s=n[n.length-2])&&window.history.replaceState(null,null,s)),i.__super__.navigate.call(this,t)},i.prototype.preventDefault=function(t){return t.preventDefault()},i.prototype.bind=function(t,e){return App.Event.bind(t,e,this.controllerId)},i.prototype.unbind=function(t,e){return App.Event.unbind(t,e,this.controllerId)},i.prototype.clearDelay=function(t){return App.Delay.clear(t,this.controllerId)},i.prototype.delay=function(t,e,n,i){return null==i&&(i=!1),App.Delay.set(t,e,n,this.controllerId,i)},i.prototype.clearInterval=function(t){return App.Interval.clear(t,this.controllerId)},i.prototype.interval=function(t,e,n,i){return null==i&&(i=!1),App.Interval.set(t,e,n,this.controllerId,i)},i.prototype.releaseController=function(){var t,e,n,i;if(App.Event.unbindLevel(this.controllerId),App.Delay.clearLevel(this.controllerId),App.Interval.clearLevel(this.controllerId),this.ajaxCalls)for(i=this.ajaxCalls,e=0,n=i.length;e<n;e++)t=i[e],App.Ajax.abort(t);return this.userTicketPopupsDestroy(),this.ticketPopupsDestroy(),this.userPopupsDestroy(),this.organizationPopupsDestroy()},i.prototype.release=function(){},i.prototype.title=function(t,e){var n,i;return null==e&&(e=!1),i=t,e&&(i=App.i18n.translatePlain(t)),n=this.Config.get("product_name")+" - "+i,document.title=n,App.Event.trigger("window-title-set",n)},i.prototype.copyToClipboard=function(t){return window.clipboardData?window.clipboardData.setData("Text",t):window.prompt("Copy to clipboard: Ctrl+C, Enter",t)},i.prototype.disconnectClient=function(){return App.Delay.reset(),App.Interval.reset(),App.WebSocket.close({force:!0})},i.prototype.notify=function(t){return App.Event.trigger("notify",t)},i.prototype.notifyDesktop=function(t){return App.Event.trigger("notifyDesktop",t)},i.prototype.navupdate=function(t,e){if(null==e&&(e=!1),e||"#clues"!==window.location.hash)return App.Event.trigger("navupdate",t)},i.prototype.navShow=function(){if(!$("#navigation").is(":visible"))return $("#navigation").removeClass("hide")},i.prototype.navHide=function(){if($("#navigation").is(":visible"))return $("#navigation").addClass("hide")},i.prototype.updateNavMenu=function(){var t;return t=function(){return App.Event.trigger("menu:render")},this.delay(t,150)},i.prototype.closeTab=function(t,e){if(null==t&&(t=this.taskKey),null!=t)return App.TaskManager.remove(t),null==e&&(e=App.TaskManager.nextTaskUrl()||"#"),this.navigate(e)},i.prototype.scrollTo=function(t,e,n){var i;return null==t&&(t=0),null==e&&(e=0),null==n&&(n=0),i=function(){return window.scrollTo(t,e)},this.delay(i,n)},i.prototype.scrollToIfNeeded=function(t,e){if(null==e&&(e=!0),t&&t.get(0)&&(!0!==e||!t.visible(!0)))return t.get(0).scrollIntoView(e)},i.prototype.shake=function(t){var e,n;return n=function(t,e,i){var s,r;if(r=e.shift(),t.css("left",r+"px"),e.length>0)return setTimeout(function(){return n(t,e,i)},i);try{return t.css("position","static")}catch(t){return s=t,console.log("error",s)}},e=[15,30,15,0,-15,-30,-15,0],e=e.concat(e.concat(e)),t.css("position","relative"),n(t,e,20)},i.prototype.formParam=function(t){return App.ControllerForm.params(t)},i.prototype.formDisable=function(t,e){return App.ControllerForm.disable(t,e)},i.prototype.formEnable=function(t,e){return App.ControllerForm.enable(t,e)},i.prototype.formValidate=function(t){return App.ControllerForm.validate(t)},i.prototype.queryParam=function(){var t,e,n,i,s,r;if(this.query){for(i=this.query.split(";"),s={},t=0,e=i.length;t<e;t++)n=i[t],(r=n.match("(.+?)=(.*)"))&&r[1]&&(s[r[1]]=r[2]);return s}},i.prototype.humanFileSize=function(t){return App.Utils.humanFileSize(t)},i.prototype.humanTime=function(t,e,n){return null==n&&(n=!0),App.PrettyDate.humanTime(t,e,n)},i.prototype.userInfo=function(t){var e;return e=t.el||$('[data-id="customer_info"]'),e.unbind(),new App.WidgetUser({el:e,user_id:t.user_id,callback:t.callback})},i.prototype.permissionCheckRedirect=function(t,e){var n;if(null==e&&(e=!1),this.permissionCheck(t))return!0;throw n=window.location.hash,n&&"#login"!==n&&"#logout"!==n&&"#keyboard_shortcuts"!==n&&App.Config.set("requested_url",n),e&&App.TaskManager.remove(this.taskKey),this.navigate("#login"),"No permission for "+t},i.prototype.permissionCheck=function(t){var e,n;return!!(n=App.Session.get("id"))&&(!!(e=App.User.findNative(n))&&e.permission(t))},i.prototype.authenticateCheckRedirect=function(){var t;if(this.authenticateCheck())return!0;throw t=window.location.hash,t&&"#login"!==t&&"#logout"!==t&&"#keyboard_shortcuts"!==t&&this.Config.set("requested_url",t),this.navigate("#login"),"No exsisting session"},i.prototype.authenticateCheck=function(){return!!this.Session.get()},i.prototype.frontendTime=function(t,e){return null==e&&(e={}),e.subclass||(e.subclass=""),'<span class="humanTimeFromNow '+e.subclass+'" data-time="'+t+'">?</span>'},i.prototype.frontendTimeUpdate=function(){var t;return t=function(t){return function(){return t.frontendTimeUpdateElement($("#app"))}}(this),App.Interval.set(t,61e3,"frontendTimeUpdate","ui")},i.prototype.frontendTimeUpdateElement=function(t){var e;return e=this,t.find(".humanTimeFromNow").each(function(){var t;return t=$(this),e.frontendTimeUpdateItem(t,t.text())})},i.prototype.frontendTimeUpdateItem=function(t,e){var n,i;if(i=t.data("time"),(n=this.humanTime(i,t.hasClass("escalation")))!==e)return t.attr("title",App.i18n.translateTimestamp(i)),t.html(n)},i.prototype.ticketPopups=function(t){var e;return null==t&&(t="right"),this.permissionCheck("ticket.agent")&&this.$("div.ticket-popover, span.ticket-popover").bind("click",function(t){return function(e){var n,i;if(n=$(e.target).data("id"))return i=App.Ticket.findNative(n),t.navigate(i.uiUrl())}}(this)),this.ticketPopupsDestroy(),e=this,this.ticketPopupsList=this.el.find(".ticket-popover").popover({trigger:"hover",container:"body",html:!0,animation:!1,delay:100,placement:t,title:function(){var t,e;return e=$(this).data("id"),t=App.Ticket.find(e),App.Utils.htmlEscape(t.title)},content:function(){var t,n,i;return i=$(this).data("id"),n=App.Ticket.fullLocal(i),t=$(App.view("popover/ticket")({ticket:n})),t.find(".humanTimeFromNow").each(function(){return e.frontendTimeUpdateItem($(this))}),t}})},i.prototype.ticketPopupsDestroy=function(){if(this.ticketPopupsList)return this.ticketPopupsList.popover("destroy")},i.prototype.userPopups=function(t){if(null==t&&(t="right"),this.permissionCheck("ticket.agent"))return this.$("div.user-popover, span.user-popover").bind("click",function(t){return function(e){var n,i;if(n=$(e.target).data("id"))return i=App.User.findNative(n),t.navigate(i.uiUrl())}}(this)),this.userPopupsDestroy(),this.userPopupsList=this.el.find(".user-popover").popover({trigger:"hover",container:"body",html:!0,animation:!1,delay:100,placement:"auto "+t,title:function(){var t,e,n;return n=$(this).data("id"),e=App.User.find(n),t=App.Utils.htmlEscape(e.displayName()),e.isOutOfOffice()&&(t+=" ("+App.Utils.htmlEscape(e.outOfOfficeText())+")"),t},content:function(){var t,e,n,i,s,r,o,a;a=$(this).data("id"),r=App.User.fullLocal(a),o=[],s=App.User.attributesGet("view");for(e in s)t=s[e],n=e,i=n.substr(0,n.length-3),i in r&&(n=i),r[n]&&t.shown&&"firstname"!==n&&"lastname"!==n&&"organization"!==n&&o.push(t);return App.view("popover/user")({user:r,userData:o})}})},i.prototype.userPopupsDestroy=function(){if(this.userPopupsList)return this.userPopupsList.popover("destroy")},i.prototype.organizationPopups=function(t){if(null==t&&(t="right"),this.permissionCheck("ticket.agent"))return this.$("div.organization-popover, span.organization-popover").bind("click",function(t){return function(e){var n,i;if(n=$(e.target).data("id"))return i=App.Organization.find(n),t.navigate(i.uiUrl())}}(this)),this.organizationPopupsDestroy(),this.organizationPopupsList=this.el.find(".organization-popover").popover({trigger:"hover",container:"body",html:!0,animation:!1,delay:100,placement:"auto "+t,title:function(){var t,e;return e=$(this).data("id"),t=App.Organization.find(e),App.Utils.htmlEscape(t.name)},content:function(){var t,e,n,i,s,r,o,a;o=$(this).data("id"),s=App.Organization.fullLocal(o),r=[],a=App.Organization.attributesGet("view");for(e in a)t=a[e],n=e,i=n.substr(0,n.length-3),i in s&&(n=i),s[n]&&t.shown&&"name"!==n&&r.push(t);return App.view("popover/organization")({organization:s,organizationData:r})}})},i.prototype.organizationPopupsDestroy=function(){if(this.organizationPopupsList)return this.organizationPopupsList.popover("destroy")},i.prototype.userTicketPopups=function(t){var e;return e=function(t){return function(e,n){var i;return e.position||(e.position="left"),t.userTicketPopupsDestroy(),i=t,t.userTicketPopupsList=t.el.find(e.selector).popover({trigger:"hover",container:"body",html:!0,animation:!1,delay:100,placement:"auto "+e.position,title:function(){return $(this).find('[title="*"]').val()},content:function(){var t,e,s,r,o,a,l;if(l=$(this).filter("[data-type]").data("type"),a=[],n[l])for(r=n[l],e=0,s=r.length;e<s;e++)o=r[e],a.push(App.Ticket.fullLocal(o));return t=$(App.view("popover/user_ticket_list")({tickets:a})),t.find(".humanTimeFromNow").each(function(){return i.frontendTimeUpdateItem($(this))}),t}})}}(this),function(t){return function(n){return t.ajax({type:"GET",url:t.Config.get("api_path")+"/ticket_customer",data:{customer_id:n.user_id},processData:!0,success:function(t){return App.Collection.loadAssets(t.assets),e(n,{open:t.ticket_ids_open,closed:t.ticket_ids_closed})}})}}(this)(t)},i.prototype.userTicketPopupsDestroy=function(){if(this.userTicketPopupsList)return this.userTicketPopupsList.popover("destroy")},i.prototype.anyPopoversDestroy=function(){return $(".popover:not(.popover--notifications)").remove()},i.prototype.recentView=function(t,e){var n;return n={object:t,o_id:e},App.Ajax.request({id:"recent_view_"+t+"_"+e,type:"POST",url:this.Config.get("api_path")+"/recent_view",data:JSON.stringify(n),processData:!0})},i.prototype.prepareForObjectList=function(t){var e,n,i;for(e=0,i=t.length;e<i;e++)n=t[e],n=this.prepareForObjectListItem(n);return t},i.prototype.prepareForObjectListItem=function(t){var e;return t.link="",t.title="???",t.object=t.object.replace("::",""),App[t.object]&&App[t.object].exists(t.o_id)&&(e=App[t.object].findNative(t.o_id),t.objectNative=e,t.link=e.uiUrl(),t.title=e.displayName(),t.object_name=e.objectDisplayName(),t.cssIcon=e.iconActivity(this.Session.get())),t.created_by=App.User.findNative(t.created_by_id),t},i.prototype.stopPropagation=function(t){return t.stopPropagation()},i.prototype.preventDefaultAndstopPropagation=function(t){return t.preventDefault(),t.stopPropagation()},i.prototype.startLoading=function(t){var e;if(!this.initLoadingDone||t)return this.initLoadingDone=!0,this.stopLoading(),e=function(e){return function(){return t?t.html(App.view("generic/page_loading")()):e.html(App.view("generic/page_loading")())}}(this),this.initLoadingDoneDelay=this.delay(e,1800)},i.prototype.stopLoading=function(){if(this.initLoadingDoneDelay)return this.clearDelay(this.initLoadingDoneDelay)},i.prototype.renderScreenSuccess=function(t){return this.taskKey&&App.TaskManager.touch(this.taskKey),(t.el||this).html(App.view("generic/error/success")(t))},i.prototype.renderScreenError=function(t){return this.taskKey&&App.TaskManager.touch(this.taskKey),(t.el||this).html(App.view("generic/error/generic")(t))},i.prototype.renderScreenNotFound=function(t){return this.taskKey&&App.TaskManager.touch(this.taskKey),(t.el||this).html(App.view("generic/error/not_found")(t))},i.prototype.renderScreenUnauthorized=function(t){return this.taskKey&&App.TaskManager.touch(this.taskKey),(t.el||this).html(App.view("generic/error/unauthorized")(t))},i.prototype.locationVerify=function(t){var e;if(e=$(t.currentTarget).attr("href"),this.log("debug","new location '"+e+"'"),e)return this.locationExecuteOrNavigate(e)},i.prototype.locationExecuteOrNavigate=function(t){var e;return e=Spine.Route.getPath(),this.log("debug","current location '"+e+"'"),t.replace(/#/,"")!==e?(this.log("debug","navigate to location '"+t+"'"),void this.navigate(t)):this.locationExecute(t)},i.prototype.locationExecute=function(t){return t=t.replace(/#/,""),this.log("debug","execute controller again for '"+t+"' because of same hash"),Spine.Route.matchRoutes(t)},i.prototype.logoUrl=function(){return this.Config.get("image_path")+"/"+this.Config.get("product_logo")},i.prototype.selectAll=function(t){return t.currentTarget.focus(),t.currentTarget.select()},i.prototype.windowReload=function(t,e){if(t&&t.preventDefault(),$("#app").hide().attr("style","display: none!important"),e)return window.location=e,!0;if(window.location.reload)return window.location.reload(),!0;if(window.location.href)return window.location.href=window.location.href,!0;throw"Cant reload page!"},i}(Spine.Controller),App.ControllerPermanent=function(t){function n(){this.requiredPermission&&this.permissionCheckRedirect(this.requiredPermission,!0),n.__super__.constructor.apply(this,arguments),this.navShow()}return e(n,t),n}(App.Controller),App.ControllerSubContent=function(n){function i(){this.show=t(this.show,this),this.requiredPermission&&this.permissionCheckRedirect(this.requiredPermission),i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.show=function(){if(this.header)return this.title(this.header,!0)},i}(App.Controller),App.ControllerContent=function(t){function n(){this.requiredPermission&&this.permissionCheckRedirect(this.requiredPermission),n.__super__.constructor.apply(this,arguments),App.TaskManager.hideAll(),$("#content").removeClass("hide").removeClass("active"),this.navShow()}return e(n,t),n}(App.Controller),App.ControllerModal=function(n){function i(){this.submit=t(this.submit,this),this.cancel=t(this.cancel,this),this.localOnCancel=t(this.localOnCancel,this),this.localOnClosed=t(this.localOnClosed,this),this.localOnClose=t(this.localOnClose,this),this.onShown=t(this.onShown,this),this.localOnShown=t(this.localOnShown,this),this.localOnShow=t(this.localOnShow,this),this.formParams=t(this.formParams,this),this.close=t(this.close,this),this.render=t(this.render,this),this.element=t(this.element,this),this.update=t(this.update,this),this.showDelayed=t(this.showDelayed,this),i.__super__.constructor.apply(this,arguments),this.showTryCount=0,this.authenticateRequired&&!this.authenticateCheckRedirect()||(this.bind("ui:rerender",function(t){return function(){return t.update(),"modal"}}(this)),this.shown&&this.render())}return e(i,n),i.prototype.authenticateRequired=!1,i.prototype.backdrop=!0,i.prototype.keyboard=!0,i.prototype.large=!1,i.prototype.small=!1,i.prototype.head="?",i.prototype.autoFocusOnFirstInput=!0,i.prototype.container=null,i.prototype.buttonClass="btn--success",i.prototype.centerButtons=[],i.prototype.leftButtons=[],i.prototype.buttonClose=!0,i.prototype.buttonCancel=!1,i.prototype.buttonCancelClass="btn--text btn--subtle",i.prototype.buttonSubmit=!0,i.prototype.headPrefix="",i.prototype.shown=!0,i.prototype.closeOnAnyClick=!1,i.prototype.initalFormParams={},i.prototype.initalFormParamsIgnore=!1,i.prototype.showTrySupport=!1,i.prototype.showTryMax=10,i.prototype.showTrydelay=1e3,i.prototype.events={"submit form":"submit","click .js-submit:not(.is-disabled)":"submit","click .js-cancel":"cancel","click .js-close":"cancel"},i.prototype.className="modal fade",i.prototype.showDelayed=function(){var t;return t=function(t){return function(){return t.showTryCount+=1,t.render()}}(this),this.delay(t,this.showTrydelay)},i.prototype.modalAlreadyExists=function(){return $(".modal").length>0},i.prototype.content=function(){return"You need to implement a one @content()!"},i.prototype.update=function(){var t,e;return t=this.message?App.i18n.translateContent(this.message):this.contentInline?this.contentInline:this.content(),e=$(App.view("modal")({head:this.head,headPrefix:this.headPrefix,message:this.message,detail:this.detail,buttonClose:this.buttonClose,buttonCancel:this.buttonCancel,buttonCancelClass:this.buttonCancelClass,buttonSubmit:this.buttonSubmit,buttonClass:this.buttonClass,centerButtons:this.centerButtons,leftButtons:this.leftButtons})),e.find(".modal-body").html(t),this.initRenderingDone?this.$(".modal-dialog").replaceWith(e):(this.initRenderingDone=!0,this.html(e)),this.post()},i.prototype.post=function(){},i.prototype.element=function(){return this.el},i.prototype.render=function(){return!0===this.showTrySupport&&this.modalAlreadyExists()&&this.showTryCount<=this.showTryMax?void this.showDelayed():(this.initalFormParamsIgnore=!1,!0===this.buttonSubmit&&(this.buttonSubmit="Submit"),!0===this.buttonCancel&&(this.buttonCancel="Cancel & Go Back"),this.update(),this.container&&this.el.addClass("modal--local"),this.veryLarge&&this.el.addClass("modal--veryLarge"),this.large&&this.el.addClass("modal--large"),this.small&&this.el.addClass("modal--small"),this.el.modal({keyboard:this.keyboard,show:!0,backdrop:this.backdrop,container:this.container}).on({"show.bs.modal":this.localOnShow,"shown.bs.modal":this.localOnShown,"hide.bs.modal":this.localOnClose,"hidden.bs.modal":this.localOnClosed,"dismiss.bs.modal":this.localOnCancel}),this.closeOnAnyClick?this.el.on("click",function(t){return function(){return t.close()}}(this)):void 0)},i.prototype.close=function(t){return t&&t.preventDefault(),this.initalFormParamsIgnore=!0,this.el.modal("hide")},i.prototype.formParams=function(){return this.container?this.formParam(this.container.find(".modal form")):this.formParam(this.$(".modal form"))},i.prototype.localOnShow=function(t){return this.onShow(t)},i.prototype.onShow=function(){},i.prototype.localOnShown=function(t){return this.onShown(t)},i.prototype.onShown=function(){return this.autoFocusOnFirstInput&&this.$('input:not([disabled]):not([type="hidden"]):not(".btn"), textarea').first().focus(),this.initalFormParams=this.formParams()},i.prototype.localOnClose=function(t){var e;return e=difference(this.initalFormParams,this.formParams()),!1!==this.initalFormParamsIgnore||_.isEmpty(e)||confirm(App.i18n.translateContent("The form content has been changed. Do you want to close it and lose your changes?"))?this.onClose(t):void t.preventDefault()},i.prototype.onClose=function(){},i.prototype.localOnClosed=function(t){return this.onClosed(t),this.el.modal("remove")},i.prototype.onClosed=function(){},i.prototype.localOnCancel=function(t){return this.onCancel(t)},i.prototype.onCancel=function(){},i.prototype.cancel=function(t){return this.close(t),this.onCancel(t)},i.prototype.onSubmit=function(){},i.prototype.submit=function(t){return t.stopPropagation(),t.preventDefault(),this.onSubmit(t)},i}(App.Controller),App.SessionMessage=function(n){function i(){return this.onSubmit=t(this.onSubmit,this),this.onClose=t(this.onClose,this),this.onCancel=t(this.onCancel,this),i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.showTrySupport=!0,i.prototype.onCancel=function(t){if(this.forceReload)return this.windowReload(t)},i.prototype.onClose=function(t){if(this.forceReload)return this.windowReload(t)},i.prototype.onSubmit=function(t){return this.forceReload?this.windowReload(t):this.close()},i}(App.ControllerModal),App.UpdateHeader=function(n){function i(){this.render=t(this.render,this),this.release=t(this.release,this),i.__super__.constructor.apply(this,arguments),this.subscribeId=this.genericObject.subscribe(this.render)}return e(i,n),i.prototype.release=function(){return App[this.genericObject.constructor.className].unsubscribe(this.subscribeId)},i.prototype.render=function(t){return this.el.find(".page-header h1").html(t.displayName())},i}(App.Controller),App.UpdateTastbar=function(n){function i(){this.update=t(this.update,this),this.release=t(this.release,this),i.__super__.constructor.apply(this,arguments),this.subscribeId=this.genericObject.subscribe(this.update)}return e(i,n),i.prototype.release=function(){return App[this.genericObject.constructor.className].unsubscribe(this.subscribeId)},i.prototype.update=function(){return App.TaskManager.touch(this.taskKey)},i}(App.Controller),App.ControllerWidgetPermanent=function(t){function n(t){t.el&&(t.el.append('<div id="'+t.key+'"></div>'),t.el="#"+t.key),n.__super__.constructor.call(this,t)}return e(n,t),n}(App.Controller),App.ControllerWidgetOnDemand=function(n){function i(e){this.html=t(this.html,this),this.element=t(this.element,this),e.el=$("#"+e.key),i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.element=function(){return $("#"+this.key)},i.prototype.html=function(t){return $("#"+this.key).get(0)||$("#app").before('<div id="'+this.key+'" class="'+this.className+'"></div>'),$("#"+this.key).html(t)},i}(App.Controller)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.ControllerForm=function(n){function i(e){this.formGen=t(this.formGen,this),this.html=t(this.html,this),this.hideAlert=t(this.hideAlert,this),this.showAlert=t(this.showAlert,this);var n,s,r;i.__super__.constructor.apply(this,arguments);for(n in e)r=e[n],this[n]=r;if(this.handlers||(this.handlers=[]),this.handlersConfig){s=this.handlersConfig;for(n in s)(r=s[n])&&r.run&&this.handlers.push(r.run)}this.handlers.push(this.showHideToggle),this.handlers.push(this.requiredMandantoryToggle),this.model||(this.model={}),this.attributes||(this.attributes=[]),this.form||(this.form=this.formGen()),this.form.prepend('<div class="alert alert--danger js-alert hide" role="alert"></div>'),this.el&&this.el.prepend(this.form),this.elReplace&&this.elReplace.html(this.form),"object"==typeof this.form&&(this.form.find("input").trigger("change"),this.form.find("textarea").trigger("change"),this.form.find("select").trigger("change")),this.form.on("input",this.hideAlert),this.finishForm=!0,this.form}return e(i,n),i.prototype.showAlert=function(t){return this.form.find(".alert").first().removeClass("hide").html(App.i18n.translateInline(t))},i.prototype.hideAlert=function(){return this.form.find(".alert").addClass("hide").html()},i.prototype.html=function(){return this.form.html()},i.prototype.formGen=function(){var t,e,n,i,s,r,o,a,l,c,u,p,h,d;if(App.Log.debug("ControllerForm","formGen",this.model.configure_attributes),a=this.noFieldset?this.el:$("<fieldset></fieldset>"),_.isEmpty(this.model))return a;this.attributes=[],i=this.model.attributesGet?this.model.attributesGet(this.screen):App.Model.attributesGet(this.screen,this.model.configure_attributes);for(e in i)t=i[e],t.readonly||(this.filter&&!t.filter&&this.filter[e]&&(t.filter=this.filter[e]),this.attributes.push(t));for(n=0,r=this.model.className+"_"+Math.floor(999999*Math.random()).toString(),h=this.attributes,c=0,p=h.length;c<p;c++)t=h[c],n+=1,!0===this.isDisabled&&(t.disabled=!0),u=this.formGenItem(t,r,a,n),u.appendTo(a),"password"===t.type&&(this.params&&t.name in this.params&&(t.value=this.params[t.name]),t.single||(t.display=t.display+" (confirm)",t.name=t.name+"_confirm",u=this.formGenItem(t,r,a,n),u.appendTo(a)));if(this.fullForm&&(this.formClass||(this.formClass=""),a=$('<form class="'+this.formClass+'" autocomplete="off"><button class="btn">'+App.i18n.translateContent("Submit")+"</button></form>").prepend(a)),this.events){d=this.events,l=function(t,e){var n;return n=t.split(" "),a.find(n[1]).bind(n[0],function(t){return e(t)})};for(o in d)s=d[o],l(o,s)}return a.find(".js-helpMessage").tooltip(),a},i.prototype.formGenItem=function(t,e,n,i){var s,r,o,a,l,c,u,p,h,d,f,g,m,v;if(r=clone(t,!0),r.id=e+"_"+r.name,r.label_class=this.model.labelClass,
this.autofocus&&1===i&&(r.autofocus="autofocus"),!0===r.required&&(r["null"]=!1),r["null"]?r.required="":r.required="required",void 0===r.autocapitalize||r.autocapitalize?r.autocapitalize="":r.autocapitalize='autocapitalize="off"',void 0===r.autocomplete?"hidden"===r.type?r.autocomplete="":r.autocomplete='autocomplete="off"':r.autocomplete='autocomplete="'+r.autocomplete+'"',void 0===r.value&&"default"in r&&(r.value=r["default"]),this.params&&(f=r.name.split("::"),f[0]&&f[1]&&this.params[f[0]]&&f[1]in this.params[f[0]]&&(r.value=this.params[f[0]][f[1]]),r.name in this.params&&(r.value=this.params[r.name])),"newValue"in r&&(r.value=r.newValue),App.Log.debug("ControllerForm","formGenItem-before",r),!App.UiElement[r.tag])throw"Invalid UiElement."+r.tag;if(u=App.UiElement[r.tag].render(r,this.params,this),r.only_shown_if_selectable&&(a=Object.keys(r.options).length,!r["null"]&&r.nulloption&&2===a||!r.nulloption&&1===a)){for(r.transparent=!0,o=clone(r),o.type="hidden",o.value="",g=r.options,c=0,h=g.length;c<h;c++)u=g[c],u.value&&""!==u.value&&(o.value=u.value);u=$(App.view("generic/input")({attribute:o}))}if(this.handlers&&u.bind("change",function(t){return function(i){var s,o,a,l,c,u;for(l=App.ControllerForm.params($(i.target)),c=t.handlers,u=[],o=0,a=c.length;o<a;o++)s=c[o],u.push(s(l,r,t.attributes,e,n,t));return u}}(this)),this.dependency)for(m=this.dependency,p=0,d=m.length;p<d;p++)s=m[p],s.bind&&s.bind.name===r.name&&(v=this,function(t){u.bind("change",function(){var e,n;if(n=$(this).val(),n||(n=$(this).find("select, input").val()),t.bind.relation&&(e=App[t.bind.relation].find(n),n=e.name),_.contains(t.bind.value,n))return"hide"===t.change.action?v.hide(t.change.name):v.show(t.change.name)})}(s));return!r.display||r.transparent?u:(l=$(App.view("generic/attribute")({attribute:r,item:"",bookmarkable:this.bookmarkable})),l.find(".controls").prepend(u),r.hide&&this.hide(r.name,l),l)},i.prototype.show=function(t,e){var n,i,s;for(null==e&&(e=this.form),_.isArray(t)||(t=[t]),n=0,s=t.length;n<s;n++)i=t[n],e.find('[name="'+i+'"]').closest(".form-group").removeClass("hide"),e.find('[name="'+i+'"]').removeClass("is-hidden"),e.find('[data-name="'+i+'"]').closest(".form-group").removeClass("hide"),e.find('[data-name="'+i+'"]').removeClass("is-hidden");if(e)return e.find(".has-error").removeClass("has-error"),e.find(".help-inline").html("")},i.prototype.hide=function(t,e){var n,i,s,r;for(null==e&&(e=this.form),_.isArray(t)||(t=[t]),r=[],n=0,s=t.length;n<s;n++)i=t[n],e.find('[name="'+i+'"]').closest(".form-group").addClass("hide"),e.find('[name="'+i+'"]').addClass("is-hidden"),e.find('[data-name="'+i+'"]').closest(".form-group").addClass("hide"),r.push(e.find('[data-name="'+i+'"]').addClass("is-hidden"));return r},i.prototype.mandantory=function(t,e){var n,i,s,r;for(null==e&&(e=this.form),_.isArray(t)||(t=[t]),r=[],n=0,s=t.length;n<s;n++)i=t[n],e.find('[name="'+i+'"]').attr("required",!0),r.push(e.find('[name="'+i+'"]').parents(".form-group").find("label span").html("*"));return r},i.prototype.optional=function(t,e){var n,i,s,r;for(null==e&&(e=this.form),_.isArray(t)||(t=[t]),r=[],n=0,s=t.length;n<s;n++)i=t[n],e.find('[name="'+i+'"]').attr("required",!1),r.push(e.find('[name="'+i+'"]').parents(".form-group").find("label span").html(""));return r},i.prototype.showHideToggle=function(t,e,n,i,s,r){var o,a,l,c,u,p,h,d,f,g,m;for(m=[],l=0,p=n.length;l<p;l++)if(o=n[l],o.shown_if){a=!1,d=o.shown_if;for(f in d)if(g=d[f],t[f])if(_.isArray(g))for(u=0,h=g.length;u<h;u++)c=g[u],t[f].toString()===c.toString()&&(a=!0);else t[f].toString()===g.toString()&&(a=!0);a?m.push(r.show(o.name)):m.push(r.hide(o.name))}else m.push(void 0);return m},i.prototype.requiredMandantoryToggle=function(t,e,n,i,s,r){var o,a,l,c,u,p,h,d,f,g,m;for(m=[],l=0,p=n.length;l<p;l++)if(o=n[l],o.required_if){a=!1,d=o.required_if;for(f in d)if(g=d[f],t[f])if(_.isArray(g))for(u=0,h=g.length;u<h;u++)c=g[u],t[f].toString()===c.toString()&&(a=!0);else t[f].toString()===g.toString()&&(a=!0);a?m.push(r.mandantory(o.name)):m.push(r.optional(o.name))}else m.push(void 0);return m},i.prototype.validate=function(t){return App.Model.validate({model:this.model,params:t,screen:this.screen})},i.params=function(t){var e,n,i,s,r,o,a,l,c,u,p,h,d,f,g,m,v,y,b,w,k,T,S,C;for(v={},d=this.findForm(t),w=d.find("[contenteditable]"),o=0,p=w.length;o<p;o++)i=w[o],(f=$(i).data("name"))&&(v[f]=$(i).ceg());for(e=d.serializeArrayWithType(),c=0,h=e.length;c<h;c++)l=e[c],d.find('[name="'+l.name+'"]').hasClass("is-hidden")||d.find('div[data-name="'+l.name+'"]').hasClass("is-hidden")?delete v[l.name]:(C=l.value,l.value&&(C=l.value.trim()),"boolean"===l.type&&(""===C?C=void 0:void 0===C?C=!1:"true"===C?C=!0:"false"===C&&(C=!1)),"integer"===l.type&&(C=""===C?void 0:parseInt(C)),void 0!==v[l.name]?"string"==typeof v[l.name]||"boolean"==typeof v[l.name]||"number"==typeof v[l.name]?v[l.name]=[v[l.name],C]:v[l.name].push(C):v[l.name]=C);S={},d.find("input[type=checkbox]").each(function(){var t,e;return e=$(this).data("field-type"),t=$(this).prop("checked"),f=$(this).attr("name"),!f||t||f in v||(S[f]=f in S?[]:"boolean"!==e&&void 0),!0}),d.find("input[type=radio]").each(function(){var t,e;return e=$(this).data("field-type"),t=$(this).prop("checked"),f=$(this).attr("name"),!f||t||f in v||(S[f]="boolean"!==e&&void 0),!0});for(u in S)C=S[u],u in v||(v[u]=C);for(u in v)if("{date}"===u.substr(0,6)){if(g=u.substr(6,u.length),d.find('[data-name="'+g+'"]').hasClass("is-hidden"))v[g]=null;else if(v[u])try{if(T=new Date(Date.parse(v[u]+"T00:00:00Z")),r=function(t){return parseInt(t)<10&&(t="0"+t),t},"Invalid Date"===T)throw"Invalid Date "+v[u];v[g]=T.getUTCFullYear()+"-"+r(T.getUTCMonth()+1)+"-"+r(T.getUTCDate())}catch(t){s=t,v[g]="invalid "+v[u],console.log("ERR",s)}else v[g]=null;delete v[u]}else if("{datetime}"===u.substr(0,10)){if(g=u.substr(10,u.length),d.find('[data-name="'+g+'"]').hasClass("is-hidden"))v[g]=null;else if(v[u])try{if("Invalid Datetime"===(T=new Date(Date.parse(v[u]))))throw"Invalid Datetime "+v[u];v[g]=T.toISOString().replace(/:\d\d\.\d\d\dZ$/,":00.000Z")}catch(t){s=t,v[g]="invalid "+v[u],console.log("ERR",s)}else v[g]=null;delete v[u]}a={};for(u in v)y=u.split("::"),y[0]&&void 0!==y[1]&&(void 0===y[1]||a[y[0]]||(a[y[0]]={}),void 0===y[2]||a[y[0]][y[1]]||(a[y[0]][y[1]]={}),void 0===y[3]||a[y[0]][y[1]][y[2]]||(a[y[0]][y[1]][y[2]]={}),void 0!==y[3]?(a[y[0]][y[1]][y[2]][y[3]]=v[u],delete v[u]):void 0!==y[2]?(a[y[0]][y[1]][y[2]]=v[u],delete v[u]):void 0!==y[1]&&(a[y[0]][y[1]]=v[u],delete v[u]));for(u in a)v[u]=a[u];for(u in v)if("{business_hours}"===u.substr(0,16)){if(g=u.substr(16,u.length),d.find('[data-name="'+g+'"]').hasClass("is-hidden"))v[g]=null;else if(v[u]){m={},k=v[u];for(n in k)if(C=k[n],m[n]={},m[n].active=!1,"true"===C.active&&(m[n].active=!0),m[n].timeframes=[],_.isArray(C.start))for(b in C.start)m[n].timeframes.push([C.start[b],C.end[b]]);else m[n].timeframes.push([C.start,C.end]);v[g]=m}else v[g]=void 0;delete v[u]}return v},i.formId=function(){var t;return t=(new Date).getTime()+Math.floor(99999*Math.random()),t.toString().substr(t.toString().length-9,9)},i.findForm=function(t){return t&&t.target&&(t=t.target),t instanceof jQuery||(t=$(t)),!0===t.is("form")?t:!0===t.find("form").is("form")?t.find("form"):!0===$(t).closest("form").is("form")?t.closest("form"):this.finishForm?(App.Log.error("ControllerForm","no form found!",t),t):t},i.disable=function(t,e){var n;return null==e&&(e="form"),n=this.findForm(t),n&&"form"===e?n.is("button, input, select, textarea, div, span")?(console.log(2),App.Log.debug("ControllerForm","disable item...",n),n.prop("readonly",!0),void n.prop("disabled",!0)):(App.Log.debug("ControllerForm","disable form...",n),n.find("button, input, select, textarea").prop("readonly",!0),n.find("button").prop("disabled",!0)):(App.Log.debug("ControllerForm","disable item...",t),t.prop("readonly",!0),t.prop("disabled",!0))},i.enable=function(t,e){var n;return null==e&&(e="form"),n=this.findForm(t),n&&"form"===e?n.is("button, input, select, textarea, div, span")?(App.Log.debug("ControllerForm","disable item...",n),n.prop("readonly",!1),void n.prop("disabled",!1)):(App.Log.debug("ControllerForm","enable form...",n),n.find("button, input, select, textarea").prop("readonly",!1),n.find("button").prop("disabled",!1)):(App.Log.debug("ControllerForm","enable item...",t),t.prop("readonly",!1),t.prop("disabled",!1))},i.validate=function(t){var e,n,i,s,r,o;s=this.findForm(t.form),s.find(".has-error").removeClass("has-error"),s.find(".help-inline").html(""),o=t.errors;for(i in o)r=o[i],e=s.find('[name="'+i+'"]').closest(".form-group"),e.addClass("has-error"),e.find(".help-inline").html(r),n=s.find('[data-name="'+i+'"]').closest(".form-group"),n.addClass("has-error"),n.find(".help-inline").html(r),e=s.find('[name="'+i+'"]').closest(".form-control"),e.trigger("validate"),n=s.find('[data-name="'+i+'"]').closest(".form-control"),n.trigger("validate");return App.Delay.set(function(){return s.find(".has-error").find("input, textarea, select").first().focus()},200,"validate")},i}(App.Controller)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.ControllerGenericNew=function(n){function i(){return this.content=t(this.content,this),i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.buttonClose=!0,i.prototype.buttonCancel=!0,i.prototype.buttonSubmit=!0,i.prototype.headPrefix="New",i.prototype.showTrySupport=!0,i.prototype.content=function(){return this.head=this.pageData.head||this.pageData.object,this.controller=new App.ControllerForm({model:App[this.genericObject],params:this.item,screen:this.screen||"edit",autofocus:!0}),this.controller.form},i.prototype.onSubmit=function(t){var e,n,i,s;return i=this.formParam(t.target),n=new App[this.genericObject],n.load(i),(e=n.validate())?(this.log("error",e),this.formValidate({form:t.target,errors:e}),!1):(this.formDisable(t),s=this,n.save({done:function(){var t;return s.callback&&(t=App[s.genericObject].fullLocal(this.id),s.callback(t)),s.close()},fail:function(e,n){return s.log("errors",n),s.formEnable(t),s.controller.showAlert(n.error_human||n.error||"Unable to create object!")}}))},i}(App.ControllerModal),App.ControllerGenericEdit=function(n){function i(){return this.content=t(this.content,this),i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.buttonClose=!0,i.prototype.buttonCancel=!0,i.prototype.buttonSubmit=!0,i.prototype.headPrefix="Edit",i.prototype.content=function(){return this.item=App[this.genericObject].find(this.id),this.head=this.pageData.head||this.pageData.object,this.controller=new App.ControllerForm({model:App[this.genericObject],params:this.item,screen:this.screen||"edit",autofocus:!0}),this.controller.form},i.prototype.onSubmit=function(t){var e,n,i;return n=this.formParam(t.target),this.item.load(n),(e=this.item.validate())?(this.log("error",e),this.formValidate({form:t.target,errors:e}),!1):(this.formDisable(t),i=this,this.item.save({done:function(){var t;return i.callback&&(t=App[i.genericObject].fullLocal(this.id),i.callback(t)),i.close()},fail:function(e,n){return App[i.genericObject].fetch({id:this.id}),i.log("errors"),i.formEnable(t),i.controller.showAlert(n.error_human||n.error||"Unable to update object!")}}))},i}(App.ControllerModal),App.ControllerGenericIndex=function(n){function i(){this.description=t(this.description,this),this.edit=t(this.edit,this),this.render=t(this.render,this),this.release=t(this.release,this),i.__super__.constructor.apply(this,arguments),this.pageData.title&&this.title(this.pageData.title,!0),this.pageData.navupdate&&this.navupdate(this.pageData.navupdate),this.disableRender||(this.subscribeId=App[this.genericObject].subscribe(this.render)),App[this.genericObject].bind("ajaxError",function(t){return function(e,n){if(t.log("error","ajax",n.status),401===n.status)return t.log("error","ajax",e,n,n.status),t.navigate("login")}}(this)),this.render(),this.disableInitFetch||App[this.genericObject].fetchFull(function(){},{clear:!0})}return e(i,n),i.prototype.events={"click [data-type=edit]":"edit","click [data-type=new]":"new","click [data-type=import]":"import","click .js-description":"description"},i.prototype.release=function(){if(this.subscribeId)return App[this.genericObject].unsubscribe(this.subscribeId)},i.prototype.render=function(){var t,e,n,i;return e=App[this.genericObject].search({sortBy:this.defaultSortBy||"name",order:this.defaultOrder}),this.ignoreObjectIDs&&(e=_.filter(e,function(t){if(1!==t.id)return t})),!this.table&&(i=!1,App[this.genericObject].description&&!_.isEmpty(e)&&(i=!0),this.html(App.view("generic/admin/index")({head:this.pageData.objects,notes:this.pageData.notes,buttons:this.pageData.buttons,menus:this.pageData.menus,showDescription:i})),_.isEmpty(e)&&App[this.genericObject].description)?(t=marked(App[this.genericObject].description),void this.$(".table-overview").html(t)):(n=_.extend({tableId:this.genericObject+"-generic-overview",el:this.$(".table-overview"),model:App[this.genericObject],objects:e,bindRow:{events:{click:this.edit}},container:this.container,explanation:this.pageData.explanation,groupBy:this.groupBy,dndCallback:this.dndCallback},this.pageData.tableExtend),this.table?this.table.update({objects:e}):this.table=new App.ControllerTable(n))},i.prototype.edit=function(t,e){var n;return e.preventDefault(),n=App[this.genericObject].find(t),this.editCallback?void this.editCallback(n):new App.ControllerGenericEdit({id:n.id,pageData:this.pageData,genericObject:this.genericObject,container:this.container,large:this.large})},i.prototype["new"]=function(t){return t.preventDefault(),new App.ControllerGenericNew({pageData:this.pageData,genericObject:this.genericObject,container:this.container,large:this.large})},i.prototype["import"]=function(t){return t.preventDefault(),this.importCallback()},i.prototype.description=function(){return new App.ControllerGenericDescription({description:App[this.genericObject].description,container:this.container})},i}(App.Controller),App.ControllerGenericDescription=function(n){function i(){return this.onSubmit=t(this.onSubmit,this),this.content=t(this.content,this),i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.buttonClose=!0,i.prototype.buttonCancel=!1,i.prototype.buttonSubmit="Close",i.prototype.head="Description",i.prototype.content=function(){return marked(this.description)},i.prototype.onSubmit=function(){return this.close()},i}(App.ControllerModal),App.ControllerModalLoading=function(n){function i(){this.hide=t(this.hide,this),this.showIcon=t(this.showIcon,this),this.hideIcon=t(this.hideIcon,this),this.update=t(this.update,this),i.__super__.constructor.apply(this,arguments),this.container&&this.el.addClass("modal--local"),this.render(),this.el.modal({keyboard:!1,show:!0,backdrop:"static",container:this.container})}return e(i,n),i.prototype.className="modal fade",i.prototype.showTrySupport=!0,i.prototype.render=function(){return this.html(App.view("generic/modal_loader")({head:this.head,message:App.i18n.translateContent(this.message)}))},i.prototype.update=function(t,e){return null==e&&(e=!0),e&&(t=App.i18n.translateContent(t)),this.$(".js-loading").html(t)},i.prototype.hideIcon=function(){return this.$(".js-loadingIcon").addClass("hide")},i.prototype.showIcon=function(){return this.$(".js-loadingIcon").removeClass("hide")},i.prototype.hide=function(t){var e;return e=function(t){return function(){return t.el.remove()}}(this),t?App.Delay.set(e,1e3*t):void e()},i}(App.Controller),App.ControllerGenericDestroyConfirm=function(n){function i(){return this.onSubmit=t(this.onSubmit,this),i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.buttonClose=!0,i.prototype.buttonCancel=!0,i.prototype.buttonSubmit="delete",i.prototype.buttonClass="btn--danger",i.prototype.head="Confirm",i.prototype.small=!0,i.prototype.content=function(){return App.i18n.translateContent("Sure to delete this object?")},i.prototype.onSubmit=function(){return this.item.destroy({done:function(t){return function(){if(t.close(),t.callback)return t.callback()}}(this),fail:function(t){return function(){return t.log("errors"),t.close()}}(this)})},i}(App.ControllerModal),App.ControllerConfirm=function(n){function i(){return this.onSubmit=t(this.onSubmit,this),i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.buttonClose=!0,i.prototype.buttonCancel=!0,i.prototype.buttonSubmit="yes",i.prototype.buttonClass="btn--danger",i.prototype.head="Confirm",i.prototype.small=!0,i.prototype.content=function(){return App.i18n.translateContent(this.message)},i.prototype.onSubmit=function(){if(this.close(),this.callback)return this.callback()},i}(App.ControllerModal),App.ControllerErrorModal=function(n){function i(){return this.onSubmit=t(this.onSubmit,this),i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.buttonClose=!0,i.prototype.buttonCancel=!1,i.prototype.buttonSubmit="Close",i.prototype.head="Error",i.prototype.showTrySupport=!0,i.prototype.content=function(){return this.message},i.prototype.onSubmit=function(){if(this.close(),this.callback)return this.callback()},i}(App.ControllerModal),App.ControllerDrox=function(t){function n(t){n.__super__.constructor.apply(this,arguments),t.data&&(t.data.text||t.data.html)&&this.inline(t.data)}return e(n,t),n.prototype.inline=function(t){if(this.html(App.view("generic/drox")(t)),t.text&&this.$(".drox-body").text(t.text),t.html)return this.$(".drox-body").html(t.html)},n.prototype.template=function(t){var e,n;return n=$(App.view("generic/drox")(t)),e=App.view(t.file)(t.params),n.find(".drox-body").append(e),n},n}(App.Controller),App.ControllerTabs=function(n){function i(){if(this.tabRemember=t(this.tabRemember,this),i.__super__.constructor.apply(this,arguments),this.requiredPermission&&!this.permissionCheckRedirect(this.requiredPermission))throw"No permission for "+this.requiredPermission}return e(i,n),i.prototype.events={'click .nav-tabs [data-toggle="tab"]':"tabRemember"},i.prototype.render=function(){var t,e,n,i,s;for(this.html(App.view("generic/tabs")({header:this.header,subHeader:this.subHeader,tabs:this.tabs,addTab:this.addTab})),i=this.tabs,t=0,e=i.length;t<e;t++)s=i[t],this.$(".tab-content").append('<div class="tab-pane" id="'+s.target+'"></div>'),s.controller&&(n=s.params||{},n.name=s.name,n.target=s.target,n.el=this.$("#"+s.target),new s.controller(n));return this.tabs.length<=1?void this.$(".tab-pane").addClass("active"):(this.lastActiveTab=this.Config.get("lastTab"),this.lastActiveTab&&this.$(".nav-tabs li a[href='"+this.lastActiveTab+"']")[0]?this.$(".nav-tabs li a[href='"+this.lastActiveTab+"']").tab("show"):this.$(".nav-tabs li:first a").tab("show"))},i.prototype.tabRemember=function(t){return this.lastActiveTab=$(t.target).attr("href"),this.Config.set("lastTab",this.lastActiveTab)},i}(App.Controller),App.ControllerNavSidbar=function(n){function i(){this.currentPosition=t(this.currentPosition,this),this.setPosition=t(this.setPosition,this),this.executeController=t(this.executeController,this),this.selectedItem=t(this.selectedItem,this),this.groupsSorted=t(this.groupsSorted,this),this.updateNavigation=t(this.updateNavigation,this),this.render=t(this.render,this),this.hide=t(this.hide,this),this.show=t(this.show,this),i.__super__.constructor.apply(this,arguments),this.authenticateRequired&&this.authenticateCheckRedirect(),this.user=App.User.find(App.Session.get("id")),this.render(!0),this.bind("ui:rerender",function(t){return function(){return t.render(!0),t.updateNavigation(!0)}}(this))}return e(i,n),i.prototype.show=function(t){var e,n;this.navupdate(""),this.shown=!0;for(e in t)n=t[e],"el"!==e&&"shown"!==e&&"match"!==e&&(this[e]=n);if(this.updateNavigation(),this.activeController&&_.isFunction(this.activeController.show))return this.activeController.show(t)},i.prototype.hide=function(){if(this.shown=!1,this.activeController&&_.isFunction(this.activeController.hide))return this.activeController.hide()},i.prototype.render=function(t){var e,n;return null==t&&(t=!1),e=this.groupsSorted(),n=this.selectedItem(e),this.html(App.view("generic/navbar_level2/index")({className:this.configKey})),this.$(".sidebar").html(App.view("generic/navbar_level2/navbar")({groups:e,className:this.configKey,selectedItem:n}))},i.prototype.updateNavigation=function(t){var e,n;if(e=this.groupsSorted(),(n=this.selectedItem(e))&&(t||!this.lastTarget||n.target!==this.lastTarget))return this.lastTarget=n.target,this.$(".sidebar li").removeClass("active"),this.$('.sidebar li a[href="'+n.target+'"]').parent().addClass("active"),this.executeController(n)},i.prototype.groupsSorted=function(){var t,e,n,i,s,r,o,a,l;t=App.Config.get(this.configKey),e=[];for(s in t)if(i=t[s],!i.controller)if(i.permission)for(o=!1,l=i.permission,n=0,r=l.length;n<r;n++)a=l[n],!o&&this.user.permission(a)&&(o=!0,e.push(i));else e.push(i);return _.sortBy(e,function(t){return t.prio})},i.prototype.selectedItem=function(t){var e,n,i,s,r,o,a,l,c,u,p,h,d,f,g,m,v,y,b,w,k,T,S;for(n=0,u=t.length;n<u;n++){e=t[n],s=App.Config.get(this.configKey),r=[];for(l in s)if(i=s[l],i.parent===e.target&&i.controller)if(i.permission)for(v=!1,w=i.permission,o=0,p=w.length;o<p;o++)b=w[o],!v&&this.user&&this.user.permission(b)&&(v=!0,r.push(i));else r.push(i);e.items=_.sortBy(r,function(t){return t.prio})}for(S=void 0,a=0,h=t.length;a<h;a++)if(e=t[a],e.items)for(k=e.items,c=0,d=k.length;c<d;c++)i=k[c],i.target.match("/"+this.target+"$")?(i.active=!0,S=i):i.active=!1;if(!S)for(m=0,f=t.length;m<f&&(e=t[m],!S);m++)if(e.items)for(T=e.items,y=0,g=T.length;y<g;y++){i=T[y],i.active=!0,S=i;break}return S},i.prototype.executeController=function(t){return this.activeController&&(this.activeController.el.remove(),this.activeController=void 0),this.$(".main").append("<div>"),this.activeController=new t.controller({el:this.$(".main div")})},i.prototype.setPosition=function(t){if(!this.shown&&t)return t.main&&this.$(".main").scrollTop(t.main),t.sidebar?this.$(".sidebar").scrollTop(t.sidebar):void 0},i.prototype.currentPosition=function(){return{main:this.$(".main").scrollTop(),sidebar:this.$(".sidebar").scrollTop()}},i}(App.Controller),App.GenericHistory=function(n){function i(){this.sortorder=t(this.sortorder,this),this.onShown=t(this.onShown,this),this.content=t(this.content,this),i.__super__.constructor.apply(this,arguments),this.fetch()}return e(i,n),i.prototype.buttonClose=!0,i.prototype.buttonCancel=!1,i.prototype.buttonSubmit=!1,i.prototype.head="History",i.prototype.shown=!1,i.prototype.content=function(){var t,e;return e=this.reworkItems(this.items),t=$(App.view("generic/history")({items:e})),t.find('a[data-type="sortorder"]').bind("click",function(t){return function(e){return e.preventDefault(),t.sortorder()}}(this)),t},i.prototype.onShown=function(){return this.userPopups()},i.prototype.sortorder=function(){return this.items=this.items.reverse(),this.update()},i.prototype.T=function(t){return App.i18n.translateInline(t)},i.prototype.reworkItems=function(t){var e,n,i,s,r,o,a,l,c,u,p;for(p=[],u={},l=void 0,a=void 0,t=clone(t),s=0,c=t.length;s<c;s++)r=t[s],"Ticket::Article"===r.object&&(r.object="Article"),i=r,i.created_by=App.User.find(r.created_by_id),n=new Date(r.created_at),o=new Date(new Date(a).getTime()+15e3),(l!==r.created_by_id||n>o)&&(a=r.created_at,l=r.created_by_id,_.isEmpty(u)||p.push(u),u={created_at:r.created_at,created_by:App.User.find(r.created_by_id),records:[]}),e="","notification"===r.type||"email"===r.type?e=this.T(r.type)+" "+this.T("sent to")+" '"+r.value_to+"'":(e=this.T(r.type)+" "+this.T(r.object)+" ",r.attribute&&(e+=""+this.T(r.attribute),"User"===r.object&&"last_login"===r.attribute&&(r.value_from&&(r.value_from=App.i18n.translateTimestamp(r.value_from)),r.value_to&&(r.value_to=App.i18n.translateTimestamp(r.value_to)))),r.value_from&&(r.value_to&&(e+=" "+this.T("from")),e+=" '"+App.Utils.htmlEscape(r.value_from)+"'"),r.value_to&&(r.value_from&&(e+=" "+this.T("to")),e+=" '"+App.Utils.htmlEscape(r.value_to)+"'")),u.records.push(e);return _.isEmpty(u)||p.push(u),p},i}(App.ControllerModal),App.ActionRow=function(t){function n(){n.__super__.constructor.apply(this,arguments),this.render()}return e(n,t),n.prototype.render=function(){var t,e,n,i,s;for(this.html(App.view("generic/actions")({items:this.items,type:this.type})),i=this.items,s=[],t=0,n=i.length;t<n;t++)e=i[t],s.push(function(t){return function(e){return t.$('[data-type="'+e.name+'"]').on("click",function(t){return t.preventDefault(),e.callback()})}}(this)(e));return s},n}(App.Controller),App.Sidebar=function(n){function i(){this.toggleTab=t(this.toggleTab,this),this.toggleSidebar=t(this.toggleSidebar,this),this.badgeRenderLocal=t(this.badgeRenderLocal,this),this.badgeRender=t(this.badgeRender,this),this.render=t(this.render,this);var e;i.__super__.constructor.apply(this,arguments),this.render(),this.name&&(e=this.name),!e&&this.sidebarState&&(e=this.sidebarState.active),e||(e=this.tabs.first().data("tab")),this.toggleTabAction(e)}return e(i,n),i.prototype.elements={".tabsSidebar-tab":"tabs",".sidebar":"sidebars"},i.prototype.events={"click .tabsSidebar-tab":"toggleTab","click .tabsSidebar-close":"toggleSidebar","click .sidebar-header .js-headline":"toggleDropdown"},i.prototype.render=function(){var t,e,n,i,s,r,o,a,l,c,u,p;for(s=[],p=this.items,e=0,a=p.length;e<a;e++)n=p[e],(i=n.sidebarItem())&&s.push(i);for(u=$(App.view("generic/sidebar_tabs")({items:s,scrollbarWidth:App.Utils.getScrollBarWidth(),dir:App.i18n.dir()})),r=0,l=s.length;r<l;r++)n=s[r],t=u.find('.tabsSidebar-tab[data-tab="'+n.name+'"]'),n.badgeCallback?n.badgeCallback(t):this.badgeRender(t,n);for(o=0,c=s.length;o<c;o++)n=s[o],n.sidebarCallback&&(t=u.filter('.sidebar[data-tab="'+n.name+'"]'),n.sidebarCallback(t.find(".sidebar-content")),_.isEmpty(n.sidebarActions)||new App.ActionRow({el:t.find(".js-actions"),items:n.sidebarActions,type:"small"}));return this.html(u)},i.prototype.badgeRender=function(t,e){return this.badgeEl=t,this.badgeRenderLocal(e)},i.prototype.badgeRenderLocal=function(t){return this.badgeEl.html(App.view("generic/sidebar_tabs_item")({icon:t.badgeIcon}))},i.prototype.toggleDropdown=function(t){return t.stopPropagation(),$(t.currentTarget).next(".js-actions").find(".dropdown-toggle").dropdown("toggle")},i.prototype.toggleSidebar=function(){return this.el.parent().find(".tabsSidebar-sidebarSpacer").toggleClass("is-closed"),this.el.parent().find(".tabsSidebar").toggleClass("is-closed")},i.prototype.showSidebar=function(){return this.el.parent().find(".tabsSidebar-sidebarSpacer").removeClass("is-closed"),this.el.parent().find(".tabsSidebar").removeClass("is-closed")},i.prototype.toggleTab=function(t){var e;if(e=$(t.target).closest(".tabsSidebar-tab").data("tab"))return e===this.currentTab?this.toggleSidebar():this.toggleTabAction(e)},i.prototype.toggleTabAction=function(t){var e;if(t)return this.sidebarState&&(this.sidebarState.active=t),this.tabs.removeClass("active"),this.$(".tabsSidebar-tab[data-tab="+t+"]").addClass("active"),this.sidebars.addClass("hide"),e=this.$(".sidebar[data-tab="+t+"]"),e.removeClass("hide"),this.currentTab=t,this.showSidebar()},i}(App.Controller),App.WizardModal=function(n){function i(){this.showInvalidField=t(this.showInvalidField,this),this.hide=t(this.hide,this),this.enable=t(this.enable,this),this.disable=t(this.disable,this),this.hideAlert=t(this.hideAlert,this),this.showAlert=t(this.showAlert,this),this.showSlide=t(this.showSlide,this),this.goToSlide=t(this.goToSlide,this),i.__super__.constructor.apply(this,arguments),this.bind("ui:rerender",function(t){return function(){return t.render(),"wizard"}}(this))}return e(i,n),i.prototype.className="modal fade",i.prototype.goToSlide=function(t){var e;if(t.preventDefault(),e=$(t.target).data("slide"))return this.showSlide(e)},i.prototype.showSlide=function(t){return this.hideAlert(t),this.$(".setup.wizard").addClass("hide"),this.$(".setup.wizard."+t).removeClass("hide"),this.$(".setup.wizard."+t+" input, .setup.wizard."+t+" select").first().focus()},i.prototype.showAlert=function(t,e){return this.$("."+t).find(".alert").first().removeClass("hide").text(App.i18n.translatePlain(e))},i.prototype.hideAlert=function(t){return this.$("."+t).find(".alert").first().addClass("hide")},i.prototype.disable=function(t){return this.formDisable(t),this.$(".wizard-controls .btn").attr("disabled",!0)},i.prototype.enable=function(t){return this.formEnable(t),this.$(".wizard-controls .btn").attr("disabled",!1)},i.prototype.hide=function(t){return t.preventDefault(),this.el.modal("hide")},i.prototype.showInvalidField=function(t,e){var n,i,s;if(this.$("."+t).find(".form-group").removeClass("has-error"),e){i=[];for(n in e)s=e[n],s?i.push(this.$("."+t).find('[name="options::'+n+'"]').closest(".form-group").addClass("has-error")):i.push(void 0);return i}},i.prototype.render=function(){},i}(App.Controller),App.WizardFullScreen=function(t){function n(){n.__super__.constructor.apply(this,arguments),$(".content").addClass("hide"),$("#content").removeClass("hide")}return e(n,t),n.prototype.className="getstarted fit",n}(App.WizardModal),App.CollectionController=function(n){function i(){this.remove=t(this.remove,this),this.click=t(this.click,this),this.location=t(this.location,this),this.renderItem=t(this.renderItem,this),this.renderParts=t(this.renderParts,this),this.itemGet=t(this.itemGet,this),this.itemAttributes=t(this.itemAttributes,this),this.itemAttributesSet=t(this.itemAttributesSet,this),this.itemAttributesGet=t(this.itemAttributesGet,this),this.itemAttributesDelete=t(this.itemAttributesDelete,this),this.itemAttributesDiff=t(this.itemAttributesDiff,this),this.itemsAll=t(this.itemsAll,this),this.itemDestroy=t(this.itemDestroy,this),this.renderAll=t(this.renderAll,this),this.domChange=t(this.domChange,this),this.domRemove=t(this.domRemove,this),this.collectionSync=t(this.collectionSync,this),this.collectionOrderSet=t(this.collectionOrderSet,this),this.collectionOrderGet=t(this.collectionOrderGet,this),this.uIRunner=t(this.uIRunner,this),this.release=t(this.release,this),this.events||(this.events=this.constructor.events),this.observe||(this.observe=this.constructor.observe),this.currentItems={},this.renderList={},this.queue=[],this.queueRunning=!1,this.lastOrder=[],i.__super__.constructor.apply(this,arguments),this.queue.push(["renderAll"]),this.uIRunner(),this.model&&(this.subscribeId=App[this.model].subscribe(this.collectionSync)),this.globalRerender&&this.bind("ui:rerender",function(t){return function(){return t.queue.push(["renderAll"]),t.uIRunner()}}(this)),this.bind("auth:login",function(t){return function(){return t.queue.push(["renderAll"]),t.uIRunner()}}(this)),this.bind("auth:logout",function(t){return function(){return t.queue.push(["renderAll"]),t.uIRunner()}}(this)),this.log("debug","Init @uniqKey",this.uniqKey),this.log("debug","Init @observe",this.observe),this.log("debug","Init @model",this.model)}return e(i,n),i.prototype.events={"click .js-remove":"remove","click .js-item":"click","click .js-locationVerify":"location"},i.prototype.observe={field1:!0,field2:!1},i.prototype.template="_need_to_be_defined_",i.prototype.uniqKey="id",i.prototype.model="_need_to_be_defined_",i.prototype.sortBy="name",i.prototype.order="ASC",i.prototype.insertPosition="after",i.prototype.globalRerender=!0,i.prototype.release=function(){if(this.subscribeId)return App[this.model].unsubscribe(this.subscribeId)},i.prototype.uIRunner=function(){var t,e;if(this.queue[0]&&!this.queueRunning){for(this.queueRunning=!0,e=[];;){if(t=this.queue.shift(),"domChange"===t[0]?this.domChange(t[1]):"domRemove"===t[0]?this.domRemove(t[1]):"change"===t[0]?this.collectionSync(t[1]):"destroy"===t[0]?this.collectionSync(t[1],"destroy"):"renderAll"===t[0]?this.renderAll():this.log("error","Unknown type "+t[0],t[1]),!this.queue[0]){this.onRenderEnd(),this.queueRunning=!1;break}e.push(void 0)}return e}},i.prototype.collectionOrderGet=function(){var t,e,n,i,s;for(s=[],t=this.itemsAll(),e=0,i=t.length;e<i;e++)n=t[e],s.push(n[this.uniqKey]);return s},i.prototype.collectionOrderSet=function(t){return null==t&&(t=!1),t||(t=this.collectionOrderGet()),this.lastOrder=t},i.prototype.collectionSync=function(t,e){var n,i,s,r,o,a,l,c,u,p,h,d,f,g,m,v,y,b,w,k;if("destroy"===e){for(l=[],o=0,f=t.length;o<f;o++)c=t[o],l.push(c[this.uniqKey]);return this.queue.push(["domRemove",l]),void this.uIRunner()}if(_.isEmpty(this.renderList))return this.queue.push(["renderAll"]),void this.uIRunner();if(b=this.collectionOrderGet(),
k=_.difference(this.lastOrder,b),n=_.difference(b,this.lastOrder),this.log("debug","collectionSync removedIds",k),this.log("debug","collectionSync addedIds",n),this.log("debug","collectionSync @lastOrder",this.lastOrder),this.log("debug","collectionSync newOrder",b),i=!1,!_.isEmpty(n)){for(d=[],w=this.lastOrder,u=0,g=w.length;u<g;u++)a=w[u],_.contains(k,a)||d.push(a);if(this.log("debug","collectionSync lastOrderNew",d),r=App.Utils.diffPositionAdd(d,b),this.log("debug","collectionSync applyOrder",r),!r)return this.queue.push(["renderAll"]),void this.uIRunner();for(_.isEmpty(k)||(i=!0,this.queue.push(["domRemove",k]),this.uIRunner()),y=[],p=0,m=r.length;p<m;p++)s=r[p],c=this.itemGet(s.id),c.meta_position=s.position,y.push(c);this.queue.push(["domChange",y]),this.uIRunner()}for(i||_.isEmpty(k)||(this.queue.push(["domRemove",k]),this.uIRunner()),y=[],h=0,v=t.length;h<v;h++)c=t[h],_.contains(k,c.id)||_.contains(n,c.id)||y.push(c);return _.isEmpty(y)?void 0:(this.queue.push(["domChange",y]),this.uIRunner())},i.prototype.domRemove=function(t){var e,n,i;for(this.log("debug","domRemove",t),e=0,i=t.length;e<i;e++)n=t[e],this.itemAttributesDelete(n),this.renderList[n]&&(this.renderList[n].remove(),delete this.renderList[n]),this.onRemoved(n);return this.collectionOrderSet()},i.prototype.domChange=function(t){var e,n,i,s,r,o,a,l;for(this.log("debug","domChange items",t),this.log("debug","domChange @currentItems",this.currentItems),n=[],o=0,l=t.length;o<l;o++)if(a=t[o],this.log("debug","domChange|item",a),e=this.itemAttributes(a),i=this.itemAttributesGet(a[this.uniqKey])){this.log("debug","domChange|change",a),this.log("debug","domChange|change|observe attributes",this.observe),this.log("debug","domChange|change|current",i),this.log("debug","domChange|change|new",e);for(r in this.observe)if(this.log("debug","domChange|change|compare",r,i[r],e[r]),s=!_.isEqual(i[r],e[r]),this.log("debug","domChange|diff",s),s){n.push(a),this.itemAttributesSet(a[this.uniqKey],e);break}}else this.log("debug","domChange|add",a),n.push(a),this.itemAttributesSet(a[this.uniqKey],e);if(!_.isEmpty(n))return this.renderParts(n)},i.prototype.renderAll=function(){var t,e,n,i,s,r;for(i=this.itemsAll(),this.log("debug","renderAll",i),r=[],e=0,s=i.length;e<s;e++)n=i[e],t=this.itemAttributes(n),this.itemAttributesSet(n[this.uniqKey],t),r.push(this.renderItem(n,!1));return this.html(r),this.collectionOrderSet(),this.onRenderEnd()},i.prototype.itemDestroy=function(t){return App[this.model].destroy(t)},i.prototype.itemsAll=function(){return App[this.model].search({sortBy:this.sortBy,order:this.order})},i.prototype.itemAttributesDiff=function(t){var e,n,i,s;e=this.itemAttributes(t),n=this.itemAttributesGet(t[this.uniqKey]);for(s in this.observe)if(this.log("debug","itemAttributesDiff|compare",s,n[s],e[s]),i=!_.isEqual(n[s],e[s]))return this.log("debug","itemAttributesDiff|diff",i),!0;return!1},i.prototype.itemAttributesDelete=function(t){return delete this.currentItems[t]},i.prototype.itemAttributesGet=function(t){return this.currentItems[t]},i.prototype.itemAttributesSet=function(t,e){return this.currentItems[t]=e},i.prototype.itemAttributes=function(t){var e,n;e={};for(n in this.observe)e[n]=t[n];return e},i.prototype.itemGet=function(t){return App[this.model].find(t)},i.prototype.renderParts=function(t){var e,n,i;for(this.log("debug","renderParts",t),e=0,i=t.length;e<i;e++)n=t[e],this.renderList[n[this.uniqKey]]?this.renderItem(n,this.renderList[n[this.uniqKey]]):this.renderItem(n);return this.collectionOrderSet()},i.prototype.renderItem=function(t,e){var n,i,s,r;return this.prepareForObjectListItemSupport&&(t=this.prepareForObjectListItem(t)),this.log("debug","renderItem",t,this.template,e,this.renderList[t[this.uniqKey]]),i=$(App.view(this.template)({item:t})),this.onRenderItemEnd&&this.onRenderItemEnd(t,i),s=Object.keys(this.renderList).length,this.renderList[t[this.uniqKey]]=i,!1===e?i:e?e.replaceWith(i):(r=t.meta_position,s>r&&(r+=1),n=this.el.find(".js-item:nth-child("+r+")"),n.get(0)?"before"===this.insertPosition?n.before(i):n.after(i):void this.el.append(i))},i.prototype.onRenderEnd=function(){},i.prototype.location=function(t){return this.locationVerify(t)},i.prototype.click=function(t){var e,n;return n=$(t.target).closest(".js-item"),e=n.data("id"),this.onClick(e,t)},i.prototype.onClick=function(){},i.prototype.remove=function(t){var e,n;return t.preventDefault(),t.stopPropagation(),n=$(t.target).closest(".js-item"),e=n.data("id"),this.onRemove(e,t),this.itemDestroy(e)},i.prototype.onRemove=function(){},i.prototype.onRemoved=function(){},i}(App.Controller),App.ObserverController=function(n){function i(){this.release=t(this.release,this),this.render=t(this.render,this),this.maybeRender=t(this.maybeRender,this),this.subscribe=t(this.subscribe,this),i.__super__.constructor.apply(this,arguments),this.log("debug","new",this.object_id,this.model),App[this.model].exists(this.object_id)?this.maybeRender(App[this.model].fullLocal(this.object_id)):App[this.model].full(this.object_id,this.maybeRender),this.globalRerender&&this.bind("ui:rerender",function(t){return function(){return t.lastAttributres=void 0,t.maybeRender(App[t.model].fullLocal(t.object_id))}}(this))}return e(i,n),i.prototype.model="Ticket",i.prototype.template="tba",i.prototype.globalRerender=!0,i.prototype.subscribe=function(t,e){return this.maybeRender(t,e)},i.prototype.maybeRender=function(t,e){var n,i,s,r,o;if("remove"===e)return this.release(),void this.el.remove();if(this.log("debug","maybeRender",this.object_id,t,this.model),this.subscribeId||(this.subscribeId=t.subscribe(this.subscribe)),n={},this.observe){r=this.observe;for(s in r)r[s]&&(n[s]=t[s])}if(this.observeNot)for(s in t)o=t[s],"cid"===s||this.observeNot[s]||_.isFunction(o)||_.isObject(o)||(n[s]=o);if(this.lastAttributres){if(i=difference(n,this.lastAttributres),_.isEmpty(i))return void this.log("debug","maybeRender no diff, no rerender")}else this.lastAttributres={};return this.log("debug","maybeRender.diff",i,this.observe,this.model),this.lastAttributres=n,this.render(t,i)},i.prototype.render=function(t,e){if(this.log("debug","render",this.template,t,e),this.html(App.view(this.template)({object:t})),this.renderPost)return this.renderPost(t)},i.prototype.release=function(){return this.log("debug","release",this.object_id,this.model,this.subscribeId),App[this.model].unsubscribe(this.subscribeId)},i}(App.Controller),App.ObserverActionRow=function(n){function i(){this.render=t(this.render,this),i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.render=function(t){var e,n,i,s,r;if(!_.isEmpty(t)){for(e=this.actions(t),this.html(App.view("generic/actions")({items:e,type:this.type})),r=[],n=0,s=e.length;n<s;n++)i=e[n],r.push(function(e){return function(n){return e.$('[data-type="'+n.name+'"]').on("click",function(e){return e.preventDefault(),n.callback(t)})}}(this)(i));return r}},i}(App.ObserverController),App.Import=function(n){function i(){return this.onSubmit=t(this.onSubmit,this),this.content=t(this.content,this),i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.buttonClose=!0,i.prototype.buttonCancel=!0,i.prototype.buttonSubmit="Import",i.prototype.autoFocusOnFirstInput=!1,i.prototype.head="Import",i.prototype.large=!0,i.prototype.templateDirectory="generic/object_import",i.prototype.baseUrl="/api/v1/text_modules",i.prototype.content=function(){var t,e;return t=$(App.view(this.templateDirectory+"/index")({head:"Import",import_example_url:this.baseUrl+"/import_example",deleteOption:this.deleteOption})),this.data&&(e=App.view(this.templateDirectory+"/result")(this.data),t.find(".js-error").html(e),e?t.find(".js-error").removeClass("hide"):t.find(".js-error").addClass("hide")),t},i.prototype.onSubmit=function(t){var e;return e=new FormData($(t.currentTarget).closest("form").get(0)),e.set("try",!0),_.isEmpty(e.get("data"))&&e["delete"]("data"),this.ajax({id:"csv_import",type:"POST",url:this.baseUrl+"/import",processData:!1,contentType:!1,cache:!1,data:e,success:function(t){return function(n){return"success"===n.result?(new App.ImportTryResult({container:t.el.closest(".content"),result:n,params:e,templateDirectory:t.templateDirectory,baseUrl:t.baseUrl}),void t.close()):(t.data=n,t.update())}}(this)})},i}(App.ControllerModal),App.ImportTryResult=function(n){function i(){return this.onSubmit=t(this.onSubmit,this),this.content=t(this.content,this),i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.buttonClose=!0,i.prototype.buttonCancel=!0,i.prototype.buttonSubmit="Yes, start real import.",i.prototype.autoFocusOnFirstInput=!1,i.prototype.head="Import",i.prototype.large=!0,i.prototype.templateDirectory="generic/object_import/",i.prototype.baseUrl="/api/v1/text_modules",i.prototype.content=function(){return $(App.view(this.templateDirectory+"/import_try")({head:"Import",import_example_url:this.baseUrl+"/import",result:this.result}))},i.prototype.onSubmit=function(){return this.params.set("try",!1),this.ajax({id:"csv_import",type:"POST",url:this.baseUrl+"/import",processData:!1,contentType:!1,cache:!1,data:this.params,success:function(t){return function(e){return"success"===e.result?(new App.ImportResult({container:t.el.closest(".content"),result:e,params:t.params,templateDirectory:t.templateDirectory,baseUrl:t.baseUrl}),void t.close()):(t.data=e,t.update())}}(this)})},i}(App.ControllerModal),App.ImportResult=function(n){function i(){return this.onSubmit=t(this.onSubmit,this),this.content=t(this.content,this),i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.buttonClose=!0,i.prototype.buttonCancel=!0,i.prototype.buttonSubmit="Close",i.prototype.autoFocusOnFirstInput=!1,i.prototype.head="Import",i.prototype.large=!0,i.prototype.templateDirectory="generic/object_import/",i.prototype.content=function(){return $(App.view(this.templateDirectory+"/imported")({head:"Imported",result:this.result}))},i.prototype.onSubmit=function(){return this.close()},i}(App.ControllerModal)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty,i=[].slice;App.ControllerTable=function(n){function s(){this.getBulkSelected=t(this.getBulkSelected,this),this.preferencesStoreKey=t(this.preferencesStoreKey,this),this.preferencesGet=t(this.preferencesGet,this),this.sortByColumn=t(this.sortByColumn,this),this.onColResizeMouseup=t(this.onColResizeMouseup,this),this.onColResizeMousemove=t(this.onColResizeMousemove,this),this.onColResizeMousedown=t(this.onColResizeMousedown,this),this.onResize=t(this.onResize,this),this.setHeaderWidths=t(this.setHeaderWidths,this),this.toggleActionDropdown=t(this.toggleActionDropdown,this),this.runAction=t(this.runAction,this),this.onActionButtonClicked=t(this.onActionButtonClicked,this),this.sortList=t(this.sortList,this),this.objectsOfPage=t(this.objectsOfPage,this),this.setMaxPage=t(this.setMaxPage,this),this.tableHeaders=t(this.tableHeaders,this),this.tableHeadersHasChanged=t(this.tableHeadersHasChanged,this),this.renderTableRow=t(this.renderTableRow,this),this.renderTableGroupByRow=t(this.renderTableGroupByRow,this),this.renderTableRows=t(this.renderTableRows,this),this.renderTableContainer=t(this.renderTableContainer,this),this.renderTableFull=t(this.renderTableFull,this),this.renderEmptyList=t(this.renderEmptyList,this),this.render=t(this.render,this),this.renderPager=t(this.renderPager,this),this.renderQueue=t(this.renderQueue,this),this.update=t(this.update,this),this.release=t(this.release,this);var e,n,i,r,o;if(s.__super__.constructor.apply(this,arguments),this.model||(this.model={}),this.overviewAttributes||(this.overviewAttributes=this.overview||this.model.configure_overview||[]),this.attributesListRaw||(this.attributesListRaw=this.attribute_list||this.model.configure_attributes||{}),this.attributesList=App.Model.attributesGet(!1,this.attributesListRaw),this.destroy=this.model.configure_delete,this.clone=this.model.configure_clone,_.isEmpty(this.overviewAttributes))throw"overviewAttributes needed";if(_.isEmpty(this.attributesList))throw"attributesList needed";if(e={},this.tableId&&(e=this.preferencesGet(),e.order)){i=e.order;for(n in i)o=i[n],this[n]=o}if(e.headerWidth){r=e.headerWidth;for(n in r)o=r[n],this.headerWidth[n]=o}this.availableWidth=this.el.width(),this.renderQueue()}return e(s,n),s.prototype.minColWidth=40,s.prototype.baseColWidth=130,s.prototype.minTableWidth=612,s.prototype.checkBoxColWidth=40,s.prototype.radioColWidth=22,s.prototype.sortableColWidth=36,s.prototype.destroyColWidth=70,s.prototype.cloneColWidth=70,s.prototype.elements={".js-tableHead":"tableHead"},s.prototype.events={"click .js-sort":"sortByColumn"},s.prototype.overviewAttributes=void 0,s.prototype.objects=[],s.prototype.checkbox=!1,s.prototype.radio=!1,s.prototype.renderState=void 0,s.prototype.groupBy=void 0,s.prototype.groupDirection=void 0,s.prototype.shownPerPage=150,s.prototype.shownPage=0,s.prototype.destroy=!1,s.prototype.columnsLength=void 0,s.prototype.headers=void 0,s.prototype.headerWidth={},s.prototype.currentRows=[],s.prototype.orderDirection="ASC",s.prototype.orderBy=void 0,s.prototype.lastOrderDirection=void 0,s.prototype.lastOrderBy=void 0,s.prototype.lastOverview=void 0,s.prototype.customOrderDirection=void 0,s.prototype.customOrderBy=void 0,s.prototype.frontendTimeUpdateExecute=!0,s.prototype.bindCol={},s.prototype.bindRow={},s.prototype.release=function(){return $(window).off("resize.table",this.onResize)},s.prototype.update=function(t){var e,n;if(!0===t.sync){for(e in t)n=t[e],this[e]=n;return this.render()}return this.renderQueue(t)},s.prototype.renderQueue=function(t){var e;return e=function(e){return function(){var n,i;for(n in t)i=t[n],e[n]=i;return e.render()}}(this),App.QueueManager.add("tableRender",e),App.QueueManager.run("tableRender")},s.prototype.renderPager=function(t,e){var n,i;return null==e&&(e=!1),(i=parseInt((this.objects.length-1)/this.shownPerPage))<1?void(e?t.find(".js-pager").html(""):t.filter(".js-pager").html("")):(n=App.view("generic/table_pager")({page:this.shownPage,pages:i}),e?t.find(".js-pager").html(n):t.filter(".js-pager").html(n))},s.prototype.render=function(){var t,e,n,i,s,r,o,a,l,c,u,p,h,d,f,g,m;if(this.setMaxPage(),void 0===this.renderState)return _.isEmpty(this.objects)?(this.renderState="emptyList",this.el.html(this.renderEmptyList()),$(window).on("resize.table",this.onResize),["emptyList.new"]):(this.renderState="List",this.renderTableFull(),$(window).on("resize.table",this.onResize),["fullRender.new"]);if("emptyList"===this.renderState&&!_.isEmpty(this.objects))return this.renderState="List",this.renderTableFull(),["fullRender"];if("emptyList"!==this.renderState&&_.isEmpty(this.objects))return this.renderState="emptyList",this.el.html(this.renderEmptyList()),["emptyList"];if(this.tableHeadersHasChanged())return this.renderTableFull(),["fullRender.overviewAttributesChanged"];if(c=this.renderTableRows(!0),g=_.difference(this.currentRows,c),e=_.difference(c,this.currentRows),this.log("debug","table newRows",c),this.log("debug","table removedRows",g),this.log("debug","table addedRows",e),(!_.isEmpty(e)||!_.isEmpty(g))&&e.length<10&&g.length<15&&g.length<c.length&&!_.isEmpty(c)){for(l=[],f=[],u=n=0,p=this.currentRows.length-1;0<=p?n<=p:n>=p;u=0<=p?++n:--n)_.contains(g,this.currentRows[u])?f.push(u):l.push(this.currentRows[u]);for(t=[],u=i=0,h=c.length-1;0<=h?i<=h:i>=h;u=0<=h?++i:--i)_.contains(e,c[u])&&(t.push(u),l.splice(u,0,c[u]));if(!0===this._isSame(c,l)){for(d=f.reverse(),s=0,r=d.length;s<r;s++)u=d[s],this.$("tbody > tr:nth-child("+(u+1)+")").remove();for(a=0,o=t.length;a<o;a++)u=t[a],0===u?this.$("tbody tr:nth-child(1)").get(0)?this.$("tbody tr:nth-child(1)").before(l[u]):this.$("tbody").append(l[u]):this.$("tbody > tr:nth-child("+u+")").after(l[u]);return this.currentRows=l,this.log("debug","table.fullRender.contentRemoved",f,t),this.renderPager(this.el,!0),!0===this.frontendTimeUpdateExecute&&this.frontendTimeUpdateElement(this.el),["fullRender.contentRemoved",f,t]}}return c.length!==this.currentRows.length?(m=["fullRender.lenghtChanged",this.currentRows.length,c.length],this.renderTableFull(c),this.log("debug","table.fullRender.lenghtChanged",m),m):!0!==(m=this._isSame(c,this.currentRows))?(this.renderTableFull(c),this.log("debug","table.fullRender.contentChanged|row("+m+")"),["fullRender.contentChanged",m]):(this.log("debug","table.noChanges"),["noChanges"])},s.prototype.renderEmptyList=function(){return App.view("generic/admin/empty")({explanation:this.explanation})},s.prototype.renderTableFull=function(t){var e,n,s,r,o,a,l,c,u,p,h,d,f,g,m,v,y,b,w,k,T;if(this.log("debug","table.renderTableFull",this.orderBy,this.orderDirection),this.tableHeaders(),this.sortList(),e=this.getBulkSelected(),s=this.renderTableContainer(),t?this.currentRows=clone(t):(t=this.renderTableRows(),this.currentRows=clone(t)),s.find(".js-tableBody").html(t),!0===this.frontendTimeUpdateExecute&&this.frontendTimeUpdateElement(s),this.renderPager(s),r={click:"pointer",dblclick:"pointer"},!_.isEmpty(this.bindCol)){y=this.bindCol;for(m in y)if(d=y[m],d.events){for(v=0,this.dndCallback&&(v+=1),this.checkbox&&(v+=1),h=!1,b=this.headers,f=0,g=b.length;f<g;f++)p=b[f],h||(v+=1),p.name!==m&&p.name!==m+"_id"&&p.name!==m+"_bulkIds"||(h=!0);if(h){w=d.events,l=function(t,e,n){return r[e]&&t.find("tbody > tr > td:nth-child("+v+")").css("cursor",r[e]),t.on(e,"tbody > tr > td:nth-child("+v+")",function(t){var e;return t.stopPropagation(),e=$(t.target).parents("tr").data("id"),n(e,t,t.currentTarget)})};for(a in w)n=w[a],l(s,a,n)}}}if(!_.isEmpty(this.bindRow)&&this.bindRow.events){k=this.bindRow.events,c=function(t,e,n){return r[e]&&t.find("tbody > tr").css("cursor",r[e]),t.on(e,"tbody > tr",function(t){var e;return e=$(t.target).parents("tr").data("id"),n(e,t)})};for(a in k)n=k[a],c(s,a,n)}if(this.bindCheckbox&&this.bindCheckbox.events){T=this.bindCheckbox.events,u=function(t,e,n){return t.delegate('input[name="bulk"]',e,function(t){var e,i;return t.stopPropagation(),i=$(t.currentTarget).parents("tr").data("id"),e=$(t.currentTarget).prop("checked"),n(i,e,t)})};for(a in T)n=T[a],u(s,a,n)}return this.tableId&&(s.on("mousedown",".js-col-resize",this.onColResizeMousedown),s.on("click",".js-col-resize",this.stopPropagation)),this.checkbox&&(s.delegate("tr > td:nth-child(1)","click",function(t){return t.stopPropagation()}),s.delegate('input[name="bulk_all"]',"change",function(t){return function(e){var s,r,o,l;if(e.stopPropagation(),r=[],$(e.currentTarget).prop("checked")?$(e.currentTarget).parents("table").find('[name="bulk"]').each(function(){var t,e;if(t=$(this),!t.prop("checked"))return t.prop("checked",!0),e=t.parents("tr").data("id"),r.push([e,!0])}):$(e.currentTarget).parents("table").find('[name="bulk"]').each(function(){var t,e;if(t=$(this),t.prop("checked"))return t.prop("checked",!1),e=t.parents("tr").data("id"),r.push([e,!1])}),t.bindCheckbox&&t.bindCheckbox.events&&!_.isEmpty(r)){o=t.bindCheckbox.events,l=[];for(a in o)n=o[a],"click"===a||"change"===a?l.push(function(){var t,o,a;for(a=[],t=0,o=r.length;t<o;t++)s=r[t],a.push(n.apply(null,i.call(s).concat([e])));return a}()):l.push(void 0);return l}}}(this))),this.dndCallback&&(o={tolerance:"pointer",distance:15,opacity:.6,forcePlaceholderSize:!0,items:"tr",helper:function(t,e){var n,i;return i=e.children(),n=e.clone(),n.children().each(function(t){return $(this).width(i.eq(t).outerWidth())}),n},update:this.dndCallback},s.find("tbody").sortable(o)),s.delegate(".js-page","click",function(t){return function(e){var n,i;return e.stopPropagation(),n=$(e.currentTarget).attr("data-page"),i=function(){return t.shownPage=n,t.renderTableFull()},App.QueueManager.add("tableRender",i),App.QueueManager.run("tableRender")}}(this)),this.el.html(s),this.setBulkSelected(e)},s.prototype.renderTableContainer=function(){return $(App.view("generic/table")({tableId:this.tableId,headers:this.headers,checkbox:this.checkbox,radio:this.radio,"class":this["class"],sortable:this.dndCallback}))},s.prototype.renderTableRows=function(t){var e,n,i,s,r,o,a,l,c;for(null==t&&(t=!1),!0===t&&this.sortList(),l=0,e=this.headers.length,(this.checkbox||this.radio)&&e++,"",i="",c=[],a=this.objectsOfPage(this.shownPage),s=0,r=a.length;s<r;s++)(o=a[s])&&(l++,this.groupBy&&(n=App.viewPrint(o,this.groupBy,this.attributesList),i!==n&&(i=n,c.push(this.renderTableGroupByRow(o,l,n)))),c.push(this.renderTableRow(o,l)));return c},s.prototype.renderTableGroupByRow=function(t,e,n){var i,s,r,o,a,l,c,u;if(u=this.Config.get("ui_table_group_by_show_count"),s=void 0,!0===u&&(i=this.groupBy,r=t[this.groupBy],r||(i=this.groupBy+"_id",r=t[i]),s=0,this.objects))for(c=this.objects,o=0,a=c.length;o<a;o++)l=c[o],l[i]===r&&(s+=1);return App.view("generic/table_row_group_by")({position:e,groupByName:n,groupByCount:s,columnsLength:this.columnsLength})},s.prototype.renderTableRow=function(t,e){return App.view("generic/table_row")({headers:this.headers,attributes:this.attributesList,checkbox:this.checkbox,radio:this.radio,callbacks:this.callbackAttributes,sortable:this.dndCallback,position:e,object:t,actions:this.actions})},s.prototype.tableHeadersHasChanged=function(){return this.overviewAttributes!==this.lastOverview},s.prototype.tableHeaders=function(){var t,e,n,i,s,r,o,a,l,c,u,p,h,d,f,g;if(c=this.customOrderBy||this.orderBy,u=this.customOrderDirection||this.orderDirection,this.headers&&this.lastOrderBy===c&&this.lastOrderDirection===u&&!this.tableHeadersHasChanged())return this.log("debug","table.Headers: same overviewAttributes just return headers",this.headers),["headers are the same",this.headers];for(this.lastOverview=this.overviewAttributes,this.headers=[],this.actions=[],n=this.availableWidth,p=this.overviewAttributes,r=0,a=p.length;r<a;r++){s=p[r],!1,h=this.attributesList;for(e in h)t=h[e],this.groupBy&&this.groupBy===s||(t.style||(t.style={}),e===s?(!0,this.headerWidth[t.name]?t.displayWidth=this.headerWidth[t.name]*n:t.width?(g=parseInt(t.width,10),f=t.width.match(/[px|%]+/)[0],t.displayWidth="%"===f?g/100*n:g):t.displayWidth=this.baseColWidth,this.headers.push(t)):e!==s+"_id"&&e!==s+"_ids"||(!0,this.headerWidth[t.name]?t.displayWidth=this.headerWidth[t.name]*n:t.width?(g=parseInt(t.width,10),f=t.width.match(/[px|%]+/)[0],t.displayWidth="%"===f?g/100*n:g):t.displayWidth=this.baseColWidth,this.headers.push(t)))}if(this.callbackHeader)for(d=this.callbackHeader,o=0,l=d.length;o<l;o++)i=d[o],this.headers=i(this.headers);if(_.isEmpty(this.headers))throw"no headers found";return this.clone&&this.actions.push({name:"clone",display:"Clone",icon:"clipboard","class":"create  js-clone",callback:function(t){return function(e){return s=t.model.find(e),s.name="Clone: "+s.name,new App.ControllerGenericNew({item:s,pageData:{object:s.constructor.className},callback:function(){return t.renderTableFull()},genericObject:s.constructor.className,container:t.container})}}(this)}),this.destroy&&this.actions.push({name:"delete",display:"Delete",icon:"trash","class":"danger js-delete",callback:function(t){return function(e){return s=t.model.find(e),new App.ControllerGenericDestroyConfirm({item:s,container:t.container})}}(this)}),this.actions.length&&(this.headers.push({name:"action",display:"Action",width:"38px",displayWidth:38,unresizeable:!0,align:"right",parentClass:"noTruncate no-padding"}),this.bindCol.action={events:{click:this.toggleActionDropdown}}),this.tableId&&this.calculateHeaderWidths(),this.columnsLength=this.headers.length,(this.checkbox||this.radio)&&this.columnsLength++,this.log("debug","table.Headers: new headers",this.headers),["new headers",this.headers]},s.prototype.setMaxPage=function(){var t;if(t=parseInt((this.objects.length-1)/this.shownPerPage),parseInt(this.shownPage)>t)return this.shownPage=t},s.prototype.objectsOfPage=function(t){return null==t&&(t=0),t=parseInt(t),this.objects.slice(t*this.shownPerPage,(t+1)*this.shownPerPage)},s.prototype.sortList=function(){var t,e,n,i,s,r,o,a,l,c,u,p,h,d,f,g,m,v,y,b,w,k;if(!(_.isEmpty(this.objects)||(m=this.customOrderBy||this.orderBy,v=this.customOrderDirection||this.orderDirection,this.log("debug","table.order",this.orderBy,this.orderDirection),this.log("debug","table.customOrder",this.customOrderBy,this.customOrderDirection),_.isEmpty(m)&&_.isEmpty(this.groupBy)||this.lastSortedobjects===this.objects&&this.lastOrderDirection===v&&this.lastOrderBy===m))){if(this.lastOrderDirection=v,this.lastOrderBy=m,m){for(y=this.headers,a=0,p=y.length;a<p;a++)r=y[a],r.name===m||r.name+"_id"===m||r.name===m+"_id"?(f=_.sortBy(this.objects,function(t){var e;return t?r.translate?App.i18n.translateInline(t[r.name]):r.relation?t[r.name]&&(e=App[r.relation].findNative(t[r.name]))?(e.displayName&&(e=e.displayName().toLowerCase()),e.name&&(e=e.name.toLowerCase()),e):"":t[r.name]:(console.log("Got empty object in order by with header _.sortBy"),"")}),"DESC"===v?(r.sortOrderIcon=["arrow-down","table-sort-arrow"],f=f.reverse()):r.sortOrderIcon=["arrow-up","table-sort-arrow"]):r.sortOrderIcon=void 0;if(!f){b=this.attributesList;for(e in b)t=b[e],e!==m&&e+"_id"!==m&&e!==m+"_id"||(f=_.sortBy(this.objects,function(e){var n;return e?t.translate?App.i18n.translateInline(e[t.name]):t.relation?e[t.name]&&(n=App[t.relation].findNative(e[t.name]))?(n.displayName&&(n=n.displayName().toLowerCase()),n.name&&(n=n.name.toLowerCase()),n):"":e[t.name]:(console.log("Got empty object in order by in attribute _.sortBy"),"")}),"DESC"===v&&(f=f.reverse()))}f?this.objects=f:console.log("Unable to orderBy objects, no attribute found with name "+m)}if(this.groupBy){for(i={},w=this.objects,l=0,h=w.length;l<h;l++)g=w[l],n=g[this.groupBy],n||(k=this.groupBy+"_id",g[k]&&this.attributesList[k]&&this.attributesList[k].relation&&App[this.attributesList[k].relation].exists(g[k])&&(o=App[this.attributesList[k].relation].findNative(g[k]),o&&o.displayName?n=o.displayName().toLowerCase():o.name&&(n=o.name.toLowerCase()))),_.isEmpty(n)&&(n=""),n.displayName?n=n.displayName().toLowerCase():n.name&&(n=n.name.toLowerCase()),i[n]||(i[n]=[]),i[n].push(g);s=[];for(c in i)s.push(c);for(s=s.sort(),"DESC"===this.groupDirection&&s.reverse(),f=[],u=0,d=s.length;u<d;u++)n=s[u],f=f.concat(i[n]),i[n]=[]}if(void 0!==f)return this.objects=f,this.lastSortedobjects=f}},s.prototype.onActionButtonClicked=function(t){var e,n;return e=$(t.currentTarget).parents("tr").data("id"),n=t.currentTarget.getAttribute("data-table-action"),this.runAction(n,e),console.log("onActionButtonClicked")},s.prototype.runAction=function(t,e){var n;return n=_.findWhere(this.actions,{name:t}),n.callback(e)},s.prototype.toggleActionDropdown=function(t,e,n){var i,s;return e.stopPropagation(),i=$(n).find(".js-table-action-menu"),i.length?(i.dropdown("toggle"),i.one("click.dropdown","[data-table-action]",this.onActionButtonClicked),i.parent().one("hide.bs.dropdown",function(){return i.off("click.dropdown")})):(s=$(n).find("[data-table-action]").attr("data-table-action"),this.runAction(s,t))},s.prototype.calculateHeaderWidths=function(){var t,e,n,i;if(this.headers)return 0===this.availableWidth&&(this.availableWidth=this.minTableWidth),t=this.availableWidth,i=this.getHeaderWidths(),n=Math.ceil((i-t)/this.getShrinkableHeadersCount()),this.headers=_.map(this.headers,function(t){return function(e){return e.unresizable||(e.displayWidth=Math.max(t.minColWidth,e.displayWidth-n)),e}}(this)),e=t-this.getHeaderWidths(),e>0&&(this.headers[this.headers.length-1].displayWidth=this.headers[this.headers.length-1].displayWidth+e),this.storeHeaderWidths()},s.prototype.getShrinkableHeadersCount=function(){return _.reduce(this.headers,function(t,e){return e.unresizable?t:t+1},0)},s.prototype.getHeaderWidths=function(){var t;return t=_.reduce(this.headers,function(t,e){return t+e.displayWidth},0),this.checkbox&&(t+=this.checkBoxColWidth),this.radio&&(t+=this.radioColWidth),this.dndCallback&&(t+=this.sortableColWidth),this.destroy&&(t+=this.destroyColWidth),this.clone&&(t+=this.cloneColWidth),t},s.prototype.setHeaderWidths=function(){return this.calculateHeaderWidths(),this.tableHead.each(function(t){return function(e,n){return n.style.width=t.headers[e].displayWidth+"px"}}(this))},s.prototype.storeHeaderWidths=function(){var t,e,n,i,s;for(s={},i=this.headers,e=0,n=i.length;e<n;e++)t=i[e],s[t.name]=t.displayWidth/this.availableWidth;return App.LocalStorage.set(this.preferencesStoreKey(),{headerWidth:s},this.Session.get("id"))},s.prototype.onResize=function(){return this.availableWidth=this.el.width(),this.setHeaderWidths()},s.prototype.stopPropagation=function(t){return t.stopPropagation()},s.prototype.onColResizeMousedown=function(t){return this.resizeTargetLeft=$(t.currentTarget).parents("th"),this.resizeTargetRight=this.resizeTargetLeft.next(),this.resizeStartX=t.pageX,this.resizeLeftStartWidth=this.resizeTargetLeft.width(),this.resizeRightStartWidth=this.resizeTargetRight.width(),$(document).on("mousemove.resizeCol",this.onColResizeMousemove),$(document).one("mouseup",this.onColResizeMouseup),this.tableWidth=this.el.width()},s.prototype.onColResizeMousemove=function(t){var e;return e=t.pageX-this.resizeStartX,this.resizeLeftStartWidth+e<this.minColWidth&&(e=-(this.resizeLeftStartWidth-this.minColWidth)),this.resizeRightStartWidth-e<this.minColWidth&&(e=this.resizeRightStartWidth-this.minColWidth),this.resizeTargetLeft.width(this.resizeLeftStartWidth+e),this.resizeTargetRight.width(this.resizeRightStartWidth-e)},s.prototype.onColResizeMouseup=function(){var t,e,n,i,s,r,o,a,l,c,u,p,h;for($(document).off("mousemove.resizeCol"),c=this.resizeTargetLeft.parents("table").width(),s=this.resizeTargetLeft.width()/c,h=this.resizeTargetRight.width()/c,i=this.resizeTargetLeft.attr("data-column-key"),p=this.resizeTargetRight.attr("data-column-key"),this.preferencesStore("headerWidth",i,s),this.headerWidth[i]=s,a=this.headers,e=0,r=a.length;e<r;e++)t=a[e],t.name===i&&(t.displayWidth=this.resizeTargetLeft.outerWidth());if(p){for(this.preferencesStore("headerWidth",p,h),this.headerWidth[p]=h,l=this.headers,u=[],n=0,o=l.length;n<o;n++)t=l[n],t.name===p?u.push(t.displayWidth=this.resizeTargetRight.outerWidth()):u.push(void 0);return u}},s.prototype.sortByColumn=function(t){var e,n,i,s;return e=$(t.currentTarget).closest("[data-column-key]").attr("data-column-key"),n=this.customOrderBy||this.orderBy,i=this.customOrderDirection||this.orderDirection,n!==e?(n=e,i="ASC"):i="ASC"===i?"DESC":"ASC",this.orderBy=n,this.orderDirection=i,this.customOrderBy=n,this.customOrderDirection=i,this.preferencesStore("order","customOrderBy",this.orderBy),this.preferencesStore("order","customOrderDirection",this.orderDirection),s=function(t){return function(){return t.renderTableFull()}}(this),App.QueueManager.add("tableRender",s),App.QueueManager.run("tableRender")},s.prototype.preferencesStore=function(t,e,n){var i;return i=this.preferencesGet(),i[t]||(i[t]={}),i[t][e]||(i[t][e]={}),i[t][e]=n,App.LocalStorage.set(this.preferencesStoreKey(),i,this.Session.get("id"))},s.prototype.preferencesGet=function(){return App.LocalStorage.get(this.preferencesStoreKey(),this.Session.get("id"))||{}},s.prototype.preferencesStoreKey=function(){return"tablePrefs:"+this.tableId},s.prototype.getBulkSelected=function(){var t;return t=[],this.$('[name="bulk"]:checked').each(function(e,n){var i;return i=$(n).val(),t.push(i)}),t},s.prototype.setBulkSelected=function(t){return this.$('[name="bulk"]').each(function(e,n){var i,s,r,o,a;for(i=$(n).val(),a=[],r=0,o=t.length;r<o;r++)s=t[r],s===i?a.push($(n).prop("checked",!0)):a.push(void 0);return a})},s.prototype._isSame=function(t,e){var n,i,s;for(i=n=0,s=t.length-1;0<=s?n<=s:n>=s;i=0<=s?++n:--n)if(t[i]!==e[i])return i;return!0},s}(App.Controller)}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var s in e)i.call(e,s)&&(t[s]=e[s]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;App.ChannelChat=function(i){function s(){this.updateParams=e(this.updateParams,this),this.toggleChatSetting=e(this.toggleChatSetting,this),this.toggleChat=e(this.toggleChat,this),this.onColorPicked=e(this.onColorPicked,this),this.renderDemoWebsite=e(this.renderDemoWebsite,this),this.updatePreview=e(this.updatePreview,this),this.selectBrowserWidth=e(this.selectBrowserWidth,this),this.render=e(this.render,this),this.load=e(this.load,this),s.__super__.constructor.apply(this,arguments),this.Session.get("email")&&(this.previewUrl="www."+this.Session.get("email").replace(/^.+?\@/,"")),this.load(),this.permanent={chatId:1},
this.widgetDesignerPermanentParams={id:"id"},$(window).on("resize.chat-designer",this.resizeDemo)}return n(s,i),s.prototype.requiredPermission="admin.channel_chat",s.prototype.header="Chat",s.prototype.events={"change .js-params":"updateParams","input .js-params":"updateParams","submit .js-demo-head":"onUrlSubmit","click .js-selectBrowserWidth":"selectBrowserWidth","click .js-swatch":"usePaletteColor","click .js-toggle-chat":"toggleChat","change .js-chatSetting input":"toggleChatSetting","click .js-eyedropper":"pickColor"},s.prototype.elements={".js-browser":"browser",".js-browserBody":"browserBody",".js-screenshot":"screenshot",".js-website":"website",".js-chat":"chat",".js-chatHeader":"chatHeader",".js-chat-welcome":"chatWelcome",".js-testurl-input":"urlInput",".js-backgroundColor":"chatBackground",".js-code":"code",".js-palette":"palette",".js-color":"colorField",".js-chatSetting input":"chatSetting",".js-eyedropper":"eyedropper"},s.prototype.apiOptions=[{name:"chatId","default":"1",type:"Number",description:"Identifier of the chat-topic."},{name:"show","default":!0,type:"Boolean",description:"Show the chat when ready."},{name:"target","default":"$('body')",type:"jQuery Object",description:"Where to append the chat to."},{name:"host","default":"(Empty)",type:"String",description:"If left empty, the host gets auto-detected - in this case %s. The auto-detection reads out the host from the <script> tag. If you don't include it via a <script> tag you need to specify the host.",descriptionSubstitute:window.location.origin},{name:"debug","default":!1,type:"Boolean",description:"Enables console logging."},{name:"title","default":"'<strong>Chat</strong> with us!'",type:"String",description:"Welcome Title shown on the closed chat. Can contain HTML."},{name:"fontSize","default":"undefined",type:"String",description:"CSS font-size with a unit like 12px, 1.5em. If left to undefined it inherits the font-size of the website."},{name:"flat","default":"false",type:"Boolean",description:"Removes the shadows for a flat look."},{name:"buttonClass","default":"'open-zammad-chat'",type:"String",description:"Add this class to a button on your page that should open the chat."},{name:"inactiveClass","default":"'is-inactive'",type:"String",description:"This class gets added to the button on initialization and gets removed once the chat connection got established."},{name:"cssAutoload","default":"true",type:"Boolean",description:"Automatically loads the chat.css file. If you want to use your own css, just set it to false."},{name:"cssUrl","default":"undefined",type:"String",description:"Location of an external chat.css file."}],s.prototype.isOpen=!0,s.prototype.browserWidth=1280,s.prototype.browserWidthMax=1280,s.prototype.previewUrl="",s.prototype.previewScale=1,s.prototype.load=function(){return this.startLoading(),this.ajax({id:"chat_index",type:"GET",url:this.apiPath+"/chats",processData:!0,success:function(t){return function(e){var n;return App.Collection.loadAssets(e.assets),n=App.Chat.first(),n&&(t.permanent={chatId:n.id}),t.stopLoading(),t.render(e)}}(this)})},s.prototype.render=function(e){return null==e&&(e={}),this.html(App.view("channel/chat")({baseurl:window.location.origin,apiOptions:this.apiOptions,previewUrl:this.previewUrl,chatSetting:this.Config.get("chat")})),new t({el:this.$(".js-topics")}),this.code.each(function(t,e){return hljs.highlightBlock(e)}),this.updatePreview(),this.updateParams(),this.changeDemoWebsite(),$(window).on("resize.chat-designer",function(t){return function(){return t.updatePreview(!1)}}(this))},s.prototype.release=function(){return $(window).off("resize.chat-designer"),this.website.off("click.eyedropper")},s.prototype.selectBrowserWidth=function(t){var e;return e=$(t.target).closest("[data-value]"),e.addClass("is-selected").siblings().removeClass("is-selected"),this.browserWidth=e.attr("data-value"),this.updatePreview()},s.prototype.updatePreview=function(t){var e;if(null==t&&(t=!0),e=parseInt(this.browserWidth,10),this.chat.removeClass("is-fullscreen").toggleClass("no-transition",!t).css("transform","translateY("+this.getChatOffset()+"px)"),this.browser.css("width",""),this.website.css({transform:"",width:"",height:""}),this.previewScale=1,"fit"!==this.browserWidth)return e<this.el.width()&&375===e?(this.chat.addClass("is-fullscreen").css("transform","translateY("+this.getChatOffset(!0)+"px)"),this.browser.css("width",e+"px")):(this.el.width()>e&&e===this.browserWidthMax?this.previewScale=1:this.previewScale=this.el.width()/e,this.chat.css("transform","translateY("+this.getChatOffset()*this.previewScale+"px) scale("+this.previewScale+")"),this.website.css({transform:"scale("+this.previewScale+")",width:this.el.width()/this.previewScale,height:this.browserBody.height()/this.previewScale}))},s.prototype.getChatOffset=function(t){return this.isOpen?0:t?this.browserBody.height()-this.chatHeader.outerHeight():this.chat.height()-this.chatHeader.outerHeight()},s.prototype.onUrlSubmit=function(t){return t&&t.preventDefault(),this.urlInput.focus(),this.changeDemoWebsite()},s.prototype.changeDemoWebsite=function(){if(""!==this.urlInput.val()&&this.urlInput.val()!==this.urlCache)return this.urlCache=this.urlInput.val(),this.url=this.urlCache,this.url.startsWith("http")||(this.url="http://"+this.url),this.urlInput.addClass("is-loading"),this.palette.empty(),this.screenshot.attr("src",""),$.ajax({url:"https://images.zammad.com/api/v1/webpage/combined",data:{url:this.url,count:20},success:this.renderDemoWebsite,dataType:"json"})},s.prototype.renderDemoWebsite=function(t){return this._screenshotSource=t.data_url,this.screenshot.attr("src",this._screenshotSource),this.renderPalette(t.palette),this.urlInput.removeClass("is-loading")},s.prototype.renderPalette=function(t){var e,n,i,s,r,o;for(t=_.map(t,tinycolor),t=_.filter(t,function(t){return t.getLuminance()<.85}),n="",o=8,i=s=0,r=t.length;s<r&&(e=t[i],n+=App.view("channel/color_swatch")({color:e.toHexString()}),i!==o);i=++s);if(this.palette.html(n),t[0])return this.usePaletteColor(void 0,t[0].toHexString())},s.prototype.usePaletteColor=function(t,e){return t&&(e=$(t.currentTarget).attr("data-color")),this.colorField.val(e),this.updateParams()},s.prototype.pickColor=function(){if(this._screenshotSource)return this._pickingColor?(this._pickingColor=!1,this.website.off("click.eyedropper").removeClass("is-picking"),this.eyedropper.removeClass("is-active")):(this._pickingColor=!0,this.website.on("click.eyedropper",this.onColorPicked).addClass("is-picking"),this.eyedropper.addClass("is-active"))},s.prototype.onColorPicked=function(t){var e,n,i,s,r,o;return r=t.pageX-this.website.offset().left,o=t.pageY-this.website.offset().top,i=new Image,i.src=this._screenshotSource,e=document.createElement("canvas"),n=e.getContext("2d"),e.width=i.width,e.height=i.height,n.drawImage(i,0,0,this.previewScale*e.width,this.previewScale*e.height),s=n.getImageData(r,o,1,1).data,this.colorField.val("rgb("+s.slice(0,3).join(",")+")").trigger("change")},s.prototype.toggleChat=function(){return this.chat.toggleClass("is-open"),this.isOpen=this.chat.hasClass("is-open"),this.updatePreview()},s.prototype.toggleChatSetting=function(){var t;return t=this.chatSetting.prop("checked"),App.Setting.set("chat",t)},s.prototype.updateParams=function(){var t,e,n,i,s,r;if(i=function(t){return t.replace&&(t=t.replace("'","\\'").replace(/\</g,"&lt;").replace(/\>/g,"&gt;")),t},n=this.formParam(this.$(".js-params")),parseInt(n.fontSize,10)>2&&this.chat.css("font-size",n.fontSize),this.chatBackground.css("background",n.background),"on"===n.flat?(this.chat.addClass("zammad-chat--flat"),n.flat=!0):this.chat.removeClass("zammad-chat--flat"),this.chatWelcome.html(n.title),this.updatePreview(!1),this.permanent){s=this.permanent;for(t in s)r=s[t],n[t]=r}e="";for(t in n)r=n[t],(_.isNumber(r)||_.isBoolean(r)||!_.isEmpty(r))&&(""!==e&&(e+=",\n"),!0===r||!1===r||_.isNumber(r)?e+="    "+t+": "+r:e+="    "+t+": '"+i(r)+"'");return this.$(".js-modal-params").html(e),this.code.each(function(t,e){return hljs.highlightBlock(e)})},s}(App.ControllerSubContent),App.Config.set("Chat",{prio:4e3,name:"Chat",parent:"#channels",target:"#channels/chat",controller:App.ChannelChat,permission:["admin.channel_chat"]},"NavBarAdmin"),t=function(t){function i(){this.remove=e(this.remove,this),this.edit=e(this.edit,this),this["new"]=e(this["new"],this),this.render=e(this.render,this),i.__super__.constructor.apply(this,arguments),this.render()}return n(i,t),i.prototype.events={"click .js-add":"new","click .js-edit":"edit","click .js-remove":"remove"},i.prototype.render=function(){return this.html(App.view("channel/topics")({chats:App.Chat.all()}))},i.prototype["new"]=function(){return new App.ControllerGenericNew({pageData:{title:"Chats",object:"Chat",objects:"Chats"},genericObject:"Chat",callback:this.render,container:this.el.closest(".content"),large:!0})},i.prototype.edit=function(t){var e;return t.preventDefault(),e=$(t.target).closest("tr").data("id"),new App.ControllerGenericEdit({id:e,genericObject:"Chat",pageData:{object:"Chat"},container:this.el.closest(".content"),callback:this.render})},i.prototype.remove=function(t){var e,n;return t.preventDefault(),e=$(t.target).closest("tr").data("id"),n=App.Chat.find(e),new App.ControllerGenericDestroyConfirm({item:n,container:this.el.closest(".content"),callback:this.render})},i}(App.Controller)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty,n=function(t,e){return function(){return t.apply(e,arguments)}};App.ChannelEmail=function(e){function n(){n.__super__.constructor.apply(this,arguments),this.title("Email",!0),this.tabs=[{name:"Accounts",target:"c-account",controller:App.ChannelEmailAccountOverview},{name:"Filter",target:"c-filter",controller:App.ChannelEmailFilter},{name:"Signatures",target:"c-signature",controller:App.ChannelEmailSignature},{name:"Settings",target:"c-setting",controller:App.SettingsArea,params:{area:"Email::Base"}}],this.render()}return t(n,e),n.prototype.requiredPermission="admin.channel_email",n.prototype.header="Email",n}(App.ControllerTabs),App.ChannelEmailFilter=function(e){function i(){this.edit=n(this.edit,this),this["new"]=n(this["new"],this),this.render=n(this.render,this),i.__super__.constructor.apply(this,arguments),App.PostmasterFilter.subscribe(this.render,{initFetch:!0})}return t(i,e),i.prototype.events={"click [data-type=new]":"new"},i.prototype.render=function(){var t,e,n;return t=App.PostmasterFilter.search({sortBy:"name"}),n=$('<div><div class="overview"></div><a data-type="new" class="btn btn--success">'+App.i18n.translateContent("New")+"</a></div>"),e="With filters you can e. g. dispatch new tickets into certain groups or set a certain priority for tickets of a VIP customer.",new App.ControllerTable({el:n.find(".overview"),model:App.PostmasterFilter,objects:t,bindRow:{events:{click:this.edit}},explanation:e}),this.html(n)},i.prototype["new"]=function(t){return t.preventDefault(),new App.ControllerGenericNew({pageData:{object:"Postmaster Filter"},genericObject:"PostmasterFilter",container:this.el.closest(".content"),callback:this.load})},i.prototype.edit=function(t,e){return e.preventDefault(),new App.ControllerGenericEdit({id:t,pageData:{object:"Postmaster Filter"},genericObject:"PostmasterFilter",container:this.el.closest(".content"),callback:this.load})},i}(App.Controller),App.ChannelEmailSignature=function(e){function i(){this.edit=n(this.edit,this),this["new"]=n(this["new"],this),this.render=n(this.render,this),i.__super__.constructor.apply(this,arguments),App.Signature.subscribe(this.render,{initFetch:!0})}return t(i,e),i.prototype.events={"click [data-type=new]":"new"},i.prototype.render=function(){var t,e,n;return t=App.Signature.search({sortBy:"name"}),n=$('<div><div class="overview"></div><a data-type="new" class="btn btn--success">'+App.i18n.translateContent("New")+"</a></div>"),e="You can define different signatures for each group. So you can have different email signatures for different departments.\n\nOnce you have created a signature here, you need also to edit the groups where you want to use it.",new App.ControllerTable({el:n.find(".overview"),model:App.Signature,objects:t,bindRow:{events:{click:this.edit}},explanation:e}),this.html(n)},i.prototype["new"]=function(t){return t.preventDefault(),new App.ChannelEmailSignatureEdit({container:this.el.closest(".content")})},i.prototype.edit=function(t,e){var n;return e.preventDefault(),n=App.Signature.find(t),new App.ChannelEmailSignatureEdit({object:n,container:this.el.closest(".content")})},i}(App.Controller),App.ChannelEmailSignatureEdit=function(e){function i(){return this.onSubmit=n(this.onSubmit,this),this.content=n(this.content,this),i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.buttonClose=!0,i.prototype.buttonCancel=!0,i.prototype.buttonSubmit=!0,i.prototype.head="Signature",i.prototype.content=function(){return this.object?this.form=new App.ControllerForm({model:App.Signature,params:this.object,autofocus:!0}):this.form=new App.ControllerForm({model:App.Signature,autofocus:!0}),this.form.form},i.prototype.onSubmit=function(t){var e,n,i;return i=this.formParam(t.target),n=this.object||new App.Signature,n.load(i),(e=this.form.validate(i))?(this.log("error",e),this.formValidate({form:t.target,errors:e}),!1):(this.formDisable(t),n.save({done:function(t){return function(){return t.close()}}(this),fail:function(e){return function(n,i){return e.log("errors",i),e.formEnable(t),e.form.showAlert(i.error_human||i.error||"Unable to create object!")}}(this)}))},i}(App.ControllerModal),App.ChannelEmailAccountOverview=function(e){function i(){this.editNotificationOutbound=n(this.editNotificationOutbound,this),this.emailAddressDelete=n(this.emailAddressDelete,this),this.emailAddressEdit=n(this.emailAddressEdit,this),this.emailAddressNew=n(this.emailAddressNew,this),this.groupChange=n(this.groupChange,this),this.enable=n(this.enable,this),this.disable=n(this.disable,this),this["delete"]=n(this["delete"],this),this.editOutbound=n(this.editOutbound,this),this.editInbound=n(this.editInbound,this),this.wizard=n(this.wizard,this),this.render=n(this.render,this),this.load=n(this.load,this),i.__super__.constructor.apply(this,arguments),this.interval(this.load,3e4)}return t(i,e),i.prototype.events={"click .js-channelNew":"wizard","click .js-channelDelete":"delete","click .js-channelDisable":"disable","click .js-channelEnable":"enable","click .js-channelGroupChange":"groupChange","click .js-editInbound":"editInbound","click .js-editOutbound":"editOutbound","click .js-emailAddressNew":"emailAddressNew","click .js-emailAddressEdit":"emailAddressEdit","click .js-emailAddressDelete":"emailAddressDelete","click .js-editNotificationOutbound":"editNotificationOutbound"},i.prototype.load=function(){return this.startLoading(),this.ajax({id:"email_index",type:"GET",url:this.apiPath+"/channels_email",processData:!0,success:function(t){return function(e){return t.stopLoading(),App.Collection.loadAssets(e.assets),t.render(e)}}(this)})},i.prototype.render=function(t){var e,n,i,s,r,o,a,l,c,u,p,h,d,f,g,m,v,y,b;for(null==t&&(t={}),this.channelDriver=t.channel_driver,n=[],v=t.account_channel_ids,a=0,p=v.length;a<p;a++)s=v[a],e=App.Channel.fullLocal(s),e.group_id?e.group=App.Group.find(e.group_id):e.group="-",n.push(e);for(l=0,h=n.length;l<h;l++)i=n[l],o=App.EmailAddress.search({filter:{channel_id:i.id}}),i.email_addresses=o;for(g=[],y=t.not_used_email_address_ids,c=0,d=y.length;c<d;c++)r=y[c],g.push(App.EmailAddress.find(r));for(m=[],b=t.notification_channel_ids,u=0,f=b.length;u<f;u++)s=b[u],m.push(App.Channel.find(s));return this.html(App.view("channel/email_account_overview")({account_channels:n,not_used_email_addresses:g,notification_channels:m,accounts_fixed:t.accounts_fixed,config:t.config}))},i.prototype.wizard=function(t){return t.preventDefault(),new App.ChannelEmailAccountWizard({container:this.el.closest(".content"),callback:this.load,channelDriver:this.channelDriver})},i.prototype.editInbound=function(t){var e,n,i;return t.preventDefault(),n=$(t.target).closest(".action").data("id"),e=App.Channel.find(n),i="js-inbound",new App.ChannelEmailAccountWizard({container:this.el.closest(".content"),slide:i,channel:e,callback:this.load,channelDriver:this.channelDriver})},i.prototype.editOutbound=function(t){var e,n,i;return t.preventDefault(),n=$(t.target).closest(".action").data("id"),e=App.Channel.find(n),i="js-outbound",new App.ChannelEmailAccountWizard({container:this.el.closest(".content"),slide:i,channel:e,callback:this.load,channelDriver:this.channelDriver})},i.prototype["delete"]=function(t){var e;return t.preventDefault(),e=$(t.target).closest(".action").data("id"),new App.ControllerConfirm({message:"Sure?",callback:function(t){return function(){return t.ajax({id:"email_delete",type:"DELETE",url:t.apiPath+"/channels_email",data:JSON.stringify({id:e}),processData:!0,success:function(){return t.load()}})}}(this),container:this.el.closest(".content")})},i.prototype.disable=function(t){var e;return t.preventDefault(),e=$(t.target).closest(".action").data("id"),this.ajax({id:"email_disable",type:"POST",url:this.apiPath+"/channels_email_disable",data:JSON.stringify({id:e}),processData:!0,success:function(t){return function(){return t.load()}}(this)})},i.prototype.enable=function(t){var e;return t.preventDefault(),e=$(t.target).closest(".action").data("id"),this.ajax({id:"email_enable",type:"POST",url:this.apiPath+"/channels_email_enable",data:JSON.stringify({id:e}),processData:!0,success:function(t){return function(){return t.load()}}(this)})},i.prototype.groupChange=function(t){var e,n;return t.preventDefault(),e=$(t.target).closest(".action").data("id"),n=App.Channel.find(e),new App.ChannelEmailEdit({container:this.el.closest(".content"),item:n,callback:this.load})},i.prototype.emailAddressNew=function(t){var e;return t.preventDefault(),e=$(t.target).closest(".action").data("id"),new App.ControllerGenericNew({pageData:{object:"Email Address"},genericObject:"EmailAddress",container:this.el.closest(".content"),item:{channel_id:e},callback:this.load})},i.prototype.emailAddressEdit=function(t){var e;return t.preventDefault(),e=$(t.target).closest("li").data("id"),new App.ControllerGenericEdit({pageData:{object:"Email Address"},genericObject:"EmailAddress",container:this.el.closest(".content"),id:e,callback:this.load})},i.prototype.emailAddressDelete=function(t){var e,n;return t.preventDefault(),e=$(t.target).closest("li").data("id"),n=App.EmailAddress.find(e),new App.ControllerGenericDestroyConfirm({item:n,container:this.el.closest(".content"),callback:this.load})},i.prototype.editNotificationOutbound=function(t){var e,n;return t.preventDefault(),n=$(t.target).closest(".action").data("id"),e=App.Channel.find(n),"js-outbound",new App.ChannelEmailNotificationWizard({container:this.el.closest(".content"),channel:e,callback:this.load,channelDriver:this.channelDriver})},i}(App.Controller),App.ChannelEmailEdit=function(e){function i(){return this.onSubmit=n(this.onSubmit,this),this.content=n(this.content,this),i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.buttonClose=!0,i.prototype.buttonCancel=!0,i.prototype.buttonSubmit=!0,i.prototype.head="Channel",i.prototype.content=function(){var t;return t=[{name:"group_id",display:"Destination Group",tag:"select","null":!1,relation:"Group",nulloption:!0,filter:{active:!0}}],this.form=new App.ControllerForm({model:{configure_attributes:t,className:""},params:this.item}),this.form.form},i.prototype.onSubmit=function(t){var e,n;return n=this.formParam(t.target),(e=this.form.validate(n))?(this.log("error",e),this.formValidate({form:t.target,errors:e}),!1):(this.formDisable(t),this.ajax({id:"channel_email_group",type:"POST",url:this.apiPath+"/channels_email_group/"+this.item.id,data:JSON.stringify(n),processData:!0,success:function(t){return function(){return t.callback(),t.close()}}(this),error:function(e){return function(n){var i;return i=JSON.parse(n.responseText),e.formEnable(t),e.el.find(".alert").removeClass("hidden").text(i.error||"Unable to save changes.")}}(this)}))},i}(App.ControllerModal),App.ChannelEmailAccountWizard=function(e){function i(){this.hide=n(this.hide,this),this.verify=n(this.verify,this),this.probleOutbound=n(this.probleOutbound,this),this.probeInbound=n(this.probeInbound,this),this.probeBasedOnIntro=n(this.probeBasedOnIntro,this),this.toggleOutboundAdapter=n(this.toggleOutboundAdapter,this),this.render=n(this.render,this),i.__super__.constructor.apply(this,arguments),this.account={inbound:{adapter:void 0,options:void 0},outbound:{adapter:void 0,options:void 0},meta:{}},this.channel&&(this.account={inbound:clone(this.channel.options.inbound),outbound:clone(this.channel.options.outbound),meta:{}},this.account.inbound.options&&this.account.inbound.options.password&&(this.inboundPassword=this.account.inbound.options.password,this.account.inbound.options.password=this.passwordPlaceholder),this.account.outbound.options&&this.account.outbound.options.password&&(this.outboundPassword=this.account.outbound.options.password,this.account.outbound.options.password=this.passwordPlaceholder)),this.container&&this.el.addClass("modal--local"),this.render(),this.channel&&this.$(".js-goToSlide[data-slide=js-intro]").addClass("hidden"),this.el.modal({keyboard:!0,show:!0,backdrop:!0,container:this.container}).on({"hidden.bs.modal":function(t){return function(){return t.callback&&t.callback(),t.el.remove()}}(this)}),this.slide&&this.showSlide(this.slide)}return t(i,e),i.prototype.elements={".modal-body":"body"},i.prototype.events={"submit .js-intro":"probeBasedOnIntro","submit .js-inbound":"probeInbound","change .js-outbound [name=adapter]":"toggleOutboundAdapter","submit .js-outbound":"probleOutbound","click  .js-goToSlide":"goToSlide","click  .js-expert":"probeBasedOnIntro","click  .js-close":"hide"},i.prototype.inboundPassword="",i.prototype.outboundPassword="",i.prototype.passwordPlaceholder="{{{{{{{{{{{{SECRTE_PASSWORD}}}}}}}}}}}}",i.prototype.render=function(){var t,e,n,i,s;return this.html(App.view("channel/email_account_wizard")()),this.showSlide("js-intro"),t=[{name:"realname",display:"Organization & Department Name",tag:"input",type:"text",limit:160,"null":!1,placeholder:"Organization Support",autocomplete:"off"},{name:"email",display:"Email",tag:"input",type:"email",limit:120,"null":!1,placeholder:"support@example.com",autocapitalize:!1,autocomplete:"off"},{name:"password",display:"Password",tag:"input",type:"password",limit:120,"null":!1,autocapitalize:!1,autocomplete:"new-password",single:!0},{name:"group_id",display:"Destination Group",tag:"select","null":!1,relation:"Group",nulloption:!0}],this.formMeta=new App.ControllerForm({el:this.$(".base-settings"),model:{configure_attributes:t,className:""},params:this.account.meta}),n=[{name:"adapter",display:"Send Mails via",tag:"select",multiple:!1,"null":!1,options:this.channelDriver.email.outbound}],new App.ControllerForm({el:this.$(".base-outbound-type"),model:{configure_attributes:n,className:""},params:{adapter:this.account.outbound.adapter||"smtp"}}),this.toggleOutboundAdapter(),e=[{name:"adapter",display:"Type",tag:"select",multiple:!1,"null":!1,options:this.channelDriver.email.inbound},{name:"options::host",display:"Host",tag:"input",type:"text",limit:120,"null":!1,autocapitalize:!1},{name:"options::user",display:"User",tag:"input",type:"text",limit:120,"null":!1,autocapitalize:!1,autocomplete:"off"},{name:"options::password",display:"Password",tag:"input",type:"password",limit:120,"null":!1,autocapitalize:!1,autocomplete:"new-password",single:!0},{name:"options::ssl",display:"SSL/STARTTLS",tag:"boolean","null":!0,options:{"true":"yes","false":"no"},"default":!0,translate:!0,item_class:"formGroup--halfSize"},{name:"options::port",display:"Port",tag:"input",type:"text",limit:6,"null":!0,autocapitalize:!1,"default":"993",item_class:"formGroup--halfSize"},{name:"options::folder",display:"Folder",tag:"input",type:"text",limit:120,"null":!0,autocapitalize:!1,item_class:"formGroup--halfSize"},{name:"options::keep_on_server",display:"Keep messages on server",tag:"boolean","null":!0,options:{"true":"yes","false":"no"},translate:!0,"default":!1,item_class:"formGroup--halfSize"}],s=function(t,e,n,i,s,r){if(t)return"imap"===t.adapter?(r.show("options::folder"),void r.show("options::keep_on_server")):(r.hide("options::folder"),r.hide("options::keep_on_server"))},i=function(t){var e;if(t&&t.options){if(e=this.$('[name="options::port"]').val(),!0===t.options.ssl)return void(e||this.$('[name="options::port"]').val("993"));!1===t.options.ssl&&(e&&"993"!==e||this.$('[name="options::port"]').val("143"))}},new App.ControllerForm({el:this.$(".base-inbound-settings"),model:{configure_attributes:e,className:""},params:this.account.inbound,handlers:[s,i]})},i.prototype.toggleOutboundAdapter=function(){var t,e;if(t={options:{}},this.account.meta&&(t.options.user=this.account.meta.email,t.options.password=this.account.meta.password,t.options.folder=this.account.meta.folder,t.options.keep_on_server=this.account.meta.keep_on_server),this.$(".base-outbound-settings").html(""),"smtp"===this.$(".js-outbound [name=adapter]").val())return e=[{name:"options::host",display:"Host",tag:"input",type:"text",limit:120,"null":!1,autocapitalize:!1,autofocus:!0},{name:"options::user",display:"User",tag:"input",type:"text",limit:120,"null":!0,autocapitalize:!1,autocomplete:"off"},{name:"options::password",display:"Password",tag:"input",type:"password",limit:120,"null":!0,autocapitalize:!1,autocomplete:"new-password",single:!0},{name:"options::port",display:"Port",tag:"input",type:"text",limit:6,"null":!0,autocapitalize:!1}],this.form=new App.ControllerForm({el:this.$(".base-outbound-settings"),model:{configure_attributes:e,className:""},params:this.account.outbound})},i.prototype.probeBasedOnIntro=function(t){var e,n;return t.preventDefault(),n=this.formParam(t.target),this.account.meta=n,this.channel&&(n.channel_id=this.channel.id),$(t.currentTarget).hasClass("js-expert")?(e=this.formMeta.validate(n),e&&delete e.password,_.isEmpty(e)?(this.showSlide("js-inbound"),this.$('.js-inbound [name="options::user"]').val(n.email),void this.$('.js-inbound [name="options::password"]').val(n.password)):void this.formValidate({form:t.target,errors:e})):(this.disable(t),this.$(".js-probe .js-email").text(n.email),this.showSlide("js-probe"),this.ajax({id:"email_probe",type:"POST",url:this.apiPath+"/channels_email_probe",data:JSON.stringify(n),processData:!0,success:function(e){return function(n){var i,s,r,o;if("ok"===n.result){if(n.setting){r=n.setting;for(i in r)o=r[i],e.account[i]=o}n.content_messages&&n.content_messages>0&&(!e.account.inbound.options||!0!==e.account.inbound.options.keep_on_server)?(s=App.i18n.translateContent("We have already found %s email(s) in your mailbox. Zammad will move it all from your mailbox into Zammad.",n.content_messages),e.$(".js-inbound-acknowledge .js-message").html(s),e.$(".js-inbound-acknowledge .js-back").attr("data-slide","js-intro"),e.$(".js-inbound-acknowledge .js-next").attr("data-slide",""),e.$(".js-inbound-acknowledge .js-next").unbind("click.verify").bind("click.verify",function(t){return t.preventDefault(),e.verify(e.account)}),e.showSlide("js-inbound-acknowledge")):e.verify(e.account)}else"duplicate"===n.result?(e.showSlide("js-intro"),e.showAlert("js-intro","Account already exists!")):(e.showSlide("js-inbound"),e.showAlert("js-inbound","Unable to detect your server settings. Manual configuration needed."),e.$('.js-inbound [name="options::user"]').val(e.account.meta.email),e.$('.js-inbound [name="options::password"]').val(e.account.meta.password));return e.enable(t)}}(this),error:function(e){return function(){return e.enable(t),e.showSlide("js-intro")}}(this)}))},i.prototype.probeInbound=function(t){var e;return t.preventDefault(),e=this.formParam(t.target),e.options&&e.options.password===this.passwordPlaceholder&&(e.options.password=this.inboundPassword),this.channel&&(e.channel_id=this.channel.id),this.disable(t),this.showSlide("js-test"),this.ajax({id:"email_inbound",type:"POST",url:this.apiPath+"/channels_email_inbound",data:JSON.stringify(e),processData:!0,success:function(n){return function(i){var s;return"ok"===i.result?(n.account.inbound=e,i.content_messages&&i.content_messages>0&&(!n.account.inbound.options||!0!==n.account.inbound.options.keep_on_server)?(s=App.i18n.translateContent("We have already found %s email(s) in your mailbox. Zammad will move it all from your mailbox into Zammad.",i.content_messages),n.$(".js-inbound-acknowledge .js-message").html(s),n.$(".js-inbound-acknowledge .js-back").attr("data-slide","js-inbound"),n.$(".js-inbound-acknowledge .js-next").unbind("click.verify"),n.showSlide("js-inbound-acknowledge")):n.showSlide("js-outbound"),n.channel||(n.account.inbound.options?(n.$('.js-outbound [name="options::host"]').val(n.account.inbound.options.host),n.$('.js-outbound [name="options::user"]').val(n.account.inbound.options.user),n.$('.js-outbound [name="options::password"]').val(n.account.inbound.options.password)):(n.$('.js-outbound [name="options::user"]').val(n.account.meta.email),n.$('.js-outbound [name="options::password"]').val(n.account.meta.password)))):(n.showSlide("js-inbound"),n.showAlert("js-inbound",i.message_human||i.message),n.showInvalidField("js-inbound",i.invalid_field)),n.enable(t)}}(this),error:function(e){return function(n){var i;return i=JSON.parse(n.responseText),e.showSlide("js-inbound"),e.showAlert("js-inbound",i.message_human||i.message||i.error),e.showInvalidField("js-inbound",i.invalid_field),e.enable(t)}}(this)})},i.prototype.probleOutbound=function(t){var e,n;return t.preventDefault(),n=this.formParam(t.target),n.email=this.account.meta.email,n.options&&n.options.password===this.passwordPlaceholder&&(n.options.password=this.outboundPassword),!n.email&&this.channel&&(e=App.EmailAddress.search({filter:{channel_id:this.channel.id}}))&&e[0]&&(n.email=e[0].email),this.channel&&(n.channel_id=this.channel.id),this.disable(t),this.showSlide("js-test"),this.ajax({id:"email_outbound",type:"POST",url:this.apiPath+"/channels_email_outbound",data:JSON.stringify(n),processData:!0,success:function(e){return function(i){return"ok"===i.result?(e.account.outbound=n,e.verify(e.account)):(e.showSlide("js-outbound"),e.showAlert("js-outbound",i.message_human||i.message),e.showInvalidField("js-outbound",i.invalid_field)),e.enable(t)}}(this),error:function(e){return function(n){var i;return i=JSON.parse(n.responseText),e.showSlide("js-outbound"),e.showAlert("js-outbound",i.message_human||i.message||i.error),e.showInvalidField("js-outbound",i.invalid_field),e.enable(t)}}(this)})},i.prototype.verify=function(t,e){var n;return null==e&&(e=0),this.showSlide("js-verify"),this.channel&&(t.channel_id=this.channel.id),t.meta.group_id?t.group_id=t.meta.group_id:this.channel.group_id&&(t.group_id=this.channel.group_id),!t.email&&this.channel&&(n=App.EmailAddress.search({filter:{channel_id:this.channel.id}}))&&n[0]&&(t.email=n[0].email),this.ajax({id:"email_verify",type:"POST",url:this.apiPath+"/channels_email_verify",data:JSON.stringify(t),processData:!0,success:function(t){return function(n){return"ok"===n.result?t.el.modal("hide"):"inbound"===n.source||"outbound"===n.source?(t.showSlide("js-"+n.source),t.showAlert("js-"+n.source,n.message_human||n.message),t.showInvalidField("js-"+n.source,n.invalid_field)):2===e?(t.showAlert("js-verify",n.message_human||n.message),t.delay(function(){return t.showSlide("js-intro"),t.showAlert("js-intro","Unable to verify sending and receiving. Please check your settings.")},2300)):(n.subject&&t.account&&(t.account.subject=n.subject),t.verify(t.account,e+1))}}(this),error:function(t){return function(){return t.showSlide("js-intro"),t.showAlert("js-intro","Unable to verify sending and receiving. Please check your settings.")}}(this)})},i.prototype.hide=function(t){return t.preventDefault(),this.el.modal("hide")},i}(App.WizardModal),App.ChannelEmailNotificationWizard=function(e){function i(){this.probleOutbound=n(this.probleOutbound,this),this.toggleOutboundAdapter=n(this.toggleOutboundAdapter,this),this.render=n(this.render,this),i.__super__.constructor.apply(this,arguments),this.account={inbound:{adapter:void 0,options:void 0},outbound:{adapter:void 0,options:void 0},meta:{}},this.channel&&(this.account={inbound:clone(this.channel.options.inbound),outbound:clone(this.channel.options.outbound)},
this.account.inbound&&this.account.inbound.options&&this.account.inbound.options.password&&(this.inboundPassword=this.account.inbound.options.password,this.account.inbound.options.password=this.passwordPlaceholder),this.account.outbound&&this.account.outbound.options&&this.account.outbound.options.password&&(this.outboundPassword=this.account.outbound.options.password,this.account.outbound.options.password=this.passwordPlaceholder)),this.container&&this.el.addClass("modal--local"),this.render(),this.el.modal({keyboard:!0,show:!0,backdrop:!0,container:this.container}).on({"show.bs.modal":this.onShow,"shown.bs.modal":this.onShown,"hidden.bs.modal":function(t){return function(){return t.callback&&t.callback(),t.el.remove()}}(this)}),this.slide&&this.showSlide(this.slide)}return t(i,e),i.prototype.elements={".modal-body":"body"},i.prototype.events={"change .js-outbound [name=adapter]":"toggleOutboundAdapter","submit .js-outbound":"probleOutbound","click  .js-close":"hide"},i.prototype.inboundPassword="",i.prototype.outboundPassword="",i.prototype.passwordPlaceholder="{{{{{{{{{{{{SECRTE_PASSWORD}}}}}}}}}}}}",i.prototype.render=function(){var t;return this.html(App.view("channel/email_notification_wizard")()),this.showSlide("js-outbound"),t=[{name:"adapter",display:"Send Mails via",tag:"select",multiple:!1,"null":!1,options:this.channelDriver.email.outbound}],new App.ControllerForm({el:this.$(".base-outbound-type"),model:{configure_attributes:t,className:""},params:{adapter:this.account.outbound.adapter||"sendmail"}}),this.toggleOutboundAdapter()},i.prototype.toggleOutboundAdapter=function(){var t;if(this.el.find(".base-outbound-settings").html(""),"smtp"===this.$(".js-outbound [name=adapter]").val())return t=[{name:"options::host",display:"Host",tag:"input",type:"text",limit:120,"null":!1,autocapitalize:!1,autofocus:!0},{name:"options::user",display:"User",tag:"input",type:"text",limit:120,"null":!0,autocapitalize:!1,autocomplete:"off"},{name:"options::password",display:"Password",tag:"input",type:"password",limit:120,"null":!0,autocapitalize:!1,autocomplete:"new-password",single:!0},{name:"options::port",display:"Port",tag:"input",type:"text",limit:6,"null":!0,autocapitalize:!1}],this.form=new App.ControllerForm({el:this.$(".base-outbound-settings"),model:{configure_attributes:t,className:""},params:this.account.outbound})},i.prototype.probleOutbound=function(t){var e;return t.preventDefault(),e=this.formParam(t.target),e.options&&e.options.password===this.passwordPlaceholder&&(e.options.password=this.outboundPassword),e.channel_id=this.channel.id,this.disable(t),this.showSlide("js-test"),this.ajax({id:"email_outbound",type:"POST",url:this.apiPath+"/channels_email_notification",data:JSON.stringify(e),processData:!0,success:function(e){return function(n){return"ok"===n.result?e.el.modal("hide"):(e.showSlide("js-outbound"),e.showAlert("js-outbound",n.message_human||n.message),e.showInvalidField("js-outbound",n.invalid_field)),e.enable(t)}}(this),error:function(e){return function(n){var i;return i=JSON.parse(n.responseText),e.showSlide("js-outbound"),e.showAlert("js-outbound",i.message_human||i.message||i.error),e.showInvalidField("js-outbound",i.invalid_field),e.enable(t)}}(this)})},i}(App.WizardModal),App.Config.set("Email",{prio:3e3,name:"Email",parent:"#channels",target:"#channels/email",controller:App.ChannelEmail,permission:["admin.channel_email"]},"NavBarAdmin")}.call(this),function(){var t,e,n,i=function(t,e){return function(){return t.apply(e,arguments)}},s=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;n=function(n){function r(){this.enable=i(this.enable,this),this.disable=i(this.disable,this),this["delete"]=i(this["delete"],this),this.edit=i(this.edit,this),this.configApp=i(this.configApp,this),this.show=i(this.show,this),this.render=i(this.render,this),this.load=i(this.load,this),r.__super__.constructor.apply(this,arguments),this.load()}return s(r,n),r.prototype.requiredPermission="admin.channel_facebook",r.prototype.header="Facebook",r.prototype.events={"click .js-new":"new","click .js-edit":"edit","click .js-delete":"delete","click .js-disable":"disable","click .js-enable":"enable","click .js-configApp":"configApp"},r.prototype.load=function(){return this.startLoading(),this.ajax({id:"facebook_index",type:"GET",url:this.apiPath+"/channels_facebook",processData:!0,success:function(t){return function(e){return t.stopLoading(),App.Collection.loadAssets(e.assets),t.callbackUrl=e.callback_url,t.render(e)}}(this)})},r.prototype.render=function(t){var e,n,i,s,r,o,a,l,c,u,p,h,d,f,g;if(!App.ExternalCredential.findByAttribute("name","facebook"))return void this.html(App.view("facebook/index")());for(i=[],d=t.channel_ids,o=0,l=d.length;o<l;o++){if(n=d[o],(e=App.Channel.find(n))&&e.options&&e.options.sync&&(s="-",e.options.sync.wall&&e.options.sync.wall.group_id&&(r=App.Group.find(e.options.sync.wall.group_id),s=r.displayName()),e.options.sync||(e.options.sync={}),e.options.sync.wall||(e.options.sync.wall={}),e.options.sync.wall.groupName=s,e.options&&e.options.pages))for(f=e.options.pages,a=0,c=f.length;a<c;a++){u=f[a],s="-",g=e.options.sync.pages;for(h in g)p=g[h],u.id===h&&p.group_id&&(r=App.Group.find(p.group_id),s=r.displayName(),u.groupName=s)}i.push(e)}return this.html(App.view("facebook/list")({channels:i})),this.channel_id?(this.edit(void 0,this.channel_id),this.channel_id=void 0):void 0},r.prototype.show=function(t){var e,n,i;n=[];for(e in t)i=t[e],"el"!==e&&"shown"!==e&&"match"!==e?n.push(this[e]=i):n.push(void 0);return n},r.prototype.configApp=function(){return new e({container:this.el.parents(".content"),callbackUrl:this.callbackUrl,load:this.load})},r.prototype["new"]=function(){return window.location.href=this.apiPath+"/external_credentials/facebook/link_account"},r.prototype.edit=function(e,n){var i;return e&&(e.preventDefault(),n=$(e.target).closest(".action").data("id")),i=App.Channel.find(n),i?new t({channel:i,container:this.el.parents(".content"),load:this.load}):void this.navigate("#channels/facebook")},r.prototype["delete"]=function(t){var e;return t.preventDefault(),e=$(t.target).closest(".action").data("id"),new App.ControllerConfirm({message:"Sure?",callback:function(t){return function(){return t.ajax({id:"facebook_delete",type:"DELETE",url:t.apiPath+"/channels_facebook",data:JSON.stringify({id:e}),processData:!0,success:function(){return t.load()}})}}(this),container:this.el.closest(".content")})},r.prototype.disable=function(t){var e;return t.preventDefault(),e=$(t.target).closest(".action").data("id"),this.ajax({id:"facebook_disable",type:"POST",url:this.apiPath+"/channels_facebook_disable",data:JSON.stringify({id:e}),processData:!0,success:function(t){return function(){return t.load()}}(this)})},r.prototype.enable=function(t){var e;return t.preventDefault(),e=$(t.target).closest(".action").data("id"),this.ajax({id:"facebook_enable",type:"POST",url:this.apiPath+"/channels_facebook_enable",data:JSON.stringify({id:e}),processData:!0,success:function(t){return function(){return t.load()}}(this)})},r}(App.ControllerSubContent),e=function(t){function e(){return this.onSubmit=i(this.onSubmit,this),this.onClosed=i(this.onClosed,this),e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.head="Connect Facebook App",e.prototype.shown=!0,e.prototype.button="Connect",e.prototype.buttonCancel=!0,e.prototype.small=!0,e.prototype.content=function(){var t;return this.external_credential=App.ExternalCredential.findByAttribute("name","facebook"),t=$(App.view("facebook/app_config")({external_credential:this.external_credential,callbackUrl:this.callbackUrl})),t.find(".js-select").on("click",function(t){return function(e){return t.selectAll(e)}}(this)),t},e.prototype.onClosed=function(){if(this.isChanged)return this.isChanged=!1,this.load()},e.prototype.onSubmit=function(t){return this.formDisable(t),this.ajax({id:"facebook_app_verify",type:"POST",url:this.apiPath+"/external_credentials/facebook/app_verify",data:JSON.stringify(this.formParams()),processData:!0,success:function(e){return function(n){return n.attributes?(e.external_credential||(e.external_credential=new App.ExternalCredential),e.external_credential.load({name:"facebook",credentials:e.formParams()}),void e.external_credential.save({done:function(){return e.isChanged=!0,e.close()},fail:function(){return e.el.find(".alert").removeClass("hidden").text("Unable to create entry.")}})):(e.formEnable(t),e.el.find(".alert").removeClass("hidden").text(n.error||"Unable to verify App."))}}(this)})},e}(App.ControllerModal),t=function(t){function e(){return this.onSubmit=i(this.onSubmit,this),this.onClosed=i(this.onClosed,this),e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.head="Facebook Account",e.prototype.shown=!0,e.prototype.buttonCancel=!0,e.prototype.content=function(){var t,e,n,i,s,r,o,a,l,c;if(this.channel.options.sync||(this.channel.options.sync={}),this.channel.options.sync.wall||(this.channel.options.sync.wall={}),this.channel.options.sync.pages||(this.channel.options.sync.pages={}),t=$(App.view("facebook/account_edit")({channel:this.channel})),e=function(t,e,n){var i;return i=App.UiElement.select.render({name:n+"::group_id",multiple:!1,limit:100,"null":!1,relation:"Group",nulloption:!0,value:t,"class":"form-control--small"}),e.html(i)},e(this.channel.options.sync.wall.group_id,t.find(".js-wall .js-groups"),"wall"),this.channel.options.pages)for(l=this.channel.options.pages,n=0,i=l.length;n<i;n++){s=l[n],r=!1,c=this.channel.options.sync.pages;for(a in c)o=c[a],s.id===a&&(r=!0,e(o.group_id,t.find(".js-groups[data-page-id="+s.id+"]"),"pages::"+s.id));r||e("",t.find(".js-groups[data-page-id="+s.id+"]"),"pages::"+s.id)}return t},e.prototype.onClosed=function(){if(this.isChanged)return this.isChanged=!1,this.load()},e.prototype.onSubmit=function(t){return this.formDisable(t),this.channel.options.sync=this.formParams(),this.ajax({id:"channel_facebook_update",type:"POST",url:this.apiPath+"/channels_facebook/"+this.channel.id,data:JSON.stringify(this.channel.attributes()),processData:!0,success:function(t){return function(){return t.isChanged=!0,t.close()}}(this),error:function(e){return function(n){var i;return i=JSON.parse(n.responseText),e.formEnable(t),e.el.find(".alert").removeClass("hidden").text(i.error||"Unable to save changes.")}}(this)})},e}(App.ControllerModal),App.Config.set("Facebook",{prio:5100,name:"Facebook",parent:"#channels",target:"#channels/facebook",controller:n,permission:["admin.channel_facebook"]},"NavBarAdmin")}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.ChannelForm=function(n){function i(){this.updateGroup=t(this.updateGroup,this),this.toggleFormSetting=t(this.toggleFormSetting,this),this.render=t(this.render,this),i.__super__.constructor.apply(this,arguments),App.Setting.fetchFull(this.render,{force:!1})}return e(i,n),i.prototype.requiredPermission="admin.channel_formular",i.prototype.header="Form",i.prototype.events={"change form.js-paramsDesigner":"updateParamsDesigner","keyup form.js-paramsDesigner":"updateParamsDesigner","change .js-formSetting input":"toggleFormSetting","change .js-paramsSetting select":"updateGroup"},i.prototype.elements={".js-code":"code",".js-paramsSetting":"paramsSetting",".js-formSetting input":"formSetting"},i.prototype.render=function(){var t,e,n,i;return i=App.Setting.get("form_ticket_create"),t=$(App.view("channel/form")({baseurl:window.location.origin,formSetting:i})),e=App.Setting.get("form_ticket_create_group_id"),n=App.UiElement.select.render({name:"group_id",multiple:!1,"null":!1,relation:"Group",nulloption:!1,value:e}),t.find(".js-groupSelector").html(n),this.html(t),this.code.each(function(t,e){return hljs.highlightBlock(e)}),this.updateParamsDesigner()},i.prototype.updateParamsDesigner=function(){var t,e,n,i,s;i=function(t){return t=t.replace("'","\\'").replace(/\</g,"&lt;").replace(/\>/g,"&gt;")},n=this.formParam(this.$(".js-paramsDesigner")),e="";for(t in n)s=n[t],_.isEmpty(s)||(""!==e&&(e+=",\n"),e+="true"===s||"false"===s?"    "+t+": "+s:"    "+t+": '"+i(s)+"'");return this.$(".js-modal-params").html(e),n.test=!0,n.modal?(this.$(".js-modal").removeClass("hide"),this.$(".js-inlineForm").addClass("hide"),this.$(".js-formInline").addClass("hide"),this.$(".js-formBtn").removeClass("hide"),this.$(".js-formBtn").ZammadForm(n),this.$(".js-formBtn").text("Feedback")):(this.$(".js-modal").addClass("hide"),this.$(".js-inlineForm").removeClass("hide"),this.$(".js-formBtn").addClass("hide"),this.$(".js-formInline").removeClass("hide"),this.$(".js-formInline").ZammadForm(n))},i.prototype.toggleFormSetting=function(){var t;return t=this.formSetting.prop("checked"),App.Setting.set("form_ticket_create",t)},i.prototype.updateGroup=function(){var t;return t=this.paramsSetting.find("[name=group_id]").val(),App.Setting.set("form_ticket_create_group_id",t)},i}(App.ControllerSubContent),App.Config.set("Form",{prio:2e3,name:"Form",parent:"#channels",target:"#channels/form",controller:App.ChannelForm,permission:["admin.formular"]},"NavBarAdmin")}.call(this),function(){var t,e,n,i=function(t,e){return function(){return t.apply(e,arguments)}},s=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;n=function(n){function r(){this.enable=i(this.enable,this),this.disable=i(this.disable,this),this["delete"]=i(this["delete"],this),this.edit=i(this.edit,this),this["new"]=i(this["new"],this),this.render=i(this.render,this),this.load=i(this.load,this),r.__super__.constructor.apply(this,arguments),this.load()}return s(r,n),r.prototype.requiredPermission="admin.channel_telegram",r.prototype.events={"click .js-new":"new","click .js-edit":"edit","click .js-delete":"delete","click .js-disable":"disable","click .js-enable":"enable"},r.prototype.load=function(){return this.startLoading(),this.ajax({id:"telegram_index",type:"GET",url:this.apiPath+"/channels_telegram",processData:!0,success:function(t){return function(e){return t.stopLoading(),App.Collection.loadAssets(e.assets),t.render(e)}}(this)})},r.prototype.render=function(t){var e,n,i,s,r,o,a,l;for(i=[],l=t.channel_ids,o=0,a=l.length;o<a;o++)n=l[o],e=App.Channel.find(n),e&&e.options&&(s="-",e.group_id&&(r=App.Group.find(e.group_id),s=r.displayName()),e.options.groupName=s),i.push(e);return this.html(App.view("telegram/index")({channels:i}))},r.prototype["new"]=function(e){return e.preventDefault(),new t({container:this.el.parents(".content"),load:this.load})},r.prototype.edit=function(t){var n,i;return t.preventDefault(),i=$(t.target).closest(".action").data("id"),n=App.Channel.find(i),new e({channel:n,container:this.el.parents(".content"),load:this.load})},r.prototype["delete"]=function(t){var e;return t.preventDefault(),e=$(t.target).closest(".action").data("id"),new App.ControllerConfirm({message:"Sure?",callback:function(t){return function(){return t.ajax({id:"telegram_delete",type:"DELETE",url:t.apiPath+"/channels_telegram",data:JSON.stringify({id:e}),processData:!0,success:function(){return t.load()}})}}(this),container:this.el.closest(".content")})},r.prototype.disable=function(t){var e;return t.preventDefault(),e=$(t.target).closest(".action").data("id"),this.ajax({id:"telegram_disable",type:"POST",url:this.apiPath+"/channels_telegram_disable",data:JSON.stringify({id:e}),processData:!0,success:function(t){return function(){return t.load()}}(this)})},r.prototype.enable=function(t){var e;return t.preventDefault(),e=$(t.target).closest(".action").data("id"),this.ajax({id:"telegram_enable",type:"POST",url:this.apiPath+"/channels_telegram_enable",data:JSON.stringify({id:e}),processData:!0,success:function(t){return function(){return t.load()}}(this)})},r}(App.ControllerSubContent),t=function(t){function e(){return this.onSubmit=i(this.onSubmit,this),this.onClosed=i(this.onClosed,this),e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.head="Add Telegram Bot",e.prototype.shown=!0,e.prototype.button="Add",e.prototype.buttonCancel=!0,e.prototype.small=!0,e.prototype.content=function(){var t,e;return t=$(App.view("telegram/bot_add")()),e=function(t){return App.UiElement.select.render({name:"group_id",multiple:!1,limit:100,"null":!1,relation:"Group",nulloption:!0,value:t,"class":"form-control--small"})},t.find(".js-select").on("click",function(t){return function(e){return t.selectAll(e)}}(this)),t.find(".js-messagesGroup").replaceWith(e(1)),t},e.prototype.onClosed=function(){if(this.isChanged)return this.isChanged=!1,this.load()},e.prototype.onSubmit=function(t){return this.formDisable(t),this.ajax({id:"telegram_app_verify",type:"POST",url:this.apiPath+"/channels_telegram",data:JSON.stringify(this.formParams()),processData:!0,success:function(t){return function(){return t.isChanged=!0,t.close()}}(this),error:function(e){return function(n){var i;return i=JSON.parse(n.responseText),e.formEnable(t),e.el.find(".alert").removeClass("hidden").text(i.error||"Unable to save Bot.")}}(this)})},e}(App.ControllerModal),e=function(t){function e(){return this.onSubmit=i(this.onSubmit,this),this.onClosed=i(this.onClosed,this),e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.head="Telegram Account",e.prototype.shown=!0,e.prototype.buttonCancel=!0,e.prototype.content=function(){var t,e;return t=$(App.view("telegram/bot_edit")({channel:this.channel})),e=function(t){return App.UiElement.select.render({name:"group_id",multiple:!1,limit:100,"null":!1,relation:"Group",nulloption:!0,value:t,"class":"form-control--small"})},t.find(".js-messagesGroup").replaceWith(e(this.channel.group_id)),t},e.prototype.onClosed=function(){if(this.isChanged)return this.isChanged=!1,this.load()},e.prototype.onSubmit=function(t){var e;return this.formDisable(t),e=this.formParams(),this.channel.options=e,this.ajax({id:"channel_telegram_update",type:"PUT",url:this.apiPath+"/channels_telegram/"+this.channel.id,data:JSON.stringify(this.formParams()),processData:!0,success:function(t){return function(){return t.isChanged=!0,t.close()}}(this),error:function(e){return function(n){var i;return i=JSON.parse(n.responseText),e.formEnable(t),e.el.find(".alert").removeClass("hidden").text(i.error||"Unable to save changes.")}}(this)})},e}(App.ControllerModal),App.Config.set("Telegram",{prio:5100,name:"Telegram",parent:"#channels",target:"#channels/telegram",controller:n,permission:["admin.channel_telegram"]},"NavBarAdmin")}.call(this),function(){var t,e,n,i=function(t,e){return function(){return t.apply(e,arguments)}},s=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;n=function(n){function r(){this.enable=i(this.enable,this),this.disable=i(this.disable,this),this["delete"]=i(this["delete"],this),this.edit=i(this.edit,this),this.configApp=i(this.configApp,this),this.show=i(this.show,this),this.render=i(this.render,this),this.load=i(this.load,this),r.__super__.constructor.apply(this,arguments),this.load()}return s(r,n),r.prototype.requiredPermission="admin.channel_twitter",r.prototype.events={"click .js-new":"new","click .js-edit":"edit","click .js-delete":"delete","click .js-configApp":"configApp","click .js-disable":"disable","click .js-enable":"enable"},r.prototype.load=function(){return this.startLoading(),this.ajax({id:"twitter_index",type:"GET",url:this.apiPath+"/channels_twitter",processData:!0,success:function(t){return function(e){return t.stopLoading(),App.Collection.loadAssets(e.assets),t.callbackUrl=e.callback_url,t.render(e)}}(this)})},r.prototype.render=function(t){var e,n,i,s,r,o,a,l,c,u,p,h;if(!App.ExternalCredential.findByAttribute("name","twitter"))return void this.html(App.view("twitter/index")());for(i=[],u=t.channel_ids,o=0,l=u.length;o<l;o++){if(n=u[o],(e=App.Channel.find(n))&&e.options&&e.options.sync&&e.options.sync.search)for(p=e.options.sync.search,a=0,c=p.length;a<c;a++)h=p[a],s="-",h.group_id&&(r=App.Group.find(h.group_id),s=r.displayName()),h.groupName=s;e&&e.options&&e.options.sync&&e.options.sync.mentions&&(s="-",e.options.sync.mentions.group_id&&(r=App.Group.find(e.options.sync.mentions.group_id),s=r.displayName()),e.options.sync.mentions.groupName=s),e&&e.options&&e.options.sync&&e.options.sync.direct_messages&&(s="-",e.options.sync.direct_messages.group_id&&(r=App.Group.find(e.options.sync.direct_messages.group_id),s=r.displayName()),e.options.sync.direct_messages.groupName=s),i.push(e)}return this.html(App.view("twitter/list")({channels:i})),this.channel_id?(this.edit(void 0,this.channel_id),this.channel_id=void 0):void 0},r.prototype.show=function(t){var e,n,i;n=[];for(e in t)i=t[e],"el"!==e&&"shown"!==e&&"match"!==e?n.push(this[e]=i):n.push(void 0);return n},r.prototype.configApp=function(){return new e({container:this.el.parents(".content"),callbackUrl:this.callbackUrl,load:this.load})},r.prototype["new"]=function(){return window.location.href=this.apiPath+"/external_credentials/twitter/link_account"},r.prototype.edit=function(e,n){var i;return e&&(e.preventDefault(),n=$(e.target).closest(".action").data("id")),i=App.Channel.find(n),i?new t({channel:i,container:this.el.parents(".content"),load:this.load}):void this.navigate("#channels/twitter")},r.prototype["delete"]=function(t){var e;return t.preventDefault(),e=$(t.target).closest(".action").data("id"),new App.ControllerConfirm({message:"Sure?",callback:function(t){return function(){return t.ajax({id:"twitter_delete",type:"DELETE",url:t.apiPath+"/channels_twitter",data:JSON.stringify({id:e}),processData:!0,success:function(){return t.load()}})}}(this),container:this.el.closest(".content")})},r.prototype.disable=function(t){var e;return t.preventDefault(),e=$(t.target).closest(".action").data("id"),this.ajax({id:"twitter_disable",type:"POST",url:this.apiPath+"/channels_twitter_disable",data:JSON.stringify({id:e}),processData:!0,success:function(t){return function(){return t.load()}}(this)})},r.prototype.enable=function(t){var e;return t.preventDefault(),e=$(t.target).closest(".action").data("id"),this.ajax({id:"twitter_enable",type:"POST",url:this.apiPath+"/channels_twitter_enable",data:JSON.stringify({id:e}),processData:!0,success:function(t){return function(){return t.load()}}(this)})},r}(App.ControllerSubContent),e=function(t){function e(){return this.onSubmit=i(this.onSubmit,this),this.onClosed=i(this.onClosed,this),e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.head="Connect Twitter App",e.prototype.shown=!0,e.prototype.button="Connect",e.prototype.buttonCancel=!0,e.prototype.small=!0,e.prototype.content=function(){var t;return this.external_credential=App.ExternalCredential.findByAttribute("name","twitter"),t=$(App.view("twitter/app_config")({external_credential:this.external_credential,callbackUrl:this.callbackUrl})),t.find(".js-select").on("click",function(t){return function(e){return t.selectAll(e)}}(this)),t},e.prototype.onClosed=function(){if(this.isChanged)return this.isChanged=!1,this.load()},e.prototype.onSubmit=function(t){return this.formDisable(t),this.ajax({id:"twitter_app_verify",type:"POST",url:this.apiPath+"/external_credentials/twitter/app_verify",data:JSON.stringify(this.formParams()),processData:!0,success:function(e){return function(n){return n.attributes?(e.external_credential||(e.external_credential=new App.ExternalCredential),e.external_credential.load({name:"twitter",credentials:e.formParams()}),void e.external_credential.save({done:function(){return e.isChanged=!0,e.close()},fail:function(){return e.el.find(".alert").removeClass("hidden").text("Unable to create entry.")}})):(e.formEnable(t),e.el.find(".alert").removeClass("hidden").text(n.error||"Unable to verify App."))}}(this)})},e}(App.ControllerModal),t=function(t){function e(){return this.onSubmit=i(this.onSubmit,this),this.onClosed=i(this.onClosed,this),this.getParams=i(this.getParams,this),e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.head="Twitter Account",e.prototype.shown=!0,e.prototype.buttonCancel=!0,e.prototype.content=function(){var t,e,n,i,s;return e=$(App.view("twitter/account_edit")({channel:this.channel})),n=function(t,e){return App.UiElement.select.render({name:e+"::group_id",multiple:!1,limit:100,"null":!1,relation:"Group",nulloption:!0,value:t,"class":"form-control--small"})},t=function(t){return function(){var n;return n=t.getParams(),t.searchTerms=n.search||[],t.searchTerms.push({term:"",group_id:""}),s(),e.find('.js-searchTermList [name="search::term"]').last().focus()}}(this),i=function(t){return function(e){var n,i;return n=$(e.currentTarget).attr("data-index"),i=t.getParams(),t.searchTerms=i.search||[],t.searchTerms.splice(n,1),s()}}(this),s=function(t){return function(){var i,s,r,o,a,l,c;if(t.searchTerms){for(e.find(".js-searchTermList").empty(),a=t.searchTerms,l=[],i=r=0,o=a.length;r<o;i=++r)s=a[i],e.find(".js-searchTermList").append(App.view("twitter/search_term")({term:s.term,index:i})),c=n(s.group_id,"search"),l.push(e.find('.js-termGroup[data-index="'+i+'"]').replaceWith(c));return l}}}(this),this.channel.options&&this.channel.options.sync&&this.channel.options.sync.search?this.searchTerms=this.channel.options.sync.search:this.searchTerms=[],s(),e.find(".js-searchTermAdd").click(t),e.find(".js-searchTermList").on("click",".js-searchTermRemove",i),e.find(".js-mentionsGroup").replaceWith(n(this.channel.options.sync.mentions.group_id,"mentions")),e.find(".js-directMessagesGroup").replaceWith(n(this.channel.options.sync.direct_messages.group_id,"direct_messages")),e},e.prototype.getParams=function(){var t,e,n,i,s,r,o;if(i=this.formParams(),o=[],s=0,i.search)if(_.isArray(i.search.term))for(r=i.search.term,e=0,n=r.length;e<n;e++)r[e],t={term:i.search.term[s],group_id:i.search.group_id[s]},o.push(t),s+=1;else o.push(i.search);return i.search=o,i.track_retweets?i.track_retweets=!0:i.track_retweets=!1,i},e.prototype.onClosed=function(){if(this.isChanged)return this.isChanged=!1,this.load()},e.prototype.onSubmit=function(t){return this.formDisable(t),this.channel.options.sync=this.getParams(),this.ajax({id:"channel_twitter_update",type:"POST",url:this.apiPath+"/channels_twitter/"+this.channel.id,data:JSON.stringify(this.channel.attributes()),processData:!0,success:function(t){return function(){return t.isChanged=!0,t.close()}}(this),error:function(e){return function(n){var i;return i=JSON.parse(n.responseText),e.formEnable(t),e.el.find(".alert").removeClass("hidden").text(i.error||"Unable to save changes.")}}(this)})},e}(App.ControllerModal),App.Config.set("Twitter",{prio:5e3,name:"Twitter",parent:"#channels",target:"#channels/twitter",controller:n,permission:["admin.channel_twitter"]},"NavBarAdmin")}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.ChannelWeb=function(e){function n(){n.__super__.constructor.apply(this,arguments),this.title("Web",!0),this.tabs=[{name:"Settings",target:"w-setting",controller:App.SettingsArea,params:{area:"CustomerWeb::Base"}}],this.render()}return t(n,e),n.prototype.requiredPermission="admin.channel_web",n.prototype.header="Web",n}(App.ControllerTabs),App.Config.set("Web",{prio:1e3,name:"Web",parent:"#channels",target:"#channels/web",controller:App.ChannelWeb,permission:["admin.channel_web"]},"NavBarAdmin")}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.DashboardActivityStream=function(n){function i(){this.onRenderEnd=t(this.onRenderEnd,this),this.itemsAll=t(this.itemsAll,this),this.itemGet=t(this.itemGet,this),this.load=t(this.load,this),this.fetch=t(this.fetch,this),i.__super__.constructor.apply(this,arguments),this.fetch(),this.bind("activity_stream_rebuild",this.load)}return e(i,n),i.prototype.model=!1,i.prototype.template="dashboard/activity_stream_item",i.prototype.uniqKey="id",i.prototype.observe={updated_at:!0},i.prototype.prepareForObjectListItemSupport=!0,i.prototype.items=[],i.prototype.insertPosition="before",i.prototype.fetch=function(){var t;return t=App.SessionStorage.get("activity_stream"),t?this.load(t):this.ajax({id:"dashoard_activity_stream",type:"GET",url:this.apiPath+"/activity_stream?full=true",data:{limit:this.limit||8},processData:!0,success:function(t){return function(e){return t.load(e)}}(this)})},i.prototype.load=function(t){return App.SessionStorage.set("activity_stream",t),App.ActivityStream.refresh([],{clear:!0}),App.Collection.loadAssets(t.assets),this.items=App.ActivityStream.search({sortBy:"created_at",order:"DESC"}),this.collectionSync(this.items)},i.prototype.itemGet=function(t){var e,n,i,s;for(s=this.items,e=0,i=s.length;e<i;e++)if(n=s[e],t===n.id)return n},i.prototype.itemDestroy=function(){},i.prototype.itemsAll=function(){return this.items||[]},i.prototype.onRenderEnd=function(){if(!_.isEmpty(this.items))return this.el.closest(".sidebar").find(".activity-description").addClass("hidden")},i.prototype.onRenderItemEnd=function(t,e){return new App.WidgetAvatar({el:e.find(".js-avatar"),object_id:t.created_by_id,size:40})},i}(App.CollectionController)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.DashboardFirstSteps=function(n){function i(){this.testTicket=t(this.testTicket,this),this.testTicketLoading=t(this.testTicketLoading,this),this.scrollIntoView=t(this.scrollIntoView,this),this.load=t(this.load,this),i.__super__.constructor.apply(this,arguments),this.interval(this.load,2e4)}return e(i,n),i.prototype.events={"click a":"scrollIntoView","click .js-testTicket":"testTicket","click .js-inviteAgent":"inviteAgent","click .js-inviteCustomer":"inviteCustomer"},i.prototype.load=function(){if(!this.lastData||this.el.is(":visible"))return this.ajax({type:"GET",url:this.apiPath+"/first_steps",success:function(t){return function(e){if(!_.isEqual(t.lastData,e))return t.lastData=e,t.render(e)}}(this)})},i.prototype.render=function(t){return this.html(App.view("dashboard/first_steps")({data:t}))},i.prototype.scrollIntoView=function(t){var e,n;if((n=$(t.currentTarget).attr("href"))&&"#"!==n)return e=function(t){return function(){var e;return e=$("[href='"+n+"']"),t.scrollToIfNeeded(e)}}(this),this.delay(e,40)},i.prototype.inviteAgent=function(t){return t.preventDefault(),new App.InviteUser({head:"Invite Colleagues",screen:"invite_agent"})},i.prototype.inviteCustomer=function(t){return t.preventDefault(),new App.InviteUser({head:"Invite Customer",screen:"invite_customer",role:"Customer"})},i.prototype.testTicketLoading=function(){var t,e;return e=App.view("dashboard/first_steps_test_ticket_loading")(),t=function(t){return function(){return t.ajax({id:"test_ticket",type:"POST",url:t.apiPath+"/first_steps/test_ticket",processData:!0,success:function(e){var n,i,s;return App.Collection.loadAssets(e.assets),s=App.Ticket.fullLocal(e.ticket_id),i=App.Overview.fullLocal(e.overview_id),n=t.testTicketFinish({overviewName:App.i18n.translatePlain(i.name),overviewUrl:i.uiUrl(),ticketUrl:s.uiUrl(),ticketNumber:s.number}),$(".modal .modal-body").html(n)}})}}(this),this.delay(t,2800),e},i.prototype.testTicketFinish=function(t){return App.view("dashboard/first_steps_test_ticket_finish")(t)},i.prototype.testTicket=function(t){var e;return t.preventDefault(),e=new App.ControllerModal({head:"Test Ticket",content:this.testTicketLoading,shown:!0,buttonSubmit:!1,buttonCancel:!1,small:!0,closeOnAnyClick:!0,onSubmit:function(){return e.close()}})},i}(App.Controller)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.FirstStepsClues=function(n){function i(e){this.hideWindow=t(this.hideWindow,this),this.showWindow=t(this.showWindow,this),
this.showClue=t(this.showClue,this),this.render=t(this.render,this),this.close=t(this.close,this),this.previous=t(this.previous,this),this.next=t(this.next,this),$("#app").append('<div class="js-modal--clue"></div>'),e.el=$("#app .js-modal--clue"),i.__super__.constructor.call(this,e),this.position=0,this.render(),this.bind("ui:rerender",function(t){return function(){return t.render(),"clues"}}(this))}return e(i,n),i.prototype.clues=[{container:".js-dashboardMenuItem",headline:"Dashboard",text:"Here you see a quick overview of your and other agents' performance.",actions:["hover"]},{container:".search-holder",headline:"Search",text:'Here you can search for tickets, customers and organizations. Use the wildcard \xa7*\xa7 to find everything. E. g. \xa7smi*\xa7 or \xa7rosent*l\xa7. You also can use ||double quotes|| for searching phrases \xa7"some phrase"\xa7.',actions:[]},{container:".user-menu",headline:"Create",text:"Here you can create new tickets. Also if you have the permissions you can create new customers and organizations.",actions:["click .add .js-action","hover .add"]},{container:".user-menu",headline:"Personal Settings",text:"Here you can sign out, change the frontend language and see your last viewed items.",actions:["click .user .js-action","hover .user"]},{container:".js-overviewsMenuItem",headline:"Overviews",text:"Here you find your ticket overviews for open, assigned and escalated tickets.",actions:["hover"]}],i.prototype.elements={".js-positionOrigin":"modalWindow",".js-backdrop":"backdrop"},i.prototype.events={click:"stopPropagation","click .js-next":"next","click .js-previous":"previous","click .js-close":"close"},i.prototype.stopPropagation=function(t){return t.stopPropagation()},i.prototype.next=function(t){return t.stopPropagation(),this.navigate(1)},i.prototype.previous=function(t){return t.stopPropagation(),this.navigate(-1)},i.prototype.close=function(){return this.cleanUp(),this.options.onComplete(),this.remove()},i.prototype.remove=function(){return this.el.remove()},i.prototype.navigate=function(t){return this.cleanUp(function(e){return function(){return e.position+=t,e.position<e.clues.length?e.showClue():(e.options.onComplete(),e.remove())}}(this))},i.prototype.cleanUp=function(t){return this.hideWindow(function(e){return function(){var n,i;if(n=e.clues[e.position],i=$("#app "+n.container),i.removeClass("selected-clue"),n.actions&&e.perform(n.actions,i,"cleanup"),t)return t()}}(this))},i.prototype.render=function(){return this.el.addClass("modal modal--clue"),this.html(App.view("dashboard/first_steps_clues")),this.backdrop.velocity({properties:{opacity:[1,0]},options:{duration:300,complete:this.showClue}})},i.prototype.showClue=function(){var t,e,n,i;return n=this.clues[this.position],i=$("#app "+n.container),i.addClass("selected-clue"),n.actions&&this.perform(n.actions,i,"show"),t=this.getVisibleBoundingBox(i.get(0)),e={x:t.left+t.width/2,y:t.top+t.height/2},this.modalWindow.html(App.view("dashboard/first_steps_clues_content")({headline:n.headline,text:n.text,position:this.position,max:this.clues.length})),this.placeWindow(t),this.backdrop.velocity({properties:{translateX:e.x,translateY:e.y,translateZ:0},options:{duration:300,complete:this.showWindow}})},i.prototype.showWindow=function(){return this.modalWindow.velocity({properties:{scale:[1,.2],opacity:[1,0]},options:{duration:300,easing:[.34,1.61,.7,1]}})},i.prototype.hideWindow=function(t){return this.modalWindow.velocity({properties:{scale:[.2,1],opacity:0},options:{duration:200,complete:t}})},i.prototype.placeWindow=function(t){var e,n,i,s,r,o,a,l,c;return $.Velocity.hook(this.modalWindow,"scale",1),s=this.modalWindow.get(0).getBoundingClientRect(),a="",e=0,l=0,i=$(window).width(),n=$(window).height(),t.height>t.width?(t.right+s.width<=i?(e=t.right,a="right"):(e=t.left-s.width,a="left"),a&&(l=t.top+t.height/2-s.height/2)):(t.height<=t.width||!a)&&(t.top-s.height>=0?(l=t.top-s.height,a="above"):(l=t.bottom,a="below"),a&&(e=t.left+t.width/2-s.width/2)),e<0?(r=s.width/2+e,e=0):e+s.width>i&&(r=s.width/2+i-(e+s.width),e=i-s.width),l<0?(r=s.height/2+l,l=0):l+s.height>n&&(r=s.height/2+n-(l+s.height),l=n-s.height),c=this.getTransformOrigin(s,a),r&&(o="above"===a||"below"===a?"left":"top",this.modalWindow.find(".js-arrow").css(o,r),"above"===a||"below"===a?c.x=r:c.y=r),this.modalWindow.attr("data-position",a).css({left:e,top:l,transformOrigin:c.x+"px "+c.y+"px"})},i.prototype.getTransformOrigin=function(t,e){var n;return n={above:{x:t.width/2,y:t.height},below:{x:t.width/2,y:0},left:{x:t.width+this.transformOriginPadding,y:t.height/2},right:{x:-this.transformOriginPadding,y:t.height/2}},n[e]},i.prototype.getVisibleBoundingBox=function(t){var e,n,i,s,r,o;for(i=t.querySelectorAll("*"),e=t.getBoundingClientRect(),s={left:e.left,right:e.right,top:e.top,bottom:e.bottom},r=0,o=i.length;r<o;r++)n=i[r],!1!==getComputedStyle(n).position&&(e=n.getBoundingClientRect(),0!==e.width&&0!==e.height&&(e.left<s.left&&(s.left=e.left),e.top<s.top&&(s.top=e.top),e.right>s.right&&(s.right=e.right),e.bottom>s.bottom&&(s.bottom=e.bottom)));return s.width=s.right-s.left,s.height=s.bottom-s.top,s},i.prototype.perform=function(t,e,n){var i,s,r,o,a,l;for(a=[],r=0,o=t.length;r<o;r++)switch(i=t[r],i.indexOf(" ")<0?(s=i,l=e):(s=i.substr(0,i.indexOf(" ")),l=e.find(i.substr(i.indexOf(" ")+1))),s){case"click":a.push(l.trigger("click"));break;case"hover":$("#app .navigation .is-active").removeClass("is-active"),"show"===n?a.push(l.addClass("is-hovered")):a.push(l.removeClass("is-hovered"));break;default:a.push(void 0)}return a},i}(App.Controller)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.DashboardStats=function(n){function i(){this.renderWidgetClockFace=t(this.renderWidgetClockFace,this),this.load=t(this.load,this),i.__super__.constructor.apply(this,arguments),this.load(),this.bind("dashboard_stats_rebuild",this.load)}return e(i,n),i.prototype.load=function(){var t;return t=App.StatsStore.first(),t?this.render(t.data):this.render()},i.prototype.render=function(t){if(null==t&&(t={}),t.StatsTicketWaitingTime||(t.StatsTicketWaitingTime={handling_time:0,average:0,state:"supergood",average_per_agent:0}),t.StatsTicketEscalation||(t.StatsTicketEscalation={state:"supergood",own:0,total:0}),t.StatsTicketChannelDistribution||(t.StatsTicketChannelDistribution={channels:{1:{inbound:0,outbound:0,inbound_in_percent:0,outbound_in_percent:0},2:{inbound:0,outbound:0,inbound_in_percent:0,outbound_in_percent:0},3:{inbound:0,outbound:0,inbound_in_percent:0,outbound_in_percent:0}}}),t.StatsTicketLoadMeasure||(t.StatsTicketLoadMeasure={state:"supergood",percent:0,own:0,total:0,average_per_agent:0}),t.StatsTicketInProcess||(t.StatsTicketInProcess={state:"supergood",percent:0,average_per_agent:0}),t.StatsTicketReopen||(t.StatsTicketReopen={state:"supergood",percent:0,average_per_agent:0}),this.html(App.view("dashboard/stats")(t)),t.StatsTicketWaitingTime)return this.renderWidgetClockFace(t.StatsTicketWaitingTime.handling_time,t.StatsTicketWaitingTime.state,t.StatsTicketWaitingTime.percent)},i.prototype.renderWidgetClockFace=function(t,e,n){var i,s,r,o,a,l,c,u;r=this.el.find("canvas"),o=r.get(0).getContext("2d"),c=26,this.el.find(".time.stat-widget .stat-amount").text(t),r.attr("width",2*c),r.attr("height",2*c),l={},l.supergood="#38AE6A",l.good="#A9AC41",l.ok="#FAAB00",l.bad="#F6820B",l.superbad="#F35910";for(a in l)if(u=l[a],e===a){s=u;break}return 0!==t&&(o.globalAlpha=.3),o.fillStyle=s,o.beginPath(),o.arc(c,c,c,0,2*Math.PI,!0),o.closePath(),o.fill(),o.globalAlpha=1,o.beginPath(),o.moveTo(c,c),i=2*Math.PI*n,o.arc(c,c,c,-Math.PI/2,i-Math.PI/2,!1),o.lineTo(c,c),o.closePath(),o.fill()},i}(App.Controller)}.call(this),function(){App.Config.set("History",[]),App.Config.set("User",{prio:1e3,parent:"",callback:function(){var t;return t={},t.name=App.Session.get("login"),t},target:"#current_user","class":"user"},"NavBarRight"),App.Config.set("Admin",{prio:9e3,parent:"",name:"Admin",translate:!0,target:"#manage",icon:"cog",permission:["admin.*"]},"NavBarRight"),App.Config.set("New",{prio:2e4,parent:"",name:"New",translate:!0,target:"#new","class":"add",icon:"plus"},"NavBarRight"),App.Config.set("Misc",{prio:9e4,parent:"",name:"Tools",translate:!0,target:"#tools",child:!0,"class":"tools"},"NavBar")}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.ControllerIntegrationBase=function(n){function i(){this.render=t(this.render,this),this["switch"]=t(this["switch"],this),i.__super__.constructor.apply(this,arguments),this.title(this.featureName,!0),this.initalRender=!0,App.Setting.fetchFull(this.render,{force:!1})}return e(i,n),i.prototype.events={"change .js-switch input":"switch"},i.prototype.featureIntegration="tbd_integration",i.prototype.featureName="Tbd",i.prototype["switch"]=function(){var t;return t=this.$(".js-switch input").prop("checked"),App.Setting.set(this.featureIntegration,t)},i.prototype.render=function(){if(this.initalRender)return this.html(App.view("integration/base")({header:this.featureName,description:this.description,feature:this.featureIntegration,featureEnabled:App.Setting.get(this.featureIntegration)})),this.initalRender=!1},i}(App.Controller)}.call(this),function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;t=function(t){function e(){return this.render=n(this.render,this),e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.featureIntegration="check_mk_integration",e.prototype.featureName="Check_MK",e.prototype.featureConfig="check_mk_config",e.prototype.description=[["This service receives http requests or emails from %s and creates tickets with host and service.","Check_MK"],["If the host and service is recovered again, the ticket will be closed automatically."]],e.prototype.render=function(){return e.__super__.render.apply(this,arguments),new App.SettingsForm({area:"Integration::CheckMK",el:this.$(".js-form")}),new App.ScriptSnipped({el:this.$(".js-scriptSnipped"),facility:"check_mk",style:"bash",content:'#!/bin/bash\n\ncurl -X POST -F "event_id=$NOTIFY_SERVICEPROBLEMID" -F "host=$NOTIFY_HOSTNAME" -F "service=$NOTIFY_SERVICEDESC" -F "state=$NOTIFY_SERVICESTATE" -F "text=$NOTIFY_SERVICEOUTPUT" '+App.Config.get("http_type")+"://"+App.Config.get("fqdn")+"/api/v1/integration/check_mk/"+App.Setting.get("check_mk_token"),description:[['To enable %s for sending http requests to %s, you need create a own "notification rule" in %s.',"Check_MK","Zammad","Check_MK"],["Configurable in the admin interface of %s.","Check_MK"],["You can use the following script to post the data to %s.","Zammad"]]}),new App.HttpLog({el:this.$(".js-log"),facility:"check_mk"})},e}(App.ControllerIntegrationBase),e=function(){function t(){}return t.current=function(){return App.Setting.get("check_mk_integration")},t}(),App.Config.set("IntegrationCheckMk",{name:"Check_MK",target:"#system/integration/check_mk",description:"An open source monitoring tool.",controller:t,state:e,permission:["admin.integration.check_mk"]},"NavBarIntegrations")}.call(this),function(){var t,e,n,i=function(t,e){return function(){return t.apply(e,arguments)}},s=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;e=function(e){function n(){return this.render=i(this.render,this),n.__super__.constructor.apply(this,arguments)}return s(n,e),n.prototype.featureIntegration="clearbit_integration",n.prototype.featureName="Clearbit",n.prototype.featureConfig="clearbit_config",n.prototype.description=[["Automatically enrich your customers and organizations with fresh, up-to-date intel. Map data directly to object fields."]],n.prototype.render=function(){return n.__super__.render.apply(this,arguments),new t({el:this.$(".js-form")}),new App.HttpLog({el:this.$(".js-log"),facility:"clearbit"})},n}(App.ControllerIntegrationBase),t=function(t){function e(){this.removeRow=i(this.removeRow,this),this.addOrganizationSync=i(this.addOrganizationSync,this),this.addUserSync=i(this.addUserSync,this),this.update=i(this.update,this),this.updateCurrentConfig=i(this.updateCurrentConfig,this),this.render=i(this.render,this),e.__super__.constructor.apply(this,arguments),this.render()}return s(e,t),e.prototype.events={"submit form":"update","click .js-userSync .js-add":"addUserSync","click .js-organizationSync .js-add":"addOrganizationSync","click .js-userSync .js-remove":"removeRow","click .js-organizationSync .js-remove":"removeRow"},e.prototype.currentConfig=function(){var t;return t=clone(App.Setting.get("clearbit_config")),t||(t={}),void 0===t.organization_autocreate&&(t.organization_autocreate=!0),void 0===t.organization_shared&&(t.organization_shared=!1),t.user_sync||(t.user_sync={"person.name.givenName":"user.firstname","person.name.familyName":"user.lastname","person.email":"user.email","person.bio":"user.note","company.url":"user.web","person.site":"user.web","company.location":"user.address","person.location":"user.address"}),t.organization_sync||(t.organization_sync={"company.legalName":"organization.name","company.name":"organization.name","company.description":"organization.note"}),t},e.prototype.setConfig=function(t){return App.Setting.set("clearbit_config",t,{notify:!0})},e.prototype.render=function(){var t,e,n,i,s;for(this.config||(this.config=this.currentConfig()),s=[{name:"api_key",display:"API Key",tag:"input",type:"text",limit:100,"null":!1,placeholder:"...",note:"Your api key."},{name:"organization_autocreate",display:"Auto create",tag:"boolean",type:"boolean","null":!1,note:"Create organizations automatically if record has one."},{name:"organization_shared",display:"Shared",tag:"boolean",type:"boolean","null":!1,note:"New organizations are shared."}],this.html(App.view("integration/clearbit")({config:this.config,settings:s})),n=[],t=0,e=s.length;t<e;t++)i=s[t],i.display="",n.push(new App.ControllerForm({el:this.$("[data-name="+i.name+"]"),model:{configure_attributes:[i]},params:this.config}));return n},e.prototype.updateCurrentConfig=function(){var t,e,n;return e=this.config,t=this.cleanupInput,n=this.formParam(this.$("form")),e.api_key=n.api_key,e.organization_autocreate=n.organization_autocreate,e.organization_shared=n.organization_shared,e.user_sync={},this.$(".js-userSync .js-row").each(function(){var n,i,s;return i=$(this),s=t(i.find('input[name="source"]').val()),n=t(i.find('input[name="destination"]').val()),e.user_sync[s]=n}),e.organization_sync={},this.$(".js-organizationSync .js-row").each(function(){var n,i,s;return i=$(this),s=t(i.find('input[name="source"]').val()),n=t(i.find('input[name="destination"]').val()),e.organization_sync[s]=n}),this.config=e},e.prototype.update=function(t){return t.preventDefault(),this.updateCurrentConfig(),this.setConfig(this.config)},e.prototype.cleanupInput=function(t){return t?t.replace(/\s/g,"").trim():t},e.prototype.addUserSync=function(t){var e,n,i;if(t.preventDefault(),this.updateCurrentConfig(),n=$(t.currentTarget).closest("tr"),i=this.cleanupInput(n.find('input[name="source"]').val()),e=this.cleanupInput(n.find('input[name="destination"]').val()),!_.isEmpty(i)&&!_.isEmpty(e))return this.config.user_sync[i]=e,this.render()},e.prototype.addOrganizationSync=function(t){var e,n,i;if(t.preventDefault(),this.updateCurrentConfig(),n=$(t.currentTarget).closest("tr"),i=this.cleanupInput(n.find('input[name="source"]').val()),e=this.cleanupInput(n.find('input[name="destination"]').val()),!_.isEmpty(i)&&!_.isEmpty(e))return this.config.organization_sync[i]=e,this.render()},e.prototype.removeRow=function(t){var e;return t.preventDefault(),this.updateCurrentConfig(),e=$(t.currentTarget).closest("tr"),e.remove(),this.updateCurrentConfig()},e}(App.Controller),n=function(){function t(){}return t.current=function(){return App.Setting.get("clearbit_integration")},t}(),App.Config.set("IntegrationClearbit",{name:"Clearbit",target:"#system/integration/clearbit",description:"A powerfull service to get more information about your customers.",controller:e,state:n,permission:["admin.integration.clearbit"]},"NavBarIntegrations")}.call(this),function(){var t,e,n,i=function(t,e){return function(){return t.apply(e,arguments)}},s=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;e=function(e){function n(){return this.render=i(this.render,this),n.__super__.constructor.apply(this,arguments)}return s(n,e),n.prototype.featureIntegration="cti_integration",n.prototype.featureName="CTI (generic)",n.prototype.featureConfig="cti_config",n.prototype.description=[["This service shows you contacts of incoming calls and a caller list in realtime."],["Also caller id of outbound calls can be changed."]],n.prototype.events={"click .js-select":"selectAll","change .js-switch input":"switch"},n.prototype.render=function(){return n.__super__.render.apply(this,arguments),new t({el:this.$(".js-form")}),new App.HttpLog({el:this.$(".js-log"),facility:"cti"})},n}(App.ControllerIntegrationBase),t=function(t){function e(){this.removeOutboundRouting=i(this.removeOutboundRouting,this),this.removeInboundBlockCallerId=i(this.removeInboundBlockCallerId,this),this.addOutboundRouting=i(this.addOutboundRouting,this),this.addInboundBlockCallerId=i(this.addInboundBlockCallerId,this),this.update=i(this.update,this),this.updateCurrentConfig=i(this.updateCurrentConfig,this),this.render=i(this.render,this),e.__super__.constructor.apply(this,arguments),this.render()}return s(e,t),e.prototype.events={"submit form":"update","click .js-inboundBlockCallerId .js-add":"addInboundBlockCallerId","click .js-outboundRouting .js-add":"addOutboundRouting","click .js-inboundBlockCallerId .js-remove":"removeInboundBlockCallerId","click .js-outboundRouting .js-remove":"removeOutboundRouting"},e.prototype.currentConfig=function(){var t;return t=App.Setting.get("cti_config"),t.outbound||(t.outbound={}),t.outbound.routing_table||(t.outbound.routing_table=[]),t.inbound||(t.inbound={}),t.inbound.block_caller_ids||(t.inbound.block_caller_ids=[]),t},e.prototype.setConfig=function(t){return App.Setting.set("cti_config",t,{notify:!0})},e.prototype.render=function(){return this.config=this.currentConfig(),this.html(App.view("integration/cti")({config:this.config,cti_token:App.Setting.get("cti_token")}))},e.prototype.updateCurrentConfig=function(){var t,e,n;return e=this.config,t=this.cleanupInput,n=this.$("input[name=default_caller_id]").val(),e.outbound.default_caller_id=t(n),e.outbound.routing_table=[],this.$(".js-outboundRouting .js-row").each(function(){var n,i,s;return i=t($(this).find('input[name="dest"]').val()),n=t($(this).find('input[name="caller_id"]').val()),s=$(this).find('input[name="note"]').val(),e.outbound.routing_table.push({dest:i,caller_id:n,note:s})}),e.inbound.block_caller_ids=[],this.$(".js-inboundBlockCallerId .js-row").each(function(){var n,i;return n=$(this).find('input[name="caller_id"]').val(),i=$(this).find('input[name="note"]').val(),e.inbound.block_caller_ids.push({caller_id:t(n),note:i})}),this.config=e},e.prototype.update=function(t){return t.preventDefault(),this.updateCurrentConfig(),this.setConfig(this.config)},e.prototype.cleanupInput=function(t){return t?t.replace(/\s/g,"").trim():t},e.prototype.addInboundBlockCallerId=function(t){var e,n,i;if(t.preventDefault(),this.updateCurrentConfig(),n=$(t.currentTarget).closest("tr"),e=n.find('input[name="caller_id"]').val(),i=n.find('input[name="note"]').val(),!_.isEmpty(e)&&!_.isEmpty(i))return this.config.inbound.block_caller_ids.push({caller_id:this.cleanupInput(e),note:i}),this.render()},e.prototype.addOutboundRouting=function(t){var e,n,i,s;if(t.preventDefault(),this.updateCurrentConfig(),i=$(t.currentTarget).closest("tr"),n=this.cleanupInput(i.find('input[name="dest"]').val()),e=this.cleanupInput(i.find('input[name="caller_id"]').val()),s=i.find('input[name="note"]').val(),!(_.isEmpty(e)||_.isEmpty(n)||_.isEmpty(s)))return this.config.outbound.routing_table.push({dest:n,caller_id:e,note:s}),this.render()},e.prototype.removeInboundBlockCallerId=function(t){var e;return t.preventDefault(),this.updateCurrentConfig(),e=$(t.currentTarget).closest("tr"),e.remove(),this.updateCurrentConfig()},e.prototype.removeOutboundRouting=function(t){var e;return t.preventDefault(),this.updateCurrentConfig(),e=$(t.currentTarget).closest("tr"),e.remove(),this.updateCurrentConfig()},e}(App.Controller),n=function(){function t(){}return t.current=function(){return App.Setting.get("cti_integration")},t}(),App.Config.set("IntegrationCti",{name:"CTI (generic)",target:"#system/integration/cti",description:"Generic API to integrate VoIP service provider with realtime push.",controller:e,state:n},"NavBarIntegrations")}.call(this),function(){var t,e,n,i,s=function(t,e){return function(){return t.apply(e,arguments)}},r=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;n=function(t){function n(){return this["switch"]=s(this["switch"],this),this.render=s(this.render,this),n.__super__.constructor.apply(this,arguments)}return r(n,t),n.prototype.featureIntegration="exchange_integration",n.prototype.featureName="Exchange",n.prototype.featureConfig="exchange_config",n.prototype.description=[["This service enables Zammad to connect with your Exchange server."]],n.prototype.events={"change .js-switch input":"switch"},n.prototype.render=function(){return n.__super__.render.apply(this,arguments),new e({el:this.$(".js-form")}),new App.HttpLog({el:this.$(".js-log"),facility:"exchange"})},n.prototype["switch"]=function(){var t;if(n.__super__["switch"].apply(this,arguments),this.$(".js-switch input").prop("checked"))return t=function(t){return function(){return t.ajax({id:"jobs_config",type:"POST",url:t.apiPath+"/integration/exchange/job_start",processData:!0,success:function(){return t.render(!0)}})}}(this),App.Delay.set(t,600,"job_start")},n}(App.ControllerIntegrationBase),e=function(e){function n(){this.activeDryRun=s(this.activeDryRun,this),this.lastResultShow=s(this.lastResultShow,this),this.lastResult=s(this.lastResult,this),this.startWizard=s(this.startWizard,this),this.startSync=s(this.startSync,this),this.render=s(this.render,this),this.setConfig=s(this.setConfig,this),n.__super__.constructor.apply(this,arguments),this.render(),this.lastResult(),this.activeDryRun()}return r(n,e),n.prototype.elements={".js-lastImport":"lastImport",".js-wizard":"wizardButton"},n.prototype.events={"click .js-wizard":"startWizard","click .js-start-sync":"startSync"},n.prototype.currentConfig=function(){return App.Setting.get("exchange_config")||{}},n.prototype.setConfig=function(t){return App.Setting.set("exchange_config",t,{notify:!0}),this.startSync()},n.prototype.render=function(t){var e,n,i,s,r,o;if(null==t&&(t=!1),this.config=this.currentConfig(),i=[],!_.isEmpty(this.config.folders))for(o=this.config.folders,s=0,r=o.length;s<r;s++)n=o[s],i.push(this.config.wizardData.backend_folders[n]);if(this.html(App.view("integration/exchange")({config:this.config,folders:i})),_.isEmpty(this.config)?(this.$(".js-notConfigured").removeClass("hide"),this.$(".js-summary").addClass("hide")):(this.$(".js-notConfigured").addClass("hide"),this.$(".js-summary").removeClass("hide")),t)return e=function(t){return function(){return t.scrollToIfNeeded($(".content.active .page-header"))}}(this),this.delay(e,500)},n.prototype.startSync=function(){return this.ajax({id:"jobs_config",type:"POST",url:this.apiPath+"/integration/exchange/job_start",processData:!0,success:function(t){return function(){return t.render(!0),t.lastResult()}}(this)})},n.prototype.startWizard=function(e){return e.preventDefault(),new t({container:this.el.closest(".content"),config:this.config,callback:function(t){return function(e){return t.setConfig(e)}}(this)})},n.prototype.lastResult=function(){return this.ajax({id:"jobs_start_index",type:"GET",url:this.apiPath+"/integration/exchange/job_start",processData:!0,success:function(t){return function(e){return _.isEmpty(e)||t.lastResultShowJob&&t.lastResultShowJob.updated_at===e.updated_at||(t.lastResultShowJob=e,t.lastResultShow(e),e.finished_at?t.wizardButton.attr("disabled",!1):t.wizardButton.attr("disabled",!0)),t.delay(t.lastResult,5e3)}}(this)})},n.prototype.lastResultShow=function(t){var e,n,i,s,r;if(_.isEmpty(t))return void this.lastImport.html("");t.result.roles||(t.result.roles={}),n=t.result.role_ids;for(s in n)r=n[s],i=App.Role.find(s),t.result.roles[i.displayName()]=r;return e=$(App.view("integration/exchange_last_import")({job:t})),this.lastImport.html(e)},n.prototype.activeDryRun=function(){return this.ajax({id:"jobs_try_index",type:"GET",url:this.apiPath+"/integration/exchange/job_try",data:{finished:!1},processData:!0,success:function(e){return function(n){if(!_.isEmpty(n))return new t({container:e.el.closest(".content"),config:n.payload,start:"tryLoop",callback:function(t){return e.wizardButton.attr("disabled",!1),e.setConfig(t)}}),e.wizardButton.attr("disabled",!0)}}(this)})},n}(App.Controller),i=function(){function t(){}return t.current=function(){return App.Setting.get("exchange_integration")},t}(),t=function(t){function e(){this.tryResult=s(this.tryResult,this),this.tryLoop=s(this.tryLoop,this),this.tryShow=s(this.tryShow,this),this.addUserMapping=s(this.addUserMapping,this),this.buildRowUserAttribute=s(this.buildRowUserAttribute,this),this.buildRowsUserMap=s(this.buildRowsUserMap,this),this.mappingChange=s(this.mappingChange,this),this.mappingShow=s(this.mappingShow,this),this.mapping=s(this.mapping,this),this.handleCertificateIssue=s(this.handleCertificateIssue,this),this.foldersShow=s(this.foldersShow,this),this.folders=s(this.folders,this),this.discover=s(this.discover,this),this.showSlideDiscover=s(this.showSlideDiscover,this),this.showBindDetails=s(this.showBindDetails,this),this.showDiscoverDetails=s(this.showDiscoverDetails,this),this.showSlide=s(this.showSlide,this),this.save=s(this.save,this),this.render=s(this.render,this),e.__super__.constructor.apply(this,arguments),_.isEmpty(this.config)||(this.wizardConfig=this.config),this.container&&this.el.addClass("modal--local"),this.render(),this.el.modal({keyboard:!0,show:!0,backdrop:!0,container:this.container}).on({"show.bs.modal":this.onShow,"shown.bs.modal":this.onShown,"hidden.bs.modal":function(t){return function(){return t.el.remove()}}(this)}),this.slide?this.showSlide(this.slide):this.showDiscoverDetails(),this.start&&this[this.start]()}return r(e,t),e.prototype.wizardConfig={},e.prototype.slideMethod={"js-folders":"foldersShow","js-mapping":"mappingShow"},e.prototype.events={"submit form.js-discover":"discover","submit form.js-discoverCertificateIssue":"discover","submit form.js-bind":"folders","submit form.js-bindCertificateIssue":"folders","submit form.js-folders":"mapping","click .js-cancelSsl":"showSlideDiscover","click .js-mapping .js-submitTry":"mappingChange","click .js-try .js-submitSave":"save","click .js-close":"hide","click .js-remove":"removeRow","click .js-userMappingForm .js-add":"addUserMapping","click .js-goToSlide":"goToSlide"},e.prototype.elements={".modal-body":"body",".js-foldersSelect":"foldersSelect",".js-folders .js-submitTry":"foldersSelectSubmit",".js-userMappingForm":"userMappingForm",".js-expertForm":"expertForm"},e.prototype.render=function(){return this.html(App.view("integration/exchange_wizard")())},e.prototype.save=function(t){return t.preventDefault(),this.callback(this.wizardConfig),this.hide(t)},e.prototype.showSlide=function(t){var n;return n=this.slideMethod[t],n&&this[n]&&this[n](!0),e.__super__.showSlide.apply(this,arguments)},e.prototype.showDiscoverDetails=function(){return this.$('.js-discover input[name="user"]').val(this.wizardConfig.user),this.$('.js-discover input[name="password"]').val(this.wizardConfig.password)},e.prototype.showBindDetails=function(){return this.$('.js-bind input[name="endpoint"]').val(this.wizardConfig.endpoint),this.$('.js-bind input[name="user"]').val(this.wizardConfig.user),this.$('.js-bind input[name="password"]').val(this.wizardConfig.password)},e.prototype.showSlideDiscover=function(){return this.showSlide("js-discover")},e.prototype.discover=function(t){var e;return t.preventDefault(),this.showSlide("js-connect"),e=this.formParam(t.target),this.ajax({id:"exchange_discover",type:"POST",url:this.apiPath+"/integration/exchange/autodiscover",data:JSON.stringify(e),processData:!0,success:function(t){return function(n){return"ok"!==n.result?void t.handleCertificateIssue({message:n.message,wizardClass:"js-discover",user:e.user,password:e.password}):(t.wizardConfig.disable_ssl_verify=e.disable_ssl_verify,t.wizardConfig.user=e.user,t.wizardConfig.password=e.password,t.showSlide("js-bind"),t.showBindDetails())}}(this),error:function(t){return function(e){var n,i;return i=e.responseText,n={},_.isEmpty(i)||(n=JSON.parse(i)),t.showSlide("js-discover"),t.showAlert("js-discover",n.error||"Unable to perform backend.")}}(this)})},e.prototype.folders=function(t){var e;return t.preventDefault(),this.showSlide("js-analyze"),e=this.formParam(t.target),this.ajax({id:"exchange_folders",type:"POST",url:this.apiPath+"/integration/exchange/folders",data:JSON.stringify(e),processData:!0,success:function(t){return function(n){return"ok"!==n.result?void t.handleCertificateIssue({message:n.message,wizardClass:"js-bind",endpoint:e.endpoint,user:e.user,password:e.password}):(t.wizardConfig.disable_ssl_verify=e.disable_ssl_verify,t.wizardConfig.endpoint=e.endpoint,t.wizardConfig.user=e.user,t.wizardConfig.password=e.password,t.wizardConfig.wizardData={},t.wizardConfig.wizardData.backend_folders=n.folders,t.foldersShow())}}(this),error:function(t){return function(e){var n,i;return i=e.responseText,n={},_.isEmpty(i)||(n=JSON.parse(i)),t.showSlide("js-bind"),t.showAlert("js-bind",n.error||"Unable to perform backend.")}}(this)})},e.prototype.foldersShow=function(t){return t||this.showSlide("js-folders"),this.foldersSelect.html(this.createColumnSelection("folders",this.wizardConfig.wizardData.backend_folders,this.wizardConfig.folders))},e.prototype.createColumnSelection=function(t,e,n){return App.UiElement.column_select.render({name:t,"null":!1,nulloption:!1,options:e,value:n,onChange:function(t){return function(e){return e&&e.length>0?t.foldersSelectSubmit.removeClass("is-disabled"):t.foldersSelectSubmit.addClass("is-disabled")}}(this)})},e.prototype.handleCertificateIssue=function(t){var e,n,i;return-1===t.message.indexOf("certificate")?(this.showSlide(t.wizardClass),this.showAlert(t.wizardClass,t.message)):(n=t.wizardClass+"CertificateIssue",e=this.domainFromMessageOrEmail({message:t.message,user:t.user}),i=App.view("integration/exchange_certificate_issue")({wizardClass:n,endpoint:t.endpoint,user:t.user,password:t.password,domain:e}),this.$(".js-certificateIssuePlaceholder").html(i),this.showSlide(n))},e.prototype.domainFromMessageOrEmail=function(t){var e,n;return(n=t.message.match(/hostname[ ]\"([^\"]+)"/i))?n[1]:(e=t.user.match(/@(.*)$/),e?e[1]:user)},e.prototype.mapping=function(t){var e;return t.preventDefault(),this.showSlide("js-analyze"),e=this.formParam(t.target),"string"==typeof e.folders&&(e.folders=[e.folders]),e.endpoint=this.wizardConfig.endpoint,e.user=this.wizardConfig.user,e.password=this.wizardConfig.password,this.ajax({id:"exchange_mapping",type:"POST",url:this.apiPath+"/integration/exchange/mapping",data:JSON.stringify(e),processData:!0,success:function(t){return function(n){var i,s,r,o;if("ok"!==n.result)return t.showSlide("js-folders"),void t.showAlert("js-folders",n.message);i={},r=App.User.attributesGet();for(s in r)o=r[s],"login"!==s&&("input"!==o.tag&&"richtext"!==o.tag&&"textarea"!==o.tag||"password"===o.type||(i[s]=o.display||s));return t.wizardConfig.wizardData.attributes=i,t.wizardConfig.folders=e.folders,t.wizardConfig.wizardData.backend_attributes=n.attributes,t.mappingShow()}}(this),error:function(t){return function(e){var n,i;return i=e.responseText,n={},
_.isEmpty(i)||(n=JSON.parse(i)),t.showSlide("js-folders"),t.showAlert("js-folders",n.error||"Unable to perform backend.")}}(this)})},e.prototype.mappingShow=function(t){var e;return t||this.showSlide("js-mapping"),e=this.wizardConfig.attributes,_.isEmpty(e)&&(e={given_name:"firstname",surname:"lastname","email_addresses.emailaddress1":"email","phone_numbers.businessphone":"phone"}),this.userMappingForm.find("tbody tr.js-entry").remove(),this.userMappingForm.find("tbody tr").before(this.buildRowsUserMap(e))},e.prototype.mappingChange=function(t){var e,n,i,s,r,o,a,l,c,u;for(t.preventDefault(),e=this.formParam(this.userMappingForm),c=["source","dest"],s=0,a=c.length;s<a;s++)o=c[s],_.isArray(e[o])||(e[o]=[e[o]]);for(n={},l=e.source.length-1,i=r=0,u=l;0<=u?r<=u:r>=u;i=0<=u?++r:--r)e.source[i]&&e.dest[i]&&(n[e.source[i]]=e.dest[i]);return this.wizardConfig.attributes=n,this.tryShow()},e.prototype.buildRowsUserMap=function(t){var e,n,i;n=[];for(i in t)e=t[i],i in this.wizardConfig.wizardData.backend_attributes&&n.push(this.buildRowUserAttribute(i,e));return n},e.prototype.buildRowUserAttribute=function(t,e){var n;return n=$(App.view("integration/exchange_user_attribute_row")()),n.find(".js-exchangeAttribute").html(this.createSelection("source",this.wizardConfig.wizardData.backend_attributes,t)),n.find(".js-userAttribute").html(this.createSelection("dest",this.wizardConfig.wizardData.attributes,e)),n},e.prototype.createSelection=function(t,e,n,i){return App.UiElement.searchable_select.render({name:t,multiple:!1,limit:100,"null":!1,nulloption:!1,options:e,value:n,unknown:i,"class":"form-control--small"})},e.prototype.removeRow=function(t){return t.preventDefault(),$(t.target).closest("tr").remove()},e.prototype.addUserMapping=function(t){return t.preventDefault(),this.userMappingForm.find("tbody tr").last().before(this.buildRowUserAttribute())},e.prototype.tryShow=function(t){return t&&t.preventDefault(),this.showSlide("js-analyze"),this.ajax({id:"exchange_try",type:"POST",url:this.apiPath+"/integration/exchange/job_try",data:JSON.stringify(this.wizardConfig),processData:!0,success:function(t){return function(){return t.tryLoop()}}(this)})},e.prototype.tryLoop=function(){return this.showSlide("js-dry"),this.ajax({id:"jobs_try_index",type:"GET",url:this.apiPath+"/integration/exchange/job_try",data:{finished:!0},processData:!0,success:function(t){return function(e){return e.result&&(e.result.error||e.result.info)?(t.showSlide("js-error"),void t.showAlert("js-error",e.result.error||e.result.info)):(e.result&&_.keys(e.result).length>0&&(t.$(".js-preprogress").addClass("hide"),t.$(".js-analyzing").removeClass("hide"),t.$(".js-progress progress").attr("value",e.result.sum),t.$(".js-progress progress").attr("max",e.result.total)),e.finished_at?(t.$(".js-preprogress").removeClass("hide"),t.$(".js-analyzing").addClass("hide"),t.tryResult(e)):t.delay(t.tryLoop,4e3))}}(this)})},e.prototype.tryResult=function(t){var e;return this.showSlide("js-try"),e=$(App.view("integration/exchange_summary")({job:t})),this.el.find(".js-summary").html(e)},e}(App.WizardModal),App.Config.set("IntegrationExchange",{name:"Exchange",target:"#system/integration/exchange",description:"Exchange integration for contacts management.",controller:n,state:i,permission:["admin.integration.exchange"]},"NavBarIntegrations")}.call(this),function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;t=function(t){function e(){return this.render=n(this.render,this),e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.featureIntegration="icinga_integration",e.prototype.featureName="Icinga",e.prototype.featureConfig="icinga_config",e.prototype.description=[["This service receives emails from %s and creates tickets with host and service.","Icinga"],["If the host and service is recovered again, the ticket will be closed automatically."]],e.prototype.render=function(){return e.__super__.render.apply(this,arguments),new App.SettingsForm({area:"Integration::Icinga",el:this.$(".js-form")})},e}(App.ControllerIntegrationBase),e=function(){function t(){}return t.current=function(){return App.Setting.get("icinga_integration")},t}(),App.Config.set("IntegrationIcinga",{name:"Icinga",target:"#system/integration/icinga",description:"An open source monitoring tool.",controller:t,state:e,permission:["admin.integration.icinga"]},"NavBarIntegrations")}.call(this),function(){var t,e,n,i=function(t,e){return function(){return t.apply(e,arguments)}},s=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;e=function(e){function n(){return this.render=i(this.render,this),n.__super__.constructor.apply(this,arguments)}return s(n,e),n.prototype.featureIntegration="idoit_integration",n.prototype.featureName="i-doit",n.prototype.featureConfig="idoit_config",n.prototype.description=[["This service allows you to connect %s with %s.","i-doit","Zammad"]],n.prototype.events={"change .js-switch input":"switch"},n.prototype.render=function(){return n.__super__.render.apply(this,arguments),new t({el:this.$(".js-form")}),new App.HttpLog({el:this.$(".js-log"),facility:"idoit"})},n}(App.ControllerIntegrationBase),t=function(t){function e(){this.validateAndSave=i(this.validateAndSave,this),this.update=i(this.update,this),this.render=i(this.render,this),e.__super__.constructor.apply(this,arguments),this.render()}return s(e,t),e.prototype.events={"submit form":"update"},e.prototype.currentConfig=function(){return App.Setting.get("idoit_config")},e.prototype.setConfig=function(t){return App.Setting.set("idoit_config",t,{notify:!0})},e.prototype.render=function(){return this.config=this.currentConfig(),this.html(App.view("integration/idoit")({config:this.config}))},e.prototype.update=function(t){return t.preventDefault(),this.config=this.formParam(t.target),this.validateAndSave()},e.prototype.validateAndSave=function(){return this.ajax({id:"idoit",type:"POST",url:this.apiPath+"/integration/idoit/verify",data:JSON.stringify({method:"cmdb.object_types",api_token:this.config.api_token,endpoint:this.config.endpoint,client_id:this.config.client_id}),success:function(t){return function(e){return"failed"===e.result?void new App.ControllerErrorModal({message:e.message,container:t.el.closest(".content")}):t.setConfig(t.config)}}(this),error:function(t){return function(e,n){var i;if("abort"!==n)return i=e.responseJSON||{},t.notify({type:"error",msg:App.i18n.translateContent(i.error_human||i.error||"Unable to save!")})}}(this)})},e}(App.Controller),n=function(){function t(){}return t.current=function(){return App.Setting.get("idoit_integration")},t}(),App.Config.set("IntegrationIdoit",{name:"i-doit",target:"#system/integration/idoit",description:"CMDB to document complex relations of your network components.",controller:e,state:n},"NavBarIntegrations")}.call(this),function(){var t,e,n,i,s=function(t,e){return function(){return t.apply(e,arguments)}},r=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;n=function(t){function n(){return this["switch"]=s(this["switch"],this),this.render=s(this.render,this),n.__super__.constructor.apply(this,arguments)}return r(n,t),n.prototype.featureIntegration="ldap_integration",n.prototype.featureName="LDAP",n.prototype.featureConfig="ldap_config",n.prototype.description=[["This service enables Zammad to connect with your LDAP server."]],n.prototype.events={"change .js-switch input":"switch"},n.prototype.render=function(){return n.__super__.render.apply(this,arguments),new e({el:this.$(".js-form")}),new App.HttpLog({el:this.$(".js-log"),facility:"ldap"})},n.prototype["switch"]=function(){var t;if(n.__super__["switch"].apply(this,arguments),this.$(".js-switch input").prop("checked"))return t=function(t){return function(){return t.ajax({id:"jobs_config",type:"POST",url:t.apiPath+"/integration/ldap/job_start",processData:!0,success:function(){return t.render(!0)}})}}(this),App.Delay.set(t,600,"job_start")},n}(App.ControllerIntegrationBase),e=function(e){function n(){this.activeDryRun=s(this.activeDryRun,this),this.lastResultShow=s(this.lastResultShow,this),this.lastResult=s(this.lastResult,this),this.startWizard=s(this.startWizard,this),this.startSync=s(this.startSync,this),this.render=s(this.render,this),this.setConfig=s(this.setConfig,this),n.__super__.constructor.apply(this,arguments),this.render(),this.lastResult(),this.activeDryRun()}return r(n,e),n.prototype.elements={".js-lastImport":"lastImport",".js-wizard":"wizardButton"},n.prototype.events={"click .js-wizard":"startWizard","click .js-start-sync":"startSync"},n.prototype.currentConfig=function(){return App.Setting.get("ldap_config")||{}},n.prototype.setConfig=function(t){return App.Setting.set("ldap_config",t,{notify:!0}),this.startSync()},n.prototype.render=function(t){var e,n,i,s,r;null==t&&(t=!1),this.config=this.currentConfig(),i={},s=this.config.group_role_map;for(r in s)n=s[r],i[r]=n.map(function(t){return App.Role.find(t).displayName()}).join(", ");if(this.html(App.view("integration/ldap")({config:this.config,group_role_map:i})),_.isEmpty(this.config)?(this.$(".js-notConfigured").removeClass("hide"),this.$(".js-summary").addClass("hide")):(this.$(".js-notConfigured").addClass("hide"),this.$(".js-summary").removeClass("hide")),t)return e=function(t){return function(){return t.scrollToIfNeeded($(".content.active .page-header"))}}(this),this.delay(e,500)},n.prototype.startSync=function(){return this.ajax({id:"jobs_config",type:"POST",url:this.apiPath+"/integration/ldap/job_start",processData:!0,success:function(t){return function(){return t.render(!0),t.lastResult()}}(this)})},n.prototype.startWizard=function(e){return e.preventDefault(),new t({container:this.el.closest(".content"),config:this.config,callback:function(t){return function(e){return t.setConfig(e)}}(this)})},n.prototype.lastResult=function(){return this.ajax({id:"jobs_start_index",type:"GET",url:this.apiPath+"/integration/ldap/job_start",processData:!0,success:function(t){return function(e){return _.isEmpty(e)||t.lastResultShowJob&&t.lastResultShowJob.updated_at===e.updated_at||(t.lastResultShowJob=e,t.lastResultShow(e),e.finished_at?t.wizardButton.attr("disabled",!1):t.wizardButton.attr("disabled",!0)),t.delay(t.lastResult,5e3)}}(this)})},n.prototype.lastResultShow=function(t){var e,n,i,s,r;if(_.isEmpty(t))return void this.lastImport.html("");t.result.roles||(t.result.roles={}),n=t.result.role_ids;for(s in n)r=n[s],i=App.Role.find(s),t.result.roles[i.displayName()]=r;return e=$(App.view("integration/ldap_last_import")({job:t})),this.lastImport.html(e)},n.prototype.activeDryRun=function(){return this.ajax({id:"jobs_try_index",type:"GET",url:this.apiPath+"/integration/ldap/job_try",data:{finished:!1},processData:!0,success:function(e){return function(n){if(!_.isEmpty(n))return new t({container:e.el.closest(".content"),config:n.payload,start:"tryLoop",callback:function(t){return e.wizardButton.attr("disabled",!1),e.setConfig(t)}}),e.wizardButton.attr("disabled",!0)}}(this)})},n}(App.Controller),i=function(){function t(){}return t.current=function(){return App.Setting.get("ldap_integration")},t}(),t=function(t){function e(){this.tryResult=s(this.tryResult,this),this.tryLoop=s(this.tryLoop,this),this.tryShow=s(this.tryShow,this),this.addGroupRoleMapping=s(this.addGroupRoleMapping,this),this.addUserMapping=s(this.addUserMapping,this),this.buildRowGroupRole=s(this.buildRowGroupRole,this),this.buildRowsGroupRole=s(this.buildRowsGroupRole,this),this.buildRowUserAttribute=s(this.buildRowUserAttribute,this),this.buildRowsUserMap=s(this.buildRowsUserMap,this),this.mappingChange=s(this.mappingChange,this),this.mappingShow=s(this.mappingShow,this),this.bindChange=s(this.bindChange,this),this.bindShow=s(this.bindShow,this),this.discover=s(this.discover,this),this.buildRowSslVerify=s(this.buildRowSslVerify,this),this.checkSslVerifyVisibility=s(this.checkSslVerifyVisibility,this),this.sslVerifyChange=s(this.sslVerifyChange,this),this.showHost=s(this.showHost,this),this.showSlide=s(this.showSlide,this),this.save=s(this.save,this),this.render=s(this.render,this),e.__super__.constructor.apply(this,arguments),_.isEmpty(this.config)||(this.wizardConfig=this.config),this.container&&this.el.addClass("modal--local"),this.render(),this.el.modal({keyboard:!0,show:!0,backdrop:!0,container:this.container}).on({"show.bs.modal":this.onShow,"shown.bs.modal":this.onShown,"hidden.bs.modal":function(t){return function(){return t.el.remove()}}(this)}),this.slide?this.showSlide(this.slide):this.showHost(),this.start&&this[this.start]()}return r(e,t),e.prototype.wizardConfig={},e.prototype.slideMethod={"js-bind":"bindShow","js-mapping":"mappingShow"},e.prototype.events={"submit form.js-discover":"discover","submit form.js-bind":"bindChange","click .js-mapping .js-submitTry":"mappingChange","click .js-try .js-submitSave":"save","click .js-close":"hide","click .js-remove":"removeRow","click .js-userMappingForm .js-add":"addUserMapping","click .js-groupRoleForm .js-add":"addGroupRoleMapping","click .js-goToSlide":"goToSlide","input .js-hostUrl":"sslVerifyChange"},e.prototype.elements={".modal-body":"body",".js-userMappingForm":"userMappingForm",".js-groupRoleForm":"groupRoleForm",".js-expertForm":"expertForm"},e.prototype.render=function(){return this.html(App.view("integration/ldap_wizard")())},e.prototype.save=function(t){return t.preventDefault(),this.callback(this.wizardConfig),this.hide(t)},e.prototype.showSlide=function(t){var n;return n=this.slideMethod[t],n&&this[n]&&this[n](!0),e.__super__.showSlide.apply(this,arguments)},e.prototype.showHost=function(){return this.$('.js-discover input[name="host_url"]').val(this.wizardConfig.host_url),this.checkSslVerifyVisibility(this.wizardConfig.host_url)},e.prototype.sslVerifyChange=function(t){return this.checkSslVerifyVisibility($(t.currentTarget).val())},e.prototype.checkSslVerifyVisibility=function(t){var e,n,i;return n=this.$(".js-discover .js-sslVerify"),i=n.length,e=!0,t&&t.startsWith("ldaps")&&(e=!1),i&&e?n.parent().remove():i||e?void 0:this.$(".js-discover tbody tr").last().after(this.buildRowSslVerify())},e.prototype.buildRowSslVerify=function(){var t,e,n;return t=$(App.view("integration/ldap_ssl_verify_row")()),n=!0,"undefined"!=typeof this.wizardConfig.ssl_verify&&(n=this.wizardConfig.ssl_verify),e=App.UiElement["boolean"].render({name:"ssl_verify","null":!1,options:{"true":"yes","false":"no"},"default":n,translate:!0,"class":"form-control form-control--small"}),t.find(".js-sslVerify").html(e),t},e.prototype.discover=function(t){var e;return t.preventDefault(),this.showSlide("js-connect"),e=this.formParam(t.target),this.ajax({id:"ldap_discover",type:"POST",url:this.apiPath+"/integration/ldap/discover",data:JSON.stringify(e),processData:!0,success:function(t){return function(n){var i,s,r,o,a,l;if("ok"!==n.result)return t.showSlide("js-discover"),void t.showAlert("js-discover",n.message);if(t.wizardConfig.host_url=e.host_url,t.wizardConfig.ssl_verify=e.ssl_verify,o="",a={},!_.isEmpty(n.attributes)&&!_.isEmpty(n.attributes.namingcontexts))for(l=n.attributes.namingcontexts,s=0,r=l.length;s<r;s++)i=l[s],a[i]=i,""===o&&(o=i),o.length>i.length&&(o=i);return t.wizardConfig.options=a,t.wizardConfig.option=o,t.bindShow()}}(this),error:function(t){return function(e){var n,i;return i=e.responseText,n={},_.isEmpty(i)||(n=JSON.parse(i)),t.showSlide("js-discover"),t.showAlert("js-discover",n.error||"Unable to perform backend.")}}(this)})},e.prototype.bindShow=function(t){return t||this.showSlide("js-bind"),this.$(".js-bind .js-baseDn").html(this.createSelection("base_dn",this.wizardConfig.options,this.wizardConfig.base_dn||this.wizardConfig.option,!0)),this.$('.js-bind input[name="bind_user"]').val(this.wizardConfig.bind_user),this.$('.js-bind input[name="bind_pw"]').val(this.wizardConfig.bind_pw)},e.prototype.bindChange=function(t){var e;return t.preventDefault(),this.showSlide("js-analyze"),e=this.formParam(t.target),e.host_url=this.wizardConfig.host_url,e.ssl_verify=this.wizardConfig.ssl_verify,this.ajax({id:"ldap_bind",type:"POST",url:this.apiPath+"/integration/ldap/bind",data:JSON.stringify(e),processData:!0,success:function(t){return function(n){var i,s,r,o,a,l,c,u,p,h,d,f,g;if("ok"!==n.result)return t.showSlide("js-bind"),void t.showAlert("js-bind",n.message);if(_.isEmpty(n.user_attributes))return t.showSlide("js-bind"),void t.showAlert("js-bind","Unable to retrive user information, please check your bind user permissions.");if(_.isEmpty(n.groups))return t.showSlide("js-bind"),void t.showAlert("js-bind","Unable to retrive group information, please check your bind user permissions.");for(o in e)g=e[o],t.wizardConfig[o]=g;f={},c=App.User.attributesGet();for(o in c)g=c[o],"input"!==g.tag&&"richtext"!==g.tag&&"textarea"!==g.tag||"password"===g.type||(f[o]=g.display||o);for(d={},u=App.Role.findAllByAttribute("active",!0),s=0,a=u.length;s<a;s++)h=u[s],d[h.id]=h.displayName();for(t.wizardConfig.wizardData={},t.wizardConfig.wizardData.backend_user_attributes=n.user_attributes,t.wizardConfig.wizardData.backend_groups=n.groups,t.wizardConfig.wizardData.user_attributes=f,t.wizardConfig.wizardData.roles=d,p=["user_uid","user_filter","group_uid","group_filter"],r=0,l=p.length;r<l;r++)o=p[r],null==(i=t.wizardConfig)[o]&&(i[o]=n[o]);return t.mappingShow()}}(this),error:function(t){return function(e){var n,i;return i=e.responseText,n={},_.isEmpty(i)||(n=JSON.parse(i)),t.showSlide("js-bind"),t.showAlert("js-bind",n.error||"Unable to perform backend.")}}(this)})},e.prototype.mappingShow=function(t){var e,n;return t||this.showSlide("js-mapping"),n=this.wizardConfig.user_attributes,_.isEmpty(n)&&(n={givenname:"firstname",sn:"lastname",mail:"email",samaccountname:"login",telephonenumber:"phone"}),this.userMappingForm.find("tbody tr.js-entry").remove(),this.userMappingForm.find("tbody tr").before(this.buildRowsUserMap(n)),this.groupRoleForm.find("tbody tr.js-entry").remove(),this.groupRoleForm.find("tbody tr").before(this.buildRowsGroupRole(this.wizardConfig.group_role_map)),this.$('.js-mapping input[name="user_filter"]').val(this.wizardConfig.user_filter),e={sigup_roles:App.i18n.translatePlain("Assign signup roles"),skip_sync:App.i18n.translatePlain("Don't synchronize")},this.$(".js-unassignedUsers").html(this.createSelection("unassigned_users",e,this.wizardConfig.unassigned_users||"sigup_roles"))},e.prototype.mappingChange=function(t){var e,n,i,s,r,o,a,l,c,u,p,h,d,f,g,m,v,y,b;for(t.preventDefault(),y=this.formParam(this.userMappingForm),d=["source","dest"],r=0,u=d.length;r<u;r++)l=d[r],_.isArray(y[l])||(y[l]=[y[l]]);for(b={},h=y.source.length-1,e=o=0,f=h;0<=f?o<=f:o>=f;e=0<=f?++o:--o)y.source[e]&&y.dest[e]&&(b[y.source[e]]=y.dest[e]);if(v=Object.keys(b).some(function(t){return"login"===b[t]}),this.wizardConfig.user_attributes=b,!v)return this.showSlide("js-mapping"),void this.showAlert("js-mapping",App.i18n.translatePlain("Attribute '%s' is required in the mapping","login"));for(i=this.formParam(this.groupRoleForm),g=["source","dest"],a=0,p=g.length;a<p;a++)l=g[a],_.isArray(i[l])||(i[l]=[i[l]]);for(s={},h=i.source.length-1,e=c=0,m=h;0<=m?c<=m:c>=m;e=0<=m?++c:--c)i.source[e]&&i.dest[e]&&(_.isArray(s[i.source[e]])||(s[i.source[e]]=[]),s[i.source[e]].push(i.dest[e]));return this.wizardConfig.group_role_map=s,n=this.formParam(this.expertForm),this.wizardConfig.user_filter=n.user_filter,this.wizardConfig.unassigned_users=n.unassigned_users,this.tryShow()},e.prototype.buildRowsUserMap=function(t){var e,n,i;n=[];for(i in t)e=t[i],i in this.wizardConfig.wizardData.backend_user_attributes&&n.push(this.buildRowUserAttribute(i,e));return n},e.prototype.buildRowUserAttribute=function(t,e){var n;return n=$(App.view("integration/ldap_user_attribute_row")()),n.find(".js-ldapAttribute").html(this.createSelection("source",this.wizardConfig.wizardData.backend_user_attributes,t)),n.find(".js-userAttribute").html(this.createSelection("dest",this.wizardConfig.wizardData.user_attributes,e)),n},e.prototype.buildRowsGroupRole=function(t){var e,n,i,s,r,o;i=[];for(o in t)for(n=t[o],s=0,r=n.length;s<r;s++)e=n[s],i.push(this.buildRowGroupRole(o,e));return i},e.prototype.buildRowGroupRole=function(t,e){var n;return n=$(App.view("integration/ldap_group_role_row")()),n.find(".js-ldapList").html(this.createSelection("source",this.wizardConfig.wizardData.backend_groups,t)),n.find(".js-roleList").html(this.createSelection("dest",this.wizardConfig.wizardData.roles,e)),n},e.prototype.createSelection=function(t,e,n,i){return App.UiElement.searchable_select.render({name:t,multiple:!1,limit:100,"null":!1,nulloption:!1,options:e,value:n,unknown:i,"class":"form-control--small"})},e.prototype.removeRow=function(t){return t.preventDefault(),$(t.target).closest("tr").remove()},e.prototype.addUserMapping=function(t){return t.preventDefault(),this.userMappingForm.find("tbody tr").last().before(this.buildRowUserAttribute())},e.prototype.addGroupRoleMapping=function(t){return t.preventDefault(),this.groupRoleForm.find("tbody tr").last().before(this.buildRowGroupRole())},e.prototype.tryShow=function(t){return t&&t.preventDefault(),this.showSlide("js-analyze"),this.ajax({id:"ldap_try",type:"POST",url:this.apiPath+"/integration/ldap/job_try",data:JSON.stringify(this.wizardConfig),processData:!0,success:function(t){return function(){return t.tryLoop()}}(this)})},e.prototype.tryLoop=function(){return this.showSlide("js-dry"),this.ajax({id:"jobs_try_index",type:"GET",url:this.apiPath+"/integration/ldap/job_try",data:{finished:!0},processData:!0,success:function(t){return function(e){return e.result&&(e.result.error||e.result.info)?(t.showSlide("js-error"),void t.showAlert("js-error",e.result.error||e.result.info)):(e.result&&e.result.total&&(t.$(".js-preprogress").addClass("hide"),t.$(".js-analyzing").removeClass("hide"),t.$(".js-progress progress").attr("value",e.result.sum),t.$(".js-progress progress").attr("max",e.result.total)),e.finished_at?(t.$(".js-preprogress").removeClass("hide"),t.$(".js-analyzing").addClass("hide"),void t.tryResult(e)):void t.delay(t.tryLoop,4e3))}}(this)})},e.prototype.tryResult=function(t){var e,n,i,s,r;t.result.roles||(t.result.roles={}),n=t.result.role_ids;for(s in n)r=n[s],i=App.Role.find(s),t.result.roles[i.displayName()]=r;return this.showSlide("js-try"),e=$(App.view("integration/ldap_summary")({job:t})),this.el.find(".js-summary").html(e)},e}(App.WizardModal),App.Config.set("IntegrationLDAP",{name:"LDAP",target:"#system/integration/ldap",description:"LDAP integration for user management.",controller:n,state:i,permission:["admin.integration.ldap"]},"NavBarIntegrations")}.call(this),function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;t=function(t){function e(){return this.render=n(this.render,this),e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.featureIntegration="monit_integration",e.prototype.featureName="Monit",e.prototype.featureConfig="monit_config",e.prototype.description=[["This service receives emails from %s and creates tickets with host and service.","Monit"],["If the host and service is recovered again, the ticket will be closed automatically."]],e.prototype.render=function(){return e.__super__.render.apply(this,arguments),new App.SettingsForm({area:"Integration::Monit",el:this.$(".js-form")})},e}(App.ControllerIntegrationBase),e=function(){function t(){}return t.current=function(){return App.Setting.get("monit_integration")},t}(),App.Config.set("IntegrationMonit",{name:"Monit",target:"#system/integration/monit",description:"An open source monitoring tool.",controller:t,state:e,permission:["admin.integration.monit"]},"NavBarIntegrations")}.call(this),function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;t=function(t){function e(){return this.render=n(this.render,this),e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.featureIntegration="nagios_integration",e.prototype.featureName="Nagios",e.prototype.featureConfig="nagios_config",e.prototype.description=[["This service receives emails from %s and creates tickets with host and service.","Nagios"],["If the host and service is recovered again, the ticket will be closed automatically."]],e.prototype.render=function(){return e.__super__.render.apply(this,arguments),new App.SettingsForm({area:"Integration::Nagios",el:this.$(".js-form")})},e}(App.ControllerIntegrationBase),e=function(){function t(){}return t.current=function(){return App.Setting.get("nagios_integration")},t}(),App.Config.set("IntegrationNagios",{name:"Nagios",target:"#system/integration/nagios",description:"An open source monitoring tool.",controller:t,state:e},"NavBarIntegrations")}.call(this),function(){var t,e,n,i=function(t,e){return function(){return t.apply(e,arguments)}},s=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;e=function(e){function n(){return this.render=i(this.render,this),n.__super__.constructor.apply(this,arguments)}return s(n,e),n.prototype.featureIntegration="sipgate_integration",n.prototype.featureName="sipgate.io",n.prototype.featureConfig="sipgate_config",n.prototype.description=[["This service shows you contacts of incoming calls and a caller list in realtime."],["Also caller id of outbound calls can be changed."]],n.prototype.events={"click .js-select":"selectAll","change .js-switch input":"switch"},n.prototype.render=function(){return n.__super__.render.apply(this,arguments),new t({el:this.$(".js-form")}),new App.HttpLog({el:this.$(".js-log"),facility:"sipgate.io"})},n}(App.ControllerIntegrationBase),t=function(t){function e(){this.removeOutboundRouting=i(this.removeOutboundRouting,this),this.removeInboundBlockCallerId=i(this.removeInboundBlockCallerId,this),this.addOutboundRouting=i(this.addOutboundRouting,this),this.addInboundBlockCallerId=i(this.addInboundBlockCallerId,this),this.update=i(this.update,this),this.updateCurrentConfig=i(this.updateCurrentConfig,this),this.render=i(this.render,this),e.__super__.constructor.apply(this,arguments),this.render()}return s(e,t),e.prototype.events={"submit form":"update","click .js-inboundBlockCallerId .js-add":"addInboundBlockCallerId","click .js-outboundRouting .js-add":"addOutboundRouting","click .js-inboundBlockCallerId .js-remove":"removeInboundBlockCallerId","click .js-outboundRouting .js-remove":"removeOutboundRouting"},e.prototype.currentConfig=function(){var t;return t=App.Setting.get("sipgate_config"),t.outbound||(t.outbound={}),t.outbound.routing_table||(t.outbound.routing_table=[]),t.inbound||(t.inbound={}),t.inbound.block_caller_ids||(t.inbound.block_caller_ids=[]),t},e.prototype.setConfig=function(t){return App.Setting.set("sipgate_config",t,{notify:!0})},e.prototype.render=function(){return this.config=this.currentConfig(),this.html(App.view("integration/sipgate")({config:this.config}))},e.prototype.updateCurrentConfig=function(){var t,e,n;return e=this.config,t=this.cleanupInput,n=this.$("input[name=default_caller_id]").val(),e.outbound.default_caller_id=t(n),e.outbound.routing_table=[],this.$(".js-outboundRouting .js-row").each(function(){var n,i,s;return i=t($(this).find('input[name="dest"]').val()),n=t($(this).find('input[name="caller_id"]').val()),s=$(this).find('input[name="note"]').val(),e.outbound.routing_table.push({dest:i,caller_id:n,note:s})}),e.inbound.block_caller_ids=[],this.$(".js-inboundBlockCallerId .js-row").each(function(){var n,i;return n=$(this).find('input[name="caller_id"]').val(),i=$(this).find('input[name="note"]').val(),e.inbound.block_caller_ids.push({caller_id:t(n),note:i})}),this.config=e},e.prototype.update=function(t){return t.preventDefault(),this.updateCurrentConfig(),this.setConfig(this.config)},e.prototype.cleanupInput=function(t){return t?t.replace(/\s/g,"").trim():t},e.prototype.addInboundBlockCallerId=function(t){var e,n,i;if(t.preventDefault(),this.updateCurrentConfig(),n=$(t.currentTarget).closest("tr"),e=n.find('input[name="caller_id"]').val(),i=n.find('input[name="note"]').val(),!_.isEmpty(e)&&!_.isEmpty(i))return this.config.inbound.block_caller_ids.push({caller_id:this.cleanupInput(e),note:i}),this.render()},e.prototype.addOutboundRouting=function(t){var e,n,i,s;if(t.preventDefault(),this.updateCurrentConfig(),i=$(t.currentTarget).closest("tr"),n=this.cleanupInput(i.find('input[name="dest"]').val()),e=this.cleanupInput(i.find('input[name="caller_id"]').val()),s=i.find('input[name="note"]').val(),!(_.isEmpty(e)||_.isEmpty(n)||_.isEmpty(s)))return this.config.outbound.routing_table.push({dest:n,caller_id:e,note:s}),this.render()},e.prototype.removeInboundBlockCallerId=function(t){var e;return t.preventDefault(),this.updateCurrentConfig(),e=$(t.currentTarget).closest("tr"),e.remove(),this.updateCurrentConfig()},e.prototype.removeOutboundRouting=function(t){var e;return t.preventDefault(),this.updateCurrentConfig(),e=$(t.currentTarget).closest("tr"),e.remove(),this.updateCurrentConfig()},e}(App.Controller),n=function(){function t(){}return t.current=function(){return App.Setting.get("sipgate_integration")},t}(),App.Config.set("IntegrationSipgate",{name:"sipgate.io",target:"#system/integration/sipgate",description:"VoIP service provider with realtime push.",controller:e,state:n},"NavBarIntegrations")}.call(this),function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;t=function(t){function e(){return this.update=n(this.update,this),this.render=n(this.render,this),e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.featureIntegration="slack_integration",e.prototype.featureName="Slack",e.prototype.featureConfig="slack_config",e.prototype.description=[["This service sends notifications to your %s channel.","Slack"],['To set up this service you need to create a new |"Incoming webhook"| in your %s integration panel, and enter the web hook URL below.',"Slack"]],e.prototype.events={"click .js-submit":"update","submit .js-form":"update","change .js-switch input":"switch"},e.prototype.render=function(){var t,n,i,s,r,o,a,l,c,u,p,h,d,f;for(e.__super__.render.apply(this,arguments),p=App.Setting.get(this.featureConfig),p&&p.items&&(p=p.items[0]||{}),u={create:"1. Ticket Create",update:"2. Ticket Update",reminder_reached:"3. Ticket Reminder Reached",escalation:"4. Ticket Escalation",escalation_warning:"5. Ticket Escalation Warning"},t=[{name:"types",display:"Trigger",tag:"checkbox",options:u,"null":!1,"class":"vertical",note:"When notification is being sent."},{name:"group_ids",display:"Group",tag:"select",relation:"Group",multiple:!0,"null":!1,note:"Only for these groups."},{name:"webhook",display:"Webhook",tag:"input",type:"url",limit:200,"null":!1,placeholder:"https://hooks.slack.com/services/..."},{name:"username",display:"Username",tag:"input",type:"text",limit:100,"null":!1,placeholder:"username"},{name:"channel",display:"Channel",tag:"input",type:"text",limit:100,"null":!0,placeholder:"#channel"},{name:"icon_url",display:"Icon Url",tag:"input",type:"url",limit:200,"null":!0,placeholder:"https://example.com/logo.png"}],d=[],s=0,a=t.length;s<a;s++)r=t[s],h={options:{form:[r]},name:r.name,description:r.note||"",title:r.display},d.push(h);for(i=$(App.view("settings/form")({settings:d})),o=0,l=d.length;o<l;o++)h=d[o],n=h.options.form,n[0].display="",f=p[h.name],c={},c[h.name]=f,new App.ControllerForm({el:i.find("[data-name="+h.name+"]"),model:{configure_attributes:n,className:""},params:c});return this.$(".js-form").html(i),new App.HttpLog({el:this.$(".js-log"),facility:"slack_webhook"})},e.prototype.update=function(t){var e,n;return t.preventDefault(),e=this.formParam(t.target),n={items:[e]},App.Setting.set(this.featureConfig,n,{notify:!0})},e}(App.ControllerIntegrationBase),
e=function(){function t(){}return t.current=function(){return App.Setting.get("slack_integration")},t}(),App.Config.set("IntegrationSlack",{name:"Slack",target:"#system/integration/slack",description:"A team communication tool for the 21st century.",controller:t,state:e},"NavBarIntegrations")}.call(this),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(){n.__super__.constructor.apply(this,arguments),this.title("Branding",!0),this.tabs=[{name:"Base",target:"base",controller:App.SettingsArea,params:{area:"System::Branding"}}],this.render()}return e(n,t),n.prototype.requiredPermission="admin.branding",n.prototype.header="Branding",n}(App.ControllerTabs),App.Config.set("SettingBranding",{prio:1200,parent:"#settings",name:"Branding",target:"#settings/branding",controller:t,permission:["admin.branding"]},"NavBarAdmin")}.call(this),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(){n.__super__.constructor.apply(this,arguments),this.title("Security",!0),this.tabs=[{name:"Base",target:"base",controller:App.SettingsArea,params:{area:"Security::Base"}},{name:"Password",target:"password",controller:App.SettingsArea,params:{area:"Security::Password"}},{name:"Third-party Applications",target:"third_party_auth",controller:App.SettingsArea,params:{area:"Security::ThirdPartyAuthentication"}}],this.render()}return e(n,t),n.prototype.requiredPermission="admin.security",n.prototype.header="Security",n}(App.ControllerTabs),App.Config.set("SettingSecurity",{prio:1600,parent:"#settings",name:"Security",target:"#settings/security",controller:t,permission:["admin.security"]},"NavBarAdmin")}.call(this),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(){n.__super__.constructor.apply(this,arguments),this.title("System",!0),this.tabs=[],App.Config.get("system_online_service")||this.tabs.push({name:"Base",target:"base",controller:App.SettingsArea,params:{area:"System::Base"}}),this.tabs.push({name:"Services",target:"services",controller:App.SettingsArea,params:{area:"System::Services"}}),App.Config.get("system_online_service")||this.tabs.push({name:"Storage",target:"storage",controller:App.SettingsArea,params:{area:"System::Storage"}}),App.Config.get("system_online_service")||this.tabs.push({name:"Network",target:"network",controller:App.SettingsArea,params:{area:"System::Network"}}),this.tabs.push({name:"Frontend",target:"ui",controller:App.SettingsArea,params:{area:"System::UI"}}),this.render()}return e(n,t),n.prototype.requiredPermission="admin.setting_system",n.prototype.header="System",n}(App.ControllerTabs),App.Config.set("SettingSystem",{prio:1400,parent:"#settings",name:"System",target:"#settings/system",controller:t,permission:["admin.setting_system"]},"NavBarAdmin")}.call(this),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(){n.__super__.constructor.apply(this,arguments),this.title("Ticket",!0),this.tabs=[{name:"Base",target:"base",controller:App.SettingsArea,params:{area:"Ticket::Base"}},{name:"Number",target:"number",controller:App.SettingsArea,params:{area:"Ticket::Number"}},{name:"Auto Assignment",target:"auto_assignment",controller:App.SettingTicketAutoAssignment}],this.render()}return e(n,t),n.prototype.requiredPermission="admin.ticket",n.prototype.header="Ticket",n}(App.ControllerTabs),App.Config.set("SettingTicket",{prio:1700,parent:"#settings",name:"Ticket",target:"#settings/ticket",controller:t,permission:["admin.ticket"]},"NavBarAdmin")}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.SettingTicketAutoAssignment=function(n){function i(){this.setTicketAutoAssignment=t(this.setTicketAutoAssignment,this),this.setFilter=t(this.setFilter,this),this.render=t(this.render,this),this.release=t(this.release,this),i.__super__.constructor.apply(this,arguments),this.subscribeId=App.Setting.subscribe(this.render,{initFetch:!0,clear:!1})}return e(i,n),i.prototype.requiredPermission="admin.ticket_auto_assignment",i.prototype.events={"change .js-ticketAutoAssignment input":"setTicketAutoAssignment","click .js-timeAccountingFilter":"setFilter","click .js-timeAccountingFilterReset":"resetFilter"},i.prototype.elements={".js-ticketAutoAssignment input":"ticketAutoAssignment"},i.prototype.release=function(){return App.Setting.unsubscribe(this.subscribeId)},i.prototype.render=function(){var t,e,n,i;return e=this.Config.get("ticket_auto_assignment")||!1,this.lastNewTagSetting=e,this.html(App.view("settings/ticket_auto_assignment")()),t=[{name:"condition",display:"Conditions for effected objects",tag:"ticket_selector","null":!1,preview:!1,action:!1,hasChanged:!1}],n=App.Setting.get("ticket_auto_assignment_selector"),this.filter=new App.ControllerForm({el:this.$(".js-selector"),model:{configure_attributes:t},params:{condition:n.condition},autofocus:!0}),t=[{name:"user_ids",display:"Exception users",tag:"column_select",multiple:!0,"null":!0,relation:"User",sortBy:"firstname"}],i=App.Setting.get("ticket_auto_assignment_user_ids_ignore"),this.filter=new App.ControllerForm({el:this.$(".js-users"),model:{configure_attributes:t},params:{user_ids:i},autofocus:!1})},i.prototype.setFilter=function(t){var e;return t.preventDefault(),e=this.formParam(this.filter.form),App.Setting.set("ticket_auto_assignment_selector",{condition:e.condition},{notify:!0}),App.Setting.set("ticket_auto_assignment_user_ids_ignore",e.user_ids,{notify:!1})},i.prototype.resetFilter=function(t){return t.preventDefault(),App.Setting.set("ticket_auto_assignment_selector",{},{notify:!0}),App.Setting.set("ticket_auto_assignment_user_ids_ignore",[],{notify:!1})},i.prototype.setTicketAutoAssignment=function(){var t;return t=this.ticketAutoAssignment.prop("checked"),App.Setting.set("ticket_auto_assignment",t)},i}(App.ControllerSubContent)}.call(this),function(){var t,e,n,i=function(t,e){return function(){return t.apply(e,arguments)}},s=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;n=function(n){function r(){this.onUpload=i(this.onUpload,this),this.storeImage=i(this.storeImage,this),this.openCamera=i(this.openCamera,this),this.pick=i(this.pick,this),this.onDelete=i(this.onDelete,this),this.onSelect=i(this.onSelect,this),this.render=i(this.render,this),this.loadAvatarList=i(this.loadAvatarList,this),r.__super__.constructor.apply(this,arguments),this.avatars=[],this.loadAvatarList()}return s(r,n),r.prototype.requiredPermission="user_preferences.avatar",r.prototype.header="Avatar",r.prototype.elements={".js-upload":"fileInput",".avatar-gallery":"avatarGallery"},r.prototype.events={"click .js-openCamera":"openCamera","change .js-upload":"onUpload","click .avatar":"onSelect","click .avatar-delete":"onDelete"},r.prototype.loadAvatarList=function(){return this.ajax({id:"avatar_list",type:"GET",url:this.apiPath+"/users/avatar",processData:!0,success:function(t){return function(e){return t.avatars=e.avatars,t.render()}}(this)})},r.prototype.hasGetUserMedia=function(){return!!(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia)},r.prototype.render=function(){return this.html(App.view("profile/avatar")({webcamSupport:this.hasGetUserMedia(),avatars:this.avatars})),this.$('.avatar[data-id="'+this.Session.get("id")+'"]').attr("data-id","").attr("data-avatar-id","0")},r.prototype.onSelect=function(t){return this.pick($(t.currentTarget))},r.prototype.onDelete=function(t){var e;if(t.stopPropagation(),confirm(App.i18n.translateInline("Delete Avatar?")))return e={id:$(t.currentTarget).parent(".avatar-holder").find(".avatar").data("avatar-id")},$(t.currentTarget).parent(".avatar-holder").remove(),this.pick(this.$(".avatar").last()),this.ajax({id:"avatar_delete",type:"DELETE",url:this.apiPath+"/users/avatar",data:JSON.stringify(e),processData:!0})},r.prototype.pick=function(t){var e,n;return this.$(".avatar").removeClass("is-active"),t.addClass("is-active"),e=t.data("avatar-id"),n={id:e},this.ajax({id:"avatar_set_default",type:"POST",url:this.apiPath+"/users/avatar/set",data:JSON.stringify(n),processData:!0,success:function(t){return function(){var e,n,i;return e=t.$(".avatar.is-active"),i=e.attr("style"),e.text()?i+=";background-size:auto":i+=";background-size:cover",n=$('.avatar[data-id="'+t.Session.get("id")+'"]'),n.attr("style",i),e.text()?(n.text(e.text()),n.addClass("avatar--unique")):(n.text(""),n.removeClass("avatar--unique"))}}(this)}),t},r.prototype.openCamera=function(){return new t({callback:this.storeImage})},r.prototype.storeImage=function(t){var e;return this.oldDataUrl=t,e=function(e){return function(n){return e.ajax({id:"avatar_new",type:"POST",url:e.apiPath+"/users/avatar",data:JSON.stringify({avatar_full:e.oldDataUrl,avatar_resize:n}),processData:!0,success:function(n){var i;return i=$(App.view("profile/avatar-holder")({src:t,avatar:n.avatar})),e.avatarGallery.append(i),e.pick(i.find(".avatar"))}})}}(this),App.ImageService.resizeForAvatar(t,"auto",160,e)},r.prototype.onUpload=function(t){var n;return n=this.storeImage,EXIF.getData(t.target.files[0],function(){var t,i;return t=this.exifdata.Orientation,i=new FileReader,i.onload=function(i){return new e({imageSource:i.target.result,callback:n,orientation:t})},i.readAsDataURL(this)})},r}(App.ControllerSubContent),App.Config.set("Avatar",{prio:1100,name:"Avatar",parent:"#profile",target:"#profile/avatar",controller:n,permission:["user_preferences.avatar"]},"NavBarProfile"),e=function(t){function e(){return this.onSubmit=i(this.onSubmit,this),this.initializeCropper=i(this.initializeCropper,this),this.onShown=i(this.onShown,this),this.orientateImage=i(this.orientateImage,this),this.post=i(this.post,this),e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.buttonClose=!0,e.prototype.buttonCancel=!0,e.prototype.buttonSubmit="Save",e.prototype.head="Crop Image",e.prototype.elements={".imageCropper-image":"image",".imageCropper-holder":"holder"},e.prototype.content=function(){return App.view("profile/imageCropper")()},e.prototype.post=function(){var t,e;return this.size=256,t={1:0,3:180,6:90,8:-90},this.angle=t[this.orientation],void 0===this.angle&&(this.angle=0),e=function(t){return function(e){var n;return 0!==t.angle?(t.isOrientating=!0,n=new Image,n.addEventListener("load",t.orientateImage),n.src=e):t.image.attr({src:e})}}(this),App.ImageService.resize(this.imageSource,600,"auto",2,"image/jpeg",.9,e)},e.prototype.orientateImage=function(t){var e,n,i;if(i=t.currentTarget,e=document.createElement("canvas"),n=e.getContext("2d"),180===this.angle?(e.width=i.width,e.height=i.height):(e.width=i.height,e.height=i.width),n.translate(e.width/2,e.height/2),n.rotate(this.angle*Math.PI/180),n.drawImage(i,-i.width/2,-i.height/2,i.width,i.height),this.image.attr({src:e.toDataURL()}),this.isOrientating=!1,this.isShown)return this.initializeCropper()},e.prototype.onShown=function(){if(this.isShown=!0,!this.isOrientating)return this.initializeCropper()},e.prototype.initializeCropper=function(){return this.image.cropper({aspectRatio:1,guides:!1,autoCrop:!0,autoCropArea:1,minContainerWidth:500,minContainerHeight:300,preview:".imageCropper-preview"})},e.prototype.onSubmit=function(t){return this.formDisable(t),this.callback(this.image.cropper("getCroppedCanvas").toDataURL()),this.image.cropper("destroy"),this.close()},e}(App.ControllerModal),t=function(t){function e(){return this.stopStream=i(this.stopStream,this),this.onSubmit=i(this.onSubmit,this),this.onClose=i(this.onClose,this),this.updatePreview=i(this.updatePreview,this),this.setupPreview=i(this.setupPreview,this),this.onWebcamError=i(this.onWebcamError,this),this.onWebcamReady=i(this.onWebcamReady,this),this.shoot=i(this.shoot,this),this.onShootClick=i(this.onShootClick,this),this.post=i(this.post,this),e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.buttonClose=!0,e.prototype.buttonCancel=!0,e.prototype.buttonSubmit="Save",e.prototype.buttonClass="btn--success is-disabled",e.prototype.centerButtons=[{className:"btn--success js-shoot is-disabled",text:"Shoot"}],e.prototype.head="Camera",e.prototype.elements={".js-shoot":"shootButton",".js-submit":"submitButton",".camera-preview":"preview",".camera":"camera",video:"video"},e.prototype.events={"click .js-shoot:not(.is-disabled)":"onShootClick"},e.prototype.content=function(){return App.view("profile/camera")()},e.prototype.post=function(){var t;return this.size=256,this.photoTaken=!1,this.backgroundColor="white",this.ctx=this.preview.get(0).getContext("2d"),t=Modernizr.prefixed("getUserMedia",navigator),t({video:!0},this.onWebcamReady,this.onWebcamError),this.initializeCache()},e.prototype.onShootClick=function(){return this.photoTaken?(this.photoTaken=!1,this.submitButton.addClass("is-disabled"),this.shootButton.removeClass("btn--danger").addClass("btn--success").text(App.i18n.translateInline("Shoot")),this.updatePreview()):(this.shoot(),this.shootButton.removeClass("btn--success").addClass("btn--danger").text(App.i18n.translateInline("Discard")))},e.prototype.shoot=function(){return this.photoTaken=!0,this.submitButton.removeClass("is-disabled")},e.prototype.onWebcamReady=function(t){return this.shootButton.removeClass("is-disabled"),this.hidden?void this.stopStream():(this.stream=t,this.video.on("canplay",this.setupPreview),this.video.on("playing",this.updatePreview),this.video.attr("src",window.URL.createObjectURL(t)),this.video.get(0).play())},e.prototype.onWebcamError=function(t){var e;if(!this.hidden)return e={PermissionDeniedError:App.i18n.translateInline("You have to allow access to your webcam."),ConstraintNotSatisfiedError:App.i18n.translateInline("No camera found.")},alert(e[t.name]),this.close()},e.prototype.setupPreview=function(){return this.video.attr("height",this.size),this.preview.attr({width:this.size,height:this.size}),this.centerX=this.size/2,this.centerY=this.size/2,this.ctx.translate(this.centerX,this.centerY),this.ctx.scale(-1,1),this.ctx.strokeStyle=this.backgroundColor,this.ctx.lineWidth=2},e.prototype.updatePreview=function(){var t;try{return this.ctx.globalCompositeOperation="source-over",this.ctx.clearRect(0,0,this.size,this.size),this.ctx.beginPath(),this.ctx.arc(0,0,this.size/2,0,2*Math.PI,!1),this.ctx.closePath(),this.ctx.fill(),this.ctx.globalCompositeOperation="source-atop",this.ctx.drawImage(this.video.get(0),-this.video.width()/2,-this.size/2,this.video.width(),this.size),this.ctx.beginPath(),this.ctx.arc(0,0,this.size/2,0,2*Math.PI,!1),this.ctx.closePath(),this.ctx.stroke(),this.photoTaken?this.cacheScreenshot():requestAnimationFrame(this.updatePreview)}catch(e){if(t=e,"NS_ERROR_NOT_AVAILABLE"===t.name)return setTimeout(this.updatePreview,200);throw t}},e.prototype.initializeCache=function(){return this.cache=$("<canvas>"),this.cacheCtx=this.cache.get(0).getContext("2d")},e.prototype.cacheScreenshot=function(){var t;return this.video.attr({height:""}),t=Math.min(this.video.height(),this.video.width()),this.cache.attr({width:t,height:t}),this.cacheCtx.save(),this.cacheCtx.translate(t/2,t/2),this.cacheCtx.scale(-1,1),this.cacheCtx.drawImage(this.video.get(0),-this.video.width()/2,-this.video.height()/2,this.video.width(),this.video.height()),this.cacheCtx.restore(),this.video.attr({height:this.size})},e.prototype.onClose=function(){return this.stopStream(),this.hidden=!0},e.prototype.onSubmit=function(t){return this.formDisable(t),window.file=this.cache.get(0).toDataURL(),this.callback(this.cache.get(0).toDataURL()),this.close()},e.prototype.stopStream=function(){if(this.stream)return this.stream.getTracks&&this.stream.getTracks().forEach(function(t){return t.stop()}),this.stream.stop?this.stream.stop():void 0},e}(App.ControllerModal)}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var s in e)i.call(e,s)&&(t[s]=e[s]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;t=function(t){function i(){this.error=e(this.error,this),this.success=e(this.success,this),this.onOptionsChange=e(this.onOptionsChange,this),this.render=e(this.render,this),i.__super__.constructor.apply(this,arguments),this.translationTable={new_open:App.i18n.translatePlain("new & open"),pending:App.i18n.translatePlain("pending"),escalation:App.i18n.translatePlain("escalation")},this.render()}return n(i,t),i.prototype.requiredPermission="user_preferences.calendar+ticket.agent",i.prototype.header="Calendar",i.prototype.elements={"input[type=checkbox]":"options",output:"output"},i.prototype.events={"change input[type=checkbox]":"onOptionsChange","click .js-select":"selectAll","click .js-showLink":"showLink"},i.prototype.render=function(){var t;return t=this.Session.get("preferences"),this.preferences=App.Config.get("defaults_calendar_subscriptions_tickets"),t.calendar_subscriptions&&t.calendar_subscriptions.tickets&&_.extend(this.preferences,t.calendar_subscriptions.tickets),this.html(App.view("profile/calendar_subscriptions")({baseurl:window.location.origin,preferences:this.preferences,translationTable:this.translationTable}))},i.prototype.showLink=function(t){return $(t.currentTarget).next().removeClass("is-hidden"),$(t.currentTarget).remove()},i.prototype.onOptionsChange=function(){var t,e,n,i,s,r;this.setAllPreferencesToFalse(),i=this.options.serializeArray();for(e in i)t=i[e],s=t.name.split("/"),r=s[0],n=s[1],r&&n?this.preferences[r][n]=!0:this.preferences[t.name]=!0;return this.store()},i.prototype.setAllPreferencesToFalse=function(){var t,e;this.preferences.alarm=!1,t=[];for(e in this.preferences)_.isObject(this.preferences)?(this.preferences[e].own=!1,t.push(this.preferences[e].not_assigned=!1)):t.push(void 0);return t},i.prototype.store=function(){var t;return t={calendar_subscriptions:{tickets:this.preferences}},this.ajax({id:"preferences",type:"PUT",url:this.apiPath+"/users/preferences",data:JSON.stringify(t),success:this.success,error:this.error})},i.prototype.success=function(){return App.User.full(App.Session.get("id"),function(t){return function(){return t.notify({type:"success",msg:App.i18n.translateContent("Successful!")})}}(this),!0)},i.prototype.error=function(t){var e;return this.render(),e=JSON.parse(t.responseText),this.notify({type:"error",msg:App.i18n.translateContent(e.message)})},i}(App.ControllerSubContent),App.Config.set("CalendarSubscriptions",{prio:3e3,name:"Calendar",parent:"#profile",target:"#profile/calendar_subscriptions",permission:["user_preferences.calendar+ticket.agent"],controller:t},"NavBarProfile")}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var s in e)i.call(e,s)&&(t[s]=e[s]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;t=function(t){function i(){this.error=e(this.error,this),this["delete"]=e(this["delete"],this),this.render=e(this.render,this),this.load=e(this.load,this),i.__super__.constructor.apply(this,arguments),this.load(),this.interval(function(t){return function(){return t.load()}}(this),62e3)}return n(i,t),i.prototype.requiredPermission="user_preferences.device",i.prototype.header="Devices",i.prototype.events={"click [data-type=delete]":"delete"},i.prototype.load=function(t){return null==t&&(t=!1),this.ajax({id:"user_devices",type:"GET",url:this.apiPath+"/user_devices",success:function(e){return function(n){if(t||!e.lastestUpdated||!n||!n[0]||e.lastestUpdated.updated_at!==n[0].updated_at)return e.lastestUpdated=n[0],e.data=n,e.render()}}(this)})},i.prototype.render=function(){return this.html(App.view("profile/devices")({devices:this.data||[]}))},i.prototype["delete"]=function(t){var e;return t.preventDefault(),e=$(t.target).closest("a").data("device-id"),this.ajax({id:"user_devices_delete",type:"DELETE",url:this.apiPath+"/user_devices/"+e,processData:!0,success:function(t){return function(){return t.load(!0)}}(this),error:this.error})},i.prototype.error=function(t){var e;return e=JSON.parse(t.responseText),this.notify({type:"error",msg:App.i18n.translateContent(e.message)})},i}(App.ControllerSubContent),App.Config.set("Devices",{prio:3100,name:"Devices",parent:"#profile",target:"#profile/devices",controller:t,permission:["user_preferences.device"]},"NavBarProfile")}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var s in e)i.call(e,s)&&(t[s]=e[s]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;t=function(t){function i(){this.error=e(this.error,this),this.success=e(this.success,this),this.update=e(this.update,this),this.render=e(this.render,this),i.__super__.constructor.apply(this,arguments),this.render()}return n(i,t),i.prototype.requiredPermission="user_preferences.language",i.prototype.header="Language",i.prototype.events={"submit form":"update"},i.prototype.render=function(){var t,e,n,i,s,r,o;for(e=$(App.view("profile/language")()),o={},r=App.Locale.all(),n=0,i=r.length;n<i;n++)s=r[n],o[s.locale]=s.name;return t=[{name:"locale",display:"",tag:"searchable_select","null":!1,"class":"input",options:o,"default":App.i18n.get()}],this.form=new App.ControllerForm({el:e.find(".language_item"),model:{configure_attributes:t},autofocus:!1}),this.html(e)},i.prototype.update=function(t){var e,n;return t.preventDefault(),n=this.formParam(t.target),(e=this.form.validate(n))?(this.formValidate({form:t.target,errors:e}),!1):(this.formDisable(t),this.locale=n.locale,this.ajax({id:"preferences",type:"PUT",url:this.apiPath+"/users/preferences",data:JSON.stringify(n),processData:!0,success:this.success,error:this.error}))},i.prototype.success=function(){return App.User.full(App.Session.get("id"),function(t){return function(){return App.i18n.set(t.locale),App.Event.trigger("ui:rerender"),t.notify({type:"success",msg:App.i18n.translateContent("Successful!")})}}(this),!0)},i.prototype.error=function(t){var e;return this.render(),e=JSON.parse(t.responseText),this.notify({type:"error",msg:App.i18n.translateContent(e.message)})},i}(App.ControllerSubContent),App.Config.set("Language",{prio:1e3,name:"Language",parent:"#profile",target:"#profile/language",controller:t,permission:["user_preferences.language"]},"NavBarProfile")}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var s in e)i.call(e,s)&&(t[s]=e[s]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;t=function(t){function i(){this.error=e(this.error,this),this.success=e(this.success,this),this.remove=e(this.remove,this),this.render=e(this.render,this),i.__super__.constructor.apply(this,arguments),this.render()}return n(i,t),i.prototype.requiredPermission="user_preferences.linked_accounts",i.prototype.header="Linked Accounts",i.prototype.events={"click .js-remove":"remove"},i.prototype.render=function(){var t,e,n,i;t=App.Config.get("auth_provider_all"),e={};for(n in t)i=t[n],!0!==this.Config.get(i.config)&&"true"!==this.Config.get(i.config)||(e[n]=i);return this.html(App.view("profile/linked_accounts")({user:App.Session.get(),auth_providers:e}))},i.prototype.remove=function(t){var e,n;return t.preventDefault(),e=$(t.target).data("provider"),n=$(t.target).data("uid"),this.ajax({id:"account",type:"DELETE",url:this.apiPath+"/users/account",data:JSON.stringify({provider:e,uid:n}),processData:!0,success:this.success,error:this.error})},i.prototype.success=function(){var t;return this.notify({type:"success",msg:App.i18n.translateContent("Successful!")}),t=function(t){return function(){return t.render()}}(this),App.User.full(this.Session.get("id"),t,!0)},i.prototype.error=function(t){var e;return this.render(),e=JSON.parse(t.responseText),this.notify({type:"error",msg:App.i18n.translateContent(e.message)})},i}(App.ControllerSubContent),App.Config.set("LinkedAccounts",{prio:4e3,name:"Linked Accounts",parent:"#profile",target:"#profile/linked",controller:t,permission:["user_preferences.linked_accounts"]},"NavBarProfile"),App.Config.set("auth_provider_all",{facebook:{url:"/auth/facebook",name:"Facebook",config:"auth_facebook","class":"facebook"},twitter:{url:"/auth/twitter",name:"Twitter",config:"auth_twitter","class":"twitter"},linkedin:{url:"/auth/linkedin",name:"LinkedIn",config:"auth_linkedin","class":"linkedin"},github:{url:"/auth/github",name:"GitHub",config:"auth_github","class":"github"},gitlab:{url:"/auth/gitlab",name:"GitLab",config:"auth_gitlab","class":"gitlab"},microsoft_office365:{url:"/auth/microsoft_office365",name:"Office 365",config:"auth_microsoft_office365","class":"office365"},google_oauth2:{url:"/auth/google_oauth2",name:"Google",config:"auth_google_oauth2","class":"google"},oauth2:{url:"/auth/oauth2",name:"OAuth2",config:"auth_oauth2","class":"oauth2"},weibo:{url:"/auth/weibo",name:"Weibo",config:"auth_weibo","class":"weibo"}})}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var s in e)i.call(e,s)&&(t[s]=e[s]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;t=function(t){function i(){this.previewSound=e(this.previewSound,this),this.error=e(this.error,this),this.success=e(this.success,this),this.update=e(this.update,this),this.render=e(this.render,this),i.__super__.constructor.apply(this,arguments),this.render()}return n(i,t),i.prototype.requiredPermission="user_preferences.notifications+ticket.agent",i.prototype.header="Notifications",i.prototype.events={"submit form":"update","change .js-notificationSound":"previewSound"},i.prototype.sounds=[{name:"Bell",file:"Bell.mp3"},{name:"Kalimba",file:"Kalimba.mp3"},{name:"Marimba",file:"Marimba.mp3"},{name:"Peep",file:"Peep.mp3"},{name:"Plop",file:"Plop.mp3"},{name:"Ring",file:"Ring.mp3"},{name:"Space",file:"Space.mp3"},{name:"Wood",file:"Wood.mp3"},{name:"Xylo",file:"Xylo.mp3"}],i.prototype.render=function(){var t,e,n,i,s,r,o,a,l,c,u,p,h,d;if(t={group_ids:[],matrix:{create:{name:"New Ticket"},update:{name:"Ticket update"},reminder_reached:{name:"Ticket reminder reached"},escalation:{name:"Ticket escalation"}}},h=this.Session.get("preferences").notification_config,h&&(t=$.extend(!0,{},t,h)),d=!0,h&&h.group_ids&&!_.isEmpty(h.group_ids)&&"-"!==h.group_ids[0]||(d=!1),s=[],i=App.User.find(this.Session.get("id")).all_group_ids())for(r=0,a=i.length;r<a;r++)n=i[r],e=App.Group.find(n),s.push(e),d||(t.group_ids||(t.group_ids=[]),t.group_ids.push(n.toString()));for(c=this.sounds,o=0,l=c.length;o<l;o++)p=c[o],p.selected=null!=(u=p.file===App.OnlineNotification.soundFile())?u:{"true":!1};return this.html(App.view("profile/notification")({groups:s,config:t,sounds:this.sounds,notificationSoundEnabled:App.OnlineNotification.soundEnabled()}))},i.prototype.update=function(t){var e,n,i,s,r,o;t.preventDefault(),s={},s.notification_config={},n=this.formParam(t.target);for(i in n)o=n[i],"group_ids"===i?("object"!=typeof o&&(o=[o]),s.notification_config[i]=o):(e=i.split("."),"true"===o&&(o=!0),"matrix"===e[0]&&("criteria"===e[2]&&(s.notification_config[e[0]]||(s.notification_config[e[0]]={}),s.notification_config[e[0]][e[1]]||(s.notification_config[e[0]][e[1]]={}),s.notification_config[e[0]][e[1]][e[2]]||(s.notification_config[e[0]][e[1]][e[2]]={owned_by_me:!1,owned_by_nobody:!1,no:!1}),s.notification_config[e[0]][e[1]][e[2]][e[3]]=o),"channel"===e[2]&&(s.notification_config[e[0]]||(s.notification_config[e[0]]={}),s.notification_config[e[0]][e[1]]||(s.notification_config[e[0]][e[1]]={}),"email"===o&&(s.notification_config[e[0]][e[1]][e[2]]={email:!0,online:!0}))));if(s.notification_config){r=s.notification_config.matrix;for(i in r)o=r[i],o.channel||(o.channel={email:!1,online:!0})}return s.notification_config.group_ids&&!_.isEmpty(s.notification_config.group_ids)||(s.notification_config.group_ids=["-"]),this.formDisable(t),s.notification_sound=n.notification_sound,s.notification_sound.enabled?s.notification_sound.enabled=!0:s.notification_sound.enabled=!1,this.ajax({id:"preferences",type:"PUT",url:this.apiPath+"/users/preferences",data:JSON.stringify(s),processData:!0,success:this.success,error:this.error})},i.prototype.success=function(){return App.User.full(App.Session.get("id"),function(t){return function(){return App.Event.trigger("ui:rerender"),t.notify({type:"success",msg:App.i18n.translateContent("Successful!")})}}(this),!0)},i.prototype.error=function(t){var e;return this.render(),e=JSON.parse(t.responseText),this.notify({type:"error",msg:App.i18n.translateContent(e.message)})},i.prototype.previewSound=function(t){var e;if(e=this.formParam(t.target),e.notification_sound&&e.notification_sound.file)return App.OnlineNotification.play(e.notification_sound.file)},i}(App.ControllerSubContent),App.Config.set("Notifications",{prio:2600,name:"Notifications",parent:"#profile",target:"#profile/notifications",permission:["user_preferences.notifications+ticket.agent"],controller:t},"NavBarProfile")}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var s in e)i.call(e,s)&&(t[s]=e[s]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;t=function(t){function i(){this.error=e(this.error,this),this.success=e(this.success,this),this.store=e(this.store,this),this.submit=e(this.submit,this),this.disable=e(this.disable,this),this.enable=e(this.enable,this),this.render=e(this.render,this),i.__super__.constructor.apply(this,arguments),this.render()}return n(i,t),i.prototype.requiredPermission="user_preferences.out_of_office+ticket.agent",i.prototype.header="Out of Office",i.prototype.events={"submit form":"submit","click .js-disabled":"disable","click .js-enable":"enable"},i.prototype.render=function(){var t,e,n,i,s;return s=this.Session.get(),this.localData||(this.localData={out_of_office:s.out_of_office,out_of_office_start_at:s.out_of_office_start_at,out_of_office_end_at:s.out_of_office_end_at,out_of_office_replacement_id:s.out_of_office_replacement_id,out_of_office_replacement_id_completion:s.preferences.out_of_office_replacement_id_completion,out_of_office_text:s.preferences.out_of_office_text}),i=$(App.view("profile/out_of_office")({user:s,localData:this.localData,placeholder:App.User.outOfOfficeTextPlaceholder()})),n=new App.ControllerForm({model:{configure_attributes:[{name:"out_of_office_start_at",display:"",tag:"date",past:!1,future:!0,"null":!1}]},noFieldset:!0,params:this.localData}),i.find(".js-startDate").html(n.form),e=new App.ControllerForm({model:{configure_attributes:[{name:"out_of_office_end_at",display:"",tag:"date",past:!1,future:!0,"null":!1}]},noFieldset:!0,params:this.localData}),i.find(".js-endDate").html(e.form),t=new App.ControllerForm({model:{configure_attributes:[{name:"out_of_office_replacement_id",display:"",relation:"User",tag:"user_autocompletion",autocapitalize:!1,multiple:!1,limit:30,minLengt:2,placeholder:"Enter Person or Organization/Company","null":!1,translate:!1,disableCreateObject:!0,value:this.localData}]},noFieldset:!0,params:this.localData}),i.find(".js-recipientDropdown").html(t.form),!0===this.localData.out_of_office?i.find(".js-disabled").removeClass("is-disabled"):i.find(".js-disabled").addClass("is-disabled"),this.html(i)},i.prototype.enable=function(t){var e;return t.preventDefault(),e=this.formParam(t.target),e.out_of_office=!0,this.store(t,e)},i.prototype.disable=function(t){var e;return t.preventDefault(),e=this.formParam(t.target),e.out_of_office=!1,this.store(t,e)},i.prototype.submit=function(t,e){return t.preventDefault(),e=this.formParam(t.target),this.store(t,e)},i.prototype.store=function(t,e){var n,i;this.formDisable(t)
;for(n in e)i=e[n],this.localData[n]=i;return App.Ajax.request({id:"user_out_of_office",type:"PUT",url:this.apiPath+"/users/out_of_office",data:JSON.stringify(e),processData:!0,success:this.success,error:this.error})},i.prototype.success=function(t){return"ok"===t.message?(this.render(),this.notify({type:"success",msg:App.i18n.translateContent("Successfully!"),timeout:1e3})):(t.notice?this.notify({type:"error",msg:App.i18n.translateContent(t.notice[0],t.notice[1]),removeAll:!0}):this.notify({type:"error",msg:"Please contact your administrator.",removeAll:!0}),this.formEnable(this.$("form")))},i.prototype.error=function(t,e,n){var i,s;if(this.formEnable(this.$("form")),"abort"!==e)return i=JSON.parse(t.responseText),s=401===t.status||"Unauthorized"===n?"\xbb "+App.i18n.translateInline("Unauthorized")+" \xab":404===t.status||"Not Found"===n?"\xbb "+App.i18n.translateInline("Not Found")+" \xab":i.error?App.i18n.translateInline(i.error):"\xbb "+App.i18n.translateInline("Error")+" \xab",this.notify({type:"error",msg:App.i18n.translateContent(s),removeAll:!0})},i}(App.ControllerSubContent),App.Config.set("OutOfOffice",{prio:2800,name:"Out of Office",parent:"#profile",target:"#profile/out_of_office",permission:["user_preferences.out_of_office+ticket.agent"],controller:t},"NavBarProfile")}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var s in e)i.call(e,s)&&(t[s]=e[s]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;t=function(t){function i(){this.success=e(this.success,this),this.update=e(this.update,this),this.render=e(this.render,this),i.__super__.constructor.apply(this,arguments),this.render()}return n(i,t),i.prototype.requiredPermission="user_preferences.password",i.prototype.header="Password",i.prototype.events={"submit form":"update"},i.prototype.render=function(){var t,e;return e=$(App.view("profile/password")()),t=[{name:"password_old",display:"Current password",tag:"input",type:"password",limit:100,"null":!1,"class":"input",single:!0},{name:"password_new",display:"New password",tag:"input",type:"password",limit:100,"null":!1,"class":"input"}],this.form=new App.ControllerForm({el:e.find(".password_item"),model:{configure_attributes:t},autofocus:!1}),this.html(e)},i.prototype.update=function(t){var e;return t.preventDefault(),e=this.formParam(t.target),this.formDisable(t),e.password_new_confirm!==e.password_new?(this.formEnable(t),this.$("[name=password_new]").val(""),this.$("[name=password_new_confirm]").val(""),void this.notify({type:"error",msg:"Can't update password, your new passwords do not match. Please try again!",removeAll:!0})):e.password_new?this.ajax({id:"password_reset",type:"POST",url:this.apiPath+"/users/password_change",data:JSON.stringify(e),processData:!0,success:this.success}):(this.formEnable(t),void this.notify({type:"error",msg:"Please supply your new password!",removeAll:!0}))},i.prototype.success=function(t){return"ok"===t.message?(this.render(),this.notify({type:"success",msg:App.i18n.translateContent("Password changed successfully!")})):(t.notice?this.notify({type:"error",msg:App.i18n.translateContent(t.notice[0],t.notice[1]),removeAll:!0}):this.notify({type:"error",msg:"Unable to set password. Please contact your administrator.",removeAll:!0}),this.formEnable(this.$("form")))},i}(App.ControllerSubContent),App.Config.set("Password",{prio:2e3,name:"Password",parent:"#profile",target:"#profile/password",controller:t,permission:["user_preferences.password"]},"NavBarProfile")}.call(this),function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;e=function(e){function s(){this.error=n(this.error,this),this["delete"]=n(this["delete"],this),this.create=n(this.create,this),this.render=n(this.render,this),this.load=n(this.load,this),s.__super__.constructor.apply(this,arguments),this.load(),this.interval(function(t){return function(){return t.load()}}(this),62e3)}return i(s,e),s.prototype.requiredPermission="user_preferences.access_token",s.prototype.header="Token Access",s.prototype.events={"click .js-delete":"delete","click .js-create":"create"},s.prototype.load=function(t){return null==t&&(t=!1),this.ajax({id:"user_access_token",type:"GET",url:this.apiPath+"/user_access_token",success:function(e){return function(n){var i;if(i=n.tokens,t||!e.lastestUpdated||!i||!i[0]||e.lastestUpdated.updated_at!==i[0].updated_at)return e.lastestUpdated=i[0],e.tokens=n.tokens,e.permissions=n.permissions,e.render()}}(this)})},s.prototype.render=function(){return this.html(App.view("profile/token_access")({tokens:this.tokens}))},s.prototype.create=function(e){return e.preventDefault(),new t({container:this.el.closest(".content"),permissions:this.permissions,load:this.load})},s.prototype["delete"]=function(t){var e;return t.preventDefault(),e=function(e){return function(){var n;return n=$(t.target).closest("a").data("token-id"),e.ajax({id:"user_access_token_delete",type:"DELETE",url:e.apiPath+"/user_access_token/"+n,processData:!0,success:function(){return e.load(!0)},error:e.error})}}(this),new App.ControllerConfirm({message:"Sure?",callback:e,container:this.el.closest(".content")})},s.prototype.error=function(t){var e;return e=JSON.parse(t.responseText),this.notify({type:"error",msg:App.i18n.translateContent(e.message||e.error)})},s}(App.ControllerSubContent),t=function(t){function e(){return this.error=n(this.error,this),this.onClosed=n(this.onClosed,this),this.show=n(this.show,this),this.onSubmit=n(this.onSubmit,this),e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.head="Add a Personal Access Token",e.prototype.buttonSubmit="Create",e.prototype.buttonCancel=!0,e.prototype.shown=!0,e.prototype.content=function(){var t,e;return t=$(App.view("profile/token_access_create")({permissions:this.permissions})),e=App.UiElement.date.render({name:"expires_at"}),t.find(".js-date").html(e),t},e.prototype.onSubmit=function(t){var e;return t.preventDefault(),e=this.formParam(t.target),_.isEmpty(e.permission)?void alert("Min. one permission is needed!"):(_.isArray(e.permission)||(e.permission=[e.permission]),this.ajax({id:"user_access_token_create",type:"POST",url:this.apiPath+"/user_access_token",data:JSON.stringify(e),processData:!0,success:this.show,error:this.error}))},e.prototype.show=function(t){return this.load(),this.newToken=t,this.close()},e.prototype.onClosed=function(){var t;if(this.newToken)return t=this,new App.ControllerModal({head:"Your New Personal Access Token",buttonSubmit:"OK, I've copied my token",content:function(){return App.view("profile/token_access_created")({name:t.newToken.name})},onShown:function(){return this.$(".js-select").on("click",t.selectAll)},onCancel:function(){return this.close()},onSubmit:function(){return this.close()},container:this.container})},e.prototype.error=function(t){var e;return e=JSON.parse(t.responseText),this.notify({type:"error",msg:App.i18n.translateContent(e.message||e.error)})},e}(App.ControllerModal),App.Config.set("Token Access",{prio:3200,name:"Token Access",parent:"#profile",target:"#profile/token_access",controller:e,permission:["user_preferences.access_token"]},"NavBarProfile")}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.SettingsArea=function(n){function i(){this.render=t(this.render,this),i.__super__.constructor.apply(this,arguments),this.authenticateCheckRedirect(),App.Setting.fetchFull(this.render,{force:!1})}return e(i,n),i.prototype.render=function(){var t,e,n,i,s,r;if(r=App.Setting.search({filter:{area:this.area}}),!App.Config.get("system_online_service")||(r=_.filter(r,function(t){if(!(t.online_service||t.preferences&&t.preferences.online_service_disable))return t}),!_.isEmpty(r))){for(r=_.filter(r,function(t){if(!t.preferences||!t.preferences.disabled)return t}),r=_.sortBy(r,function(t){if(t.preferences)return t.preferences.prio}),t=[],e=0,i=r.length;e<i;e++)s=r[e],!0!==s.preferences.hidden&&(n=s.preferences.controller&&App[s.preferences.controller]?new App[s.preferences.controller]({setting:s}):new App.SettingsAreaItem({setting:s}),t.push(n.el));return this.html(t)}},i}(App.Controller)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.SettingsAreaItem=function(n){function i(){this.update=t(this.update,this),this.render=t(this.render,this),i.__super__.constructor.apply(this,arguments),this.render()}return e(i,n),i.prototype.template="settings/item",i.prototype.events={"submit form":"update"},i.prototype.render=function(){var t,e,n,i,s,r,o,a,l,c,u,p;if(!this.setting.options)throw"No such options for "+this.setting.name;if(!this.setting.options.form)throw"No such options.form for "+this.setting.name;for(e=0,c=this.setting.options.form,n=0,o=c.length;n<o;n++)i=c[n],e+=1;if(e>1)for(u=this.setting.options.form,s=0,a=u.length;s<a;s++)i=u[s],i["default"]=this.setting.state_current.value[i.name];else i["default"]=this.setting.state_current.value;for(this.configure_attributes=this.setting.options.form,p=this.configure_attributes,r=0,l=p.length;r<l;r++)t=p[r],"boolean"===t.tag&&(t.translate=!0);return this.html(App.view(this.template)({setting:this.setting})),new App.ControllerForm({el:this.el.find(".form-item"),model:{configure_attributes:this.configure_attributes,className:""},autofocus:!1})},i.prototype.update=function(t){var e,n,i,s,r,o,a,l;for(t.preventDefault(),this.formDisable(t),o=this.formParam(t.target),n=0,e=void 0,a=this.setting.options.form,i=0,r=a.length;i<r;i++)s=a[i],n+=1,e=o[s.name];return l=void 0,l=n>1?o:e,App.Setting.set(this.setting.name,l,{doneLocal:function(e){return function(){return e.formEnable(t)}}(this)})},i}(App.Controller)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.SettingsAreaItemDefaultLocale=function(n){function i(){return this.render=t(this.render,this),i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.render=function(){var t,e,n,i,s,r;for(r={},s=App.Locale.all(),e=0,n=s.length;e<n;e++)i=s[e],r[i.locale]=i.name;return t=[{name:"locale_default",display:"",tag:"searchable_select","null":!1,"class":"input",options:r,"default":this.setting.state_current.value}],this.html(App.view(this.template)({setting:this.setting})),new App.ControllerForm({el:this.el.find(".form-item"),model:{configure_attributes:t,className:""},autofocus:!1})},i}(App.SettingsAreaItem)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.SettingsAreaLogo=function(n){function i(){this.submit=t(this.submit,this),this.onLogoPick=t(this.onLogoPick,this),i.__super__.constructor.apply(this,arguments),this.render()}return e(i,n),i.prototype.elements={".logo-preview":"logoPreview"},i.prototype.events={"submit form":"submit","change .js-upload":"onLogoPick"},i.prototype.render=function(){var t;return t=$(App.view("settings/logo")({setting:this.setting})),t.find(".js-loginPreview").html(App.view("generic/login_preview")({logoUrl:this.logoUrl(),logoChange:!0,maintananceChange:!1})),this.html(t)},i.prototype.onLogoPick=function(t){var e,n,i;if(i=new FileReader,i.onload=function(t){return function(e){return t.logoPreview.attr("src",e.target.result)}}(this),e=t.target.files[0])return n=8,e.size&&e.size>1048576*n?(App.Event.trigger("notify",{type:"error",msg:App.i18n.translateContent("File too big, max. %s MB allowed.",n),timeout:2e3}),void this.logoPreview.attr("src","")):i.readAsDataURL(e)},i.prototype.submit=function(t){var e;return t.preventDefault(),this.formDisable(t),this.params=this.formParam(t.target),this.params.logo=this.logoPreview.attr("src"),e=function(e){return function(n){return e.params.logo_resize=n,e.ajax({id:"setting_image_"+e.setting.id,type:"PUT",url:e.apiPath+"/settings/image/"+e.setting.id,data:JSON.stringify(e.params),processData:!0,success:function(n){var i,s,r,o,a,l;if(e.formEnable(t),"ok"===n.result){for(App.Event.trigger("notify",{type:"success",msg:App.i18n.translateContent("Update successful!"),timeout:2e3}),r=n.settings,o=[],i=0,s=r.length;i<s;i++)a=r[i],l=App.Setting.get(a.name),o.push(App.Config.set(name,l));return o}return App.Event.trigger("notify",{type:"error",msg:App.i18n.translateContent(n.message),timeout:2e3})},fail:function(){return e.formEnable(t)}})}}(this),App.ImageService.resizeForApp(this.params.logo,this.logoPreview.width(),this.logoPreview.height(),e)},i}(App.Controller)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.SettingsAreaProxy=function(n){function i(){this.testConnection=t(this.testConnection,this),this.update=t(this.update,this),this.render=t(this.render,this),i.__super__.constructor.apply(this,arguments),this.render()}return e(i,n),i.prototype.events={"submit form":"update","click .js-submit":"update","click .js-test":"testConnection"},i.prototype.render=function(){return this.html(App.view("settings/proxy")({setting:App.Setting.findByAttribute("name","proxy"),proxy:App.Setting.get("proxy"),proxy_username:App.Setting.get("proxy_username"),proxy_password:App.Setting.get("proxy_password"),proxy_no:App.Setting.get("proxy_no")}))},i.prototype.update=function(t){var e;return t.preventDefault(),this.formDisable(t),e=this.formParam(t),App.Setting.set("proxy",e.proxy),App.Setting.set("proxy_username",e.proxy_username),App.Setting.set("proxy_password",e.proxy_password),App.Setting.set("proxy_no",e.proxy_no),this.formEnable(t),this.render()},i.prototype.testConnection=function(t){var e;return t.preventDefault(),e=this.formParam(t),this.ajax({id:"proxy_test",type:"POST",url:this.apiPath+"/proxy",data:JSON.stringify(e),processData:!0,success:function(t){return function(e){return"success"===e.result?(t.$(".js-test").addClass("hide"),t.$(".js-submit").removeClass("hide"),void App.Event.trigger("notify",{type:"success",msg:App.i18n.translateContent("Connection test successful"),timeout:2e3})):new App.ControllerConfirm({head:"Error",message:e.message,buttonClass:"btn--success",buttonCancel:!1,buttonSubmit:"Close",container:t.el.closest(".content")})}}(this)})},i}(App.Controller)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.SettingsAreaStorageProvider=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template="settings/storage_provider",n}(App.SettingsAreaItem)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.SettingsAreaSwitch=function(n){function i(){this.update=t(this.update,this),this.toggleSetting=t(this.toggleSetting,this),this.render=t(this.render,this),i.__super__.constructor.apply(this,arguments),this.render()}return e(i,n),i.prototype.events={"change .js-setting input":"toggleSetting","submit form":"update"},i.prototype.elements={".js-setting input":"uiSetting"},i.prototype.render=function(){var t,e,n,i,s,r,o,a,l,c,u,p,h,d,f,g;for(t=0,p=this.setting.options.form,e=0,o=p.length;e<o;e++)n=p[e],t+=1;if(t>1)for(h=this.setting.options.form,i=0,a=h.length;i<a;i++)n=h[i],n["default"]=this.setting.state_current.value[n.name];else n["default"]=this.setting.state_current.value;for(this.configure_attributes=this.setting.options.form,this.subSetting=[],d=this.setting.preferences.sub,s=0,l=d.length;s<l;s++)u=d[s],this.subSetting.push(App.Setting.findByAttribute("name",u));for(this.html(App.view("settings/switch")({checked:App.Setting.get(this.setting.name),setting:this.setting,subSetting:this.subSetting})),f=this.subSetting,g=[],r=0,c=f.length;r<c;r++)u=f[r],g.push(new App.ControllerForm({el:this.$(".form-item"),params:u.state_current.value,model:{configure_attributes:u.options.form,className:""},autofocus:!1}));return g},i.prototype.toggleSetting=function(){var t;return t=this.uiSetting.prop("checked"),App.Setting.set(this.setting.name,t)},i.prototype.update=function(t){var e,n,i,s,r,o,a,l,c,u,p;for(t.preventDefault(),this.formDisable(t),a=this.formParam(t.target),o=$(t.currentTarget).data("name"),c=App.Setting.findByAttribute("name",o),n=0,e=void 0,l=c.options.form,i=0,r=l.length;i<r;i++)s=l[i],n+=1,e=a[s.name];return u=n>1?{value:a}:{value:e},c.state_current=u,p=this,c.save({done:function(){return p.formEnable(t),App.Event.trigger("notify",{type:"success",msg:App.i18n.translateContent("Update successful!"),timeout:2e3}),App.Setting.preferencesPost(c)},fail:function(e,n){return p.formEnable(t),App.Event.trigger("notify",{type:"error",msg:App.i18n.translateContent(n.error_human||n.error||"Unable to update object!"),timeout:2e3})}})},i}(App.Controller)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.SettingsAreaTicketHookPosition=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template="settings/ticket_hook_position",n}(App.SettingsAreaItem)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.SettingsAreaTicketNumber=function(n){function i(){this.update=t(this.update,this),this.paramsPreferences=t(this.paramsPreferences,this),this.showPreferences=t(this.showPreferences,this),this.render=t(this.render,this),i.__super__.constructor.apply(this,arguments),this.render()}return e(i,n),i.prototype.events={"submit form":"update"},i.prototype.render=function(){var t,e,n,i,s,r,o,a,l,c,u,p,h,d,f,g,m;for(t=0,p=this.setting.options.form,n=0,o=p.length;n<o;n++)i=p[n],t+=1;if(t>1)for(h=this.setting.options.form,s=0,a=h.length;s<a;s++)i=h[s],i["default"]=this.setting.state_current.value[i.name];else i["default"]=this.setting.state_current.value;for(this.map={"Ticket::Number::Increment":"ticket_number_increment","Ticket::Number::Date":"ticket_number_date"},this.configure_attributes=this.setting.options.form,this.html(App.view("settings/ticket_number")({setting:this.setting})),f=function(t){return function(e,n,i){if(t.attributes=i,"ticket_number"===n.name)return t.showPreferences(e.ticket_number)}}(this),g=function(t){return function(){var e,n,i,s,r,o,a,l,c,u,p;if(u=t.formParam(t.$(".js-form")),l=App.Config.get("ticket_hook")+"???","Ticket::Number::Increment"===u.ticket_number){if(c=t.paramsPreferences("Ticket::Number::Increment"),l=""+App.Config.get("ticket_hook")+App.Config.get("system_id"),e="1",c.min_size&&(a=parseInt(c.min_size)-(""+App.Config.get("system_id")).length,c.checksum&&(a-=1),a>1))for(o=2,p=a;2<=p?o<=p:o>=p;2<=p?++o:--o)e="0"+e;l+=e,c.checksum&&(l+="9")}else"Ticket::Number::Date"===u.ticket_number&&(c=t.paramsPreferences("Ticket::Number::Date"),n=new Date,i=n.getDate(),s=n.getMonth()+1,r=n.getFullYear(),l=""+App.Config.get("ticket_hook")+r+s+i+App.Config.get("system_id")+"001",c.checksum&&(l+="9"));return t.$(".js-preview").text(l)}}(this),new App.ControllerForm({el:this.el.find(".js-form"),model:{configure_attributes:this.configure_attributes,className:""},autofocus:!1,handlers:[f,g]}),u=this.setting.preferences.settings_included||["ticket_number_increment","ticket_number_date"],r=0,l=u.length;r<l;r++)c=u[r],d=App.Setting.findByAttribute("name",c),m=App.Setting.get(c),e=$(App.view("settings/"+c)({setting:d})),new App.ControllerForm({el:e.find(".js-formItem"),model:{configure_attributes:d.options.form,className:""},autofocus:!1,params:m,handlers:[g]}),this.$(".js-formPreferences").append(e);return this.showPreferences(i["default"])},i.prototype.showPreferences=function(t){return this.$(".js-formPreferencesItem").addClass("hidden"),this.$('.js-formPreferencesItem[data-backend="'+t+'"]').removeClass("hidden")},i.prototype.paramsPreferences=function(t){return this.formParam(this.$('.js-formPreferencesItem[data-backend="'+t+'"] form'))},i.prototype.update=function(t){var e,n,i,s;return t.preventDefault(),this.formDisable(this.$(".js-form")),e=this.formParam(this.$(".js-form")),e.ticket_number&&(n=this.paramsPreferences(e.ticket_number),(i=this.map[e.ticket_number])&&n&&App.Setting.set(i,n)),this.setting.state_current={value:e.ticket_number},s=this,this.setting.save({done:function(e){return function(){return s.formEnable(t),App.Event.trigger("notify",{type:"success",msg:App.i18n.translateContent("Update successful!"),timeout:2e3}),App.Setting.preferencesPost(e.setting)}}(this),fail:function(e,n){return s.formEnable(t),App.Event.trigger("notify",{type:"error",msg:App.i18n.translateContent(n.error_human||n.error||"Unable to update object!"),timeout:2e3})}})},i}(App.Controller)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.SettingsForm=function(n){function i(){this.update=t(this.update,this),this.render=t(this.render,this),i.__super__.constructor.apply(this,arguments),this.authenticateCheckRedirect(),App.Setting.fetchFull(this.render,{force:!1})}return e(i,n),i.prototype.events={"submit form":"update"},i.prototype.render=function(){var t,e,n,i,s,r,o,a;if(o=App.Setting.search({filter:{area:this.area}}),!App.Config.get("system_online_service")||(o=_.filter(o,function(t){if(!(t.online_service||t.preferences&&t.preferences.online_service_disable))return t}),!_.isEmpty(o))){for(o=_.filter(o,function(t){if(!t.preferences||!t.preferences.disabled)return t}),o=_.sortBy(o,function(t){if(t.preferences)return t.preferences.prio}),i=$(App.view("settings/form")({settings:o})),e=0,n=o.length;e<n;e++)r=o[e],t=r.options.form,a=App.Setting.get(r.name),s={},s[r.name]=a,new App.ControllerForm({el:i.find("[data-name="+r.name+"]"),model:{configure_attributes:t},params:s});return this.html(i)}},i.prototype.update=function(t){var e,n,i,s,r,o;t.preventDefault(),this.formDisable(t),i=this.formParam(t.target),r=this,e=0,s=[];for(n in i)o=i[n],App.Setting.findByAttribute("name",n)?(e+=1,s.push(App.Setting.set(n,o,{done:function(){return r.formEnable(t),e-=1,0===e&&App.Event.trigger("notify",{type:"success",msg:App.i18n.translateContent("Update successful!"),timeout:2e3}),App.Setting.preferencesPost(this)},fail:function(t,e){return App.Event.trigger("notify",{type:"error",msg:App.i18n.translateContent(e.error_human||e.error||"Unable to update object!"),timeout:2e3})}}))):s.push(void 0);return s},i}(App.Controller)}.call(this),function(){App.UiElement.ApplicationUiElement=function(){function t(){}return t.sortOptions=function(t){var e,n,i,s,r,o,a,l,c;if(null!==t.sortBy&&!_.isEmpty(t.options)){if(_.isArray(t.options))return void(t.order&&"DESC"===t.order&&(t.options=t.options.reverse()));s=[],r={},a=t.options;for(e in a)l=a[e],c=l.toString().toLowerCase(),s.push(c),r[c]=e;for(s=s.sort(),t.order&&"DESC"===t.order&&(s=s.reverse()),o=[],n=0,i=s.length;n<i;n++)e=s[n],o.push(r[e]);return t.options=o}},t.addNullOption=function(t){if(t.options&&t.nulloption)return _.isArray(t.options)?t.options.unshift({name:"-",value:""}):t.options[""]="-"},t.getConfigOptionList=function(t){var e,n,i,s,r,o,a,l,c,u;if(!_.isEmpty(t.options)){if(u=t.options,t.options=[],_.isArray(u))for(n=0,r=u.length;n<r;n++)c=u[n],t.translate&&(c.name=App.i18n.translateInline(c.name)),t.options.push(c);else for(e=function(t){return u[t]&&u[t].toString?u[t].toString():""},l=_.keys(u).sort(function(t,n){return e(t).localeCompare(e(n))}),i=0,o=l.length;i<o;i++)s=l[i],a=u[s],t.translate&&(a=App.i18n.translateInline(a)),t.options.push({name:a,value:s});return t.sortBy=null}},t.getRelationOptionList=function(t,e){var n,i,s,r,o,a,l,c,u,p,h,d,f,g,m,v,y,b,w,k,T;if(!_.isEmpty(t.relation)&&App[t.relation]){if(t.options=[],g=[],t.filter)if(App.Log.debug("ControllerForm","_getRelationOptionList:filter",t.filter),"function"==typeof t.filter)App.Log.debug("ControllerForm","_getRelationOptionList:filter-function"),n=App[t.relation].search({sortBy:t.sortBy}),g=t.filter(n,"collection",e);else if(t.filter[t.name])for(s=t.filter[t.name],App.Log.debug("ControllerForm","_getRelationOptionList:filter-data",s),b=App[t.relation].search({sortBy:t.sortBy}),o=0,u=b.length;o<u;o++)for(y=b[o],a=0,p=s.length;a<p;a++)l=s[a],y.id===l&&g.push(y);else if(t.filter&&_.isArray(t.filter)){for(App.Log.debug("ControllerForm","_getRelationOptionList:filter-array",t.filter),w=App[t.relation].search({sortBy:t.sortBy}),c=0,h=w.length;c<h;c++)for(y=w[c],k=t.filter,m=0,d=k.length;m<d;m++)l=k[m],(y.id===l||y.id&&l&&y.id.toString()===l.toString())&&g.push(y);if(e[t.name]){for(r=!1,v=0,f=g.length;v<f;v++)T=g[v],T.id.toString()===e[t.name].toString()&&(r=!0);r||(i=App[t.relation].find(e[t.name]),g.push(i))}}else App.Log.debug("ControllerForm","_getRelationOptionList:filter-data no filter matched"),g=App[t.relation].search({sortBy:t.sortBy});else App.Log.debug("ControllerForm","_getRelationOptionList:filter-no filter defined"),g=App[t.relation].search({sortBy:t.sortBy});return App.Log.debug("ControllerForm","_getRelationOptionList",t,g),this.buildOptionList(g,t)}},t.buildOptionList=function(t,e){var n,i,s,r,o,a;for(r=0,o=t.length;r<o;r++)s=t[r],n="active"in s,i=!1,n&&!s.active&&(i=this._selectedOptionsIsSelected(e.value,{name:s.name||"",value:s.id})),(s.active||!n||i)&&(a="?",s.displayName?a=s.displayName():s.name&&(a=s.name),e.translate&&(a=App.i18n.translateInline(a)),e.options.push({value:s.id,note:s.note,name:a,title:s.email?s.email:a}));return e.sortBy=null},t.filterOption=function(t){if(t.filter&&!_.isEmpty(t.options)&&"function"==typeof t.filter)return App.Log.debug("ControllerForm","_filterOption:filter-function"),t.options=t.filter(t.options,t)},t.selectedOptions=function(t){var e,n,i,s,r,o,a,l,c,u,p,h;if(t.options){for(l=t.options,e=0,s=l.length;e<s;e++)a=l[e],this._selectedOptionsIsSelected(t.value,a)&&(a.selected="selected",a.checked="checked");for(h=!1,c=t.options,n=0,r=c.length;n<r;n++)a=c[n],(a.selected||a.checked)&&(h=!0);if(!h){for(u=t.options,p=[],i=0,o=u.length;i<o;i++)a=u[i],this._selectedOptionsIsSelected(t["default"],a)?(a.selected="selected",p.push(a.checked="checked")):p.push(void 0);return p}}},t._selectedOptionsIsSelected=function(t,e){var n,i,s;if(_.isArray(t))for(n=0,i=t.length;n<i;n++)if(s=t[n],this._selectedOptionsIsSelectedItem(s,e))return!0;return!(null!==t&&void 0!==t&&"string"!=typeof t&&"number"!=typeof t&&"boolean"!=typeof t||!this._selectedOptionsIsSelectedItem(t,e))},t._selectedOptionsIsSelectedItem=function(t,e){var n,i,s;if(s=t,null!==s&&void 0!==s||(s=""),i=e.value,null!==i&&void 0!==i||(i=""),n=e.name,null!==n&&void 0!==n||(n=""),"string"==typeof s||"number"==typeof s||"boolean"==typeof s){if(i.toString()===s.toString()||n.toString()===s.toString())return!0}else if(s&&i&&_.include(s,i)||s&&n&&_.include(s,n))return!0;return!1},t.disabledOptions=function(t){var e,n,i,s,r;if(t.options&&_.isArray(t.options)){for(s=t.options,r=[],e=0,n=s.length;e<n;e++)i=s[e],!0===i.disable?r.push(i.disabled="disabled"):r.push(i.disabled="");return r}},t}()}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.UiElement.active=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.render=function(t,e){var n;return t["null"]=!1,t.translate=!0,t.options=[{name:"active",value:!0},{name:"inactive",value:!1}],this.getConfigOptionList(t,e),this.sortOptions(t,e),this.selectedOptions(t,e),n=$(App.view("generic/select")({attribute:t})),n.find("select").data("field-type","boolean"),n},n}(App.UiElement.ApplicationUiElement)}.call(this),function(){App.UiElement.autocompletion=function(){function t(){}return t.render=function(t,e){var n,i;return e[t.name+"_autocompletion_value_shown"]&&(t.valueShown=e[t.name+"_autocompletion_value_shown"]),i=$(App.view("generic/autocompletion")({attribute:t})),n=function(n){return function(){var i,s,r,o;return s="#"+t.id,r="#"+t.id+"_autocompletion",n.callback=t.callback,n.callback&&t.value&&n.params&&n.callback(n.params),i=function(t,i){if($(s).val(i.id).trigger("change"),$(s+"_autocompletion_value_shown").val(i.value),n.callback)return e=App.ControllerForm.params(form),n.callback(e)},o=t.source,"string"==typeof o&&(o=o.replace("#{@apiPath}",App.Config.get("api_path"))),$(r).autocomplete({source:o,minLength:t.minLengt||3,select:function(t,e){return i(t,e.item)}})}}(this),App.Delay.set(n,280,void 0,"form_autocompletion"),i},t}()}.call(this),function(){App.UiElement.autocompletion_ajax=function(){function t(){}return t.render=function(t,e){var n,i,s;return null==e&&(e={}),(e[t.name]||t.value)&&(n=App[t.relation].find(e[t.name]||t.value),s=n.displayName()),i=new App.SearchableAjaxSelect({attribute:{value:e[t.name]||t.value,valueName:s,name:t.name,id:e.organization_id||t.value,placeholder:App.i18n.translateInline("Search..."),limit:40,object:t.relation,ajax:!0}}),i.element()},t}()}.call(this),function(){var t=[].slice;App.UiElement.basedate=function(){function e(){}return e.templateName=function(){throw"Must override in a subclass"},e.render=function(t){var e,n;return e=_.clone(t),e.nameRaw=e.name,e.name="{"+this.templateName()+"}"+e.name,n=$(App.view("generic/"+this.templateName())({attribute:e})),$.fn.datepicker.defaults.template=App.view("generic/datepicker")(),$.fn.datepicker.dates.custom=this.buildCustomDates(),this.applyPickers(n,e),this.bindEvents(n,e),n},e.log=function(){var e,n,i;return n=arguments[0],e=2<=arguments.length?t.call(arguments,1):[],(i=App.Log).debug.apply(i,["Ui.element."+this.templateName()+"."+n].concat(t.call(e)))},e.applyPickers=function(t,e){return t.find(".js-datepicker").datepicker({weekStart:1,autoclose:!0,todayBtn:"linked",todayHighlight:!0,format:App.i18n.timeFormat().date,rtl:"rtl"===App.i18n.dir(),container:t,language:"custom"}),this.setNewTimeInitial(t,e)},e.bindEvents=function(t,e){return t.find("input").bind("focus",function(){return t.find(".js-datepicker").datepicker("rerender")}).bind("keyup blur change",function(n){return function(){return n.setNewTime(t,e,0),n.validation(t,e,!0)}}(this)),t.bind("validate",function(n){return function(){return n.validation(t,e)}}(this))},e.setNewTime=function(t,e,n){var i;if(null==n&&(n=!1),i=this.currentInput(t,e))return this.validateInput(i)?t.find('[name="'+e.name+'"]').val(this.buildTimestamp(i)):void t.find('[name="'+e.name+'"]').val("")},e.currentInput=function(t,e){var n,i,s,r,o;return(i=t.find(".js-datepicker").datepicker("getDate"))&&"Invalid Date"!==i.toString()?(this.log("setNewTime",i),o=i.getFullYear(),r=i.getMonth()+1,s=i.getDate(),n=App.Utils.formatTime(o)+"-"+App.Utils.formatTime(r,2)+"-"+App.Utils.formatTime(s,2),[n]):(t.find('[name="'+e.name+'"]').val(""),!1)},e.validateInput=function(t){return""!==t[0]},e.buildTimestamp=function(){throw"Must override in a subclass"},e.dateSetter=function(){throw"Must override in a subclass"},e.setNewTimeInitial=function(t,e){var n,i;return i=t.find('[name="'+e.name+'"]').val(),this.log("setNewTimeInitial",i),i?(n=new Date(Date.parse(i)),this.log("setNewTimeInitial",i,n),
this.setTimestamp(t,n),t.find(".js-datepicker").datepicker("update")):void this.setNoTimestamp(t)},e.setNoTimestamp=function(){},e.setTimestamp=function(t,e){return t.find(".js-datepicker").datepicker(this.dateSetter(),e)},e.validation=function(t,e){var n,i,s,r,o;if("self"===e.validationContainer?t.find(".js-datepicker").removeClass("has-error"):(t.closest(".form-group").removeClass("has-error"),t.find(".has-error").removeClass("has-error"),t.find(".help-inline").html(""),t.closest(".form-group").find(".help-inline").html("")),o=t.find('[name="'+e.name+'"]').val(),n={},o?new Date(Date.parse(o)):e["null"]||(n[e.name]="missing"),this.log("validation",n),!_.isEmpty(n)){if("self"===e.validationContainer)return t.find(".js-datepicker").addClass("has-error");i=t.closest(".form-group"),r=[];for(s in n)n[s],r.push(i.addClass("has-error"));return r}},e.buildCustomDates=function(){var t;return t={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysMin:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"today",clear:"clear"},App.i18n.translateDeep(t)},e}()}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.UiElement["boolean"]=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.render=function(t,e){var n;return _.isEmpty(t.options)&&(t.options=[{name:"yes",value:!0},{name:"no",value:!1}],t.translate=!0),this.getConfigOptionList(t,e),this.sortOptions(t,e),this.selectedOptions(t,e),n=$(App.view("generic/select")({attribute:t})),n.find("select").data("field-type","boolean"),n},n}(App.UiElement.ApplicationUiElement)}.call(this),function(){App.UiElement.business_hours=function(){function t(){}return t.render=function(t){var e,n;return e=_.clone(t),e.nameRaw=e.name,e.name="{business_hours}"+e.name,e.value||(e.value={mon:{active:!0,timeframes:[["09:00","17:00"]]},tue:{active:!0,timeframes:[["09:00","17:00"]]},wed:{active:!0,timeframes:[["09:00","17:00"]]},thu:{active:!0,timeframes:[["09:00","17:00"]]},fri:{active:!0,timeframes:[["09:00","17:00"]]},sat:{active:!1,timeframes:[["10:00","14:00"]]},sun:{active:!1,timeframes:[["10:00","14:00"]]}}),n=new App.BusinessHours({attribute:e,hours:e.value}),n.render(),n.el},t}()}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.UiElement.checkbox=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.render=function(t,e){return this.getConfigOptionList(t,e),this.getRelationOptionList(t,e),this.addNullOption(t,e),this.sortOptions(t,e),this.selectedOptions(t,e),this.disabledOptions(t,e),this.filterOption(t,e),$(App.view("generic/checkbox")({attribute:t}))},n}(App.UiElement.ApplicationUiElement)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.UiElement.checkboxTicketAttributes=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.render=function(t,e){var n,i,s,r,o;n=[],r=App.Ticket.attributesGet();for(i in r)o=r[i],"password"!==o.type&&"tag"!==o.type&&"tags"!==o.name&&(s=o.name,"_ids"===o.name.substr(o.name.length-4,4)?s=o.name.substr(0,o.name.length-4):"_id"===o.name.substr(o.name.length-3,3)&&(s=o.name.substr(0,o.name.length-3)),n.push({value:s,name:o.display}));return t.sortBy=null,t.item_class="checkbox",t.options=n,App.UiElement.checkbox.render(t,e)},n}(App.UiElement.ApplicationUiElement)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.UiElement.column_select=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.render=function(t,e){return t.multiple="multiple",this.getConfigOptionList(t,e),this.getRelationOptionList(t,e),this.addNullOption(t,e),this.sortOptions(t,e),this.selectedOptions(t,e),this.disabledOptions(t,e),this.filterOption(t,e),new App.ColumnSelect({attribute:t}).element()},n}(App.UiElement.ApplicationUiElement)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.UiElement.date=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.templateName=function(){return"date"},n.buildTimestamp=function(t){return t[0]},n.dateSetter=function(){return"setUTCDate"},n}(App.UiElement.basedate)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.UiElement.datetime=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.templateName=function(){return"datetime"},n.applyPickers=function(t,e){return n.__super__.constructor.applyPickers.call(this,t,e),t.find(".js-timepicker").timepicker()},n.currentInput=function(t,e){var i;return i=n.__super__.constructor.currentInput.call(this,t,e),_.isArray(i)&&i.push(t.find(".js-timepicker").val()),i},n.validateInput=function(t){return""!==t[0]||""!==t[1]},n.setNoTimestamp=function(t){return t.find(".js-timepicker").val("08:00")},n.setTimestamp=function(t,e){var i,s,r;return n.__super__.constructor.setTimestamp.call(this,t,e),i=e.getHours(),s=e.getMinutes(),r=App.Utils.formatTime(i,2)+":"+App.Utils.formatTime(s,2),t.find(".js-timepicker").val(r)},n.buildTimestamp=function(t){var e,n;return n=t[0]+"T"+t[1]+":00.000Z",e=new Date(Date.parse(n)),e.setMinutes(e.getMinutes()+e.getTimezoneOffset()),this.log("setNewTime",e.toString()),e.toISOString().replace(/\d\d\.\d\d\dZ$/,"00.000Z")},n.dateSetter=function(){return"setDate"},n}(App.UiElement.basedate)}.call(this),function(){App.UiElement.datetime_search=function(){function t(){}return t.render=function(t){var e;return e=_.clone(t),e.disable_feature=!0,e["null"]=!1,App.UiElement.datetime.render(e)},t}()}.call(this),function(){App.UiElement.holiday_selector=function(){function t(){}return t.render=function(t){var e,n,i,s,r,o,a,l,c;if(s={},t.value)for(s=t.value,o=_.keys(s).sort(),r={},a=0,c=o.length;a<c;a++)i=o[a],r[i]=s[i];return l=$(App.view("calendar/holiday_selector")({attribute:t,days:r})),l.find(".js-boolean").data("field-type","boolean"),e={name:t.name+"_date",disable_feature:!0,"class":"form-control--small",validationContainer:"self"},n=App.UiElement.date.render(e),l.find(".js-datePicker").html(n),l.delegate(".js-active","click",function(t){var e,n,i;return e=$(t.target).prop("checked"),i=$(t.target).closest("tr"),n=$(t.target).closest("tr").find(".js-summary"),e?(i.removeClass("is-inactive"),n.prop("readonly",!1),n.removeClass("is-disabled")):(i.addClass("is-inactive"),n.prop("readonly",!0),n.addClass("is-disabled"))}),l.delegate(".js-remove","click",function(t){return $(t.target).closest("tr").remove()}),l.find(".js-summary").bind("keydown",function(t){if(13===t.which)return t.preventDefault(),l.find(".js-add").click()}),l.find(".js-add").bind("click",function(t){var e,n,i;if((e=$(t.target).closest("tr").find('[name="{date}public_holidays_date"]').val())&&(n=$(t.target).closest("tr").find(".js-summary").val()))return l.find("[data-date="+e+"]").get(0)?void alert(App.i18n.translateInline("Aready exists!")):($(t.target).closest("tr").find(".js-summary").val(""),i=App.view("calendar/holiday_selector_placeholder")({placeholderDate:e,placeholderSummary:n,nameSummary:"public_holidays::"+e+"::summary",nameActive:"public_holidays::"+e+"::active"}),l.find(".settings-list-controlRow").before(i),l.find(".js-boolean").data("field-type","boolean"))}),l},t}()}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.UiElement.ical_feed=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.render=function(t){var e,n,i,s,r,o;return e=App.Config.get("ical_feeds")||{},n=App.Utils.sortByValue(e),i=$(App.view("generic/ical_feed")({attribute:t,icalFeeds:n})),s=function(){if(!i.find(".js-checkList").prop("checked")&&i.find(".js-list").val())return i.find(".js-checkList").prop("checked",!0),i.find(".js-checkManual").prop("checked",!1)},r=function(){if(!i.find(".js-checkManual").prop("checked"))return i.find(".js-checkList").prop("checked",!1),i.find(".js-checkManual").prop("checked",!0)},o=function(t){return t||(t=i.find(".js-check:checked").attr("value")),"manual"===t?i.find(".js-shadow").val(i.find(".js-manual").val()):i.find(".js-shadow").val(i.find(".js-list").val())},e[t.value]?s():(r(),i.find(".js-manual").val(t.value)),i.find(".js-check").bind("change",function(){return o()}),i.find(".js-list").bind("click change",function(){return s(),o("list")}),i.find(".js-manual").bind("keyup focus blur",function(){return r(),o("manual")}),i},n}(App.UiElement.ApplicationUiElement)}.call(this),function(){App.UiElement.input=function(){function t(){}return t.render=function(t){return $(App.view("generic/input")({attribute:t}))},t}()}.call(this),function(){App.UiElement.integer=function(){function t(){}return t.render=function(t){var e;return t.type="number",t.step="1",e=$(App.view("generic/input")({attribute:t})),e.data("field-type","integer"),e},t}()}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.UiElement.object_manager_attribute=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.render=function(t,e){var n,i,s,r,o,a,l;if(null==e&&(e={}),e.data_option_new&&!_.isEmpty(e.data_option_new)&&(e.data_option=e.data_option_new),"select"===t.value&&null!=e.data_option&&null!=e.data_option.options&&(a=_.map(e.data_option.options,function(t,e){return[e.toString(),t.toString()]}),e.data_option.sorted=a.sort(function(t,e){return t[1].localeCompare(e[1])})),s=$(App.view("object_manager/attribute")({attribute:t})),l=function(n){return function(i,s,r,o,a){var l,c;return c=a.closest(".js-data"),l=$(App.view("object_manager/attribute/"+i.data_type)({attribute:t,params:e})),n[i.data_type](l,i,e,t),c.find(".js-dataMap").html(l),c.find(".js-dataScreens").html(n.dataScreens(t,i,e))}}(this),o={datetime:"Datetime",date:"Date",input:"Text",select:"Select",tree_select:"Tree Select","boolean":"Boolean",integer:"Integer"},e.data_type)for(r in o)o[r],r!==e.data_type&&delete o[r];return n=[{name:t.name,display:"",tag:"select","null":!1,options:o,translate:!0,"default":"input",disabled:t.disabled}],i=new App.ControllerForm({model:{configure_attributes:n},noFieldset:!0,handlers:[l],params:e}),s.find(".js-dataType").html(i.form),s.find(".js-boolean").data("field-type","boolean"),s},n.dataScreens=function(t,e,n){var i,s,r,o,a,l,c,u,p,h,d,f,g;if(u=n.object,p={Ticket:{"ticket.customer":{create_middle:{shown:!0,required:!1},edit:{shown:!0,required:!1}},"ticket.agent":{create_middle:{shown:!0,required:!1},edit:{shown:!0,required:!1}}},User:{"ticket.customer":{create:{shown:!0,required:!1},view:{shown:!0},signup:{shown:!1,required:!1}},"ticket.agent":{create:{shown:!0,required:!1},edit:{shown:!0,required:!1},view:{shown:!0},invite_customer:{shown:!1,required:!1}},"admin.user":{create:{shown:!0,required:!1},edit:{shown:!0,required:!1},view:{shown:!0},invite_agent:{shown:!1,required:!1},invite_customer:{shown:!1,required:!1}}},Organization:{"ticket.customer":{view:{shown:!0}},"ticket.agent":{create:{shown:!0,required:!1},edit:{shown:!0,required:!1},view:{shown:!0}},"admin.organization":{create:{shown:!0,required:!1},edit:{shown:!0,required:!1},view:{shown:!0}}},Group:{"admin.group":{create:{shown:!0,required:!1},edit:{shown:!0,required:!1},view:{shown:!0}}}},a=!1,n&&!n.id&&(a=!0),r=p[u],a)for(d in r){g=r[d];for(f in g){h=g[f];for(c in h)o=h[c],n.screens||(n.screens={}),(i=n.screens)[f]||(i[f]={}),(s=n.screens[f])[d]||(s[d]={}),n.screens[f][d][c]=o}}return l=$(App.view("object_manager/screens")({attribute:t,data:p[u],params:n,init:a})),l.find(".js-boolean").data("field-type","boolean"),l},n.input=function(t,e,n){var i,s,r,o;return i=[{name:"data_option::default",display:"Default",tag:"input",type:"text","null":!0,"default":""}],s=new App.ControllerForm({model:{configure_attributes:i},noFieldset:!0,params:n}),i=[{name:"data_option::type",display:"Type",tag:"select","null":!1,"default":"text",options:{text:"Text",tel:"Phone",email:"Email",url:"Url"},translate:!0}],o=new App.ControllerForm({model:{configure_attributes:i},noFieldset:!0,params:n}),i=[{name:"data_option::maxlength",display:"Maxlength",tag:"integer","null":!1,"default":120}],r=new App.ControllerForm({model:{configure_attributes:i},noFieldset:!0,params:n}),t.find(".js-inputDefault").html(s.form),t.find(".js-inputType").html(o.form),t.find(".js-inputMaxlength").html(r.form)},n.datetime=function(t,e,n){var i,s,r,o;return i=[{name:"data_option::future",display:"Allow future",tag:"boolean","null":!1,"default":!0}],r=new App.ControllerForm({model:{configure_attributes:i},noFieldset:!0,params:n}),i=[{name:"data_option::past",display:"Allow past",tag:"boolean","null":!1,"default":!0}],o=new App.ControllerForm({model:{configure_attributes:i},noFieldset:!0,params:n}),i=[{name:"data_option::diff",display:"Default time Diff (minutes)",tag:"integer","null":!1,"default":24}],s=new App.ControllerForm({model:{configure_attributes:i},noFieldset:!0,params:n}),t.find(".js-datetimeFuture").html(r.form),t.find(".js-datetimePast").html(o.form),t.find(".js-datetimeDiff").html(s.form)},n.date=function(t,e,n){var i,s,r,o;return i=[{name:"data_option::future",display:"Allow future",tag:"boolean","null":!1,"default":!0}],r=new App.ControllerForm({model:{configure_attributes:i},noFieldset:!0,params:n}),i=[{name:"data_option::past",display:"Allow past",tag:"boolean","null":!1,"default":!0}],o=new App.ControllerForm({model:{configure_attributes:i},noFieldset:!0,params:n}),i=[{name:"data_option::diff",display:"Default time Diff (hours)",tag:"integer","null":!1,"default":24}],s=new App.ControllerForm({model:{configure_attributes:i},noFieldset:!0,params:n}),t.find(".js-dateFuture").html(r.form),t.find(".js-datePast").html(o.form),t.find(".js-dateDiff").html(s.form)},n.integer=function(t,e,n){var i,s,r,o;return i=[{name:"data_option::default",display:"Default",tag:"integer","null":!0,"default":"",min:1}],s=new App.ControllerForm({model:{configure_attributes:i},noFieldset:!0,params:n}),i=[{name:"data_option::min",display:"Minimal",tag:"integer","null":!1,"default":0,min:1}],o=new App.ControllerForm({model:{configure_attributes:i},noFieldset:!0,params:n}),i=[{name:"data_option::max",display:"Maximal",tag:"integer","null":!1,"default":999999999,min:2}],r=new App.ControllerForm({model:{configure_attributes:i},noFieldset:!0,params:n}),t.find(".js-integerDefault").html(s.form),t.find(".js-integerMin").html(o.form),t.find(".js-integerMax").html(r.form)},n.select=function(t){var e;return t.find(".js-add").on("click",function(e){var n,i,s,r,o;return n=$(e.target).closest("tr"),i=n.find(".js-key").val(),o=n.find(".js-value").val(),n.find(".js-selected[value]").attr("value",i),r=n.find(".js-selected").prop("checked"),s=t.find(".js-template").clone().removeClass("js-template"),s.find(".js-key").val(i),s.find(".js-value").val(o),s.find(".js-value[value]").attr("name","data_option::options::"+i),s.find(".js-selected").prop("checked",r),s.find(".js-selected").val(i),s.find(".js-selected").attr("name","data_option::default"),t.find(".js-Table tr").last().before(s),n.find(".js-key").val(""),n.find(".js-value").val(""),n.find(".js-selected").prop("checked",!1)}),t.on("change",".js-key",function(t){var e,n;return e=$(t.target).val(),n=$(t.target).closest("tr").find(".js-value[name]"),n.attr("name","data_option::options::"+e)}),t.on("click",".js-remove",function(t){return $(t.target).closest("tr").remove()}),e=void 0,t.on("click",".js-selected",function(t){var n,i;return n=$(t.target).prop("checked"),i=$(t.target).attr("value"),n&&e&&e===i?($(t.target).prop("checked",!1),void(e=!1)):e=i})},n.buildRow=function(t,e,n,i){var s,r,o,a,l,c;if(null==n&&(n=0),o=t.find(".js-template").clone().removeClass("js-template"),o.find(".js-key").attr("level",n),o.find(".js-key").val(e.name),o.find("td").first().css("padding-left",20*n+10+"px"),5===n&&o.find(".js-addChild").addClass("hide"),i)return void i.after(o);if(t.find(".js-treeTable").append(o),e.children){for(a=e.children,l=[],s=0,r=a.length;s<r;s++)c=a[s],l.push(this.buildRow(t,c,n+1));return l}},n.tree_select=function(t,e,n){var i,s,r,o,a;if(n.data_option||(n.data_option={}),(i=n.data_option).options||(i.options=[]),_.isEmpty(n.data_option.options))this.buildRow(t,{});else for(a=n.data_option.options,r=0,o=a.length;r<o;r++)s=a[r],this.buildRow(t,s);return t.on("click",".js-addRow",function(e){return function(n){var i,s;return n.stopPropagation(),n.preventDefault(),i=$(n.currentTarget).closest("tr"),s=parseInt(i.find(".js-key").attr("level")),e.buildRow(t,{},s,i)}}(this)),t.on("click",".js-addChild",function(e){return function(n){var i,s;return n.stopPropagation(),n.preventDefault(),i=$(n.currentTarget).closest("tr"),s=parseInt(i.find(".js-key").attr("level"))+1,e.buildRow(t,{},s,i)}}(this)),t.on("click",".js-remove",function(t){var e,n,i,s,r,o,a,l;for(t.stopPropagation(),t.preventDefault(),t.stopPro,e=$(t.target).closest("tr"),r=parseInt(e.find(".js-key").attr("level")),l=0,o=e,n=[e];;){if(o=o.next(),!o.get(0))break;if(parseInt(o.find(".js-key").attr("level"))<=r)break;l+=1,n.push(o)}if(0===l||confirm("Delete "+l+" sub elements?")){for(a=[],i=0,s=n.length;i<s;i++)e=n[i],a.push(e.remove());return a}})},n["boolean"]=function(t){var e;return e=void 0,t.on("click",".js-selected",function(t){var n,i;return n=$(t.target).prop("checked"),i=$(t.target).attr("value"),n&&e&&e===i?($(t.target).prop("checked",!1),void(e=!1)):e=i})},n.autocompletion=function(t,e,n){var i,s,r,o;return o=[{name:"data_option::default",display:"Default",tag:"input",type:"text","null":!0,"default":""}],i=new App.ControllerForm({model:{configure_attributes:o},noFieldset:!0,params:n}),o=[{name:"data_option::url",display:"Url (AJAX Endpoint)",tag:"input",type:"url","null":!1,"default":"",placeholder:"https://example.com/serials"}],r=new App.ControllerForm({model:{configure_attributes:o},noFieldset:!0,params:n}),o=[{name:"data_option::method",display:"Method (AJAX Endpoint)",tag:"input",type:"url","null":!1,"default":"",placeholder:"GET"}],s=new App.ControllerForm({model:{configure_attributes:o},noFieldset:!0,params:n}),t.find(".js-autocompletionDefault").html(i.form),t.find(".js-autocompletionUrl").html(r.form),t.find(".js-autocompletionMethod").html(s.form)},n}(App.UiElement.ApplicationUiElement)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.UiElement.permission=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.render=function(t,e){var n,i,s,r,o,a,l,c,u,p,h,d;for(null==e&&(e={}),h=App.Permission.search({sortBy:"name"}),s=[],o={},r=App.Group.search({sortBy:"name"}),a=0,u=r.length;a<u;a++)if(n=r[a],n.active&&(s.push(n),e.group_ids))for(d=e.group_ids,c=0,p=d.length;c<p;c++)i=d[c],i.toString()===n.id.toString()&&(o[n.id]=!0);return l=$(App.view("generic/permission")({attribute:t,params:e,permissions:h,groups:s,groupsSelected:o,groupAccesses:App.Group.accesses()})),l.find("[name=permission_ids]").bind("change",function(t){var e,n,i,s,r,o,a,c,u,p,d,f,g,m;if(n=$(t.currentTarget),e=n.prop("checked"),(d=n.prop("value"))&&(p=App.Permission.find(d))){if(!p.name.match(/\./))for(i=0,r=h.length;i<r;i++)c=h[i],g=new RegExp("^"+p.name),c.name.match(g)&&(a=l.find("[name=permission_ids][value="+c.id+"]").closest(".js-subPermissionList"),e?a.addClass("hide"):a.removeClass("hide"));if(e&&p.preferences.not){for(f=p.preferences.not,m=[],s=0,o=f.length;s<o;s++)c=f[s],u=App.Permission.findByAttribute("name",c),u?m.push(l.find("[name=permission_ids][value="+u.id+"]").prop("checked",!1)):m.push(void 0);return m}}}),l},n}(App.UiElement.ApplicationUiElement)}.call(this),function(){App.UiElement.postmaster_match=function(){function t(){}return t.defaults=function(){return{general:{name:"Basic Settings",options:[{value:"from",name:"From"},{value:"to",name:"To"},{value:"cc",name:"Cc"},{value:"x-any-recipient",name:"Any Recipient"},{value:"subject",name:"Subject"},{value:"body",name:"Body"}]},expert:{name:"Expert Settings",options:[{value:"x-spam",name:"X-Spam"},{value:"x-spam-flag",name:"X-Spam-Flag"},{value:"x-spam-level",name:"X-Spam-Level"},{value:"x-spam-score",name:"X-Spam-Score"},{value:"x-spam-status",name:"X-Spam-Status"},{value:"x-dspam-result",name:"X-DSPAM-Result"},{value:"x-dspam-confidence",name:"X-DSPAM-Confidence"},{value:"x-dspam-probability",name:"X-DSPAM-Probability"},{value:"x-dspam-signature",name:"X-DSPAM-Signature"},{value:"importance",name:"Importance"},{value:"x-priority",name:"X-Priority"},{value:"organization",name:"Organization"},{value:"x-original-to",name:"X-Original-To"},{value:"delivered-to",name:"Delivered-To"},{value:"envelope-to",name:"Envelope-To"},{value:"return-path",name:"Return-Path"},{value:"mailing-list",name:"Mailing-List"},{value:"list-id",name:"List-Id"},{value:"list-archive",name:"List-Archive"},{value:"mailing-list",name:"Mailing-List"},{value:"message-id",name:"Message-Id"},{value:"in-reply-to",name:"In-Reply-To"},{value:"auto-submitted",name:"Auto-Submitted"},{value:"x-loop",name:"X-Loop"}]}}},t.render=function(t,e){var n,i,s,r,o,a,l,c,u,p,h,d;if(null==e&&(e={}),r=this.defaults(),p=this.buildAttributeSelector(r,t),o=$(App.view("generic/postmaster_match")({attribute:t})),o.find(".js-attributeSelector").prepend(p),o.find(".js-add").bind("click",function(t){var e,n;return e=$(t.target).closest(".js-filterElement"),n=e.clone(!0),e.after(n),n.find(".js-attributeSelector select").trigger("change")}),o.find(".js-remove").bind("click",function(t){return function(e){return $(e.target).closest(".js-filterElement").remove(),t.rebuildAttributeSelectors(o)}}(this)),o.find(".js-attributeSelector select").bind("change",function(e){return function(n){var i,s;return s=$(n.target).find("option:selected").attr("value"),i=$(n.target).closest(".js-filterElement"),e.rebuildAttributeSelectors(o,i,s,t),e.rebuildOperater(o,i,s,r,void 0,t),e.buildValue(o,i,s,r,void 0,void 0,t)}}(this)),o.find(".js-operator select").bind("change",function(e){return function(n){var i,s,a;return s=$(n.target).find(".js-attributeSelector option:selected").attr("value"),a=$(n.target).find("option:selected").attr("value"),i=$(n.target).closest(".js-filterElement"),e.buildValue(o,i,s,r,void 0,a,t)}}(this)),!_.isEmpty(e[t.name])){h=!1,u=e[t.name];for(a in u)l=u[a],h=!0,c=l.operator,d=l.value,i=o.find(".js-filterElement").first(),s=o.find(".js-filterElement").last(),n=i.clone(!0),this.rebuildAttributeSelectors(o,n,a,t),this.rebuildOperater(o,n,a,r,c,t),this.buildValue(o,n,a,r,d,c,t),s.after(n);h&&o.find(".js-filterElement").first().remove()}return o},t.buildValue=function(t,e,n,i,s,r,o){var a,l,c;if(c=o.name+"::"+n+"::value",!e.find('[name="'+c+'"]').get(0))return a={name:c,tag:"input",type:"text",value:s},l=App.UiElement[a.tag].render(a,{}),e.find(".js-value").html(l)},t.buildAttributeSelector=function(t){var e,n,i,s,r,o,a,l,c;c=$('<select class="form-control"></select>');for(i in t)for(s=t[i],e=App.i18n.translateInline(s.name),c.closest("select").append('<optgroup label="'+e+'" class="js-'+i+'"></optgroup>'),a=c.find("optgroup.js-"+i),l=s.options,r=0,o=l.length;r<o;r++)n=l[r],e=App.i18n.translateInline(n.name),a.append('<option value="'+n.value+'">'+e+"</option>");return c},t.rebuildAttributeSelectors=function(t,e,n){if(t.find(".js-attributeSelector select option").removeAttr("disabled"),t.find(".js-attributeSelector select").each(function(){var e;return e=$(this).val(),t.find('.js-attributeSelector select option[value="'+e+'"]').attr("disabled",!0)}),t.find(".js-attributeSelector select").length>1?t.find(".js-remove").removeClass("is-disabled"):t.find(".js-remove").addClass("is-disabled"),n)return e.find(".js-attributeSelector select").val(n)},t.buildOperator=function(t,e,n,i,s,r){var o,a,l,c,u,p,h;for(h=$('<select class="form-control" name="'+r.name+"::"+n+'::operator"></select>'),u=["contains","contains not"],o=0,a=u.length;o<a;o++)l=u[o],c=App.i18n.translateInline(l),p="",s===l&&(p='selected="selected"'),h.append('<option value="'+l+'" '+p+">"+c+"</option>");return h},t.rebuildOperater=function(t,e,n,i,s,r){var o,a;if(n&&(o=r.name+"::"+n+"::operator",!e.find('[name="'+o+'"]').get(0)))return a=this.buildOperator(t,e,n,i,s,r),e.find(".js-operator select").replaceWith(a)},t}()}.call(this),function(){App.UiElement.postmaster_set=function(){function t(){}return t.defaults=function(){var t,e,n,i,s,r,o,a,l,c,u,p,h,d,f,g,m,v,y,b;r={ticket:{name:"Ticket",model:"Ticket",options:[{value:"priority_id",name:"Priority",relation:"TicketPriority"},{value:"state_id",name:"State",relation:"TicketState"},{value:"tags",name:"Tag",tag:"tag"},{value:"customer_id",name:"Customer",relation:"User",tag:"user_autocompletion",disableCreateObject:!0},{value:"group_id",name:"Group",relation:"Group"},{value:"owner_id",name:"Owner",relation:"User",tag:"user_autocompletion",disableCreateObject:!0}]},article:{name:"Article",options:[{value:"x-zammad-article-internal",name:"Internal",options:{"true":"yes","false":"no"}},{value:"x-zammad-article-type_id",name:"Type",relation:"TicketArticleType"},{value:"x-zammad-article-sender_id",name:"Sender",relation:"TicketArticleSender"}]},expert:{name:"Expert",options:[{value:"x-zammad-ignore",name:"Ignore Message",options:{"true":"yes","false":"no"}}]}},e={};for(i in r)if(s=r[i],s.model&&App[s.model])for(g=App[s.model].configure_attributes,o=0,p=g.length;o<p;o++)b=g[o],"password"!==b.type&&"_ids"!==b.name.substr(b.name.length-4,4)&&(b.readonly||(t=_.clone(b),"tag"===t.tag&&(t.operator=["add","remove"]),e["x-zammad-ticket-"+t.name]=t));for(m=App.Ticket.configure_attributes,l=0,h=m.length;l<h;l++){for(b=m[l],n=!1,v=r.ticket.options,c=0,d=v.length;c<d;c++)a=v[c],a.value===b.name?n=!0:"datetime"!==b.tag&&"date"!==b.tag&&"tag"!==b.tag||(n=!0);n||"password"===b.type||"_ids"===b.name.substr(b.name.length-4,4)||b.readonly||(a={value:b.name,name:b.display,relation:b.relation,tag:b.tag,options:b.options},r.ticket.options.push(a))}for(y=r.ticket.options,u=0,f=y.length;u<f;u++)a=y[u],a.value="x-zammad-ticket-"+a.value;return[e,r]},t.placeholder=function(t,e,n,i){var s,r;return null==n&&(n={}),s=$(App.view("generic/postmaster_set_row")({attribute:e})),r=this.buildAttributeSelector(t,i,e,s),s.find(".js-attributeSelector").prepend(r),s},t.render=function(t,e){var n,i,s,r,o,a,l,c,u,p;if(null==e&&(e={}),c=this.defaults(),i=c[0],s=c[1],r=$(App.view("generic/postmaster_set")({attribute:t})),r.on("click",".js-add",function(n){return function(i){var o,a;return o=$(i.target).closest(".js-filterElement"),a=n.placeholder(r,t,e,s),o.get(0)?o.after(a):r.append(a),a.find(".js-attributeSelector select").trigger("change")}}(this)),r.on("click",".js-remove",function(t){return function(e){if(!$(e.currentTarget).hasClass("is-disabled"))return $(e.target).closest(".js-filterElement").remove(),t.rebuildAttributeSelectors(r)}}(this)),r.on("change",".js-attributeSelector select",function(e){return function(n){var o,a,l;return l=$(n.target).find("option:selected").attr("value"),o=$(n.target).closest(".js-filterElement"),a=o.find(".js-attributeSelector option:selected").attr("value"),e.rebuildAttributeSelectors(r,o,l,t),e.buildOperator(r,o,a,i,{},t),e.buildValue(r,o,l,s,void 0,void 0,t)}}(this)),_.isEmpty(e[t.name]))return r.append(this.placeholder(r,t,e,s)),r;u=e[t.name];for(o in u)a=u[o],l=a.operator,p=a.value,n=this.placeholder(r,t,e,s),this.rebuildAttributeSelectors(r,n,o,t),this.buildValue(r,n,o,s,p,l,t),r.append(n);return r},t.buildValue=function(t,e,n,i,s,r,o){var a,l,c,u,p,h,d,f,g;if(f=o.name+"::"+n+"::value",!e.find('[name="'+f+'"]').get(0)){a={};for(c in i)for(d=i[c],g=d.options,u=0,h=g.length;u<h;u++)l=g[u],l.value===n&&(a=clone(l));return a.tag||(a.relation||a.options?a.tag="select":(a.tag="input",a.type="text")),a.name=f,a.value=s,p=App.UiElement[a.tag].render(a,{}),e.find(".js-value").html(p)}},t.buildAttributeSelector=function(t,e){var n,i,s,r,o,a,l,c,u,p,h;p="",t.find(".js-attributeSelector select option").each(function(){if(!p&&!$(this).prop("disabled"))return p=$(this).val()}),h=$('<select class="form-control"></select>');for(s in e)for(r=e[s],n=App.i18n.translateInline(r.name),h.closest("select").append('<optgroup label="'+n+'" class="js-'+s+'"></optgroup>'),l=h.find("optgroup.js-"+s),c=r.options,o=0,a=c.length;o<a;o++)i=c[o],n=App.i18n.translateInline(i.name),u="",i.value===p&&(u='selected="selected"'),l.append('<option value="'+i.value+'" '+u+">"+n+"</option>");return h},t.rebuildAttributeSelectors=function(t,e,n){if(t.find(".js-attributeSelector select option").removeAttr("disabled"),t.find(".js-attributeSelector select").each(function(){var e;return e=$(this).val(),t.find('.js-attributeSelector select option[value="'+e+'"]').attr("disabled",!0)}),t.find(".js-attributeSelector select").length>1?t.find(".js-remove").removeClass("is-disabled"):t.find(".js-remove").addClass("is-disabled"),n)return e.find(".js-attributeSelector select").val(n)},t.buildOperator=function(t,e,n,i,s,r){var o,a,l,c,u,p,h,d,f,g;if(a=e.find(".js-operator option:selected").attr("value"),s.operator||(s.operator=a),u=r.name+"::"+n+"::operator",g=$('<select class="form-control" name="'+u+'"></select>'),o=i[n],o&&o.operator?e.find(".js-operator").removeClass("hide"):e.find(".js-operator").addClass("hide"),o&&o.operator)for(d=o.operator,l=0,c=d.length;l<c;l++)p=d[l],h=App.i18n.translateInline(p),f="",s.operator===p&&(f='selected="selected"'),g.append('<option value="'+p+'" '+f+">"+h+"</option>");return e.find(".js-operator select").replaceWith(g)},t}()}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.UiElement.radio=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.render=function(t,e){return this.getConfigOptionList(t,e),this.getRelationOptionList(t,e),this.addNullOption(t,e),this.sortOptions(t,e),this.selectedOptions(t,e),this.disabledOptions(t,e),this.filterOption(t,e),$(App.view("generic/radio")({attribute:t}))},n}(App.UiElement.ApplicationUiElement)}.call(this),function(){App.UiElement.richtext=function(){function t(){}return t.render=function(t,e){var n,i,s,r,o,a,l,c,u,p,h;if(s=$(App.view("generic/richtext")({attribute:t})),s.find("[contenteditable]").ce({mode:t.type,maxlength:t.maxlength}),t.plugins)for(c=t.plugins,i=0,o=c.length;i<o;i++)l=c[i],e=l.params||{},e.el=s.find("[contenteditable]").parent(),new App[l.controller](e);if(t.upload){if(this.attachments=[],s.append($(App.view("generic/attachment")({attribute:t}))),p=function(t){return function(e){return s.find(".attachments").append(App.view("generic/attachment_item")(e)),t.attachments.push(e)}}(this),e&&e.attachments)for(u=e.attachments,r=0,a=u.length;r<a;r++)n=u[r],p(n);s.find(".attachments").on("click",".js-delete",function(t){return function(e){var n,i;if(i=$(e.currentTarget).data("id"),t.attachments=_.filter(t.attachments,function(t){if(t.id.toString()!==i.toString())return t}),App.Ajax.request({type:"DELETE",url:App.Config.get("api_path")+"/ticket_attachment_upload",data:JSON.stringify({id:i}),processData:!1}),n=$(e.currentTarget).closest(".attachments"),$(e.currentTarget).closest(".attachment").remove(),0===n.find(".attachment").length)return n.empty()}}(this)),
this.progressBar=s.find(".attachmentUpload-progressBar"),this.progressText=s.find(".js-percentage"),this.attachmentPlaceholder=s.find(".attachmentPlaceholder"),this.attachmentUpload=s.find(".attachmentUpload"),this.attachmentsHolder=s.find(".attachments"),this.cancelContainer=s.find(".js-cancel"),h=function(t){return function(){return html5Upload.initialize({uploadUrl:App.Config.get("api_path")+"/ticket_attachment_upload",dropContainer:s.closest("form").get(0),cancelContainer:t.cancelContainer,inputField:s.find("input").get(0),maxSimultaneousUploads:1,key:"File",data:{form_id:s.closest("form").find("[name=form_id]").val()},onFileAdded:function(e){return e.on({onStart:function(){return t.attachmentPlaceholder.addClass("hide"),t.attachmentUpload.removeClass("hide"),t.cancelContainer.removeClass("hide"),s.find("[contenteditable]").trigger("fileUploadStart"),App.Log.debug("UiElement.richtext","upload start")},onAborted:function(){return t.attachmentPlaceholder.removeClass("hide"),t.attachmentUpload.addClass("hide"),s.find("input").val(""),s.find("[contenteditable]").trigger("fileUploadStop",["aborted"])},onCompleted:function(e){return e=JSON.parse(e),t.attachmentPlaceholder.removeClass("hide"),t.attachmentUpload.addClass("hide"),t.progressBar.width(parseInt(0)+"%"),t.progressText.text(""),p(e.data),s.find("input").val(""),s.find("[contenteditable]").trigger("fileUploadStop",["completed"]),App.Log.debug("UiElement.richtext","upload complete",e.data)},onProgress:function(e){return t.progressBar.width(parseInt(e)+"%"),t.progressText.text(parseInt(e)),parseInt(e)>=90&&t.cancelContainer.addClass("hide"),App.Log.debug("UiElement.richtext","uploadProgress ",parseInt(e))}})}})}}(this),App.Delay.set(h,100,void 0,"form_upload")}return s},t}()}.call(this),function(){App.UiElement.richtext_search=function(){function t(){}return t.render=function(t){return $(App.view("generic/input")({attribute:t}))},t}()}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.UiElement.searchable_select=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.render=function(t,e){return t.multiple?t.multiple="multiple":t.multiple="",this.getConfigOptionList(t,e),this.getRelationOptionList(t,e),this.addNullOption(t,e),this.sortOptions(t,e),this.selectedOptions(t,e),this.disabledOptions(t,e),this.filterOption(t,e),new App.SearchableSelect({attribute:t}).element()},n}(App.UiElement.ApplicationUiElement)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.UiElement.select=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.render=function(t,e){return t.multiple?t.multiple="multiple":t.multiple="",this.getConfigOptionList(t,e),this.getRelationOptionList(t,e),this.addNullOption(t,e),this.sortOptions(t,e),this.selectedOptions(t,e),this.disabledOptions(t,e),this.filterOption(t,e),$(App.view("generic/select")({attribute:t}))},n}(App.UiElement.ApplicationUiElement)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.UiElement.selectTicketAttributes=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.render=function(t,e){var n,i,s,r,o;n=[],r=App.Ticket.attributesGet();for(i in r)o=r[i],"password"!==o.type&&"tag"!==o.type&&"tags"!==o.name&&(s=o.name,"_ids"===o.name.substr(o.name.length-4,4)?s=o.name.substr(0,o.name.length-4):"_id"===o.name.substr(o.name.length-3,3)&&(s=o.name.substr(0,o.name.length-3)),n.push({value:s,name:o.display}));return t.sortBy=null,t.options=n,App.UiElement.select.render(t,e)},n}(App.UiElement.ApplicationUiElement)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.UiElement.select_search=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.render=function(t,e){return t.multiple?t.multiple="multiple":t.multiple="",delete t.filter,this.getConfigOptionList(t,e),this.getRelationOptionList(t,e),this.addNullOption(t,e),this.sortOptions(t,e),this.selectedOptions(t,e),this.disabledOptions(t,e),this.filterOption(t,e),$(App.view("generic/select")({attribute:t}))},n}(App.UiElement.ApplicationUiElement)}.call(this),function(){App.UiElement.sla_times=function(){function t(){}return t.render=function(t,e){var n;return null==e&&(e={}),e.first_response_time||0===e.first_response_time||(e.first_response_time=120),n=$(App.view("generic/sla_times")({attribute:t,first_response_time:e.first_response_time,update_time:e.update_time,solution_time:e.solution_time,first_response_time_in_text:this.toText(e.first_response_time),update_time_in_text:this.toText(e.update_time),solution_time_in_text:this.toText(e.solution_time)})),n.find(".js-timeConvertFrom").timepicker({maxHours:999}),n.find(".js-activateRow").bind("change",function(t){var e,n;return e=$(t.target),n=e.closest("tr"),e.prop("checked")?n.addClass("is-active"):(n.removeClass("is-active"),n.find(".js-timeConvertFrom").val(""),n.find(".js-timeConvertTo").val(""))}),n.find(".js-timeConvertFrom").bind("keyup focus blur",function(t){return function(e){var n,i,s,r,o;return i=$(e.target),r=i.val(),o=i.closest("tr"),n=i.closest("td").find(".js-timeConvertTo"),s=t.toMinutes(r),s?(i.removeClass("has-error"),n.val(s)):(i.addClass("has-error"),n.val("")),o.find(".js-activateRow").prop("checked",!0),o.addClass("is-active")}}(this)),n.find(".js-timeConvertFrom").each(function(){var t;return t=$(this).closest("tr").find(".js-activateRow"),$(this).val()?t.prop("checked",!0):t.prop("checked",!1)}),n},t.toMinutes=function(t){var e,n;if(t=t.split(":"),e=parseInt(t[0]),n=parseInt(t[1]),NaN!==e&&NaN!==n)return 60*e+n},t.toText=function(t){var e,n;if(t=parseInt(t))return n=t%60,e=Math.floor(t/60),n<10&&(n="0"+n),e<10&&(e="0"+e),e+":"+n},t}()}.call(this),function(){App.UiElement.tag=function(){function t(){}return t.render=function(t){var e,n,i,s;return t.id||(t.id="tag-"+(new Date).getTime()+"-"+Math.floor(999999*Math.random())),n=$(App.view("generic/input")({attribute:t})),s=App.Config.get("api_path")+"/tag_search",i={},e=function(){return $("#"+t.id).tokenfield({createTokensOnBlur:!0,autocomplete:{source:s,minLength:2,response:function(t,e){var s,r,o,a;if(e&&e.content){for(o=e.content,a=[],s=0,r=o.length;s<r;s++)n=o[s],a.push(i[n.value]=!0);return a}}}}).on("tokenfield:createtoken",function(t){return!(!1===App.Config.get("tag_new")&&!i[t.attrs.value])||(t.preventDefault(),!1)}),$("#"+t.id).parent().css("height","auto")},App.Delay.set(e,500,void 0,"tags"),n},t}()}.call(this),function(){App.UiElement.textarea=function(){function t(){}return t.render=function(t){var e,n,i,s;return n="file-uploader-"+(new Date).getTime()+"-"+Math.floor(99999*Math.random()),i=$(App.view("generic/textarea")({attribute:t})+'<div class="file-uploader '+t["class"]+'" id="'+n+'"></div>'),e=function(){var t;return t=$(i[0]).is(":visible"),t&&!$(i[0]).expanding("active")&&$(i[0]).expanding(),$(i[0]).on("focus",function(){if((t=$(i[0]).is(":visible"))&&!$(i[0]).expanding("active"))return $(i[0]).expanding().focus()})},App.Delay.set(e,80),t.upload&&(s=function(){if($("#"+n)[0])return $("#"+n).fineUploader({request:{endpoint:App.Config.get("api_path")+"/ticket_attachment_upload",params:{form_id:i.closest("form").find("[name=form_id]").val()}},text:{uploadButton:App.Utils.icon("paperclip")},template:'<div class="qq-uploader"><pre class="btn qq-upload-icon qq-upload-drop-area"><span>{dragZoneText}</span></pre><div class="btn btn-default qq-upload-icon2 qq-upload-button pull-right" style="">{uploadButtonText}</div><ul class="qq-upload-list span5" style="margin-top: 10px;"></ul></div>',customHeaders:{"X-CSRF-Token":App.Ajax.token()},classes:{success:"",fail:""},debug:!1})},App.Delay.set(s,100,void 0,"form_upload")),i},t}()}.call(this),function(){App.UiElement.ticket_perform_action=function(){function t(){}return t.defaults=function(t){var e,n,i,s,r,o,a,l,c,u;n=["ticket.state_id"],o={ticket:{name:"Ticket",model:"Ticket"}},t.notification&&(o.notification={name:"Notification",model:"Notification"}),i={};for(s in o)if(r=o[s],r.model&&App[r.model])for(c=App[r.model].configure_attributes,a=0,l=c.length;a<l;a++)u=c[a],"password"!==u.type&&"_ids"!==u.name.substr(u.name.length-4,4)&&(u.readonly||(e=_.clone(u),"tag"===e.tag&&(e.operator=["add","remove"]),i[s+"."+e.name]=e));else i[s+".email"]={name:"email",display:"Email"};return t.ticket_delete&&(i["ticket.action"]={name:"action",display:"Action",tag:"select","null":!1,translate:!0,options:{"delete":"Delete"}}),[n,o,i]},t.placeholder=function(t,e,n,i,s){var r,o;return r=$(App.view("generic/ticket_perform_action/row")({attribute:e})),o=this.buildAttributeSelector(t,i,s),r.find(".js-attributeSelector").prepend(o),r},t.render=function(t,e){var n,i,s,r,o,a,l,c,u,p,h;if(null==e&&(e={}),p=this.defaults(t),n=p[0],o=p[1],s=p[2],l=$(App.view("generic/ticket_perform_action/index")({attribute:t})),l.on("click",".js-add",function(n){return function(i){var r,a;return r=$(i.target).closest(".js-filterElement"),a=n.placeholder(l,t,e,o,s),r.get(0)?r.after(a):l.append(a),a.find(".js-attributeSelector select").trigger("change"),n.updateAttributeSelectors(l)}}(this)),l.on("click",".js-remove",function(t){return function(e){if(!$(e.currentTarget).hasClass("is-disabled"))return $(e.target).closest(".js-filterElement").remove(),t.updateAttributeSelectors(l)}}(this)),l.on("change",".js-attributeSelector select",function(e){return function(n){var i,r;return i=$(n.target).closest(".js-filterElement"),r=i.find(".js-attributeSelector option:selected").attr("value"),e.rebuildAttributeSelectors(l,i,r,s,{},t),e.updateAttributeSelectors(l)}}(this)),l.on("change",".js-operator select",function(e){return function(n){var i,r;return i=$(n.target).closest(".js-filterElement"),r=i.find(".js-attributeSelector option:selected").attr("value"),e.buildOperator(l,i,r,s,{},t)}}(this)),_.isEmpty(e[t.name])){for(a=0,c=n.length;a<c;a++)r=n[a],i=this.placeholder(l,t,e,o,s),l.append(i),this.rebuildAttributeSelectors(l,i,r,s,{},t);return l}h=e[t.name];for(r in h)u=h[r],i=this.placeholder(l,t,e,o,s),this.rebuildAttributeSelectors(l,i,r,s,u,t),l.append(i);return l},t.buildAttributeSelector=function(t,e,n){var i,s,r,o,a,l,c,u,p,h;u="",t.find(".js-attributeSelector select option").each(function(){if(!u&&!$(this).prop("disabled"))return u=$(this).val()}),p=$('<select class="form-control"></select>');for(o in e){a=e[o],s=App.i18n.translateInline(a.name),p.closest("select").append('<optgroup label="'+s+'" class="js-'+o+'"></optgroup>'),l=p.find("optgroup.js-"+o);for(r in n)n[r],h=r.split(/\./),h[0]===o&&(i=n[r],s=App.i18n.translateInline(i.display),c="",r===u&&(c='selected="selected"'),l.append('<option value="'+r+'" '+c+">"+s+"</option>"))}return p},t.updateAttributeSelectors=function(t){return t.find(".js-attributeSelector select option").removeAttr("disabled"),t.find(".js-attributeSelector select").each(function(){var e;return e=$(this).val(),t.find('.js-attributeSelector select option[value="'+e+'"]').attr("disabled",!0)}),t.find(".js-attributeSelector select").length>1?t.find(".js-remove").removeClass("is-disabled"):t.find(".js-remove").addClass("is-disabled")},t.rebuildAttributeSelectors=function(t,e,n,i,s,r){var o;return n&&e.find(".js-attributeSelector select").val(n),"notification.email"===n?(e.find(".js-setAttribute").html(""),this.buildRecipientList(t,e,n,i,s,r)):(e.find(".js-setNotification").html(""),e.find(".js-setAttribute div").get(0)||(o=$(App.view("generic/ticket_perform_action/attribute_selector")({attribute:r,name:name,meta:s||{}})),e.find(".js-setAttribute").html(o)),this.buildOperator(t,e,n,i,s,r))},t.buildOperator=function(t,e,n,i,s,r){var o,a,l,c,u,p,h,d,f,g;if(a=e.find(".js-operator option:selected").attr("value"),s.operator||(s.operator=a),u=r.name+"::"+n+"::operator",g=$('<select class="form-control" name="'+u+'"></select>'),o=i[n],o&&o.operator?e.find(".js-operator").removeClass("hide"):e.find(".js-operator").addClass("hide"),o&&o.operator)for(d=o.operator,l=0,c=d.length;l<c;l++)p=d[l],h=App.i18n.translateInline(p),f="",s.operator===p&&(f='selected="selected"'),g.append('<option value="'+p+'" '+f+">"+h+"</option>");return e.find(".js-operator select").replaceWith(g),this.buildPreCondition(t,e,n,i,s,r)},t.buildPreCondition=function(t,e,n,i,s,r){var o,a,l,c,u,p,h,d,f,g,m;if(e.find(".js-operator option:selected").attr("value"),l=e.find(".js-preCondition option:selected").attr("value"),s.pre_condition||(s.pre_condition=l),g=function(r){return function(){var a;return a=e.find(".js-preCondition option:selected").attr("value"),"specific"!==a?(e.find(".js-value select").html(""),e.find(".js-value").addClass("hide")):(e.find(".js-value").removeClass("hide"),r.buildValue(t,e,n,i,s,o))}}(this),o=_.clone(r),u=o.name+"::"+n+"::value",a=i[n],h=!1,"User"===a.relation&&(h="user",o.tag="user_autocompletion"),"Organization"===a.relation&&(h="org",o.tag="autocompletion_ajax"),!h)return e.find(".js-preCondition select").html(""),e.find(".js-preCondition").addClass("hide"),g(),void this.buildValue(t,e,n,i,s,o);e.find(".js-preCondition").removeClass("hide"),u=o.name+"::"+n+"::pre_condition",f=$('<select class="form-control" name="'+u+'" ></select>'),p={},"user"===h?p={"current_user.id":App.i18n.translateInline("current user"),specific:App.i18n.translateInline("specific user")}:"org"===h&&(p={"current_user.organization_id":App.i18n.translateInline("current user organization"),specific:App.i18n.translateInline("specific organization")});for(c in p)m=p[c],d="",c===s.pre_condition&&(d='selected="selected"'),f.append('<option value="'+c+'" '+d+">"+App.i18n.translateInline(m)+"</option>");return e.find(".js-preCondition").removeClass("hide"),e.find(".js-preCondition select").replaceWith(f),e.find(".js-preCondition select").bind("change",function(){return g()}),this.buildValue(t,e,n,i,s,o),g()},t.buildValue=function(t,e,n,i,s,r){var o,a,l,c,u;return c=r.name+"::"+n+"::value",o=i[n],a=_.clone(o),"User"===a.relation&&(a.tag="user_autocompletion"),"Organization"===a.relation&&(a.tag="autocompletion_ajax"),l="",a&&App.UiElement[a.tag]&&(a.name=c,r.value&&r.value[n]&&(a.value=_.clone(r.value[n].value)),a.multiple=!1,a.nulloption=!1,"checkbox"===a.tag&&(a.tag="select"),u=a.tag+"_search",l=App.UiElement[u]?App.UiElement[u].render(a,{}):App.UiElement[a.tag].render(a,{})),"before (relative)"!==s.operator&&"within next (relative)"!==s.operator&&"within last (relative)"!==s.operator&&"after (relative)"!==s.operator||(a.name=r.name+"::"+n,r.value&&r.value[n]&&(a.value=_.clone(r.value[n])),l=App.UiElement.time_range.render(a,{})),e.find(".js-value").removeClass("hide").html(l)},t.buildRecipientList=function(t,e,n,i,s,r){var o,a,l,c,u,p,h,d,f,g,m,v,y;if(!e.find(".js-setNotification .js-body").get(0)){d={article_last_sender:"Article Last Sender",ticket_owner:"Owner",ticket_customer:"Customer",ticket_agents:"All Agents"},p=r.name+"::notification.email",_.isArray(s.recipient)||(s.recipient=[s.recipient]),a=[];for(c in d){for(y=d[c],m=void 0,g=s.recipient,l=0,u=g.length;l<u;l++)f=g[l],c===f&&(m=!0);a.push({value:c,name:App.i18n.translateInline(y),selected:m})}return o=new App.ColumnSelect({attribute:{name:p+"::recipient",options:a}}),v=o.element(),h=$(App.view("generic/ticket_perform_action/notification_email")({attribute:r,name:p,meta:s||{}})),h.find(".js-recipient select").replaceWith(v),h.find('.js-body div[contenteditable="true"]').ce({mode:"richtext",placeholder:"message",maxlength:2e5}),new App.WidgetPlaceholder({el:h.find('.js-body div[contenteditable="true"]').parent(),objects:[{prefix:"ticket",object:"Ticket",display:"Ticket"},{prefix:"user",object:"User",display:"Current User"}]}),e.find(".js-setNotification").html(h)}},t.humanText=function(t){var e,n,i,s,r,o,a,l,c,u,p,h,d,f;if(l=App.i18n.translateContent("No filter."),_.isEmpty(t))return[l];p=this.defaults(),p[0],p[1],p[2],s=p[3],h=[];for(e in t)if(d=t[e],c=e.split(/\./),meta&&c[1]){if(a=toCamelCase(c[0]),n=s[e],f=[],_.isArray(d))for(r=0,o=d.length;r<o;r++)i=d[r],u=this.humanTextLookup(n,i),f.push(u);else f.push(this.humanTextLookup(n,d));f.join&&(f=f.join(", ")),h.push(App.i18n.translateContent("Set")+" <b>"+App.i18n.translateContent(a)+" -> "+App.i18n.translateContent(n.display)+"</b> "+App.i18n.translateContent("to")+" <b>"+f+"</b>.")}return _.isEmpty(h)?[l]:h},t.humanTextLookup=function(t,e){var n;return App[t.relation]&&App[t.relation].exists(e)?(n=App[t.relation].fullLocal(e),n?n.displayName?App.i18n.translateContent(n.displayName()):valueHuman.push(App.i18n.translateContent(n.name)):e):e},t}()}.call(this),function(){App.UiElement.ticket_selector=function(){function t(){}return t.defaults=function(t){var e,n,i,s,r,o,a,l,c,u,p,h,d,f,g;null==t&&(t={}),n=["ticket.state_id"],o={ticket:{name:"Ticket",model:"Ticket"},article:{name:"Article",model:"TicketArticle"},customer:{name:"Customer",model:"User"},organization:{name:"Organization",model:"Organization"}},d={"^datetime$":["before (absolute)","after (absolute)","before (relative)","after (relative)","within next (relative)","within last (relative)"],"^timestamp$":["before (absolute)","after (absolute)","before (relative)","after (relative)","within next (relative)","within last (relative)"],"^date$":["before (absolute)","after (absolute)","before (relative)","after (relative)","within next (relative)","within last (relative)"],boolean$:["is","is not"],integer$:["is","is not"],"^radio$":["is","is not"],"^select$":["is","is not"],"^tree_select$":["is","is not"],"^input$":["contains","contains not"],"^richtext$":["contains","contains not"],"^textarea$":["contains","contains not"],"^tag$":["contains all","contains one","contains all not","contains one not"]},t.hasChanged&&(d={"^datetime$":["before (absolute)","after (absolute)","before (relative)","after (relative)","within next (relative)","within last (relative)","has changed"],"^timestamp$":["before (absolute)","after (absolute)","before (relative)","after (relative)","within next (relative)","within last (relative)","has changed"],"^date$":["before (absolute)","after (absolute)","before (relative)","after (relative)","within next (relative)","within last (relative)","has changed"],boolean$:["is","is not","has changed"],integer$:["is","is not","has changed"],"^radio$":["is","is not","has changed"],"^select$":["is","is not","has changed"],"^tree_select$":["is","is not","has changed"],"^input$":["contains","contains not","has changed"],"^richtext$":["contains","contains not","has changed"],"^textarea$":["contains","contains not","has changed"],"^tag$":["contains all","contains one","contains all not","contains one not"]}),h={_id$:["is","is not"],_ids$:["is","is not"]},t.hasChanged&&(h={_id$:["is","is not","has changed"],_ids$:["is","is not","has changed"]}),i={},t.action&&(i["ticket.action"]={name:"action",display:"Action",tag:"select","null":!1,translate:!0,options:{create:"created",update:"updated"},operator:["is","is not"]});for(s in o)for(r=o[s],f=App[r.model].configure_attributes,a=0,l=f.length;a<l;a++)if(g=f[a],"password"!==g.type&&"_ids"!==g.name.substr(g.name.length-4,4)&&!1!==g.searchable){e=_.clone(g);for(p in d)u=d[p],c=new RegExp(p,"i"),e.tag&&e.tag.match(c)&&(e.operator=u),i[s+"."+e.name]=e;for(p in h)u=h[p],c=new RegExp(p,"i"),e.name&&e.name.match(c)&&(e.operator=u),i[s+"."+e.name]=e}return t.out_of_office&&(i["ticket.out_of_office_replacement_id"]={name:"out_of_office_replacement_id",display:"Out of office replacement",tag:"autocompletion_ajax",relation:"User","null":!1,translate:!0,operator:["is","is not"]}),[n,o,i]},t.rowContainer=function(t,e,n){var i,s;return i=$(App.view("generic/ticket_selector_row")({attribute:n})),s=this.buildAttributeSelector(t,e),i.find(".js-attributeSelector").prepend(s),i},t.render=function(t,e){var n,i,s,r,o,a,l,c,u,p,h,d,f;if(null==e&&(e={}),u=this.defaults(t),n=u[0],r=u[1],i=u[2],a=$(App.view("generic/ticket_selector")({attribute:t})),a.delegate(".js-add","click",function(e){return function(n){var s,o,l,c;s=$(n.target).closest(".js-filterElement"),o=void 0;for(l in i)if(i[l],!a.find('.js-attributeSelector [value="'+l+'"]:selected').get(0)){o=l;break}if(o)return c=e.rowContainer(r,i,t),s.after(c),c.find(".js-attributeSelector select").trigger("change"),e.rebuildAttributeSelectors(a,c,o,i,{},t),!1!==t.preview?e.preview(a):void 0}}(this)),a.delegate(".js-remove","click",function(e){return function(n){if(!$(n.currentTarget).hasClass("is-disabled"))return $(n.target).closest(".js-filterElement").remove(),e.updateAttributeSelectors(a),!1!==t.preview?e.preview(a):void 0}}(this)),_.isEmpty(e[t.name]))for(o=0,l=n.length;o<l;o++)s=n[o],h=this.rowContainer(r,i,t),this.rebuildAttributeSelectors(a,h,s,i,{},t),a.filter(".js-filter").append(h);else{!1,p=e[t.name];for(s in p)c=p[s],!0,h=this.rowContainer(r,i,t),this.rebuildAttributeSelectors(a,h,s,i,c,t),a.filter(".js-filter").append(h)}return a.delegate(".js-attributeSelector select","change",function(e){return function(n){var r;if(r=$(n.target).closest(".js-filterElement"),s=r.find(".js-attributeSelector option:selected").attr("value"))return e.rebuildAttributeSelectors(a,r,s,i,{},t),e.updateAttributeSelectors(a)}}(this)),a.delegate(".js-operator select","change",function(e){return function(n){var r;if(r=$(n.target).closest(".js-filterElement"),s=r.find(".js-attributeSelector option:selected").attr("value"))return e.buildOperator(a,r,s,i,{},t)}}(this)),!1!==t.preview&&(d=function(t){return function(){return t.preview(a)}}(this),f=function(){return a.find(".js-previewCounterContainer").addClass("hide"),a.find(".js-previewLoader").removeClass("hide"),App.Delay.set(d,600,"preview")},a.on("change","select",function(){return f()}),a.on("change keyup","input",function(){return f()})),a},t.preview=function(t){var e;return e=App.ControllerForm.params(t),App.Ajax.request({id:"ticket_selector",type:"POST",url:App.Config.get("api_path")+"/tickets/selector",data:JSON.stringify(e),processData:!0,success:function(e){return function(n){return App.Collection.loadAssets(n.assets),t.find(".js-previewCounterContainer").removeClass("hide"),t.find(".js-previewLoader").addClass("hide"),e.ticketTable(n.ticket_ids,n.ticket_count,t)}}(this)})},t.ticketTable=function(t,e,n){return n.find(".js-previewCounter").html(e),new App.TicketList({tableId:"ticket-selector",el:n.find(".js-previewTable"),ticket_ids:t})},t.buildAttributeSelector=function(t,e){var n,i,s,r,o,a,l,c;l=$('<select class="form-control"></select>');for(r in t){o=t[r],i=App.i18n.translateInline(o.name),l.closest("select").append('<optgroup label="'+i+'" class="js-'+r+'"></optgroup>'),a=l.find("optgroup.js-"+r);for(s in e)e[s],c=s.split(/\./),c[0]===r&&(n=e[s],n.operator&&(i=App.i18n.translateInline(n.display),a.append('<option value="'+s+'">'+i+"</option>")))}return l},t.updateAttributeSelectors=function(t){return t.find(".js-attributeSelector select option").removeAttr("disabled"),t.find(".js-attributeSelector select").each(function(){var e;return e=$(this).val(),t.find('.js-attributeSelector select option[value="'+e+'"]').attr("disabled",!0)}),t.find(".js-attributeSelector select").length>1?t.find(".js-remove").removeClass("is-disabled"):t.find(".js-remove").addClass("is-disabled")},t.rebuildAttributeSelectors=function(t,e,n,i,s,r){return n&&e.find(".js-attributeSelector select").val(n),this.buildOperator(t,e,n,i,s,r)},t.buildOperator=function(t,e,n,i,s,r){var o,a,l,c,u,p,h,d,f,g,m,v,y,b,_,w,k;if(a=e.find(".js-operator option:selected").attr("value"),f=r.name+"::"+n+"::operator",!s.operator&&a&&(s.operator=a),k=$('<select class="form-control" name="'+f+'"></select>'),o=i[n],o.operator){for(m=!1,y=o.operator,l=0,p=y.length;l<p;l++)if(g=y[l],s.operator===g){m=!0;break}if(!m)for(b=o.operator,c=0,h=b.length;c<h;c++){g=b[c],s.operator=g;break}for(_=o.operator,u=0,d=_.length;u<d;u++)g=_[u],v=App.i18n.translateInline(g),w="",(n.match(/^ticket/)||"has changed"!==g)&&(s.operator===g&&(w='selected="selected"'),k.append('<option value="'+g+'" '+w+">"+v+"</option>"))}return e.find(".js-operator select").replaceWith(k),this.buildPreCondition(t,e,n,i,s,r)},t.buildPreCondition=function(t,e,n,i,s,r){var o,a,l,c,u,p,h,d,f,g,m;if(e.find(".js-operator option:selected").attr("value"),l=e.find(".js-preCondition option:selected").attr("value"),s.pre_condition||(s.pre_condition=l),g=function(r){return function(){var a;return a=e.find(".js-preCondition option:selected").attr("value"),"specific"!==a?(e.find(".js-value select").html(""),e.find(".js-value").addClass("hide")):(e.find(".js-value").removeClass("hide"),r.buildValue(t,e,n,i,s,o))}}(this),o=_.clone(r),u=o.name+"::"+n+"::value",a=i[n],h=!1,"User"===a.relation&&(h="user",o.tag="user_autocompletion"),"Organization"===a.relation&&(h="org",o.tag="autocompletion_ajax"),!h)return e.find(".js-preCondition select").html(""),e.find(".js-preCondition").addClass("hide"),g(),void this.buildValue(t,e,n,i,s,o);e.find(".js-preCondition").removeClass("hide"),u=o.name+"::"+n+"::pre_condition",f=$('<select class="form-control" name="'+u+'" ></select>'),p={},"user"===h?p={"current_user.id":App.i18n.translateInline("current user"),specific:App.i18n.translateInline("specific user"),not_set:App.i18n.translateInline("not set (not defined)")}:"org"===h&&(p={"current_user.organization_id":App.i18n.translateInline("current user organization"),specific:App.i18n.translateInline("specific organization"),not_set:App.i18n.translateInline("not set (not defined)")});for(c in p)m=p[c],d="",c===s.pre_condition&&(d='selected="selected"'),f.append('<option value="'+c+'" '+d+">"+App.i18n.translateInline(m)+"</option>");return e.find(".js-preCondition").removeClass("hide"),e.find(".js-preCondition select").replaceWith(f),e.find(".js-preCondition select").bind("change",function(){return g()}),this.buildValue(t,e,n,i,s,o),g()},t.buildValue=function(t,e,n,i,s,r){var o,a,l,c,u;return c=r.name+"::"+n+"::value",o=i[n],a=_.clone(o),"User"===a.relation&&(a.tag="user_autocompletion"),"Organization"===a.relation&&(a.tag="autocompletion_ajax"),l="",a&&App.UiElement[a.tag]&&(a.name=c,r.value&&r.value[n]&&(a.value=_.clone(r.value[n].value)),"multiple"in a&&(a.multiple=!0,a.nulloption=!1),"User"===a.relation&&(a.multiple=!1,a.nulloption=!1,a.guess=!1),"Organization"===a.relation&&(a.multiple=!1,a.nulloption=!1,a.guess=!1),"checkbox"===a.tag&&(a.tag="select"),u=a.tag+"_search",l=App.UiElement[u]?App.UiElement[u].render(a,{}):App.UiElement[a.tag].render(a,{})),"before (relative)"!==s.operator&&"within next (relative)"!==s.operator&&"within last (relative)"!==s.operator&&"after (relative)"!==s.operator||(a.name=r.name+"::"+n,r.value&&r.value[n]&&(a.value=_.clone(r.value[n])),l=App.UiElement.time_range.render(a,{})),e.find(".js-value").removeClass("hide").html(l),"has changed"===s.operator?(e.find(".js-value").addClass("hide"),e.find(".js-preCondition").addClass("hide")):e.find(".js-value").removeClass("hide")},t.humanText=function(t){var e,n,i,s,r,o,a,l,c,u,p,h,d,f,g,m;if(c=App.i18n.translateContent("No filter."),_.isEmpty(t))return[c];d=this.defaults(),d[0],d[1],s=d[2],f=[];for(e in t)if(a=t[e],u=e.split(/\./),a&&u[1]){if(p=a.operator,g=a.value,l=toCamelCase(u[0]),n=s[e],m=[],_.isArray(g))for(r=0,o=g.length;r<o;r++)i=g[r],h=this.humanTextLookup(n,i),m.push(h);else m.push(this.humanTextLookup(n,g));m.join&&(m=m.join(", ")),f.push(App.i18n.translateContent("Where")+" <b>"+App.i18n.translateContent(l)+" -> "+App.i18n.translateContent(n.display)+"</b> "+App.i18n.translateContent(p)+" <b>"+m+"</b>.")}return _.isEmpty(f)?[c]:f},t.humanTextLookup=function(t,e){var n;return App[t.relation]&&App[t.relation].exists(e)?(n=App[t.relation].fullLocal(e),n?n.displayName?App.i18n.translateContent(n.displayName()):valueHuman.push(App.i18n.translateContent(n.name)):e):e},t}()}.call(this),function(){App.UiElement.time_range=function(){function t(){}return t.render=function(t){var e,n,i,s,r,o,a,l,c,u,p,h;a={minute:"Minute(s)",hour:"Hour(s)",day:"Day(s)",month:"Month(s)",year:"Year(s)"};for(r in a)p=a[r],a[r]=App.i18n.translateInline(p);return o="minute",t.value&&t.value.range&&(o=t.value.range),h={minute:function(){for(l=[],n=1;n<=120;n++)l.push(n);return l}.apply(this),hour:function(){for(c=[],i=1;i<=48;i++)c.push(i);return c}.apply(this),day:function(){for(u=[],s=1;s<=31;s++)u.push(s);return u}.apply(this),month:[1,2,3,4,5,6,7,8,9,10,11,12],year:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]},e=$(App.view("generic/time_range")({attribute:t,ranges:a})),this.localRenderPulldown(e.filter(".js-valueRangeSelector"),h[o],t),e.find("select.form-control.js-range").on("change",function(e){return function(n){return o=$(n.currentTarget).val(),e.localRenderPulldown($(n.currentTarget).closest(".js-filterElement").find(".js-valueRangeSelector"),h[o],t)}}(this)),e},t.localRenderPulldown=function(t,e,n){var i,s,r,o,a;if(e){for(a={},s=0,r=e.length;s<r;s++)i=e[s],a[i.toString()]=i.toString();return o=App.view("generic/time_range_value_selector")({attribute:n,values:a}),t.html(o)}},t}()}.call(this),function(){App.UiElement.timer=function(){function t(){}return t.render=function(t){var e,n,i,s;return e={Mon:"Monday",Tue:"Tuesday",Wed:"Wednesday",Thu:"Thursday",Fri:"Friday",Sat:"Saturday",Sun:"Sunday"},n={0:"12 am",1:"1 am",2:"2 am",3:"3 am",4:"4 am",5:"5 am",6:"6 am",7:"7 am",8:"8 am",9:"9 am",10:"10 am",11:"11 am",12:"12 am",13:"1 pm",14:"2 pm",15:"3 pm",16:"4 pm",17:"5 pm",18:"6 pm",19:"7 pm",20:"8 pm",21:"9 pm",22:"10 pm",23:"11 pm"},n={0:"00",1:"01",2:"02",3:"03",4:"04",5:"05",6:"06",7:"07",8:"08",9:"09",10:"10",11:"11",12:"12",13:"13",14:"14",15:"15",16:"16",17:"17",18:"18",19:"19",20:"20",21:"21",22:"22",23:"23"},i={0:"00",10:"10",20:"20",30:"30",40:"40",50:"50"},t.value||(t.value={}),_.isEmpty(t.value.days)&&(t.value.days={Mon:!0}),_.isEmpty(t.value.hours)&&(t.value.hours={0:!0}),_.isEmpty(t.value.minutes)&&(t.value.minutes={0:!0}),s=$(App.view("generic/timer")({attribute:t,days:e,hours:n,minutes:i})),s.find(".js-boolean").data("field-type","boolean"),s.find(".select-value").bind("click",function(t){return function(e){return t.select(e)}}(this)),this.createOutputString(s),s},t.select=function(e){var n,i;return i=$(e.currentTarget),i.hasClass("is-selected")?i.siblings(".is-selected").size()>0&&(i.removeClass("is-selected"),i.next().val("false")):(i.addClass("is-selected"),i.next().val("true")),n=$(e.currentTarget).closest(".form-group"),t.createOutputString(n)},t.createOutputString=function(e){var n,i,s;return n=$.map(e.find("[data-type=day]").filter(".is-selected"),function(t){return $(t).text()}),i=$.map(e.find("[data-type=hour]").filter(".is-selected"),function(t){return $(t).text()}),s=$.map(e.find("[data-type=minute]").filter(".is-selected"),function(t){return $(t).text()}),i=t.injectMinutes(i,s),n=t.joinItems(n),i=t.joinItems(i),e.find(".js-timerResult").text(App.i18n.translateInline("Run every %s at %s",n,i))},t.injectMinutes=function(t,e){var n,i,s,r,o,a,l,c,u,p;for(c=[],s=0,o=t.length;s<o;s++)for(i=t[s],u=i.split(" "),i=u[0],p=u[1],r=0,a=e.length;r<a;r++)l=e[r],n=i+":"+l,p&&(n+=" "+p),c.push(n);return c},t.joinItems=function(t){switch(t.length){case 1:return t[0];case 2:return t[0]+" "+App.i18n.translateInline("and")+" "+t[1];default:return t.slice(0,-1).join(", ")+" "+App.i18n.translateInline("and")+" "+t[t.length-1]}},t}()}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.UiElement.timezone=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.render=function(t,e){var n,i,s,r;t.options=[],r=App.Config.get("timezones");for(s in r)i=r[s],i>0&&(i="+"+i),n={name:s+" (GMT"+i+")",value:s},t.options.push(n);return this.addNullOption(t,e),this.sortOptions(t,e),this.selectedOptions(t,e),t.tag="searchable_select",t.placeholder=App.i18n.translateInline("Enter timzone..."),App.UiElement.searchable_select.render(t)},n}(App.UiElement.ApplicationUiElement)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty
;App.UiElement.tree_select=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.optionsSelect=function(t,e){var n,i,s,r;if(t){for(r=[],i=0,s=t.length;i<s;i++)n=t[i],n.value===e&&(n.selected=!0),n.children?r.push(this.optionsSelect(n.children,e)):r.push(void 0);return r}},n.render=function(t,e){return t.multiple?t.multiple="multiple":t.multiple="",this.getConfigOptionList(t,e),this.getRelationOptionList(t,e),this.addNullOption(t,e),this.sortOptions(t,e),t.options&&this.optionsSelect(t.options,t.value),this.disabledOptions(t,e),this.filterOption(t,e),new App.SearchableSelect({attribute:t}).element()},n}(App.UiElement.ApplicationUiElement)}.call(this),function(){App.UiElement.user_autocompletion=function(){function t(){}return t.render=function(t,e){return null==e&&(e={}),new App.UserOrganizationAutocompletion({attribute:t,params:e}).element()},t}()}.call(this),function(){App.UiElement.user_autocompletion_search=function(){function t(){}return t.render=function(t,e){var n;return null==e&&(e={}),n=_.clone(t),n.disableCreateObject=!0,new App.UserOrganizationAutocompletion({attribute:n,params:e}).element()},t}()}.call(this),function(){App.UiElement.user_permission=function(){function t(){}return t.render=function(t,e){var n,i,s,r,o,a,l,c,u,p,h,d,f,g,m,v,y,b,w,k,T,S,C,A,x,j,I,D,P,E,O,N,R,M,z,L,U,q,F,B,J;if(null==e&&(e={}),t.options={},_.isEmpty(e.group_ids)&&_.isEmpty(e.role_ids)&&!_.isEmpty(t.value)){for(e.role_ids=t.value,B=!1,P=e.role_ids,c=0,h=P.length;c<h;c++)if(T=P[c],M=App.Role.find(T))for(E=M.permission_ids,u=0,d=E.length;u<d;u++)if(j=E[u],(k=App.Permission.find(j))&&"ticket.agent"===k.name){B=!0;break}if(B)for(e.group_ids=[],r=App.Group.search({sortBy:"name"}),p=0,f=r.length;p<f;p++)n=r[p],e.group_ids.push(n.id)}for(L=[],q={},U=App.Role.search({sortBy:"name"}),S=0,g=U.length;S<g;S++)if(M=U[S],M.active&&(L.push(M),e.role_ids))for(O=e.role_ids,C=0,m=O.length;C<m;C++)z=O[C],z.toString()===M.id.toString()&&(q[M.id]=!0);for(s=[],o={},r=App.Group.search({sortBy:"name"}),A=0,v=r.length;A<v;A++)if(n=r[A],n.active&&(s.push(n),e.group_ids))for(N=e.group_ids,x=0,y=N.length;x<y;x++)i=N[x],i.toString()===n.id.toString()&&(o[n.id]=!0);for(a=!1,s.length<=1&&(a=!0),F={},I=0,b=U.length;I<b;I++)if(M=U[I],M.active)for(R=M.permission_ids,D=0,w=R.length;D<w;D++)j=R[D],(k=App.Permission.find(j))&&k.preferences&&_.contains(k.preferences.plugin,"groups")&&(F[M.id]="group");return L=_.indexBy(L,"name"),L=_.sortBy(L,function(t){return t.name}),l=$(App.view("generic/user_permission")({attribute:t,roles:L,params:e,rolesSelected:q})),l.find(".js-groups").html(App.view("generic/user_permission_group")({attribute:t,groups:s,params:e,groupsSelected:o,hideGroups:a,groupAccesses:App.Group.accesses()})),J=_.throttle(function(){var t,e,n;return t=$(this).find("input"),e=!t.prop("checked"),n=t.val(),console.log(e),console.log(n),"full"===n&&!0===e?$(this).closest("tr").find("input:not([value=full])").prop("checked",!1):"full"!==n&&!0===e?$(this).closest("tr").find("input[value=full]").prop("checked",!1):void 0},300,{trailing:!1}),l.on("click",".checkbox-replacement",J),l.find("[name=role_ids]").bind("change",function(t){var e,i,s,r,o,c,u,p,h,d,f,g,m,v;if(i=$(t.currentTarget),e=i.prop("checked"),(z=i.prop("value"))&&(M=App.Role.find(z))){if(v=[],e&&M&&M.preferences&&M.preferences.not)for(p=M.preferences.not,d=0,r=p.length;d<r;d++)if(u=p[d],(c=App.Role.findByAttribute("name",u))&&(o=l.find("[name=role_ids][value="+c.id+"]"),o.prop("checked"))){if(!confirm(App.i18n.translateInline("Role %s is conflicting with role %s, do you want to continue?",M.name,c.name,c.name)))return void l.find("[name=role_ids][value="+z+"]").prop("checked",!1);l.find("[name=role_ids][value="+c.id+"]").prop("checked",!1),v.push(l.find("[name=role_ids][value="+c.id+"]"))}if(!e){f=!1;for(z in F)n=F[z],l.find("[name=role_ids][value="+z+"]").prop("checked")&&(f=!0);return void(f||(l.find(".js-groupList").addClass("hidden"),a&&l.find(".js-groupList .js-groupListItem[value=full]").prop("checked",!1)))}for("group"===F[z]&&(l.find(".js-groupList:not(.js-groupListHide)").removeClass("hidden"),a&&l.find(".js-groupList .js-groupListItem[value=full]").prop("checked",!0)),h=[],g=0,s=v.length;g<s;g++)m=v[g],h.push(m.trigger("change"));return h}}),l},t}()}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var s in e)i.call(e,s)&&(t[s]=e[s]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;App.TicketCreate=function(t){function i(t){this.submitEnable=e(this.submitEnable,this),this.submitDisable=e(this.submitDisable,this),this.submit=e(this.submit,this),this.params=e(this.params,this),this.localUserInfoCallback=e(this.localUserInfoCallback,this),this.localUserInfo=e(this.localUserInfo,this),this.renderQueue=e(this.renderQueue,this),this.buildScreen=e(this.buildScreen,this),this.autosaveStart=e(this.autosaveStart,this),this.autosaveStop=e(this.autosaveStop,this),this.changed=e(this.changed,this),this.hide=e(this.hide,this),this.show=e(this.show,this),this.url=e(this.url,this),this.meta=e(this.meta,this),this.setFormTypeInUi=e(this.setFormTypeInUi,this),this.changeFormType=e(this.changeFormType,this),this.currentChannel=e(this.currentChannel,this),this.release=e(this.release,this);var n;i.__super__.constructor.apply(this,arguments),this.sidebarState={},this.defaultType=this.Config.get("ui_ticket_create_default_type"),this.availableTypes=this.Config.get("ui_ticket_create_available_types")||[],_.isArray(this.availableTypes)||(this.availableTypes=[this.availableTypes]),_.contains(this.availableTypes,this.defaultType)||(this.defaultType=this.availableTypes[0]),this.formId=App.ControllerForm.formId(),this.queueKey="TicketCreate"+this.taskKey,this.split="",this.ticket_id&&this.article_id&&(this.split="/"+this.ticket_id+"/"+this.article_id),n=function(e){return function(n){return App.Collection.loadAssets(n.assets),e.formMeta=n.form_meta,e.buildScreen(t)}}(this),this.bindId=App.TicketCreateCollection.one(n),this.bind("ui:rerender",function(t){return function(){if(t.authenticateCheck())return t.renderQueue(),t.tokanice()}}(this)),this.bind("ui::ticket::sidebarRerender",function(t){return function(e){if(e.taskKey===t.taskKey&&t.sidebarWidget)return t.sidebarWidget.render(t.params())}}(this))}return n(i,t),i.prototype.elements={".tabsSidebar":"sidebar"},i.prototype.events={"click .type-tabs .tab":"changeFormType","submit form":"submit","click .js-cancel":"cancel"},i.prototype.types={"phone-in":{icon:"received-calls",label:"Received Call"},"phone-out":{icon:"outbound-calls",label:"Outbound Call"},"email-out":{icon:"email",label:"Send Email"}},i.prototype.release=function(){return App.TicketCreateCollection.unbindById(this.bindId)},i.prototype.currentChannel=function(){var t;return t||(t=this.$(".type-tabs .tab.active").data("type")),t||(t=this.defaultType),t},i.prototype.changeFormType=function(t){var e;return e=$(t.currentTarget).data("type"),this.setFormTypeInUi(e),this.tokanice()},i.prototype.setFormTypeInUi=function(t){var e,n,i,s;return t||(t=this.currentChannel()),s=this.$(".type-tabs .tab"),s.removeClass("active"),i=this.$(".type-tabs .tab .icon"),i.addClass("gray"),i.removeClass("white"),n=this.$(".type-tabs .tab[data-type='"+t+"']"),n.addClass("active"),e={"phone-in":{sender:"Customer",article:"phone",title:"Call Inbound",screen:"create_phone_in"},"phone-out":{sender:"Agent",article:"phone",title:"Call Outbound",screen:"create_phone_out"},"email-out":{sender:"Agent",article:"email",title:"Email",screen:"create_email_out"}},this.articleAttributes=e[t],this.$('[name="formSenderType"]').val(t),this.$('[name="group_id"]').trigger("change"),"email-out"===t?this.$('[name="cc"]').closest(".form-group").removeClass("hide"):this.$('[name="cc"]').closest(".form-group").addClass("hide"),this.$(".js-note").addClass("hide"),this.$(".js-note[data-type='"+t+"']").removeClass("hide"),App.TaskManager.touch(this.taskKey)},i.prototype.meta=function(){var t,e;return t="",this.articleAttributes&&(t=App.i18n.translateInline(this.articleAttributes.title)),e=this.$("[name=title]").val(),e&&(t=t+": "+e),{url:this.url(),head:t,title:t,id:this.id,iconClass:"pen"}},i.prototype.url=function(){return"#ticket/create/id/"+this.id},i.prototype.show=function(){return this.navupdate("#ticket/create/id/"+this.id+this.split,{type:"menu"}),this.autosaveStart(),this.bind("ticket_create_rerender",function(t){return function(e){return t.renderQueue(e)}}(this))},i.prototype.hide=function(){return this.autosaveStop(),this.unbind("ticket_create_rerender",function(t){return function(e){return t.renderQueue(e)}}(this))},i.prototype.changed=function(){var t,e;return e=this.formParam(this.$(".ticket-create")),!(!(t=difference(this.formDefault,e))||_.isEmpty(t))},i.prototype.autosaveStop=function(){return this.clearDelay("ticket-create-form-update"),this.el.off("change.local blur.local keyup.local paste.local input.local")},i.prototype.autosaveStart=function(){var t,e;return this.autosaveLast||(t=App.TaskManager.get(this.taskKey),t&&!t.state&&(t.state={}),this.autosaveLast=t.state||{}),e=function(t){return function(){var e,n;if(e=t.formParam(t.$(".ticket-create")),!_.isEmpty(e))return n=difference(t.autosaveLast,e),!_.isEmpty(t.autosaveLast)&&_.isEmpty(n)||(t.autosaveLast=e,t.log("debug","form hash changed",n,e),App.TaskManager.update(t.taskKey,{state:e}),t.latestTitle===e.title)?void 0:(t.latestTitle=e.title,App.TaskManager.touch(t.taskKey))}}(this),this.el.on("change.local blur.local keyup.local paste.local input.local","form, .js-textarea",function(t){return function(){return t.delay(e,250,"ticket-create-form-update")}}(this)),this.delay(e,800,"ticket-create-form-update")},i.prototype.buildScreen=function(t){return _.isEmpty(t.ticket_id)&&_.isEmpty(t.article_id)?_.isEmpty(t.customer_id)?void this.renderQueue():void this.renderQueue({options:{customer_id:t.customer_id}}):this.ajax({id:"ticket_split"+this.taskKey,type:"GET",url:this.apiPath+"/ticket_split",data:{ticket_id:t.ticket_id,article_id:t.article_id,form_id:this.formId},processData:!0,success:function(e){return function(n){var i,s;return App.Collection.loadAssets(n.assets),s=App.Ticket.find(t.ticket_id).attributes(),i=App.TicketArticle.find(t.article_id),s.owner_id=0,s.customer_id_completion=i.from,s.subject=i.subject||s.title,i.content_type.match(/\/html/)?s.body=i.body:s.body=App.Utils.text2html(i.body),s.attachments=n.attachments,e.renderQueue({options:s})}}(this)})},i.prototype.renderQueue=function(t){var e;if(null==t&&(t={}),e=function(e){return function(){return e.render(t)}}(this),App.QueueManager.add(this.queueKey,e),this.formMeta)return App.QueueManager.run(this.queueKey)},i.prototype.render=function(t){var e,n,i;if(null==t&&(t={}),this.formMeta)return i=this.prefilledParams||{},t&&!_.isEmpty(t.options)?i=t.options:App.TaskManager.get(this.taskKey)&&!_.isEmpty(App.TaskManager.get(this.taskKey).state)&&(i=App.TaskManager.get(this.taskKey).state,i.attachments=App.TaskManager.get(this.taskKey).attachments,_.isEmpty(i.form_id)||(this.formId=i.form_id)),this.html(App.view("agent_ticket_create")({head:"New Ticket",agent:this.permissionCheck("ticket.agent"),admin:this.permissionCheck("admin"),types:this.types,availableTypes:this.availableTypes,form_id:this.formId})),App.Ticket.configure_attributes.push({name:"cc",display:"Cc",tag:"input",type:"text",maxlength:1e3,"null":!0,screen:{create_top:{Agent:{"null":!0}},create_middle:{},edit:{}}}),n=this.Config.get("TicketCreateFormHandler"),new App.ControllerForm({el:this.$(".ticket-form-top"),form_id:this.formId,model:App.Ticket,screen:"create_top",events:{"change [name=customer_id]":this.localUserInfo},handlersConfig:n,filter:this.formMeta.filter,formMeta:this.formMeta,autofocus:!0,params:i,taskKey:this.taskKey}),new App.ControllerForm({el:this.$(".article-form-top"),form_id:this.formId,model:App.TicketArticle,screen:"create_top",events:{"fileUploadStart .richtext":function(t){return function(){return t.submitDisable()}}(this),"fileUploadStop .richtext":function(t){return function(){return t.submitEnable()}}(this)},params:i,taskKey:this.taskKey}),new App.ControllerForm({el:this.$(".ticket-form-middle"),form_id:this.formId,model:App.Ticket,screen:"create_middle",events:{"change [name=customer_id]":this.localUserInfo},handlersConfig:n,filter:this.formMeta.filter,formMeta:this.formMeta,params:i,noFieldset:!0,taskKey:this.taskKey}),new App.ControllerForm({el:this.$(".ticket-form-bottom"),form_id:this.formId,model:App.Ticket,screen:"create_bottom",events:{"change [name=customer_id]":this.localUserInfo},handlersConfig:n,filter:this.formMeta.filter,formMeta:this.formMeta,params:i,taskKey:this.taskKey}),App.Ticket.configure_attributes.pop(),this.setFormTypeInUi(i.formSenderType),this.formDefault=this.formParam(this.$(".ticket-create")),this.textModule=new App.WidgetTextModule({el:this.$('[data-name="body"]').parent(),data:{config:App.Config.all(),user:App.Session.get()}}),$("#tags").tokenfield(),this.sidebarWidget=new App.TicketCreateSidebar({el:this.sidebar,params:this.formDefault,sidebarState:this.sidebarState,taskKey:this.taskKey,query:this.query}),this.formDefault.customer_id&&(e=function(t){return function(e){return t.localUserInfoCallback(t.formDefault,e)}}(this),App.User.full(this.formDefault.customer_id,e)),App.TaskManager.touch(this.taskKey),this.tokanice()},i.prototype.tokanice=function(){return App.Utils.tokaniceEmails(".content.active input[name=cc]")},i.prototype.localUserInfo=function(t){var e,n;if(this.sidebarWidget)return n=App.ControllerForm.params($(t.target).closest("form")),n.customer_id?(e=function(t){return function(e){return t.localUserInfoCallback(n,e)}}(this),void App.User.full(n.customer_id,e)):this.localUserInfoCallback(n)},i.prototype.localUserInfoCallback=function(t,e){return null==e&&(e={}),this.sidebarWidget.render(t),this.textModule.reload({config:App.Config.all(),user:App.Session.get(),ticket:{customer:e}})},i.prototype.cancel=function(t){return t.preventDefault(),this.navigate("#")},i.prototype.params=function(){return this.formParam(this.$(".main form"))},i.prototype.submit=function(t){var e,n,i,s,r,o,a,l,c,u,p,h,d;return t.preventDefault(),o=this.params(),o.title||(o.title=o.subject),l=new App.Ticket,a=App.TicketArticleSender.findByAttribute("name",this.articleAttributes.sender),h=App.TicketArticleType.findByAttribute("name",this.articleAttributes.article),o.group_id&&(s=App.Group.find(o.group_id)),this.ticket_id&&(o.links={Ticket:{child:[this.ticket_id]}}),"email-out"!==this.currentChannel()&&delete o.cc,"Customer"===a.name?o.article={to:s&&s.name||"",from:o.customer_id_completion,cc:o.cc,subject:o.subject,body:o.body,type_id:h.id,sender_id:a.id,form_id:this.formId,content_type:"text/html"}:o.article={from:s&&s.name||"",to:o.customer_id_completion,cc:o.cc,subject:o.subject,body:o.body,type_id:h.id,sender_id:a.id,form_id:this.formId,content_type:"text/html"},l.load(o),p=l.validate({screen:"create_top"}),u=l.validate({screen:"create_middle"}),c=l.validate({screen:"create_bottom"}),e=new App.TicketArticle,e.load(o.article),n=e.validate({screen:"create_top"}),i={},i=_.extend(i,p),i=_.extend(i,u),i=_.extend(i,c),i=_.extend(i,n),_.isEmpty(i)?e.body&&this.$(".richtext .attachments .attachment").length<1&&(r=App.Utils.checkAttachmentReference(e.body))&&!confirm(App.i18n.translateContent("You use %s in text but no attachment is attached. Do you want to continue?",r))?void 0:(this.sidebarWidget&&this.sidebarWidget.postParams&&this.sidebarWidget.postParams({ticket:l}),this.submitDisable(t),d=this,l.save({done:function(){return d.notify({type:"success",msg:App.i18n.translateInline("Ticket %s created!",this.number),link:"#ticket/zoom/"+this.id,timeout:4e3}),App.TaskManager.remove(d.taskKey),d.scrollTo(),d.sidebarWidget&&d.sidebarWidget.commit({ticket_id:this.id}),this.editable("change")?void d.navigate("#ticket/zoom/"+this.id):d.navigate("#")},fail:function(e,n){return d.log("errors",n),d.submitEnable(t),d.notify({type:"error",msg:App.i18n.translateContent(n.error_human||n.error||"Unable to create object!"),timeout:6e3})}})):(this.log("error",i),void this.formValidate({form:t.target,errors:i}))},i.prototype.submitDisable=function(t){return t?void this.formDisable(t):this.formDisable(this.$(".js-submit"),"button")},i.prototype.submitEnable=function(t){return t?void this.formEnable(t):this.formEnable(this.$(".js-submit"),"button")},i}(App.Controller),t=function(t){function e(t){var n,i,s;if(e.__super__.constructor.apply(this,arguments),!t.id)return s="",t.ticket_id&&t.article_id&&(s="/"+t.ticket_id+"/"+t.article_id),t.customer_id&&(s="/customer/"+t.customer_id),t.query&&(s="/query/"+t.query),i=Math.floor(99999*Math.random()),void this.navigate("#ticket/create/id/"+i+s);n={ticket_id:t.ticket_id,article_id:t.article_id,type:t.type,customer_id:t.customer_id,query:t.query,id:t.id},App.TaskManager.execute({key:"TicketCreateScreen-"+t.id,controller:"TicketCreate",params:n,show:!0})}return n(e,t),e.prototype.requiredPermission="ticket.agent",e}(App.ControllerPermanent),App.Config.set("ticket/create",t,"Routes"),App.Config.set("ticket/create/",t,"Routes"),App.Config.set("ticket/create/id/:id",t,"Routes"),App.Config.set("ticket/create/customer/:customer_id",t,"Routes"),App.Config.set("ticket/create/id/:id/customer/:customer_id",t,"Routes"),App.Config.set("ticket/create/id/:id/query/:query",t,"Routes"),App.Config.set("ticket/create/:ticket_id/:article_id",t,"Routes"),App.Config.set("ticket/create/id/:id/:ticket_id/:article_id",t,"Routes"),App.Config.set("TicketCreate",{prio:8003,parent:"#new",name:"New Ticket",translate:!0,target:"#ticket/create",permission:["ticket.agent"],divider:!0},"NavBarRight")}.call(this),function(){var t;t=function(){function t(){}return t.run=function(t,e,n,i,s,r){var o,a,l,c,u,p;if(e&&"group_id"===e.name)return l=void 0,t.group_id&&(a=App.Group.find(t.group_id))&&a.signature_id&&(l=App.Signature.find(a.signature_id)),p=r.el.closest(".content").find('[name="formSenderType"]').val(),l&&l.body&&"email-out"===p?(c=App.Utils.replaceTags(l.body,{user:App.Session.get(),config:App.Config.all()}),o=r.el.closest(".content").find("[data-name=body]"),!_.isEmpty(o)&&App.Utils.signatureCheck(o.html()||"",c)?(u=r.el.closest(".content").find("[data-signature=true]").data("signature-id"),u&&u.toString()!==l.id.toString()&&r.el.closest(".content").find('[data-signature="true"]').remove(),App.Utils.htmlLastLineEmpty(o)||o.append("<br><br>"),l=$('<div data-signature="true" data-signature-id="'+l.id+'">'+c+"</div>"),App.Utils.htmlStrip(l),o.append(l),r.el.closest(".content").find("[data-name=body]").replaceWith(o)):void 0):r.el.closest(".content").find('[data-name="body"]').find("[data-signature=true]").remove()},t}(),App.Config.set("200-ticketFormSignature",t,"TicketCreateFormHandler")}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.TicketCreateSidebar=function(n){function i(){this.render=t(this.render,this),this.postParams=t(this.postParams,this),this.commit=t(this.commit,this),this.reload=t(this.reload,this),i.__super__.constructor.apply(this,arguments),this.render()}return e(i,n),i.prototype.reload=function(t){var e,n,i,s;i=this.sidebarBackends,s=[];for(n in i)e=i[n],e&&e.reload?s.push(e.reload(t)):s.push(void 0);return s},i.prototype.commit=function(t){var e,n,i,s;i=this.sidebarBackends,s=[];for(n in i)e=i[n],e&&e.commit?s.push(e.commit(t)):s.push(void 0);return s},i.prototype.postParams=function(t){var e,n,i,s;i=this.sidebarBackends,s=[];for(n in i)e=i[n],e&&e.postParams?s.push(e.postParams(t)):s.push(void 0);return s},i.prototype.render=function(t){var e,n,i,s,r;for(t&&(this.params=t),this.sidebarBackends||(this.sidebarBackends={}),this.sidebarItems=[],r=App.Config.get("TicketCreateSidebar"),i=_.keys(r).sort(),e=0,s=i.length;e<s;e++)n=i[e],this.sidebarBackends[n]&&this.sidebarBackends[n].reload?this.sidebarBackends[n].reload({params:this.params,query:this.query}):this.sidebarBackends[n]=new r[n]({params:this.params,query:this.query,taskGet:this.taskGet,taskKey:this.taskKey}),this.sidebarItems.push(this.sidebarBackends[n]);return new App.Sidebar({el:this.el,sidebarState:this.sidebarState,items:this.sidebarItems})},i}(App.Controller)}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var s in e)i.call(e,s)&&(t[s]=e[s]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;t=function(t){function i(){return this.editCustomer=e(this.editCustomer,this),this.showCustomer=e(this.showCustomer,this),this.badgeRenderLocal=e(this.badgeRenderLocal,this),this.badgeRender=e(this.badgeRender,this),this.metaBadge=e(this.metaBadge,this),this.sidebarItem=e(this.sidebarItem,this),i.__super__.constructor.apply(this,arguments)}return n(i,t),i.prototype.sidebarItem=function(){var t,e;if(this.permissionCheck("ticket.agent")&&!_.isEmpty(this.params.customer_id))return this.item={name:"customer",badgeCallback:this.badgeRender,sidebarHead:"Customer",sidebarCallback:this.showCustomer,sidebarActions:[]},App.User.exists(this.params.customer_id)&&(e=App.User.find(this.params.customer_id),t=App.User.find(App.Session.get("id")),e.isAccessibleBy(t,"change")&&this.item.sidebarActions.push({title:"Edit Customer",name:"customer-edit",callback:this.editCustomer})),this.item},i.prototype.metaBadge=function(t){var e,n;return e="",n="",e=this.sidebarItemCounter(t),!0===this.Config.get("ui_sidebar_open_ticket_indicator_colored")&&(1===e&&(n="tabsSidebar-tab-count--warning"),e>1&&(n="tabsSidebar-tab-count--danger")),{name:"customer",icon:"person",counterPossible:!0,counter:e,cssClass:n}},i.prototype.badgeRender=function(t){var e;if(this.badgeEl=t,App.User.exists(this.params.customer_id))return e=App.User.find(this.params.customer_id),this.badgeRenderLocal(e)},i.prototype.badgeRenderLocal=function(t){return this.badgeEl.html(App.view("generic/sidebar_tabs_item")(this.metaBadge(t)))},i.prototype.sidebarItemCounter=function(t){var e;return e="",t&&t.preferences&&t.preferences.tickets_open&&(e=t.preferences.tickets_open),e},i.prototype.showCustomer=function(t){if(this.elSidebar=t,!_.isEmpty(this.params.customer_id))return new App.WidgetUser({el:this.elSidebar,user_id:this.params.customer_id,callback:this.badgeRenderLocal})},i.prototype.editCustomer=function(){return new App.ControllerGenericEdit({id:this.params.customer_id,genericObject:"User",screen:"edit",pageData:{title:"Users",object:"User",objects:"Users"},container:this.elSidebar.closest(".content")})},i}(App.Controller),App.Config.set("200-Customer",t,"TicketCreateSidebar")}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var s in e)i.call(e,s)&&(t[s]=e[s]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;t=function(t){function i(){return this.editOrganization=e(this.editOrganization,this),this.showOrganization=e(this.showOrganization,this),this.sidebarItem=e(this.sidebarItem,this),i.__super__.constructor.apply(this,arguments)}return n(i,t),i.prototype.sidebarItem=function(){var t;if(this.permissionCheck("ticket.agent")&&this.params.customer_id&&App.User.exists(this.params.customer_id)&&(t=App.User.find(this.params.customer_id),this.organization_id=t.organization_id,this.organization_id))return this.item={name:"organization",badgeIcon:"group",sidebarHead:"Organization",sidebarCallback:this.showOrganization,sidebarActions:[{title:"Edit Organization",name:"organization-edit",callback:this.editOrganization}]},this.item},i.prototype.showOrganization=function(t){return this.elSidebar=t,new App.WidgetOrganization({el:this.elSidebar,organization_id:this.organization_id})},i.prototype.editOrganization=function(){return new App.ControllerGenericEdit({id:this.organization_id,genericObject:"Organization",pageData:{title:"Organizations",object:"Organization",objects:"Organizations"},container:this.elSidebar.closest(".content")})},i}(App.Controller),App.Config.set("300-Organization",t,"TicketCreateSidebar")}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var s in e)i.call(e,s)&&(t[s]=e[s]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;t=function(t){function i(){return this.showTemplates=e(this.showTemplates,this),this.sidebarItem=e(this.sidebarItem,this),i.__super__.constructor.apply(this,arguments)}return n(i,t),i.prototype.sidebarItem=function(){if(this.permissionCheck("ticket.agent"))return this.item={name:"template",badgeIcon:"templates",badgeCallback:this.badgeRender,sidebarHead:"Templates",sidebarActions:[],sidebarCallback:this.showTemplates},this.item},i.prototype.showTemplates=function(t){return this.el=t,new App.WidgetTemplate({el:t})},i}(App.Controller),App.Config.set("100-Template",t,"TicketCreateSidebar")}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.TicketMerge=function(n){function i(){this.onSubmit=t(this.onSubmit,this),this.content=t(this.content,this),i.__super__.constructor.apply(this,arguments),this.fetch()}return e(i,n),i.prototype.buttonClose=!0,i.prototype.buttonCancel=!0,i.prototype.buttonSubmit=!0,i.prototype.head="Merge",i.prototype.veryLarge=!0,i.prototype.shown=!1,i.prototype.fetch=function(){return this.ajax({id:"ticket_related",type:"GET",url:this.apiPath+"/ticket_related/"+this.ticket.id,processData:!0,success:function(t){return function(e){return App.Collection.loadAssets(e.assets),t.ticket_ids_by_customer=e.ticket_ids_by_customer,t.ticket_ids_recent_viewed=e.ticket_ids_recent_viewed,t.render()}}(this)})},i.prototype.content=function(){var t;return t=$(App.view("agent_ticket_merge")()),new App.TicketList({tableId:"ticket-merge-customer-tickets",el:t.find("#ticket-merge-customer-tickets"),ticket_ids:this.ticket_ids_by_customer,radio:!0}),new App.TicketList({tableId:"ticket-merge-recent-tickets",el:t.find("#ticket-merge-recent-tickets"),ticket_ids:this.ticket_ids_recent_viewed,radio:!0}),t.delegate('[name="master_ticket_number"]',"focus",function(t){return $(t.target).parents().find('[name="radio"]').prop("checked",!1)}),t.delegate('[name="radio"]',"click",function(t){var e,n;if($(t.target).prop("checked"))return n=$(t.target).val(),e=App.Ticket.fullLocal(n),$(t.target).parents().find('[name="master_ticket_number"]').val(e.number)}),t},i.prototype.onSubmit=function(t){var e;return this.formDisable(t),e=this.formParam(t.target),e.master_ticket_number?this.ajax({id:"ticket_merge",type:"GET",url:this.apiPath+"/ticket_merge/"+this.ticket.id+"/"+e.master_ticket_number,processData:!0,success:function(e){return function(n){return"success"===n.result?(App.Collection.load({type:"Ticket",data:[n.master_ticket]}),App.Collection.load({type:"Ticket",data:[n.slave_ticket]}),e.close(),e.log("notice","nav...",App.Ticket.find(n.master_ticket.id)),e.navigate("#ticket/zoom/"+n.master_ticket.id),e.notify({type:"success",msg:App.i18n.translateContent("Ticket %s merged!",n.slave_ticket.number),timeout:4e3}),App.TaskManager.remove("Ticket-"+n.slave_ticket.id)):(e.notify({type:"error",msg:App.i18n.translateContent(n.message),timeout:6e3}),e.formEnable(t))}}(this),error:function(e){return function(n){var i;return i=n.responseJSON||{},e.notify({type:"error",msg:App.i18n.translateContent(i.error_human||i.error||"Unable to merge!"),timeout:6e3}),e.formEnable(t)}}(this)}):(alert(App.i18n.translateInline("%s required!","Ticket#")),void this.formEnable(t))},i}(App.ControllerModal)}.call(this),function(){var t,e,n,i=function(t,e){return function(){return t.apply(e,arguments)}},s=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;t=function(t){function r(){this.appEdit=i(this.appEdit,this),this.togglePasswordAccess=i(this.togglePasswordAccess,this),this.toggleTokenAccess=i(this.toggleTokenAccess,this),this.release=i(this.release,this),this.render=i(this.render,this),r.__super__.constructor.apply(this,arguments),App.Setting.fetchFull(this.render,{force:!1})}return s(r,t),r.prototype.requiredPermission="admin.api",r.prototype.header="API",r.prototype.events={"click .action":"action","change .js-TokenAccess input":"toggleTokenAccess","change .js-PasswordAccess input":"togglePasswordAccess","click .js-appNew":"appNew"},r.prototype.elements={".js-TokenAccess input":"TokenAccess",".js-PasswordAccess input":"PasswordAccess"},r.prototype.render=function(){var t,e;return t=App.Setting.search({filter:{area:"API::Base"}}),this.html(App.view("api")({settings:t})),this.subscribeApplicationId&&App.Setting.unsubscribe(this.subscribeApplicationId),e=function(t){return function(){var e,n,i;return e=function(t){var e;return e={name:"view",display:"View"},t.splice(3,0,e),e={name:"token",display:"Token"},t.splice(4,0,e),t},i=function(){return"X"},n=function(){return"X"},new App.ControllerTable({el:t.$(".js-appList"),model:App.Application,tableId:"applications",objects:App.Application.all(),bindRow:{events:{click:t.appEdit}},bindCol:{view:{events:{click:t.appView}},token:{events:{click:t.appToken}}},callbackHeader:[e],callbackAttributes:{view:[i],token:[n]}})}}(this),e(),this.subscribeApplicationId=App.Application.subscribe(e,{initFetch:!0,clear:!0})},r.prototype.release=function(){if(r.__super__.release.apply(this,arguments),this.subscribeApplicationId)return App.Application.unsubscribe(this.subscribeApplicationId)},r.prototype.action=function(t){var e,n,i;if(t.preventDefault(),n=$(t.target).parents("[data-id]").data("id"),i=$(t.target).data("type"),"uninstall"===i&&(e="DELETE"),e)return this.ajax({id:"packages",type:e,url:this.apiPath+"/packages",data:JSON.stringify({id:n}),processData:!1,success:function(t){return function(){return t.load()}}(this)})},r.prototype.toggleTokenAccess=function(){var t;return t=this.TokenAccess.prop("checked"),App.Setting.set("api_token_access",t)},r.prototype.togglePasswordAccess=function(){var t;return t=this.PasswordAccess.prop("checked"),App.Setting.set("api_password_access",t)},r.prototype.appToken=function(t,e){return e.preventDefault(),new n({app:App.Application.find(t)})},r.prototype.appView=function(t,n){return n.preventDefault(),new e({app:App.Application.find(t)})},r.prototype.appNew=function(t){return t.preventDefault(),new App.ControllerGenericNew({pageData:{object:"Application"},genericObject:"Application",callback:function(t){return function(){return t.render()}}(this),container:this.el.closest(".content")})},r.prototype.appEdit=function(t,e){var n;return e.preventDefault(),n=App.Application.find(t),new App.ControllerGenericEdit({id:n.id,pageData:{object:"Application"},genericObject:"Application",callback:function(t){return function(){return t.render()}}(this),container:this.el.closest(".content")})},r}(App.ControllerSubContent),e=function(t){function e(t){this.head=t.app.name,e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.headPrefix="App",e.prototype.buttonSubmit=!1,e.prototype.buttonCancel=!0,e.prototype.shown=!0,e.prototype.small=!0,e.prototype.events={"click .js-select":"selectAll"},e.prototype.content=function(){return'AppID: <input class="js-select" type="text" value="'+this.app.uid+'"> <br> Secret: <input class="js-select" type="text" value="'+this.app.secret+'">'},e}(App.ControllerModal),n=function(t){function e(t){this.onSubmit=i(this.onSubmit,this),this.head=t.app.name,e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.headPrefix="Generate Token",e.prototype.buttonSubmit="Generate Token",e.prototype.buttonCancel=!0,e.prototype.shown=!0,e.prototype.small=!0,e.prototype.events={"click .js-select":"selectAll"},e.prototype.content=function(){return""+App.i18n.translateContent("Generate Access Token for |%s|",App.Session.get().displayNameLong())},e.prototype.onSubmit=function(){return this.ajax({id:"application_token",type:"POST",url:this.apiPath+"/applications/token",processData:!0,data:JSON.stringify({id:this.app.id}),success:function(t){return function(e){
return t.contentInline=App.i18n.translateContent("New Access Token is")+': <input class="js-select" type="text" value="'+e.token+'">',t.update(),t.$(".js-submit").remove()}}(this)})},e}(App.ControllerModal),App.Config.set("API",{prio:1200,name:"API",parent:"#system",target:"#system/api",controller:t,permission:["admin.api"]},"NavBarAdmin")}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var s in e)i.call(e,s)&&(t[s]=e[s]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;t=function(t){function i(){this.description=e(this.description,this),this["delete"]=e(this["delete"],this),this.edit=e(this.edit,this),this["new"]=e(this["new"],this),this.release=e(this.release,this),this.render=e(this.render,this),i.__super__.constructor.apply(this,arguments),this.subscribeId=App.Calendar.subscribe(this.render),this.startLoading(),this.ajax({id:"calendar_index",type:"GET",url:this.apiPath+"/calendars_init",processData:!0,success:function(t){return function(e){return App.Config.set("ical_feeds",e.ical_feeds),App.Config.set("timezones",e.timezones),App.Collection.loadAssets(e.assets),t.stopLoading(),t.render()}}(this)})}return n(i,t),i.prototype.requiredPermission="admin.calendar",i.prototype.header="Calendars",i.prototype.events={"click .js-new":"new","click .js-edit":"edit","click .js-delete":"delete","click .js-default":"default","click .js-description":"description"},i.prototype.render=function(){var t,e,n,i,s,r,o,a,l,c,u,p,h,d,f,g,m,v,y;for(e=App.Calendar.search({sortBy:"name"}),r=0,u=e.length;r<u;r++){for(t=e[r],g=["mon","tue","wed","thu","fri","sat","sun"],a=0,p=g.length;a<p;a++)n=g[a],t.business_hours[n]||(t.business_hours[n]={});m=t.business_hours;for(n in m)d=m[n],d.active||(d.active=!1),d.timeframes||(d.timeframes=[]);if(f={},t.public_holidays)for(s=(new Date).setTime((new Date).getTime()-432e6),y=(new Date).setTime((new Date).getTime()+6048e6),c=Object.keys(t.public_holidays).reverse(),l=0,h=c.length;l<h;l++)n=c[l],(o=new Date(Date.parse(n+"T00:00:00Z")))<y&&o>s&&t.public_holidays[n]&&t.public_holidays[n].active&&(f[n]=t.public_holidays[n]);t.public_holidays_preview=App.Utils.sortByKey(f)}return v=!1,App.Calendar.description&&(_.isEmpty(e)?i=marked(App.Calendar.description):v=!0),this.html(App.view("calendar/index")({calendars:e,showDescription:v,description:i}))},i.prototype.release=function(){if(this.subscribeId)return App.Calendar.unsubscribe(this.subscribeId)},i.prototype["new"]=function(){return new App.ControllerGenericNew({pageData:{title:this.header,object:"Calendar",objects:"Calendars"},genericObject:"Calendar",container:this.el.closest(".content"),large:!0})},i.prototype.edit=function(t){var e;return e=$(t.target).closest(".action").data("id"),new App.ControllerGenericEdit({id:e,pageData:{title:this.header,object:"Calendar",objects:"Calendars"},genericObject:"Calendar",container:this.el.closest(".content"),large:!0})},i.prototype["delete"]=function(t){var e,n;return t.preventDefault(),e=$(t.target).closest(".action").data("id"),n=App.Calendar.find(e),new App.ControllerGenericDestroyConfirm({item:n,container:this.el.closest(".content"),callback:this.load})},i.prototype["default"]=function(t){var e,n;return t.preventDefault(),e=$(t.target).closest(".action").data("id"),n=App.Calendar.find(e),n["default"]=!0,n.save()},i.prototype.description=function(){return new App.ControllerGenericDescription({description:App.Calendar.description,container:this.el.closest(".content")})},i}(App.ControllerSubContent),App.Config.set("Calendars",{prio:2400,name:"Calendars",parent:"#manage",target:"#manage/calendars",controller:t,permission:["admin.calendar"]},"NavBarAdmin")}.call(this),function(){var t,e,n,i=function(t,e){return function(){return t.apply(e,arguments)}},s=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;App.CustomerChat=function(e){function r(){this.currentPosition=i(this.currentPosition,this),this.setPosition=i(this.setPosition,this),this.idleTimeoutStop=i(this.idleTimeoutStop,this),this.idleTimeoutStart=i(this.idleTimeoutStart,this),this.acceptChat=i(this.acceptChat,this),this.propagateLayoutChange=i(this.propagateLayoutChange,this),this.removeChat=i(this.removeChat,this),this.windowCount=i(this.windowCount,this),this.updateMeta=i(this.updateMeta,this),this["switch"]=i(this["switch"],this),this.counter=i(this.counter,this),this.active=i(this.active,this),this.show=i(this.show,this),this.featureActive=i(this.featureActive,this),this.pushState=i(this.pushState,this),this.stopPushState=i(this.stopPushState,this),this.startPushState=i(this.startPushState,this);var t;r.__super__.constructor.apply(this,arguments),this.chatWindows={},this.maxChatWindows=4,t=this.Session.get("preferences"),t&&t.chat&&t.chat.max_windows&&(this.maxChatWindows=parseInt(t.chat.max_windows)),this.pushStateIntervalOn=void 0,this.idleTimeout=parseInt(this.Config.get("chat_agent_idle_timeout")||120),this.messageCounter=0,this.meta={active:!1,waiting_chat_count:0,waiting_chat_session_list:[],running_chat_count:0,running_chat_session_list:[],active_agent_count:0,active_agent_ids:[]},this.render(),this.on("layout-has-changed",this.propagateLayoutChange),this.bind("chat_status_agent",function(t){return function(e){if(e.assets&&App.Collection.loadAssets(e.assets),t.meta=e,t.updateMeta(),!0===e.active)return t.startPushState()}}(this)),this.bind("chat_session_start",function(t){return function(e){if(e.session)return t.addChat(e.session)}}(this)),this.bind("ws:login chat_agent_state",function(){return App.WebSocket.send({event:"chat_status_agent"})}),App.WebSocket.send({event:"chat_status_agent"}),this.bind("ui:rerender chat:rerender",function(t){return function(){var e,n,i;if(t.authenticateCheck()){n=t.chatWindows;for(i in n)e=n[i],e.el.remove();return t.chatWindows={},t.render(),App.WebSocket.send({event:"chat_status_agent"})}}}(this))}return s(r,e),r.prototype.events={"click .js-acceptChat":"acceptChat","click .js-settings":"settings"},r.prototype.elements={".js-acceptChat":"acceptChatElement",".js-badgeWaitingCustomers":"badgeWaitingCustomers",".js-badgeChattingCustomers":"badgeChattingCustomers",".js-badgeActiveAgents":"badgeActiveAgents",".chat-workspace":"workspace"},r.prototype.sounds={chat_new:new Audio("assets/sounds/chat_new.mp3")},r.prototype.startPushState=function(){if(!this.pushStateIntervalOn)return this.pushStateIntervalOn=!0,this.interval(this.pushState,55e3,"pushState")},r.prototype.stopPushState=function(){return this.pushStateIntervalOn=!1,this.clearInterval("pushState")},r.prototype.pushState=function(){return App.WebSocket.send({event:"chat_agent_state",data:{active:this.meta.active}})},r.prototype.featureActive=function(){return!!this.Config.get("chat")},r.prototype.render=function(){var t;return this.permissionCheck("chat.agent")?this.Config.get("chat")?(this.html(App.view("customer_chat/index")()),t=function(t){var e,n,i,s;for(i=0,s=t.length;i<s;i++)n=t[i],e=App.Chat.find(n.chat_id),n.name=e.displayName()+" [#"+n.id+"]",n.geo_data="",n.preferences&&n.preferences.geo_ip&&(n.preferences.geo_ip.country_name&&(n.geo_data+=n.preferences.geo_ip.country_name),n.preferences.geo_ip.city_name&&(n.geo_data+=" "+n.preferences.geo_ip.city_name)),n.user_id&&(n.user=App.User.find(n.user_id));return App.view("customer_chat/chat_list")({chat_sessions:t})},this.el.find(".js-waitingCustomers .js-info").popover({trigger:"hover",html:!0,animation:!1,delay:0,placement:"bottom",container:"body",title:function(){return App.i18n.translateContent("Waiting Customers")},content:function(e){return function(){return t(e.meta.waiting_chat_session_list)}}(this)}),this.el.find(".js-chattingCustomers .js-info").popover({trigger:"hover",html:!0,animation:!1,delay:0,placement:"bottom",container:"body",title:function(){return App.i18n.translateContent("Chatting Customers")},content:function(e){return function(){return t(e.meta.running_chat_session_list)}}(this)}),this.el.find(".js-activeAgents .js-info").popover({trigger:"hover",html:!0,animation:!1,delay:0,placement:"bottom",container:"body",title:function(){return App.i18n.translateContent("Active Agents")},content:function(t){return function(){var e,n,i,s,r;for(r=[],i=t.meta.active_agent_ids,e=0,n=i.length;e<n;e++)s=i[e],r.push(App.User.find(s));return App.view("customer_chat/user_list")({users:r})}}(this)})):void this.renderScreenError({detail:"Feature disabled!"}):void this.renderScreenUnauthorized({objectName:"Chat"})},r.prototype.show=function(t){var e;if(this.title("Customer Chat",!0),this.navupdate("#customer_chat"),t.session_id)return e=function(t){return function(e){return t.addChat(e)}}(this),App.ChatSession.full(t.session_id,e),this.navigate("#customer_chat")},r.prototype.active=function(t){return void 0===t?this.shown:this.shown=t},r.prototype.counter=function(){var t,e,n,i;t=0,this.meta.waiting_chat_count&&(t+=this.meta.waiting_chat_count),this.lastWaitingChatCount!==t&&(this["switch"]()&&t>0&&void 0!==this.lastWaitingChatCount&&(this.sounds.chat_new.play(),this.notifyDesktop({title:t+" "+App.i18n.translateInline("Waiting Customers"),url:"#customer_chat"})),this.lastWaitingChatCount=t),n=this.chatWindows;for(e in n)(i=n[e])&&(t+=i.unreadMessages());return this.messageCounter=t},r.prototype["switch"]=function(t){var e,n;return null==t&&(t=void 0),void 0===t?this.meta.active:(this.meta.active=t,t?(this.startPushState(),n=this.Session.get("preferences"),App.Chat.first()&&!n||!n.chat||!n.chat.active||_.isEmpty(n.chat.active)?App.Chat.count()<2?(n.chat={},n.chat.active={},n.chat.active[App.Chat.first().id]="on",this.ajax({id:"preferences",type:"PUT",url:this.apiPath+"/users/preferences",data:JSON.stringify({chat:n.chat}),processData:!0,success:this.success,error:this.error})):(e="To be able to chat you need to select min. one chat topic below!",this.settings({errors:{settings:e},active:this.meta.active}),this.meta.active=!1,this.pushState()):void 0):(this.stopPushState(),this.pushState()))},r.prototype.updateMeta=function(){var t,e,n,i;if(this.meta.waiting_chat_count&&this.maxChatWindows>this.windowCount()?(this.acceptChatElement.addClass("is-clickable is-blinking"),this.idleTimeoutStart()):(this.acceptChatElement.removeClass("is-clickable is-blinking"),this.idleTimeoutStop()),this.badgeWaitingCustomers.text(this.meta.waiting_chat_count),this.badgeChattingCustomers.text(this.meta.running_chat_count),this.badgeActiveAgents.text(this.meta.active_agent_count),this.meta.active_sessions)for(n=this.meta.active_sessions,t=0,e=n.length;t<e;t++)i=n[t],this.addChat(i);return this.meta.active_sessions=!1,this.updateNavMenu()},r.prototype.addChat=function(e){var n;if(!this.chatWindows[e.session_id])return n=new t({session:e,removeCallback:this.removeChat,messageCallback:this.updateNavMenu}),this.workspace.append(n.el),n.render(),this.chatWindows[e.session_id]=n,1===this.windowCount()?n.focus():void 0},r.prototype.windowCount=function(){var t,e;e=0;for(t in this.chatWindows)e++;return e},r.prototype.removeChat=function(t){return delete this.chatWindows[t],this.updateMeta()},r.prototype.propagateLayoutChange=function(){var t,e,n,i;e=this.chatWindows,n=[];for(i in e)t=e[i],n.push(t.trigger("layout-changed"));return n},r.prototype.acceptChat=function(){if(!(this.windowCount()>=this.maxChatWindows))return App.WebSocket.send({event:"chat_session_start"}),this.idleTimeoutStop()},r.prototype.settings=function(t){return null==t&&(t={}),new n({windowSpace:this,errors:t.errors,active:t.active})},r.prototype.idleTimeoutStart=function(){var t;if(!this.idleTimeoutId)return t=function(t){return function(){return t["switch"](!1),t.notify({type:"notice",msg:App.i18n.translateContent("Chat not answered, set to offline automatically.")})}}(this),this.idleTimeoutId=this.delay(t,1e3*this.idleTimeout)},r.prototype.idleTimeoutStop=function(){if(this.idleTimeoutId)return this.clearDelay(this.idleTimeoutId),this.idleTimeoutId=void 0},r.prototype.setPosition=function(t){return this.$(".main").scrollTop(t)},r.prototype.currentPosition=function(){return this.$(".main").scrollTop()},r}(App.Controller),t=function(t){function e(){this.ticketCreate=i(this.ticketCreate,this),this.detectScrolledtoBottom=i(this.detectScrolledtoBottom,this),this.addTimestamp=i(this.addTimestamp,this),this.goOffline=i(this.goOffline,this),this.removeWritingLoader=i(this.removeWritingLoader,this),this.showWritingLoader=i(this.showWritingLoader,this),this.addMessage=i(this.addMessage,this),this.resetUnreadMessages=i(this.resetUnreadMessages,this),this.addUnreadMessages=i(this.addUnreadMessages,this),this.unreadMessages=i(this.unreadMessages,this),this.receiveMessage=i(this.receiveMessage,this),this.updateModified=i(this.updateModified,this),this.sendMessage=i(this.sendMessage,this),this.onKeydown=i(this.onKeydown,this),this.clearUnread=i(this.clearUnread,this),this.release=i(this.release,this),this.close=i(this.close,this),this.disconnect=i(this.disconnect,this),this.onTransitionend=i(this.onTransitionend,this),this.focus=i(this.focus,this),this.sendMetaForm=i(this.sendMetaForm,this),this.showMeta=i(this.showMeta,this),this.hideMeta=i(this.hideMeta,this),this.toggleMeta=i(this.toggleMeta,this),this.onLayoutChange=i(this.onLayoutChange,this),e.__super__.constructor.apply(this,arguments),this.showTimeEveryXMinutes=2,this.lastTimestamp,this.lastAddedType,this.isTyping=!1,this.isAgentTyping=!1,this.resetUnreadMessages(),this.scrolledToBottom=!0,this.scrollSnapTolerance=10,this.chat=App.Chat.find(this.session.chat_id),this.name=this.chat.displayName(),this.session&&!_.isEmpty(this.session.name)&&(this.name=this.session.name),this.on("layout-change",this.onLayoutChange),this.bind("chat_session_typing",function(t){return function(e){if(e.session_id===t.session.session_id&&!e.self_written)return t.showWritingLoader()}}(this)),this.bind("chat_session_message",function(t){return function(e){if(e.session_id===t.session.session_id&&!e.self_written)return t.receiveMessage(e.message.content)}}(this)),this.bind("chat_session_notice",function(t){return function(e){if(e.session_id===t.session.session_id&&!e.self_written)return t.addNoticeMessage(e.message)}}(this)),this.bind("chat_session_left",function(t){return function(e){if(e.session_id===t.session.session_id&&!e.self_written)return t.addStatusMessage("<strong>"+e.realname+"</strong> left the conversation"),t.goOffline()}}(this)),this.bind("chat_session_closed",function(t){return function(e){if(e.session_id===t.session.session_id&&!e.self_written)return t.addStatusMessage("<strong>"+e.realname+"</strong> closed the conversation"),t.goOffline()}}(this)),this.bind("chat_focus",function(t){return function(e){if(e.session_id===t.session.session_id)return t.focus()}}(this))}return s(e,t),e.prototype.className="chat-window",e.prototype.events={"keydown .js-customerChatInput":"onKeydown","focus .js-customerChatInput":"clearUnread",click:"clearUnread","click .js-send":"sendMessage","click .js-close":"close","click .js-disconnect":"disconnect","click .js-scrollHint":"onScrollHintClick","click .js-info":"toggleMeta","click .js-createTicket":"ticketCreate","submit .js-metaForm":"sendMetaForm"},e.prototype.elements={".js-customerChatInput":"input",".js-status":"status",".js-close":"closeButton",".js-disconnect":"disconnectButton",".js-body":"body",".js-meta":"meta",".js-name":"metaName",".js-scrollHolder":"scrollHolder",".js-scrollHint":"scrollHint",".js-metaForm":"metaForm"},e.prototype.sounds={message:new Audio("assets/sounds/chat_message.mp3")},e.prototype.onLayoutChange=function(){return this.scrollToBottom()},e.prototype.toggleMeta=function(){return this.meta.hasClass("hidden")?this.showMeta():this.hideMeta()},e.prototype.hideMeta=function(){return this.body.removeClass("hidden"),this.meta.addClass("hidden"),this.sendMetaForm()},e.prototype.showMeta=function(){return this.body.addClass("hidden"),this.meta.removeClass("hidden")},e.prototype.sendMetaForm=function(t){var e;if(t&&t.preventDefault(),e=this.formParam(this.metaForm),App.WebSocket.send({event:"chat_session_update",data:{session_id:this.session.session_id,name:e.name,tags:e.tags}}),!_.isEmpty(e.name))return this.metaName.text(e.name)},e.prototype.render=function(){var t,e,n,i,s,r,o,a,l,c;if(this.html(App.view("customer_chat/chat_window")({name:this.name,session:this.session})),this.el.one("transitionend",this.onTransitionend),this.scrollHolder.scroll(this.detectScrolledtoBottom),this.el.prop("offsetHeight"),this.el.addClass("is-open"),this.session){if(t=!0,"closed"===this.session.state&&(t=!1),this.session&&this.session.preferences&&this.session.preferences.url&&this.addNoticeMessage(this.session.preferences.url,void 0,t),this.session.messages)for(c=this.session.messages,n=0,i=c.length;n<i;n++)s=c[n],s.created_by_id?this.addMessage(s.content,"agent",!1,t):this.addMessage(s.content,"customer",!1,t);t&&_.isEmpty(this.session.messages)&&(l=this.Session.get("preferences"),l.chat&&l.chat.phrase&&(o=l.chat.phrase[this.session.chat_id])&&(a=o.split(";"),r=a[_.random(0,a.length-1)],this.input.html(r),this.sendMessage(1600))),t||this.goOffline()}return new App.WidgetTextModule({el:this.input,data:{user:App.Session.get(),config:App.Config.all()}}),e=[{name:"name",display:"Name",tag:"input","null":!0},{name:"tags",display:"Tags",tag:"tag","null":!0}],new App.ControllerForm({el:this.$(".js-metaForm"),model:{configure_attributes:e,className:""},params:this.session})},e.prototype.focus=function(){return this.input.focus()},e.prototype.onTransitionend=function(t){return this.trigger("layout-has-changed"),t.data&&t.data.callback&&t.data.callback(),this.input.ce({mode:"richtext",multiline:!0,maxlength:4e4,imageWidth:"relative"})},e.prototype.disconnect=function(){return this.addStatusMessage("<strong>You</strong> left the conversation"),App.WebSocket.send({event:"chat_session_close",data:{session_id:this.session.session_id}}),this.goOffline()},e.prototype.close=function(){if(this.sendMetaForm(),this.el.one("transitionend",{callback:this.release},this.onTransitionend),this.el.removeClass("is-open"),this.removeCallback)return this.removeCallback(this.session.session_id)},e.prototype.release=function(){return this.trigger("closed"),this.el.remove(),e.__super__.release.apply(this,arguments)},e.prototype.clearUnread=function(){return this.$(".chat-message--new").removeClass("chat-message--new"),this.updateModified(!1),this.resetUnreadMessages()},e.prototype.onKeydown=function(t){var e,n,i,s,r;if(n=9,e=13,t.keyCode!==n&&t.keyCode!==e){if(this.isAgentTyping&&this.isAgentTyping>new Date((new Date).getTime()-1400))return;this.isAgentTyping=new Date,App.WebSocket.send({event:"chat_session_typing",data:{session_id:this.session.session_id}})}switch(t.keyCode){case n:if(i=this.input.not('[disabled="disabled"]'),s=i.size(),r=i.index(this.input),s>1)switch(r){case s-1:if(!t.shiftKey)return t.preventDefault(),i.eq(0).focus();break;case 0:if(t.shiftKey)return t.preventDefault(),i.eq(s-1).focus()}break;case e:if(!(t.shiftKey||t.altKey||t.ctrlKey||t.metaKey))return t.preventDefault(),this.sendMessage()}},e.prototype.sendMessage=function(t){var e,n;if((e=this.input.html())&&!this.el.hasClass("is-offline"))return n=function(t){return function(){return App.WebSocket.send({event:"chat_session_message",data:{content:e,session_id:t.session.session_id}})}}(this),t?(App.WebSocket.send({event:"chat_session_typing",data:{session_id:this.session.session_id}}),this.delay(n,t)):n(),this.hideMeta(),this.addMessage(e,"agent"),this.input.html("")},e.prototype.updateModified=function(t){return this.status.toggleClass("is-modified",t)},e.prototype.receiveMessage=function(t){var e;if(e=this.input.is(":focus"),this.removeWritingLoader(),this.addMessage(t,"customer",!e),!e)return this.addUnreadMessages(),this.updateModified(!0),this.sounds.message.play(),this.notifyDesktop({title:this.name,body:App.Utils.html2text(t),url:"#customer_chat",callback:function(t){return function(){return App.Event.trigger("chat_focus",{session_id:t.session.session_id})}}(this)})},e.prototype.unreadMessages=function(){return this.unreadMessagesCounter},e.prototype.addUnreadMessages=function(){return this.messageCallback&&this.messageCallback(this.session.session_id),this.unreadMessagesCounter+=1},e.prototype.resetUnreadMessages=function(){return this.messageCallback&&this.messageCallback(this.session.session_id),this.unreadMessagesCounter=0},e.prototype.addMessage=function(t,e,n,i){return null==i&&(i=!0),i&&this.maybeAddTimestamp(),this.lastAddedType=e,this.body.append(App.view("customer_chat/chat_message")({message:t,sender:e,isNew:n,timestamp:Date.now()})),this.scrollToBottom({showHint:!0})},e.prototype.showWritingLoader=function(){return this.isTyping||(this.isTyping=!0,this.maybeAddTimestamp(),this.body.append(App.view("customer_chat/chat_loader")()),this.scrollToBottom()),this.delay(this.removeWritingLoader,2e3,"typing")},e.prototype.removeWritingLoader=function(){return this.isTyping=!1,this.$(".js-loader").remove()},e.prototype.goOffline=function(){return this.status.attr("data-status","offline"),this.disconnectButton.addClass("is-hidden"),this.closeButton.removeClass("is-hidden"),this.el.addClass("is-offline"),this.input.attr("disabled",!0),this.body.append(App.view("customer_chat/chat_footer")())},e.prototype.maybeAddTimestamp=function(){var t,e,n;if(n=Date.now(),!this.lastTimestamp||n-this.lastTimestamp>6e4*this.showTimeEveryXMinutes)return t=App.i18n.translateInline("today"),e=(new Date).toTimeString().substr(0,5),"timestamp"===this.lastAddedType?(this.updateLastTimestamp(t,e),this.lastTimestamp=n):(this.addTimestamp(t,e),this.lastTimestamp=n,this.lastAddedType="timestamp")},e.prototype.addTimestamp=function(t,e){return this.body.append(App.view("customer_chat/chat_timestamp")({label:t,time:e}))},e.prototype.updateLastTimestamp=function(t,e){return this.body.find(".js-timestamp").last().replaceWith(App.view("customer_chat/chat_timestamp")({label:t,time:e}))},e.prototype.addStatusMessage=function(t,e,n){return null==n&&(n=!0),n&&this.maybeAddTimestamp(),this.body.append(App.view("customer_chat/chat_status_message")({message:t,args:e})),this.scrollToBottom()},e.prototype.addNoticeMessage=function(t,e,n){return null==n&&(n=!0),n&&this.maybeAddTimestamp(),this.body.append(App.view("customer_chat/chat_notice_message")({message:t,args:e})),this.scrollToBottom()},e.prototype.detectScrolledtoBottom=function(){var t;if(t=this.scrollHolder.scrollTop()+this.scrollHolder.outerHeight(),this.scrolledToBottom=Math.abs(t-this.scrollHolder.prop("scrollHeight"))<=this.scrollSnapTolerance,this.scrolledToBottom)return this.scrollHint.addClass("is-hidden")},e.prototype.showScrollHint=function(){return this.scrollHint.removeClass("is-hidden"),this.scrollHolder.scrollTop(this.scrollHolder.scrollTop()+this.scrollHint.outerHeight())},e.prototype.onScrollHintClick=function(){return this.scrollHolder.animate({scrollTop:this.scrollHolder.prop("scrollHeight")},300)},e.prototype.scrollToBottom=function(t){var e;return e=(null!=t?t:{showHint:!1}).showHint,this.scrolledToBottom?this.scrollHolder.scrollTop(this.scrollHolder.prop("scrollHeight")):e?this.showScrollHint():void 0},e.prototype.ticketCreate=function(t){var e,n,i,s,r,o;return t.preventDefault(),s=Math.floor(99999*Math.random()),this.navigate("#ticket/create/id/"+s),n=App.Config.get("fqdn"),i=App.Config.get("http_type"),o="",r=this.session,r&&!r.uiUrl&&(r=new App.ChatSession(r)),r&&r.uiUrl&&(o=r.uiUrl()),e={id:s,prefilledParams:{body:i+"://"+n+"/"+o,title:"Chat"}},App.TaskManager.execute({key:"TicketCreateScreen-"+s,controller:"TicketCreate",params:e,show:!0})},e}(App.Controller),n=function(t){function e(){return this.error=i(this.error,this),this.success=i(this.success,this),this.submit=i(this.submit,this),this.content=i(this.content,this),e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.buttonClose=!0,e.prototype.buttonCancel=!0,e.prototype.buttonSubmit=!0,e.prototype.head="Settings",e.prototype.content=function(){var t;return t=this.Session.get("preferences"),t||(t={}),t.chat||(t.chat={}),t.chat.active||(t.chat.active={}),t.chat.phrase||(t.chat.phrase={}),t.chat.max_windows||(t.chat.max_windows=this.windowSpace.maxChatWindows),App.view("customer_chat/setting")({chats:App.Chat.all(),preferences:t,errors:this.errors||{}})},e.prototype.submit=function(t){var e;return t.preventDefault(),e=this.formParam(t.target),this.formDisable(t),this.windowSpace.maxChatWindows=e.chat.max_windows,this.ajax({id:"preferences",type:"PUT",url:this.apiPath+"/users/preferences",data:JSON.stringify(e),processData:!0,success:this.success,error:this.error})},e.prototype.success=function(){return!0===this.active||!1===this.active?(this.windowSpace.meta.active=this.active,this.windowSpace.pushState()):App.WebSocket.send({event:"chat_status_agent"}),App.User.full(App.Session.get("id"),function(t){return function(){return t.close()}}(this),!0)},e.prototype.error=function(t){var e;return e=JSON.parse(t.responseText),this.notify({type:"error",msg:App.i18n.translateContent(e.message)})},e}(App.ControllerModal),e=function(t){function e(t){var n;e.__super__.constructor.apply(this,arguments),n={session_id:t.session_id},App.TaskManager.execute({key:"CustomerChat",controller:"CustomerChat",params:n,show:!0,persistent:!0})}return s(e,t),e.prototype.requiredPermission="chat.agent",e}(App.ControllerPermanent),App.Config.set("customer_chat",e,"Routes"),App.Config.set("customer_chat/session/:session_id",e,"Routes"),App.Config.set("CustomerChat",{controller:"CustomerChat",permission:["chat.agent"]},"permanentTask"),App.Config.set("CustomerChat",{prio:1200,parent:"",name:"Customer Chat",target:"#customer_chat",key:"CustomerChat",shown:!1,permission:["chat.agent"],"class":"chat"},"NavBar")}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var s in e)i.call(e,s)&&(t[s]=e[s]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;t=function(t){function i(){this.clues=e(this.clues,this),i.__super__.constructor.apply(this,arguments),this.navupdate("#",!0),this.clues()}return n(i,t),i.prototype.clues=function(){return new App.FirstStepsClues({el:this.el,onComplete:function(t){return function(){return App.Ajax.request({id:"preferences",type:"PUT",url:t.apiPath+"/users/preferences",data:JSON.stringify({intro:!0}),processData:!0}),t.navigate("#")}}(this)})},i}(App.Controller),App.Config.set("clues",t,"Routes")}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var s in e)i.call(e,s)&&(t[s]=e[s]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;App.CTI=function(t){function i(){this.currentPosition=e(this.currentPosition,this),this.setPosition=e(this.setPosition,this),this["switch"]=e(this["switch"],this),this.counter=e(this.counter,this),this.active=e(this.active,this),this.show=e(this.show,this),this.done=e(this.done,this),this.featureActive=e(this.featureActive,this);var t;i.__super__.constructor.apply(this,arguments),t=this.Session.get("preferences")||{},this.meta.active=t.cti||!1,this.load(),this.bind("cti_list_push",function(t){return function(){var e;return e=function(){return t.load()},t.delay(e,500,"cti_list_push_render"),"cti_list_push"}}(this)),this.bind("auth",function(t){return function(){return t.meta.counter=0}}(this)),this.bind("cti:reload",function(t){return function(){return t.load(),"cti_reload"}}(this)),this.bind("ui:rerender",function(t){return function(){return t.render(),"cti_rerender"}}(this)),this.bind("spool:sent",function(t){return function(){return t.initSpoolSent?void t.load():t.initSpoolSent=!0}}(this))}return n(i,t),i.prototype.elements={".js-callerLog":"callerLog"},i.prototype.events={"click .js-check":"done","click .js-userNew":"userNew"},i.prototype.list=[],i.prototype.backends=[],i.prototype.meta={active:!1,counter:0,state:{}},i.prototype.backendEnabled=!1,i.prototype.load=function(){return this.ajax({id:"cti_log",type:"GET",url:this.apiPath+"/cti/log",success:function(t){return function(e){var n,i,s,r,o;if(e.assets&&App.Collection.loadAssets(e.assets),e.backends){for(t.backends=e.backends,i=!1,o=t.backends,s=0,r=o.length;s<r;s++)n=o[s],n.enabled&&(i=!0);i!==t.backendEnabled&&(t.renderDone=!1),t.backendEnabled=i}if(e.list)return t.list=e.list,t.renderDone?void t.renderCallerLog():t.render()}}(this)})},i.prototype.notify=function(t){var e,n;return e=App.i18n.translateContent("Call from %s for %s",t.from_comment||t.from,t.to_comment||t.to),n=App.Utils.html2text(e.replace(/<.+?>/g,'"')),this.notifyDesktop({url:"#cti",title:n})},i.prototype.featureActive=function(){return!!this.Config.get("sipgate_integration")||!!this.Config.get("cti_integration")},i.prototype.render=function(){return this.renderDone=!0,this.permissionCheck("cti.agent")?this.backendEnabled?(this.html(App.view("cti/index")()),this.renderCallerLog()):(this.html(App.view("cti/not_configured")({backends:this.backends,isAdmin:this.permissionCheck("admin.integration")})),void this.updateNavMenu()):void this.renderScreenUnauthorized({objectName:"CTI"})},i.prototype.renderCallerLog=function(){var t,e,n,i,s;for(t=function(t){var e,n,i;return e=~~parseInt(t/3600),n=~~parseInt(t%3600/60),i=parseInt(t%60),n<10&&(n="0"+n),i<10&&(i="0"+i),e>0?e+":"+n+":"+i:n+":"+i},s=this.list,e=0,i=s.length;e<i;e++)n=s[e],n.status_class="",n.disabled=!0,"newCall"===n.state?(n.state_human="ringing",n.status_class="neutral"):"answer"===n.state?(n.state_human="connected",n.status_class="ok"):"hangup"===n.state?(n.disabled=!1,n.state_human=function(){switch(n.comment){case"cancel":case"noAnswer":case"congestion":return"not reached";case"busy":return"busy";case"notFound":return"not exist";case"normalClearing":return"";default:return n.comment}}()):(n.state_human=n.state,n.comment&&(n.state_human+=", "+n.comment)),n.start&&n.end&&(n.duration=t((Date.parse(n.end)-Date.parse(n.start))/1e3)),(Date.now()-Date.parse(n.created_at))/1e3/60>1&&(n.disabled=!1);return this.userPopupsDestroy(),this.callerLog.html(App.view("cti/caller_log")({list:this.list})),this.userPopups(),this.updateNavMenu()},i.prototype.done=function(t){var e,n,i;return n=$(t.currentTarget),i=n.closest("tr").data("id"),e=n.prop("checked"),this.ajax({type:"POST",url:this.apiPath+"/cti/done/"+i,data:JSON.stringify({done:e})})},i.prototype.userNew=function(t){var e;return t.preventDefault(),e=$(t.currentTarget).text(),new App.ControllerGenericNew({pageData:{title:"Users",home:"users",object:"User",objects:"Users",navupdate:"#users"},genericObject:"User",item:{phone:e},container:this.el.closest(".content"),callback:this.ticketNew})},i.prototype.ticketNew=function(t){return this.navigate("#ticket/create/customer/"+t.id)},i.prototype.show=function(){return this.title("CTI",!0),this.navupdate("#cti")},i.prototype.active=function(t){return void 0===t?this.shown:this.shown=t},i.prototype.counter=function(){var t,e,n,i,s;for(t=0,s=this.list,e=0,i=s.length;e<i;e++)n=s[e],"hangup"!==n.state||n.done||t++;return this.meta.counter+t},i.prototype["switch"]=function(t){return null==t&&(t=void 0),void 0===t?this.meta.active:(this.meta.active=t,this.ajax({id:"preferences",type:"PUT",url:this.apiPath+"/users/preferences",data:JSON.stringify({cti:t}),processData:!0}))},i.prototype.setPosition=function(t){return this.$(".main").scrollTop(t)},i.prototype.currentPosition=function(){return this.$(".main").scrollTop()},i}(App.Controller),t=function(t){function e(){e.__super__.constructor.apply(this,arguments),App.TaskManager.execute({key:"CTI",controller:"CTI",params:{},show:!0,persistent:!0})}return n(e,t),e.prototype.requiredPermission="cti.agent",e}(App.ControllerPermanent),App.Config.set("cti",t,"Routes"),App.Config.set("CTI",{controller:"CTI",permission:["cti.agent"]},"permanentTask"),App.Config.set("CTI",{prio:1300,parent:"",name:"Phone",target:"#cti",key:"CTI",shown:!1,permission:["cti.agent"],"class":"phone"},"NavBar")}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var s in e)i.call(e,s)&&(t[s]=e[s]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;t=function(t){function i(){this.submitEnable=e(this.submitEnable,this),this.submitDisable=e(this.submitDisable,this);var t;i.__super__.constructor.apply(this,arguments),this.title("New Ticket"),
this.form_id=App.ControllerForm.formId(),this.navupdate("#customer_ticket_new"),t=function(t){return function(e){return App.Collection.loadAssets(e.assets),t.formMeta=e.form_meta,t.render()}}(this),this.bindId=App.TicketCreateCollection.one(t)}return n(i,t),i.prototype.requiredPermission="ticket.customer",i.prototype.events={"submit form":"submit","click .submit":"submit","click .cancel":"cancel"},i.prototype.render=function(t){var e,n,i;return null==t&&(t={}),this.Config.get("customer_ticket_create")?(e=t.options||{},i=this.Config.get("TicketCreateFormHandler"),n=App.Config.get("customer_ticket_create_group_ids"),n&&(_.isArray(n)||(n=[n]),this.formMeta.filter.group_id=n),this.html(App.view("customer_ticket_create")({head:"New Ticket",form_id:this.form_id})),new App.ControllerForm({el:this.el.find(".ticket-form-top"),form_id:this.form_id,model:App.Ticket,screen:"create_top",handlersConfig:i,filter:this.formMeta.filter,formMeta:this.formMeta,autofocus:!0,params:e}),new App.ControllerForm({el:this.el.find(".article-form-top"),form_id:this.form_id,model:App.TicketArticle,screen:"create_top",events:{"fileUploadStart .richtext":function(t){return function(){return t.submitDisable()}}(this),"fileUploadStop .richtext":function(t){return function(){return t.submitEnable()}}(this)},filter:this.formMeta.filter,formMeta:this.formMeta,params:e,handlersConfig:i}),new App.ControllerForm({el:this.el.find(".ticket-form-middle"),form_id:this.form_id,model:App.Ticket,screen:"create_middle",filter:this.formMeta.filter,formMeta:this.formMeta,params:e,noFieldset:!0,handlersConfig:i}),_.isEmpty(App.Ticket.attributesGet("create_bottom",!1,!0))||new App.ControllerForm({el:this.el.find(".ticket-form-bottom"),form_id:this.form_id,model:App.Ticket,screen:"create_bottom",handlersConfig:i,filter:this.formMeta.filter,formMeta:this.formMeta,params:e}),new App.ControllerDrox({el:this.el.find(".sidebar"),data:{header:App.i18n.translateInline("What can you do here?"),html:App.i18n.translateInline('The way to communicate with us is this thing called "ticket".')+" "+App.i18n.translateInline("Here you can create one.")}})):void this.renderScreenError({detail:"Your role cannot create new ticket. Please contact your administrator.",objectName:"Ticket"})},i.prototype.cancel=function(){return this.navigate("#")},i.prototype.submit=function(t){var e,n,i,s,r,o,a,l,c,u,p,h,d;return t.preventDefault(),r=this.formParam(t.target),r.customer_id=this.Session.get("id"),r.priority_id||(o=App.TicketPriority.findByAttribute("default_create",!0),r.priority_id=o.id),r.state_id||(l=App.TicketState.findByAttribute("default_create",!0),r.state_id=l.id),r.title||(r.title=r.subject),c=new App.Ticket,this.log("CustomerTicketCreate","notice","updateAttributes",r),a=App.TicketArticleSender.findByAttribute("name","Customer"),h=App.TicketArticleType.findByAttribute("name","web"),r.group_id&&(s=App.Group.find(r.group_id)),r.article={from:""+this.Session.get().displayName(),to:s&&s.name||"",subject:r.subject,body:r.body,type_id:h.id,sender_id:a.id,form_id:this.form_id,content_type:"text/html"},c.load(r),p=c.validate({screen:"create_top"}),u=c.validate({screen:"create_middle"}),e=new App.TicketArticle,e.load(r.article),n=e.validate({screen:"create_top"}),i={},i=_.extend(i,p),i=_.extend(i,u),i=_.extend(i,n),_.isEmpty(i)?(this.submitDisable(t),d=this,c.save({done:function(){return d.navigate("#ticket/zoom/"+this.id)},fail:function(e,n){return d.log("errors",n),d.submitEnable(t),d.notify({type:"error",msg:App.i18n.translateContent(n.error_human||n.error||"Unable to create object!"),timeout:6e3})}})):(this.log("CustomerTicketCreate","error","can not create",i),this.formValidate({form:t.target,errors:i}))},i.prototype.submitDisable=function(t){return t?void this.formDisable(t):this.formDisable(this.$(".js-submit"),"button")},i.prototype.submitEnable=function(t){return t?void this.formEnable(t):this.formEnable(this.$(".js-submit"),"button")},i}(App.ControllerContent),App.Config.set("customer_ticket_new",t,"Routes"),App.Config.set("CustomerTicketNew",{prio:8003,parent:"#new",name:"New Ticket",translate:!0,target:"#customer_ticket_new",permission:["ticket.customer"],setting:["customer_ticket_create"],divider:!0},"NavBarRight")}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var s in e)i.call(e,s)&&(t[s]=e[s]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;App.Dashboard=function(t){function i(){if(this.toggle=e(this.toggle,this),this.show=e(this.show,this),this.active=e(this.active,this),this.clues=e(this.clues,this),this.mayBeClues=e(this.mayBeClues,this),i.__super__.constructor.apply(this,arguments),!this.permissionCheck("ticket.agent"))return void(this.clueAccess=!1);this.render(),this.bind("ui:rerender",function(t){return function(){if(t.authenticateCheck())return t.render()}}(this)),this.mayBeClues()}return n(i,t),i.prototype.clueAccess=!0,i.prototype.events={"click .tabs .tab":"toggle","click .js-intro":"clues"},i.prototype.render=function(){var t;return t=$(App.view("dashboard")({head:"Dashboard",isAdmin:this.permissionCheck("admin")})),new App.DashboardStats({el:t.find(".stat-widgets")}),new App.DashboardActivityStream({el:t.find(".js-activityContent"),limit:25}),new App.DashboardFirstSteps({el:t.find(".first-steps-widgets")}),this.html(t)},i.prototype.mayBeClues=function(){var t;if(this.clueAccess&&this.shown&&!this.Config.get("switch_back_to_possible")&&(t=this.Session.get("preferences"),this.clueAccess=!1,!t.intro))return this.clues()},i.prototype.clues=function(t){return this.clueAccess=!1,t&&t.preventDefault(),this.navigate("#clues")},i.prototype.active=function(t){return void 0===t?this.shown:(this.shown=t,t?this.mayBeClues():void 0)},i.prototype.url=function(){return"#dashboard"},i.prototype.show=function(){return this.permissionCheck("ticket.customer")?void this.navigate("#",!0):(this.title("Dashboard"),this.navupdate("#dashboard"))},i.prototype.changed=function(){return!1},i.prototype.release=function(){},i.prototype.toggle=function(t){var e;return this.$(".tabs .tab").removeClass("active"),$(t.target).addClass("active"),e=$(t.target).data("area"),this.$(".tab-content").addClass("hidden"),this.$(".tab-content."+e).removeClass("hidden")},i}(App.Controller),t=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.authenticateCheckRedirect(),App.TaskManager.execute({key:"Dashboard",controller:"Dashboard",params:{},show:!0,persistent:!0})}return n(e,t),e.prototype.requiredPermission=["*"],e}(App.ControllerPermanent),App.Config.set("dashboard",t,"Routes"),App.Config.set("Dashboard",{controller:"Dashboard",permission:["*"]},"permanentTask"),App.Config.set("Dashboard",{prio:100,parent:"",name:"Dashboard",target:"#dashboard",key:"Dashboard",permission:["ticket.agent"],"class":"dashboard"},"NavBar")}.call(this);(function(){var t,e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(){if(n.__super__.constructor.apply(this,arguments),"/test"!==window.location.pathname.substr(0,5))return!this.Config.get("system_init_done")&&this.Config.get("import_mode")?void this.navigate("#import",!0):this.Config.get("system_init_done")?this.permissionCheck("ticket.customer")?void this.navigate("#ticket/view/my_tickets",!0):this.Config.get("default_controller")?void this.navigate(this.Config.get("default_controller"),!0):void this.navigate("#dashboard",!0):void this.navigate("#getting_started",!0)}return e(n,t),n}(App.Controller),App.Config.set("",t,"Routes"),App.Config.set("/",t,"Routes")}).call(this),function(){var t,e,n,i=function(t,e){return function(){return t.apply(e,arguments)}},s=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;e=function(e){function r(){this.error=i(this.error,this),this.success=i(this.success,this),this.verifyCall=i(this.verifyCall,this),r.__super__.constructor.apply(this,arguments),this.authenticateCheckRedirect(),this.verifyCall()}return s(r,e),r.prototype.verifyCall=function(){return this.ajax({id:"email_verify",type:"POST",url:this.apiPath+"/users/email_verify",data:JSON.stringify({token:this.token}),processData:!0,success:this.success,error:this.error})},r.prototype.success=function(){return new n({el:this.el})},r.prototype.error=function(){return new t({el:this.el})},r}(App.Controller),n=function(t){function e(){this.render=i(this.render,this),e.__super__.constructor.apply(this,arguments),this.render(),this.bind("ui:rerender",function(t){return function(){return t.render()}}(this))}return s(e,t),e.prototype.render=function(){var t;return this.renderScreenSuccess({detail:"Woo hoo! Your email address has been verified!"}),t=function(t){return function(){return t.navigate("#")}}(this),this.delay(t,20500)},e}(App.ControllerContent),t=function(t){function e(){this.render=i(this.render,this),e.__super__.constructor.apply(this,arguments),this.render(),this.bind("ui:rerender",function(t){return function(){return t.render()}}(this))}return s(e,t),e.prototype.render=function(){return this.renderScreenError({detail:"Unable to verify email. Please contact your administrator."})},e}(App.ControllerContent),App.Config.set("email_verify/:token",e,"Routes")}.call(this),function(){var t,e,n,i,s,r,o,a,l,c=function(t,e){return function(){return t.apply(e,arguments)}},u=function(t,e){function n(){this.constructor=t}for(var i in e)p.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},p={}.hasOwnProperty;l=function(t){function e(){return this.release=c(this.release,this),e.__super__.constructor.apply(this,arguments),this.authenticateCheck()&&!this.permissionCheck("admin.wizard")?void this.navigate("#"):(this.title("Get Started"),this.Config.get("system_init_done")?void this.navigate("#login"):this.Config.get("ImportPlugins")?void this.fetch():void this.navigate("getting_started/admin"))}return u(e,t),e.prototype.release=function(){return this.el.removeClass("fit getstarted")},e.prototype.fetch=function(){return this.ajax({id:"getting_started",type:"GET",url:this.apiPath+"/getting_started",processData:!0,success:function(t){return function(e){return!0===e.auto_wizard?void t.renderAutoWizard():!0===e.import_mode?void t.navigate("#import/"+e.import_backend):t.render()}}(this)})},e.prototype.render=function(){return this.html(App.view("getting_started/intro")())},e.prototype.renderAutoWizard=function(){return this.html(App.view("getting_started/auto_wizard_enabled")())},e}(App.WizardFullScreen),App.Config.set("getting_started",l,"Routes"),n=function(t){function e(){return this.release=c(this.release,this),e.__super__.constructor.apply(this,arguments),this.authenticateCheck()&&!this.permissionCheck("admin.wizard")?void this.navigate("#"):this.Config.get("system_init_done")?void this.navigate("#login"):(this.title("Auto Wizard"),this.renderSplash(),void this.fetch())}return u(e,t),e.prototype.release=function(){return this.el.removeClass("fit getstarted")},e.prototype.fetch=function(){var t;return t=this.apiPath+"/getting_started/auto_wizard",this.token&&(t+="/"+this.token),this.ajax({id:"auto_wizard",type:"GET",url:t,processData:!0,success:function(t){return function(e){var n;return!1===e.auto_wizard?void t.navigate("#"):!0===e.auto_wizard_success?(n=function(){return App.Auth.loginCheck(),t.navigate("#")},void t.delay(n,800)):!1===e.auto_wizard_success?void(e.message?t.renderFailed(e):t.renderToken()):t.navigate("#login")}}(this)})},e.prototype.renderFailed=function(t){return this.html(App.view("getting_started/auto_wizard_failed")(t))},e.prototype.renderSplash=function(){return this.html(App.view("getting_started/auto_wizard_splash")())},e.prototype.renderToken=function(){return this.html(App.view("getting_started/auto_wizard_enabled")())},e}(App.WizardFullScreen),App.Config.set("getting_started/auto_wizard",n,"Routes"),App.Config.set("getting_started/auto_wizard/:token",n,"Routes"),t=function(t){function e(){return this.relogin=c(this.relogin,this),this.submit=c(this.submit,this),this.release=c(this.release,this),e.__super__.constructor.apply(this,arguments),this.authenticateCheck()&&!this.permissionCheck("admin.wizard")?void this.navigate("#"):(this.title("Create Admin"),this.Config.get("system_init_done")?void this.navigate("#login"):void this.fetch())}return u(e,t),e.prototype.events={"submit form":"submit"},e.prototype.release=function(){return this.el.removeClass("fit getstarted")},e.prototype.fetch=function(){return this.ajax({id:"getting_started",type:"GET",url:this.apiPath+"/getting_started",processData:!0,success:function(t){return function(e){return!0===e.import_mode?void t.navigate("#import/"+e.import_backend):(App.Collection.load({type:"Group",data:e.groups}),t.render())}}(this)})},e.prototype.render=function(){return this.html(App.view("getting_started/admin")()),new App.ControllerForm({el:this.$(".js-admin-form"),model:App.User,screen:"signup",autofocus:!0})},e.prototype.submit=function(t){var e,n;return t.preventDefault(),this.formDisable(t),this.params=this.formParam(t.target),this.params.role_ids=[],n=new App.User,n.load(this.params),e=n.validate({screen:"signup"}),e?(this.log("error new",e),this.formValidate({form:t.target,errors:e}),this.formEnable(t),!1):n.save({done:function(t){return function(){return App.Auth.login({data:{username:t.params.email,password:t.params.password},success:t.relogin,error:function(){return App.Event.trigger("notify",{type:"error",msg:App.i18n.translateContent("Signin failed! Please contact the support team!"),timeout:2500})}}),t.Config.set("system_init_done",!0)}}(this),fail:function(e){return function(n,i){return e.formEnable(t),App.Event.trigger("notify",{type:"error",msg:App.i18n.translateContent(i.error_human||"Can't create user!"),timeout:2500})}}(this)})},e.prototype.relogin=function(t){return this.log("notice","relogin:success",t),App.Event.trigger("notify:removeall"),this.navigate("getting_started/base")},e}(App.WizardFullScreen),App.Config.set("getting_started/admin",t,"Routes"),i=function(t){function e(){if(this.showAlert=c(this.showAlert,this),this.hideAlerts=c(this.hideAlerts,this),this.submit=c(this.submit,this),this.onLogoPick=c(this.onLogoPick,this),this.release=c(this.release,this),e.__super__.constructor.apply(this,arguments),!this.permissionCheck("admin.wizard"))return void this.navigate("#");this.title("Configure Base"),this.fetch()}return u(e,t),e.prototype.elements={".logo-preview":"logoPreview"},e.prototype.events={"submit form":"submit","change .js-upload":"onLogoPick"},e.prototype.release=function(){return this.el.removeClass("fit getstarted")},e.prototype.fetch=function(){return this.ajax({id:"getting_started",type:"GET",url:this.apiPath+"/getting_started",processData:!0,success:function(t){return function(e){var n,i,s;if(!0===e.import_mode)return void t.navigate("#import/"+e.import_backend);if(e.config){i=e.config;for(n in i)s=i[n],App.Config.set(n,s)}return t.render()}}(this)})},e.prototype.render=function(){var t,e,n,i;return t=App.Config.get("fqdn"),e=App.Config.get("http_type"),i=t&&"zammad.example.com"!==t?e+"://"+t:window.location.origin,n=App.Config.get("organization"),this.html(App.view("getting_started/base")({url:i,logoUrl:this.logoUrl(),organization:n})),this.$("input, select").first().focus()},e.prototype.onLogoPick=function(t){var e,n,i;if(i=new FileReader,i.onload=function(t){return function(e){return t.logoPreview.attr("src",e.target.result)}}(this),e=t.target.files[0],this.hideAlerts(),e)return n=8,e.size&&e.size>1048576*n?(this.showAlert("logo",App.i18n.translateInline("File too big, max. %s MB allowed.",n)),void this.logoPreview.attr("src","")):i.readAsDataURL(e)},e.prototype.submit=function(t){var e;return t.preventDefault(),this.hideAlerts(),this.disable(t),this.params=this.formParam(t.target),this.params.logo=this.logoPreview.attr("src"),this.params.locale_default=App.i18n.detectBrowserLocale(),e=function(e){return function(n){return e.params.logo_resize=n,e.ajax({id:"getting_started_base",type:"POST",url:e.apiPath+"/getting_started/base",data:JSON.stringify(e.params),processData:!0,success:function(n){var i,s,r,o;if("ok"===n.result){s=n.settings;for(i in s)o=s[i],App.Config.set(i,o);return App.Config.get("system_online_service")?e.navigate("getting_started/channel/email_pre_configured"):e.navigate("getting_started/email_notification")}r=n.messages;for(i in r)o=r[i],e.showAlert(i,o);return e.enable(t)},fail:function(){return e.enable(t)}})}}(this),App.ImageService.resizeForApp(this.params.logo,this.logoPreview.width(),this.logoPreview.height(),e)},e.prototype.hideAlerts=function(){return this.$(".form-group").removeClass("has-error"),this.$(".alert").addClass("hide")},e.prototype.showAlert=function(t,e){return this.$("[name="+t+"]").closest(".form-group").addClass("has-error"),this.$("[name="+t+"]").closest(".form-group").find(".alert").removeClass("hide").text(App.i18n.translateInline(e))},e}(App.WizardFullScreen),App.Config.set("getting_started/base",i,"Routes"),a=function(t){function e(){if(this.submit=c(this.submit,this),this.toggleOutboundAdapter=c(this.toggleOutboundAdapter,this),this.release=c(this.release,this),e.__super__.constructor.apply(this,arguments),!this.permissionCheck("admin.wizard"))return void this.navigate("#");this.title("Email Notifications"),this.channelDriver={email:{inbound:{},outbound:{}}},this.fetch()}return u(e,t),e.prototype.events={"change .js-outbound [name=adapter]":"toggleOutboundAdapter","submit .js-outbound":"submit"},e.prototype.release=function(){return this.el.removeClass("fit getstarted")},e.prototype.fetch=function(){return this.ajax({id:"getting_started",type:"GET",url:this.apiPath+"/getting_started",processData:!0,success:function(t){return function(e){return!0===e.import_mode?void t.navigate("#import/"+e.import_backend):(t.channelDriver=e.channel_driver,t.render())}}(this)})},e.prototype.render=function(){var t;return this.html(App.view("getting_started/email_notification")()),t=[{name:"adapter",display:"Send Mails via",tag:"select",multiple:!1,"null":!1,options:this.channelDriver.email.outbound}],new App.ControllerForm({el:this.$(".base-outbound-type"),model:{configure_attributes:t,className:""},params:{adapter:"sendmail"}}),this.toggleOutboundAdapter()},e.prototype.toggleOutboundAdapter=function(){var t;if(this.el.find(".base-outbound-settings").html(""),"smtp"===this.$(".js-outbound [name=adapter]").val())return t=[{name:"options::host",display:"Host",tag:"input",type:"text",limit:120,"null":!1,autocapitalize:!1,autofocus:!0},{name:"options::user",display:"User",tag:"input",type:"text",limit:120,"null":!0,autocapitalize:!1,autocomplete:"off"},{name:"options::password",display:"Password",tag:"input",type:"password",limit:120,"null":!0,autocapitalize:!1,autocomplete:"off",single:!0},{name:"options::port",display:"Port",tag:"input",type:"text",limit:6,"null":!0,autocapitalize:!1}],this.form=new App.ControllerForm({el:this.$(".base-outbound-settings"),model:{configure_attributes:t,className:""}})},e.prototype.submit=function(t){var e;return t.preventDefault(),e=this.formParam(t.target),e.email="me@localhost",this.disable(t),this.showSlide("js-test"),this.ajax({id:"email_notification",type:"POST",url:this.apiPath+"/channels_email_notification",data:JSON.stringify(e),processData:!0,success:function(e){return function(n){var i,s,r;if("ok"===n.result){s=n.settings;for(i in s)r=s[i],App.Config.set(i,r);return App.Config.get("system_online_service")?e.navigate("getting_started/channel/email_pre_configured"):e.navigate("getting_started/channel")}return e.showSlide("js-outbound"),e.showAlert("js-outbound",n.message_human||n.message),e.showInvalidField("js-outbound",n.invalid_field),e.enable(t)}}(this),fail:function(e){return function(){return e.showSlide("js-outbound"),e.showAlert("js-outbound",data.message_human||data.message),e.showInvalidField("js-outbound",data.invalid_field),e.enable(t)}}(this)})},e}(App.WizardFullScreen),App.Config.set("getting_started/email_notification",a,"Routes"),s=function(t){function e(){if(this.release=c(this.release,this),e.__super__.constructor.apply(this,arguments),!this.permissionCheck("admin.wizard"))return void this.navigate("#");this.title("Connect Channels"),this.adapters=[{name:"Email","class":"email",link:"#getting_started/channel/email"}],this.fetch()}return u(e,t),e.prototype.release=function(){return this.el.removeClass("fit getstarted")},e.prototype.fetch=function(){return this.ajax({id:"getting_started",type:"GET",url:this.apiPath+"/getting_started",processData:!0,success:function(t){return function(e){return!0===e.import_mode?void t.navigate("#import/"+e.import_backend):t.render()}}(this)})},e.prototype.render=function(){return this.html(App.view("getting_started/channel")({adapters:this.adapters}))},e}(App.WizardFullScreen),App.Config.set("getting_started/channel",s,"Routes"),o=function(t){function e(){if(this.release=c(this.release,this),e.__super__.constructor.apply(this,arguments),!this.permissionCheck("admin.wizard"))return void this.navigate("#");this.title("Connect Channels"),this.fetch()}return u(e,t),e.prototype.release=function(){return this.el.removeClass("fit getstarted")},e.prototype.fetch=function(){return this.ajax({id:"getting_started",type:"GET",url:this.apiPath+"/getting_started",processData:!0,success:function(t){return function(e){return!0===e.import_mode?void t.navigate("#import/"+e.import_backend):t.render(e)}}(this)})},e.prototype.render=function(t){return this.html(App.view("getting_started/email_pre_configured")(t))},e}(App.WizardFullScreen),App.Config.set("getting_started/channel/email_pre_configured",o,"Routes"),r=function(t){function e(){if(this.verify=c(this.verify,this),this.probleOutbound=c(this.probleOutbound,this),this.probeInbound=c(this.probeInbound,this),this.probeBasedOnIntro=c(this.probeBasedOnIntro,this),this.toggleOutboundAdapter=c(this.toggleOutboundAdapter,this),this.release=c(this.release,this),e.__super__.constructor.apply(this,arguments),!this.permissionCheck("admin.wizard"))return void this.navigate("#");this.title("Email Account"),this.account={inbound:{},outbound:{},meta:{}},this.channelDriver={email:{inbound:{},outbound:{}}},this.fetch()}return u(e,t),e.prototype.events={"submit .js-intro":"probeBasedOnIntro","submit .js-inbound":"probeInbound","change .js-outbound [name=adapter]":"toggleOutboundAdapter","submit .js-outbound":"probleOutbound","click  .js-goToSlide":"goToSlide"},e.prototype.release=function(){return this.el.removeClass("fit getstarted")},e.prototype.fetch=function(){return this.ajax({id:"getting_started",type:"GET",url:this.apiPath+"/getting_started",processData:!0,success:function(t){return function(e){return!0===e.import_mode?void t.navigate("#import/"+e.import_backend):(t.channelDriver=e.channel_driver,t.render())}}(this)})},e.prototype.render=function(){var t,e,n,i;return this.html(App.view("getting_started/email")()),this.showSlide("js-intro"),e=[{name:"adapter",display:"Send Mails via",tag:"select",multiple:!1,"null":!1,options:this.channelDriver.email.outbound}],new App.ControllerForm({el:this.$(".base-outbound-type"),model:{configure_attributes:e,className:""},params:{adapter:this.account.outbound.adapter||"smtp"}}),this.toggleOutboundAdapter(),t=[{name:"adapter",display:"Type",tag:"select",multiple:!1,"null":!1,options:this.channelDriver.email.inbound},{name:"options::host",display:"Host",tag:"input",type:"text",limit:120,"null":!1,autocapitalize:!1},{name:"options::user",display:"User",tag:"input",type:"text",limit:120,"null":!1,autocapitalize:!1,autocomplete:"off"},{name:"options::password",display:"Password",tag:"input",type:"password",limit:120,"null":!1,autocapitalize:!1,autocomplete:"off",single:!0},{name:"options::ssl",display:"SSL/STARTTLS",tag:"boolean","null":!0,options:{"true":"yes","false":"no"},"default":!0,translate:!0,item_class:"formGroup--halfSize"},{name:"options::port",display:"Port",tag:"input",type:"text",limit:6,"null":!0,autocapitalize:!1,"default":"993",item_class:"formGroup--halfSize"},{name:"options::folder",display:"Folder",tag:"input",type:"text",limit:120,"null":!0,autocapitalize:!1,item_class:"formGroup--halfSize"},{name:"options::keep_on_server",display:"Keep messages on server",tag:"boolean","null":!0,options:{"true":"yes","false":"no"},translate:!0,"default":!1,item_class:"formGroup--halfSize"}],i=function(t,e,n,i,s,r){if(t)return"imap"===t.adapter?(r.show("options::folder"),void r.show("options::keep_on_server")):(r.hide("options::folder"),r.hide("options::keep_on_server"))},n=function(t){var e;if(t&&t.options){if(e=this.$('.base-inbound-settings [name="options::port"]').val(),!0===t.options.ssl)return void(e||this.$('.base-inbound-settings [name="options::port"]').val("993"));!1===t.options.ssl&&(e&&"993"!==e||this.$('.base-inbound-settings [name="options::port"]').val("143"))}},new App.ControllerForm({el:this.$(".base-inbound-settings"),model:{configure_attributes:t,className:""},params:this.account.inbound,handlers:[i,n]})},e.prototype.toggleOutboundAdapter=function(){var t,e;if(t={options:{}},this.account.meta&&(t.options.user=this.account.meta.email,t.options.password=this.account.meta.password,t.options.folder=this.account.meta.folder,t.options.keep_on_server=this.account.meta.keep_on_server),this.$(".base-outbound-settings").html(""),"smtp"===this.$(".js-outbound [name=adapter]").val())return e=[{name:"options::host",display:"Host",tag:"input",type:"text",limit:120,"null":!1,autocapitalize:!1,autofocus:!0},{name:"options::user",display:"User",tag:"input",type:"text",limit:120,"null":!0,autocapitalize:!1,autocomplete:"off"},{name:"options::password",display:"Password",tag:"input",type:"password",limit:120,"null":!0,autocapitalize:!1,autocomplete:"off",single:!0},{name:"options::port",display:"Port",tag:"input",type:"text",limit:6,"null":!0,autocapitalize:!1}],this.form=new App.ControllerForm({el:this.$(".base-outbound-settings"),model:{configure_attributes:e,className:""},params:this.account.outbound})},e.prototype.probeBasedOnIntro=function(t){var e;return t.preventDefault(),e=this.formParam(t.target),this.account.meta=e,this.disable(t),this.$(".js-probe .js-email").text(e.email),this.showSlide("js-probe"),this.ajax({id:"email_probe",type:"POST",url:this.apiPath+"/channels_email_probe",data:JSON.stringify(e),processData:!0,success:function(e){return function(n){var i,s,r,o;if("ok"===n.result){if(n.setting){r=n.setting;for(i in r)o=r[i],e.account[i]=o}n.content_messages&&n.content_messages>0&&(!e.account.inbound.options||!0!==e.account.inbound.options.keep_on_server)?(s=App.i18n.translateContent("We have already found %s email(s) in your mailbox. Zammad will move it all from your mailbox into Zammad.",n.content_messages),e.$(".js-inbound-acknowledge .js-message").html(s),e.$(".js-inbound-acknowledge .js-back").attr("data-slide","js-intro"),e.$(".js-inbound-acknowledge .js-next").attr("data-slide",""),e.$(".js-inbound-acknowledge .js-next").unbind("click.verify").bind("click.verify",function(t){return t.preventDefault(),e.verify(e.account)}),e.showSlide("js-inbound-acknowledge")):e.verify(e.account)}else"duplicate"===n.result?(e.showSlide("js-intro"),e.showAlert("js-intro","Account already exists!")):(e.showSlide("js-inbound"),e.showAlert("js-inbound","Unable to detect your server settings. Manual configuration needed."),e.$('.js-inbound [name="options::user"]').val(e.account.meta.email),e.$('.js-inbound [name="options::password"]').val(e.account.meta.password));return e.enable(t)}}(this),fail:function(e){return function(){return e.enable(t),e.showSlide("js-intro")}}(this)})},e.prototype.probeInbound=function(t){var e;return t.preventDefault(),e=this.formParam(t.target),this.disable(t),this.showSlide("js-test"),this.ajax({id:"email_inbound",type:"POST",url:this.apiPath+"/channels_email_inbound",data:JSON.stringify(e),processData:!0,success:function(n){return function(i){var s;return"ok"===i.result?(n.account.inbound=e,i.content_messages&&i.content_messages>0&&(!n.account.inbound.options||!0!==n.account.inbound.options.keep_on_server)?(s=App.i18n.translateContent("We have already found %s emails in your mailbox. Zammad will move it all from your mailbox into Zammad.",i.content_messages),n.$(".js-inbound-acknowledge .js-message").html(s),n.$(".js-inbound-acknowledge .js-back").attr("data-slide","js-inbound"),n.$(".js-inbound-acknowledge .js-next").unbind("click.verify"),n.showSlide("js-inbound-acknowledge")):n.showSlide("js-outbound"),n.channel||(n.account.inbound.options?(n.$('.js-outbound [name="options::host"]').val(n.account.inbound.options.host),n.$('.js-outbound [name="options::user"]').val(n.account.inbound.options.user),n.$('.js-outbound [name="options::password"]').val(n.account.inbound.options.password)):(n.$('.js-outbound [name="options::user"]').val(n.account.meta.email),n.$('.js-outbound [name="options::password"]').val(n.account.meta.password)))):(n.showSlide("js-inbound"),n.showAlert("js-inbound",i.message_human||i.message),n.showInvalidField("js-inbound",i.invalid_field)),n.enable(t)}}(this),fail:function(e){return function(){return e.showSlide("js-inbound"),e.showAlert("js-inbound",data.message_human||data.message),e.showInvalidField("js-inbound",data.invalid_field),e.enable(t)}}(this)})},e.prototype.probleOutbound=function(t){var e;return t.preventDefault(),e=this.formParam(t.target),e.email=this.account.meta.email,this.disable(t),this.showSlide("js-test"),this.ajax({id:"email_outbound",type:"POST",url:this.apiPath+"/channels_email_outbound",data:JSON.stringify(e),processData:!0,success:function(n){return function(i){return"ok"===i.result?(n.account.outbound=e,n.verify(n.account)):(n.showSlide("js-outbound"),n.showAlert("js-outbound",i.message_human||i.message),n.showInvalidField("js-outbound",i.invalid_field)),n.enable(t)}}(this),fail:function(e){return function(){return e.showSlide("js-outbound"),e.showAlert("js-outbound",data.message_human||data.message),e.showInvalidField("js-outbound",data.invalid_field),e.enable(t)}}(this)})},e.prototype.verify=function(t,e){return null==e&&(e=0),this.showSlide("js-verify"),this.ajax({id:"email_verify",type:"POST",url:this.apiPath+"/channels_email_verify",data:JSON.stringify(t),processData:!0,success:function(t){return function(n){return"ok"===n.result?t.navigate("getting_started/agents"):"inbound"===n.source||"outbound"===n.source?(t.showSlide("js-"+n.source),t.showAlert("js-"+n.source,n.message_human||n.message),t.showInvalidField("js-"+n.source,n.invalid_field)):2===e?(t.showAlert("js-verify",n.message_human||n.message),t.delay(function(){return t.showSlide("js-intro"),t.showAlert("js-intro","Unable to verify sending and receiving. Please check your settings.")},2300)):(n.subject&&t.account&&(t.account.subject=n.subject),t.verify(t.account,e+1))}}(this),fail:function(t){return function(){return t.showSlide("js-intro"),t.showAlert("js-intro","Unable to verify sending and receiving. Please check your settings.")}}(this)})},e}(App.WizardFullScreen),App.Config.set("getting_started/channel/email",r,"Routes"),e=function(t){function e(){this.submit=c(this.submit,this),this.release=c(this.release,this),e.__super__.constructor.apply(this,arguments),this.authenticateCheckRedirect(),this.title("Invite Agents"),this.fetch()}return u(e,t),e.prototype.events={"submit form":"submit"},e.prototype.release=function(){return this.el.removeClass("fit getstarted")},e.prototype.fetch=function(){return this.ajax({id:"getting_started",type:"GET",url:this.apiPath+"/getting_started",processData:!0,success:function(t){return function(e){return!0===e.import_mode?void t.navigate("#import/"+e.import_backend):(App.Collection.load({type:"Group",data:e.groups}),t.render())}}(this)})},e.prototype.render=function(){return this.html(App.view("getting_started/agent")()),new App.ControllerForm({el:this.$(".js-agent-form"),model:App.User,screen:"invite_agent",autofocus:!0})},e.prototype.submit=function(t){var e,n,i;return t.preventDefault(),this.formDisable(t),this.params=this.formParam(t.target),this.params.role_ids=[],this.params.invite=!0,n=App.Role.findByAttribute("name","Agent"),n&&(this.params.role_ids=n.id),i=new App.User,i.load(this.params),e=i.validate({screen:"invite_agent"}),e?(this.log("error new",e),this.formValidate({form:t.target,errors:e}),this.formEnable(t),!1):i.save({done:function(t){return function(){return App.Event.trigger("notify",{type:"success",
msg:App.i18n.translateContent("Invitation sent!"),timeout:3500}),t.render()}}(this),fail:function(e){return function(n,i){return e.formEnable(t),App.Event.trigger("notify",{type:"error",msg:App.i18n.translateContent(i.error_human||"Can't create user!"),timeout:2500})}}(this)})},e}(App.WizardFullScreen),App.Config.set("getting_started/agents",e,"Routes"),s=function(t){function e(){this.release=c(this.release,this),e.__super__.constructor.apply(this,arguments),this.authenticateCheckRedirect(),this.title("Setup Finished"),this.render()}return u(e,t),e.prototype.release=function(){return this.el.removeClass("fit getstarted")},e.prototype.render=function(){return this.html(App.view("getting_started/finish")()),this.delay(function(t){return function(){return t.$(".wizard-slide").addClass("hide")}}(this),2300),this.delay(function(t){return function(){return t.navigate("#")}}(this),4300)},e}(App.WizardFullScreen),App.Config.set("getting_started/finish",s,"Routes")}.call(this),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(){n.__super__.constructor.apply(this,arguments),new App.ControllerGenericIndex({el:this.el,id:this.id,genericObject:"Group",pageData:{home:"groups",object:"Group",objects:"Groups",navupdate:"#groups",notes:["Groups are ..."],buttons:[{name:"New Group","data-type":"new","class":"btn--success"}]},container:this.el.closest(".content")})}return e(n,t),n.prototype.requiredPermission="admin.group",n.prototype.header="Groups",n}(App.ControllerSubContent),App.Config.set("Group",{prio:1500,name:"Groups",parent:"#manage",target:"#manage/groups",controller:t,permission:["admin.group"]},"NavBarAdmin")}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.IdoitObjectSelector=function(n){function i(){return this.onSubmit=t(this.onSubmit,this),this.renderResult=t(this.renderResult,this),this.search=t(this.search,this),i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.buttonClose=!0,i.prototype.buttonCancel=!0,i.prototype.buttonSubmit=!0,i.prototype.head="i-doit",i.prototype.lastSearchTermEmpty=!1,i.prototype.content=function(){return this.ajax({id:"idoit-object-selector",type:"POST",url:this.apiPath+"/integration/idoit",data:JSON.stringify({method:"cmdb.object_types"}),success:function(t){return function(e){var n;return"failed"===e.result?(t.contentInline=e.message,void t.render()):(n=_.sortBy(e.response.result,"title"),t.contentInline=$(App.view("integration/idoit_object_selector")()),t.contentInline.find(".js-typeSelect").html(t.renderTypeSelector(n)),t.contentInline.on("change","input.js-shadow",function(e){var n;return n=t.formParam(e.target),t.search(n)}),t.contentInline.on("keyup","input.js-searchField",function(e){var n;return n=t.formParam(e.target),t.search(n)}),t.render(),t.$(".js-input").focus())}}(this),error:function(t){return function(e,n){if("abort"!==n)return t.contentInline="Unable to load content",t.render()}}(this)}),""},i.prototype.search=function(t){return _.isEmpty(t.type)&&_.isEmpty(t.title)?(this.lastSearchTermEmpty=!0,void this.renderResult()):(_.isEmpty(t.type)&&delete t.type,_.isEmpty(t.title)?delete t.title:t.title="%"+t.title+"%",this.lastSearchTermEmpty=!1,this.ajax({id:"idoit-object-selector",type:"POST",url:this.apiPath+"/integration/idoit",data:JSON.stringify({method:"cmdb.objects",filter:t}),success:function(t){return function(e){if(!t.lastSearchTermEmpty)return t.renderResult(e.response.result)}}(this),error:function(t){return function(e,n){if("abort"!==n)return t.contentInline="Unable to load content",t.render()}}(this)}))},i.prototype.renderResult=function(t){var e;return e=App.view("integration/idoit_object_result")({items:t}),this.el.find(".js-result").html(e)},i.prototype.renderTypeSelector=function(t){var e,n,i,s;for(s={},e=0,i=t.length;e<i;e++)n=t[e],s[n.id]=n.title;return App.UiElement.searchable_select.render({name:"type",multiple:!1,limit:100,"null":!1,nulloption:!1,options:s})},i.prototype.onSubmit=function(){var t,e,n;if(t=this.el.find(".js-result"),n=this.formParam(t),!_.isEmpty(n.object_id))return e=_.isArray(n.object_id)?n.object_id:[n.object_id],this.formDisable(t),this.callback(e,this)},i}(App.ControllerModal)}.call(this),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(){n.__super__.constructor.apply(this,arguments),this.title("Import"),this.fetch()}return e(n,t),n.prototype.className="getstarted fit",n.prototype.fetch=function(){return this.ajax({id:"getting_started",type:"GET",url:this.apiPath+"/getting_started",processData:!0,success:function(t){return function(e){return t.Config.get("system_init_done")?void t.navigate("#login"):!0===e.import_mode?void t.navigate("#import/"+e.import_backend):t.render()}}(this)})},n.prototype.render=function(){var t;return t=App.Config.get("ImportPlugins"),this.html(App.view("import/index")({items:t}))},n}(App.ControllerContent),App.Config.set("import",t,"Routes")}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var s in e)i.call(e,s)&&(t[s]=e[s]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;t=function(t){function i(){if(this.updateMigration=e(this.updateMigration,this),this.startMigration=e(this.startMigration,this),this.checkMigration=e(this.checkMigration,this),this.updateUrl=e(this.updateUrl,this),this.showImportNotice=e(this.showImportNotice,this),this.showImportState=e(this.showImportState,this),this.showLink=e(this.showLink,this),this.startDownload=e(this.startDownload,this),i.__super__.constructor.apply(this,arguments),this.title("Import"),this.Config.get("system_init_done"))return void this.navigate("#login");this.fetch()}return n(i,t),i.prototype.className="getstarted fit",i.prototype.elements={".input-feedback":"urlStatus",".js-migration-check":"nextStartMigration",".otrs-link-error":"linkErrorMessage"},i.prototype.events={"click .js-otrs-link":"showLink","click .js-download":"startDownload","click .js-migration-start":"startMigration","click .js-migration-check":"checkMigration","keyup #otrs-link":"updateUrl"},i.prototype.updateMigrationDisplayLoop=0,i.prototype.fetch=function(){return this.ajax({id:"getting_started",type:"GET",url:this.apiPath+"/getting_started",processData:!0,success:function(t){return function(e){return!0===e.import_mode&&"otrs"!==e.import_backend?void t.navigate("#import/"+e.import_backend):(t.render(),!0===e.import_mode?(t.showImportState(),t.updateMigration()):void 0)}}(this)})},i.prototype.render=function(){return this.html(App.view("import/otrs")())},i.prototype.startDownload=function(){return this.$(".js-otrs-link").removeClass("hide")},i.prototype.showLink=function(t){return t.preventDefault(),this.$("[data-slide=otrs-plugin]").toggleClass("hide"),this.$("[data-slide=otrs-link]").toggleClass("hide")},i.prototype.showImportState=function(){return this.$("[data-slide=otrs-plugin]").addClass("hide"),this.$("[data-slide=otrs-link]").addClass("hide"),this.$("[data-slide=otrs-import]").removeClass("hide"),this.$("[data-slide=otrs-import-notice]").addClass("hide")},i.prototype.showImportNotice=function(){return this.$("[data-slide=otrs-plugin]").addClass("hide"),this.$("[data-slide=otrs-link]").addClass("hide"),this.$("[data-slide=otrs-import]").addClass("hide"),this.$("[data-slide=otrs-import-notice]").removeClass("hide")},i.prototype.updateUrl=function(t){var e,n;return n=$(t.target).val(),this.urlStatus.attr("data-state","loading"),this.linkErrorMessage.text(""),e=function(t){return function(){return t.ajax({id:"import_otrs_url",type:"POST",url:t.apiPath+"/import/otrs/url_check",data:JSON.stringify({url:n}),processData:!0,success:function(e){return"ok"===e.result?(t.urlStatus.attr("data-state","success"),t.linkErrorMessage.text(""),t.nextStartMigration.removeClass("hide")):(t.urlStatus.attr("data-state","error"),t.linkErrorMessage.text(e.message_human||e.message),t.nextStartMigration.addClass("hide"))}})}}(this),this.delay(e,700,"import_otrs_url")},i.prototype.checkMigration=function(t){return t.preventDefault(),this.ajax({id:"import_otrs_check",type:"POST",url:this.apiPath+"/import/otrs/import_check",processData:!0,success:function(t){return function(e){var n,i,s,r;if("ok"===e.result)return void t.startMigration();for(r=e.issues,n=0,s=r.length;n<s;n++)i=r[n],t.$(".js-"+i).removeClass("hide");return t.showImportNotice()}}(this)})},i.prototype.startMigration=function(t){return t&&t.preventDefault(),this.showImportState(),this.ajax({id:"import_start",type:"POST",url:this.apiPath+"/import/otrs/import_start",processData:!0,success:function(t){return function(e){if("ok"===e.result)return t.delay(t.updateMigration,2e3)}}(this)})},i.prototype.updateMigration=function(){return this.updateMigrationDisplayLoop+=1,this.showImportState(),this.ajax({id:"import_status",type:"GET",url:this.apiPath+"/import/otrs/import_status",processData:!0,success:function(t){return function(e){var n,i,s,r;if("import_done"===e.result)return void window.location.reload();if("error"===e.result?(t.$(".js-error").removeClass("hide"),t.$(".js-error").html(App.i18n.translateContent(e.message))):t.$(".js-error").addClass("hide"),"not running"===e.message&&t.updateMigrationDisplayLoop>10)return t.$(".js-error").removeClass("hide"),void t.$(".js-error").html(App.i18n.translateContent("Background process did not start or has not finished! Please contact your support."));if("in_progress"===e.result){r=e.data;for(s in r)i=r[s],i.done>i.total&&(i.done=i.total),n=t.$(".js-"+s.toLowerCase()),n.find(".js-done").text(i.done),n.find(".js-total").text(i.total),n.find("progress").attr("max",i.total),n.find("progress").attr("value",i.done),i.total<=i.done?n.addClass("is-done"):n.removeClass("is-done")}return t.delay(t.updateMigration,6500)}}(this)})},i}(App.ControllerContent),App.Config.set("import/otrs",t,"Routes"),App.Config.set("otrs",{title:"OTRS",name:"OTRS","class":"js-otrs",url:"#import/otrs"},"ImportPlugins")}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var s in e)i.call(e,s)&&(t[s]=e[s]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;t=function(t){function i(){if(this.updateMigration=e(this.updateMigration,this),this.startMigration=e(this.startMigration,this),this.showImportState=e(this.showImportState,this),this.showCredentials=e(this.showCredentials,this),this.updateApiToken=e(this.updateApiToken,this),this.updateUrl=e(this.updateUrl,this),i.__super__.constructor.apply(this,arguments),this.title("Import"),this.Config.get("system_init_done"))return void this.navigate("#login");this.fetch()}return n(i,t),i.prototype.className="getstarted fit",i.prototype.elements={".input-feedback":"urlStatus","[data-target=zendesk-credentials]":"nextEnterCredentials","[data-target=zendesk-start-migration]":"nextStartMigration","#zendesk-url":"zendeskUrl",".js-zendeskUrlApiToken":"zendeskUrlApiToken",".zendesk-url-error":"linkErrorMessage",".zendesk-api-token-error":"apiTokenErrorMessage","#zendesk-email":"zendeskEmail","#zendesk-api-token":"zendeskApiToken",".js-ticket-count-info":"ticketCountInfo"},i.prototype.updateMigrationDisplayLoop=0,i.prototype.events={"click .js-zendesk-credentials":"showCredentials","click .js-migration-start":"startMigration","keyup #zendesk-url":"updateUrl","keyup #zendesk-api-token":"updateApiToken"},i.prototype.fetch=function(){return this.ajax({id:"getting_started",type:"GET",url:this.apiPath+"/getting_started",processData:!0,success:function(t){return function(e){return!0===e.import_mode&&"zendesk"!==e.import_backend?void t.navigate("#import/"+e.import_backend):(t.render(),!0===e.import_mode?(t.showImportState(),t.updateMigration()):void 0)}}(this)})},i.prototype.render=function(){return this.html(App.view("import/zendesk")())},i.prototype.updateUrl=function(){var t;return this.urlStatus.attr("data-state","loading"),this.linkErrorMessage.text(""),t=function(t){return function(){return t.ajax({id:"import_zendesk_url",type:"POST",url:t.apiPath+"/import/zendesk/url_check",data:JSON.stringify({url:t.zendeskUrl.val()}),processData:!0,success:function(e){return console.log(e),"ok"===e.result?(t.urlStatus.attr("data-state","success"),t.linkErrorMessage.text(""),t.nextEnterCredentials.removeClass("hide")):(t.urlStatus.attr("data-state","error"),t.linkErrorMessage.text(e.message_human||e.message),t.nextEnterCredentials.addClass("hide"))}})}}(this),this.delay(t,700,"import_zendesk_url")},i.prototype.updateApiToken=function(){var t;return this.urlStatus.attr("data-state","loading"),this.apiTokenErrorMessage.text(""),t=function(t){return function(){return t.ajax({id:"import_zendesk_api_token",type:"POST",url:t.apiPath+"/import/zendesk/credentials_check",data:JSON.stringify({username:t.zendeskEmail.val(),token:t.zendeskApiToken.val()}),processData:!0,success:function(e){return console.log(e),"ok"===e.result?(t.urlStatus.attr("data-state","success"),t.apiTokenErrorMessage.text(""),t.nextStartMigration.removeClass("hide")):(t.urlStatus.attr("data-state","error"),t.apiTokenErrorMessage.text(e.message_human||e.message),t.nextStartMigration.addClass("hide"))}})}}(this),this.delay(t,700,"import_zendesk_api_token")},i.prototype.showCredentials=function(t){var e;return t.preventDefault(),this.urlStatus.attr("data-state",""),e=this.zendeskUrl.val()+"/agent/admin/api",this.zendeskUrlApiToken.attr("href",e.replace(/([^:])\/\/+/g,"$1/")),this.zendeskUrlApiToken.val("HERE"),this.$("[data-slide=zendesk-url]").toggleClass("hide"),this.$("[data-slide=zendesk-credentials]").toggleClass("hide")},i.prototype.showImportState=function(){return this.$("[data-slide=zendesk-url]").addClass("hide"),this.$("[data-slide=zendesk-credentials]").addClass("hide"),this.$("[data-slide=zendesk-import]").removeClass("hide")},i.prototype.startMigration=function(t){return t.preventDefault(),this.showImportState(),this.ajax({id:"import_start",type:"POST",url:this.apiPath+"/import/zendesk/import_start",processData:!0,success:function(t){return function(e){if(console.log(e),"ok"===e.result)return t.delay(t.updateMigration,3e3)}}(this)})},i.prototype.updateMigration=function(){return this.updateMigrationDisplayLoop+=1,this.showImportState(),this.ajax({id:"import_status",type:"GET",url:this.apiPath+"/import/zendesk/import_status",processData:!0,success:function(t){return function(e){var n,i,s,r;if(_.isEmpty(e.result)&&t.updateMigrationDisplayLoop>16)return t.$(".js-error").removeClass("hide"),void t.$(".js-error").html(App.i18n.translateContent("Background process did not start or has not finished! Please contact your support."));if(_.isEmpty(e.result.error)?t.$(".js-error").addClass("hide"):(t.$(".js-error").removeClass("hide"),t.$(".js-error").html(App.i18n.translateContent(e.result.error))),!_.isEmpty(e.finished_at)&&_.isEmpty(e.result.error))return void window.location.reload();if(!_.isEmpty(e.result)){s=e.result;for(i in s)r=s[i],r.sum>r.total&&(r.sum=r.total),"Ticket"===i&&r.total>=1e3&&t.ticketCountInfo.removeClass("hide"),n=t.$(".js-"+i.toLowerCase()),n.find(".js-done").text(r.sum),n.find(".js-total").text(r.total),n.find("progress").attr("max",r.total),n.find("progress").attr("value",r.sum),r.total<=r.sum?n.addClass("is-done"):n.removeClass("is-done")}return t.delay(t.updateMigration,5e3)}}(this)})},i}(App.ControllerContent),App.Config.set("import/zendesk",t,"Routes"),App.Config.set("zendesk",{title:"Zendesk",name:"Zendesk","class":"js-zendesk",url:"#import/zendesk"},"ImportPlugins")}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var s in e)i.call(e,s)&&(t[s]=e[s]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;t=function(t){function i(){this.release=e(this.release,this),this.render=e(this.render,this),this.show=e(this.show,this),i.__super__.constructor.apply(this,arguments),this.integrationItems=App.Config.get("NavBarIntegrations"),this.subscribeId=App.Setting.subscribe(this.render,{initFetch:!0,clear:!1})}return n(i,t),i.prototype.requiredPermission="admin.integration",i.prototype.header="Integrations",i.prototype.show=function(t){var e,n,i,s;if(!this.initRender||t.target||t.integration){if(this.target=t.target,this.integration=t.integration,!this.initRender)return void(this.requestedIntegration=!0);if(!this.integration)return void(t.noRender||this.render());i=this.integrationItems;for(n in i)if(s=i[n],s.target==="#system/"+t.target+"/"+t.integration){e=s;break}return new e.controller({el:this.el})}},i.prototype.render=function(){var t,e,n,i,s,r,o,a,l;if(!this.initRender||!this.integration){this.user=App.User.find(App.Session.get("id")),this.initRender=!0,e=[],o=this.integrationItems;for(n in o)if(l=o[n],l.permission)for(s=!1,a=l.permission,t=0,i=a.length;t<i;t++)r=a[t],!s&&this.user.permission(r)&&(s=!0,l.key=n,e.push(l));else l.key=n,e.push(l);if(e=_.sortBy(e,function(t){return t.name}),this.html(App.view("integration/index")({head:"Integrations",integrations:e})),this.requestedIntegration)return this.show({target:this.target,integration:this.integration,noRender:!0}),this.requestedIntegration=void 0}},i.prototype.release=function(){if(this.subscribeId)return App.Setting.unsubscribe(this.subscribeId)},i}(App.ControllerSubContent),App.Config.set("Integration",{prio:1e3,name:"Integrations",parent:"#system",target:"#system/integration",controller:t,permission:["admin.integration"]},"NavBarAdmin")}.call(this),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(){n.__super__.constructor.apply(this,arguments),new App.ControllerGenericIndex({el:this.el,id:this.id,genericObject:"Job",defaultSortBy:"name",pageData:{home:"Jobs",object:"Scheduler",objects:"Schedulers",navupdate:"#Jobs",notes:["Scheduler are ..."],buttons:[{name:"New Scheduler","data-type":"new","class":"btn--success"}]},container:this.el.closest(".content"),large:!0})}return e(n,t),n.prototype.requiredPermission="admin.scheduler",n.prototype.header="Scheduler",n}(App.ControllerSubContent),App.Config.set("Job",{prio:3400,name:"Scheduler",parent:"#manage",target:"#manage/job",controller:t,permission:["admin.scheduler"]},"NavBarAdmin")}.call(this),function(){var t;t=function(){function t(){new App.KeyboardShortcutModal}return t}(),App.Config.set("keyboard_shortcuts",t,"Routes"),App.Config.set("KeyboardShortcuts",{prio:1700,parent:"#current_user",name:"Keyboard Shortcuts",translate:!0,target:"#keyboard_shortcuts",permission:["admin","ticket.agent"]},"NavBarRight")}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var s in e)i.call(e,s)&&(t[s]=e[s]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;t=function(t){function i(){return this.error=e(this.error,this),this.success=e(this.success,this),i.__super__.constructor.apply(this,arguments),this.Config.get("system_init_done")?this.Session.get()?void this.navigate("#"):(this.navHide(),this.title("Sign in"),this.render(),this.navupdate("#login"),this.bind("config_update_local",function(t){return function(e){if(e.name.match(/^maintenance/)||e.name.match(/^auth/)||"user_lost_password"===e.name||"user_create_account"===e.name||"product_name"===e.name||"product_logo"===e.name||"fqdn"===e.name)return t.render(),"rerender"}}(this)),void this.bind("ui:rerender",function(t){return function(){return t.render()}}(this))):void this.navigate("#getting_started")}return n(i,t),i.prototype.events={"submit #login":"login"},i.prototype.render=function(t){var e,n,i,s;null==t&&(t={}),e=App.Config.get("auth_provider_all"),n=[];for(i in e)s=e[i],!0!==this.Config.get(s.config)&&"true"!==this.Config.get(s.config)||n.push(s);return this.html(App.view("login")({item:t,logoUrl:this.logoUrl(),auth_providers:n})),this.$('[name="username"]').val()?this.$('[name="password"]').focus():this.$('[name="username"]').focus(),this.scrollTo()},i.prototype.login=function(t){var e;return t.preventDefault(),t.stopPropagation(),this.formDisable(t),e=this.formParam(t.target),this.username=e.username,App.Auth.login({data:e,success:this.success,error:this.error})},i.prototype.success=function(){var t;return t=this.Config.get("requested_url"),t&&"#login"!==t&&"#logout"!==t?(this.log("notice","REDIRECT to '"+t+"'"),this.navigate(t),this.Config.set("requested_url","")):(this.log("notice","REDIRECT to -#/-"),this.navigate("#/"))},i.prototype.error=function(t){var e,n;return n=t.responseText,e={},_.isEmpty(n)||(e=JSON.parse(n)),this.notify({type:"error",msg:App.i18n.translateContent(e.error||"Wrong Username or Password combination."),removeAll:!0}),this.render({username:this.username}),this.delay(function(t){return function(){return t.shake(t.$(".hero-unit"))}}(this),600)},i}(App.ControllerContent),App.Config.set("login",t,"Routes")}.call(this),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(){n.__super__.constructor.apply(this,arguments),App.Auth.logout()}return e(n,t),n}(App.ControllerContent),App.Config.set("logout",t,"Routes"),App.Config.set("Logout",{prio:1800,parent:"#current_user",name:"Sign out",translate:!0,target:"#logout",divider:!0,iconClass:"signout"},"NavBarRight")}.call(this),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(){n.__super__.constructor.apply(this,arguments),new App.ControllerGenericIndex({el:this.el,id:this.id,genericObject:"Macro",pageData:{home:"macros",object:"Macro",objects:"Macros",navupdate:"#macros",notes:["Text modules are ..."],buttons:[{name:"New Macro","data-type":"new","class":"btn--success"}]},container:this.el.closest(".content")})}return e(n,t),n.prototype.requiredPermission="admin.macro",n.prototype.header="Macros",n}(App.ControllerSubContent),App.Config.set("Macros",{prio:2310,name:"Macros",parent:"#manage",target:"#manage/macros",controller:t,permission:["admin.macro"]},"NavBarAdmin")}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var s in e)i.call(e,s)&&(t[s]=e[s]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;t=function(t){function i(){this.updateMessage=e(this.updateMessage,this),this.setLogin=e(this.setLogin,this),this.setMode=e(this.setMode,this),this.render=e(this.render,this),this.release=e(this.release,this),i.__super__.constructor.apply(this,arguments),this.subscribeId=App.Setting.subscribe(this.render,{initFetch:!0,clear:!1})}return n(i,t),i.prototype.requiredPermission="admin.maintenance",i.prototype.header="Maintenance",i.prototype.events={"change .js-modeSetting input":"setMode","change .js-loginSetting input":"setLogin","blur .js-Login":"updateMessage","submit .js-Message":"sendMessage"},i.prototype.elements={".js-modeSetting input":"modeSetting",".js-loginSetting input":"loginSetting"},i.prototype.release=function(){return App.Setting.unsubscribe(this.subscribeId)},i.prototype.render=function(){var t;return t=$(App.view("maintenance")()),t.find(".js-loginPreview").html(App.view("generic/login_preview")({logoUrl:this.logoUrl(),logoChange:!1,maintananceChange:!0})),t.find(".js-textarea").ce({mode:"richtext",multiline:!0,maxlength:2e4}),this.html(t)},i.prototype.setMode=function(){var t,e;return e=this.modeSetting.prop("checked"),t=function(){return App.Setting.set("maintenance_mode",e,{done:function(){return App.WebSocket.send({event:"maintenance",data:{type:"mode",on:e}})}})},e?(new App.ControllerConfirm({message:"Sure?",callback:t,onCancel:function(t){return function(){return t.modeSetting.prop("checked",!1)}}(this),container:this.el.closest(".content")}),e):t()},i.prototype.setLogin=function(){var t;return t=this.loginSetting.prop("checked"),App.Setting.set("maintenance_login",t)},i.prototype.updateMessage=function(t){var e;return t.preventDefault(),e=this.formParam(t.target),App.Setting.set("maintenance_login_message",e.message),this.notify({type:"success",msg:App.i18n.translateContent("Update successful!"),removeAll:!0})},i.prototype.sendMessage=function(t){var e;return t.preventDefault(),e=this.formParam(t.target),e.type="message",App.WebSocket.send({event:"maintenance",data:e}),this.notify({type:"success",msg:App.i18n.translateContent("Sent successfully!"),removeAll:!0}),this.render()},i}(App.ControllerSubContent),App.Config.set("Maintenance",{prio:3600,name:"Maintenance",parent:"#system",target:"#system/maintenance",controller:t,permission:["admin.maintenance"]},"NavBarAdmin")}.call(this),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.Manage=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.authenticateRequired=!0,n.prototype.configKey="NavBarAdmin",n}(App.ControllerNavSidbar),t=function(t){function n(t){n.__super__.constructor.apply(this,arguments),this.authenticateCheckRedirect(),App.TaskManager.execute({key:"Manage",controller:"Manage",params:t,show:!0,persistent:!0})}return e(n,t),n.prototype.requiredPermission=["admin.*"],n}(App.ControllerPermanent),App.Config.set("manage",t,"Routes"),App.Config.set("manage/:target",t,"Routes"),App.Config.set("settings/:target",t,"Routes"),App.Config.set("channels/:target",t,"Routes"),App.Config.set("channels/:target/:channel_id",t,"Routes"),App.Config.set("system/:target",t,"Routes"),App.Config.set("system/:target/:integration",t,"Routes"),App.Config.set("Manage",{prio:1e3,name:"Manage",target:"#manage",permission:["admin.*"]},"NavBarAdmin"),App.Config.set("Channels",{prio:2500,name:"Channels",target:"#channels",permission:["admin.*"]},"NavBarAdmin"),App.Config.set("Settings",{prio:7e3,name:"Settings",target:"#settings",permission:["admin.*"]},"NavBarAdmin"),App.Config.set("System",{prio:8e3,name:"System",target:"#system",permission:["admin.*"]},"NavBarAdmin")}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var s in e)i.call(e,s)&&(t[s]=e[s]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;t=function(t){function i(){this.restartFailedJobs=e(this.restartFailedJobs,this),this.resetToken=e(this.resetToken,this),this.render=e(this.render,this),i.__super__.constructor.apply(this,arguments),this.load(),this.interval(function(t){return function(){return t.load()}}(this),35e3)}return n(i,t),i.prototype.requiredPermission="admin.monitoring",i.prototype.header="Monitoring",i.prototype.events={"click .js-resetToken":"resetToken","click .js-select":"selectAll","click .js-restartFailedJobs":"restartFailedJobs"},i.prototype.load=function(){return this.startLoading(),this.ajax({id:"health_check",type:"GET",url:this.apiPath+"/monitoring/health_check",success:function(t){return function(e){if(t.stopLoading(),!t.data||e.token!==t.data.token||e.healthy!==t.data.healthy||e.message!==t.data.message)return t.data=e,t.render()}}(this)})},i.prototype.render=function(){return this.html(App.view("monitoring")({data:this.data}))},i.prototype.resetToken=function(t){return t.preventDefault(),this.formDisable(t),this.ajax({id:"health_check_token",type:"POST",url:this.apiPath+"/monitoring/token",success:function(t){return function(){return t.load()}}(this)})},i.prototype.restartFailedJobs=function(t){return t.preventDefault(),this.ajax({id:"restart_failed_jobs_request",type:"POST",url:this.apiPath+"/monitoring/restart_failed_jobs",success:function(t){return function(){return t.load()}}(this)})},i}(App.ControllerSubContent),App.Config.set("Monitoring",{prio:3600,name:"Monitoring",parent:"#system",target:"#system/monitoring",controller:t,permission:["admin.monitoring"]},"NavBarAdmin")}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.Navigation=function(n){function i(){this.fetchRecentView=t(this.fetchRecentView,this),this.recentViewNavbarItemsRebuild=t(this.recentViewNavbarItemsRebuild,this),this.update=t(this.update,this),this.search=t(this.search,this),this.andClose=t(this.andClose,this),this.emptyAndClose=t(this.emptyAndClose,this),this.nudge=t(this.nudge,this),this.listNavigate=t(this.listNavigate,this),this.searchBlur=t(this.searchBlur,this),this.searchFocus=t(this.searchFocus,this),this.renderResult=t(this.renderResult,this),this.renderPersonal=t(this.renderPersonal,this),this.renderMenu=t(this.renderMenu,this),this.release=t(this.release,this),i.__super__.constructor.apply(this,arguments),this.render(),this.throttledSearch=_.throttle(this.search,200),this.globalSearch=new App.GlobalSearch({render:this.renderResult}),this.bind("ui:rerender",function(t){return function(){return t.renderMenu(),t.renderPersonal()}}(this)),this.bind("menu:render",function(t){return function(){return t.renderMenu()}}(this)),this.bind("personal:render",function(t){return function(){return t.renderPersonal()}}(this)),this.bind("navupdate",function(t){return function(e){return t.update(e)}}(this)),this.bind("auth",function(t){return function(){return t.render()}}(this)),this.bind("RecentView::changed",function(t){return function(){return t.delay(function(){return t.fetchRecentView()},1e3,"recent-view-changed")}}(this)),this.bind("bell",function(t){return function(e){return"on"===e?(t.$(".bell").addClass("show"),App.Audio.play("https://www.sounddogs.com/previews/2193/mp3/219024_SOUNDDOGS__be.mp3"),t.delay(function(){return App.Event.trigger("bell","off")},3e3)):t.$(".bell").removeClass("show")}}(this))}return e(i,n),i.prototype.className="navigation vertical",i.prototype.elements={"#global-search":"searchInput",".search":"searchContainer",".js-global-search-result":"searchResult",".js-details-link":"searchDetails"},i.prototype.events={"click .js-toggleNotifications":"toggleNotifications","click .js-emptySearch":"emptyAndClose","submit form.search-holder":"preventDefault","dblclick form.search-holder .icon-magnifier":"openExtendedSearch","focus #global-search":"searchFocus","blur #global-search":"searchBlur","keyup #global-search":"listNavigate","click .js-global-search-result":"andClose","click .js-details-link":"openExtendedSearch","change .js-menu .js-switch input":"switch"},i.prototype.release=function(){if(this.notificationWidget)return this.notificationWidget.remove(),this.notificationWidget=void 0},i.prototype.renderMenu=function(){var t,e,n,i,s,r,o,a,l;for(n=this.getItems({navbar:this.Config.get("NavBar")}),t={},i=[],s=0,r=n.length;s<r;s++)e=n[s],a=!0,void 0!==e.shown&&(a=e.shown),e.key&&(l=App.TaskManager.worker(e.key))&&(l.counter&&(e.counter=l.counter()),l["switch"]&&(e["switch"]=l["switch"]()),l.active&&l.active()&&(t[e.target]=!0),l.featureActive&&(a=!!l.featureActive())),a&&i.push(e);return n=i,o={},this.$(".open").children("a").each(function(t,e){var n;return n=$(e).attr("href"),o[n]=!0}),this.$(".js-menu").html(App.view("navigation/menu")({items:n,openTab:o,activeTab:t}))},i.prototype["switch"]=function(t){var e,n,i;if(n=$(t.target).prop("checked"),(e=$(t.target).closest(".menu-item").data("key"))&&(i=App.TaskManager.worker(e)))return i["switch"](n)},i.prototype.renderPersonal=function(){var t,e,n,i,s;for(this.recentViewNavbarItemsRebuild(),e=clone(this.getItems({navbar:this.Config.get("NavBarRight")}),!0),n=0,
i=e.length;n<i;n++)(t=e[n])&&t.child&&1===t.child.length&&(t.target=t.child[0].target,delete t.child);if(s={},this.$(".open").children("a").each(function(t,e){var n;return n=$(e).attr("href"),s[n]=!0}),this.$(".navbar-items-personal").html(App.view("navigation/personal")({items:e,openTab:s})),App.Session.get("id"))return new App.WidgetAvatar({el:this.$(".js-avatar"),object_id:App.Session.get("id"),type:"personal"})},i.prototype.renderResult=function(t){var e;return null==t&&(t=[]),_.isEmpty(t)?(this.searchContainer.removeClass("open"),this.globalSearch.close(),void this.searchResult.html("")):(e=App.view("navigation/result")({result:t}),this.searchResult.html(e),this.searchContainer.addClass("open"),this.ticketPopups(),this.userPopups(),this.organizationPopups())},i.prototype.render=function(){var t;return t=App.Session.get(),this.html(App.view("navigation")({user:t})),this.taskbar=new App.TaskbarWidget({el:this.$(".tasks")}),this.renderMenu(),this.renderPersonal(),this.notificationWidget&&this.notificationWidget.remove(),this.notificationWidget=new App.OnlineNotificationWidget,$("#app").append(this.notificationWidget.el)},i.prototype.searchFocus=function(){return this.query="",this.searchContainer.addClass("focused"),this.anyPopoversDestroy(),this.search()},i.prototype.searchBlur=function(){var t;return t=function(t){return function(){var e;return e=t.searchInput.val().trim(),e?t.searchContainer.removeClass("focused"):void t.emptyAndClose()}}(this),this.delay(t,100,"removeFocused")},i.prototype.listNavigate=function(t){var e;if(27===t.keyCode)return this.emptyAndClose(),void this.searchInput.blur();if(38===t.keyCode)return void this.nudge(t,-1);if(40===t.keyCode)return void this.nudge(t,1);if(13===t.keyCode){if(this.$(".global-search-menu .js-details-link.is-hover").get(0))return void this.openExtendedSearch();if(!(e=this.$(".global-search-result .nav-tab.is-hover").attr("href")))return;return this.navigate(e),this.emptyAndClose(),void this.searchInput.blur()}return this.throttledSearch()},i.prototype.nudge=function(t,e){var n,i,s;if(this.searchContainer.hasClass("open"))return n=this.searchResult.find(".nav-tab.is-hover"),n.get(0)||1!==e?(1===e?(i=n.closest("li").nextAll("li").not(".divider").first().find(".nav-tab"),i.get(0)&&(n.removeClass("is-hover").popover("hide"),i.addClass("is-hover").popover("show"))):(s=n.closest("li").prevAll("li").not(".divider").first().find(".nav-tab"),s.get(0)?(n.removeClass("is-hover").popover("hide"),s.addClass("is-hover").popover("show")):(n.removeClass("is-hover").popover("hide"),this.searchDetails.addClass("is-hover"))),i&&this.scrollToIfNeeded(i,!0),s?this.scrollToIfNeeded(s,!1):void 0):this.searchDetails.hasClass("is-hover")?(this.searchDetails.removeClass("is-hover"),void this.searchResult.find(".nav-tab").first().addClass("is-hover").popover("show")):void this.searchDetails.addClass("is-hover")},i.prototype.emptyAndClose=function(){return this.searchInput.val(""),this.searchContainer.removeClass("filled").removeClass("open").removeClass("focused"),this.globalSearch.close(),this.delay(this.anyPopoversDestroy,100,"removePopovers")},i.prototype.andClose=function(){return this.searchInput.blur(),this.searchContainer.removeClass("open"),this.globalSearch.close(),this.delay(this.anyPopoversDestroy,100,"removePopovers")},i.prototype.search=function(){var t;if((t=this.searchInput.val().trim())&&t!==this.query)return this.query=t,this.searchContainer.toggleClass("filled",!!this.query),this.globalSearch.search({query:this.query})},i.prototype.filterNavbar=function(t,e,n){return null==n&&(n=null),_.filter(t,function(t){return function(i){var s,r,o;if("function"==typeof i.callback){s=i.callback()||{};for(r in s)o=s[r],i[r]=o}return(null==n&&!i.parent||i.parent===n)&&(t.filterNavbarPermissionOk(i,e)&&t.filterNavbarSettingOk(i))}}(this))},i.prototype.filterNavbarPermissionOk=function(t,e){return!t.permission||_.any(t.permission,function(t){return e&&e.permission(t)})},i.prototype.filterNavbarSettingOk=function(t){return!t.setting||_.any(t.setting,function(t){return function(e){return t.Config.get(e)}}(this))},i.prototype.getItems=function(t){var e,n,i,s,r,o,a,l,c,u,p,h,d,f;for(h=_.values(t.navbar),p=[],n={},f=void 0,App.Session.get("id")&&(f=App.User.find(App.Session.get("id"))),p=this.filterNavbar(h,f),r=0,l=h.length;r<l;r++)if(i=h[r],i.parent&&!n[i.parent])for(n[i.parent]=this.filterNavbar(h,f,i.parent),o=0,c=p.length;o<c;o++)s=p[o],s.target===i.parent&&(d=this.getOrder(n[i.parent]),s.child=d);for(e=[],a=0,u=p.length;a<u;a++)i=p[a],(!i.child||i.child&&!_.isEmpty(i.child))&&e.push(i);return this.getOrder(e)},i.prototype.getOrder=function(t){var e,n,i,s,r,o,a,l,c,u,p,h,d,f;for(h={},r=0,c=t.length;r<c;r++)s=t[r],this.addPrioCount(h,s),h[s.prio]=s;for(a=_.keys(h),n=a.sort(this.sortit),i=[],o=0,u=n.length;o<u;o++)d=n[o],i.push(h[d]);for(e=!1,l=0,p=i.length;l<p;l++)f=i[l],"recentViewed"===f.type&&(e=!0),e&&"recentViewed"!==f.type&&(f.divider=!0,e=!1);return i},i.prototype.sortit=function(t,e){return t-e},i.prototype.addPrioCount=function(t,e){if(t[e.prio]&&(e.prio++,t[e.prio]))return this.addPrioCount(t,e)},i.prototype.update=function(t){var e,n;if(n=t,_.isObject(t)&&(n=t.url,e=t.type),"menu"===e?this.$(".js-menu .is-active, .js-details-link.is-active").removeClass("is-active"):this.$(".is-active").removeClass("is-active"),n&&"#"!==n)return this.$('[href="'+n+'"]').addClass("is-active")},i.prototype.recentViewNavbarItemsRebuild=function(){var t,e,n,i,s,r,o,a,l,c;t=this.Config.get("NavBarRight")||{};for(r in t)"#current_user"===t[r].parent&&(l=r.split("::"),"RecendViewed"===l[0]&&delete t[r]);if(!this.Session.get())return void this.Config.set("NavBarRight",t);for(i=App.RecentView.search({sortBy:"created_at",order:"DESC"}),i=this.prepareForObjectList(i),c=80,s=0,o=i.length;s<o;s++)n=i[s],e=!1,a=!1,80===c&&(e=!0,a="Recently viewed"),c++,t["RecendViewed::"+n.o_id+n.object+"-"+c]={prio:c,parent:"#current_user",name:App.i18n.translateInline(n.object)+" ("+n.title+")",target:n.link,divider:e,navheader:a,type:"recentViewed"};return this.Config.set("NavBarRight",t)},i.prototype.fetchRecentView=function(){var t;return t=function(t){return function(){return t.renderPersonal()}}(this),App.RecentView.fetchFull(t,{clear:!0})},i.prototype.toggleNotifications=function(t){return t.stopPropagation(),this.notificationWidget.toggle()},i.prototype.openExtendedSearch=function(t){var e;return t&&t.preventDefault(),e=this.searchInput.val(),this.searchInput.val("").blur(),e?void this.navigate("#search/"+encodeURIComponent(e)):this.navigate("#search")},i}(App.ControllerWidgetPermanent),App.Config.set("navigation",App.Navigation,"Navigations")}.call(this),function(){var t,e,n,i,s,r=function(t,e){return function(){return t.apply(e,arguments)}},o=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;s=function(t,e){var n,i,s;return s=[],n=[],i=[],$(t.target).closest(".modal").find(".js-treeTable .js-key").each(function(){var t,e,r,o,a,l,c,u,p;if(t=$(this),a=parseInt(t.attr("level")),l=t.val(),o={name:l},0===a?s.push(o):n[a-1]?((e=n[a-1]).children||(e.children=[]),n[a-1].children.push(o)):console.log("ERROR",o),p=[],a>0)for(c=r=0,u=a-1;0<=u?r<=u:r>=u;c=0<=u?++r:--r)p.push(i[c]);return p.push(l),o.value=p.join("::"),n[a]=o,i=p}),s[0]&&(e.data_option||(e.data_option={}),e.data_option.options=s),e},e=function(t){function e(){this.build=r(this.build,this),e.__super__.constructor.apply(this,arguments),this.startLoading(),this.ajax({id:"object_manager_attributes_list",type:"GET",url:this.apiPath+"/object_manager_attributes_list",processData:!0,success:function(t){return function(e){return t.stopLoading(),t.build(e.objects)}}(this)})}return o(e,t),e.prototype.requiredPermission="admin.object",e.prototype.build=function(t){var e,i,s,r;for(this.tabs=[],e=0,s=t.length;e<s;e++)r=t[e],i={name:r,target:"c-"+r,controller:n,params:{object:r}},this.tabs.push(i);return this.render()},e}(App.ControllerTabs),n=function(e){function n(){this.edit=r(this.edit,this),this["new"]=r(this["new"],this),this.render=r(this.render,this),this.release=r(this.release,this),n.__super__.constructor.apply(this,arguments),this.subscribeId=App.ObjectManagerAttribute.subscribe(this.render),App.ObjectManagerAttribute.fetch()}return o(n,e),n.prototype.header="Object Manager",n.prototype.events={"click .js-delete":"destroy","click .js-new":"new","click .js-edit":"edit","click .js-discard":"discard","click .js-execute":"execute"},n.prototype.release=function(){if(this.subscribeId)return App.ObjectManagerAttribute.unsubscribe(this.subscribeId)},n.prototype.render=function(){var t,e,n,i,s,r;for(n=App.ObjectManagerAttribute.search({filter:{object:this.object},sortBy:"position"}),i=[],r=App.ObjectManagerAttribute.search({sortBy:"object"}),t=0,s=r.length;t<s;t++)e=r[t],!0!==e.to_create&&!0!==e.to_delete&&!0!==e.to_migrate&&!0!==e.to_config||i.push(e);return this.html(App.view("object_manager/index")({head:this.object,items:n,itemsToChange:i}))},n.prototype["new"]=function(t){return t.preventDefault(),new i({pageData:{head:this.object,title:"Attribute",home:"object_manager",object:"ObjectManagerAttribute",objects:"ObjectManagerAttributes",navupdate:"#object_manager"},genericObject:"ObjectManagerAttribute",container:this.el.closest(".content"),item:{object:this.object}})},n.prototype.edit=function(e){var n;return e.preventDefault(),n=$(e.target).closest("tr").data("id"),new t({pageData:{head:this.object,title:"Attribute",home:"object_manager",object:"ObjectManagerAttribute",objects:"ObjectManagerAttributes",navupdate:"#object_manager"},genericObject:"ObjectManagerAttribute",container:this.el.closest(".content"),callback:this.render,id:n})},n.prototype.destroy=function(t){var e,n;return t.stopPropagation(),t.preventDefault(),e=$(t.target).closest("tr").data("id"),App.ObjectManagerAttribute.find(e),n=this,this.ajax({id:"object_manager_attributes/"+e,type:"DELETE",url:this.apiPath+"/object_manager_attributes/"+e,success:function(t){return function(){return t.render()}}(this),error:function(t){return n.log("errors"),alert(t.responseJSON.error)}})},n.prototype.discard=function(t){return t.preventDefault(),this.ajax({id:"object_manager_attributes_discard_changes",type:"POST",url:this.apiPath+"/object_manager_attributes_discard_changes",success:function(t){return function(){return t.render()}}(this)})},n.prototype.execute=function(t){return t.preventDefault(),this.ajax({id:"object_manager_attributes_execute_migrations",type:"POST",url:this.apiPath+"/object_manager_attributes_execute_migrations",success:function(t){return function(){return t.render()}}(this)})},n}(App.ControllerSubContent),i=function(t){function e(){return this.onSubmit=r(this.onSubmit,this),e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.onSubmit=function(t){var e,n,i,r,o,a,l;if(i=this.formParam(t.target),i=s(t,i),i.screens&&i.screens.create_middle){r=i.screens.create_middle;for(o in r)l=r[o],l.item_class="column"}return i.object=this.pageData.head,n=new App[this.genericObject],n.load(i),(e=n.validate())?(this.log("error",e),this.formValidate({form:t.target,errors:e}),!1):(this.formDisable(t),a=this,n.save({done:function(){var t;return a.callback&&(t=App[a.genericObject].fullLocal(this.id),a.callback(t)),a.close()},fail:function(e,n){return a.log("errors",n),a.formEnable(t),a.controller.showAlert(n.error_human||n.error||"Unable to create object!")}}))},e}(App.ControllerGenericNew),t=function(t){function e(){return this.onSubmit=r(this.onSubmit,this),this.content=r(this.content,this),e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.content=function(){var t,e,n,i;for(this.item=App[this.genericObject].find(this.id),this.head=this.pageData.head||this.pageData.object,e=clone(App[this.genericObject].configure_attributes),n=0,i=e.length;n<i;n++)t=e[n],"name"===t.name&&(t.disabled=!0);return console.log("configure_attributes",e),this.controller=new App.ControllerForm({model:{configure_attributes:e},params:this.item,screen:this.screen||"edit",autofocus:!0}),this.controller.form},e.prototype.onSubmit=function(t){var e,n,i,r,o,a;if(n=this.formParam(t.target),n=s(t,n),n.screens&&n.screens.create_middle){i=n.screens.create_middle;for(r in i)a=i[r],a.item_class="column"}return n.object=this.pageData.head,this.item.load(n),(e=this.item.validate())?(this.log("error",e),this.formValidate({form:t.target,errors:e}),!1):(this.formDisable(t),o=this,this.item.save({done:function(){var t;return o.callback&&(t=App[o.genericObject].fullLocal(this.id),o.callback(t)),o.close()},fail:function(e,n){return o.log("errors"),o.formEnable(t),o.controller.showAlert(n.error_human||n.error||"Unable to update object!")}}))},e}(App.ControllerGenericEdit),App.Config.set("SystemObject",{prio:1700,parent:"#system",name:"Objects",target:"#system/object_manager",controller:e,permission:["admin.object"]},"NavBarAdmin")}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.OrganizationHistory=function(n){function i(){return this.fetch=t(this.fetch,this),i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.fetch=function(){return this.ajax({id:"organization_history",type:"GET",url:this.apiPath+"/organizations/history/"+this.organization_id,success:function(t){return function(e){return App.Collection.loadAssets(e.assets),t.items=e.history,t.render()}}(this)})},i}(App.GenericHistory)}.call(this),function(){var t,e,n,i,s,r=function(t,e){return function(){return t.apply(e,arguments)}},o=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;App.OrganizationProfile=function(e){function s(){this.currentPosition=r(this.currentPosition,this),this.setPosition=r(this.setPosition,this),this.render=r(this.render,this),this.show=r(this.show,this),this.url=r(this.url,this),this.meta=r(this.meta,this),s.__super__.constructor.apply(this,arguments),this.authenticateCheckRedirect(),App.Organization.full(this.organization_id,this.render)}return o(s,e),s.prototype.meta=function(){var t,e;return t={url:this.url(),id:this.organization_id},App.Organization.exists(this.organization_id)&&(e=App.Organization.find(this.organization_id),t.head=e.displayName(),t.title=e.displayName(),t.iconClass=e.icon()),t},s.prototype.url=function(){return"#organization/profile/"+this.organization_id},s.prototype.show=function(){return App.OnlineNotification.seen("Organization",this.organization_id),this.navupdate({url:"#",type:"menu"})},s.prototype.changed=function(){return!1},s.prototype.render=function(e){var s;return this.doNotLog||(this.doNotLog=1,this.recentView("Organization",this.organization_id)),s=$(App.view("organization_profile/index")({organization:e})),new i({object_id:e.id,el:s.find(".js-name")}),new n({el:s.find(".js-object-container"),object_id:e.id,taskKey:this.taskKey}),new t({el:s.find(".js-action"),object_id:e.id}),new App.TicketStats({el:s.find(".js-ticket-stats"),organization:e}),this.html(s),new App.UpdateTastbar({genericObject:e})},s.prototype.setPosition=function(t){return this.$(".profile").scrollTop(t)},s.prototype.currentPosition=function(){return this.$(".profile").scrollTop()},s}(App.Controller),t=function(t){function e(){return this.actions=r(this.actions,this),this.editOrganization=r(this.editOrganization,this),this.showHistory=r(this.showHistory,this),e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.model="Organization",e.prototype.observe={member_ids:!0},e.prototype.showHistory=function(t){return new App.OrganizationHistory({organization_id:t.id,container:this.el.closest(".content")})},e.prototype.editOrganization=function(t){return new App.ControllerGenericEdit({id:t.id,genericObject:"Organization",screen:"edit",pageData:{title:"Organizations",object:"Organization",objects:"Organizations"},container:this.el.closest(".content")})},e.prototype.actions=function(){return[{name:"edit",title:"Edit",callback:this.editOrganization},{name:"history",title:"History",callback:this.showHistory}]},e}(App.ObserverActionRow),n=function(t){function n(){return this.update=r(this.update,this),this.render=r(this.render,this),n.__super__.constructor.apply(this,arguments)}return o(n,t),n.prototype.model="Organization",n.prototype.observeNot={cid:!0,created_at:!0,created_by_id:!0,updated_at:!0,updated_by_id:!0,preferences:!0,source:!0,image_source:!0},n.prototype.events={"focusout [contenteditable]":"update"},n.prototype.render=function(t){var n,i,s,r,o,a,l,c,u,p,h,d;App.TaskManager.touch(this.taskKey),u=[],p=App.Organization.attributesGet("view");for(i in p)n=p[i],l=i,c=l.substr(0,l.length-3),c in t&&(l=c),(t[l]||"richtext"===n.tag)&&n.shown&&"name"!==l&&u.push(n);for(this.html(App.view("organization_profile/object")({organization:t,organizationData:u})),this.$("[contenteditable]").ce({mode:"textonly",multiline:!0,maxlength:250}),a=[],h=t.member_ids,r=0,o=h.length;r<o;r++)d=h[r],s=$("<div></div>"),new e({object_id:d,el:s}),a.push(s);return this.$(".js-userList").html(a)},n.prototype.update=function(t){var e,n,i,s;if(n=$(t.target).attr("data-name"),s=$(t.target).html(),i=App.Organization.find(this.object_id),i[n]!==s)return this.lastAttributres[n]=s,e={},e[n]=s,i.updateAttributes(e),this.log("debug","update",n,s,i)},n}(App.ObserverController),i=function(t){function e(){return this.render=r(this.render,this),e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.model="Organization",e.prototype.observe={name:!0},e.prototype.render=function(t){return this.html(App.Utils.htmlEscape(t.displayName()))},e}(App.ObserverController),e=function(t){function e(){return this.render=r(this.render,this),e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.model="User",e.prototype.observe={firstname:!0,lastname:!0,login:!0,email:!0,active:!0},e.prototype.globalRerender=!1,e.prototype.render=function(t){return this.html(App.view("organization_profile/member")({user:t}))},e}(App.ObserverController),s=function(t){function e(t){var n;e.__super__.constructor.apply(this,arguments),n={organization_id:t.organization_id},App.TaskManager.execute({key:"Organization-"+this.organization_id,controller:"OrganizationProfile",params:n,show:!0})}return o(e,t),e.prototype.requiredPermission="ticket.agent",e}(App.ControllerPermanent),App.Config.set("organization/profile/:organization_id",s,"Routes")}.call(this),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(){n.__super__.constructor.apply(this,arguments),new App.ControllerGenericIndex({el:this.el,id:this.id,genericObject:"Organization",importCallback:function(){return new App.Import({baseUrl:"/api/v1/organizations",container:this.el.closest(".content")})},pageData:{home:"organizations",object:"Organization",objects:"Organizations",navupdate:"#organizations",notes:["Organizations are for any person in the system. Agents (Owners, Resposbiles, ...) and Customers."],buttons:[{name:"Import","data-type":"import","class":"btn"},{name:"New Organization","data-type":"new","class":"btn--success"}]},container:this.el.closest(".content")})}return e(n,t),n.prototype.requiredPermission="admin.organization",n.prototype.header="Organizations",n}(App.ControllerSubContent),App.Config.set("Organization",{prio:2e3,name:"Organizations",parent:"#manage",target:"#manage/organizations",controller:t,permission:["admin.organization"]},"NavBarAdmin")}.call(this),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(){var t,e,i,s;for(n.__super__.constructor.apply(this,arguments),s=App.Overview.configure_attributes,e=0,i=s.length;e<i;e++)t=s[e],"group_by"===t.name&&(t.options=App.Overview.groupByAttributes());new App.ControllerGenericIndex({el:this.el,id:this.id,genericObject:"Overview",defaultSortBy:"prio",pageData:{home:"overviews",object:"Overview",objects:"Overviews",navupdate:"#overviews",notes:["Overview are ..."],buttons:[{name:"New Overview","data-type":"new","class":"btn--success"}]},container:this.el.closest(".content"),large:!0,dndCallback:function(t){return function(e,n){var i,s,r,o,a,l;for(s=t.el.find("table > tbody > tr"),l=[],a=0,r=0,o=s.length;r<o;r++)n=s[r],a+=1,i=$(n).data("id"),l.push([i,a]);return t.ajax({id:"overview_prio",type:"POST",url:t.apiPath+"/overviews_prio",processData:!0,data:JSON.stringify({prios:l})})}}(this)})}return e(n,t),n.prototype.requiredPermission="admin.overview",n.prototype.header="Overviews",n}(App.ControllerSubContent),App.Config.set("Overview",{prio:2300,name:"Overviews",parent:"#manage",target:"#manage/overviews",controller:t,permission:["admin.overview"]},"NavBarAdmin")}.call(this),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(){n.__super__.constructor.apply(this,arguments),this.load()}return e(n,t),n.prototype.requiredPermission="admin.package",n.prototype.header="Packages",n.prototype.events={"click .action":"action"},n.prototype.load=function(){return this.ajax({id:"packages",type:"GET",url:this.apiPath+"/packages",processData:!0,success:function(t){return function(e){return t.packages=e.packages,t.render()}}(this)})},n.prototype.render=function(){var t,e,n,i;for(i=this.packages,t=0,n=i.length;t<n;t++)e=i[t],e.action=[],"installed"===e.state?e.action=["uninstall"]:"uninstalled"===e.state?e.action=["install"]:"deactivate"===e.state&&(e.action=["uninstall","activate"]);return this.html(App.view("package")({head:"Dashboard",packages:this.packages}))},n.prototype.action=function(t){var e,n,i;if(t.preventDefault(),n=$(t.target).parents("[data-id]").data("id"),i=$(t.target).data("type"),"uninstall"===i&&(e="DELETE"),e)return this.ajax({id:"packages",type:e,url:this.apiPath+"/packages",data:JSON.stringify({id:n}),processData:!1,success:function(t){return function(){return t.load()}}(this)})},n}(App.ControllerSubContent),App.Config.set("Packages",{prio:3700,name:"Packages",parent:"#system",target:"#system/package",controller:t,permission:["admin.package"]},"NavBarAdmin")}.call(this),function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;t=function(t){function e(){return this.success=n(this.success,this),e.__super__.constructor.apply(this,arguments),this.Config.get("user_lost_password")?this.authenticateCheck()?void this.navigate("#"):(this.navHide(),this.title("Reset Password"),this.navupdate("#password_reset"),void this.render()):void this.navigate("#")}return i(e,t),e.prototype.events={"submit form":"submit","click .submit":"submit","click .retry":"retry"},e.prototype.render=function(t){var e;return e=[{name:"username",display:"Enter your username or email address",tag:"input",type:"text",limit:100,"null":!1,"class":"input span4"}],this.html(App.view("password/reset")(t)),this.form=new App.ControllerForm({el:this.el.find(".form-password-item"),model:{configure_attributes:e},autofocus:!0})},e.prototype.retry=function(t){return t.preventDefault(),this.render()},e.prototype.submit=function(t){var e;return t.preventDefault(),e=this.formParam(t.target),this.formDisable(t),this.ajax({id:"password_reset",type:"POST",url:this.apiPath+"/users/password_reset",data:JSON.stringify(e),processData:!0,success:this.success})},e.prototype.success=function(t){var e;return"ok"===t.message?(t.token&&!0===this.Config.get("developer_mode")&&(e=function(e){return function(){return e.navigate("#password_reset_verify/"+t.token)}}(this),this.delay(e,2e3)),this.render({sent:!0})):(this.$("[name=username]").val(""),this.notify({type:"error",msg:App.i18n.translateContent("Username or email address invalid, please try again.")}),this.formEnable(this.el.find(".form-password")))},e}(App.ControllerContent),App.Config.set("password_reset",t,"Routes"),e=function(t){function e(){this.renderChanged=n(this.renderChanged,this),this.renderChange=n(this.renderChange,this);var t;return e.__super__.constructor.apply(this,arguments),this.Config.get("user_lost_password")?this.authenticateCheck()?void this.navigate("#"):(this.navHide(),this.title("Reset Password"),this.navupdate("#password_reset_verify"),t={token:this.token},void this.ajax({id:"password_reset_verify",type:"POST",url:this.apiPath+"/users/password_reset_verify",data:JSON.stringify(t),processData:!0,success:this.renderChange})):void this.navigate("#")}return i(e,t),e.prototype.events={"submit form":"submit","click .submit":"submit"},e.prototype.renderChange=function(t){var e;return"ok"===t.message?(e=[{name:"password",display:"Password",tag:"input",type:"password",limit:100,"null":!1,"class":"input"}],this.html(App.view("password/reset_change")()),new App.ControllerForm({el:this.el.find(".form-password-change"),model:{configure_attributes:e},autofocus:!0})):this.html(App.view("password/reset_failed")({head:"Reset Password failed!",message:"Token is invalid!"}))},e.prototype.submit=function(t){var e;return t.preventDefault(),e=this.formParam(t.target),e.token=this.token,this.password=e.password,this.formDisable(t),e.password_confirm!==e.password?(this.formEnable(t),this.$("[name=password]").val(""),this.$("[name=password_confirm]").val(""),void this.notify({type:"error",msg:"Can't update password, your new passwords do not match. Please try again!",removeAll:!0})):e.password?this.ajax({id:"password_reset_verify",type:"POST",url:this.apiPath+"/users/password_reset_verify",data:JSON.stringify(e),processData:!0,success:this.renderChanged}):(this.formEnable(t),void this.notify({type:"error",msg:"Please supply your new password!",removeAll:!0}))},e.prototype.renderChanged=function(t){return"ok"===t.message?App.Auth.login({data:{username:t.user_login,password:this.password},success:function(t){return function(){return App.Auth.loginCheck(),t.notify({type:"success",msg:"Woo hoo! Your password has been changed!",removeAll:!0}),t.navigate("#")}}(this),error:function(t){return function(){return t.formEnable(t.$("form")),t.notify({type:"error",msg:"Something went wrong. Please contact your administrator.",removeAll:!0})}}(this)}):(t.notice?this.notify({type:"error",msg:App.i18n.translateContent(t.notice[0],t.notice[1]),removeAll:!0}):this.notify({type:"error",msg:"Unable to set password. Please contact your administrator.",removeAll:!0}),this.formEnable(this.$("form")))},e}(App.ControllerContent),App.Config.set("password_reset_verify/:token",e,"Routes")}.call(this),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.Profile=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.authenticateRequired=!0,n.prototype.configKey="NavBarProfile",n}(App.ControllerNavSidbar),t=function(t){function n(t){n.__super__.constructor.apply(this,arguments),this.authenticateCheckRedirect(),App.TaskManager.execute({key:"Profile",controller:"Profile",params:t,show:!0,persistent:!0})}return e(n,t),n.prototype.requiredPermission=["user_preferences.*"],n}(App.ControllerPermanent),App.Config.set("profile",t,"Routes"),App.Config.set("profile/:target",t,"Routes"),App.Config.set("Profile",{prio:1e3,name:"Profile",target:"#profile"},"NavBarProfile"),App.Config.set("Profile",{prio:1700,parent:"#current_user",name:"Profile",target:"#profile",translate:!0},"NavBarRight")}.call(this),function(){var t,e,n,i,s,r,o=function(t,e){return function(){return t.apply(e,arguments)}},a=function(t,e){function n(){this.constructor=t}for(var i in e)l.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},l={}.hasOwnProperty;n=function(t){function n(){this.render=o(this.render,this),this.storeParams=o(this.storeParams,this),this.getParams=o(this.getParams,this),n.__super__.constructor.apply(this,arguments),this.title("Reporting"),this.navupdate("#report"),this.startLoading(),this.ajax({type:"GET",url:this.apiPath+"/reports/config",processData:!0,success:function(t){return function(e){return t.stopLoading(),e.error?void t.renderScreenError({detail:e.error,objectName:"Report"}):(t.config=e.config,App.Collection.load({type:"ReportProfile",data:e.profiles}),t.render())}}(this)})}return a(n,t),n.prototype.requiredPermission="report",n.prototype.getParams=function(){var t,e,n,i,s,r,o,a,l,c,u,p,h,d,f,g,m,v;if(this.params)return this.params;if(this.params={},h=App.SessionStorage.get("report::params"))return this.params=h,this.params;if(this.params.timeRange="year",n=new Date,i=n.getDate(),s=n.getMonth()+1,o=n.getFullYear(),r=n.getWeek(),this.params.day=i,this.params.month=s,this.params.week=r,this.params.year=o,!this.params.metric){f=this.config.metric;for(c in f)e=f[c],e["default"]&&(this.params.metric=e.name)}if(!this.params.backendSelected){this.params.backendSelected={},g=this.config.metric;for(c in g)for(e=g[c],m=e.backend,a=0,u=m.length;a<u;a++)t=m[a],t.selected&&(this.params.backendSelected[t.name]=!0)}if(!this.params.profileSelected)for(this.params.profileSelected={},v=App.ReportProfile.all(),l=0,p=v.length;l<p;l++)d=v[l],_.isEmpty(this.params.profileSelected)&&(this.params.profileSelected[d.id]=!0);return this.params},n.prototype.storeParams=function(){return App.SessionStorage.set("report::params",this.params)},n.prototype.render=function(t){return null==t&&(t={}),this.params=this.getParams(),this.html(App.view("report/main")({params:this.params})),new r({el:this.el.find(".js-timeRangePicker"),params:this.params,ui:this}),new s({el:this.el.find(".js-timePicker"),params:this.params,ui:this}),new i({el:this.el.find(".js-aside"),config:this.config,params:this.params,ui:this}),new e({el:this.el,config:this.config,params:this.params,ui:this})},n}(App.ControllerContent),e=function(e){function n(){this.draw=o(this.draw,this),this.render=o(this.render,this),this.update=o(this.update,this),n.__super__.constructor.apply(this,arguments),this.bind("ui:report:rerender",function(t){return function(){return t.render()}}(this)),this.render()}return a(n,e),n.prototype.update=function(e){var n,i,s,r,o;n={},s=e.data;for(i in s)o=s[i],!0===this.params.backendSelected[i]&&(n[i]=o),this.ui.storeParams();if(this.lastNewData||(this.lastNewData={}),!this.lastNewData||JSON.stringify(n)!==JSON.stringify(this.lastNewData))return this.lastNewData=n,this.draw(n),r=new Date,this.el.find("#download-chart").html(r.toString()),this.downloadWidget?this.downloadWidget.update({config:this.config,params:this.params,ui:this.ui}):this.downloadWidget=new t({el:this.el.find(".js-dataDownload"),config:this.config,params:this.params,ui:this.ui})},n.prototype.render=function(){var t,e;return e=this.apiPath+"/reports/generate",t=3e5,"year"===this.params.timeRange&&(t=3e5),"month"===this.params.timeRange&&(t=6e4),"week"===this.params.timeRange&&(t=5e4),"day"===this.params.timeRange&&(t=3e4),"realtime"===this.params.timeRange&&(t=1e4),this.ajax({id:"report_graph",type:"POST",url:e,data:JSON.stringify({metric:this.params.metric,year:this.params.year,month:this.params.month,week:this.params.week,day:this.params.day,timeRange:this.params.timeRange,profiles:this.params.profileSelected,backends:this.params.backendSelected}),processData:!0,success:function(e){return function(n){return e.update(n),e.delay(e.render,t,"report-update","page")}}(this)})},n.prototype.draw=function(t){var e,n,i,s,r,o,a,l,c,u,p,h,d,f,g,m,v,y,b;if(this.log("draw",t),$("#placeholder").empty(),b=[],
"realtime"===this.params.timeRange)for(f=a=0;a<=59;f=++a)b.push([f,""]);else if("day"===this.params.timeRange)for(o=l=0;l<=23;o=++l)b.push([o,o+1]);else if("month"===this.params.timeRange)for(r=u=0;u<=30;r=++u)b.push([r,r+1]);else b="week"===this.params.timeRange?[[0,"Mon"],[1,"Tue"],[2,"Wed"],[3,"Thr"],[4,"Fri"],[5,"Sat"],[6,"Sun"]]:[[0,"Jan"],[1,"Feb"],[2,"Mar"],[3,"Apr"],[4,"Mai"],[5,"Jun"],[6,"Jul"],[7,"Aug"],[8,"Sep"],[9,"Oct"],[10,"Nov"],[11,"Dec"]];s=[];for(c in t){if(y=t[c],m=c,this.config.metric[this.params.metric])for(v=this.config.metric[this.params.metric].backend,d=0,p=v.length;d<p;d++)e=v[d],e.name===c&&(m=e.display);for(n=[],i=0,g=0,h=b.length;g<h;g++)b[g],n.push([i,y[i]]),i+=1;s.push({data:n,label:App.i18n.translateInline(m)})}return $.plot($("#placeholder"),s,{yaxis:{min:0},xaxis:{ticks:b}})},n}(App.ControllerContent),t=function(t){function e(t){this.tableUpdate=o(this.tableUpdate,this),this.tableRender=o(this.tableRender,this),this.render=o(this.render,this),this.update=o(this.update,this),this.selectBackend=o(this.selectBackend,this),t.el.unbind("click .js-dataDownloadBackendSelector"),e.__super__.constructor.apply(this,arguments),this.render()}return a(e,t),e.prototype.events={"click .js-dataDownloadBackendSelector":"selectBackend"},e.prototype.selectBackend=function(t){return t.preventDefault(),this.el.find(".js-dataDownloadBackendSelector").parent().removeClass("active"),$(t.target).parent().addClass("active"),this.profileSelectedId=$(t.target).data("profile-id"),this.params.downloadBackendSelected=$(t.target).data("backend"),this.ui.storeParams(),this.table=!1,this.render()},e.prototype.update=function(){return this.render()},e.prototype.render=function(){var t,e,n,i,s,r,o,a,l;if(this.contentRendered||(this.contentRendered=!0,this.html(App.view("report/download_content")())),l=[],this.config.metric[this.params.metric]){for(o=this.config.metric[this.params.metric].backend,n=0,s=o.length;n<s;n++)t=o[n],t.dataDownload&&!this.params.downloadBackendSelected&&(this.params.downloadBackendSelected=t.name);this.ui.storeParams()}r=[],a=this.params.profileSelected;for(i in a)a[i]&&(this.profileSelectedId||(this.profileSelectedId=i),r.push(App.ReportProfile.find(i)));return e=App.view("report/download_header")({reports:l,profiles:r,downloadBackendSelected:this.params.downloadBackendSelected,metric:this.config.metric[this.params.metric]}),e!==this.downloadHeaderHtml&&(this.el.find(".js-dataDownloadHeader").html(e),this.downloadHeaderHtml=e),this.tableUpdate()},e.prototype.tableRender=function(t,e){var n,i,s,r,o,a,l,c,u,p;if(_.isEmpty(t))return this.$(".js-dataDownloadButton").html(""),void this.$(".js-dataDownloadTable").html("");u=0,p=this.params.profileSelected;for(a in p)p[a]&&(u=a);return o=this.apiPath+"/reports/sets?sheet=true;metric="+this.params.metric+";year="+this.params.year+";month="+this.params.month+";week="+this.params.week+";day="+this.params.day+";timeRange="+this.params.timeRange+";profile_id="+u+";downloadBackendSelected="+this.params.downloadBackendSelected,this.$(".js-dataDownloadButton").html(App.view("report/download_button")({count:e,downloadUrl:o})),l=function(t){return function(e){var n;return n=App.Ticket.findNative(e),t.navigate(n.uiUrl())}}(this),r=function(t,e,n){return n.title=e.title,t},s=function(t,e,n){return n.link=e.uiUrl(),t},i=function(t){var e;return e={name:"icon",display:"",translation:!1,width:"28px",displayWidth:28,unresizable:!0},t.unshift(0),t[0]=e,t},n=function(t,e,n){return t=" ",n["class"]=e.iconClass(),n.link="",n.title=e.iconTitle(),t},c={el:this.el.find(".js-dataDownloadTable"),model:App.Ticket,objects:t,overviewAttributes:["number","title","state","group","created_at"],bindRow:{events:{click:l}},callbackHeader:[i],callbackAttributes:{icon:[n],title:[s,r],number:[s,r]}},this.table?this.table.update({objects:t}):this.table=new App.ControllerTable(c)},e.prototype.tableUpdate=function(){return this.ajax({id:"report_download",type:"POST",url:this.apiPath+"/reports/sets",data:JSON.stringify({metric:this.params.metric,year:this.params.year,month:this.params.month,week:this.params.week,day:this.params.day,timeRange:this.params.timeRange,profiles:this.params.profileSelected,backends:this.params.backendSelected,downloadBackendSelected:this.params.downloadBackendSelected}),processData:!0,success:function(t){return function(e){var n,i,s,r,o,a;if(App.Collection.loadAssets(e.assets),a=[],e.ticket_ids)for(r=e.ticket_ids,n=0,i=r.length;n<i;n++)s=r[n],o=App.Ticket.fullLocal(s),a.push(o);return t.tableRender(a,e.count)}}(this)})},e}(App.Controller),r=function(t){function e(){this.select=o(this.select,this),this.render=o(this.render,this),e.__super__.constructor.apply(this,arguments),this.bind("ui:report:rerender",function(t){return function(){return t.render()}}(this)),this.render()}return a(e,t),e.prototype.events={"click .js-timeRange":"select"},e.prototype.render=function(){return this.html(App.view("report/time_range_picker")()),this.el.find(".js-timeRange").removeClass("active"),this.el.find('.js-timeRange[data-type="'+this.ui.params.timeRange+'"]').addClass("active")},e.prototype.select=function(t){return t.preventDefault(),this.ui.params.timeRange=$(t.target).data("type"),App.Event.trigger("ui:report:rerender")},e}(App.Controller),s=function(t){function e(){this.selectTimeYear=o(this.selectTimeYear,this),this.selectTimeWeek=o(this.selectTimeWeek,this),this.selectTimeMonth=o(this.selectTimeMonth,this),this.selectTimeDay=o(this.selectTimeDay,this),this.render=o(this.render,this),e.__super__.constructor.apply(this,arguments),this._timeSlotPicker(),this.bind("ui:report:rerender",function(t){return function(){return t.render()}}(this)),this.render()}return a(e,t),e.prototype.events={"click .js-timePickerDay":"selectTimeDay","click .js-timePickerYear":"selectTimeYear","click .js-timePickerMonth":"selectTimeMonth","click .js-timePickerWeek":"selectTimeWeek"},e.prototype.render=function(){return this.html(App.view("report/time_picker")({params:this.ui.params,timeRangeDay:this.timeRangeDay,timeRangeMonth:this.timeRangeMonth,timeRangeWeek:this.timeRangeWeek,timeRangeYear:this.timeRangeYear})),this.el.find(".time-slot").removeClass("active"),this.el.find('.time-slot[data-type="'+this.ui.params.timeRange+'"]').addClass("active")},e.prototype.selectTimeDay=function(t){return t.preventDefault(),this.ui.params.day=$(t.target).data("type"),$(t.target).parent().parent().find("li").removeClass("active"),$(t.target).parent().addClass("active"),App.Event.trigger("ui:report:rerender"),this.ui.storeParams()},e.prototype.selectTimeMonth=function(t){return t.preventDefault(),this.ui.params.month=$(t.target).data("type"),$(t.target).parent().parent().find("li").removeClass("active"),$(t.target).parent().addClass("active"),App.Event.trigger("ui:report:rerender"),this.ui.storeParams()},e.prototype.selectTimeWeek=function(t){return t.preventDefault(),this.ui.params.week=$(t.target).data("type"),$(t.target).parent().parent().find("li").removeClass("active"),$(t.target).parent().addClass("active"),App.Event.trigger("ui:report:rerender"),this.ui.storeParams()},e.prototype.selectTimeYear=function(t){return t.preventDefault(),this.ui.params.year=$(t.target).data("type"),$(t.target).parent().parent().find("li").removeClass("active"),$(t.target).parent().addClass("active"),App.Event.trigger("ui:report:rerender"),this.ui.storeParams()},e.prototype._timeSlotPicker=function(){var t,e,n,i,s,r,o,a,l;for(this.timeRangeYear=[],l=(new Date).getFullYear(),t=e=r=l-2,o=l;r<=o?e<=o:e>=o;t=r<=o?++e:--e)s={display:t,value:t},this.timeRangeYear.push(s);for(this.timeRangeMonth=[{display:"Jan",value:1},{display:"Feb",value:2},{display:"Mar",value:3},{display:"Apr",value:4},{display:"Mai",value:5},{display:"Jun",value:6},{display:"Jul",value:7},{display:"Aug",value:8},{display:"Sep",value:9},{display:"Oct",value:10},{display:"Nov",value:11},{display:"Dec",value:12}],this.timeRangeWeek=[],t=n=1;n<=52;t=++n)s={display:t,value:t},this.timeRangeWeek.push(s);for(this.timeRangeDay=[],a=[],t=i=1;i<=31;t=++i)s={display:t,value:t},a.push(this.timeRangeDay.push(s));return a},e}(App.Controller),i=function(t){function e(){this.selectBackend=o(this.selectBackend,this),this.selectProfile=o(this.selectProfile,this),this.selectMetric=o(this.selectMetric,this),this.render=o(this.render,this),e.__super__.constructor.apply(this,arguments),this.render()}return a(e,t),e.prototype.events={"click .js-profileSelector":"selectProfile","click .js-backendSelector":"selectBackend","click .panel-heading":"selectMetric"},e.prototype.render=function(){var t,e;return t=this.config.metric,e=App.ReportProfile.all(),this.html(App.view("report/sidebar")({metrics:t,params:this.params,profiles:e}))},e.prototype.selectMetric=function(t){var e;if(!$(t.target).closest(".panel").find(".collapse.in").get(0)&&(e=$(t.target).closest(".panel").data("metric"),this.params.metric!==e))return this.params.metric=e,App.Event.trigger("ui:report:rerender"),this.ui.storeParams()},e.prototype.selectProfile=function(t){var e,n,i;n=$(t.target).val(),i=this.params.profileSelected;for(e in i)i[e],delete this.params.profileSelected[e];return this.params.profileSelected[n]=!0,App.Event.trigger("ui:report:rerender"),this.ui.storeParams()},e.prototype.selectBackend=function(t){var e,n;return n=$(t.target).val(),e=$(t.target).prop("checked"),e?this.params.backendSelected[n]=!0:delete this.params.backendSelected[n],App.Event.trigger("ui:report:rerender"),this.ui.storeParams()},e}(App.Controller),App.Config.set("report",n,"Routes"),App.Config.set("Reporting",{prio:8e3,parent:"",name:"Reporting",translate:!0,target:"#report",icon:"report",permission:["report"]},"NavBarRight")}.call(this),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(){n.__super__.constructor.apply(this,arguments),new App.ControllerGenericIndex({el:this.el,id:this.id,genericObject:"ReportProfile",pageData:{home:"report_profiles",object:"Report Profile",objects:"Report Profiles",navupdate:"#report_profiles",notes:[],buttons:[{name:"New Profile","data-type":"new","class":"primary"}]},container:this.el.closest(".content")})}return e(n,t),n.prototype.requiredPermission="admin.report_profile",n.prototype.header="Report Profile",n}(App.ControllerSubContent),App.Config.set("ReportProfile",{prio:8e3,name:"Report Profiles",parent:"#manage",target:"#manage/report_profiles",controller:t,permission:["admin.report_profile"]},"NavBarAdmin")}.call(this),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(){n.__super__.constructor.apply(this,arguments),new App.ControllerGenericIndex({el:this.el,id:this.id,genericObject:"Role",pageData:{home:"roles",object:"Role",objects:"Roles",navupdate:"#roles",notes:["Roles are ..."],buttons:[{name:"New Role","data-type":"new","class":"btn--success"}]},container:this.el.closest(".content")})}return e(n,t),n.prototype.requiredPermission="admin.role",n.prototype.header="Roles",n}(App.ControllerSubContent),App.Config.set("Role",{prio:1600,name:"Roles",parent:"#manage",target:"#manage/roles",controller:t,permission:["admin.role"]},"NavBarAdmin")}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var s in e)i.call(e,s)&&(t[s]=e[s]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;App.Search=function(t){function i(){this.updateTask=e(this.updateTask,this),this.renderTab=e(this.renderTab,this),this.showTab=e(this.showTab,this),this.renderResult=e(this.renderResult,this),this.search=e(this.search,this),this.empty=e(this.empty,this),this.listNavigate=e(this.listNavigate,this),this.show=e(this.show,this),this.meta=e(this.meta,this);var t;i.__super__.constructor.apply(this,arguments),this.authenticateCheckRedirect(),t=App.TaskManager.get(this.taskKey).state,t&&t.query&&(this.query=t.query),App.TaskManager.touch(this.taskKey),this.throttledSearch=_.throttle(this.search,200),this.globalSearch=new App.GlobalSearch({render:this.renderResult,limit:50}),this.render(),this.bind("ui:rerender",function(t){return function(){return t.render()}}(this))}return n(i,t),i.prototype.elements={".js-search":"searchInput"},i.prototype.events={"click .js-emptySearch":"empty","submit form.search-holder":"preventDefault","keyup .js-search":"listNavigate","click .js-tab":"showTab","input .js-search":"updateFilledClass"},i.prototype.meta=function(){var t;return t=this.query?App.Utils.htmlEscape(this.query):App.i18n.translateInline("Extended Search"),{url:this.url(),id:"",head:t,title:t,iconClass:"searchdetail"}},i.prototype.url=function(){return"#search"},i.prototype.show=function(t){if(this.navupdate({url:"#search",type:"menu"}),!_.isEmpty(t.query)&&(this.$(".js-search").val(t.query).trigger("change"),!this.shown))return this.throttledSearch(!0)},i.prototype.hide=function(){return this.shown=!1},i.prototype.changed=function(){},i.prototype.render=function(){var t,e,n,i,s,r;for(t=App.TaskManager.get(this.taskKey).state,this.query||t&&t.query&&(this.query=t.query),this.model||(t&&t.model?this.model=t.model:this.model="Ticket"),this.tabs=[],s=App.Config.get("models_searchable"),e=0,n=s.length;e<n;e++)i=s[e],i=i.replace(/::/,""),r={name:i,model:i,count:0,active:!1},this.model===i&&(r.active=!0),this.tabs.push(r);if(this.html(App.view("search/index")({query:this.query,tabs:this.tabs})),this.query)return this.throttledSearch(!0)},i.prototype.listNavigate=function(t){return 27===t.keyCode?void this.empty():this.throttledSearch(200)},i.prototype.empty=function(){return this.searchInput.val(""),this.query="",this.updateFilledClass(),this.updateTask(),this.delay(this.anyPopoversDestroy,100,"removePopovers")},i.prototype.search=function(t){var e;if(null==t&&(t=!1),e=this.searchInput.val().trim(),!t){if(!e)return;if(e===this.query)return}return this.query=e,this.updateTask(),this.globalSearch.search({query:this.query})},i.prototype.renderResult=function(t){var e,n,i,s,r,o;for(null==t&&(t=[]),this.result=t,s=this.tabs,r=[],n=0,i=s.length;n<i;n++)o=s[n],e=0,t[o.model]&&(e=t[o.model].length),this.model===o.model&&this.renderTab(o.model,t[o.model]||[]),r.push(this.$(".js-tab"+o.model+" .js-counter").text(e));return r},i.prototype.showTab=function(t){var e,n;return n=$(t.currentTarget).closest(".tabs"),e=$(t.currentTarget).data("tab-content"),n.find(".js-tab").removeClass("active"),$(t.currentTarget).addClass("active"),this.renderTab(e,this.result[e]||[])},i.prototype.renderTab=function(t,e){var n,i,s,r,o,a,l,c,u;for(this.model!==t&&(this.model=t,this.updateTask()),a=[],n=0,r=e.length;n<r;n++)i=e[n],l=App[t].fullLocal(i.id),a.push(l);if("Ticket"===t){for(u=[],s=0,o=e.length;s<o;s++)i=e[s],u.push(i.id);return new App.TicketList({tableId:"find_"+t,el:this.$(".js-content"),columns:["number","title","customer","group","owner","created_at"],ticket_ids:u,radio:!1})}return c=function(t){return function(e){return l=App[t.model].fullLocal(e),t.navigate(l.uiUrl())}}(this),new App.ControllerTable({tableId:"find_"+t,el:this.$(".js-content"),model:App[t],objects:a,bindRow:{events:{click:c}}})},i.prototype.updateTask=function(){var t;if(t=App.TaskManager.get(this.taskKey).state)return t.query=this.query,t.model=this.model,App.TaskManager.update(this.taskKey,{state:t}),App.TaskManager.touch(this.taskKey)},i.prototype.updateFilledClass=function(){return this.searchInput.toggleClass("is-empty",!this.searchInput.val())},i}(App.Controller),t=function(t){function e(t){var n,i;e.__super__.constructor.apply(this,arguments),i=void 0,_.isEmpty(t.query)||(i=decodeURIComponent(t.query)),n={query:i},App.TaskManager.execute({key:"Search",controller:"Search",params:n,show:!0})}return n(e,t),e}(App.ControllerPermanent),App.Config.set("search",t,"Routes"),App.Config.set("search/:query",t,"Routes")}.call(this),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(){n.__super__.constructor.apply(this,arguments),this.load(),this.interval(function(t){return function(){return t.load()}}(this),45e3)}return e(n,t),n.prototype.requiredPermission="admin.session",n.prototype.header="Sessions",n.prototype.events={"click .js-delete":"destroy"},n.prototype.load=function(){return this.startLoading(),this.ajax({id:"sessions",type:"GET",url:this.apiPath+"/sessions",success:function(t){return function(e){return t.stopLoading(),App.Collection.loadAssets(e.assets),t.sessions=e.sessions,t.render()}}(this)})},n.prototype.render=function(){var t,e,n,i;for(n=this.sessions,t=0,e=n.length;t<e;t++)i=n[t],i.data&&i.data.user_id&&(i.data.user=App.User.find(i.data.user_id));return this.html(App.view("session")({sessions:this.sessions}))},n.prototype.destroy=function(t){var e;return t.preventDefault(),e=$(t.target).closest("a").data("session-id"),this.ajax({id:"sessions/"+e,type:"DELETE",url:this.apiPath+"/sessions/"+e,success:function(t){return function(){return t.load()}}(this)})},n}(App.ControllerSubContent),App.Config.set("Session",{prio:3800,name:"Sessions",parent:"#system",target:"#system/sessions",controller:t,permission:["admin.session"]},"NavBarAdmin")}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var s in e)i.call(e,s)&&(t[s]=e[s]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;t=function(t){function i(){if(this.error=e(this.error,this),this.success=e(this.success,this),this.submit=e(this.submit,this),i.__super__.constructor.apply(this,arguments),!this.Config.get("user_create_account"))return void this.navigate("#");this.navHide(),this.title("Sign up"),this.navupdate("#signup"),this.render()}return n(i,t),i.prototype.events={"submit form":"submit","click .submit":"submit","click .cancel":"cancel"},i.prototype.render=function(){return this.html(App.view("signup")()),this.form=new App.ControllerForm({el:this.el.find("form"),model:App.User,screen:"signup",autofocus:!0})},i.prototype.cancel=function(){return this.navigate("#login")},i.prototype.submit=function(t){var e,n;return t.preventDefault(),this.formDisable(t),this.params=this.formParam(t.target),!this.params.login&&this.params.email&&(this.params.login=this.params.email),this.params.signup=!0,this.params.role_ids=[],this.log("notice","updateAttributes",this.params),n=new App.User,n.load(this.params),e=n.validate({screen:"signup"}),e?(this.log("error new",e),this.formValidate({form:t.target,errors:e}),this.formEnable(t),!1):n.save({done:function(t){return function(){return App.Auth.login({data:{username:t.params.login,password:t.params.password},success:t.success,error:t.error})}}(this),fail:function(e){return function(n,i){return e.formEnable(t),e.form.showAlert(i.error_human||i.error||"Unable to update object!")}}(this)})},i.prototype.success=function(){return App.Auth.loginCheck(),this.notify({type:"success",msg:App.i18n.translateContent('Thanks for joining. Email sent to "%s". Please verify your email address.',this.params.email),removeAll:!0}),this.navigate("#")},i.prototype.error=function(t){var e,n;return n=t.responseText,e={},_.isEmpty(n)||(e=JSON.parse(n)),this.notify({type:"error",msg:App.i18n.translateContent(e.error||"Wrong Username or Password combination."),removeAll:!0})},i}(App.ControllerContent),App.Config.set("signup",t,"Routes")}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var s in e)i.call(e,s)&&(t[s]=e[s]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;t=function(t){function i(){this.description=e(this.description,this),this["delete"]=e(this["delete"],this),this.release=e(this.release,this),this.render=e(this.render,this);var t;i.__super__.constructor.apply(this,arguments),this.subscribeCalendarId=App.Calendar.subscribe(this.render),this.subscribeSlaId=App.Sla.subscribe(this.render),t=function(t){return function(){return t.stopLoading(),t.render()}}(this),this.startLoading(),App.Sla.fetchFull(t,{clear:!0})}return n(i,t),i.prototype.requiredPermission="admin.sla",i.prototype.header="SLAs",i.prototype.events={"click .js-new":"new","click .js-edit":"edit","click .js-delete":"delete","click .js-description":"description"},i.prototype.render=function(){var t,e,n,i,s,r;for(r=App.Sla.search({sortBy:"name"}),e=0,n=r.length;e<n;e++)s=r[e],s.first_response_time&&(s.first_response_time_in_text=this.toText(s.first_response_time)),s.update_time&&(s.update_time_in_text=this.toText(s.update_time)),s.solution_time&&(s.solution_time_in_text=this.toText(s.solution_time)),s.rules=App.UiElement.ticket_selector.humanText(s.condition),s.calendar=App.Calendar.find(s.calendar_id);return i=!1,App.Sla.description&&(_.isEmpty(r)?t=marked(App.Sla.description):i=!0),this.html(App.view("sla/index")({slas:r,showDescription:i,description:t}))},i.prototype.release=function(){if(this.subscribeCalendarId&&App.Calendar.unsubscribe(this.subscribeCalendarId),this.subscribeSlaId)return App.Sla.unsubscribe(this.subscribeSlaId)},i.prototype["new"]=function(t){return t.preventDefault(),new App.ControllerGenericNew({pageData:{title:"SLAs",object:"SLA",objects:"SLAs"},genericObject:"Sla",container:this.el.closest(".content"),callback:this.load,large:!0})},i.prototype.edit=function(t){var e;return t.preventDefault(),e=$(t.target).closest(".action").data("id"),new App.ControllerGenericEdit({id:e,pageData:{title:"SLAs",object:"Sla",objects:"SLAs"},genericObject:"Sla",callback:this.load,container:this.el.closest(".content"),large:!0})},i.prototype["delete"]=function(t){var e,n;return t.preventDefault(),e=$(t.target).closest(".action").data("id"),n=App.Sla.find(e),new App.ControllerGenericDestroyConfirm({item:n,container:this.el.closest(".content"),callback:this.load})},i.prototype.description=function(){return new App.ControllerGenericDescription({description:App.Calendar.description,container:this.el.closest(".content")})},i.prototype.toText=function(t){var e,n;if(t=parseInt(t))return n=t%60,e=Math.floor(t/60),n<10&&(n="0"+n),e<10&&(e="0"+e),e+":"+n},i}(App.ControllerSubContent),App.Config.set("Sla",{prio:2900,name:"SLAs",parent:"#manage",target:"#manage/slas",controller:t,permission:["admin.sla"]},"NavBarAdmin")}.call(this),function(){var t,e,n,i,s=function(t,e){return function(){return t.apply(e,arguments)}},r=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;n=function(t){function e(){this.create=s(this.create,this),this.setTagNew=s(this.setTagNew,this),this.render=s(this.render,this),this.release=s(this.release,this),e.__super__.constructor.apply(this,arguments),this.subscribeId=App.Setting.subscribe(this.render,{initFetch:!0,clear:!1})}return r(e,t),e.prototype.requiredPermission="admin.tag",e.prototype.header="Tags",e.prototype.events={"change .js-newTagSetting input":"setTagNew","submit .js-create":"create"},e.prototype.elements={".js-newTagSetting input":"tagNewSetting"},e.prototype.release=function(){return App.Setting.unsubscribe(this.subscribeId)},e.prototype.render=function(){var t;if((t=this.Config.get("tag_new")||!0)!==this.lastNewTagSetting)return this.lastNewTagSetting=t,this.html(App.view("tag/index")()),new i({el:this.$(".js-Table")})},e.prototype.setTagNew=function(){var t;return t=this.tagNewSetting.prop("checked"),App.Setting.set("tag_new",t)},e.prototype.create=function(t){var e,n;if(t.preventDefault(),e=$(t.currentTarget).find("input[name]"),n=e.val().trim())return this.ajax({type:"POST",url:this.apiPath+"/tag_list",data:JSON.stringify({name:n}),success:function(t){return function(){return e.val(""),new i({el:t.$(".js-Table")})}}(this)})},e}(App.ControllerSubContent),i=function(n){function i(){this.edit=s(this.edit,this),this.render=s(this.render,this),this.load=s(this.load,this),i.__super__.constructor.apply(this,arguments),this.load()}return r(i,n),i.prototype.events={"click .js-delete":"destroy","click .js-edit":"edit","click .js-search":"search"},i.prototype.load=function(){return this.ajax({id:"tag_admin_list",type:"GET",url:this.apiPath+"/tag_list",processData:!0,success:function(t){return function(e){return t.render(e)}}(this)})},i.prototype.render=function(t){return this.html(App.view("tag/table")({list:t}))},i.prototype.edit=function(t){var n,i,s;return t.preventDefault(),s=$(t.currentTarget).closest("tr"),i=s.find(".js-name").text(),n=s.data("id"),new e({id:n,name:i,callback:this.load})},i.prototype.destroy=function(e){var n,i;return e.preventDefault(),e.stopPropagation(),i=$(e.currentTarget).closest("tr"),n=i.data("id"),new t({id:n,row:i})},i.prototype.search=function(t){var e;return t.preventDefault(),t.stopPropagation(),e=$(t.target).closest("tr").find(".js-name").text(),App.GlobalSearchWidget.search(e,"tags")},i}(App.Controller),e=function(t){function e(){return this.onSubmit=s(this.onSubmit,this),e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.buttonClose=!0,e.prototype.buttonCancel=!0,e.prototype.buttonSubmit="Submit",e.prototype.head="Edit",e.prototype.small=!0,e.prototype.content=function(){return App.view("tag/edit")({id:this.id,name:this.name})},e.prototype.onSubmit=function(t){var e;return t.preventDefault(),e=this.formParam(t.target),this.ajax({id:"tag_admin_list",type:"PUT",url:this.apiPath+"/tag_list/"+this.id,data:JSON.stringify({id:this.id,name:e.name}),success:function(t){return function(){return t.callback(),t.close()}}(this)})},e}(App.ControllerModal),t=function(t){function e(){return this.onSubmit=s(this.onSubmit,this),e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.buttonClose=!0,e.prototype.buttonCancel=!0,e.prototype.buttonSubmit="yes",e.prototype.buttonClass="btn--danger",e.prototype.head="Confirm",e.prototype.small=!0,e.prototype.content=function(){return App.i18n.translateContent("Sure to delete this object?")},e.prototype.onSubmit=function(){return this.ajax({id:"tag_admin_list",type:"DELETE",url:this.apiPath+"/tag_list/"+this.id,processData:!0,success:function(t){return function(){return t.row.remove(),t.close()}}(this)})},e}(App.ControllerModal),App.Config.set("Tags",{prio:2320,name:"Tags",parent:"#manage",target:"#manage/tags",controller:n,permission:["admin.tag"]},"NavBarAdmin")}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var s in e)i.call(e,s)&&(t[s]=e[s]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;App.TaskbarWidget=function(i){function s(){this.remove=e(this.remove,this),this.location=e(this.location,this);var t;s.__super__.constructor.apply(this,arguments),t={tolerance:"pointer",distance:15,opacity:.6,forcePlaceholderSize:!0,items:"> a",update:function(t){return function(){var e,n,i,s,r,o;for(i=t.el.find("> a"),o=[],e=0,r=i.length;e<r;e++){if(n=i[e],!(s=$(n).data("key")))throw"No such key attributes found for task item";o.push(s)}return App.TaskManager.reorder(o)}}(this)},this.el.sortable(t),this.bind("taskInit",function(t){return function(){return t.queue.push(["renderAll"]),t.uIRunner()}}(this)),this.bind("taskUpdate",function(t){return function(e){return t.queue.push(["change",e]),t.uIRunner()}}(this)),this.bind("taskRemove",function(t){return function(e){return t.queue.push(["destroy",e]),t.uIRunner()}}(this)),this.bind("taskCollectionOrderSet",function(t){return function(e){return t.collectionOrderSet(e)}}(this))}return n(s,i),s.prototype.events={"click .js-close":"remove","click .js-locationVerify":"location"},s.prototype.model=!1,s.prototype.template="widget/task_item",s.prototype.uniqKey="key",s.prototype.observe={meta:!0,active:!0,notify:!0},s.prototype.itemGet=function(t){return App.TaskManager.get(t)},s.prototype.itemDestroy=function(t){return App.TaskManager.remove(t)},s.prototype.itemsAll=function(){return App.TaskManager.allWithMeta()},s.prototype.location=function(t){if($(t.currentTarget).hasClass("is-modified"))return this.locationVerify(t)},s.prototype.remove=function(e,n,i){var s,r,o,a,l,c,u,p;if(null==n&&(n=!1),null==i&&(i=!1),e.preventDefault(),e.stopPropagation(),n||(n=$(e.target).parents("a").data("key")),!n)throw"No such key attributes found for task item";if(p=App.TaskManager.worker(n),!i&&p&&p.changed&&p.changed())return void new t({key:n,ui:this,event:e});for(r=App.TaskManager.get(n),u=App.TaskManager.all(),s=!1,o=0,a=u.length;o<a;o++)c=u[o],r.active&&c.key===n&&(s=!0);return App.TaskManager.remove(n),s?(l=App.TaskManager.nextTaskUrl(),l?void this.navigate(l):this.navigate("#")):void 0},s}(App.CollectionController),t=function(t){function i(){return this.onSubmit=e(this.onSubmit,this),i.__super__.constructor.apply(this,arguments)}return n(i,t),i.prototype.buttonClose=!0,i.prototype.buttonCancel=!0,i.prototype.buttonSubmit="Discard Changes",i.prototype.buttonClass="btn--danger",i.prototype.head="Confirm",i.prototype.content=function(){return App.i18n.translateContent("Tab has changed, do you really want to close it?")},i.prototype.onSubmit=function(){return this.close(),this.ui.remove(this.event,this.key,!0)},i}(App.ControllerModal)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.TestController1=function(n){function i(){this.active=t(this.active,this),this.hide=t(this.hide,this),this.show=t(this.show,this),i.__super__.constructor.apply(this,arguments),this.showState=!1,this.hideState=!1,this.activeState=!1,this.render()}return e(i,n),i.prototype.meta=function(){return{}},i.prototype.show=function(){return this.showState=!0,this.render()},i.prototype.hide=function(){return this.hideState=!0,this.render()},i.prototype.active=function(t){return this.activeState=t,this.render()},i.prototype.render=function(){return this.html("<div>some test controller message:'"+this.message+"',show:'"+this.showState+"',hide:'"+this.hideState+"',active:'"+this.activeState+"'</div>")},i.prototype.url=function(){return"#/some/url/"+this.message},i}(App.Controller)}.call(this),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(){n.__super__.constructor.apply(this,arguments),new App.ControllerGenericIndex({el:this.el,id:this.id,genericObject:"TextModule",importCallback:function(){return new App.Import({baseUrl:"/api/v1/text_modules",container:this.el.closest(".content"),deleteOption:!0})},pageData:{home:"text_modules",object:"TextModule",objects:"Text modules",navupdate:"#text_modules",notes:["Text modules are ..."],buttons:[{name:"Import","data-type":"import","class":"btn"},{name:"New text module","data-type":"new","class":"btn--success"}]},container:this.el.closest(".content")})}return e(n,t),n.prototype.requiredPermission="admin.text_module",n.prototype.header="Text modules",n}(App.ControllerSubContent),App.Config.set("TextModule",{prio:2300,name:"Text modules",parent:"#manage",target:"#manage/text_modules",controller:t,permission:["admin.text_module"]},"NavBarAdmin")}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.TicketCustomer=function(n){function i(){return this.onSubmit=t(this.onSubmit,this),i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.buttonClose=!0,i.prototype.buttonCancel=!0,i.prototype.buttonSubmit=!0,i.prototype.head="Change Customer",i.prototype.content=function(){var t,e;return t=[{name:"customer_id",display:"Customer",tag:"user_autocompletion","null":!1,placeholder:"Enter Person or Organization/Company",minLengt:2,disableCreateObject:!1}],e=new App.ControllerForm({model:{configure_attributes:t},autofocus:!0}),e.form},i.prototype.onSubmit=function(t){var e,n,i,s
;return i=this.formParam(t.target),s=App.Ticket.find(this.ticket_id),s.customer_id=i.customer_id,n=s.validate(),_.isEmpty(n)?(this.customer_id=i.customer_id,e=function(t){return function(){return t.close(),s=App.Ticket.find(t.ticket_id),s.article=void 0,s.updateAttributes({customer_id:t.customer_id})}}(this),App.User.full(this.customer_id,e)):(this.log("error",n),void this.formValidate({form:t.target,errors:n}))},i}(App.ControllerModal)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.TicketHistory=function(n){function i(){return this.fetch=t(this.fetch,this),i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.fetch=function(){return this.ajax({id:"ticket_history",type:"GET",url:this.apiPath+"/ticket_history/"+this.ticket_id,success:function(t){return function(e){return App.Collection.loadAssets(e.assets),t.items=e.history,t.render()}}(this)})},i}(App.GenericHistory)}.call(this),function(){var t,e,n,i,s=function(t,e){return function(){return t.apply(e,arguments)}},r=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;App.TicketOverview=function(t){function i(){this.listNavigate=s(this.listNavigate,this),this.keyboardOn=s(this.keyboardOn,this),this.release=s(this.release,this),this.currentPosition=s(this.currentPosition,this),this.setPosition=s(this.setPosition,this),this.hide=s(this.hide,this),this.show=s(this.show,this),this.url=s(this.url,this),this.active=s(this.active,this),this.renderOptionsMacros=s(this.renderOptionsMacros,this),this.renderOptionsGroups=s(this.renderOptionsGroups,this),this.renderOptions=s(this.renderOptions,this),this.renderBatchOverlay=s(this.renderBatchOverlay,this),this.blinkBatchEntry=s(this.blinkBatchEntry,this),this.highlightBatchEntryAtMousePosition=s(this.highlightBatchEntryAtMousePosition,this),this.showBatchAssignGroup=s(this.showBatchAssignGroup,this),this.controlBatchOverlay=s(this.controlBatchOverlay,this),this.endDragItem=s(this.endDragItem,this),this.dragItem=s(this.dragItem,this),this.startDragItem=s(this.startDragItem,this);var t;i.__super__.constructor.apply(this,arguments),this.batchSupport=this.permissionCheck("ticket.agent"),this.render(),this.bind("ui:rerender",function(t){return function(){return t.renderBatchOverlay()}}(this)),t=function(t){return function(e){return App.Collection.loadAssets(e.assets),t.formMeta=e.form_meta}}(this),this.bindId=App.TicketCreateCollection.bind(t)}return r(i,t),i.prototype.className="overviews",i.prototype.activeFocus="nav",i.prototype.mouse={x:null,y:null},i.prototype.batchAnimationPaused=!1,i.prototype.elements={".js-batch-overlay":"batchOverlay",".js-batch-overlay-backdrop":"batchOverlayBackdrop",".js-batch-cancel":"batchCancel",".js-batch-macro-circle":"batchMacroCircle",".js-batch-assign-circle":"batchAssignCircle",".js-batch-assign":"batchAssign",".js-batch-assign-inner":"batchAssignInner",".js-batch-assign-group":"batchAssignGroup",".js-batch-assign-group-name":"batchAssignGroupName",".js-batch-assign-group-inner":"batchAssignGroupInner",".js-batch-macro":"batchMacro",".main":"mainContent"},i.prototype.events={"mousedown .item":"startDragItem","mouseenter .js-batch-hover-target":"highlightBatchEntry","mouseleave .js-batch-hover-target":"unhighlightBatchEntry"},i.prototype.startDragItem=function(t){var e;if(this.batchSupport)return this.grabbedItem=$(t.currentTarget),e=this.grabbedItem.offset(),this.batchDragger=$(App.view("ticket_overview/batch_dragger")()),this.grabbedItemClone=this.grabbedItem.clone(),this.grabbedItemClone.data("offset",this.grabbedItem.offset()),this.grabbedItemClone.addClass("batch-dragger-item js-main-item"),this.batchDragger.append(this.grabbedItemClone),this.batchDragger.data({startX:t.pageX,startY:t.pageY,dx:Math.min(t.pageX-e.left,180),dy:t.pageY-e.top,moved:!1}),$(document).on("mousemove.item",this.dragItem),$(document).one("mouseup.item",this.endDragItem)},i.prototype.dragItem=function(t){var e,n,i,s,r,o,a;if(s=this.batchDragger.data(),r=3,o=t.pageX-s.dx,a=t.pageY-s.dy,i=t.pageY>s.startY?1:-1,!s.moved){if(!(Math.abs(t.pageY-s.startY)>r||Math.abs(t.pageX-s.startX)>r))return;this.batchDragger.data("moved",!0),this.el.addClass("u-no-userselect"),this.grabbedItemWasntChecked=!this.grabbedItem.find('[name="bulk"]').prop("checked"),this.grabbedItem.find('[name="bulk"]').prop("checked",!0),this.grabbedItemClone.find('[name="bulk"]').prop("checked",!0),e=this.el.find('[name="bulk"]:checked').parents(".item").not(this.grabbedItem),n=e.clone(),this.draggedItems=this.grabbedItemClone.add(n),n.each(function(t){return $(this).data("offset",e.eq(t).offset())}),this.batchDragger.prepend(n.addClass("batch-dragger-item").get().reverse()),n.length&&this.batchDragger.find(".js-batch-dragger-count").text(this.draggedItems.length),this.renderOptions(),$("#app").append(this.batchDragger),this.draggedItems.each(function(t,e){var n,i;return n=$(e).data("offset").left-$(e).offset().left-o,i=$(e).data("offset").top-$(e).offset().top-a,$.Velocity.hook(e,"translateX",n+"px"),$.Velocity.hook(e,"translateY",i+"px")}),this.alignDraggedItems(-i),this.mouseY=t.pageY,this.showBatchOverlay()}return t.preventDefault(),$.Velocity.hook(this.batchDragger,"translateX",o+"px"),$.Velocity.hook(this.batchDragger,"translateY",a+"px")},i.prototype.endDragItem=function(){var t;return $(document).off("mousemove.item"),$(document).off("mouseup.item"),t=this.batchDragger.data(),this.clearDelay("clear-hovered-batch-entry"),this.hoveredBatchEntry?($.Velocity.hook(this.batchDragger,"transformOriginX",t.dx+"px"),$.Velocity.hook(this.batchDragger,"transformOriginY",t.dy+"px"),this.hoveredBatchEntry.velocity({properties:{scale:1.1},options:{duration:200,complete:function(t){return function(){return t.hoveredBatchEntry?t.hoveredBatchEntry.velocity("reverse",{duration:200,complete:function(){var e,n,i,s;return t.hoveredBatchEntry?(e=t.hoveredBatchEntry.attr("data-action"),i=t.hoveredBatchEntry.attr("data-id"),n=t.hoveredBatchEntry.attr("data-group-id"),s=t.el.find('[name="bulk"]:checked'),t.hoveredBatchEntry.removeAttr("style"),t.cleanUpDrag(!0),t.performBatchAction(s,e,i,n)):void t.cleanUpDrag()}}):void t.cleanUpDrag()}}(this)}}),this.batchDragger.velocity({properties:{scale:0},options:{duration:200}})):void this.cleanUpDrag()},i.prototype.cancelDrag=function(){return $(document).off("mousemove.item"),$(document).off("mouseup.item"),this.cleanUpDrag()},i.prototype.cleanUpDrag=function(t){if(this.hideBatchOverlay(),this.el.removeClass("u-no-userselect"),$(".batch-dragger").remove(),this.hoveredBatchEntry=null,this.grabbedItemWasntChecked&&this.grabbedItem.find('[name="bulk"]').prop("checked",!1),t)return this.el.find('[name="bulk"]:checked').prop("checked",!1),this.el.find('[name="bulk_all"]').prop("checked",!1)},i.prototype.alignDraggedItems=function(t){return this.draggedItems.velocity({properties:{translateX:0,translateY:function(e){return function(n){return t*n*e.batchDragger.height()/2}}(this)},options:{easing:"ease-in-out",duration:300}}),this.batchDragger.find(".js-batch-dragger-count").velocity({properties:{translateY:t<0?0:8-this.batchDragger.height()},options:{easing:"ease-in-out",duration:300}})},i.prototype.performBatchAction=function(t,e,n,i){var s,r,o,a,l,c,u,p,h;if("macro"!==e)if("user_assign"!==e){if("group_assign"===e)for(this.batchCount=t.length,this.batchCountIndex=0,a=0,u=t.length;a<u;a++)s=t[a],h=App.Ticket.find($(s).val()),h.group_id=n,h.save({done:function(t){return function(){if(++t.batchCountIndex===t.batchCount)return App.Event.trigger("overview:fetch")}}(this)})}else for(this.batchCount=t.length,this.batchCountIndex=0,o=0,c=t.length;o<c;o++)s=t[o],h=App.Ticket.find($(s).val()),h.owner_id=n,_.isEmpty(i)||(h.group_id=i),h.save({done:function(t){return function(){if(++t.batchCountIndex===t.batchCount)return App.Event.trigger("overview:fetch")}}(this)});else for(this.batchCount=t.length,this.batchCountIndex=0,p=App.Macro.find(n),r=0,l=t.length;r<l;r++)s=t[r],h=App.Ticket.find($(s).val()),App.Ticket.macro({macro:p.perform,ticket:h}),h.save({done:function(t){return function(){if(++t.batchCountIndex===t.batchCount)return App.Event.trigger("overview:fetch")}}(this)})},i.prototype.showBatchOverlay=function(){return this.batchOverlay.addClass("is-visible"),$("html").css("overflow","hidden"),this.batchOverlayBackdrop.velocity({opacity:[1,0]},{duration:500}),this.batchMacroOffset=this.batchMacro.offset().top+this.batchMacro.outerHeight(),this.batchAssignOffset=this.batchAssign.offset().top,this.batchOverlayShown=!0,$(document).on("mousemove.batchoverlay",this.controlBatchOverlay)},i.prototype.hideBatchOverlay=function(){if($(document).off("mousemove.batchoverlay"),this.batchOverlayShown=!1,this.batchOverlayBackdrop.velocity({opacity:[0,1]},{duration:300,queue:!1}),this.hideBatchCircles(function(t){return function(){return t.batchOverlay.removeClass("is-visible")}}(this)),$("html").css("overflow",""),this.batchAssignShown&&this.hideBatchAssign(),this.batchMacroShown&&this.hideBatchMacro(),this.batchAssignGroupShown)return this.hideBatchAssignGroup()},i.prototype.controlBatchOverlay=function(t){if(!this.batchAnimationPaused){if(this.mouse.x=t.pageX,this.mouse.y=t.pageY,this.batchAssignGroupShown&&void 0!==this.batchAssignGroupOffset)return void(this.mouse.y<this.batchAssignGroupOffset&&(this.hideBatchAssignGroup(),this.batchAnimationPaused=!0));switch(this.mouse.y<=this.batchMacroOffset?"top":this.mouse.y>this.batchMacroOffset&&this.mouse.y<=this.batchAssignOffset?"middle":"bottom"){case"top":if(!this.batchMacroShown)return this.hideBatchCircles(),this.showBatchMacro(),this.alignDraggedItems(1);break;case"middle":if(this.batchAssignShown&&this.hideBatchAssign(),this.batchMacroShown&&this.hideBatchMacro(),!this.batchCirclesShown)return this.showBatchCircles();break;case"bottom":if(!this.batchAssignShown)return this.hideBatchCircles(),this.showBatchAssign(),this.alignDraggedItems(-1)}}},i.prototype.showBatchCircles=function(){return this.batchCirclesShown=!0,this.batchMacroCircle.velocity({properties:{translateY:[0,"-150%"],opacity:[1,0]},options:{easing:[1,-.55,.2,1.37],duration:500,visibility:"visible",delay:200}}),this.batchAssignCircle.velocity({properties:{translateY:[0,"150%"],opacity:[1,0]},options:{easing:[1,-.55,.2,1.37],duration:500,visibility:"visible",delay:200}})},i.prototype.hideBatchCircles=function(t){return this.batchMacroCircle.velocity({properties:{translateY:["-150%",0],opacity:[0,1]},options:{duration:300,visibility:"hidden",queue:!1}}),this.batchAssignCircle.velocity({properties:{translateY:["150%",0],opacity:[0,1]},options:{duration:300,complete:t,visibility:"hidden",queue:!1}}),this.batchCirclesShown=!1},i.prototype.showBatchAssign=function(){if(this.batchOverlayShown)return this.batchAssignShown=!0,this.batchCancel.css({top:0,bottom:this.batchAssign.height()}),this.batchAssign.velocity({properties:{translateY:[0,"100%"],opacity:[1,0]},options:{easing:[1,-.55,.2,1.37],duration:500,visibility:"visible",complete:this.highlightBatchEntryAtMousePosition}}),this.batchCancel.velocity({properties:{translateY:[0,"100%"],opacity:[1,0]},options:{easing:[1,-.55,.2,1.37],duration:500,visibility:"visible"}})},i.prototype.hideBatchAssign=function(){return this.batchAssign.velocity({properties:{translateY:["100%",0],opacity:[0,1]},options:{duration:300,visibility:"hidden",queue:!1,complete:function(t){return function(){return $.Velocity.hook(t.batchAssign,"translateY","0%")}}(this)}}),this.batchCancel.velocity({properties:{translateY:["100%",0],opacity:[0,1]},options:{duration:300,visibility:"hidden",queue:!1}}),this.batchAssignShown=!1},i.prototype.showBatchAssignGroup=function(){var t,e;if(this.batchOverlayShown)return this.batchAssignGroupShown=!0,e=this.hoveredBatchEntry.attr("data-id"),t=App.Group.find(e),this.batchAssignGroupName.text(t.displayName()),this.batchAssignGroupInner.html($(App.view("ticket_overview/batch_overlay_user_group")({users:this.usersInGroups([e]),groups:[],groupId:e}))),this.batchAssignGroupInner.height(this.batchAssignInner.height()),this.batchAssignGroup.velocity({properties:{translateY:[0,"100%"],opacity:[1,0]},options:{easing:[1,-.55,.2,1.37],duration:700,visibility:"visible",complete:function(t){return function(){return t.highlightBatchEntryAtMousePosition(),t.batchAssignGroupOffset=t.batchAssignGroup.offset().top}}(this)}})},i.prototype.hideBatchAssignGroup=function(){return this.batchAssignGroup.velocity({properties:{translateY:["100%",0],opacity:[0,1]},options:{duration:300,visibility:"hidden",queue:!1,complete:function(t){return function(){return t.batchAssignGroupShown=!1,t.batchAssignGroupHovered=!1,setTimeout(function(){return t.batchAnimationPaused=!1},1e3)}}(this)}}),this.batchAssignGroupOffset=void 0},i.prototype.showBatchMacro=function(){if(this.batchOverlayShown)return this.batchMacroShown=!0,this.batchCancel.css({bottom:0,top:this.batchMacro.height()}),this.batchMacro.velocity({properties:{translateY:[0,"-100%"],opacity:[1,0]},options:{easing:[1,-.55,.2,1.37],duration:500,visibility:"visible",complete:this.highlightBatchEntryAtMousePosition}}),this.batchCancel.velocity({properties:{translateY:[0,"-100%"],opacity:[1,0]},options:{easing:[1,-.55,.2,1.37],duration:500,visibility:"visible"}})},i.prototype.hideBatchMacro=function(){return this.batchMacro.velocity({properties:{translateY:["-100%",0],opacity:[0,1]},options:{duration:300,visibility:"hidden",queue:!1,complete:function(t){return function(){return $.Velocity.hook(t.batchMacro,"translateY","0%")}}(this)}}),this.batchCancel.velocity({properties:{translateY:["-100%",0],opacity:[0,1]},options:{duration:300,visibility:"hidden",queue:!1}}),this.batchMacroShown=!1},i.prototype.highlightBatchEntryAtMousePosition=function(){var t;if(t=$(document.elementFromPoint(this.mouse.x,this.mouse.y)).closest(".js-batch-overlay-entry .avatar"),t.length)return this.hoveredBatchEntry=t.closest(".js-batch-overlay-entry").addClass("is-hovered")},i.prototype.highlightBatchEntry=function(t){if(this.clearDelay("clear-hovered-batch-entry"),this.hoveredBatchEntry=$(t.currentTarget).closest(".js-batch-overlay-entry").addClass("is-hovered"),"group_assign"===this.hoveredBatchEntry.attr("data-action"))return this.batchAssignGroupHintTimeout=setTimeout(this.blinkBatchEntry,800),this.batchAssignGroupTimeout=setTimeout(this.showBatchAssignGroup,900)},i.prototype.unhighlightBatchEntry=function(){var t;if(this.hoveredBatchEntry)return"group_assign"===this.hoveredBatchEntry.attr("data-action")&&(this.batchAssignGroupTimeout&&clearTimeout(this.batchAssignGroupTimeout),this.batchAssignGroupHintTimeout&&clearTimeout(this.batchAssignGroupHintTimeout)),this.hoveredBatchEntry.removeClass("is-hovered"),t=function(t){return function(){return t.hoveredBatchEntry=null}}(this),this.delay(t,800,"clear-hovered-batch-entry")},i.prototype.blinkBatchEntry=function(){return this.hoveredBatchEntry.velocity({opacity:[.5,1]},{duration:120}).velocity({opacity:[1,.5]},{duration:60,delay:40}).velocity({opacity:[.5,1]},{duration:120}).velocity({opacity:[1,.5]},{duration:60,delay:40})},i.prototype.usersInGroups=function(t){var e,n,i,s,r;return e=_.chain(null!=(i=this.formMeta)&&null!=(s=i.dependencies)?s.group_id:void 0).pick(t).values().map(function(t){return t.owner_id}).value(),n=_.intersection.apply(_,e),r=App.User.findAll(n),_.sortBy(r,function(t){return t.firstname})},i.prototype.render=function(){var t;return t=$(App.view("ticket_overview/index")()),this.navBarControllerVertical=new e({el:t.find(".overview-header"),view:this.view,vertical:!0}),this.navBarController=new e({el:t.filter(".sidebar"),view:this.view}),this.contentController=new n({el:t.find(".overview-table"),view:this.view,keyboardOn:this.keyboardOn,keyboardOff:this.keyboardOff}),this.renderBatchOverlay(t.filter(".js-batch-overlay")),this.html(t),this.el.find(".main").on("click",function(t){return function(){return t.activeFocus="overview"}}(this)),this.el.find(".sidebar").on("click",function(t){return function(){return t.activeFocus="nav"}}(this)),this.bind("overview:fetch",function(t){return function(){var e;if(t.view)return e=function(){return App.OverviewListCollection.fetch(t.view)},t.delay(e,2800,"overview:fetch")}}(this))},i.prototype.renderBatchOverlay=function(t){return t?void t.html(App.view("ticket_overview/batch_overlay")()):(this.batchOverlay.html(App.view("ticket_overview/batch_overlay")()),this.refreshElements())},i.prototype.renderOptions=function(){return this.renderOptionsGroups(),this.renderOptionsMacros()},i.prototype.renderOptionsGroups=function(){var t,e,n,i,s,r,o,a,l,c,u,p,h,d,f,g;for(s=this.el.find('[name="bulk"]:checked'),f=_.map(s,function(t){return $(t).val()}),d=_.map(App.Ticket.findAll(f),function(t){return t.group_id}),g=this.usersInGroups(d),e=_.keys(null!=(a=this.formMeta)&&null!=(l=a.dependencies)?l.group_id:void 0),n=App.Group.findAll(e),i=_.sortBy(n,function(t){return t.name}),r=0,o=n.length;r<o;r++)t=n[r],t.valid_users_count=(null!=(c=this.formMeta)&&null!=(u=c.dependencies)&&null!=(p=u.group_id)&&null!=(h=p[t.id])?h.owner_id.length:void 0)||0;return this.batchAssignInner.html($(App.view("ticket_overview/batch_overlay_user_group")({users:g,groups:i})))},i.prototype.renderOptionsMacros=function(){var t;return t=App.Macro.search({filter:{active:!0},sortBy:"name",order:"DESC"}),this.batchMacro.html($(App.view("ticket_overview/batch_overlay_macro")({macros:t})))},i.prototype.active=function(t){return void 0===t?this.shown:this.shown=t},i.prototype.url=function(){return"#ticket/view/"+this.view},i.prototype.show=function(t){return this.keyboardOn(),this.navupdate("#ticket/view"),this.view=t.view,!this.view&&this.viewLast?void this.navigate("ticket/view/"+this.viewLast,!0):(this.navBarController&&this.navBarController.update({view:this.view,activeState:!0}),this.navBarControllerVertical&&this.navBarControllerVertical.update({view:this.view,activeState:!0}),this.viewLast!==this.view?(this.viewLast=this.view,this.contentController=new n({el:this.$(".overview-table"),view:this.view,keyboardOn:this.keyboardOn,keyboardOff:this.keyboardOff})):void 0)},i.prototype.hide=function(){if(this.keyboardOff(),this.navBarController&&this.navBarController.active(!1),this.navBarControllerVertical)return this.navBarControllerVertical.active(!1)},i.prototype.setPosition=function(t){return this.$(".main").scrollTop(t)},i.prototype.currentPosition=function(){return this.$(".main").scrollTop()},i.prototype.changed=function(){return!1},i.prototype.release=function(){return this.keyboardOff(),i.__super__.release.apply(this,arguments),App.TicketCreateCollection.unbindById(this.bindId)},i.prototype.keyboardOn=function(){return $(window).off("keydown.overview_navigation"),$(window).on("keydown.overview_navigation",this.listNavigate)},i.prototype.keyboardOff=function(){return $(window).off("keydown.overview_navigation")},i.prototype.listNavigate=function(t){var e;if(!$(t.target).is("textarea, input, select"))if(38===t.keyCode)t.preventDefault(),this.nudge(t,-1);else if(40===t.keyCode)t.preventDefault(),this.nudge(t,1);else if(32===t.keyCode){if(t.preventDefault(),"overview"===this.activeFocus)return this.$(".table-overview table tbody tr.is-hover td.js-checkbox-field label input").first().click()}else{if(9===t.keyCode)return t.preventDefault(),"nav"===this.activeFocus?(this.activeFocus="overview",this.nudge(t,1)):this.activeFocus="nav";if(13===t.keyCode&&"overview"===this.activeFocus&&(e=this.$(".table-overview table tbody tr.is-hover a").first().attr("href")))return this.navigate(e)}},i.prototype.nudge=function(t,e){var n,i,s,r,o;if("overview"===this.activeFocus){if(i=this.$(".table-overview table tbody"),n=i.find("tr.is-hover"),!n.size())return void i.find("tr").first().addClass("is-hover");if(1===e?(r=n.next("tr"),r.size()&&(n.removeClass("is-hover"),r.addClass("is-hover"))):(o=n.prev("tr"),o.size()&&(n.removeClass("is-hover"),o.addClass("is-hover"))),r&&this.scrollToIfNeeded(r,!0),o)return this.scrollToIfNeeded(o,!0)}else{if(i=this.$(".sidebar"),n=i.find("li.active"),!n.size())return void((s=i.find("li a").first().attr("href"))&&this.navigate(s));if(1===e?(r=n.next("li"),r.size()&&this.navigate(r.find("a").attr("href"))):(o=n.prev("li"),o.size()&&this.navigate(o.find("a").attr("href"))),r&&this.scrollToIfNeeded(r,!0),o)return this.scrollToIfNeeded(o,!0)}},i}(App.Controller),e=function(t){function e(){this.render=s(this.render,this),this.active=s(this.active,this),this.autoFoldTabs=s(this.autoFoldTabs,this),this.release=s(this.release,this),this.activate=s(this.activate,this),this.onDropdownHide=s(this.onDropdownHide,this),this.onDropdownShow=s(this.onDropdownShow,this),e.__super__.constructor.apply(this,arguments),this.bindId=App.OverviewIndexCollection.bind(this.render),this.bind("ui:rerender",function(t){return function(){return t.render(App.OverviewIndexCollection.get())}}(this)),this.vertical&&$(window).on("resize.navbar",this.autoFoldTabs)}return r(e,t),e.prototype.elements={".js-tabsHolder":"tabsHolder",".js-tabsClone":"clone",".js-tabClone":"tabClone",".js-tabs":"tabs",".js-tab":"tab",".js-dropdown":"dropdown",".js-toggle":"dropdownToggle",".js-dropdownItem":"dropdownItem"},e.prototype.events={"click .js-tab":"activate","click .js-dropdownItem":"navigateTo","hide.bs.dropdown":"onDropdownHide","show.bs.dropdown":"onDropdownShow"},e.prototype.navigateTo=function(t){return location.hash=$(t.currentTarget).attr("data-target")},e.prototype.onDropdownShow=function(){return this.dropdownToggle.addClass("active")},e.prototype.onDropdownHide=function(){return this.dropdownToggle.removeClass("active")},e.prototype.activate=function(t){return this.tab.removeClass("active"),$(t.currentTarget).addClass("active")},e.prototype.release=function(){return this.vertical&&$(window).off("resize.navbar",this.autoFoldTabs),App.OverviewIndexCollection.unbindById(this.bindId)},e.prototype.autoFoldTabs=function(){var t;for(t=App.OverviewIndexCollection.get(),this.html(App.view("agent_ticket_view/navbar"+(this.vertical?"_vertical":void 0))({items:t,isAgent:this.permissionCheck("ticket.agent")}));this.clone.width()>this.tabsHolder.width();)this.tabClone.not(".hide").last().addClass("hide"),this.tab.not(".hide").last().addClass("hide"),this.dropdownItem.filter(".hide").last().removeClass("hide");if(0===this.dropdownItem.not(".hide").size())return this.dropdown.remove(),this.dropdownToggle.remove()},e.prototype.active=function(t){return this.activeState=t},e.prototype.update=function(t){var e,n;null==t&&(t={});for(e in t)n=t[e],this[e]=n;return this.render(App.OverviewIndexCollection.get())},e.prototype.render=function(t){var e,n,i,s,r,o,a;if(t){if(e=this.el.closest(".content"),_.isArray(t)&&_.isEmpty(t))return e.find(".sidebar").addClass("hide"),e.find(".main").addClass("hide"),e.find(".js-error").removeClass("hide"),void this.renderScreenError({el:this.el.closest(".content").find(".js-error"),detail:"Currently no overview is assigned to your roles. Please contact your administrator.",objectName:"Ticket"});if(e.find(".sidebar").removeClass("hide"),e.find(".main").removeClass("hide"),e.find(".js-error").addClass("hide"),this.vertical&&(t&&t.length<=1?this.el.addClass("hidden"):this.el.removeClass("hidden")),this.activeState&&this.view&&!this.vertical)for(i=0,r=t.length;i<r;i++)n=t[i],n.link===this.view&&this.title(n.name,!0);if(this.activeState&&!this.view&&!this.vertical)return a=t[0].link,void this.navigate("ticket/view/"+a,!0);for(s=0,o=t.length;s<o;s++)n=t[s],n.target="#ticket/view/"+n.link,n.link===this.view?(n.active=!0,n):n.active=!1;return this.html(App.view("agent_ticket_view/navbar"+(this.vertical?"_vertical":""))({items:t})),this.vertical?this.autoFoldTabs():void 0}},e}(App.Controller),n=function(e){function n(){this.settings=s(this.settings,this),this.viewmode=s(this.viewmode,this),this.render=s(this.render,this),this.updateTable=s(this.updateTable,this),this.update=s(this.update,this),this.release=s(this.release,this),n.__super__.constructor.apply(this,arguments),this.view&&(this.bindId=App.OverviewListCollection.bind(this.view,this.updateTable)),this.bind("ui:rerender",function(t){return function(){if(t.authenticateCheck()&&t.view)return t.render(App.OverviewListCollection.get(t.view))}}(this))}return r(n,e),n.prototype.events={"click [data-type=settings]":"settings","click [data-type=viewmode]":"viewmode"},n.prototype.release=function(){if(this.bindId)return App.OverviewListCollection.unbind(this.bindId)},n.prototype.update=function(t){var e,n;for(e in t)n=t[e],this[e]=n;if(this.view)return this.view?(this.bindId&&App.OverviewListCollection.unbind(this.bindId),this.bindId=App.OverviewListCollection.bind(this.view,this.updateTable)):void 0},n.prototype.updateTable=function(t){var e,n,i,s,r,o;if(!this.table)return void this.render(t);if(i=t.overview,o=t.tickets,i||o){for(r=[],e=0,n=o.length;e<n;e++)s=o[e],r.push(App.Ticket.find(s.id));return this.overview=App.Overview.find(i.id),this.table.update({overviewAttributes:this.overview.view.s,objects:r,groupBy:this.overview.group_by,groupDirection:this.overview.group_direction,orderBy:this.overview.order.by,orderDirection:this.overview.order.direction})}},n.prototype.render=function(e){var n,i,s,r,o,a,l,c,u,p,h,d,f,g,m,v,y,b,_;if(e&&(g=e.overview,b=e.tickets,g||b)){for(this.view_mode=App.LocalStorage.get("mode:"+this.view,this.Session.get("id"))||"s",console.log("notice","view:",this.view,this.view_mode),y=[],h=0,d=b.length;h<d;h++)v=b[h],y.push(App.Ticket.find(v.id));return!y[0]&&this.permissionCheck("ticket.customer")?void this.html(App.view("customer_not_ticket_exists")()):(this.overview=App.Overview.find(g.id),c=!0,u=!1,this.permissionCheck("admin.overview")&&(u=!0),this.permissionCheck("ticket.customer")&&(c=!1,u=!1),_=[{name:"S",type:"s","class":"s"===this.view_mode?"active":void 0},{name:"M",type:"m","class":"m"===this.view_mode?"active":void 0}],this.permissionCheck("ticket.customer")&&(_=[]),p=App.view("agent_ticket_view/content")({overview:this.overview,view_modes:_,edit:u}),p=$(p),this.html(p),m="","m"===this.view_mode?(m=App.view("agent_ticket_view/detail")({overview:this.overview,objects:y,checkbox:c}),m=$(m),m.delegate('[name="bulk_all"]',"change",function(t){return $(t.currentTarget).prop("checked")?$(t.currentTarget).closest("table").find('[name="bulk"]').prop("checked",!0):$(t.currentTarget).closest("table").find('[name="bulk"]').prop("checked",!1)}),this.$(".table-overview").append(m)):(f=function(t){return function(e){return v=App.Ticket.findNative(e),App.TaskManager.execute({key:"Ticket-"+v.id,controller:"TicketZoom",params:{ticket_id:v.id,overview_id:t.overview.id},show:!0}),t.navigate(v.uiUrl())}}(this),a=function(t,e,n){return n.title=e.title,t},r=function(t,e,n){return n.link=e.uiUrl(),t},l=function(t,e,n){var i;return e?(i=void 0,"customer_id"===n.name&&(i=e.customer_id),"owner_id"===n.name&&(i=e.owner_id),i?(n["class"]="user-popover",n.data={id:i},t):t):t},o=function(t,e,n){return e&&e.organization_id?(n["class"]="organization-popover",n.data={id:e.organization_id},t):t},n=function(t){return function(e,n,i){var s,r,o,a,l;return 0===t.$("table").find('input[name="bulk"]:checked').length?t.bulkForm.hide():t.bulkForm.show(),t.lastChecked&&i.shiftKey&&(s=$(i.currentTarget).parents(".item"),a=$(t.lastChecked).parents(".item"),o=s.parent().children(),s.index()>a.index()?(l=a.index(),r=s.index()):(l=s.index(),r=a.index()),o.slice(l+1,r).find('[name="bulk"]').prop("checked",function(){return!this.checked})),t.lastChecked=i.currentTarget}}(this),s=function(t){var e;return e={name:"icon",display:"",translation:!1,width:"28px",displayWidth:28,unresizable:!0},t.unshift(0),t[0]=e,t},i=function(t,e,n){return t=" ",n["class"]=e.iconClass(),n.link="",n.title=e.iconTitle(),t},this.table=new App.ControllerTable({tableId:"ticket_overview_"+this.overview.id,overview:this.overview.view.s,el:this.$(".table-overview"),model:App.Ticket,objects:y,checkbox:c,groupBy:this.overview.group_by,groupDirection:this.overview.group_direction,orderBy:this.overview.order.by,orderDirection:this.overview.order.direction,"class":"table--light",bindRow:{events:{click:f}},callbackHeader:[s],callbackAttributes:{icon:[i],customer_id:[l],organization_id:[o],owner_id:[l],title:[r,a],number:[r,a]},bindCheckbox:{events:{click:n}}})),this.userPopups(),this.organizationPopups(),this.bulkForm=new t({holder:this.el,view:this.view}),this.el.append(this.bulkForm.el),0!==this.$(".table-overview").find('input[name="bulk"]:checked').length&&this.bulkForm.show(),this.$(".table-overview").delegate('input[name="bulk"], input[name="bulk_all"]',"change",function(t){return function(){return 0===t.$(".table-overview").find('input[name="bulk"]:checked').length?(t.bulkForm.hide(),t.bulkForm.reset()):t.bulkForm.show()}}(this)),this.$(".table-overview").delegate('[name="bulk"]',"change",function(t){return function(){var e,n,i;return e=t.$(".table-overview").find('[name="bulk_all"]'),i=t.$(".table-overview").find('input[name="bulk"]:checked').length,n=t.$(".table-overview").find('input[name="bulk"]').length,0===i?(e.prop("indeterminate",!1),e.prop("checked",!1)):i===n?(e.prop("indeterminate",!1),e.prop("checked",!0)):(e.prop("checked",!1),e.prop("indeterminate",!0))}}(this)))}},n.prototype.viewmode=function(t){return t.preventDefault(),this.view_mode=$(t.target).data("mode"),App.LocalStorage.set("mode:"+this.view,this.view_mode,this.Session.get("id")),this.fetch()},n.prototype.settings=function(t){return t.preventDefault(),this.keyboardOff(),new App.OverviewSettings({overview_id:this.overview.id,view_mode:this.view_mode,container:this.el.closest(".content"),onCloseCallback:this.keyboardOn})},n}(App.Controller),t=function(t){function e(){this.submit=s(this.submit,this),this.removeSpaceForTableRows=s(this.removeSpaceForTableRows,this),this.makeSpaceForTableRows=s(this.makeSpaceForTableRows,this),this.hide=s(this.hide,this),this.show=s(this.show,this),this.cancel=s(this.cancel,this),this.reset=s(this.reset,this),this.confirm=s(this.confirm,this),this.release=s(this.release,this);var t,n,i,r,o,a;e.__super__.constructor.apply(this,arguments),this.configure_attributes_ticket=[],a=["state_id","pending_time","priority_id","group_id","owner_id"],i=App.Ticket.attributesGet("edit");for(n in i)t=i[n],_.contains(a,n)&&(o=clone(t),o.nulloption=!0,o["default"]="",o["null"]=!0,this.configure_attributes_ticket.push(o));this.holder=this.options.holder,this.visible=!1,r=function(t){return function(e){return App.Collection.loadAssets(e.assets),t.formMeta=e.form_meta,t.render()}}(this),this.bindId=App.TicketCreateCollection.bind(r)}return r(e,t),e.prototype.className="bulkAction hide",e.prototype.events={"submit form":"submit","click .js-submit":"submit","click .js-confirm":"confirm","click .js-cancel":"reset"},e.prototype.release=function(){return App.TicketCreateCollection.unbind(this.bindId)},e.prototype.render=function(){var t;return this.el.css("right",App.Utils.getScrollBarWidth()),this.html(App.view("agent_ticket_view/bulk")()),t=this.Config.get("TicketZoomFormHandler"),new App.ControllerForm({el:this.$("#form-ticket-bulk"),model:{configure_attributes:this.configure_attributes_ticket,className:"create",labelClass:"input-group-addon"},handlersConfig:t,params:{},filter:this.formMeta.filter,formMeta:this.formMeta,noFieldset:!0}),new App.ControllerForm({el:this.$("#form-ticket-bulk-comment"),model:{configure_attributes:[{name:"body",display:"Comment",tag:"textarea",rows:4,"null":!0,upload:!1,item_class:"flex"}],className:"create",labelClass:"input-group-addon"},noFieldset:!0}),this.confirm_attributes=[{name:"type_id",display:"Type",tag:"select",multiple:!1,"null":!0,relation:"TicketArticleType",filter:this.articleTypeFilter,"default":"9",translate:!0,"class":"medium"},{name:"internal",display:"Visibility",tag:"select","null":!0,options:{"true":"internal","false":"public"},"class":"medium",item_class:"","default":!1}],new App.ControllerForm({el:this.$("#form-ticket-bulk-typeVisibility"),model:{configure_attributes:this.confirm_attributes,className:"create",labelClass:"input-group-addon"},noFieldset:!0})},e.prototype.articleTypeFilter=function(t){var e,n,i;for(n=0,i=t.length;n<i;n++)if(e=t[n],"note"===e.name)return[e];return t},e.prototype.confirm=function(){return this.$(".js-action-step").addClass("hide"),this.$(".js-confirm-step").removeClass("hide"),this.makeSpaceForTableRows(),setTimeout(function(t){return function(){return t.$(".textarea.form-group textarea").focus()}}(this),0)},
e.prototype.reset=function(){if(this.cancel(),this.visible)return this.makeSpaceForTableRows()},e.prototype.cancel=function(){return this.$(".js-action-step").removeClass("hide"),this.$(".js-confirm-step").addClass("hide")},e.prototype.show=function(){return this.el.removeClass("hide"),this.visible=!0,this.makeSpaceForTableRows()},e.prototype.hide=function(){return this.el.addClass("hide"),this.visible=!1,this.removeSpaceForTableRows()},e.prototype.makeSpaceForTableRows=function(){var t,e,n;if(t=this.el.height(),n=this.holder.scrollParent(),e=n.prop("scrollHeight")===n.scrollTop()+n.outerHeight(),this.holder.css("margin-bottom",t),e)return n.scrollTop(n.prop("scrollHeight")-n.outerHeight())},e.prototype.removeSpaceForTableRows=function(){return this.holder.css("margin-bottom",0)},e.prototype.ticketMergeParams=function(t){var e,n;n={};for(e in t)""!==t[e]&&null!==t[e]&&(n[e]=t[e]);return""!==t.group_id&&null!==t.group_id&&(n.owner_id=t.owner_id),n},e.prototype.submit=function(t){var e,n,i,s,r,o,a,l,c,u,p,h,d,f,g;if(t.preventDefault(),this.bulkCount=this.holder.find(".table-overview").find('[name="bulk"]:checked').length,0===this.bulkCount)return void App.Event.trigger("notify",{type:"error",msg:App.i18n.translateContent("At least one object must be selected.")});for(g=[],this.holder.find(".table-overview").find('[name="bulk"]:checked').each(function(t,e){var n;return n=$(e).val(),g.push(n)}),u=this.formParam(t.target),r=0,l=g.length;r<l;r++)if(f=g[r],h=App.Ticket.find(f),d=this.ticketMergeParams(u),h.load(d),_.isEmpty(h.title)&&(h.title="-"),s=h.validate({screen:"edit"})){this.log("error","update",s),i="";for(a in s)n=s[a],i+=a+": "+n;return this.formValidate({form:t.target,errors:s,screen:"edit"}),App.Event.trigger("notify",{type:"error",msg:App.i18n.translateContent("Bulk action stopped %s!",i)}),void this.cancel()}for(this.bulkCountIndex=0,o=0,c=g.length;o<c;o++){if(f=g[o],h=App.Ticket.find(f),d=this.ticketMergeParams(u),u.body&&(e=new App.TicketArticle,u.from=this.Session.get().displayName(),u.ticket_id=h.id,u.form_id=this.form_id,p=App.TicketArticleSender.findByAttribute("name","Agent"),App.TicketArticleType.find(u.type_id),u.sender_id=p.id,u.internal||(u.internal=!1),this.log("notice","update article",u,p),e.load(u),s=e.validate()))return this.log("error","update article",s),void this.formEnable(t);h.load(d),_.isEmpty(h.title)&&(h.title="-"),h.save({done:function(t){return function(){if(t.bulkCountIndex++,e&&e.save({fail:function(e){return t.log("error","update article",e)}}),t.bulkCountIndex===t.bulkCount)return t.render(),t.hide(),App.Event.trigger("overview:fetch")}}(this),fail:function(t){return function(e){return t.bulkCountIndex++,t.log("error","update ticket",e),App.Event.trigger("notify",{type:"error",msg:App.i18n.translateContent("Can't update Ticket %s!",h.number)})}}(this)})}return this.holder.find(".table-overview").find('[name="bulk"]:checked').prop("checked",!1),App.Event.trigger("notify",{type:"success",msg:App.i18n.translateContent("Bulk action executed!")})},e}(App.Controller),App.OverviewSettings=function(t){function e(){return this.onSubmit=s(this.onSubmit,this),this.onClose=s(this.onClose,this),this.content=s(this.content,this),e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.buttonClose=!0,e.prototype.buttonCancel=!0,e.prototype.buttonSubmit=!0,e.prototype.headPrefix="Edit",e.prototype.content=function(){var t;return this.overview=App.Overview.find(this.overview_id),this.head=this.overview.name,this.configure_attributes_article=[],"d"===this.view_mode&&this.configure_attributes_article.push({name:"view::per_page",display:"Items per page",tag:"select",multiple:!1,"null":!1,"default":this.overview.view.per_page,options:{5:" 5",10:"10",15:"15",20:"20",25:"25"}}),this.configure_attributes_article.push({name:"view::"+this.view_mode,display:"Attributes",tag:"checkboxTicketAttributes","default":this.overview.view[this.view_mode],"null":!1,translate:!0,sortBy:null},{name:"order::by",display:"Order",tag:"selectTicketAttributes","default":this.overview.order.by,"null":!1,translate:!0,sortBy:null},{name:"order::direction",display:"Order by Direction",tag:"select","default":this.overview.order.direction,"null":!1,translate:!0,options:{ASC:"up",DESC:"down"}},{name:"group_by",display:"Group by",tag:"select","default":this.overview.group_by,"null":!0,nulloption:!0,translate:!0,options:App.Overview.groupByAttributes()},{name:"group_direction",display:"Group by Direction",tag:"select","default":this.overview.group_direction,"null":!1,translate:!0,options:{ASC:"up",DESC:"down"}}),t=new App.ControllerForm({model:{configure_attributes:this.configure_attributes_article},autofocus:!1}),t.form},e.prototype.onClose=function(){if(this.onCloseCallback)return this.onCloseCallback()},e.prototype.onSubmit=function(t){var e,n,i,s;n=this.formParam(t.target),this.reload_needed=!1,this.overview.order.by!==n.order.by&&(this.overview.order.by=n.order.by,this.reload_needed=!0),this.overview.order.direction!==n.order.direction&&(this.overview.order.direction=n.order.direction,this.reload_needed=!0),this.overview.group_direction!==n.group_direction&&(this.overview.group_direction=n.group_direction,this.reload_needed=!0),i=n.view;for(e in i)s=i[e],this.overview.view[e]=s;return this.overview.group_by=n.group_by,this.overview.save({done:function(t){return function(){return t.reload_needed?App.OverviewListCollection.fetch(t.overview.link):(App.OverviewIndexCollection.trigger(),App.OverviewListCollection.trigger(t.overview.link)),t.close()}}(this)})},e}(App.ControllerModal),i=function(t){function e(t){var n;e.__super__.constructor.apply(this,arguments),n={view:t.view},App.TaskManager.execute({key:"TicketOverview",controller:"TicketOverview",params:n,show:!0,persistent:!0})}return r(e,t),e.prototype.requiredPermission=["ticket.agent","ticket.customer"],e}(App.ControllerPermanent),App.Config.set("ticket/view",i,"Routes"),App.Config.set("ticket/view/:view",i,"Routes"),App.Config.set("TicketOverview",{controller:"TicketOverview",permission:["ticket.agent","ticket.customer"]},"permanentTask"),App.Config.set("TicketOverview",{prio:1e3,parent:"",name:"Overviews",target:"#ticket/view",key:"TicketOverview",permission:["ticket.agent","ticket.customer"],"class":"overviews"},"NavBar")}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var s in e)i.call(e,s)&&(t[s]=e[s]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;App.TicketZoom=function(t){function i(t){this.taskReset=e(this.taskReset,this),this.taskUpdateAll=e(this.taskUpdateAll,this),this.taskUpdate=e(this.taskUpdate,this),this.taskGet=e(this.taskGet,this),this.reset=e(this.reset,this),this.submitPost=e(this.submitPost,this),this.submit=e(this.submit,this),this.submitEnable=e(this.submitEnable,this),this.submitDisable=e(this.submitDisable,this),this.markFormDiff=e(this.markFormDiff,this),this.formCurrent=e(this.formCurrent,this),this.currentStore=e(this.currentStore,this),this.markForm=e(this.markForm,this),this.autosaveStart=e(this.autosaveStart,this),this.autosaveStop=e(this.autosaveStop,this),this.scrollToBottom=e(this.scrollToBottom,this),this.scrollToArticle=e(this.scrollToArticle,this),this.render=e(this.render,this),this.positionPageHeaderUpdate=e(this.positionPageHeaderUpdate,this),this.positionPageHeaderStop=e(this.positionPageHeaderStop,this),this.positionPageHeaderStart=e(this.positionPageHeaderStart,this),this.articleNavigate=e(this.articleNavigate,this),this.shortcutNavigationstop=e(this.shortcutNavigationstop,this),this.shortcutNavigationStart=e(this.shortcutNavigationStart,this),this.muteTask=e(this.muteTask,this),this.release=e(this.release,this),this.changed=e(this.changed,this),this.hide=e(this.hide,this),this.currentPosition=e(this.currentPosition,this),this.setPosition=e(this.setPosition,this),this.pagePosition=e(this.pagePosition,this),this.show=e(this.show,this),this.url=e(this.url,this),this.meta=e(this.meta,this),this.load=e(this.load,this),this.fetch=e(this.fetch,this),this.fetchMayBe=e(this.fetchMayBe,this);var n,s;i.__super__.constructor.apply(this,arguments),this.authenticateCheckRedirect(),this.formMeta=void 0,this.ticket_id=t.ticket_id,this.article_id=t.article_id,this.sidebarState={},t.init?this.overview_id=void 0:this.overview_id=t.overview_id,this.key="ticket::"+this.ticket_id,n=App.SessionStorage.get(this.key),n&&this.load(n),s=function(t){return function(){return t.initFetched?t.fetch(!0):void t.fetch()}}(this),this.interval(s,18e5,"pull_check"),this.bind("Ticket:update Ticket:touch",function(t){return function(e){if(e.id.toString()===t.ticket_id.toString())return t.fetchMayBe(e)}}(this)),this.bind("spool:sent",function(t){return function(){return t.initSpoolSent?void t.fetch(!0):t.initSpoolSent=!0}}(this)),this.bind("ui::ticket::sidebarRerender",function(t){return function(e){if(e.taskKey===t.taskKey&&t.sidebarWidget)return t.sidebarWidget.render(t.formCurrent())}}(this))}return n(i,t),i.include(App.TicketNavigable),i.prototype.elements={".main":"main",".ticketZoom":"ticketZoom",".scrollPageHeader":"scrollPageHeader"},i.prototype.events={"click .js-submit":"submit","click .js-bookmark":"bookmark","click .js-reset":"reset","click .main":"muteTask"},i.prototype.fetchMayBe=function(t){var e;if(this.ticketUpdatedAtLastCall){if(new Date(t.updated_at).getTime()===new Date(this.ticketUpdatedAtLastCall).getTime())return;if(new Date(t.updated_at).getTime()<new Date(this.ticketUpdatedAtLastCall).getTime())return}return this.ticketUpdatedAtLastCall=t.updated_at,e=function(t){return function(){return t.fetch()}}(this),this.delay(e,1e3,"ticket-zoom-"+this.ticket_id)},i.prototype.fetch=function(t){var e;if(null==t&&(t=!1),this.Session.get())return e=!1,this.initFetched||(e=!0),this.ajax({id:"ticket_zoom_"+this.ticket_id,type:"GET",url:this.apiPath+"/tickets/"+this.ticket_id+"?all=true",processData:!0,queue:e,success:function(e){return function(n){return e.load(n,t),App.SessionStorage.set(e.key,n)}}(this),error:function(t){return function(e){var n,i,s;if(s=e.statusText,i=e.status,n=e.responseText,"abort"!==s)return t.renderDone=!1,t.ticketUpdatedAtLastCall&&0===i?void console.log("network issues e. g. temp. no connection",i,s,n):401===i||"Unauthorized"===s?(t.taskHead="\xbb "+App.i18n.translateInline("Unauthorized")+" \xab",t.taskIconClass="diagonal-cross",t.renderScreenUnauthorized({objectName:"Ticket"})):404===i||"Not Found"===s?(t.taskHead="\xbb "+App.i18n.translateInline("Not Found")+" \xab",t.taskIconClass="diagonal-cross",t.renderScreenNotFound({objectName:"Ticket"})):(t.taskHead="\xbb "+App.i18n.translateInline("Error")+" \xab",t.taskIconClass="diagonal-cross",n||(n="General communication error, maybe internet is not available!"),t.renderScreenError({status:i,detail:n,objectName:"Ticket"}))}}(this)})},i.prototype.load=function(t,e,n){var i;if(null==e&&(e=!1),null==n&&(n=!1),i=t.assets.Ticket[this.ticket_id],this.ticketUpdatedAtLastCall){if(e&&new Date(i.updated_at).getTime()===new Date(this.ticketUpdatedAtLastCall).getTime())return;if(new Date(i.updated_at).getTime()<new Date(this.ticketUpdatedAtLastCall).getTime())return;new Date(i.updated_at).getTime()>new Date(this.ticketUpdatedAtLastCall).getTime()&&(this.ticketUpdatedAtLastCall=i.updated_at)}else this.ticketUpdatedAtLastCall=i.updated_at;return this.initFetched&&i.updated_by_id!==this.Session.get("id")&&App.TaskManager.notify(this.taskKey),this.initFetched=!0,this.doNotLog||(this.doNotLog=1,this.recentView("Ticket",this.ticket_id)),this.ticket_article_ids=t.ticket_article_ids,this.links=t.links,this.tags=t.tags,this.formMeta=t.form_meta,App.Collection.loadAssets(t.assets,{targetModel:"Ticket"}),this.ticket=App.Ticket.fullLocal(this.ticket_id),this.ticket.article=void 0,this.render(n)},i.prototype.meta=function(){var t,e;return t={url:this.url(),id:this.ticket_id},this.taskIconClass&&(t.iconClass=this.taskIconClass),this.taskHead&&(t.head=this.taskHead),this.ticket_id&&App.Ticket.exists(this.ticket_id)&&(e=App.Ticket.findNative(this.ticket_id),t.head=e.title,t.title="#"+e.number+" - "+e.title,t["class"]="task-state-"+e.getState(),t.type="task",t.iconTitle=e.iconTitle(),t.iconClass=e.iconClass()),t},i.prototype.url=function(){return"#ticket/zoom/"+this.ticket_id},i.prototype.show=function(t){if(this.navupdate({url:"#",type:"menu"}),App.OnlineNotification.seen("Ticket",this.ticket_id),this.activeState&&this.ticket_article_ids&&(this.shown=!1),this.activeState=!0,this.pagePosition(t),this.positionPageHeaderStart(),this.autosaveStart(),this.shortcutNavigationStart(),this.attributeBar)return this.attributeBar.start()},i.prototype.pagePosition=function(t){var e,n;if(null==t&&(t={}),"init"!==t.type||this.shown)return t.article_id?(e=t.article_id,t.article_id=void 0):this.pagePositionData&&(e=this.pagePositionData,this.pagePositionData=void 0),n=function(t){return function(n,i){var s;return s=function(){return"article"===n?(t.scrollToArticle(e),void t.positionPageHeaderUpdate()):(t.scrollToBottom(),t.positionPageHeaderUpdate())},t.delay(s,i,"scrollToPosition")}}(this),this.shown?e&&e!==this.last_article_id?(this.last_article_id=e,void n("article",300)):void(this.last_ticket_article_ids&&_.isEqual(_.sortBy(this.last_ticket_article_ids),_.sortBy(this.ticket_article_ids))||(this.last_ticket_article_ids=this.ticket_article_ids,n("bottom",100))):(this.shown=!0,App.Event.trigger("ui::ticket::shown",{ticket_id:this.ticket_id}),void n("bottom",50))},i.prototype.setPosition=function(t){return this.$(".main").scrollTop(t)},i.prototype.currentPosition=function(){var t,e,n;return t=this.$(".main .ticketZoom"),e=t.offset(),e&&(n=e.top),Math.abs(n)},i.prototype.hide=function(){if(this.activeState=!1,$("body > .modal").modal("hide"),this.positionPageHeaderStop(),this.autosaveStop(),this.shortcutNavigationstop(),this.attributeBar)return this.attributeBar.stop()},i.prototype.changed=function(){var t,e,n;return!!this.ticket&&(t=this.formCurrent(),e=this.currentStore(),!(!(n=this.formDiff(t,e))||_.isEmpty(n))&&(!_.isEmpty(n.ticket)||!_.isEmpty(n.article)))},i.prototype.release=function(){return this.autosaveStop(),this.positionPageHeaderStop()},i.prototype.muteTask=function(){return App.TaskManager.mute(this.taskKey)},i.prototype.shortcutNavigationStart=function(){var t;return this.articlePager={article_id:void 0},t="alt+ctrl+left",$(document).bind("keydown.ticket_zoom"+this.ticket_id,t,function(t){return function(){return t.articleNavigate("up")}}(this)),t="alt+ctrl+right",$(document).bind("keydown.ticket_zoom"+this.ticket_id,t,function(t){return function(){return t.articleNavigate("down")}}(this))},i.prototype.shortcutNavigationstop=function(){return $(document).unbind("keydown.ticket_zoom"+this.ticket_id)},i.prototype.articleNavigate=function(t){var e,n,i,s,r;for(n=[],this.$(".ticket-article .ticket-article-item").each(function(t,e){var i,s,r;return i=$(e),s=i.data("id"),r=i.visible(!0),n.push({article_id:s,visible:r})}),"up"===t&&(n=n.reverse()),s=void 0,i=0,r=n.length;i<r;i++){if(e=n[i],s)return this.scrollToArticle(e.article_id),void(this.articlePager.article_id=e.article_id);this.articlePager.article_id?this.articlePager.article_id===e.article_id&&(s=e.article_id):e.visible&&(s=e.article_id)}},i.prototype.positionPageHeaderStart=function(){return this.positionPageHeaderUpdate(),this.main.bind("scroll",this.positionPageHeaderUpdate)},i.prototype.positionPageHeaderStop=function(){return this.main.unbind("scroll",this.positionPageHeaderUpdate)},i.scrollHeaderPos=void 0,i.prototype.positionPageHeaderUpdate=function(){var t,e,n,i;return t=this.scrollPageHeader.outerHeight(),n=this.main.prop("scrollHeight"),e=this.main.height(),i=this.main.scrollTop(),!n>e+t?void this.scrollPageHeader.css("transform","translateY("+-t+"px)"):(i>t&&(i=t),i!==this.scrollHeaderPos?(this.scrollPageHeader.css("transform","translateY("+(i-t)+"px)"),this.scrollHeaderPos=i):void 0)},i.prototype.render=function(t){var e,n,i,s,r,o,a,l,c;if(App.TaskManager.touch(this.taskKey),!this.renderDone&&(this.renderDone=!0,this.autosaveLast={},i=$(App.view("ticket_zoom")({ticket:this.ticket,nav:this.nav,isCustomer:this.permissionCheck("ticket.customer"),scrollbarWidth:App.Utils.getScrollBarWidth(),dir:App.i18n.dir()})),new App.TicketZoomOverviewNavigator({el:i.find(".js-overviewNavigatorContainer"),ticket_id:this.ticket_id,overview_id:this.overview_id}),new App.TicketZoomTitle({object_id:this.ticket_id,overview_id:this.overview_id,el:i.find(".js-ticketTitleContainer"),taskKey:this.taskKey}),new App.TicketZoomMeta({object_id:this.ticket_id,el:i.find(".js-ticketMetaContainer")}),this.attributeBar=new App.TicketZoomAttributeBar({ticket:this.ticket,el:i.find(".js-attributeBar"),overview_id:this.overview_id,callback:this.submit,taskKey:this.taskKey}),this.form_id=this.taskGet("article").form_id||App.ControllerForm.formId(),this.articleNew=new App.TicketZoomArticleNew({ticket:this.ticket,ticket_id:this.ticket_id,el:i.find(".article-new"),formMeta:this.formMeta,form_id:this.form_id,defaults:this.taskGet("article"),taskKey:this.taskKey,ui:this,callbackFileUploadStart:this.submitDisable,callbackFileUploadStop:this.submitEnable}),this.highligher=new App.TicketZoomHighlighter({el:i.find(".js-highlighterContainer"),ticket_id:this.ticket_id}),new App.TicketZoomSetting({el:i.find(".js-settingContainer"),ticket_id:this.ticket_id}),this.articleView=new App.TicketZoomArticleView({ticket:this.ticket,el:i.find(".ticket-article"),ui:this,highligher:this.highligher,ticket_article_ids:this.ticket_article_ids,form_id:this.form_id}),new App.TicketCustomerAvatar({object_id:this.ticket_id,el:i.find(".ticketZoom-header")}),this.sidebarWidget=new App.TicketZoomSidebar({el:i,sidebarState:this.sidebarState,object_id:this.ticket_id,model:"Ticket",query:this.query,taskGet:this.taskGet,taskKey:this.taskKey,formMeta:this.formMeta,markForm:this.markForm,tags:this.tags,links:this.links}),!0===this.Config.get("ticket_auto_assignment")&&1===this.ticket.owner_id&&this.permissionCheck("ticket.agent")&&this.ticket.editable("full"))){for(l=this.Config.get("ticket_auto_assignment_user_ids_ignore")||[],c=!1,n=App.Session.get("id"),s=0,r=l.length;s<r;s++)if(a=l[s],a.toString()===n.toString()){c=!0;break}!1===c&&(o=this.Config.get("ticket_auto_assignment_selector"),App.Ticket.selector(this.ticket,o.condition)&&(e=function(t){return function(){return t.ticket.owner_id=App.Session.get("id"),t.ticket.save()}}(this),this.delay(e,800,"ticket-auto-assign-"+this.ticket.id)))}return i?this.html(i):this.articleView.execute({ticket_article_ids:this.ticket_article_ids}),this.sidebarWidget&&this.sidebarWidget.reload({tags:this.tags,links:this.links}),this.initDone?t?void 0:this.pagePosition({type:"init"}):(this.article_id&&(this.pagePositionData=this.article_id),this.pagePosition({type:"init"}),this.positionPageHeaderStart(),void(this.initDone=!0))},i.prototype.scrollToArticle=function(t){var e,n;if(e=document.getElementById("article-"+t))return n=e.offsetTop-100,this.main.animate({scrollTop:n},100)},i.prototype.scrollToBottom=function(){var t,e;return t=0,t+=this.$(".ticketZoom-controls").height(),t+=this.$(".ticketZoom-header").height(),t+=this.$(".ticket-article").height(),t+=this.$(".article-new").height(),e=this.$(".main").height(),e>t?void this.main.scrollTop(0):this.main.scrollTop(this.main.prop("scrollHeight"))},i.prototype.autosaveStop=function(){return this.clearDelay("ticket-zoom-form-update"),this.autosaveLast={},this.el.off("change.local blur.local keyup.local paste.local input.local")},i.prototype.autosaveStart=function(){return this.el.on("change.local blur.local keyup.local paste.local input.local","form, .js-textarea",function(t){return function(){return t.delay(t.markForm,250,"ticket-zoom-form-update")}}(this)),this.delay(this.markForm,800,"ticket-zoom-form-update")},i.prototype.markForm=function(t){var e,n,i,s;if(this.autosaveLast||(this.autosaveLast=this.taskGet()),this.ticket&&(e=this.formCurrent(),s=_.isEqual(e,this.autosaveLast),t||!s))return this.autosaveLast=clone(e),n=this.currentStore(),i=this.formDiff(e,n),this.setDefaultFollowUpState(i,n),this.markFormDiff(i),this.taskUpdateAll(i)},i.prototype.currentStore=function(){var t,e,n;if(this.ticket)return e=this.ticket.attributes(),delete e.article,n=this.Config.get("ui_ticket_zoom_article_note_new_internal"),t={ticket:e,article:{to:"",cc:"",subject:"",type:"note",body:"",internal:n,in_reply_to:"",subtype:""}},this.permissionCheck("ticket.customer")&&(t.article.internal=""),t},i.prototype.setDefaultFollowUpState=function(t,e){var n;if(this.isDefaultFollowUpStateSet&&!t.article.body)return this.$(".sidebar select[name=state_id]").val(e.ticket.state_id).trigger("change"),void(this.isDefaultFollowUpStateSet=!1);if(t.article.body&&!t.ticket.state_id&&this.permissionCheck("ticket.customer")&&!(this.isDefaultFollowUpStateSet||this.ticket&&this.ticket.state_id&&(n=App.TicketState.findByAttribute("id",this.ticket.state_id))&&!0===n.default_create))return this.isDefaultFollowUpStateSet=!0,n=App.TicketState.findByAttribute("default_follow_up",!0),n&&this.$(".sidebar[data-tab=ticket] select[name=state_id]").val(n.id).trigger("change"),!0},i.prototype.resetDefaultFollowUpState=function(){return this.isDefaultFollowUpStateSet=!1},i.prototype.formCurrent=function(){var t,e;return e={ticket:this.formParam(this.el.find(".edit")),article:this.articleNew.params()},t=this.$(".article-add .textBubble .attachments .attachment").length,t>0?e.article.attachments=!0:delete e.article.attachments,delete e.article.form_id,this.permissionCheck("ticket.customer")&&(e.article.internal=""),e},i.prototype.formDiff=function(t,e){var n,i,s,r;if(e.ticket){i=e.ticket;for(n in i)null!==(r=i[n])&&void 0!==r||(e.ticket[n]="")}if(t.ticket){s=t.ticket;for(n in s)null!==(r=s[n])&&void 0!==r||(t.ticket[n]="")}return{ticket:this.forRemoveMeta(App.Utils.formDiff(t.ticket,e.ticket)),article:this.forRemoveMeta(App.Utils.formDiff(t.article,e.article))}},i.prototype.forRemoveMeta=function(t){var e,n,i;null==t&&(t={}),n={};for(e in t)i=t[e],e.match(/_completion$/)||(n[e]=i);return n},i.prototype.markFormDiff=function(t){var e,n,i,s,r,o,a,l;if(null==t&&(t={}),a=this.$(".edit"),l=this.$('.tabsSidebar-tab[data-tab="ticket"]'),e=this.$(".article-add"),o=this.$(".js-reset"),s={},s.ticket=this.forRemoveMeta(this.formParam(a)),s.article=this.forRemoveMeta(this.formParam(e)),_.isEmpty(t.ticket)&&_.isEmpty(t.article))return l.removeClass("is-changed"),a.removeClass("form-changed"),a.find(".form-group").removeClass("is-changed"),o.addClass("hide");a.addClass("form-changed"),_.isEmpty(t.ticket)?l.removeClass("is-changed"):l.addClass("is-changed"),r=s.ticket;for(n in r)r[n],i=this.$('.edit [name="'+n+'"]').parents(".form-group"),i.get(0)||(i=this.$('.edit [data-name="'+n+'"]').parents(".form-group")),n in t.ticket?i.hasClass("is-changed")||i.addClass("is-changed"):i.hasClass("is-changed")&&i.removeClass("is-changed");return o.removeClass("hide")},i.prototype.submitDisable=function(t){return t?void this.formDisable(t):this.formDisable(this.$(".js-submitDropdown"))},i.prototype.submitEnable=function(t){return t?void this.formEnable(t):this.formEnable(this.$(".js-submitDropdown"))},i.prototype.submit=function(t,e){var n,i,s,r,o,a,l,c;if(null==e&&(e={}),t.stopPropagation(),t.preventDefault(),this.submitDisable(t),!this.articleNew.validate())return void this.submitEnable(t);a=this.formParam(this.$(".edit")),o=App.Ticket.fullLocal(this.ticket_id),o.article=void 0;for(r in a)c=a[r],o[r]=c;if(e.perform&&App.Ticket.macro({macro:e.perform,ticket:o,callback:{tagAdd:function(t){return function(e){if(t.sidebarWidget&&t.sidebarWidget.reload)return t.sidebarWidget.reload({tagAdd:e,source:"macro"})}}(this),tagRemove:function(t){return function(e){if(t.sidebarWidget&&t.sidebarWidget.reload)return t.sidebarWidget.reload({tagRemove:e})}}(this)}}),this.permissionCheck("ticket.customer")||o.owner_id||(o.owner_id=1),_.isEmpty(o.title)&&(o.title="-"),this.autosaveStop(),s=o.validate({screen:"edit"}))return this.log("error","update",s),this.formValidate({form:this.$(".edit"),errors:s,screen:"edit"}),this.submitEnable(t),void this.autosaveStart();if((i=this.articleNew.params())&&i.body){if(n=new App.TicketArticle,n.load(i),s=n.validate())return this.log("error","update article",s),this.formValidate({form:this.$(".article-add"),errors:s,screen:"edit"}),this.submitEnable(t),void this.autosaveStart();o.article=n}return this.sidebarWidget&&this.sidebarWidget.postParams&&this.sidebarWidget.postParams({ticket:o}),o.article?!0!==this.Config.get("time_accounting")?void this.submitPost(t,o,e):(l=this.Config.get("time_accounting_selector"),App.Ticket.selector(o,l.condition)?this.permissionCheck("ticket.customer")?void this.submitPost(t,o,e):new App.TicketZoomTimeAccounting({container:this.el.closest(".content"),ticket:o,cancelCallback:function(e){return function(){return e.submitEnable(t)}}(this),submitCallback:function(n){return function(i){return i.time_unit&&(o.article.time_unit=i.time_unit),n.submitPost(t,o,e)}}(this)}):void this.submitPost(t,o,e)):void this.submitPost(t,o,e)},i.prototype.submitPost=function(t,e,n){var i;return i=this.$(".js-secondaryActionButtonLabel").data("type"),n&&n.ux_flow_next_up&&(i=n.ux_flow_next_up),this.ajax({id:"ticket_update_"+e.id,type:"PUT",url:App.Ticket.url+"/"+e.id+"?all=true",data:JSON.stringify(e.attributes()),processData:!0,success:function(n){return function(s){return n.load(s,!0,!0),e.article=void 0,n.reset(),n.sidebarWidget&&n.sidebarWidget.commit(),"closeNextInOverview"===i||"next_from_overview"===i?(App.Event.trigger("overview:fetch"),void n.taskOpenNextTicketInOverview()):"closeTab"===i||"next_task"===i?(App.Event.trigger("overview:fetch"),void n.taskCloseTicket(!0)):(n.autosaveStart(),n.muteTask(),n.submitEnable(t))}}(this),error:function(e){return function(n,i){var s;return s=void 0,n&&n.responseJSON&&n.responseJSON.error&&(s=n.responseJSON.error),App.Event.trigger("notify",{type:"error",msg:App.i18n.translateContent(i.error_human||i.error||s||"Unable to update!"),timeout:2e3}),e.autosaveStart(),e.muteTask(),e.fetch(),e.submitEnable(t)}}(this)})},i.prototype.bookmark=function(t){return $(t.currentTarget).find(".bookmark.icon").toggleClass("filled")},i.prototype.reset=function(t){return t&&t.preventDefault(),this.taskReset(),this.resetDefaultFollowUpState(),App.Ajax.request({type:"DELETE",url:App.Config.get("api_path")+"/ticket_attachment_upload",data:JSON.stringify({form_id:this.form_id}),processData:!1}),this.$(".js-reset").addClass("hide"),App.Event.trigger("ui::ticket::taskReset",{ticket_id:this.ticket_id}),this.$('.tabsSidebar-tab[data-tab="ticket"]').removeClass("is-changed")},i.prototype.taskGet=function(t){return App.TaskManager.get(this.taskKey)?(this.localTaskData=App.TaskManager.get(this.taskKey).state||{},_.isObject(this.localTaskData.article)&&_.isArray(App.TaskManager.get(this.taskKey).attachments)&&(this.localTaskData.article.attachments=App.TaskManager.get(this.taskKey).attachments),t?(this.localTaskData[t]||(this.localTaskData[t]={}),this.localTaskData[t]):(this.localTaskData||(this.localTaskData={}),this.localTaskData)):{}},i.prototype.taskUpdate=function(t,e){return this.localTaskData[t]=e,App.TaskManager.update(this.taskKey,{state:this.localTaskData})},i.prototype.taskUpdateAll=function(t){return this.localTaskData=t,this.localTaskData.article.form_id=this.form_id,App.TaskManager.update(this.taskKey,{state:this.localTaskData})},i.prototype.taskReset=function(){return this.form_id=App.ControllerForm.formId(),this.articleNew.form_id=this.form_id,this.articleNew.render(),this.localTaskData={ticket:{},article:{}},App.TaskManager.update(this.taskKey,{state:this.localTaskData})},i}(App.Controller),t=function(t){function e(t){var n;e.__super__.constructor.apply(this,arguments),n={ticket_id:t.ticket_id,article_id:t.article_id,nav:t.nav,shown:!0},App.TaskManager.execute({key:"Ticket-"+this.ticket_id,controller:"TicketZoom",params:n,show:!0})}return n(e,t),e.prototype.requiredPermission=["ticket.agent","ticket.customer"],e}(App.ControllerPermanent),App.Config.set("ticket/zoom/:ticket_id",t,"Routes"),App.Config.set("ticket/zoom/:ticket_id/nav/:nav",t,"Routes"),App.Config.set("ticket/zoom/:ticket_id/:article_id",t,"Routes")}.call(this),function(){var t;t=function(){function t(){}return t.action=function(t,e,n,i){var s;return i.permissionCheck("ticket.customer")?t:("note"===n.type.name&&(s=void 0,App.Session.get("id")===n.created_by_id&&(s=App.User.find(App.Session.get("id")),s.permission("ticket.agent")&&t.push({name:"delete",type:"delete",icon:"trash",href:"#"}))),t)},t.perform=function(t,e,n,i,s){var r;return"delete"!==e||(r=function(){return i=App.TicketArticle.find(i.id),i.destroy()},new App.ControllerConfirm({message:"Sure?",callback:r,container:s.el.closest(".content")}),!0)},t}(),App.Config.set("900-Delete",t,"TicketZoomArticleAction")}.call(this),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.action=function(t,e,n,i){var s,r,o,a,l,c,u,p,h,d,f,g,m,v;if(!i.permissionCheck("ticket.agent"))return t;if(o=e.group,!o.email_address_id)return t;if("email"===n.type.name||"web"===n.type.name){for(t.push({name:"reply",type:"emailReply",icon:"reply",href:"#"}),v=[],"Customer"===n.sender.name&&n.from&&(f=emailAddresses.parseAddressList(n.from))&&(v=v.concat(f)),n.to&&(f=emailAddresses.parseAddressList(n.to))&&(v=v.concat(f)),n.cc&&(f=emailAddresses.parseAddressList(n.cc))&&(v=v.concat(f)),h=App.EmailAddress.all(),r=[],m={},a=0,c=v.length;a<c;a++)if(g=v[a],!_.isEmpty(g.address)&&(d=g.address.toString().toLowerCase(),!m[d])){for(m[d]=!0,p=!1,l=0,u=h.length;l<u;l++)s=h[l],d===s.email.toString().toLowerCase()&&(m[d]=!0,p=!0);p||r.push(g)}r.length>1&&t.push({name:"reply all",type:"emailReplyAll",icon:"reply-all",href:"#"}),t.push({name:"forward",type:"emailForward",icon:"forward",href:"#"})}return"Customer"===n.sender.name&&"phone"===n.type.name&&(t.push({name:"reply",type:"emailReply",icon:"reply",href:"#"}),t.push({name:"forward",type:"emailForward",icon:"forward",href:"#"})),"Agent"===n.sender.name&&"phone"===n.type.name&&(t.push({name:"reply",type:"emailReply",icon:"reply",href:"#"}),t.push({name:"forward",type:"emailForward",icon:"forward",href:"#"})),t},n.perform=function(t,e,n,i,s){return"emailReply"!==e&&"emailReplyAll"!==e&&"emailForward"!==e||("emailReply"===e?this.emailReply(!1,n,i,s):"emailReplyAll"===e?this.emailReply(!0,n,i,s):"emailForward"===e&&this.emailForward(n,i,s),!0)},n.emailReply=function(t,e,n,i){var s,r,o,a,l,c,u;return null==t&&(t=!1),u=App.TicketArticleType.find(n.type_id),r=App.User.find(n.created_by_id),a=App.EmailAddress.all(),i.scrollToCompose(),s=App.Utils.getRecipientArticle(e,n,r,u,a,t),i.Config.get("ui_ticket_zoom_article_email_subject")&&(_.isEmpty(n.subject)?s.subject=e.title:s.subject=n.subject),o=i.el.closest(".ticketZoom").find('.article-add [data-name="body"]').html()||"",c="bottom",l=App.ClipBoard.getSelected("html"),l&&(l=App.Utils.htmlCleanup(l).html(),l=App.Utils.htmlImage2DataUrl(l)),l||(l=App.ClipBoard.getSelected("text"))&&(l=App.Utils.textCleanup(l),l=App.Utils.text2html(l)),!l&&n&&App.Config.get("ui_ticket_zoom_article_email_full_quote")&&(c="top",n.content_type.match("html")&&(l=App.Utils.textCleanup(n.body)),n.content_type.match("plain")&&(l=App.Utils.textCleanup(n.body),l=App.Utils.text2html(l))),l&&(l='<div><br><br/></div><div><blockquote type="cite">'+l+"</blockquote></div><div><br></div>",o=l+o),s.body=o,u=App.TicketArticleType.findByAttribute({name:"email"}),s.subtype="reply",App.Event.trigger("ui::ticket::setArticleType",{ticket:e,type:u,article:s,signaturePosition:c}),!0},n.emailForward=function(t,e,n){var i,s,r,o;return n.scrollToCompose(),r="top",s="",e.content_type.match("html")&&(s=App.Utils.textCleanup(e.body),s=App.Utils.htmlImage2DataUrl(e.body)),e.content_type.match("plain")&&(s=App.Utils.textCleanup(e.body),s=App.Utils.text2html(s)),s='<br/><div>---Begin forwarded message:---<br/><br/></div><div><blockquote type="cite">'+s+"</blockquote></div><div><br></div>",i={},i.body=s,n.Config.get("ui_ticket_zoom_article_email_subject")&&(_.isEmpty(e.subject)?i.subject=t.title:i.subject=e.subject),o=App.TicketArticleType.findByAttribute({name:"email"}),i.subtype="forward",App.Event.trigger("ui::ticket::setArticleType",{ticket:t,type:o,article:i,signaturePosition:r,focus:"to"}),App.Ajax.request({id:"ticket_attachment_clone"+n.form_id,type:"POST",
url:App.Config.get("api_path")+"/ticket_attachment_upload_clone_by_article/"+e.id,data:JSON.stringify({form_id:n.form_id}),processData:!0,success:function(i){if(!_.isEmpty(i.attachments))return App.Event.trigger("ui::ticket::addArticleAttachent",{ticket:t,article:e,attachments:i.attachments,form_id:n.form_id})}}),!0},n.articleTypes=function(t,e,n){var i,s;return n.permissionCheck("ticket.agent")?(s=e.group,s.email_address_id?(i=["to","cc","subject"],n.Config.get("ui_ticket_zoom_article_email_subject")||(i=["to","cc"]),t.push({name:"email",icon:"email",attributes:i,internal:!1,features:["attachment"]}),t):t):t},n.setArticleTypePre=function(t,e,n){"email"!==t&&n.$("[data-name=body] [data-signature=true]").remove()},n.setArticleTypePost=function(t,e,n,i){var s,r,o,a,l,c,u,p;if("email"===t)return p=App.Ticket.fullLocal(e.id),o=p.group_id,u=App.TaskManager.get(n.taskKey),u&&u.state&&u.state.ticket&&u.state.ticket.group_id&&(o=u.state.ticket.group_id),r=App.Group.find(o),a=void 0,r&&r.signature_id&&(a=App.Signature.find(r.signature_id)),a&&a.body&&(c=n.$("[data-signature=true]").data("signature-id"),c&&c.toString()!==a.id.toString()&&n.$('[data-name=body] [data-signature="true"]').remove(),l=App.Utils.replaceTags(a.body,{user:App.Session.get(),ticket:p,config:App.Config.all()}),s=n.$("[data-name=body]"),App.Utils.signatureCheck(s.html()||"",l))?(App.Utils.htmlLastLineEmpty(s)||s.append("<br><br>"),a=$('<div data-signature="true" data-signature-id="'+a.id+'">'+l+"</div>"),App.Utils.htmlStrip(a),"top"===i?s.prepend(a):s.append(a),n.$("[data-name=body]").replaceWith(s)):void 0},n.validation=function(t,e,n){return"email"!==t||(_.isEmpty(e.to)&&_.isEmpty(e.cc)?(new App.ControllerModal({head:"Text missing",buttonCancel:"Cancel",buttonCancelClass:"btn--danger",buttonSubmit:!1,message:'Need recipient in "To" or "Cc".',shown:!0,small:!0,container:n.el.closest(".content")}),!1):!_.isEmpty(e.body)||(new App.ControllerModal({head:"Text missing",buttonCancel:"Cancel",buttonCancelClass:"btn--danger",buttonSubmit:!1,message:"Text needed",shown:!0,small:!0,container:n.el.closest(".content")}),!1))},n}(App.Controller),App.Config.set("200-EmailReply",t,"TicketZoomArticleAction")}.call(this),function(){var t;t=function(){function t(){}return t.action=function(t,e,n,i){return i.permissionCheck("ticket.customer")?t:("facebook feed post"!==n.type.name&&"facebook feed comment"!==n.type.name||t.push({name:"reply",type:"facebookFeedReply",icon:"reply",href:"#"}),t)},t.perform=function(t,e,n,i,s){var r;return"facebookFeedReply"!==e||(s.scrollToCompose(),e=App.TicketArticleType.findByAttribute("name","facebook feed comment"),r={to:"",cc:"",body:"",in_reply_to:""},App.Event.trigger("ui::ticket::setArticleType",{ticket:n,type:e,article:r}),!0)},t.articleTypes=function(t,e,n){var i;return n.permissionCheck("ticket.agent")&&e&&e.create_article_type_id?(i=App.TicketArticleType.find(e.create_article_type_id).name,"facebook feed post"===i&&t.push({name:"facebook feed comment",icon:"facebook",attributes:[],internal:!1,features:[]}),t):t},t.params=function(t,e,n){return"facebook feed comment"===t&&(App.Utils.htmlRemoveRichtext(n.$("[data-name=body]"),!1),e.content_type="text/plain",e.body=App.Utils.html2text(e.body,!0)),e},t}(),App.Config.set("300-FacebookReply",t,"TicketZoomArticleAction")}.call(this),function(){var t;t=function(){function t(){}return t.action=function(t,e,n,i){return i.permissionCheck("ticket.customer")?t:(!0===n.internal?t.push({name:"set to public",type:"public",icon:"lock-open"}):t.push({name:"set to internal",type:"internal",icon:"lock"}),t)},t.perform=function(t,e,n,i,s){var r;return"internal"!==e&&"public"!==e||(r=!0,!0===i.internal&&(r=!1),s.lastAttributres.internal=r,i.updateAttributes({internal:r}),r?t.addClass("is-internal"):t.removeClass("is-internal"),s.render(),!0)},t}(),App.Config.set("100-Internal",t,"TicketZoomArticleAction")}.call(this),function(){var t;t=function(){function t(){}return t.action=function(t){return t},t.perform=function(){return!0},t.articleTypes=function(t,e,n){var i;return i=!1,n.permissionCheck("ticket.agent")&&(i=n.Config.get("ui_ticket_zoom_article_note_new_internal")),t.push({name:"note",icon:"note",attributes:[],internal:i,features:["attachment"]}),t},t}(),App.Config.set("100-Note",t,"TicketZoomArticleAction")}.call(this),function(){var t;t=function(){function t(){}return t.action=function(t){return t},t.perform=function(){return!0},t.articleTypes=function(t,e,n){return n.permissionCheck("ticket.agent")?(t.push({name:"phone",icon:"phone",attributes:[],internal:!1,features:["attachment"]}),t):t},t}(),App.Config.set("100-PhoneReply",t,"TicketZoomArticleAction")}.call(this),function(){var t;t=function(){function t(){}return t.action=function(t,e,n,i){return i.permissionCheck("ticket.customer")?t:(t.push({name:"split",type:"split",icon:"split",href:"#ticket/create/"+n.ticket_id+"/"+n.id}),t)},t.perform=function(t,e,n,i,s){return"split"!==e||(s.navigate("#ticket/create/"+i.ticket_id+"/"+i.id),!0)},t}(),App.Config.set("700-Split",t,"TicketZoomArticleAction")}.call(this),function(){var t;t=function(){function t(){}return t.action=function(t,e,n,i){return i.permissionCheck("ticket.customer")?t:("Customer"===n.sender.name&&"telegram personal-message"===n.type.name&&t.push({name:"reply",type:"telegramPersonalMessageReply",icon:"reply",href:"#"}),t)},t.perform=function(t,e,n,i,s){var r;return"telegramPersonalMessageReply"!==e||(s.scrollToCompose(),e=App.TicketArticleType.find(i.type_id),r={to:"",cc:"",body:"",in_reply_to:""},i.message_id&&(r.in_reply_to=i.message_id),r.body=s.el.closest(".ticketZoom").find('.article-add [data-name="body"]').html().trim()||"",App.Event.trigger("ui::ticket::setArticleType",{ticket:n,type:e,article:r,position:"end"}),!0)},t.articleTypes=function(t,e,n){return n.permissionCheck("ticket.agent")&&e&&e.create_article_type_id?"telegram personal-message"!==App.TicketArticleType.find(e.create_article_type_id).name?t:(t.push({name:"telegram personal-message",icon:"telegram",attributes:[],internal:!1,features:["attachment"],maxTextLength:1e4,warningTextLength:5e3}),t):t},t.setArticleTypePost=function(t,e,n){var i,s;if("telegram personal-message"===t)return s=n.$("[data-name=body]").html(),i=App.Utils.htmlRemoveRichtext(s),i&&i.html()!==s?n.$("[data-name=body]").html(i):void 0},t.params=function(t,e,n){return"telegram personal-message"===t&&(App.Utils.htmlRemoveRichtext(n.$("[data-name=body]"),!1),e.content_type="text/plain",e.body=App.Utils.html2text(e.body,!0)),e},t}(),App.Config.set("300-TelegramReply",t,"TicketZoomArticleAction")}.call(this),function(){var t;t=function(){function t(){}return t.action=function(t,e,n,i){return i.permissionCheck("ticket.customer")?t:("twitter status"===n.type.name&&t.push({name:"reply",type:"twitterStatusReply",icon:"reply",href:"#"}),"twitter direct-message"===n.type.name&&t.push({name:"reply",type:"twitterDirectMessageReply",icon:"reply",href:"#"}),t)},t.perform=function(t,e,n,i,s){return"twitterStatusReply"!==e&&"twitterDirectMessageReply"!==e||("twitterStatusReply"===e?this.twitterStatusReply(n,i,s):"twitterDirectMessageReply"===e&&this.twitterDirectMessageReply(n,i,s),!0)},t.twitterStatusReply=function(t,e,n){var i,s,r,o,a,l,c,u,p,h;if(n.scrollToCompose(),h=App.TicketArticleType.find(e.type_id),i={to:"",cc:"",body:"",in_reply_to:""},e.message_id&&(i.in_reply_to=e.message_id),s=n.el.closest(".ticketZoom").find('.article-add [data-name="body"]').html().trim()||"",i.body=s,p=e.from,e.to&&(p&&(p+=", "),p+=e.to),p)for(u="",c=p.split(","),o=0,a=c.length;o<a;o++)(l=c[o])&&(l=l.trim().toLowerCase(),r=!1,s&&s.toLowerCase().match(l)&&(r=!0),l===("@"+t.preferences.channel_screen_name).toLowerCase()&&(r=!0),!1===r&&(""!==u&&(u+=" "),u+=l));return i.body=s?u+" "+s+"&nbsp;":u+"&nbsp;",App.Event.trigger("ui::ticket::setArticleType",{ticket:t,type:h,article:i,position:"end"})},t.twitterDirectMessageReply=function(t,e,n){var i,s,r,o;return o=App.TicketArticleType.find(e.type_id),r=App.TicketArticleSender.find(e.sender_id),s=App.User.find(e.created_by_id),n.scrollToCompose(),i={to:"",cc:"",body:"",in_reply_to:""},e.message_id&&(i.in_reply_to=e.message_id),"Agent"===r.name?i.to=e.to:i.to=e.from,!i.to&&s&&s.accounts&&(i.to=s.accounts.twitter.username||s.accounts.twitter.uid),App.Event.trigger("ui::ticket::setArticleType",{ticket:t,type:o,article:i})},t.articleTypes=function(t,e,n){var i,s;return n.permissionCheck("ticket.agent")&&e&&e.create_article_type_id?(i=App.TicketArticleType.find(e.create_article_type_id).name,"twitter status"===i?(s=["body:limit","body:initials"],n.Config.get("ui_ticket_zoom_article_twitter_initials")||(s=["body:limit"]),t.push({name:"twitter status",icon:"twitter",attributes:[],internal:!1,features:s,maxTextLength:280,warningTextLength:30})):"twitter direct-message"===i&&(s=["body:limit","body:initials"],n.Config.get("ui_ticket_zoom_article_twitter_initials")||(s=["body:limit"]),t.push({name:"twitter direct-message",icon:"twitter",attributes:["to"],internal:!1,features:s,maxTextLength:1e4,warningTextLength:500})),t):t},t.validation=function(t,e,n){if("twitter status"===t&&n.maxTextLength-App.Utils.textLengthWithUrl(e.body)<0)return!1;if("twitter direct-message"===e.type){if(n.maxTextLength-App.Utils.textLengthWithUrl(e.body)<0)return!1;if(_.isEmpty(e.to))return new App.ControllerModal({head:"Text missing",buttonCancel:"Cancel",buttonCancelClass:"btn--danger",buttonSubmit:!1,message:'Need recipient in "To".',shown:!0,small:!0,container:n.el.closest(".content")}),!1}return!0},t.setArticleTypePost=function(t,e,n){var i,s;if("twitter status"===t||"twitter direct-message"===t)return s=n.$("[data-name=body]").html(),i=App.Utils.htmlRemoveRichtext(s),i&&i.html()!==s?n.$("[data-name=body]").html(i):void 0},t.params=function(t,e,n){return"twitter status"===t&&(App.Utils.htmlRemoveRichtext(n.$("[data-name=body]"),!1),e.content_type="text/plain",e.body=App.Utils.html2text(e.body,!0)),"twitter direct-message"===t&&(App.Utils.htmlRemoveRichtext(n.$("[data-name=body]"),!1),e.content_type="text/plain",e.body=App.Utils.html2text(e.body,!0)),e},t}(),App.Config.set("300-TwitterReply",t,"TicketZoomArticleAction")}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.TicketZoomArticleActions=function(n){function i(){this.scrollToCompose=t(this.scrollToCompose,this),this.actionPerform=t(this.actionPerform,this),i.__super__.constructor.apply(this,arguments),this.render()}return e(i,n),i.prototype.events={"click .js-ArticleAction":"actionPerform"},i.prototype.render=function(){var t;return t=this.actionRow(this.ticket,this.article),t?this.html(App.view("ticket_zoom/article_view_actions")({article:this.article,actions:t})):this.html("")},i.prototype.actionRow=function(t,e){var n,i,s,r,o,a,l;for(n=App.Config.get("TicketZoomArticleAction"),a=_.keys(n).sort(),i=[],r=0,l=a.length;r<l;r++)o=a[r],(s=n[o])&&(i=s.action(i,t,e,this));return i},i.prototype.actionPerform=function(t){var e,n,i,s,r,o,a,l,c,u;for(t.preventDefault(),i=$(t.target).closest(".ticket-article-item"),u=$(t.currentTarget).attr("data-type"),c=App.Ticket.fullLocal(this.ticket.id),n=App.TicketArticle.fullLocal(this.article.id),e=App.Config.get("TicketZoomArticleAction"),a=_.keys(e).sort(),[],r=0,l=a.length;r<l;r++)if(o=a[r],(s=e[o])&&!s.perform(i,u,c,n,this))return},i.prototype.scrollToCompose=function(){return this.el.closest(".content").find(".article-add").ScrollTo()},i}(App.Controller)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.TicketZoomArticleImageView=function(n){function i(){return this.onSubmit=t(this.onSubmit,this),i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.buttonClose=!0,i.prototype.buttonCancel=!0,i.prototype.buttonSubmit="Download",i.prototype.buttonClass="btn--success",i.prototype.head="",i.prototype.large=!0,i.prototype.events={"submit form":"submit","click .js-cancel":"cancel","click .js-close":"cancel"},i.prototype.content=function(){return'<div class="centered imagePreview">'+this.image+"</div>"},i.prototype.onSubmit=function(){var t;return t=$(this.image).attr("src")+"?disposition=attachment",window.open(t,"_blank")},i}(App.ControllerModal)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.TicketZoomArticleNew=function(n){function i(){this.bindAttachmentDelete=t(this.bindAttachmentDelete,this),this.renderAttachment=t(this.renderAttachment,this),this.onDragleave=t(this.onDragleave,this),this.onDragenter=t(this.onDragenter,this),this.closeTextarea=t(this.closeTextarea,this),this.openTextarea=t(this.openTextarea,this),this.updateInitials=t(this.updateInitials,this),this.updateLetterCount=t(this.updateLetterCount,this),this.setArticleTypePost=t(this.setArticleTypePost,this),this.setArticleTypePre=t(this.setArticleTypePre,this),this.setArticleInternal=t(this.setArticleInternal,this),this.hideSelectableArticleType=t(this.hideSelectableArticleType,this),this.selectArticleType=t(this.selectArticleType,this),this.showSelectableArticleType=t(this.showSelectableArticleType,this),this.validate=t(this.validate,this),this.params=t(this.params,this),this.release=t(this.release,this),this.setPossibleArticleTypes=t(this.setPossibleArticleTypes,this);var e,n,s,r;if(i.__super__.constructor.apply(this,arguments),this.internalSelector=!0,this.type=this.defaults.type||"note",this.setPossibleArticleTypes(),this.permissionCheck("ticket.customer")&&(this.internalSelector=!1),this.textareaHeight={open:148,closed:20},this.dragEventCounter=0,this.attachments=[],this.render(),(this.defaults.body||this.isIE10())&&this.openTextarea(null,!0),_.isArray(this.defaults.attachments))for(r=this.defaults.attachments,n=0,s=r.length;n<s;n++)e=r[n],this.renderAttachment(e);this.bind("ui::ticket::setArticleType",function(t){return function(e){var n,i,s;if(e.ticket.id.toString()===t.ticket_id.toString()){t.setArticleTypePre(e.type.name,e.signaturePosition),t.openTextarea(null,!0),i=e.article;for(n in i)s=i[n],"body"===n?t.$('[data-name="'+n+'"]').html(s):t.$('[name="'+n+'"]').val(s).trigger("change");return t.setArticleTypePost(e.type.name,e.signaturePosition),e.focus?void t.$('[name="'+e.focus+'"], [data-name="'+e.focus+'"]').focus().parent().find(".token-input").focus():"end"===e.position?void t.placeCaretAtEnd(t.textarea.get(0)):t.textarea.focus()}}}(this)),this.bind("ui::ticket::addArticleAttachent",function(t){return function(e){var n,i,s,r,o;if(e.ticket.id.toString()===t.ticket_id.toString()&&!_.isEmpty(e.attachments)){for(r=e.attachments,o=[],i=0,s=r.length;i<s;i++)n=r[i],o.push(t.renderAttachment(n));return o}}}(this)),this.bind("ui::ticket::taskReset",function(t){return function(e){if(e.ticket_id.toString()===t.ticket_id.toString())return t.type="note",t.defaults={},t.render()}}(this)),this.bind("ui::ticket::shown",function(t){return function(e){if(e.ticket_id.toString()===t.ticket.id.toString())return t.tokanice()}}(this)),this.bind("ui:rerender",function(t){return function(){return t.render()}}(this))}return e(i,n),i.prototype.elements={".js-textarea":"textarea",".attachmentPlaceholder":"attachmentPlaceholder",".attachmentPlaceholder-inputHolder":"attachmentInputHolder",".attachmentPlaceholder-hint":"attachmentHint",".article-add":"articleNewEdit",".attachments":"attachmentsHolder",".attachmentUpload":"attachmentUpload",".attachmentUpload-progressBar":"progressBar",".js-percentage":"progressText",".js-cancel":"cancelContainer",".textBubble":"textBubble",".editControls-item":"editControlItem",".js-letterCount":"letterCount",".js-signature":"signature"},i.prototype.events={"click .js-toggleVisibility":"toggleVisibility","click .js-articleTypeItem":"selectArticleType","click .js-selectedArticleType":"showSelectableArticleType","click .js-mail-inputs":"stopPropagation","click .js-writeArea":"propagateOpenTextarea","click .list-entry-type div":"changeType","focus .js-textarea":"openTextarea","input .js-textarea":"updateLetterCount"},i.prototype.tokanice=function(){return App.Utils.tokaniceEmails(".content.active .js-to, .js-cc, js-bcc")},i.prototype.setPossibleArticleTypes=function(){var t,e,n,i,s;for(this.articleTypes=[],i=this.actions(),s=[],e=0,n=i.length;e<n;e++)t=i[e],t&&t.articleTypes?s.push(this.articleTypes=t.articleTypes(this.articleTypes,this.ticket,this)):s.push(void 0);return s},i.prototype.placeCaretAtEnd=function(t){var e,n,i;return t.focus(),"undefined"!=typeof window.getSelection&&"undefined"!=typeof document.createRange?(e=document.createRange(),e.selectNodeContents(t),e.collapse(!1),n=window.getSelection(),n.removeAllRanges(),void n.addRange(e)):"undefined"!=typeof document.body.createTextRange?(i=document.body.createTextRange(),i.moveToElementText(t),i.collapse(!1),i.select()):void 0},i.prototype.isIE10=function(){return Function("/*@cc_on return document.documentMode===10@*/")()},i.prototype.release=function(){return this.subscribeIdTextModule&&App.Ticket.unsubscribe(this.subscribeIdTextModule),$(window).off("click.ticket-zoom-select-type"),$(window).on("click.ticket-zoom-textarea")},i.prototype.render=function(){var t,e,n;if(n=App.Ticket.fullLocal(this.ticket_id),this.html(App.view("ticket_zoom/article_new")({ticket:n,articleTypes:this.articleTypes,article:this.defaults,form_id:this.form_id,isCustomer:this.permissionCheck("ticket.customer"),internalSelector:this.internalSelector})),this.setArticleTypePre(this.type),this.setArticleTypePost(this.type),new App.WidgetAvatar({el:this.$(".js-avatar"),object_id:App.Session.get("id"),size:40,position:"right"}),this.tokanice(),this.$('[data-name="body"]').ce({mode:"richtext",multiline:!0,maxlength:5e4}),html5Upload.initialize({uploadUrl:App.Config.get("api_path")+"/ticket_attachment_upload",dropContainer:this.$(".article-add").get(0),cancelContainer:this.cancelContainer,inputField:this.$(".article-attachment input").get(0),key:"File",data:{form_id:this.form_id},maxSimultaneousUploads:1,onFileAdded:function(t){return function(e){return e.on({onStart:function(){if(t.attachmentPlaceholder.addClass("hide"),t.attachmentUpload.removeClass("hide"),t.cancelContainer.removeClass("hide"),t.callbackFileUploadStart)return t.callbackFileUploadStart()},onAborted:function(){if(t.attachmentPlaceholder.removeClass("hide"),t.attachmentUpload.addClass("hide"),t.$(".article-attachment input").val(""),t.callbackFileUploadStop)return t.callbackFileUploadStop()},onCompleted:function(e){if(e=JSON.parse(e),t.attachments.push(e.data),t.attachmentPlaceholder.removeClass("hide"),t.attachmentUpload.addClass("hide"),t.progressBar.width(parseInt(0)+"%"),t.progressText.text(""),t.renderAttachment(e.data),t.$(".article-attachment input").val(""),t.callbackFileUploadStop)return t.callbackFileUploadStop()},onProgress:function(e){if(t.progressBar.width(parseInt(e)+"%"),t.progressText.text(parseInt(e)),parseInt(e)>=90)return t.cancelContainer.addClass("hide")}})}}(this)}),this.bindAttachmentDelete(),!this.permissionCheck("ticket.customer")&&(e=new App.WidgetTextModule({el:this.$(".js-textarea").parent(),data:{ticket:n,user:App.Session.get(),config:App.Config.all()}}),t=function(t){return e.reload({ticket:t,user:App.Session.get()})},!this.subscribeIdTextModule))return this.subscribeIdTextModule=n.subscribe(t)},i.prototype.params=function(){var t,e,n,i,s,r,o,a,l,c,u;for(o=this.formParam(this.$(".article-add")),o.body&&(o.from=this.Session.get().displayName(),o.ticket_id=this.ticket_id,o.form_id=this.form_id,o.content_type="text/html",this.permissionCheck("ticket.customer")?(c=App.TicketArticleSender.findByAttribute("name","Customer"),u=App.TicketArticleType.findByAttribute("name","web"),o.type_id=u.id,o.sender_id=c.id):(c=App.TicketArticleSender.findByAttribute("name","Agent"),u=App.TicketArticleType.findByAttribute("name",o.type),o.sender_id=c.id,o.type_id=u.id)),o.internal?o.internal=!0:o.internal=!1,a=this.actions(),n=0,s=a.length;n<s;n++)(e=a[n])&&e.params&&(o=e.params(o.type,o,this));for(l=this.articleTypes,i=0,r=l.length;i<r;i++)if(t=l[i],t.name===this.type&&_.contains(t.features,"body:initials")){"text/html"===o.content_type?o.body=o.body+"</br>"+this.signature.text():o.body=o.body+"\n"+this.signature.text();break}return o},i.prototype.validate=function(){var t,e,n,i,s,r,o;if(r=this.params(),t=this.$(".article-add .textBubble .attachments .attachment").length,!r.body&&t>0)return new App.ControllerModal({head:"Text missing",buttonCancel:"Cancel",buttonCancelClass:"btn--danger",buttonSubmit:!1,message:"Please fill also some text in!",shown:!0,small:!0,container:this.el.closest(".content")}),!1;if(r.body&&t<1&&(s=App.Utils.checkAttachmentReference(r.body))&&!confirm(App.i18n.translateContent("You use %s in text but no attachment is attached. Do you want to continue?",s)))return!1;for(o=this.actions(),n=0,i=o.length;n<i;n++)if((e=o[n])&&e.validation&&!e.validation(r.type,r,this))return!1;return!0},i.prototype.changeType=function(t){return $(t.target).addClass("active").siblings(".active").removeClass("active")},i.prototype.toggleVisibility=function(t){return t.stopPropagation(),this.articleNewEdit.hasClass("is-public")?this.setArticleInternal(!0):this.setArticleInternal(!1)},i.prototype.showSelectableArticleType=function(t){return t.stopPropagation(),this.el.find(".js-articleTypes").removeClass("is-hidden"),$(window).on("click.ticket-zoom-select-type",this.hideSelectableArticleType)},i.prototype.selectArticleType=function(t){var e;return t.stopPropagation(),e=$(t.target).closest(".pop-selectable").data("value"),this.setArticleTypePre(e),this.hideSelectableArticleType(),this.setArticleTypePost(e),$(window).off("click.ticket-zoom-select-type"),this.tokanice()},i.prototype.hideSelectableArticleType=function(){return this.el.find(".js-articleTypes").addClass("is-hidden")},i.prototype.setArticleInternal=function(t){return!0===t?(this.articleNewEdit.removeClass("is-public").addClass("is-internal"),void this.$("[name=internal]").val("true")):(this.articleNewEdit.addClass("is-public").removeClass("is-internal"),this.$("[name=internal]").val(""))},i.prototype.setArticleTypePre=function(t,e){var n,i,s,r,o,a,l,c,u,p,h,d,f,g,m,v,y,b,w,k,T;if(null==e&&(e="bottom"),T=this.isScrolledToBottom(),t!==this.type)for(v=["to","cc","bcc","subject","in_reply_to"],r=0,c=v.length;r<c;r++)a=v[r],this.$("[name="+a+"]").val("").trigger("change");for(this.type=t,this.$("[name=type]").val(t).trigger("change"),this.articleNewEdit.attr("data-type",t),this.$(".js-selectableTypes").addClass("hide").filter("[data-type='"+t+"']").removeClass("hide"),this.setPossibleArticleTypes(),s={},y=this.articleTypes,o=0,u=y.length;o<u;o++)i=y[o],i.name===t&&(s=i);for(s&&(s.internal?this.setArticleInternal(!0):this.setArticleInternal(!1)),this.maxTextLength=void 0,this.warningTextLength=void 0,b=this.articleTypes,l=0,p=b.length;l<p;l++)if(n=b[l],n.name===t){for(this.$(".form-group").addClass("hide"),w=n.attributes,f=0,h=w.length;f<h;f++)m=w[f],this.$("[name="+m+"]").closest(".form-group").removeClass("hide");for(this.$(".article-attachment, .attachments, .js-textSizeLimit").addClass("hide"),k=n.features,g=0,d=k.length;g<d;g++)m=k[g],"attachment"===m&&this.$(".article-attachment, .attachments").removeClass("hide"),"body:initials"===m&&this.updateInitials(),"body:limit"===m&&(this.maxTextLength=n.maxTextLength,this.warningTextLength=n.warningTextLength,this.delay(this.updateLetterCount,600),this.$(".js-textSizeLimit").removeClass("hide"))}if(this.$("[data-name=body] img").each(function(t,e){var n,i,s,r,o;if(n=$(e),o=n.attr("src"),!_.isEmpty(o)&&!o.match(/^data:image/i))return i=document.createElement("canvas"),i.width=e.width,i.height=e.height,s=i.getContext("2d"),s.drawImage(e,0,0),r=i.toDataURL(),n.attr("src",r)}),T)return this.scrollToBottom()},i.prototype.setArticleTypePost=function(t,e){var n,i,s,r,o;for(null==e&&(e="bottom"),r=this.actions(),o=[],n=0,i=r.length;n<i;n++)s=r[n],s&&s.setArticleTypePost?o.push(s.setArticleTypePost(this.type,this.ticket,this,e)):o.push(void 0);return o},i.prototype.isScrolledToBottom=function(){return this.el.scrollParent().scrollTop()+this.el.scrollParent().height()===this.el.scrollParent().prop("scrollHeight")},i.prototype.scrollToBottom=function(){return this.el.scrollParent().scrollTop(this.el.scrollParent().prop("scrollHeight"))},i.prototype.propagateOpenTextarea=function(t){return t.stopPropagation(),this.textarea.focus()},i.prototype.updateLetterCount=function(){var t,e,n;if(this.maxTextLength&&this.warningTextLength)return e=this.params(),n=App.Utils.textLengthWithUrl(e.body),n=this.maxTextLength-n,t=function(){switch(!1){case!(n<0):return"label-danger";case!(n<this.warningTextLength):return"label-warning";default:return""}}.call(this),this.letterCount.text(n).removeClass("label-danger label-warning").addClass(t)},i.prototype.updateInitials=function(t){return void 0===t&&(t="/"+App.User.find(this.Session.get("id")).initials()),this.signature.text(t)},i.prototype.openTextarea=function(t,e){var n;if(t&&t.stopPropagation(),!this.articleNewEdit.hasClass("is-open"))return n=300,e&&(n=0),this.articleNewEdit.addClass("is-open"),this.textarea.velocity({properties:{minHeight:this.textareaHeight.open-38+"px"},options:{duration:n,easing:"easeOutQuad",complete:function(t){return function(){return $(window).on("click.ticket-zoom-textarea",t.closeTextarea)}}(this)}}),this.textBubble.velocity({properties:{paddingBottom:28},options:{duration:n,easing:"easeOutQuad"}}),this.textarea.velocity("scroll",{container:this.textarea.scrollParent(),offset:99999,duration:300,easing:"easeOutQuad",queue:!1}),this.editControlItem.removeClass("is-hidden").velocity({properties:{opacity:[1,0],translateX:[0,20],translateZ:0},options:{duration:300,stagger:50,drag:!0}}),this.attachmentPlaceholder.velocity({properties:{translateX:-this.attachmentInputHolder.position().left+"px"},options:{duration:n,easing:"easeOutQuad"}}),this.attachmentHint.velocity({properties:{opacity:0},options:{duration:n}})},i.prototype.closeTextarea=function(){if(!this.textarea.text().trim()&&!this.attachments.length&&!this.isIE10())return $(window).off("click.ticket-zoom-textarea"),this.textarea.velocity({properties:{minHeight:this.textareaHeight.closed+"px"},options:{duration:300,easing:"easeOutQuad",complete:function(t){return function(){return t.articleNewEdit.removeClass("is-open")}}(this)}}),this.textBubble.velocity({properties:{paddingBottom:10},options:{duration:300,easing:"easeOutQuad"}}),this.attachmentPlaceholder.velocity({properties:{translateX:0},options:{duration:300,easing:"easeOutQuad"}}),this.attachmentHint.velocity({properties:{opacity:1},options:{duration:300}}),this.editControlItem.velocity({properties:{opacity:[0,1],translateX:[20,0],translateZ:0},options:{duration:100,stagger:50,drag:!0,complete:function(t){return $(t).addClass("is-hidden")}}})},i.prototype.onDragenter=function(){return 0===this.dragEventCounter&&this.openTextarea(),this.dragEventCounter++,this.articleNewEdit.parent().addClass("is-dropTarget")},i.prototype.onDragleave=function(){if(0===--this.dragEventCounter)return this.articleNewEdit.parent().removeClass("is-dropTarget")},i.prototype.renderAttachment=function(t){return this.attachmentsHolder.append(App.view("generic/attachment_item")(t))},i.prototype.bindAttachmentDelete=function(){return this.attachmentsHolder.on("click",".js-delete",function(t){return function(e){var n,i;if(i=$(e.currentTarget).data("id"),t.attachments=_.filter(t.attachments,function(t){if(t.id.toString()!==i.toString())return t}),App.Ajax.request({type:"DELETE",url:App.Config.get("api_path")+"/ticket_attachment_upload",data:JSON.stringify({id:i}),processData:!1}),n=$(e.currentTarget).closest(".attachments"),$(e.currentTarget).closest(".attachment").remove(),0===n.find(".attachment").length)return n.empty()}}(this))},i.prototype.actions=function(){var t,e,n,i,s,r,o;for(t=App.Config.get("TicketZoomArticleAction"),s=_.keys(t).sort(),e=[],n=0,r=s.length;n<r;n++)i=s[n],(o=t[i])&&e.push(o);return e},i}(App.Controller)}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var s in e)i.call(e,s)&&(t[s]=e[s]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;App.TicketZoomArticleView=function(i){function s(){this.ticketArticleInsertByIndex=e(this.ticketArticleInsertByIndex,this),this.run=e(this.run,this),this.execute=e(this.execute,this),s.__super__.constructor.apply(this,arguments),this.articleController={},this.run()}return n(s,i),s.prototype.execute=function(t){return this.ticket_article_ids=t.ticket_article_ids,this.run()},s.prototype.run=function(){var e,n,i,s,r,o,a,l,c,u,p,h,d,f,g,m,v;for(e=[],d=this.ticket_article_ids,a=l=0,u=d.length;l<u;a=++l)v=d[a],s=v.toString(),this.articleController[s]||(r=$("<div></div>"),this.articleController[s]=new t({ticket:this.ticket,object_id:v,el:r,ui:this.ui,highligher:this.highligher,form_id:this.form_id}),this.ticketArticleInsertByIndex(a,r)||e.push(r));this.el.append(e),f=this.articleController,m=[];for(n in f){for(i=f[n],o=!1,g=this.ticket_article_ids,c=0,p=g.length;c<p;c++)h=g[c],h.toString()===n.toString()&&(o=!0);o?m.push(void 0):(i.remove(),m.push(delete this.articleController[n.toString()]))}return m},s.prototype.ticketArticleInsertByIndex=function(t,e){var n,i,s,r,o,a,l,c;if(!this.$(".ticket-article-item").length)return!1;for(s=r=a=t;a<=0?r<=0:r>=0;s=a<=0?++r:--r)if((i=this.ticket_article_ids[s])&&(n=this.$(".ticket-article-item[data-id="+i+"]"),n.length))return n.after(e),!0;for(s=o=l=t,c=this.ticket_article_ids.length-1;l<=c?o<=c:o>=c;s=l<=c?++o:--o)if((i=this.ticket_article_ids[s])&&(n=this.$(".ticket-article-item[data-id="+i+"]"),n.length))return n.before(e),!0;return!1},s}(App.Controller),t=function(t){function i(){this.remove=e(this.remove,this),this.toggleMeta=e(this.toggleMeta,this),this.toggleMetaWithDelay=e(this.toggleMetaWithDelay,this),this.measureSeeMore=e(this.measureSeeMore,this),this.setSeeMore=e(this.setSeeMore,this),this.render=e(this.render,this),this.setHighlighter=e(this.setHighlighter,this),i.__super__.constructor.apply(this,arguments),this.seeMore=!1,this.bind("ui::ticket::shown",function(t){return function(e){if(e.ticket_id.toString()===t.ticket.id.toString())return t.setHighlighter(),t.setSeeMore()}}(this))}return n(i,t),i.prototype.model="TicketArticle",i.prototype.observe={from:!0,to:!0,cc:!0,subject:!0,body:!0,internal:!0,preferences:!0},i.prototype.elements={".textBubble-content":"textBubbleContent",".textBubble-content img":"textBubbleImages",".textBubble-overflowContainer":"textBubbleOverflowContainer"},i.prototype.events={"click .textBubble":"toggleMetaWithDelay","click .textBubble a":"stopPropagation","click .js-toggleFold":"toggleFold","click .richtext-content img":"imageView","click .attachments img":"imageView"},i.prototype.setHighlighter=function(){var t;if(!this.el.is(":hidden"))return t=function(t){return function(){return t.highligher.loadHighlights(t.object_id)}}(this),this.delay(t,200)},i.prototype.render=function(t){var e,n,i,s,r,o,a,l,c,u,p;if(this.el.addClass("ticket-article-item "+t.sender.name.toLowerCase()),this.el.attr("data-id",t.id),this.el.attr("id","article-"+t.id),t.internal?this.el.addClass("is-internal"):this.el.removeClass("is-internal"),c=clone(t.preferences.links)||[],"email"===t.type.name&&(l={name:"Raw",url:this.Config.get("api_path")+"/ticket_article_plain/"+t.id,target:"_blank"},c.push(l)),i=App.TicketArticle.contentAttachments(t),t.attachments)for(u=t.attachments,o=0,a=u.length;o<a;o++)(n=u[o])&&n.preferences&&!0===n.preferences["original-format"]&&(l={url:App.Config.get("api_path")+"/ticket_attachment/"+t.ticket_id+"/"+t.id+"/"+n.id+"?disposition=attachment",name:"Original Formatting",target:"_blank"},c.push(l));return"text/html"===t.content_type?(s=t.body,t.preferences&&t.preferences.signature_detection?(p='<span class="js-signatureMarker"></span>',s=s.replace(p,""),s=s.split("<br>"),s.splice(t.preferences.signature_detection,0,p),s=s.join("<br>")):s=App.Utils.signatureIdentify(s),t.html=s):(r=App.Utils.text2html(t.body),t.html=App.Utils.signatureIdentify(r),(t.html===r||t.preferences&&t.preferences.signature_detection<25)&&(p=!1,
s=t.body,t.preferences&&t.preferences.signature_detection&&(p="########SIGNATURE########",s=s.split("\n"),s.splice(t.preferences.signature_detection,0,p),s=s.join("\n")),p&&(s=App.Utils.textCleanup(s),t.html=App.Utils.text2html(s),t.html=t.html.replace(p,'<span class="js-signatureMarker"></span>')))),t.preferences.delivery_message?void this.html(App.view("ticket_zoom/article_view_delivery_failed")({ticket:this.ticket,article:t,attachments:i,links:c})):"System"===t.sender.name?void this.html(App.view("ticket_zoom/article_view_system")({ticket:this.ticket,article:t,attachments:i,links:c})):(this.html(App.view("ticket_zoom/article_view")({ticket:this.ticket,article:t,attachments:i,links:c})),new App.WidgetAvatar({el:this.$(".js-avatar"),object_id:t.origin_by_id||t.created_by_id,size:40}),new App.TicketZoomArticleActions({el:this.$(".js-article-actions"),ticket:this.ticket,article:t,lastAttributres:this.lastAttributres,form_id:this.form_id}),this.shown=!1,e=function(t){return function(){return t.setSeeMore()}}(this),this.delay(e,50),this.setHighlighter())},i.prototype.setSeeMore=function(){if(!this.el.is(":hidden")&&!this.shown)return this.shown=!0,this.textBubbleImages.each(function(t){return function(e,n){if(!n.complete)return $(n).one("load",t.measureSeeMore)}}(this)),this.measureSeeMore()},i.prototype.measureSeeMore=function(){var t,e,n,i,s,r,o,a,l;return s=560,r=90,t=this.textBubbleContent,n=this.textBubbleOverflowContainer,this.seeMore?void t.css("height","auto"):(t.css("height",""),n.css("opacity",""),l=t.find(".js-signatureMarker"),l.get(0)||(l=t.find("div [data-signature=true]")),a=l.position(),a&&0===a.top&&(a=l.next("div, p, br").position()),e=t.height(),a&&(i=a.top),i&&i<s?(o=i+30,o<r&&(o=r),t.attr("data-height",e+30),t.attr("data-height-origin",o),t.css("height",o+"px"),n.removeClass("hide")):e>s?(t.attr("data-height",e+30),t.attr("data-height-origin",s),t.css("height",s+"px"),n.removeClass("hide")):n.addClass("hide"))},i.prototype.stopPropagation=function(t){return t.stopPropagation()},i.prototype.toggleMetaWithDelay=function(t){var e;return e=120,this.lastClick&&+new Date-this.lastClick<e?clearTimeout(this.toggleMetaTimeout):(this.toggleMetaTimeout=setTimeout(this.toggleMeta,e,t),this.lastClick=+new Date)},i.prototype.toggleMeta=function(t){var e,n,i,s,r,o;return t.preventDefault(),e=300,n=$(t.target).closest(".ticket-article-item"),o=n.find(".article-meta-clip.top"),s=n.find(".article-meta-clip.bottom"),r=n.find(".article-content-meta.top"),i=n.find(".article-content-meta.bottom"),this.elementContainsSelection(n.get(0))?(this.stopPropagation(t),!1):r.hasClass("hide")?(n.addClass("state--folde-out"),i.removeClass("hide"),r.removeClass("hide"),n.velocity("scroll",{container:n.scrollParent(),offset:-n.offset().top+r.outerHeight(),duration:e,easing:"easeOutQuad"}),r.velocity({properties:{translateY:[0,r.outerHeight()],opacity:[1,0]},options:{speed:e,easing:"easeOutQuad"}}),i.velocity({properties:{translateY:[0,-i.outerHeight()],opacity:[1,0]},options:{speed:e,easing:"easeOutQuad"}}),o.velocity({height:r.outerHeight()},e,"easeOutQuad"),s.velocity({height:i.outerHeight()},e,"easeOutQuad")):(n.removeClass("state--folde-out"),n.velocity("scroll",{container:n.scrollParent(),offset:-n.offset().top-r.outerHeight(),duration:e,easing:"easeOutQuad"}),r.velocity({properties:{translateY:0,opacity:[0,1]},options:{speed:e,easing:"easeOutQuad",complete:function(){return r.addClass("hide")}}}),i.velocity({properties:{translateY:[-i.outerHeight(),0],opacity:[0,1]},options:{speed:e,easing:"easeOutQuad",complete:function(){return i.addClass("hide")}}}),o.velocity({height:0},e,"easeOutQuad"),s.velocity({height:0},e,"easeOutQuad"))},i.prototype.toggleFold=function(t){var e,n,i,s;return t.preventDefault(),t.stopPropagation(),e=this.textBubbleContent,n=this.textBubbleOverflowContainer,this.seeMoreOpen?(s=App.i18n.translateContent("See more"),i=e.attr("data-height-origin"),this.seeMoreOpen=!1):(s=App.i18n.translateContent("See less"),i=e.attr("data-height"),this.seeMoreOpen=!0),n.toggleClass("is-open",this.seeMoreOpen).find(".js-toggleFold").text(s),e.velocity({properties:{height:i},options:{duration:300}})},i.prototype.isOrContains=function(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1},i.prototype.elementContainsSelection=function(t){var e,n,i,s;if(s=window.getSelection(),s.rangeCount>0&&s.toString()){for(e=n=0,i=s.rangeCount-1;0<=i?n<=i:n>=i;e=0<=i?++n:--n)if(!this.isOrContains(s.getRangeAt(e).commonAncestorContainer,t))return!1;return!0}return!1},i.prototype.remove=function(){return this.el.remove()},i.prototype.imageView=function(t){return t.preventDefault(),t.stopPropagation(),new App.TicketZoomArticleImageView({image:$(t.target).get(0).outerHTML})},i}(App.ObserverController)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.TicketZoomAttributeBar=function(n){function i(){this.chooseSecondaryAction=t(this.chooseSecondaryAction,this),this.onActionMacroMouseLeave=t(this.onActionMacroMouseLeave,this),this.onActionMacroMouseEnter=t(this.onActionMacroMouseEnter,this),this.performTicketMacro=t(this.performTicketMacro,this),this.closeMacroMenu=t(this.closeMacroMenu,this),this.openMacroMenu=t(this.openMacroMenu,this),this.toggleMacroMenu=t(this.toggleMacroMenu,this),this.checkMacroChanges=t(this.checkMacroChanges,this),this.stop=t(this.stop,this),this.start=t(this.start,this),this.render=t(this.render,this),this.release=t(this.release,this),i.__super__.constructor.apply(this,arguments),this.secondaryAction="stayOnTab",this.subscribeId=App.Macro.subscribe(this.checkMacroChanges),this.render(),this.bind("ui:rerender",function(t){return function(){return t.render()}}(this))}return e(i,n),i.prototype.elements={".js-submitDropdown":"buttonDropdown",".js-reset":"resetButton"},i.prototype.events={"mousedown .js-openDropdownMacro":"toggleMacroMenu","click .js-openDropdownMacro":"preventDefaultAndstopPropagation","mouseup .js-dropdownActionMacro":"performTicketMacro","mouseenter .js-dropdownActionMacro":"onActionMacroMouseEnter","mouseleave .js-dropdownActionMacro":"onActionMacroMouseLeave","click .js-secondaryAction":"chooseSecondaryAction"},i.prototype.release=function(){return App.Macro.unsubscribe(this.subscribeId)},i.prototype.render=function(){var t,e,n,i;return i=!1,this.resetButton.get(0)&&!this.resetButton.hasClass("hide")&&(i=!0),n=App.Macro.findAllByAttribute("active",!0),this.macroLastUpdated=App.Macro.lastUpdatedAt(),!_.isEmpty(n)&&this.permissionCheck("ticket.agent")||(e=!0),t=$(App.view("ticket_zoom/attribute_bar")({macros:n,macroDisabled:e,overview_id:this.overview_id,resetButtonShown:i})),this.setSecondaryAction(this.secondaryAction,t),this.permissionCheck("ticket.agent")&&(this.taskbarWatcher=new App.TaskbarWatcher({taskKey:this.taskKey,el:t.filter(".js-avatars")})),this.html(t)},i.prototype.start=function(){if(this.taskbarWatcher)return this.taskbarWatcher.start()},i.prototype.stop=function(){if(this.taskbarWatcher)return this.taskbarWatcher.stop()},i.prototype.checkMacroChanges=function(){if(App.Macro.lastUpdatedAt()!==this.macroLastUpdated)return this.render()},i.prototype.toggleMacroMenu=function(){return this.buttonDropdown.hasClass("is-open")?void this.closeMacroMenu():this.openMacroMenu()},i.prototype.openMacroMenu=function(){return this.buttonDropdown.addClass("is-open"),$(document).bind("click.buttonDropdown",this.closeMacroMenu)},i.prototype.closeMacroMenu=function(){return this.buttonDropdown.removeClass("is-open"),$(document).unbind("click.buttonDropdown")},i.prototype.performTicketMacro=function(t){var e,n;return n=$(t.currentTarget).data("id"),e=App.Macro.find(n),this.callback(t,e),this.closeMacroMenu()},i.prototype.onActionMacroMouseEnter=function(t){return this.$(t.currentTarget).addClass("is-active")},i.prototype.onActionMacroMouseLeave=function(t){return this.$(t.currentTarget).removeClass("is-active")},i.prototype.chooseSecondaryAction=function(t){var e;return e=$(t.currentTarget).find(".js-secondaryActionLabel").data("type"),this.setSecondaryAction(e,this.el)},i.prototype.setSecondaryAction=function(t,e){var n,i;return n=e.find(".js-secondaryActionLabel[data-type="+t+"]"),i=n.text(),e.find(".js-secondaryAction .js-selectedIcon.is-selected").removeClass("is-selected"),n.closest(".js-secondaryAction").find(".js-selectedIcon").addClass("is-selected"),e.find(".js-secondaryActionButtonLabel").text(i),e.find(".js-secondaryActionButtonLabel").data("type",t)},i}(App.Controller)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.TicketCustomerAvatar=function(n){function i(){return this.render=t(this.render,this),i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.model="Ticket",i.prototype.observe={customer_id:!0},i.prototype.globalRerender=!1,i.prototype.render=function(t){return new App.WidgetAvatar({el:this.el.find(".js-avatar"),object_id:t.customer_id,size:50})},i}(App.ObserverController)}.call(this),function(){var t;t=function(){function t(){}return t.run=function(t,e,n,i,s,r){var o,a,l,c,u,p,h,d;if(r.formMeta&&r.formMeta.dependencies&&r.formMeta.dependencies[e.name]&&(o=r.formMeta.dependencies[e.name][parseInt(t[e.name])],o||(o=r.formMeta.dependencies[e.name][t[e.name]]),o)){d=[];for(a in o){for(l=[],o[a]&&(l=o[a]),c=0,p=n.length;c<p;c++)u=n[c],u.name===a&&(u.filter={},u.filter[a]=l,u["default"]=t[u.name],u.newValue=t[u.name],h=r.formGenItem(u,i,s));h?d.push(s.find('[name="'+a+'"]').closest(".form-group").replaceWith(h)):d.push(void 0)}return d}},t}(),App.Config.set("100-ticketFormChanges",t,"TicketZoomFormHandler"),App.Config.set("100-ticketFormChanges",t,"TicketCreateFormHandler")}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.TicketZoomHighlighter=function(n){function i(){this.toggleHighlightAtSelection=t(this.toggleHighlightAtSelection,this),this.updateSelectedArticle=t(this.updateSelectedArticle,this),this.onMouseUp=t(this.onMouseUp,this),this.onMouseDown=t(this.onMouseDown,this),this.pickColor=t(this.pickColor,this),this.toggleHighlight=t(this.toggleHighlight,this),this.refreshObserver=t(this.refreshObserver,this),this.highlightDisable=t(this.highlightDisable,this),this.highlightEnable=t(this.highlightEnable,this),this.restoreOriginalHighlight=t(this.restoreOriginalHighlight,this),this.storeOriginalHighlight=t(this.storeOriginalHighlight,this),this.highlighterInstance=t(this.highlighterInstance,this);var e,n,s,r;if(i.__super__.constructor.apply(this,arguments),this.permissionCheck("ticket.agent")){for(this.currentHighlights={},rangy.init(),this.highlighter=rangy.createHighlighter(document,"TextRange"),r=this.colors,n=0,s=r.length;n<s;n++)e=r[n],this.addClassApplier(e);this.setColor(),this.render(),this.storeOriginalHighlight()}}return e(i,n),i.prototype.elements={".textBubble-content":"articles",".js-highlight-icon":"highlighterControl"},i.prototype.events={"click .js-highlight":"toggleHighlight","click .js-highlightColor":"pickColor"},i.prototype.colors=[{name:"Yellow",color:"#f7e7b2"},{name:"Green",color:"#bce7b6"},{name:"Blue",color:"#b3ddf9"},{name:"Pink",color:"#fea9c5"},{name:"Purple",color:"#eac5ee"}],i.prototype.activeColorIndex=0,i.prototype.highlightClassPrefix="highlight-",i.prototype.render=function(){return this.html(App.view("ticket_zoom/highlighter")({colors:this.colors,activeColorIndex:this.activeColorIndex}))},i.prototype.highlighterInstance=function(){return this.highlighter},i.prototype.storeOriginalHighlight=function(){return this.originalHighlight={fill:this.highlighterControl.css("fill"),opacity:this.highlighterControl.css("opacity")}},i.prototype.restoreOriginalHighlight=function(){if(this.originalHighlight)return this.highlighterControl.css("fill",this.originalHighlight.fill),this.highlighterControl.css("opacity",this.originalHighlight.opacity)},i.prototype.highlightEnable=function(){return this.isActive=!0,this.highlighterControl.css("opacity",1),this.highlighterControl.css("fill",this.activeColor),this.refreshObserver()},i.prototype.highlightDisable=function(){var t;return this.isActive=!1,this.restoreOriginalHighlight(),t=this.el.closest(".content").find(".textBubble"),t.removeAttr("data-highlightcolor"),this.refreshObserver()},i.prototype.refreshObserver=function(){var t;return t=this.el.closest(".content").find(".textBubble-content"),t.off("mouseup",this.onMouseUp),t.on("mouseup",this.onMouseUp),t.off("mousedown",this.onMouseDown),t.on("mousedown",this.onMouseDown)},i.prototype.loadHighlights=function(t){var e;if(this.permissionCheck("ticket.agent")&&(e=App.TicketArticle.find(t),e.preferences&&e.preferences.highlight&&!_.isEmpty(e.preferences.highlight)&&"type:TextRange"!==e.preferences.highlight&&this.currentHighlights[t]!==e.preferences.highlight))return this.currentHighlights[t]=e.preferences.highlight,this.highlighter.deserialize(e.preferences.highlight)},i.prototype.storeHighlights=function(t){var e,n,i,s,r,o,a,l;for(n=this.highlighter.serialize(),a="$article-content-"+t,r=n.split("|"),l=[r.shift()],i=0,o=r.length;i<o;i++)s=r[i],s.substr(s.length-a.length,s.length)===a&&l.push(s);return n=l.join("|"),e=App.TicketArticle.find(t),e.preferences.highlight=n,e.save()},i.prototype.addClassApplier=function(t){return this.highlighter.addClassApplier(rangy.createCssClassApplier(this.highlightClassPrefix+t.name))},i.prototype.setColor=function(){var t;if(this.highlightClass=this.highlightClassPrefix+this.colors[this.activeColorIndex].name,this.activeColor=this.colors[this.activeColorIndex].color,this.isActive)return t=this.el.closest(".content").find(".textBubble"),t.attr("data-highlightcolor",this.colors[this.activeColorIndex].name)},i.prototype.toggleHighlight=function(t){var e;return this.mouseDownInside=!1,this.mouseUpInside=!1,this.isActive?($(t.currentTarget).removeClass("active"),this.highlightDisable()):(this.highlightEnable(),e=rangy.getSelection(),e.isCollapsed?void 0:this.toggleHighlightAtSelection(this.content,this.article_id))},i.prototype.pickColor=function(t){return this.$(".js-highlightColor .is-selected").removeClass("is-selected"),$(t.currentTarget).find(".js-selectedIcon").addClass("is-selected"),this.activeColorIndex=$(t.currentTarget).attr("data-key"),this.setColor(),this.highlightEnable(),this.toggleHighlightAtSelection(this.content,this.article_id)},i.prototype.onMouseDown=function(t){return this.updateSelectedArticle(t)?this.mouseDownInside=!0:this.mouseDownInside=!1},i.prototype.onMouseUp=function(t){if(this.updateSelectedArticle(t)?this.mouseUpInside=!0:this.mouseUpInside=!1,this.mouseDownInside&&this.mouseUpInside&&this.isActive)return this.toggleHighlightAtSelection(this.content,this.article_id)},i.prototype.updateSelectedArticle=function(t){return this.content=$(t.currentTarget).closest(".textBubble-content"),this.article_id=this.content.data("id"),!!this.article_id||(this.content=$(t.currentTarget),this.article_id=this.content.data("id"),!!this.article_id)},i.prototype.toggleHighlightAtSelection=function(t,e){var n;return n=rangy.getSelection(),t.attr("data-highlightcolor",this.colors[this.activeColorIndex].name),this.highlighter.selectionOverlapsHighlight(n)?(console.log("SELECTION EXISTS, REMOVED IT"),this.highlighter.unhighlightSelection(),n.removeAllRanges(),this.highlightDisable(),void this.storeHighlights(e)):n&&n.rangeCount>0?(console.log("NEW SELECTION",n),this.highlighter.highlightSelection(this.highlightClass,{selection:n,containerElementId:t.get(0).id}),n.removeAllRanges(),this.highlightDisable(),this.storeHighlights(e)):void 0},i}(App.Controller)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.TicketZoomMeta=function(n){function i(){return this.render=t(this.render,this),i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.model="Ticket",i.prototype.observe={number:!0,created_at:!0,escalation_at:!0},i.prototype.render=function(t){return this.html(App.view("ticket_zoom/meta")({ticket:t,isCustomer:this.permissionCheck("ticket.customer")}))},i}(App.ObserverController)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.TicketZoomOverviewNavigator=function(n){function i(){this.open=t(this.open,this),this.render=t(this.render,this),this.release=t(this.release,this);var e;i.__super__.constructor.apply(this,arguments),this.overview_id&&(e=function(t){return function(){return t.delay(t.render,2600,"overview-navigator")}}(this),this.overview=App.Overview.find(this.overview_id),this.bindId=App.OverviewListCollection.bind(this.overview.link,e,!1),this.render())}return e(i,n),i.include(App.TicketNavigable),i.prototype.events={"click a":"open"},i.prototype.release=function(){return App.OverviewListCollection.unbind(this.bindId)},i.prototype.render=function(){var t,e,n,i,s,r,o,a,l,c,u;if(!this.overview_id)return void this.html("");if(a=App.OverviewListCollection.get(this.overview.link)){for(t=0,e=!1,i=!1,s=!1,c=a.tickets,n=0,r=c.length;n<r;n++)if(u=c[n],t+=1,i=a.tickets[t],s=a.tickets[t-2],u.id===this.ticket_id){e=!0;break}return e?(i&&(o=App.Ticket.find(i.id)),s&&(l=App.Ticket.find(s.id)),this.html(App.view("ticket_zoom/overview_navigator")({title:a.overview.name,total_count:a.count,current_position:t,next:o,previous:l}))):void this.html("")}},i.prototype.open=function(t){var e,n,i;if(t.preventDefault(),n=$(t.target),null!=(e=n.data("id")))i=n.attr("href");else{if(null==(e=n.closest("a").data("id")))return;i=n.closest("a").attr("href")}return this.taskOpenTicket(e,i)},i}(App.Controller)}.call(this),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty,i=function(t,e){return function(){return t.apply(e,arguments)}};App.TicketZoomSetting=function(n){function i(){i.__super__.constructor.apply(this,arguments),this.permissionCheck("admin")&&this.render()}return e(i,n),i.prototype.events={"click .js-setting":"show"},i.prototype.render=function(){return this.html(App.view("ticket_zoom/setting")())},i.prototype.show=function(){return new t},i}(App.Controller),t=function(t){function n(){this.post=i(this.post,this),this.render=i(this.render,this),n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.buttonClose=!0,n.prototype.buttonCancel=!0,n.prototype.buttonSubmit=!1,n.prototype.head="Settings",n.prototype.render=function(){return n.__super__.render.apply(this,arguments)},n.prototype.post=function(){return new App.SettingsArea({area:"UI::TicketZoom",el:this.el.find(".modal-body")})},n.prototype.content=function(){return App.view("generic/page_loading")()},n}(App.ControllerModal)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.TicketZoomSidebar=function(n){function i(){return this.render=t(this.render,this),this.postParams=t(this.postParams,this),this.commit=t(this.commit,this),this.reload=t(this.reload,this),i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.model="Ticket",i.prototype.observe={customer_id:!0,organization_id:!0},i.prototype.reload=function(t){var e,n,i,s;i=this.sidebarBackends,s=[];for(n in i)e=i[n],e&&e.reload?s.push(e.reload(t)):s.push(void 0);return s},i.prototype.commit=function(t){var e,n,i,s;i=this.sidebarBackends,s=[];for(n in i)e=i[n],e&&e.commit?s.push(e.commit(t)):s.push(void 0);return s},i.prototype.postParams=function(t){var e,n,i,s;i=this.sidebarBackends,s=[];for(n in i)e=i[n],e&&e.postParams?s.push(e.postParams(t)):s.push(void 0);return s},i.prototype.render=function(t){var e,n,i,s,r;for(this.sidebarBackends||(this.sidebarBackends={}),this.sidebarItems=[],r=App.Config.get("TicketZoomSidebar"),i=_.keys(r).sort(),e=0,s=i.length;e<s;e++)n=i[e],this.sidebarBackends[n]&&this.sidebarBackends[n].reload?this.sidebarBackends[n].reload({params:this.params,query:this.query,formMeta:this.formMeta,markForm:this.markForm,tags:this.tags,links:this.links}):this.sidebarBackends[n]=new r[n]({ticket:t,query:this.query,taskGet:this.taskGet,taskKey:this.taskKey,formMeta:this.formMeta,markForm:this.markForm,tags:this.tags,links:this.links}),this.sidebarItems.push(this.sidebarBackends[n]);return new App.Sidebar({el:this.el.find(".tabsSidebar"),sidebarState:this.sidebarState,items:this.sidebarItems})},i}(App.ObserverController)}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var s in e)i.call(e,s)&&(t[s]=e[s]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;t=function(t){function i(){return this.showObjects=e(this.showObjects,this),this.sidebarItem=e(this.sidebarItem,this),i.__super__.constructor.apply(this,arguments)}return n(i,t),i.prototype.sidebarItem=function(){if(this.Config.get("ui_ticket_zoom_sidebar_article_attachments"))return this.item={name:"attachment",badgeIcon:"paperclip",sidebarHead:"Attachments",sidebarCallback:this.showObjects,sidebarActions:[]},this.item},i.prototype.showObjects=function(t){var e,n,i,s,r,o,a,l;if(this.el=t,_.isEmpty(this.ticket)||_.isEmpty(this.ticket.article_ids))return void this.el.html("<div>"+App.i18n.translateInline("none")+"</div>");for(i="",a=this.ticket.article_ids,r=s=0,o=a.length;s<o;r=++s)l=a[r],App.TicketArticle.exists(l)&&(e=App.TicketArticle.find(l),n=App.TicketArticle.contentAttachments(e),_.isEmpty(n)||(i=App.view("ticket_zoom/sidebar_article_attachment")({article:e,attachments:n})+i));return this.el.html(i),this.el.delegate(".js-attachments img","click",function(t){return function(e){return t.imageView(e)}}(this))},i.prototype.imageView=function(t){return t.preventDefault(),t.stopPropagation(),new App.TicketZoomArticleImageView({image:$(t.target).get(0).outerHTML})},i}(App.Controller),App.Config.set("900-ArticleAttachments",t,"TicketZoomSidebar")}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var s in e)i.call(e,s)&&(t[s]=e[s]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;t=function(t){function i(){return this.changeCustomer=e(this.changeCustomer,this),this.editCustomer=e(this.editCustomer,this),this.showCustomer=e(this.showCustomer,this),this.badgeRenderLocal=e(this.badgeRenderLocal,this),this.badgeRender=e(this.badgeRender,this),this.metaBadge=e(this.metaBadge,this),this.sidebarItem=e(this.sidebarItem,this),i.__super__.constructor.apply(this,arguments)}return n(i,t),i.prototype.sidebarItem=function(){var t,e;if(this.permissionCheck("ticket.agent"))return this.item={name:"customer",badgeCallback:this.badgeRender,sidebarHead:"Customer",sidebarCallback:this.showCustomer,sidebarActions:[{title:"Change Customer",name:"customer-change",callback:this.changeCustomer}]},this.ticket&&1===this.ticket.customer_id?this.item:(t=App.User.find(App.Session.get("id")),this.ticket.customer_id&&App.User.exists(this.ticket.customer_id)&&(e=App.User.find(this.ticket.customer_id),e.isAccessibleBy(t,"change")&&this.item.sidebarActions.push({title:"Edit Customer",name:"customer-edit",callback:this.editCustomer})),this.item)},i.prototype.metaBadge=function(t){var e,n;return e="",n="",e=this.sidebarItemCounter(t),!0===this.Config.get("ui_sidebar_open_ticket_indicator_colored")&&(2===e&&(n="tabsSidebar-tab-count--warning"),e>3&&(n="tabsSidebar-tab-count--danger")),{name:"customer",icon:"person",counterPossible:!0,counter:e,cssClass:n}},i.prototype.badgeRender=function(t){var e;if(this.badgeEl=t,App.User.exists(this.ticket.customer_id))return e=App.User.find(this.ticket.customer_id),this.badgeRenderLocal(e)},i.prototype.badgeRenderLocal=function(t){return this.badgeEl.html(App.view("generic/sidebar_tabs_item")(this.metaBadge(t)))},i.prototype.sidebarItemCounter=function(t){var e;return e="",t&&t.preferences&&t.preferences.tickets_open&&(e=t.preferences.tickets_open),e},i.prototype.showCustomer=function(t){return this.elSidebar=t,new App.WidgetUser({el:this.elSidebar,user_id:this.ticket.customer_id,callback:this.badgeRenderLocal})},i.prototype.editCustomer=function(){return new App.ControllerGenericEdit({id:this.ticket.customer_id,genericObject:"User",screen:"edit",pageData:{title:"Users",object:"User",objects:"Users"},container:this.elSidebar.closest(".content")})},i.prototype.changeCustomer=function(){return new App.TicketCustomer({ticket_id:this.ticket.id,container:this.elSidebar.closest(".content")})},i}(App.Controller),App.Config.set("200-Customer",t,"TicketZoomSidebar")}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var s in e)i.call(e,s)&&(t[s]=e[s]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;t=function(t){function i(){return this.updateTicket=e(this.updateTicket,this),this.postParams=e(this.postParams,this),this["delete"]=e(this["delete"],this),this.reload=e(this.reload,this),this.showError=e(this.showError,this),this.showList=e(this.showList,this),this.showObjectsContent=e(this.showObjectsContent,this),this.showObjects=e(this.showObjects,this),this.changeObjects=e(this.changeObjects,this),this.sidebarItem=e(this.sidebarItem,this),i.__super__.constructor.apply(this,arguments)}return n(i,t),i.prototype.sidebarItem=function(){if(this.Config.get("idoit_integration"))return this.item={name:"idoit",badgeIcon:"printer",sidebarHead:"i-doit",sidebarCallback:this.showObjects,sidebarActions:[{title:"Change Objects",name:"objects-change",callback:this.changeObjects}]},this.item},i.prototype.changeObjects=function(){return new App.IdoitObjectSelector({taskKey:this.taskKey,container:this.el.closest(".content"),callback:function(t){return function(e,n){return t.ticket&&t.ticket.id?(t.objectIds=t.objectIds.concat(e),void t.updateTicket(t.ticket.id,t.objectIds,function(){return n.close(),t.showObjectsContent(e)})):(n.close(),t.showObjectsContent(e))}}(this)})},i.prototype.showObjects=function(t){var e;return this.el=t,this.objectIds||(this.objectIds=[]),this.ticket&&this.ticket.preferences&&this.ticket.preferences.idoit&&this.ticket.preferences.idoit.object_ids&&(this.objectIds=this.ticket.preferences.idoit.object_ids),e=this.queryParam(),e&&e.idoit_object_ids&&this.objectIds.push(e.idoit_object_ids),this.showObjectsContent()},i.prototype.showObjectsContent=function(t){return t&&(this.objectIds=this.objectIds.concat(t)),_.isEmpty(this.objectIds)?void this.html("<div>"+App.i18n.translateInline("none")+"</div>"):this.ajax({id:"idoit-"+this.taskKey,type:"POST",url:this.apiPath+"/integration/idoit",data:JSON.stringify({method:"cmdb.objects",filter:{ids:this.objectIds}}),success:function(t){return function(e){return e.response?void t.showList(e.response.result):t.showError("Unable to load data...")}}(this),error:function(t){return function(e,n){if("abort"!==n)return t.showError("Unable to load data...")}}(this)})},i.prototype.showList=function(t){var e;return e=$(App.view("ticket_zoom/sidebar_idoit")({objects:t})),e.delegate(".js-delete","click",function(t){return function(e){var n;return e.preventDefault(),n=$(e.currentTarget).attr("data-object-id"),t["delete"](n)}}(this)),this.html(e)},i.prototype.showError=function(t){return this.html(App.i18n.translateInline(t))},i.prototype.reload=function(){return this.showObjectsContent()},i.prototype["delete"]=function(t){var e,n,i,s,r;for(s=[],r=this.objectIds,e=0,n=r.length;e<n;e++)i=r[e],t.toString()!==i.toString()&&s.push(i);return this.objectIds=s,this.ticket&&this.ticket.id&&this.updateTicket(this.ticket.id,this.objectIds),this.showObjectsContent()},i.prototype.postParams=function(t){var e,n;if(t.ticket&&!t.ticket.created_at&&this.objectIds&&!_.isEmpty(this.objectIds))return(e=t.ticket).preferences||(e.preferences={}),(n=t.ticket.preferences).idoit||(n.idoit={}),t.ticket.preferences.idoit.object_ids=this.objectIds},i.prototype.updateTicket=function(t,e,n){return App.Ajax.request({id:"idoit-update-"+t,type:"POST",url:this.apiPath+"/integration/idoit_ticket_update",data:JSON.stringify({ticket_id:t,object_ids:e}),success:function(){if(n)return n(e)},error:function(t){return function(e,n,i){if("abort"!==n)return t.log("errors",i),t.notify({type:"error",msg:App.i18n.translateContent(i.error_human||i.error||"Unable to update object!"),timeout:6e3})}}(this)})},i}(App.Controller),App.Config.set("500-Idoit",t,"TicketCreateSidebar"),App.Config.set("500-Idoit",t,"TicketZoomSidebar")}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var s in e)i.call(e,s)&&(t[s]=e[s]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;t=function(t){function i(){return this.editOrganization=e(this.editOrganization,this),this.showOrganization=e(this.showOrganization,this),this.sidebarItem=e(this.sidebarItem,this),i.__super__.constructor.apply(this,arguments)}return n(i,t),i.prototype.sidebarItem=function(){if(this.permissionCheck("ticket.agent")&&this.ticket.organization_id)return this.item={name:"organization",badgeIcon:"group",sidebarHead:"Organization",sidebarCallback:this.showOrganization,sidebarActions:[{title:"Edit Organization",name:"organization-edit",callback:this.editOrganization}]},this.item},i.prototype.showOrganization=function(t){return this.elSidebar=t,new App.WidgetOrganization({el:this.elSidebar,organization_id:this.ticket.organization_id})},i.prototype.editOrganization=function(){return new App.ControllerGenericEdit({id:this.ticket.organization_id,genericObject:"Organization",pageData:{title:"Organizations",object:"Organization",objects:"Organizations"},container:this.elSidebar.closest(".content")})},i}(App.Controller),App.Config.set("300-Organization",t,"TicketZoomSidebar")}.call(this),function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;t=function(t){function e(){return this.render=n(this.render,this),e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.model="Ticket",e.prototype.observeNot={created_at:!0,updated_at:!0},e.prototype.globalRerender=!1,e.prototype.render=function(t){var e,n,i,s,r;if(e=t.attributes(),delete e.article,n=App.Group.find(e.group_id).follow_up_possible,r=App.TicketState.find(e.state_id).name,s=this.taskGet("ticket"),i=this.Config.get("TicketZoomFormHandler"),_.isEmpty(s)||(e=_.extend(e,s)),"new_ticket"===n&&"closed"!==r||"new_ticket"!==n||this.permissionCheck("admin")||this.permissionCheck("ticket.agent")?new App.ControllerForm({elReplace:this.el,model:App.Ticket,screen:"edit",handlersConfig:i,filter:this.formMeta.filter,formMeta:this.formMeta,params:e,isDisabled:!t.editable()}):new App.ControllerForm({elReplace:this.el,model:App.Ticket,screen:"edit",handlersConfig:i,filter:this.formMeta.filter,formMeta:this.formMeta,params:e,isDisabled:t.editable()}),this.markForm(!0),!this.resetBind)return this.resetBind=!0,this.bind("ui::ticket::taskReset",function(e){return function(n){if(n.ticket_id.toString()===t.id.toString())return e.render(t)}}(this))},e}(App.ObserverController),e=function(e){function s(){return this.changeCustomer=n(this.changeCustomer,this),this.showTicketMerge=n(this.showTicketMerge,this),this.showTicketHistory=n(this.showTicketHistory,this),this.editTicket=n(this.editTicket,this),
this.reload=n(this.reload,this),this.sidebarItem=n(this.sidebarItem,this),s.__super__.constructor.apply(this,arguments)}return i(s,e),s.prototype.sidebarItem=function(){return this.item={name:"ticket",badgeIcon:"message",sidebarHead:"Ticket",sidebarCallback:this.editTicket},this.permissionCheck("ticket.agent")&&(this.item.sidebarActions=[{title:"History",name:"ticket-history",callback:this.showTicketHistory},{title:"Merge",name:"ticket-merge",callback:this.showTicketMerge},{title:"Change Customer",name:"customer-change",callback:this.changeCustomer}]),this.item},s.prototype.reload=function(t){if(this.tagWidget&&(t.tags&&this.tagWidget.reload(t.tags),t.tagAdd&&this.tagWidget.add(t.tagAdd,t.source),t.tagRemove&&this.tagWidget.remove(t.tagRemove)),this.linkWidget&&t.links)return this.linkWidget.reload(t.links)},s.prototype.editTicket=function(e){var n;return this.el=e,n=$(App.view("ticket_zoom/sidebar_ticket")()),this.edit=new t({object_id:this.ticket.id,el:n.find(".edit"),taskGet:this.taskGet,formMeta:this.formMeta,markForm:this.markForm}),this.permissionCheck("ticket.agent")&&(this.tagWidget=new App.WidgetTag({el:n.filter(".tags"),object_type:"Ticket",object:this.ticket,tags:this.tags}),this.linkWidget=new App.WidgetLink({el:n.filter(".links"),object_type:"Ticket",object:this.ticket,links:this.links}),this.timeUnitWidget=new App.TicketZoomTimeUnit({el:n.filter(".js-timeUnit"),object_id:this.ticket.id})),this.html(n)},s.prototype.showTicketHistory=function(){return new App.TicketHistory({ticket_id:this.ticket.id,container:this.el.closest(".content")})},s.prototype.showTicketMerge=function(){return new App.TicketMerge({ticket:this.ticket,taskKey:this.taskKey,container:this.el.closest(".content")})},s.prototype.changeCustomer=function(){return new App.TicketCustomer({ticket_id:this.ticket.id,container:this.el.closest(".content")})},s}(App.Controller),App.Config.set("100-TicketEdit",e,"TicketZoomSidebar")}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.TaskbarWatcher=function(n){function i(){this.stop=t(this.stop,this),this.start=t(this.start,this),this.render=t(this.render,this),this.release=t(this.release,this),i.__super__.constructor.apply(this,arguments),this.subscribeId=App.TaskManager.preferencesSubscribe(this.taskKey,this.render),App.TaskManager.preferencesTrigger(this.taskKey)}return e(i,n),i.prototype.release=function(){if(this.subscribeId)return App.TaskManager.preferencesUnsubscribe(this.subscribeId)},i.prototype.render=function(t){var e,n,i,s,r,o,a,l,c,u,p,h;if(t&&t.tasks){for(i=App.Session.get("id"),l=t.tasks,s=0,o=l.length;s<o;s++)h=l[s],h.user_id!==i&&h.last_contact&&(h.idle=!1,(new Date).getTime()-new Date(h.last_contact).getTime()>3e5&&(h.idle=!0));if(this.diffrence(this.lastTasks,t.tasks)){for(this.lastTasks=clone(t.tasks),[],this.el.empty(),c=t.tasks,u=[],r=0,a=c.length;r<a;r++)h=c[r],h.user_id!==i?(n=[],h.idle&&n.push("avatar--idle"),h.changed?n.push("avatar--changed"):n.push("avatar--not-changed"),this.el.append('<div class="js-avatar"></div>'),this.el.append('<div class="half-spacer"></div>'),e=new App.WidgetAvatar({el:this.el.find(".js-avatar").last(),object_id:h.user_id,size:40,cssClass:n.join(" ")}),h.changed?(p=$('<div class="avatar-status"></div>'),p.append(App.Utils.icon("pen")),u.push(e.el.find(".avatar").append(p))):u.push(void 0)):u.push(void 0);return u}}},i.prototype.start=function(){return this.intervalId=this.interval(function(t){return function(){return App.TaskManager.preferencesTrigger(t.taskKey)}}(this),3e5,"ticket-watcher-interval")},i.prototype.stop=function(){if(this.intervalId)return this.clearInterval(this.intervalId)},i.prototype.diffrence=function(t,e){var n;if(!t)return!0;if(t.length!==e.length)return!0;for(n in t){if(!t[n]||!e[n])return!0;if(t[n].user_id!==e[n].user_id)return!0;if(t[n].changed!==e[n].changed)return!0;if(t[n].idle!==e[n].idle)return!0}return!1},i}(App.Controller)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.TicketZoomTimeAccounting=function(n){function i(){return this.onSubmit=t(this.onSubmit,this),this.onCancel=t(this.onCancel,this),this.skip=t(this.skip,this),i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.buttonClose=!0,i.prototype.buttonCancel=!1,i.prototype.buttonSubmit="Account Time",i.prototype.buttonClass="btn--success",i.prototype.leftButtons=[{className:"btn--text btn--subtle js-skip",text:"skip"}],i.prototype.head="Time Accounting",i.prototype.small=!0,i.prototype.events={"submit form":"submit","click .js-submit:not(.is-disabled)":"submit","click .js-cancel":"cancel","click .js-close":"cancel","click .js-skip":"skip"},i.prototype.content=function(){return App.view("ticket_zoom/time_accounting")()},i.prototype.skip=function(t){if(this.submitCallback)return this.submitCallback({}),this.close(t)},i.prototype.onCancel=function(){if(this.cancelCallback)return this.cancelCallback()},i.prototype.onClose=function(){if(this.cancelCallback)return this.cancelCallback()},i.prototype.onSubmit=function(){var t;return this.$('[name="time_unit"]').removeClass("has-error"),t=this.formParams(),t.time_unit&&(t.time_unit=t.time_unit.replace(",","."),isNaN(parseFloat(t.time_unit))||t.time_unit.match(/[A-z]|\s/))?void this.$('[name="time_unit"]').addClass("has-error"):(this.close(),this.submitCallback?this.submitCallback(t):void 0)},i}(App.ControllerModal)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.TicketZoomTimeUnit=function(n){function i(){return this.render=t(this.render,this),i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.model="Ticket",i.prototype.observe={time_unit:!0},i.prototype.render=function(t){if(this.permissionCheck("ticket.agent")&&t.time_unit)return this.html(App.view("ticket_zoom/time_unit")({ticket:t}))},i}(App.ObserverController)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.TicketZoomTitle=function(n){function i(){return this.update=t(this.update,this),this.renderPost=t(this.renderPost,this),i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.model="Ticket",i.prototype.template="ticket_zoom/title",i.prototype.observe={title:!0},i.prototype.globalRerender=!1,i.prototype.events={"blur .js-objectTitle":"update"},i.prototype.renderPost=function(){return this.$(".js-objectTitle").ce({mode:"textonly",multiline:!1,maxlength:250})},i.prototype.update=function(t){var e,n;if((n=$(t.target).ceg()||"")!==this.lastAttributres.title)return e=App.Ticket.find(this.object_id),e.title=n,e.article=void 0,e.save(),App.TaskManager.mute(this.taskKey),App.TaskManager.touch(this.taskKey),App.Event.trigger("overview:fetch")},i}(App.ObserverController)}.call(this),function(){var t,e,n,i,s=function(t,e){return function(){return t.apply(e,arguments)}},r=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;i=function(i){function o(){this.setMonth=s(this.setMonth,this),this.setYear=s(this.setYear,this),this.setTimeAccounting=s(this.setTimeAccounting,this),this.setFilter=s(this.setFilter,this),this.render=s(this.render,this),this.release=s(this.release,this);var t,e,n;o.__super__.constructor.apply(this,arguments),t=new Date,t.getDate(),e=t.getMonth()+1,n=t.getFullYear(),t.getWeek(),this.month||(this.month=e),this.year||(this.year=n),this.subscribeId=App.Setting.subscribe(this.render,{initFetch:!0,clear:!1})}return r(o,i),o.prototype.requiredPermission="admin.time_accounting",o.prototype.header="Time Accounting",o.prototype.events={"change .js-timeAccountingSetting input":"setTimeAccounting","click .js-timePickerYear":"setYear","click .js-timePickerMonth":"setMonth","click .js-timeAccountingFilter":"setFilter","click .js-timeAccountingFilterReset":"resetFilter"},o.prototype.elements={".js-timeAccountingSetting input":"timeAccountingSetting"},o.prototype.release=function(){return App.Setting.unsubscribe(this.subscribeId)},o.prototype.render=function(){var i,s,r,o,a,l,c,u,p,h,d;for(s=this.Config.get("time_accounting")||!1,this.lastNewTagSetting=s,h=[],d=(new Date).getFullYear(),a=o=c=d-2,u=d;c<=u?o<=u:o>=u;a=c<=u?++o:--o)l={display:a,value:a},h.push(l);return p=[{display:"Jan",value:1},{display:"Feb",value:2},{display:"Mar",value:3},{display:"Apr",value:4},{display:"Mai",value:5},{display:"Jun",value:6},{display:"Jul",value:7},{display:"Aug",value:8},{display:"Sep",value:9},{display:"Oct",value:10},{display:"Nov",value:11},{display:"Dec",value:12}],this.html(App.view("time_accounting/index")({timeRangeYear:h,timeRangeMonth:p,year:this.year,month:this.month,apiPath:this.apiPath})),i=[{name:"condition",display:"Conditions for effected objects",tag:"ticket_selector","null":!1,preview:!1,action:!1,hasChanged:!1}],r=App.Setting.get("time_accounting_selector"),this.filter=new App.ControllerForm({el:this.$(".js-selector"),model:{configure_attributes:i},params:r,autofocus:!0}),new n({el:this.$(".js-tableTicket"),year:this.year,month:this.month}),new t({el:this.$(".js-tableCustomer"),year:this.year,month:this.month}),new e({el:this.$(".js-tableOrganization"),year:this.year,month:this.month})},o.prototype.setFilter=function(t){var e;return t.preventDefault(),e=this.formParam(this.filter.form),App.Setting.set("time_accounting_selector",e,{notify:!0})},o.prototype.resetFilter=function(t){return t.preventDefault(),App.Setting.set("time_accounting_selector",{},{notify:!0})},o.prototype.setTimeAccounting=function(){var t;return t=this.timeAccountingSetting.prop("checked"),App.Setting.set("time_accounting",t)},o.prototype.setYear=function(t){return t.preventDefault(),this.year=$(t.target).data("type"),this.render()},o.prototype.setMonth=function(t){return t.preventDefault(),this.month=$(t.target).data("type"),this.render()},o}(App.ControllerSubContent),n=function(t){function e(){this.render=s(this.render,this),this.load=s(this.load,this),e.__super__.constructor.apply(this,arguments),this.load()}return r(e,t),e.prototype.load=function(){return this.ajax({id:"by_ticket",type:"GET",url:this.apiPath+"/time_accounting/log/by_ticket/"+this.year+"/"+this.month,processData:!0,success:function(t){return function(e){return t.render(e)}}(this)})},e.prototype.render=function(t){return this.html(App.view("time_accounting/by_ticket")({rows:t}))},e}(App.Controller),t=function(t){function e(){this.render=s(this.render,this),this.load=s(this.load,this),e.__super__.constructor.apply(this,arguments),this.load()}return r(e,t),e.prototype.load=function(){return this.ajax({id:"by_customer",type:"GET",url:this.apiPath+"/time_accounting/log/by_customer/"+this.year+"/"+this.month,processData:!0,success:function(t){return function(e){return t.render(e)}}(this)})},e.prototype.render=function(t){return this.html(App.view("time_accounting/by_customer")({rows:t}))},e}(App.Controller),e=function(t){function e(){this.render=s(this.render,this),this.load=s(this.load,this),e.__super__.constructor.apply(this,arguments),this.load()}return r(e,t),e.prototype.load=function(){return this.ajax({id:"by_organization",type:"GET",url:this.apiPath+"/time_accounting/log/by_organization/"+this.year+"/"+this.month,processData:!0,success:function(t){return function(e){return t.render(e)}}(this)})},e.prototype.render=function(t){return this.html(App.view("time_accounting/by_organization")({rows:t}))},e}(App.Controller),App.Config.set("TimeAccounting",{prio:8500,name:"Time Accounting",parent:"#manage",target:"#manage/time_accounting",controller:i,permission:["admin.time_accounting"]},"NavBarAdmin")}.call(this),function(){var t,e,n,i=function(t,e){return function(){return t.apply(e,arguments)}},s=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;t=function(t){function r(){this.getAttributes=i(this.getAttributes,this),this.updateOnServer=i(this.updateOnServer,this),this._syncChanges=i(this._syncChanges,this),this.syncChanges=i(this.syncChanges,this),this.resetChanges=i(this.resetChanges,this),this.pushChanges=i(this.pushChanges,this),this.toggleAction=i(this.toggleAction,this),this.hideAction=i(this.hideAction,this),this.showAction=i(this.showAction,this),this.rerender=i(this.rerender,this),this.release=i(this.release,this),this.hide=i(this.hide,this),this.load=i(this.load,this),this.render=i(this.render,this),r.__super__.constructor.apply(this,arguments),this.locale=App.i18n.get(),this.render(),this.bind("i18n:translation_update_todo",function(t){return function(){return t.load("i18n:translation_update_todo")}}(this)),this.bind("i18n:translation_update_list",function(t){return function(){return t.load("i18n:translation_update_list")}}(this)),this.bind("i18n:translation_update",function(t){return function(){return t.load()}}(this))}return s(r,t),r.prototype.requiredPermission="admin.translation",r.prototype.header="Translations",r.prototype.events={"click .js-pushChanges":"pushChanges","click .js-resetChanges":"resetChanges","click .js-syncChanges":"syncChanges"},r.prototype.render=function(){var t,e,n,i,s;for(s=App.Locale.all(),t=this.locale,e=0,n=s.length;e<n;e++)i=s[e],i.locale===this.locale&&(t=i.name);return this.html(App.view("translation/index")({currentLanguage:t})),this.load("render")},r.prototype.load=function(t){return this.ajax({id:"translations_admin",type:"GET",url:this.apiPath+"/translations/admin/lang/"+this.locale,processData:!0,success:function(i){return function(s){var r,o,a,l;for(i.times=[],i.stringsNotTranslated=[],i.stringsTranslated=[],l=s.list,r=0,a=l.length;r<a;r++)o=l[r],"time"===o[4]?i.times.push(o):""===o[2]?i.stringsNotTranslated.push(o):i.stringsTranslated.push(o);return i.translationToDo&&"render"!==t||(i.translationToDo=new n({el:i.$(".js-ToDo"),locale:i.locale,updateOnServer:i.updateOnServer,getAttributes:i.getAttributes})),t&&"i18n:translation_update_todo"!==t&&"render"!==t||i.translationToDo.update({stringsNotTranslated:i.stringsNotTranslated,stringsTranslated:i.stringsTranslated,times:i.times}),i.translationList&&"render"!==t||(i.translationList=new e({el:i.$(".js-List"),locale:i.locale,updateOnServer:i.updateOnServer,getAttributes:i.getAttributes})),t&&"i18n:translation_update_list"!==t&&"render"!==t||i.translationList.update({stringsNotTranslated:i.stringsNotTranslated,stringsTranslated:i.stringsTranslated,times:i.times}),i.toggleAction()}}(this)})},r.prototype.hide=function(){return this.rerender()},r.prototype.release=function(){return this.rerender()},r.prototype.rerender=function(){var t;if(t=function(){return App.Event.trigger("ui:rerender")},this.translationList&&this.translationList.changes())return App.Delay.set(t,400)},r.prototype.showAction=function(){return this.$(".js-changes").removeClass("hidden")},r.prototype.hideAction=function(){return this.el.closest(".content").find(".js-changes").addClass("hidden")},r.prototype.toggleAction=function(){return this.$(".js-Reset:visible").length>0?this.showAction():this.hideAction()},r.prototype.pushChanges=function(){return this.loader=new App.ControllerModalLoading({head:"Push my changes",message:"Pushing translations to i18n.zammad.com",container:this.el.closest(".content")}),this.ajax({id:"translations",type:"PUT",url:this.apiPath+"/translations/push",data:JSON.stringify({locale:this.locale}),processData:!1,success:function(t){return function(){return t.loader.update("Thanks for contributing!"),t.loader.hideIcon(),t.loader.hide(2)}}(this),error:function(t){return function(){return t.loader.hide()}}(this)})},r.prototype.resetChanges=function(){return this.loader=new App.ControllerModalLoading({head:"Reset changes",message:"Reseting changes...",container:this.el.closest(".content")}),this.ajax({id:"translations",type:"POST",url:this.apiPath+"/translations/reset",data:JSON.stringify({locale:this.locale}),processData:!1,success:function(t){return function(){return App.Event.trigger("i18n:translation_update"),t.hideAction(),t.loader.hide()}}(this),error:function(t){return function(){return t.loader.hide()}}(this)})},r.prototype.syncChanges=function(){var t,e,n;return this.loader=new App.ControllerModalLoading({head:"Get latest translations",message:"Getting latest translations from i18n.zammad.com",container:this.el.closest(".content")}),t=function(t){return function(){return App.Event.trigger("i18n:translation_update"),t.hideAction(),t.loader.hide(1)}}(this),n=App.Locale.all(),e=n.shift(),this._syncChanges(e,n,this.loader,t)},r.prototype._syncChanges=function(t,e,n,i){return this.ajax({id:"translations",type:"GET",url:this.apiPath+"/translations/sync/"+t.locale,processData:!1,success:function(s){return function(){return n.update(t.name,!1),t=e.shift(),_.isEmpty(e)?void i():s._syncChanges(t,e,n,i)}}(this),error:function(){return i()}})},r.prototype.updateOnServer=function(t,e){var n,i;return App.i18n.get()===t.locale&&App.i18n.setMap(t.source,t.target,t.format),delete t.field,t.id?""===t.target?(n="DELETE",i=this.apiPath+"/translations/"+t.id):(n="PUT",i=this.apiPath+"/translations/"+t.id):(n="POST",i=this.apiPath+"/translations"),this.ajax({id:"translations",type:n,url:i,data:JSON.stringify(t),processData:!1,success:function(t){return function(){return e&&App.Event.trigger(e),t.toggleAction()}}(this)})},r.prototype.getAttributes=function(t){var e;return e=$(t.target).closest("tr").find(".js-Item"),{id:e.data("id"),source:e.data("source"),format:e.data("format")||"string",initial:e.data("initial")||"",target:e.val(),locale:this.locale,field:e}},r}(App.ControllerSubContent),n=function(t){function e(){this.same=i(this.same,this),this.create=i(this.create,this),this.render=i(this.render,this),this.update=i(this.update,this),e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.events={"click .js-create":"create","click .js-theSame":"same"},e.prototype.update=function(t){var e,n;for(e in t)n=t[e],this[e]=n;return this.render()},e.prototype.render=function(){var t,e,n,i,s,r,o,a;if(!App.i18n.getNotTranslated(this.locale)&&_.isEmpty(this.stringsNotTranslated))return void this.html("");if(App.i18n.getNotTranslated(this.locale)){o=App.i18n.getNotTranslated(this.locale);for(i in o){for(o[i],t=!1,a=this.stringsNotTranslated,e=0,s=a.length;e<s;e++)r=a[e],i===r[1]&&(t=!0);t||(n=["",i,"",""],this.stringsNotTranslated.push(n))}}return this.html(App.view("translation/todo")({list:this.stringsNotTranslated}))},e.prototype.create=function(t){var e;if(t.preventDefault(),e=this.getAttributes(t),e.target)return $(t.target).closest("tr").remove(),App.i18n.removeNotTranslated(e.locale,e.source),e.target_initial="",this.updateOnServer(e,"i18n:translation_update_list")},e.prototype.same=function(t){var e;return t.preventDefault(),this.hasChanges=!0,e=this.getAttributes(t),$(t.target).closest("tr").remove(),App.i18n.removeNotTranslated(e.locale,e.source),e.target_initial="",e.target=e.source,this.updateOnServer(e,"i18n:translation_update_list")},e}(App.Controller),e=function(t){function e(){this.updateRow=i(this.updateRow,this),this.changes=i(this.changes,this),this.render=i(this.render,this),this.update=i(this.update,this),e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.hasChanges=!1,e.prototype.events={"blur .js-translated input":"updateItem","click .js-translated .js-Reset":"resetItem"},e.prototype.update=function(t){var e,n;for(e in t)n=t[e],this[e]=n;return this.render()},e.prototype.render=function(){if(!_.isEmpty(this.stringsTranslated)||!_.isEmpty(this.times))return this.html(App.view("translation/list")({times:this.times,strings:this.stringsTranslated,notSourceTranslation:App.i18n.notTranslatedFeatureEnabled(this.locale)}))},e.prototype.changes=function(){return this.hasChanges},e.prototype.resetItem=function(t){var e;return t.preventDefault(),this.hasChanges=!0,e=this.getAttributes(t),e.target=e.initial,this.updateOnServer(e,"i18n:translation_update")},e.prototype.updateItem=function(t){var e;if(t.preventDefault(),this.hasChanges=!0,e=this.getAttributes(t),e.target)return this.updateRow(e.id),this.updateOnServer(e)},e.prototype.updateRow=function(t){var e,n,i,s;return n=this.$("[data-id="+t+"]"),e=n.val(),i=n.data("initial"),s=n.closest("tr").find(".js-Reset"),e!==i?(this.changesAvailable=!0,s.removeClass("hidden"),s.closest("tr").addClass("warning")):(s.addClass("hidden"),s.closest("tr").removeClass("warning"))},e}(App.Controller),App.Config.set("Translation",{prio:1800,parent:"#system",name:"Translations",target:"#system/translation",controller:t,permission:["admin.translation"]},"NavBarAdmin")}.call(this),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(){n.__super__.constructor.apply(this,arguments),new App.ControllerGenericIndex({el:this.el,id:this.id,genericObject:"Trigger",defaultSortBy:"name",pageData:{home:"triggers",object:"Trigger",objects:"Triggers",navupdate:"#triggers",notes:["Triggers are ..."],buttons:[{name:"New Trigger","data-type":"new","class":"btn--success"}]},container:this.el.closest(".content"),large:!0})}return e(n,t),n.prototype.requiredPermission="admin.trigger",n.prototype.header="Triggers",n}(App.ControllerSubContent),App.Config.set("Trigger",{prio:3300,name:"Trigger",parent:"#manage",target:"#manage/trigger",controller:t,permission:["admin.trigger"]},"NavBarAdmin")}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.UserHistory=function(n){function i(){return this.fetch=t(this.fetch,this),i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.fetch=function(){return this.ajax({id:"user_history",type:"GET",url:this.apiPath+"/users/history/"+this.user_id,success:function(t){return function(e){return App.Collection.loadAssets(e.assets),t.items=e.history,t.render()}}(this)})},i}(App.GenericHistory)}.call(this),function(){var t,e,n,i,s,r=function(t,e){return function(){return t.apply(e,arguments)}},o=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;App.UserProfile=function(i){function a(){this.currentPosition=r(this.currentPosition,this),this.setPosition=r(this.setPosition,this),this.render=r(this.render,this),this.show=r(this.show,this),this.url=r(this.url,this),this.meta=r(this.meta,this),a.__super__.constructor.apply(this,arguments),this.authenticateCheckRedirect(),App.User.full(this.user_id,this.render)}return o(a,i),a.prototype.meta=function(){var t,e;return t={url:this.url(),id:this.user_id},App.User.exists(this.user_id)&&(e=App.User.find(this.user_id),t.head=e.displayName(),t.title=e.displayName(),t.iconClass=e.icon()),t},a.prototype.url=function(){return"#user/profile/"+this.user_id},a.prototype.show=function(){return App.OnlineNotification.seen("User",this.user_id),this.navupdate({url:"#",type:"menu"})},a.prototype.changed=function(){return!1},a.prototype.render=function(i){var r;return this.doNotLog||(this.doNotLog=1,this.recentView("User",this.user_id)),r=$(App.view("user_profile/index")({user:i})),new s({object_id:i.id,el:r.find(".js-name")}),i.organization_id&&new n({object_id:i.organization_id,el:r.find(".js-organization")}),new e({el:r.find(".js-object-container"),object_id:i.id,taskKey:this.taskKey}),new t({el:r.find(".js-action"),object_id:i.id}),new App.TicketStats({el:r.find(".js-ticket-stats"),user:i}),this.html(r),new App.UpdateTastbar({genericObject:i})},a.prototype.setPosition=function(t){return this.$(".profile").scrollTop(t)},a.prototype.currentPosition=function(){return this.$(".profile").scrollTop()},a}(App.Controller),t=function(t){function e(){return this.actions=r(this.actions,this),this.newTicket=r(this.newTicket,this),this.editUser=r(this.editUser,this),this.showHistory=r(this.showHistory,this),e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.model="User",e.prototype.observe={organization_id:!0},e.prototype.showHistory=function(t){return new App.UserHistory({user_id:t.id,container:this.el.closest(".content")})},e.prototype.editUser=function(t){return new App.ControllerGenericEdit({id:t.id,genericObject:"User",screen:"edit",pageData:{title:"Users",object:"User",objects:"Users"},container:this.el.closest(".content")})},e.prototype.newTicket=function(t){return this.navigate("ticket/create/customer/"+t.id)},e.prototype.actions=function(t){var e,n;return n=App.User.find(App.Session.get("id")),e=[{name:"history",title:"History",callback:this.showHistory},{name:"ticket",title:"New Ticket",callback:this.newTicket}],t.isAccessibleBy(n,"change")&&e.unshift({name:"edit",title:"Edit",callback:this.editUser}),e},e}(App.ObserverActionRow),e=function(t){function e(){return this.update=r(this.update,this),this.render=r(this.render,this),e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.model="User",e.prototype.observeNot={cid:!0,created_at:!0,created_by_id:!0,updated_at:!0,updated_by_id:!0,preferences:!0,password:!0,last_login:!0,login_failed:!0,source:!0,image_source:!0},e.prototype.events={"focusout [contenteditable]":"update"},e.prototype.render=function(t){var e,n,i,s,r,o;App.TaskManager.touch(this.taskKey),o=[],r=App.User.attributesGet("view");for(n in r)e=r[n],i=n,s=i.substr(0,i.length-3),s in t&&(i=s),(t[i]||"richtext"===e.tag)&&e.shown&&"firstname"!==i&&"lastname"!==i&&"organization"!==i&&o.push(e);return this.html(App.view("user_profile/object")({user:t,userData:o})),this.$("[contenteditable]").ce({mode:"textonly",multiline:!0,maxlength:250})},e.prototype.update=function(t){var e,n,i,s;if(n=$(t.target).attr("data-name"),s=$(t.target).html(),i=App.User.find(this.object_id),i[n]!==s)return this.lastAttributres[n]=s,e={},e[n]=s,i.updateAttributes(e),this.log("debug","update",n,s,i)},e}(App.ObserverController),n=function(t){function e(){return this.render=r(this.render,this),e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.model="Organization",e.prototype.observe={name:!0},e.prototype.render=function(t){return this.html(App.view("user_profile/organization")({organization:t}))},e}(App.ObserverController),s=function(t){function e(){return this.render=r(this.render,this),e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.model="User",e.prototype.observe={firstname:!0,lastname:!0},e.prototype.render=function(t){return this.html(App.Utils.htmlEscape(t.displayName()))},e}(App.ObserverController),i=function(t){function e(t){var n;e.__super__.constructor.apply(this,arguments),n={user_id:t.user_id},App.TaskManager.execute({key:"User-"+this.user_id,controller:"UserProfile",params:n,show:!0})}return o(e,t),e.prototype.requiredPermission="ticket.agent",e}(App.ControllerPermanent),App.Config.set("user/profile/:user_id",i,"Routes")}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var s in e)i.call(e,s)&&(t[s]=e[s]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;t=function(t){function i(){this.search=e(this.search,this),i.__super__.constructor.apply(this,arguments),this.render()}return n(i,t),i.prototype.requiredPermission="admin.user",i.prototype.header="Users",i.prototype.elements={".js-search":"searchInput"},i.prototype.events={"click [data-type=new]":"new","click [data-type=import]":"import"},i.prototype.render=function(){return this.html(App.view("user")({head:"Users",buttons:[{name:"Import","data-type":"import","class":"btn"},{name:"New User","data-type":"new","class":"btn--success"}],roles:App.Role.all()})),this.$(".tab").on("click",function(t){return function(e){var n;return e.preventDefault(),$(e.target).toggleClass("active"),n=t.searchInput.val().trim(),t.query=n,t.delay(t.search,220,"search")}}(this)),this.searchInput.bind("keyup",function(t){return function(){var e;if((e=t.searchInput.val().trim())!==t.query)return t.query=e,t.delay(t.search,220,"search")}}(this)),this.search()},i.prototype.renderResult=function(t){var e,n,i,s,r,o,a,l,c;for(null==t&&(t=[]),this.stopLoading(),n=function(t){var e;return e={name:"switch_to",display:"Action",className:"actionCell",translation:!0,width:"200px"},t.push(e),t},e=function(t,e,n){var i;return i=App.i18n.translateInline("View from user's perspective"),t=" ",n.raw=' <span class="btn btn--primary btn--table switchView" title="'+i+'">'+App.Utils.icon("switchView")+i+"</span>",n["class"]="",n.parentClass="actionCell no-padding",n.link="",n.title=App.i18n.translateInline("Switch to"),t},o=function(t){return function(e,n){return n.preventDefault(),n.stopPropagation(),t.disconnectClient(),$("#app").hide().attr("style","display: none!important"),t.delay(function(){return App.Auth._logout(!1),t.ajax({id:"user_switch",type:"GET",url:t.apiPath+"/sessions/switch/"+e,success:function(e){var n;return n=window.location.protocol+"//"+window.location.host+e.location,t.windowReload(void 0,n)}})},800)}}(this),i=function(e){return function(n,i){var s,r;return i.preventDefault(),s=App.User.find(n),r=function(){return App.Group.fetch(),e.renderResult(t)},new App.ControllerGenericEdit({id:s.id,pageData:{title:"Users",home:"users",object:"User",objects:"Users",navupdate:"#users"},genericObject:"User",callback:r,container:e.el.closest(".content")})}}(this),c=[],s=0,r=t.length;s<r;s++)l=t[s],a=App.User.find(l),c.push(a);return this.$(".table-overview").html(""),new App.ControllerTable({tableId:"users_admin_overview",el:this.$(".table-overview"),model:App.User,objects:c,"class":"user-list",callbackHeader:[n],callbackAttributes:{switch_to:[e]},bindCol:{switch_to:{events:{click:o}}},bindRow:{events:{click:i}}})},i.prototype.search=function(){var t;return t=[],this.$(".tab.active").each(function(e,n){return t.push($(n).data("id"))}),this.startLoading(this.$(".table-overview")),App.Ajax.request({id:"search",type:"GET",url:this.apiPath+"/users/search?sort_by=created_at",data:{query:this.query||"*",limit:50,role_ids:t,full:!0},processData:!0,success:function(t){return function(e){return App.Collection.loadAssets(e.assets),t.renderResult(e.user_ids),t.stopLoading()}}(this),done:function(t){return function(){return t.stopLoading()}}(this)})},i.prototype["new"]=function(t){return t.preventDefault(),new App.ControllerGenericNew({pageData:{title:"Users",home:"users",object:"User",objects:"Users",navupdate:"#users"},genericObject:"User",container:this.el.closest(".content"),callback:this.search})},i.prototype["import"]=function(t){return t.preventDefault(),new App.Import({baseUrl:"/api/v1/users",container:this.el.closest(".content")})},i}(App.ControllerSubContent),App.Config.set("User",{prio:1e3,name:"Users",parent:"#manage",target:"#manage/users",controller:t,permission:["admin.user"]},"NavBarAdmin")}.call(this),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(){n.__super__.constructor.apply(this,arguments),this.load()}return e(n,t),n.prototype.requiredPermission="admin.version",n.prototype.header="Version",n.prototype.load=function(){return this.startLoading(),this.ajax({id:"version",type:"GET",url:this.apiPath+"/version",success:function(t){return function(e){return t.stopLoading(),t.version=e.version,t.render()}}(this)})},n.prototype.render=function(){return this.html(App.view("version")({version:this.version}))},n}(App.ControllerSubContent),App.Config.set("Version",{prio:3800,name:"Version",parent:"#system",
target:"#system/version",controller:t,permission:["admin.version"]},"NavBarAdmin")}.call(this),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(){n.__super__.constructor.apply(this,arguments),App.Event.bind("config_update",function(t){return App.Config.set(t.name,t.value),App.Event.trigger("config_update_local",t)})}return e(n,t),n}(App.Controller),App.Config.set("app_config_update",t,"Widgets")}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.WidgetAvatar=function(n){function i(){return this.render=t(this.render,this),i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.model="User",i.prototype.observe={login:!0,firstname:!0,lastname:!0,email:!0,image:!0,vip:!0,out_of_office:!0,out_of_office_start_at:!0,out_of_office_end_at:!0,out_of_office_replacement_id:!0,active:!0},i.prototype.globalRerender=!1,i.prototype.render=function(t){return this.html(t.avatar(this.size,this.position,this.cssClass,!1,!1,this.type)),this.userPopups(this.position)},i}(App.ObserverController)}.call(this),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(){var t;n.__super__.constructor.apply(this,arguments),t=function(t){return function(){var e,n;if((n=App.Session.get("preferences"))&&_.isEmpty(n.locale))return e=App.i18n.get(),t.ajax({id:"i18n-set-user-"+e,type:"PUT",url:App.Config.get("api_path")+"/users/preferences",data:JSON.stringify({locale:e}),processData:!0})}}(this),App.Event.bind("auth:login",function(e){return function(){return e.delay(t,3500,"default_locale")}}(this))}return e(n,t),n}(App.Controller),App.Config.set("default_locale",t,"Widgets")}.call(this),function(){var t;t=function(){function t(){var t;App.Config.get("developer_mode")&&!1!==App.Log.config("banner")&&(t="|\n| Welcome Zammad Developer!\n| You can enable debugging with the following examples (value is a regex):\n|\n| App.Log.config('module', '(websocket|delay|interval)') // enable debugging for websocket, delay and interval class\n| App.Log.config('content', 'send')                      // enable debugging for messages which contain the string 'send'\n| App.Log.config('banner', false)                        // disable this banner\n|\n| App.Log.config()         // current settings\n| App.Log.config('banner') // current setting for banner\n|",console.log(t))}return t}(),App.Config.set("dev_banner",t,"Widgets")}.call(this),function(){var t;t=function(){function t(){var t,e,n,i,s,r,o,a,l,c,u;window.require&&(s=window.require("electron"))&&(a=s.remote,r=s.ipcRenderer,App.Event.bind("window-title-set",function(t){return r.send("window-title-set",t)}),App.Event.bind("online_notification_counter",function(t){return l(t)}),r.on("global-shortcut",function(t,e){return App.Event.trigger("global-shortcut",e)}),t=a.Menu,e=a.MenuItem,i=function(){var n;return n=new t,n.append(new e({label:"Cut",role:"cut"})),n.append(new e({label:"Copy",role:"copy"})),n.append(new e({label:"Paste",role:"paste"})),n.append(new e({label:"Select All",role:"selectall"})),n},o=i(),window.addEventListener("contextmenu",function(){return o.popup(a.getCurrentWindow()),!1}),n=function(t){var e,n,i,s;return i=2,s=16*i,e=document.createElement("canvas"),e.setAttribute("width",s),e.setAttribute("height",s),n=e.getContext("2d"),n.fillStyle="#FF1744",n.beginPath(),n.arc(s/2,s/2,s/2,0,2*Math.PI),n.fill(),n.fillStyle="#ffffff",n.textAlign="center",n.textBaseline="middle",n.font=10*i+"px sans-serif",n.fillText(t,s/2,s/2,s),e.toDataURL()},u=function(t){var e,i;return i=function(e,n){return s.ipcRenderer.send("win32-overlay",{overlayDataURL:e,description:n,content:t})},""!==t?(e=n(t.toString()),i(e,"You have unread messages ("+t+")")):i(null,"You have no unread messages")},c=function(t){return a.app.dock.setBadge(t)},l=function(t){return"win32"===process.platform?u(t):"darwin"===process.platform?c(t):void 0})}return t}(),App.Config.set("aaa_electron_events",t,"Navigations")}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.GlobalSearchWidget=function(e){function n(){$("body").on("mousedown",function(t){return function(e){return t.shiftHeldToogle(e),!0}}(this)),App.Event.bind("global:search:set",function(t){return function(e){var n,i,s,r,o;return r=e[0],n=e[1],r=r.replace('"',""),r.match(/\W/)&&(r='"'+r+'"'),o=n?n+":"+r:""+r,i=$("#global-search").val(),t.shiftHeld&&i?(i+=" AND ",i+=o):i=o,$("#global-search").val(i),s=function(){return $("#global-search").focus()},App.Delay.set(s,20,"global-search-delay")}}(this))}return t(n,e),!1,n.prototype.shiftHeldToogle=function(t){return this.shiftHeld=t.shiftKey},n.search=function(t,e){return App.Event.trigger("global:search:set",[t,e])},n}(Spine.Module),App.Config.set("global_navigation",App.GlobalSearchWidget,"Widgets")}.call(this),function(){var t;t=function(){function t(){var t;App.Config.get("developer_mode")||(t="|  _____                                    _\n| / _  / __ _ _ __ ___  _ __ ___   __ _  __| |\n| \\// / / _` | '_ ` _ \\| '_ ` _ \\ / _` |/ _` |\n|  / //\\ (_| | | | | | | | | | | | (_| | (_| |\n| /____/\\__,_|_| |_| |_|_| |_| |_|\\__,_|\\__,_|\n|\n| Hi there, nice to meet you!\n|\n| Visit %chttp://zammad.com/jobs%c to learn about our current job openings.\n|\n| Your Zammad Team\n|",console.log(t,"text-decoration: underline;","text-decoration: none;"))}return t}(),App.Config.set("hello_banner",t,"Widgets")}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var s in e)i.call(e,s)&&(t[s]=e[s]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;App.HttpLog=function(i){function s(){this.show=e(this.show,this),this.render=e(this.render,this),this.fetch=e(this.fetch,this),s.__super__.constructor.apply(this,arguments),this.fetch(),this.records=[]}return n(s,i),s.prototype.events={"click .js-record":"show"},s.prototype.fetch=function(){return this.ajax({id:"http_logs",type:"GET",url:this.apiPath+"/http_logs/"+this.facility,data:{limit:this.limit||50},processData:!0,success:function(t){return function(e){return(!t.records[0]||e[0]&&t.records[0]&&e[0].updated_at!==t.records[0].updated_at)&&(t.records=e,t.render()),t.delay(t.fetch,2e4)}}(this)})},s.prototype.render=function(){return this.html(App.view("widget/http_log")({records:this.records,description:this.description}))},s.prototype.show=function(e){var n,i,s,r,o;for(e.preventDefault(),r=$(e.currentTarget).data("id"),o=this.records,n=0,i=o.length;n<i;n++)if(s=o[n],r.toString()===s.id.toString())return void new t({record:s,container:this.el.closest(".content")})},s}(App.Controller),t=function(t){function e(){e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.authenticateRequired=!0,e.prototype.large=!0,e.prototype.head="HTTP Log",e.prototype.buttonClose=!0,e.prototype.buttonCancel=!1,e.prototype.buttonSubmit=!1,e.prototype.content=function(){return console.log("cont"),App.view("widget/http_log_show")({record:this.record})},e}(App.ControllerModal)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.InviteUser=function(n){function i(){this.submit=t(this.submit,this),this.render=t(this.render,this),i.__super__.constructor.apply(this,arguments),this.container&&this.el.addClass("modal--local"),this.render(),this.el.modal({keyboard:!0,show:!0,backdrop:!0,container:this.container}).on({"hidden.bs.modal":function(t){return function(){return t.callback&&t.callback(),t.el.remove()}}(this)})}return e(i,n),i.prototype.events={"click  .js-close":"hide","submit .js-user":"submit","click  .js-goToSlide":"goToSlide"},i.prototype.render=function(){var t;return t=$(App.view("widget/invite_user")({head:this.head})),new App.ControllerForm({el:t.find(".js-form"),model:App.User,screen:this.screen,autofocus:!0}),this.initRenderingDone?this.$(".modal-dialog").replaceWith(t):(this.initRenderingDone=!0,this.html(t))},i.prototype.submit=function(t){var e,n,i;return t.preventDefault(),this.showSlide("js-waiting"),this.formDisable(t),this.params=this.formParam(t.target),this.params.invite=!0,this.role&&(n=App.Role.findByAttribute("name",this.role))&&(this.params.role_ids=n.id),i=new App.User,i.load(this.params),e=i.validate({screen:this.screen}),e?(this.log("error new",e),this.formValidate({form:t.target,errors:e}),this.formEnable(t),this.showSlide("js-user"),!1):i.save({done:function(t){return function(){return t.showSlide("js-success"),t.el.modal("hide")}}(this),fail:function(e){return function(n,i){return e.formEnable(t),e.showSlide("js-user"),e.showAlert("js-user",i.error_human||i.error)}}(this)})},i}(App.WizardModal)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.KeyboardShortcutModal=function(n){function i(){this.exists=t(this.exists,this),i.__super__.constructor.apply(this,arguments),this.bind("keyboard_shortcuts_close",this.close)}return e(i,n),i.prototype.authenticateRequired=!0,i.prototype.large=!0,i.prototype.head="Keyboard Shortcuts",i.prototype.buttonClose=!0,i.prototype.buttonCancel=!1,i.prototype.buttonSubmit=!1,i.prototype.content=function(){return App.view("keyboard_shortcuts")({areas:App.Config.get("keyboard_shortcuts"),magicKey:App.Browser.magicKey(),hotkeys:App.Browser.hotkeys().split("+").reverse()})},i.prototype.exists=function(){return this.el.parents("html").length>0},i.prototype.onClosed=function(){if("#keyboard_shortcuts"===window.location.hash)return window.history.back()},i}(App.ControllerModal),App.KeyboardShortcutWidget=function(n){function i(){this.observerKeys=t(this.observerKeys,this),this.observerKeys(),this.lastKey=void 0,$(document).keyup(function(t){return function(e){if(27===e.keyCode)return t.lastKey=void 0}}(this))}return e(i,n),i.include(App.LogInclude),i.prototype.observerKeys=function(){var t,e,n,i,s,r,o,a,l,c,u,p,h,d;for(u=App.Browser.hotkeys(),e=App.Config.get("keyboard_shortcuts"),i=0,a=e.length;i<a;i++)for(t=e[i],p=t.content,r=0,l=p.length;r<l;r++)for(s=p[r],h=s.shortcuts,n=function(t){return function(e){var n;if(n="",e.hotkeys&&(n+=u),e.key&&(""!==n&&(n+="+"),n+=e.key,e.callback))return t.log("debug","bind for",n),$(document).bind("keydown",n,function(i){return i.preventDefault(),t.lastKey&&t.lastKey.modifier===n&&t.lastKey.time+5500>(new Date).getTime()?(t.lastKey.count+=1,t.lastKey.time=(new Date).getTime()):t.lastKey={modifier:n,count:1,time:(new Date).getTime()},e.callback(e,t.lastKey,n)})}}(this),o=0,c=h.length;o<c;o++)d=h[o],n(d);return App.Event.bind("global-shortcut",function(n){var i,r,o;for(o=[],i=0,r=e.length;i<r;i++)t=e[i],o.push(function(){var e,i,r,o;for(r=t.content,o=[],i=0,e=r.length;i<e;i++)s=r[i],o.push(function(){var t,e,i,r;for(i=s.shortcuts,r=[],e=0,t=i.length;e<t;e++)d=i[e],d.globalEvent===n?r.push(d.callback(d)):r.push(void 0);return r}());return o}());return o})},i}(Spine.Module),App.Config.set("keyboard_shortcuts",App.KeyboardShortcutWidget,"Widgets"),App.Config.set("keyboard_shortcuts",[{headline:"Navigation",location:"left",content:[{where:"Used anywhere",shortcuts:[{key:"d",hotkeys:!0,description:"Dashboard",globalEvent:"dashboard",callback:function(){return $("#global-search").blur(),App.Event.trigger("keyboard_shortcuts_close"),window.location.hash="#dashboard"}},{key:"o",hotkeys:!0,description:"Overviews",globalEvent:"overview",callback:function(){return $("#global-search").blur(),App.Event.trigger("keyboard_shortcuts_close"),window.location.hash="#ticket/view"}},{key:"s",hotkeys:!0,description:"Search",globalEvent:"search",callback:function(){return App.Event.trigger("keyboard_shortcuts_close"),$("#global-search").focus()}},{key:"a",hotkeys:!0,description:"Notifications",globalEvent:"notification",callback:function(){return $("#global-search").blur(),App.Event.trigger("keyboard_shortcuts_close"),$("#navigation .js-toggleNotifications").click()}},{key:"n",hotkeys:!0,description:"New Ticket",globalEvent:"new-ticket",callback:function(){return $("#global-search").blur(),App.Event.trigger("keyboard_shortcuts_close"),window.location.hash="#ticket/create"}},{key:"e",hotkeys:!0,description:"Logout",globalEvent:"logout",callback:function(){return App.Event.trigger("keyboard_shortcuts_close"),window.location.hash="#logout"}},{key:"h",hotkeys:!0,description:"List of shortcuts",globalEvent:"list-of-shortcuts",callback:function(t){return function(){return"#keyboard_shortcuts"===window.location.hash?void App.Event.trigger("keyboard_shortcuts_close"):t.dialog&&t.dialog.exists()?(t.dialog.close(),void(t.dialog=!1)):t.dialog=new App.KeyboardShortcutModal}}(this)},{key:"w",hotkeys:!0,description:"Close current tab",globalEvent:"close-current-tab",callback:function(){return App.Event.trigger("keyboard_shortcuts_close"),$("#navigation .tasks .is-active .js-close").click()}},{key:"tab",hotkeys:!0,description:"Next in tab",globalEvent:"next-in-tab",callback:function(){var t,e,n,i;return App.Event.trigger("keyboard_shortcuts_close"),i=function(t){if(t&&t.get(0))return t.get(0).scrollIntoView(!1)},t=$("#navigation .tasks .is-active"),t.get(0)&&(e=t.next(),e.get(0))?(e.find("div").first().click(),void i(e)):(n=$("#navigation .tasks .task").first(),n.get(0)?(n.find("div").first().click(),i(n)):void 0)}},{key:"shift+tab",hotkeys:!0,description:"Previous tab",globalEvent:"previous-in-tab",callback:function(){var t,e,n,i;return App.Event.trigger("keyboard_shortcuts_close"),i=function(t){if(t&&t.get(0))return t.get(0).scrollIntoView(!0)},t=$("#navigation .tasks .is-active"),t.get(0)&&(n=t.prev(),n.get(0))?(n.find("div").first().click(),void i(n)):(e=$("#navigation .tasks .task").last(),e.get(0)?(e.find("div").first().click(),i(e)):void 0)}},{key:"return",hotkeys:!0,description:"Confirm/submit dialog",globalEvent:"submit",callback:function(){var t;return App.Event.trigger("keyboard_shortcuts_close"),t=$("body > div.modal"),t.get(0)?void t.find(".js-submit").click():(t=$(".active.content > div.modal"),t.get(0)?void t.find(".js-submit").click():(t=$(".active.content .js-attributeBar .js-submit"),t.get(0)?void t.first().click():(t=$(".active.content .js-submit"),void(t.get(0)&&t.first().click()))))}}]},{where:"Used in lists (views and results)",shortcuts:[{key:["\u25b2","\u25bc"],description:"Move up and down"},{key:["\u25c0","\u25b6"],description:"Move left and right"},{key:"enter",description:"Select item"}]},{where:"Used in object views",shortcuts:[{key:".",hotkeys:!0,description:"Copy current object number (e. g. Ticket#) to clipboard",callback:function(t,e){var n,i,s;return App.Event.trigger("keyboard_shortcuts_close"),n=$(".active.content .js-objectNumber").first().data("number")||"",e&&1===e.count?void clipboard.copy(n):(i=$(".active.content .js-objectTitle").first().text(),e&&2===e.count?(i&&(n+=": "+i),void clipboard.copy(n)):(s=window.location.toString(),e&&3===e.count?clipboard.copy({"text/plain":n+": "+i+"\n"+s,"text/html":'<a href="'+s+'">'+n+"</a>: "+i}):void 0))}},{keyPrefix:"2x",key:".",hotkeys:!0,description:"...add object title"},{keyPrefix:"3x",key:".",hotkeys:!0,description:"...add object link URL"}]}]},{headline:"Translations",location:"left",content:[{where:"Used anywhere (admin only)",shortcuts:[{admin:!0,key:"t",hotkeys:!0,description:"Enable/disable inline translations",globalEvent:"translation-mode"}]}]},{headline:"Tickets",location:"right",content:[{where:"Used when viewing a Ticket",shortcuts:[{key:"m",hotkeys:!0,description:"Open note box",globalEvent:"article-note-open",callback:function(){return App.Event.trigger("keyboard_shortcuts_close"),$('.active.content .editControls .js-articleTypes [data-value="note"]').click(),$(".active.content .article-new .articleNewEdit-body").first().focus()}},{key:"g",hotkeys:!0,description:"Reply to last article",globalEvent:"article-reply",callback:function(){var t,e;return App.Event.trigger("keyboard_shortcuts_close"),t=$(".active.content .ticket-article .icon-reply").last(),e=t.parent().find(".icon-reply-all"),e.get(0)?void e.click():t.click()}},{key:"j",hotkeys:!0,description:"Set article to internal/public",globalEvent:"article-internal-public",callback:function(){return App.Event.trigger("keyboard_shortcuts_close"),$(".active.content .editControls .js-selectInternalPublic").click()}},{key:"c",hotkeys:!0,description:"Update as closed",globalEvent:"task-update-close",callback:function(){if(App.Event.trigger("keyboard_shortcuts_close"),$(".active.content .edit").get(0))return $('.active.content .edit [name="state_id"]').val(4),$(".active.content .js-attributeBar .js-submit").first().click()}},{key:["\u25c0","\u25b6"],hotkeys:!0,description:"Navigate through article"}]}]},{headline:"Text editing",location:"right",content:[{where:"Used when composing a text",shortcuts:[{key:"u",magicKey:!0,description:"Format as _underlined_",globalEvent:"richtext-underline"},{key:"b",magicKey:!0,description:"Format as |bold|",globalEvent:"richtext-bold"},{key:"i",magicKey:!0,description:"Format as ||italic||",globalEvent:"richtext-italic"},{key:"s",magicKey:!0,description:"Format as //strikethrough//",globalEvent:"richtext-strikethrough"},{key:"f",hotkeys:!0,description:"Removes the formatting",globalEvent:"richtext-remove-formating"},{key:"y",hotkeys:!0,description:"...of whole textarea",globalEvent:"richtext-remove-formating-textarea"},{key:"z",hotkeys:!0,description:"Inserts a horizontal rule",globalEvent:"richtext-hr"},{key:"l",hotkeys:!0,description:"Format as unordered list",globalEvent:"richtext-ul"},{key:"k",hotkeys:!0,description:"Format as ordered list",globalEvent:"richtext-ol"},{key:"1",hotkeys:!0,description:"Format as h1 heading",globalEvent:"richtext-h1"},{key:"2",hotkeys:!0,description:"Format as h2 heading",globalEvent:"richtext-h2"},{key:"3",hotkeys:!0,description:"Format as h3 heading",globalEvent:"richtext-h3"},{key:"x",hotkeys:!0,description:"Removes any hyperlink",globalEvent:"richtext-remove-hyperlink"}]}]}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.WidgetLink=function(n){function i(){if(this.add=t(this.add,this),this["delete"]=t(this["delete"],this),this.render=t(this.render,this),this.reload=t(this.reload,this),this.fetch=t(this.fetch,this),i.__super__.constructor.apply(this,arguments),this.links)return this.localLinks=_.clone(this.links),void this.render();this.fetch()}return e(i,n),i.prototype.events={"click .js-add":"add","click .js-delete":"delete","click .js-delete .icon":"delete"},i.prototype.fetch=function(){return this.ajax({id:"links_"+this.object.id+"_"+this.object_type,type:"GET",url:this.apiPath+"/links",data:{link_object:this.object_type,link_object_value:this.object.id},processData:!0,success:function(t){return function(e){return t.localLinks=e.links,App.Collection.loadAssets(e.assets),t.render()}}(this)})},i.prototype.reload=function(t){return this.localLinks=_.clone(t),this.render()},i.prototype.render=function(){var t,e,n,i,s,r;if(!this.lastLocalLinks||!_.isEqual(this.lastLocalLinks,this.localLinks)){for(this.lastLocalLinks=_.clone(this.localLinks),i={},s=this.localLinks,t=0,n=s.length;t<n;t++)e=s[t],i[e.link_type]||(i[e.link_type]=[]),"Ticket"===e.link_object&&(r=App.Ticket.fullLocal(e.link_object_value),"merged"===r.state.name&&(r.css="merged"),i[e.link_type].push(r));return this.html(App.view("link/info")({links:i})),this.ticketPopups("left")}},i.prototype["delete"]=function(t){var e,n,i,s,r;return t.preventDefault(),r=$(t.currentTarget).data("link-type"),e=$(t.currentTarget).data("object"),n=$(t.currentTarget).data("object-id"),i=this.object_type,s=this.object.id,this.ajax({id:"links_remove_"+this.object.id+"_"+this.object_type,type:"GET",url:this.apiPath+"/links/remove",data:{link_type:r,link_object_source:e,link_object_source_value:n,link_object_target:i,link_object_target_value:s},processData:!0,success:function(t){return function(){return t.fetch()}}(this)})},i.prototype.add=function(t){return t.preventDefault(),new App.LinkAdd({link_object:this.object_type,link_object_id:this.object.id,object:this.object,parent:this,container:this.el.closest(".content")})},i}(App.Controller),App.LinkAdd=function(n){function i(){this.onSubmit=t(this.onSubmit,this),this.content=t(this.content,this),this.fetch=t(this.fetch,this),i.__super__.constructor.apply(this,arguments),this.ticket=this.object,this.fetch()}return e(i,n),i.prototype.buttonClose=!0,i.prototype.buttonCancel=!0,i.prototype.buttonSubmit=!0,i.prototype.head="Link",i.prototype.shown=!1,i.prototype.fetch=function(){return this.ajax({id:"ticket_related",type:"GET",url:this.apiPath+"/ticket_related/"+this.ticket.id,processData:!0,success:function(t){return function(e){return App.Collection.loadAssets(e.assets),t.ticketIdsByCustomer=e.ticket_ids_by_customer,t.ticketIdsRecentViewed=e.ticket_ids_recent_viewed,t.render()}}(this)})},i.prototype.content=function(){var t,e,n,i,s,r,o,a,l,c;for(t=$(App.view("link/add")({link_object:this.link_object,link_object_id:this.link_object_id,object:this.object})),a=[],r=this.ticketIdsByCustomer,e=0,i=r.length;e<i;e++)(c=r[e])!==this.ticket.id&&a.push(c);for(new App.TicketList({tableId:"ticket-merge-customer-tickets",el:t.find("#ticket-merge-customer-tickets"),ticket_ids:a,radio:!0}),l=[],o=this.ticketIdsRecentViewed,n=0,s=o.length;n<s;n++)(c=o[n])!==this.ticket.id&&l.push(c);return new App.TicketList({tableId:"ticket-merge-recent-tickets",el:t.find("#ticket-merge-recent-tickets"),ticket_ids:l,radio:!0}),t.delegate('[name="ticket_number"]',"focus",function(t){return $(t.target).parents().find('[name="radio"]').prop("checked",!1)}),t.delegate('[name="radio"]',"click",function(t){var e;if($(t.target).prop("checked"))return c=$(t.target).val(),e=App.Ticket.fullLocal(c),$(t.target).parents().find('[name="ticket_number"]').val(e.number)}),t},i.prototype.onSubmit=function(t){var e;return e=this.formParam(t.target),e.ticket_number?e.link_type?this.ajax({id:"links_add_"+this.object.id+"_"+this.object_type,type:"GET",url:this.apiPath+"/links/add",data:{link_type:e.link_type,link_object_target:"Ticket",link_object_target_value:this.object.id,link_object_source:"Ticket",link_object_source_number:e.ticket_number},processData:!0,success:function(t){return function(){return t.close(),t.parent.fetch()}}(this),error:function(t){return function(e){var n,i;return i=e.responseText,n={},_.isEmpty(i)||(n=JSON.parse(i)),t.notify({type:"error",msg:App.i18n.translateContent(n.error),removeAll:!0})}}(this)}):void alert("Link type is needed!"):void alert("Ticket# is needed!")},i}(App.ControllerModal)}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var s in e)i.call(e,s)&&(t[s]=e[s]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;t=function(t){function i(){this.checkAvailability=e(this.checkAvailability,this),this.maintanaceAppVersion=e(this.maintanaceAppVersion,this),this.maintanaceConfigChanged=e(this.maintanaceConfigChanged,this),this.maintanaceRestartManual=e(this.maintanaceRestartManual,this),this.maintanaceRestartAuto=e(this.maintanaceRestartAuto,this),this.maintanaceMode=e(this.maintanaceMode,this),this.showMessage=e(this.showMessage,this),i.__super__.constructor.apply(this,arguments),App.Event.bind("maintenance",function(t){return function(e){if("message"===e.type&&t.showMessage(e),"mode"===e.type&&t.maintanaceMode(e),"app_version"===e.type&&t.maintanaceAppVersion(e),"config_changed"===e.type&&t.maintanaceConfigChanged(e),"restart_auto"===e.type&&t.maintanaceRestartAuto(e),"restart_manual"===e.type)return t.maintanaceRestartManual(e)}}(this),"maintenance")}return n(i,t),i.prototype.serverRestarted=!1,i.prototype.showMessage=function(t){var e;return null==t&&(t={}),t.reload?(this.disconnectClient(),e="Continue session"):e="Close",new App.SessionMessage({head:t.head,contentInline:t.message,small:!0,keyboard:!0,backdrop:!0,buttonClose:!0,buttonSubmit:e,forceReload:t.reload})},i.prototype.maintanaceMode=function(t){if(null==t&&(t={}),!0===t.on&&this.authenticateCheck())return this.navigate("#logout")},i.prototype.maintanaceRestartAuto=function(){if(!this.messageRestartAuto)return this.messageRestartAuto=new App.SessionMessage({head:"Zammad is restarting...",message:"Some system settings have changed, Zammad is restarting. Please wait until Zammad is back again.",keyboard:!1,backdrop:!1,buttonClose:!1,buttonSubmit:!1,small:!0,forceReload:!0}),this.disconnectClient(),this.checkAvailability()},i.prototype.maintanaceRestartManual=function(){if(!this.messageRestartManual)return this.messageRestartManual=new App.SessionMessage({head:"Zammad need a restart!",message:'Some system settings have changed, please restart all Zammad processes! If you want to do this automatically, set environment variable APP___RESTART___CMD="/path/to/your___app___script.sh restart".',keyboard:!1,backdrop:!1,buttonClose:!1,buttonSubmit:!1,small:!0,forceReload:!0}),this.disconnectClient(),this.checkAvailability()},i.prototype.maintanaceConfigChanged=function(){if(!this.messageConfigChanged)return this.messageConfigChanged=new App.SessionMessage({head:"Config has changed",message:"The configuration of Zammad has changed, please reload your browser.",keyboard:!1,backdrop:!0,buttonClose:!1,buttonSubmit:"Continue session",forceReload:!0})},i.prototype.maintanaceAppVersion=function(t){var e,n;if(!this.messageAppVersion&&this.appVersion!==t.app_version){if(!this.appVersion)return void(this.appVersion=t.app_version);if(this.appVersion=t.app_version,e=this.appVersion.split(":"),"true"===e[1])return n=function(t){return function(){return t.messageAppVersion=new App.SessionMessage({head:"New Version",message:"A new version of Zammad is available, please reload your browser.",keyboard:!1,backdrop:!0,buttonClose:!1,buttonSubmit:"Continue session",forceReload:!0})}}(this),this.delay(n,2e3)}},i.prototype.checkAvailability=function(t){var e;return e=function(t){return function(){return t.ajax({id:"check_availability",type:"get",url:t.apiPath+"/available",success:function(){return t.serverRestarted?void t.windowReload():t.checkAvailability()},error:function(){return t.serverRestarted=!0,t.checkAvailability(2e3)}})}}(this),null==t&&(t=1e3),this.delay(e,t)},i}(App.Controller),App.Config.set("maintenance",t,"Widgets")}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;App.Notify=function(e){function n(){n.__super__.constructor.apply(this,arguments),this.bind("notify",function(t){return function(e){return t.render(e)}}(this)),this.bind("notify:removeall",function(t){return function(){return t.log("notify:removeall",t),t.destroyAll()}}(this)),this.bind("notifyDesktop",function(t){return function(e){var n,i,s;if(window.Notification)return e.icon||(e.icon=t.logoUrl()),s=864e5,document.hasFocus()&&(s=4e3),t.desktopNotifyCounter+=1,n=t.desktopNotifyCounter,e.silent=!0,i=new window.Notification(e.title,e),t.desktopNotify[n]=i,t.log("debug","notifyDesktop",e,n),i.onclose=function(){return delete t.desktopNotify[n]},i.onclick=function(){if(window.focus(),t.log("debug","notifyDesktop.click",e),e.url&&t.locationExecuteOrNavigate(e.url),e.callback)return e.callback()},e.timeout||s?App.Delay.set(function(){return i.close()},e.timeout||s):void 0}}(this)),this.bind("auth",function(t){if(!_.isEmpty(t)){if(!window.Notification)return;return window.Notification.requestPermission()}}),$(window).focus(function(t){return function(){var e,n,i,s;i=t.desktopNotify,s=[];for(e in i)n=i[e],s.push(n.close());return s}}(this))}return t(n,e),n.prototype.desktopNotify={},n.prototype.desktopNotifyCounter=0,n.prototype.events={"click .alert":"destroy"},n.prototype.render=function(t){return"info"===t.type&&(t.type="information"),"warning"===t.type&&(t.type="alert"),t.removeAll&&$.noty.closeAll(),t.link&&(t.msg='<a href="'+t.link+'">'+t.msg+"</a>"),$("#notify").noty({text:t.msg,type:t.type,template:App.view("notify")({type:t.type}),animation:{open:"animated fadeInDown",close:"animated fadeOutDown"},timeout:t.timeout||3800,closeWith:["click"]})},n.prototype.destroy=function(t){return t.preventDefault()},n.prototype.destroyAll=function(){return $.noty.closeAll()},n}(App.ControllerWidgetPermanent),App.Config.set("notify",App.Notify,"Widgets")}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.OnlineNotificationWidget=function(n){function i(){this.remove=t(this.remove,this),this.hide=t(this.hide,this),this.show=t(this.show,this),this.createContainer=t(this.createContainer,this),this.toggle=t(this.toggle,this),this.fetch=t(this.fetch,this),this.counterGen=t(this.counterGen,this),this.counterUpdate=t(this.counterUpdate,this),this.listNavigate=t(this.listNavigate,this),i.__super__.constructor.apply(this,arguments),this.bind("OnlineNotification::changed",function(t){return function(){return t.delay(function(){return t.fetch()},2200,"online-notification-changed")}}(this)),this.ignoreInitLogin=!1,this.bind("ws:login",function(t){return function(){return t.ignoreInitLogin&&t.delay(function(){return t.fetch()},3200,"online-notification-changed"),t.ignoreInitLogin=!0}}(this)),this.bind("auth",function(t){return function(e){if(!e)return void t.counterUpdate(0);t.access()||t.counterUpdate(0)}}(this)),$(window).on("click.notifications",this.hide),this.createContainer(),this.bind("ui:rerender",function(t){return function(){return t.createContainer(),"online_notification"}}(this))}return e(i,n),i.prototype.alreadyShown={},i.prototype.shown=!1,i.prototype.className="popover popover--notifications right js-notificationsContainer",i.prototype.attributes={role:"tooltip"},i.prototype.events={"click .js-mark":"markAllAsRead",click:"stopPropagation"},i.prototype.elements={".js-mark":"mark",".js-noNotifications":"noNotifications",".js-item":"item",".js-content":"content",".js-header":"header"},i.prototype.release=function(){return $(window).off("click.notifications"),$(window).off("keydown.notifications"),i.__super__.release.apply(this,arguments)},i.prototype.access=function(){return!!this.Session.get()},i.prototype.listNavigate=function(t){if(27===t.keyCode)this.hide();else if(38===t.keyCode)t.preventDefault(),this.nudge(t,-1);else if(40===t.keyCode)t.preventDefault(),this.nudge(t,1);else if(13===t.keyCode)return this.$(".js-item").filter(".is-hover").find(".js-locationVerify").click()},i.prototype.nudge=function(t,e){var n,i,s,r;return i=this.$(".js-item"),n=i.filter(".is-hover"),n.size()?(1===e?(s=n.next(".js-item"),s.size()&&(n.removeClass("is-hover"),s.addClass("is-hover"))):(r=n.prev(".js-item"),r.size()&&(n.removeClass("is-hover"),r.addClass("is-hover"))),s&&this.scrollToIfNeeded(s,!0),r?this.scrollToIfNeeded(r,!1):void 0):void i.first().addClass("is-hover")},i.prototype.counterUpdate=function(t,e){if(null==e&&(e=!1),0===t&&(t=""),e||this.count!==t)return this.count=t,$(".js-notificationsCounter").text(t),App.Event.trigger("online_notification_counter",t.toString()),t?this.mark.removeClass("hide"):this.mark.addClass("hide")},i.prototype.counterGen=function(t){var e,n,i,s,r;for(null==t&&(t=!1),s=App.OnlineNotification.all(),e=0,n=0,r=s.length;n<r;n++)i=s[n],i.seen||e++;return this.counterUpdate(e,t),_.isEmpty(s)?(this.noNotifications.removeClass("hide"),
this.el.addClass("is-empty")):(this.noNotifications.addClass("hide"),this.el.removeClass("is-empty"))},i.prototype.markAllAsRead=function(t){return t.preventDefault(),this.counterUpdate(0),this.ajax({id:"markAllAsRead",type:"POST",url:this.apiPath+"/online_notifications/mark_all_as_read",data:JSON.stringify(""),processData:!0,success:function(t){return function(){return t.fetch()}}(this)})},i.prototype.fetch=function(){var t;return t=function(t){return function(){return t.fetchedData=!0}}(this),App.OnlineNotification.fetchFull(t,{clear:!0,force:!0})},i.prototype.toggle=function(){return this.shown?this.hide():this.show()},i.prototype.createContainer=function(){var t,e;return this.Session.get()?(t="",e=$(App.view("widget/online_notification")({count:t})),new App.OnlineNotificationContentWidget({el:e.find(".js-items"),container:this}),this.html(e),this.counterGen(!0),this.shown?this.show():void 0):void this.content.html("")},i.prototype.show=function(){if(this.access())return $(window).on("keydown.notifications",this.listNavigate),this.shown=!0,this.el.addClass("is-visible")},i.prototype.hide=function(){return $(window).off("keydown.notifications"),this.shown=!1,this.el.removeClass("is-visible")},i.prototype.stopPropagation=function(t){return t.stopPropagation()},i.prototype.remove=function(){return this.el.remove()},i}(App.Controller),App.OnlineNotificationContentWidget=function(n){function i(){return this.onClick=t(this.onClick,this),this.onRenderEnd=t(this.onRenderEnd,this),i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.model="OnlineNotification",i.prototype.template="widget/online_notification_item",i.prototype.prepareForObjectListItemSupport=!0,i.prototype.observe={seen:!0},i.prototype.sortBy="created_at",i.prototype.order="DESC",i.prototype.alreadyShown={},i.prototype.insertPosition="before",i.prototype.globalRerender=!1,i.prototype.onRenderEnd=function(){var t,e,n,i,s,r;for(this.container.counterGen(),n=App.OnlineNotification.search({sortBy:"created_at",order:"DESC"}),s=[],t=0,i=n.length;t<i;t++)e=n[t],this.alreadyShown[e.id]?s.push(void 0):(this.alreadyShown[e.id]=!0,e.seen?s.push(void 0):this.container.fetchedData?(e=this.prepareForObjectListItem(e),r=e.objectNative&&e.objectNative.activityMessage?e.objectNative.activityMessage(e):"Need objectNative in item "+e.object+".find("+e.o_id+")",r=App.Utils.html2text(r.replace(/<.+?>/g,'"')),this.notifyDesktop({url:e.link,title:r}),s.push(App.OnlineNotification.play())):s.push(void 0));return s},i.prototype.onClick=function(){return this.container.hide()},i}(App.CollectionController)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.WidgetOrganization=function(n){function i(){this.update=t(this.update,this),this.render=t(this.render,this),this.release=t(this.release,this),i.__super__.constructor.apply(this,arguments),this.subscribeId=App.Organization.full(this.organization_id,this.render,!1,!0)}return e(i,n),i.prototype.events={"focusout [contenteditable]":"update"},i.prototype.release=function(){return App.Organization.unsubscribe(this.subscribeId)},i.prototype.render=function(t){var e,n,i,s,r,o;t||(t=this.u),r=[],o=App.Organization.attributesGet("view");for(n in o)e=o[n],i=n,s=i.substr(0,i.length-3),s in t&&(i=s),(t[i]||"richtext"===e.tag)&&e.shown&&"name"!==i&&r.push(e);return this.html(App.view("widget/organization")({organization:t,organizationData:r})),this.$("[contenteditable]").ce({mode:"textonly",multiline:!0,maxlength:250}),this.userPopups()},i.prototype.update=function(t){var e,n,i,s;if(n=$(t.target).attr("data-name"),s=$(t.target).html(),i=App.Organization.find(this.organization_id),i[n]!==s)return e={},e[n]=s,i.updateAttributes(e),this.log("notice","update",n,s,i)},i}(App.Controller)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.WidgetPlaceholder=function(n){function i(){this.update=t(this.update,this),i.__super__.constructor.apply(this,arguments),this.data||(this.data={}),this.bindElements=[],this.selector?this.bindElements=this.$(this.selector).textmodule():this.el.attr("contenteditable")?this.bindElements=this.el.textmodule():this.bindElements=this.$("[contenteditable]").textmodule(),App.Setting.subscribe(this.update,{initFetch:!0})}return e(i,n),i.prototype.update=function(){var t,e,n,i,s,r,o,a,l,c,u,p,h,d,f,g,m,v,y,b,w,k,T,S,C,A,x,j,I,D,P,E,O,N,R,M,z,L,U;for(t=[],o={password:!0,active:!0},a={password:!0,active:!0,created_at:!0,updated_at:!0},A=this.objects,r=0,d=A.length;r<d;r++)if(l=A[r],w={},App[l.object]&&App[l.object].configure_attributes){for(x=App[l.object].configure_attributes,c=0,f=x.length;c<f;c++)e=x[c],o[e.name]||"_ids"===e.name.substr(e.name.length-4,e.name.length)||(w[e.name]=e);for(j=_.keys(w).sort(),u=0,g=j.length;u<g;u++)if(S=j[u],e=w[S],S="#{"+l.prefix+"."+e.name+"}",n="#{"+l.prefix+"."+e.name+"}",e.relation){if(z={name:"Name"},App[e.relation]&&App[e.relation].configure_attributes){for(L={},z={},I=App[e.relation].configure_attributes,h=0,m=I.length;h<m;h++)M=I[h],a[M.name]||"_id"===M.name.substr(M.name.length-3,M.name.length)||"_ids"===M.name.substr(M.name.length-4,M.name.length)||(L[M.name]=M);for(D=_.keys(L).sort(),k=0,v=D.length;k<v;k++)U=D[k],z[U]=L[U].display}O=l.prefix+"."+e.name.substr(0,e.name.length-3);for(p in z)i=z[p],S="#{"+O+"."+p+"}",n="#{"+O+"."+p+"}",t.push({id:S,keywords:S,name:App.i18n.translateInline(l.display)+" > "+App.i18n.translateInline(e.display)+" > "+App.i18n.translateInline(i),content:n})}else t.push({id:S,keywords:S,name:App.i18n.translateInline(l.display)+" > "+App.i18n.translateInline(e.display),content:n})}for(P=App.Setting.all(),T=0,y=P.length;T<y;T++)R=P[T],R.frontend&&R.preferences&&R.preferences.placeholder&&(S=App.i18n.translateInline("Config")+" > "+App.i18n.translateInline(R.title),n="#{config."+R.name+"}",t.push({id:R.name,keywords:R.name,name:S,content:n}));if(this.bindElements[0]){for(E=this.bindElements,N=[],C=0,b=E.length;C<b;C++)s=E[C],$(s).data().plugin_textmodule?N.push($(s).data().plugin_textmodule.collection=t):N.push(void 0);return N}},i}(App.Controller)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.ScriptSnipped=function(n){function i(){this.render=t(this.render,this),i.__super__.constructor.apply(this,arguments),this.records=[],this.render()}return e(i,n),i.prototype.elements={".js-code":"code"},i.prototype.render=function(){return this.html(App.view("widget/script_snipped")({records:this.records,description:this.description,style:this.style,content:this.content})),this.code.each(function(t,e){return hljs.highlightBlock(e)})},i}(App.Controller)}.call(this),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(){n.__super__.constructor.apply(this,arguments),this.bind()}return e(n,t),n.prototype.bind=function(){return App.Event.bind("spool:sent",function(t){return function(){return t.spoolSent=!0,App.WebSocket.send({event:"broadcast",spool:!0,recipient:{user_id:[App.Session.get("id")]},data:{event:"session:takeover",data:{taskbar_id:App.TaskManager.TaskbarId()}}})}}(this),"maintenance"),App.Event.bind("session:takeover",function(t){return function(e){if(t.spoolSent)return t.error||e.taskbar_id===App.TaskManager.TaskbarId()?void 0:(t.error=new App.SessionMessage({head:"Session",message:"A new session was created with your account. This session will be stopped to prevent a conflict.",keyboard:!1,backdrop:!0,buttonClose:!1,buttonSubmit:"Continue session",forceReload:!0}),t.disconnectClient())}}(this),"maintenance")},n}(App.Controller),App.Config.set("session_taken_over",t,"Widgets")}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var s in e)i.call(e,s)&&(t[s]=e[s]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;t=function(t){function i(){this.switchBack=e(this.switchBack,this),i.__super__.constructor.apply(this,arguments),this.bind("app:ready",function(t){return function(){return t.render()}}(this)),this.bind("ui:rerender",function(t){return function(){return t.render()}}(this)),this.bind("auth:logout",function(t){return function(){return App.Config.set("switch_back_to_possible",!1),t.render()}}(this))}return n(i,t),i.prototype.className="switchBackToUser",i.prototype.render=function(){return App.Config.get("switch_back_to_possible")&&App.Session.get()?(this.html(App.view("widget/switch_back_to_user")()),this.element().on("click",".js-close",function(t){return function(e){return t.switchBack(e)}}(this))):void this.element().remove()},i.prototype.switchBack=function(t){return t.preventDefault(),this.disconnectClient(),$("#app").hide().attr("style","display: none!important"),this.delay(function(t){return function(){return App.Auth._logout(!1),t.ajax({id:"user_switch_back",type:"GET",url:t.apiPath+"/sessions/switch_back",success:function(e){var n;return n=window.location.protocol+"//"+window.location.host+e.location,t.windowReload(void 0,n)}})}}(this),800)},i}(App.ControllerWidgetOnDemand),App.Config.set("switch_back_to_user",t,"Widgets")}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.WidgetTag=function(n){function i(){if(this.remove=t(this.remove,this),this.onRemoveTag=t(this.onRemoveTag,this),this.addItem=t(this.addItem,this),this.add=t(this.add,this),this.onAddTag=t(this.onAddTag,this),this.hideAndAddInput=t(this.hideAndAddInput,this),this.showInput=t(this.showInput,this),this.render=t(this.render,this),this.reload=t(this.reload,this),this.fetch=t(this.fetch,this),this.addInput=t(this.addInput,this),i.__super__.constructor.apply(this,arguments),this.key="tags::"+this.object_type+"::"+this.object.id,this.tags)return this.localTags=_.clone(this.tags),void this.render();this.fetch()}return e(i,n),i.prototype.editMode=!1,i.prototype.pendingRefresh=!1,i.prototype.possibleTags={},i.prototype.elements={".js-newTagLabel":"newTagLabel",".js-newTagInput":"newTagInput"},i.prototype.events={"click .js-newTagLabel":"showInput","blur .js-newTagInput":"hideAndAddInput","keyup .js-newTagInput":"addInput","submit form":"onAddTag","click .js-delete":"onRemoveTag","click .js-tag":"searchTag"},i.prototype.addInput=function(t){if(9===t.keyCode)return this.hideAndAddInput()},i.prototype.fetch=function(){return this.pendingRefresh=!1,App[this.object_type].tagGet(this.object.id,this.key,function(t){return function(e){return t.localTags=e.tags,t.render()}}(this))},i.prototype.reload=function(t){return this.editMode?void(this.pendingRefresh=!0):(this.localTags=_.clone(t),this.render())},i.prototype.render=function(){var t;if(!this.lastLocalTags||!_.isEqual(this.lastLocalTags,this.localTags))return this.lastLocalTags=_.clone(this.localTags),this.html(App.view("widget/tag")({tags:this.localTags||[]})),t=App.Config.get("api_path")+"/tag_search",this.$(".js-newTagInput").autocomplete({source:t,minLength:0,response:function(t){return function(e,n){var i,s,r,o,a;if(n&&n.content){for(o=n.content,a=[],i=0,r=o.length;i<r;i++)s=o[i],a.push(t.possibleTags[s.value]=!0);return a}}}(this)})},i.prototype.showInput=function(t){return t.preventDefault(),this.newTagLabel.addClass("hide"),this.newTagInput.removeClass("hide").focus(),this.newTagInput.trigger(jQuery.Event("keydown")),this.editMode=!0},i.prototype.hideAndAddInput=function(){return this.newTagLabel.removeClass("hide"),this.newTagInput.addClass("hide"),this.onAddTag(),this.editMode=!1},i.prototype.onAddTag=function(t){var e;return t&&t.preventDefault(),e=this.$('[name="new_tag"]').val().trim(),e?this.add(e):void(this.pendingRefresh&&this.fetch())},i.prototype.add=function(t,e){var n,i,s,r,o;for(null==e&&(e=""),r=t.split(","),o=[],n=0,s=r.length;n<s;n++)i=r[n],i=i.trim(),o.push(this.addItem(i,e));return o},i.prototype.addItem=function(t,e){return null==e&&(e=""),_.contains(this.localTags,t)?void this.render():"macro"===e||!1!==App.Config.get("tag_new")||this.possibleTags[t]?(this.localTags.push(t),this.render(),App[this.object_type].tagAdd(this.object.id,t)):void 0},i.prototype.onRemoveTag=function(t){var e;if(t.preventDefault(),e=$(t.target).parents("li").find(".js-tag").text())return this.remove(e)},i.prototype.remove=function(t){return this.localTags=_.filter(this.localTags,function(e){if(e!==t)return e}),this.render(),App[this.object_type].tagRemove(this.object.id,t)},i.prototype.searchTag=function(t){var e;return t.preventDefault(),e=$(t.target).text(),App.GlobalSearchWidget.search(e,"tags")},i}(App.Controller)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.WidgetTemplate=function(n){function i(){this.create=t(this.create,this),this.select=t(this.select,this),this["delete"]=t(this["delete"],this),this.render=t(this.render,this),this.release=t(this.release,this),i.__super__.constructor.apply(this,arguments),this.subscribeId=App.Template.subscribe(this.render,{initFetch:!0}),this.render()}return e(i,n),i.prototype.events={"click .templates-manage .js-save":"create","click .templates-manage .js-apply":"select","click .templates-manage .js-delete":"delete","click .templates-welcome .js-create":"showManage"},i.prototype.release=function(){return App.Template.unsubscribe(this.subscribeId)},i.prototype.render=function(){var t;return this.configure_attributes=[{name:"id",display:"",tag:"select",multiple:!1,"null":!0,nulloption:!0,relation:"Template","default":this.id}],t={},this.id&&App.Template.exists(this.id)&&(t=App.Template.find(this.id)),this.html(App.view("widget/template")({template:t})),new App.ControllerForm({el:this.el.find("#form-template"),model:{configure_attributes:this.configure_attributes},autofocus:!1}),0===App.Template.all().length?this.showWelcome():this.showManage()},i.prototype.showManage=function(t){return t&&t.preventDefault(),this.el.find(".templates-manage").show(),this.el.find(".templates-welcome").hide()},i.prototype.showWelcome=function(t){return t&&t.preventDefault(),this.el.find(".templates-manage").hide(),this.el.find(".templates-welcome").show()},i.prototype["delete"]=function(t){var e,n;if(t.preventDefault(),e=this.formParam(t.target),e.id)return n=App.Template.find(e.id),confirm("Sure?")?(this.id=!1,n.destroy()):void 0},i.prototype.select=function(t){var e,n;if(t.preventDefault(),e=this.formParam(t.target),e.id)return this.id=e.id,n=App.Template.find(e.id),App.Event.trigger("ticket_create_rerender",n.attributes())},i.prototype.create=function(t){var e,n,i,s,r,o;if(t.preventDefault(),n=this.formParam($(t.target).closest(".content").find(".ticket-create")),s=this.formParam(t.target),i=s.name)return r=App.Template.findByAttribute("name",i),r||(r=new App.Template),r.load({name:s.name,options:n}),e=r.validate(),e?this.log("error",e):(o=this,r.save({done:function(){return o.id=this.id},fail:function(t){return function(){return t.log("error","save failed!")}}(this)}))},i}(App.Controller)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.WidgetTextModule=function(n){function i(){this.update=t(this.update,this),this.reload=t(this.reload,this),this.release=t(this.release,this),i.__super__.constructor.apply(this,arguments),this.data||(this.data={}),this.bindElements=[],this.selector?this.bindElements=this.$(this.selector).textmodule():this.el.attr("contenteditable")?this.bindElements=this.el.textmodule():this.bindElements=this.$("[contenteditable]").textmodule(),this.update(),this.subscribeId=App.TextModule.subscribe(this.update,{initFetch:!0})}return e(i,n),i.prototype.release=function(){return App.TextModule.unsubscribe(this.subscribeId)},i.prototype.reload=function(t){if(t)return this.data=t,this.update()},i.prototype.update=function(){var t,e,n,i,s,r,o,a,l,c,u;for(e=App.TextModule.all(),t=[],s=0,a=e.length;s<a;s++)r=e[s],!0===r.active&&(n=r.attributes(),n.content=App.Utils.replaceTags(n.content,this.data),t.push(n));if(this.bindElements[0]){for(c=this.bindElements,u=[],o=0,l=c.length;o<l;o++)i=c[o],$(i).data().plugin_textmodule?u.push($(i).data().plugin_textmodule.collection=t):u.push(void 0);return u}},i}(App.Controller)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.TicketList=function(n){function i(){this.render=t(this.render,this),i.__super__.constructor.apply(this,arguments),this.render()}return e(i,n),i.prototype.render=function(){var t,e,n,i,s,r,o,a,l,c,u,p;for(function(t){return function(e){var n;return n=App.Ticket.findNative(e),t.navigate(n.uiUrl())}}(this),s=function(t,e,n){return n.title=e.title,t},n=function(t,e,n){return n.link=e.uiUrl(),t},r=function(t,e,n){var i;return e?(i=void 0,"customer_id"===n.name&&(i=e.customer_id),"owner_id"===n.name&&(i=e.owner_id),i?(n["class"]="user-popover",n.data={id:i},t):t):t},i=function(t,e,n){return e&&e.organization_id?(n["class"]="organization-popover",n.data={id:e.organization_id},t):t},e=function(t){var e;return e={name:"icon",display:"",translation:!1,width:"28px",displayWidth:28,unresizable:!0},t.unshift(0),t[0]=e,t},t=function(t,e,n){return t=" ",n["class"]=e.iconClass(),n.link="",n.title=e.iconTitle(),t},l=[],c=this.ticket_ids,o=0,a=c.length;o<a;o++)p=c[o],u=App.Ticket.fullLocal(p),l.push(u);return this.el.html(""),new App.ControllerTable({tableId:this.tableId,el:this.el,overview:this.columns||["number","title","customer","group","created_at"],model:App.Ticket,objects:l,callbackHeader:[e],callbackAttributes:{icon:[t],customer_id:[r],organization_id:[i],owner_id:[r],title:[n,s],number:[n,s]},radio:this.radio}),this.userPopups(),this.organizationPopups()},i}(App.Controller)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.TicketStats=function(n){function i(){this.render=t(this.render,this),this.showUserTab=t(this.showUserTab,this),this.showOrgTab=t(this.showOrgTab,this),this.load=t(this.load,this),this.release=t(this.release,this),i.__super__.constructor.apply(this,arguments),this.user?this.subscribeIdUser=App.User.full(this.user.id,this.load,!1,!0):this.organization&&(this.subscribeIdOrganization=App.Organization.full(this.organization.id,this.load,!1,!0)),this.bind("ui:rerender",function(t){return function(){if(t.authenticateCheck())return t.render()}}(this))}return e(i,n),i.prototype.elements={".js-userTab":"userTabButton",".js-orgTab":"orgTabButton",".js-user":"userTab",".js-org":"orgTab"},i.prototype.events={"click .js-userTab":"showUserTab","click .js-orgTab":"showOrgTab"},i.prototype.release=function(){if(this.subscribeIdUser&&App.User.unsubscribe(this.subscribeIdUser),this.subscribeIdOrganization)return App.Organization.unsubscribe(this.subscribeIdOrganization)},i.prototype.load=function(t,e){var n,i;if("change"!==e)return this.organization?(n="org_"+this.organization.id,i={organization_id:this.organization.id}):(n="user_"+this.user.id,i={user_id:this.user.id,organization_id:this.user.organization_id}),this.ajax({id:"ticket_stats_"+n,type:"GET",url:this.apiPath+"/ticket_stats",data:i,processData:!0,success:function(t){return function(e){return App.Collection.loadAssets(e.assets),t.data=e,t.render(e)}}(this)})},i.prototype.showOrgTab=function(){return this.userTabButton.removeClass("active"),this.orgTabButton.addClass("active"),this.userTab.addClass("hide"),this.orgTab.removeClass("hide")},i.prototype.showUserTab=function(){return this.userTabButton.addClass("active"),this.orgTabButton.removeClass("active"),this.userTab.removeClass("hide"),this.orgTab.addClass("hide")},i.prototype.render=function(t){var e,n,i,s;if(t||(t=this.data),t)return s=0,t.user.open_ids&&t.user.closed_ids&&(s=t.user.open_ids.length+t.user.closed_ids.length),i=0,t.organization.open_ids&&t.organization.closed_ids&&(i=t.organization.open_ids.length+t.organization.closed_ids.length),this.html(App.view("widget/ticket_stats")({user:this.user,user_total:s,organization:this.organization,organization_total:i})),n=5,_.isEmpty(t.user)||(e="",0===t.user.open_ids.length&&t.user.closed_ids.length>0&&(e="mood icon supergood-color"),new App.TicketStatsList({el:this.$(".js-user-open-tickets"),user:this.user,head:"Open Tickets",iconClass:e,ticket_ids:t.user.open_ids,limit:n}),new App.TicketStatsList({el:this.$(".js-user-closed-tickets"),user:this.user,head:"Closed Tickets",ticket_ids:t.user.closed_ids,limit:n}),new App.TicketStatsFrequency({el:this.$(".js-user-frequency"),user:this.user,ticket_volume_by_year:t.user.volume_by_year})),_.isEmpty(t.organization)?void 0:(e="",0===t.organization.open_ids.length&&t.organization.closed_ids.length>0&&(e="mood icon supergood-color"),new App.TicketStatsList({el:this.$(".js-org-open-tickets"),user:this.user,head:"Open Tickets",iconClass:e,ticket_ids:t.organization.open_ids,limit:n}),new App.TicketStatsList({el:this.$(".js-org-closed-tickets"),user:this.user,head:"Closed Tickets",ticket_ids:t.organization.closed_ids,limit:n}),new App.TicketStatsFrequency({el:this.$(".js-org-frequency"),user:this.user,ticket_volume_by_year:t.organization.volume_by_year}))},i}(App.Controller),App.TicketStatsList=function(n){function i(){this.showAll=t(this.showAll,this),this.render=t(this.render,this),i.__super__.constructor.apply(this,arguments),this.render()}return e(i,n),i.prototype.events={"click .js-showAll":"showAll"},i.prototype.render=function(){var t,e,n,i,s,r;if(r=[],this.all)r=this.ticket_ids;else for(t=0,i=this.ticket_ids,e=0,n=i.length;e<n;e++)s=i[e],(t+=1)<=this.limit&&r.push(s);return this.html(App.view("widget/ticket_stats_list")({user:this.user,head:this.head,iconClass:this.iconClass,ticket_ids:this.ticket_ids,ticket_ids_show:r,limit:this.limit})),this.ticketPopups()},i.prototype.showAll=function(t){return t.preventDefault(),this.all=!0,this.render()},i}(App.Controller),App.TicketStatsFrequency=function(n){function i(){this.render=t(this.render,this),i.__super__.constructor.apply(this,arguments),this.render()}return e(i,n),i.prototype.render=function(){var t,e,n,i,s,r,o,a;for(r=0,o=this.ticket_volume_by_year,t=0,i=o.length;t<i;t++)e=o[t],e.closed>r&&(r=e.closed),e.created>r&&(r=e.created);for(a=this.ticket_volume_by_year,n=0,s=a.length;n<s;n++)e=a[n],e.created_in_percent=100/r*e.created,e.closed_in_percent=100/r*e.closed;return this.html(App.view("widget/ticket_stats_frequency")({ticket_volume_by_year:this.ticket_volume_by_year.reverse()}))},i}(App.Controller)}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var s in e)i.call(e,s)&&(t[s]=e[s]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;t=function(t){function i(){this.toogle=e(this.toogle,this),this.rebind=e(this.rebind,this),i.__super__.constructor.apply(this,arguments),this.rebind(),App.Event.bind("auth",function(t){return function(){return t.rebind()}}(this)),App.Event.bind("i18n:inline_translation",function(t){return function(){return t.toogle()}}(this))}return n(i,t),i.prototype.rebind=function(){var t;if($(document).off("keydown.translation"),this.permissionCheck("admin.translation"))return t=App.Browser.hotkeys(),$(document).on("keydown.translation",function(e){return function(n){var i;if(i=!1,"ctrl+shift"===t?!n.altKey&&n.ctrlKey&&!n.metaKey&&n.shiftKey&&(i=!0):n.altKey&&n.ctrlKey&&!n.metaKey&&(i=!0),i&&84===n.keyCode)return n.preventDefault(),e.toogle()}}(this))},i.prototype.toogle=function(){return this.active?($(".translation:focus").trigger("blur"),this.disable(),void(this.active=!1)):(this.enable(),this.active=!0)},i.prototype.enable=function(){var t;return t=App.i18n.meta(),!this.mapLoaded&&t&&t.mapToLoad&&(this.mapLoaded=!0,App.Translation.refresh(t.mapToLoad,{clear:!0})),App.Config.set("translation_inline",!0),App.Event.trigger("ui:rerender"),$("body").on("focus.translation",".translation",function(t){var e;return e=$(t.target),e.data("before",e.text()),e}).on("blur.translation",".translation",function(t){var e,n,i,s,r;if(e=$(t.target),(n=e.attr("title"))&&(r=e.text(),e.data("before")!==r))return App.Log.debug("translation_inline","translate update",r,"before",e.data),e.data("before",r),App.i18n.setMap(n,r),i=n.replace("'","\\'"),$(".translation[title='"+i+"']").text(r),s=App.Translation.findByAttribute("source",n),s?s.updateAttribute("target",r):(s=new App.Translation,s.load({locale:App.i18n.get(),source:n,target:r,target_initial:""}),s.save()),e})},i.prototype.disable=function(){return $("body").off("focus.translation blur.translation"),App.Config.set("translation_inline",!1),App.Event.trigger("ui:rerender")},i}(App.Controller),App.Config.set("translation_inline",t,"Widgets")}.call(this),function(){var t,e,n=function(t,e){function n(){this.constructor=t}for(var s in e)i.call(e,s)&&(t[s]=e[s]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty,s=function(t,e){return function(){return t.apply(e,arguments)}};e=function(e){function i(){var e;i.__super__.constructor.apply(this,arguments),e=function(e){return function(){var n,i;if(e.Config.get("system_init_done")&&App.i18n.notTranslatedFeatureEnabled(App.i18n.get())&&e.permissionCheck("admin.translation")&&!(window.location.hash.toString().match(/getting/)||(n=App.i18n.meta(),(i=parseInt(n.translated/(n.total/100)))>95)))return new t({percent:i})}}(this),this.bind("i18n:language:change",function(t){return function(){return t.delay(e,2500,"translation_support")}}(this)),this.bind("auth:login",function(t){return function(){return t.delay(e,2500,"translation_support")}}(this))}return n(i,e),i}(App.Controller),App.Config.set("translaton_support",e,"Widgets"),t=function(t){function e(){this.onSubmit=s(this.onSubmit,this),this.onCancel=s(this.onCancel,this),this.content=s(this.content,this),e.__super__.constructor.apply(this,arguments),App.LocalStorage.get("translation_support_no",this.Session.get("id"))||this.render()}return n(e,t),e.prototype.buttonClose=!0,e.prototype.buttonCancel="No Thanks!",e.prototype.buttonSubmit="Complete translations",e.prototype.head="Help to improve Zammad!",e.prototype.shown=!1,e.prototype.content=function(){var t;return t=!1,this.percent>80&&(t=!0),App.view("translation/support")({percent:this.percent,better:t})},e.prototype.onCancel=function(){return App.LocalStorage.set("translation_support_no",!0,this.Session.get("id")),this.close()},e.prototype.onSubmit=function(){return this.navigate("#system/translation"),this.close()},e}(App.ControllerModal)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.WidgetUser=function(n){function i(){this.update=t(this.update,this),this.render=t(this.render,this),this.release=t(this.release,this),i.__super__.constructor.apply(this,arguments),this.subscribeId=App.User.full(this.user_id,this.render,!1,!0)}return e(i,n),i.prototype.events={"focusout [contenteditable]":"update"},i.prototype.release=function(){return App.User.unsubscribe(this.subscribeId)},i.prototype.render=function(t){var e,n,i,s,r,o,a,l,c;this.callback&&this.callback(t),c=[],a=App.User.attributesGet("view");for(n in a)e=a[n],r=n,o=r.substr(0,r.length-3),o in t&&(r=o),(t[r]||"richtext"===e.tag)&&e.shown&&"firstname"!==r&&"lastname"!==r&&"organization"!==r&&c.push(e);return t.preferences&&(s=[],t.preferences.tickets_open>0&&(i={url:"",name:"open",count:t.preferences.tickets_open,title:"Open Tickets","class":"user-tickets",data:"open"},s.push(i)),t.preferences.tickets_closed>0&&(i={url:"",name:"closed",count:t.preferences.tickets_closed,title:"Closed Tickets","class":"user-tickets",data:"closed"},s.push(i)),s[0]&&(l={title:"Tickets",items:s},t.links=[],t.links.push(l))),this.html(App.view("widget/user")({header:"Customer",edit:!0,user:t,userData:c})),this.$("[contenteditable]").ce({mode:"textonly",multiline:!0,maxlength:250}),this.userTicketPopups({selector:".user-tickets",user_id:t.id,position:"right"})},i.prototype.update=function(t){var e,n,i,s;if(n=$(t.target).attr("data-name"),s=$(t.target).html(),i=App.User.find(this.user_id),i[n]!==s)return e={},e[n]=s,i.updateAttributes(e),this.log("notice","update",n,s,i)},i}(App.Controller)}.call(this),function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;e=function(e){function s(){this.verifyLater=n(this.verifyLater,this);var e;App.Event.bind("user_signup_verify",function(e){return new t({user:e}),"user_signup_verify"}),App.Event.bind("auth:login",function(t){return function(e){if(e)return t.verifyLater(e.id),"user_signup_verify"}}(this)),(e=App.Session.get("id"))&&this.verifyLater(e)}return i(s,e),s.prototype.verifyLater=function(t){var e;return e=function(e){return function(){return e.verify(t)}}(this),this.delay(e,5e3,"user_signup_verify_dialog")},s.prototype.verify=function(e){var n,i,s,r,o;if(e&&App.User.exists(e)&&(o=App.User.find(e),"signup"===o.source&&!0!==o.verified&&(i=(new Date).getTime(),n=Date.parse(o.created_at),s=i-n,r=18e5,!(s<r))))return new t({user:o})},s}(App.Controller),t=function(t){function e(){this.error=n(this.error,this),this.success=n(this.success,this),this.onSubmit=n(this.onSubmit,this),this.content=n(this.content,this),e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.backdrop=!1,e.prototype.keyboard=!1,e.prototype.head="Account not verified",e.prototype.small=!0,e.prototype.buttonClose=!1,e.prototype.buttonCancel=!1,e.prototype.buttonSubmit="Resend verification email",e.prototype.content=function(){var t;return this.sent?(t=App.i18n.translateContent("We've sent an email to _%s_. Click the link in the email to verify your account.",this.user.email),t+="<br><br>",t+=App.i18n.translateContent("If you don't see the email, check other places it might be, like your junk, spam, social, or other folders.")):App.i18n.translateContent("Your account has not been verified. Please click the link in the verification email.")},e.prototype.onSubmit=function(){return this.ajax({id:"email_verify_send",type:"POST",url:this.apiPath+"/users/email_verify_send",data:JSON.stringify({email:this.user.email}),processData:!0,success:this.success,error:this.error})},e.prototype.success=function(t){var e;if(this.sent=!0,this.update(),t.token&&!0===this.Config.get("developer_mode"))return e=function(e){return function(){return e.close(),e.navigate("#email_verify/"+t.token)}}(this),App.Delay.set(e,4e3)},e.prototype.error=function(){return this.contentInline=App.i18n.translateContent("Unable to send verify email."),this.update()},e}(App.ControllerModal),App.Config.set("user_signup",e,"Widgets")}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/agent_ticket_create"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){
if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o,a;if(e.push('<div class="tabsSidebar-holder flex">\n  <div class="main no-padding flex tabsSidebar-sidebarSpacer tabsSidebar-tabsSpacer">\n    <div class="newTicket">\n      <div class="box box--newTicket">\n        <div class="page-header">\n          <h1>'),e.push(this.T(this.head)),e.push('</h1>\n        </div>\n\n        <div class="page-content">\n          '),!_.isEmpty(this.availableTypes)&&this.availableTypes.length>1){for(e.push('\n            <ul class="tabs type-tabs">\n              '),r=this.availableTypes,t=0,i=r.length;t<i;t++)a=r[t],e.push('\n                <li class="tab u-textTruncate" data-type="'),e.push(n(a)),e.push('">\n                  '),e.push(this.Icon(this.types[a].icon,"tab-icon")),e.push("\n                  "),e.push(this.T(this.types[a].label)),e.push("\n                </li>\n              ");e.push("\n            </ul>\n          ")}if(e.push("\n\n          "),!_.isEmpty(this.C("ui_ticket_create_notes"))){e.push("\n            "),o=this.C("ui_ticket_create_notes");for(a in o)s=o[a],e.push('\n              <div class="alert alert--warning js-note" role="alert" data-type="'),e.push(n(a)),e.push('">'),e.push(this.T(s)),e.push("</div>\n            ");e.push("\n          ")}e.push('\n\n          <form role="form" class="ticket-create">\n            <input type="hidden" name="formSenderType"/>\n            <input type="hidden" name="form_id" value="'),e.push(n(this.form_id)),e.push('"/>\n\n            <div class="ticket-form-top"></div>\n            <div class="article-form-top"></div>\n\n            <div class="formset-inset">\n              <div class="ticket-form-middle horizontal two-columns"></div>\n              <div class="ticket-form-bottom"></div>\n            </div>\n\n            <div class="form-controls">\n              <a class="btn btn--text btn--subtle js-cancel" href="#/">'),e.push(this.T("Cancel & Go Back")),e.push('</a>\n              <button type="submit" class="btn btn--success js-submit align-right">'),e.push(this.T("Create")),e.push('</button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="tabsSidebar vertical"></div>\n</div>\n<!--\n<div class="sidebar">\n  <div class="widgets">\n    <div class="customer_info">\n      <div class="drox"><!-- Customer Info -/->\n        <div class="drox-header">\n          <h2>Customer Info</h2>\n        </div>\n        <div class="drox-body">\n          <p>\n            <span class="customer-name">Benjamin Wahlers</span>\n            <span class="customer-email u-highlight">benjamin@wahlers.de</span>\n          </p>\n          <div class="form-group">\n            <label for="customer-info-note">'),e.push(this.T("Note")),e.push('</label>\n            <textarea class="form-control" id="customer-info-note" rows="5">Not assigned</textarea>\n          </div>\n          <label>'),e.push(this.T("Tickets")),e.push('</label>\n          <ol class="tasks tasks--standalone"> <!-- vaguely based on task_widget_tasks.jst.eco -/->\n            <li class="task level-1">\n              <div class="icon-holder">\n                <div class="priority icon"></div>\n              </div>\n              <div class="task-text">\n                <div class="name">Micro-SIM doesn\'t work</div>\n                <div class="time">23 minutes ago</div>\n              </div>\n            <li class="task level-3">\n              <div class="icon-holder">\n                <div class="priority icon"></div>\n              </div>\n              <div class="task-text">\n                <div class="name">Superb Service!</div>\n                <div class="time">43 minutes ago</div>\n              </div>\n            <li class="task level-2">\n              <div class="icon-holder">\n                <div class="priority icon"></div>\n              </div>\n              <div class="task-text">\n                <div class="name">Print sheets strip off</div>\n                <div class="time">1 hour ago</div>\n              </div>\n            <li class="task level-3">\n              <div class="icon-holder">\n                <div class="priority icon"></div>\n              </div>\n              <div class="task-text">\n                <div class="name">Block not properly wrought</div>\n                <div class="time">2 hour ago</div>\n              </div>\n          </ol>\n        </div>\n      </div>\n    </div>\n    <div class="ticket_template">\n      <div class="drox hide"><!-- Template Wizard Step One -/->\n        <div class="drox-header">\n          <h2>'),e.push(this.T("Choose Template")),e.push('</h2>\n        </div>\n        <div class="drox-body">\n          <p>'),e.push(this.T("No template created yet.")),e.push("</p>\n          <p>"),e.push(this.T("With templates you can pre-fill ticket attributes.")),e.push("</p>\n          <p>"),e.push(this.T("Choose attributes and then save them as a new template.")),e.push('</p>\n          <p><a class="create u-clickable">'),e.push(this.T("Save new template")),e.push('</a></p>\n        </div>\n      </div>\n      <div class="drox hide"><!-- Template Wizard Step Two -/->\n        <div class="drox-header">\n          <h2>'),e.push(this.T("Create Template")),e.push('</h2>\n        </div>\n        <div class="drox-body">\n          <form>\n            <div class="form-group">\n              <label for="template-title">'),e.push(this.T("Template Title")),e.push(':</label>\n              <input class="form-control" id="template-title" placeholder="'),e.push(this.Ti("Enter Template Name")),e.push('">\n            </div>\n            <p>'),e.push(this.T("This template saves the following attributes")),e.push(':</p>\n            <ul class="template-attributes">\n              <li class="template-attribute horizontal">\n                <div class="key">'),e.push(this.T("Owner")),e.push('</div> | <div class="value flex u-textTruncate">Web-Dev</div>\n                <div class="delete u-clickable">&times;</div>\n              <li class="template-attribute horizontal">\n                <div class="key">'),e.push(this.T("Type")),e.push('</div> | <div class="value flex u-textTruncate">Question</div>\n                <div class="delete u-clickable">&times;</div>\n              <li class="template-attribute horizontal">\n                <div class="key">'),e.push(this.T("Status")),e.push('</div> | <div class="value flex u-textTruncate">open</div>\n                <div class="delete u-clickable">&times;</div>\n              <li class="template-attribute horizontal">\n                <div class="key">'),e.push(this.T("Priority")),e.push('</div> | <div class="value flex u-textTruncate">high</div>\n                <div class="delete u-clickable">&times;</div>\n              <li class="template-attribute horizontal">\n                <div class="key">'),e.push(this.T("Tag")),e.push('</div> | <div class="value flex u-textTruncate">New Website</div>\n                <div class="delete u-clickable">&times;</div>\n              <li class="template-attribute horizontal">\n                <div class="key">'),e.push(this.T("Tag")),e.push('</div> | <div class="value flex u-textTruncate">Feedback</div>\n                <div class="delete u-clickable">&times;</div>\n            </ul>\n            <div class="horizontal">\n              <button class="btn btn-primary" type="submit">'),e.push(this.T("Save Template")),e.push('</button>\n              <a class="btn btn--text btn--secondary js-cancel align-right u-clickable">'),e.push(this.T("Cancel")),e.push('</a>\n            </div>\n          </form>\n        </div>\n      </div>\n      <div class="drox hide"><!-- Template Chooser, shown instead of Template Wizard Step One when there are templates there -/->\n        <div class="drox-header">\n          <h2>'),e.push(this.T("Choose Template")),e.push('</h2>\n        </div>\n        <div class="drox-body">\n          <ul class="templates">\n            <li class="u-clickable u-highlight">Feedback New Website\n          </ul>\n          <p>'),e.push(this.T("Choose attributes and then save them as a new template.")),e.push('</p>\n          <p><a class="create u-clickable">'),e.push(this.T("Save new template")),e.push('</a></p>\n        </div>\n      </div>\n    </div>\n    <div class="text_module"></div>\n  </div>\n</div>\n-->\n')}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/agent_ticket_merge"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push("<div>\n  <h4>"),e.push(this.T("Merge to Ticket#")),e.push('</h4>\n  <input type="text" name="master_ticket_number" class="form-control" value=""/>\n  <hr>\n  <h4>'),e.push(this.T("Recent Customer Tickets")),e.push('</h4>\n  <div id="ticket-merge-customer-tickets"></div>\n  <hr>\n  <h4>'),e.push(this.T("Recent viewed Tickets")),e.push('</h4>\n  <div id="ticket-merge-recent-tickets"></div>\n</div>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/agent_ticket_view/bulk"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<form class="update-box bulkAction-form" role="form">\n  <div class="bulkAction-firstStep js-action-step">\n    <div id="form-ticket-bulk" class="form-inline form-inline--enclosed flex"></div>\n    <div class="btn btn--primary js-confirm">'),e.push(this.T("Confirm")),e.push('</div>\n  </div>\n  <div class="hide bulkAction-secondStep js-confirm-step">\n    <div id="form-ticket-bulk-comment" class="form-inline"></div>\n    <div class="horizontal">\n      <div id="form-ticket-bulk-typeVisibility" class="form-inline"></div>\n      <div class="bulkAction-controls">\n        <a class="btn btn--text btn--secondary js-cancel">'),e.push(this.T("Go Back")),e.push('</a>\n        <input type="submit" class="btn btn--primary js-submit" value="'),e.push(this.T("Update")),e.push('">\n      </div>\n    </div>\n  </div>\n</form>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/agent_ticket_view/content"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r;for(e.push('<div class="page-header">\n  <div class="page-header-title">\n    <h2>'),e.push(this.T(this.overview.name)),e.push('</h2>\n  </div>\n  <div class="page-header-meta">\n    '),this.edit&&(e.push('\n      <div class="btn btn--action" data-type="settings">'),e.push(this.T("Options")),e.push("</div>\n    ")),e.push('\n    <!--\n    <ul class="pagination">\n    '),r=this.view_modes,t=0,s=r.length;t<s;t++)i=r[t],e.push('\n      <li class="'),e.push(n(i["class"])),e.push('">\n        <a class="centered" href="#" data-type="viewmode" data-mode="'),e.push(n(i.type)),e.push('">'),e.push(n(i.name)),e.push("</a>\n      </li>\n    ");e.push('\n    </ul>\n    -->\n  </div>\n</div>\n\n<div class="page-content">\n  <div class="table-overview"></div>\n</div>\n')}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/agent_ticket_view/detail"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r;for(e.push('<table class="table table-striped table-hover">\n  <tr>\n    <th class="" style="width: 24px;">\n      <input type="checkbox" value="" name="bulk_all"/>\n    </th>\n    <th></th>\n  </tr>\n'),s=this.objects,t=0,i=s.length;t<i;t++)r=s[t],e.push('\n  <tr data-id="'),e.push(n(r.id)),e.push('">\n    <td>\n      <input type="checkbox" value="'),e.push(n(r.id)),e.push('" name="bulk"/>\n    </td>\n    <td>\n      '),e.push(r.customer.avatar("50","","userInfo-avatar")),e.push('\n      <h2 style="margin-top: 0px;"><a href="'),e.push(r.uiUrl()),e.push('" data-type="edit">'),e.push(n(r.title)),e.push('</a></h2>\n      <div class="horizontal">\n        <div class="vertical flex">\n          <table style="width: 100%;">\n            <tr>\n              <td style="width: 25%;"><label>'),e.push(this.T("Number")),e.push("</label></td><td> "),e.push(this.P(r,"number")),e.push("</td>\n            </tr>\n            <tr>\n              <td><label>"),e.push(this.T("State")),e.push("</label></td><td> "),e.push(this.P(r,"state")),e.push("</td>\n            </tr>\n            <tr>\n              <td><label>"),e.push(this.T("Group")),e.push("</label></td><td> "),e.push(this.P(r,"group")),e.push("</td>\n            </tr>\n            <tr>\n              <td><label>"),e.push(this.T("Customer")),e.push("</label></td><td> "),e.push(this.P(r,"customer")),e.push('</td>\n            </tr>\n          </table>\n        </div>\n        <div class="vertical flex">\n          <table style="width: 100%;">\n            <tr>\n              <td style="width: 25%;"><label>'),e.push(this.T("Erstellt")),e.push("</label></td><td> "),e.push(this.P(r,"created_at")),e.push("</td>\n            </tr>\n            <tr>\n              <td><label>"),e.push(this.T("Priority")),e.push("</label></td><td> "),e.push(this.P(r,"priority")),e.push("</td>\n            </tr>\n            <tr>\n              <td><label>"),e.push(this.T("Owner")),e.push("</label></td><td> "),e.push(this.P(r,"owner")),e.push("</td>\n            </tr>\n            <tr>\n              <td><label>"),e.push(this.T("Organization")),e.push("</label></td><td> "),e.push(this.P(r,"organization")),e.push("</td>\n            </tr>\n          </table>\n        </div>\n      </div>\n    </td>\n  </tr>\n");e.push("\n</table>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/agent_ticket_view/navbar"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r;if(e.push('<ul class="nav nav-pills nav-stacked">\n  '),this.items){for(e.push("\n    "),r=this.items,t=0,s=r.length;t<s;t++)i=r[t],e.push("\n      <li "),i.active&&e.push('class="active"'),e.push('>\n        <a class="horizontal center" href="'),e.push(n(i.target)),e.push('">\n          <span class="local u-textTruncate">'),e.push(this.T(i.name)),e.push('</span>\n          <span class="badge badge--text">'),e.push(n(i.count)),e.push("</span>\n        </a>\n      </li>\n    ");e.push("\n  ")}e.push("\n</ul>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/agent_ticket_view/navbar_vertical"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o,a,l,c,u,p;if(e.push('<div class="tabsHolder js-tabsHolder">\n  <div class="tabs tabs--inline tabs--big js-tabs">\n    '),this.items){for(e.push("\n      "),c=this.items,t=0,o=c.length;t<o;t++)i=c[t],e.push('\n        <a class="tab js-tab'),i.active&&e.push(n(" active")),e.push('" href="'),e.push(n(i.target)),e.push('">\n          <span class="tab-name">'),e.push(this.T(i.name)),e.push('</span>\n          <span class="tab-badge">'),e.push(n(i.count)),e.push("</span>\n        </a>\n      ");for(e.push('\n      <ul class="dropdown dropdown--actions dropdown--wide dropdown-menu dropdown-menu-right js-dropdown" role="menu" aria-labelledby="userAction">\n        '),u=this.items,s=0,a=u.length;s<a;s++)i=u[s],e.push('\n          <li class="js-dropdownItem hide'),i.active&&e.push(n(" active")),e.push('" role="presentation" data-target="'),e.push(n(i.target)),e.push('" role="menuitem" tabindex="-1">\n            <span class="flex u-textTruncate">'),e.push(this.T(i.name)),e.push('</span>\n            <span class="badge badge--text">'),e.push(n(i.count)),e.push("</span>\n        ");e.push('\n      </ul>\n      <div class="tab tab-dropdown js-toggle" data-toggle="dropdown">\n        '),e.push(this.Icon("dropdown-list")),e.push("\n        "),e.push(this.Icon("arrow-down","arrow")),e.push("\n      </div>\n    ")}if(e.push("\n  </div>\n</div>\n"),this.isAgent&&(e.push('\n<a class="btn btn--success btn--quad" href="#ticket/create">\n  '),e.push(this.Icon("plus")),e.push("\n</a>\n")),e.push("\n"),this.items){for(e.push('\n<div class="tabs tabs--inline tabs--big tabs-clone u-invisible js-tabsClone">\n  '),p=this.items,r=0,l=p.length;r<l;r++)i=p[r],e.push('\n    <a class="tab js-tabClone'),i.active&&e.push(n(" active")),e.push('" href="'),e.push(n(i.target)),e.push('">\n      <span class="tab-name">'),e.push(this.T(i.name)),e.push('</span>\n      <span class="tab-badge">'),e.push(n(i.count)),e.push("</span>\n    </a>\n  ");e.push('\n  <div class="tab tab-dropdown js-toggle">\n    '),e.push(this.Icon("dropdown-list")),e.push("\n    "),e.push(this.Icon("arrow-down","arrow")),e.push("\n  </div>\n</div>\n")}e.push("\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/agent_user_create"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<form autocomplete="off">\n<div class="modal-dialog">\n  <div class="modal-content">\n    <div class="modal-header">\n      <div class="modal-close js-close">\n        '),e.push(this.Icon("diagonal-cross")),e.push('\n      </div>\n      <h1 class="modal-title">'),e.push(this.T(this.head)),e.push('</h1>\n    </div>\n    <div class="modal-body" id="form-user"></div>\n    <div class="modal-footer">\n      <a class="btn btn--text btn--subtle js-cancel" href="#/">'),e.push(this.T("Cancel & Go Back")),e.push('</a>\n      <button type="submit" class="btn btn--success js-submit align-right">'),e.push(this.T("Create")),e.push("</button>\n    </div>\n  </div>\n</div>\n</form>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/api"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="page-header-title">\n  <h1>'),e.push(this.T("API")),e.push(" <small>"),e.push(this.T("Management")),e.push('</small></h1>\n</div>\n\n<div class="page-content">\n\n  <div class="page-header-title">\n    <div class="zammad-switch zammad-switch--small js-TokenAccess">\n       <input name="api_token_access" type="checkbox" id="api_token_access" '),App.Setting.get("api_token_access")&&e.push("checked"),e.push('>\n       <label for="api_token_access"></label>\n    </div>\n    <h2>'),e.push(this.T("Token Access")),e.push(" (HTTP Token Authentication)</h2>\n  </div>\n\n<p>"),e.push(this.T("Enable REST API using tokens (not username/email address and password). Each user needs to create own access tokens in user profile.")),e.push("</p>\n\n<p>"),e.push(this.T("Example")),e.push(':</p>\n\n<code>\ncurl -H "Authorization: Token token=YOUR_TOKEN" '),e.push(n(this.C("http_type"))),e.push("://"),e.push(n(this.C("fqdn"))),e.push('/api/v1/groups\n</code>\n\n<hr>\n\n  <div class="page-header-title">\n    <div class="zammad-switch zammad-switch--small js-PasswordAccess">\n       <input name="api_password_access" type="checkbox" id="api_password_access" '),App.Setting.get("api_password_access")&&e.push("checked"),e.push('>\n       <label for="api_password_access"></label>\n    </div>\n    <h2>'),e.push(this.T("Password Access")),e.push(" (HTTP Basic Authentication)</h2>\n  </div>\n\n<p>"),e.push(this.T("Enable REST API access using the username/email address and password for the authentication user.")),e.push("</p>\n\n<p>"),e.push(this.T("Example")),e.push(":</p>\n\n<code>\ncurl -u "),e.push(n(this.S("email"))),e.push(":some_password "),e.push(n(this.C("http_type"))),e.push("://"),e.push(n(this.C("fqdn"))),e.push('/api/v1/groups\n</code>\n\n<hr>\n\n  <div class="page-header-title">\n    <h2>'),e.push(this.T("Applications")),e.push(" (OAuth Authentication)</h2>\n    &nbsp;\n  </div>\n\n<p>"),e.push(this.T("Manage applications that can use Zammad as an OAuth provider and applications that you've authorized to use your account.")),e.push('</p>\n\n<div class="js-appList"></div>\n\n<button class="btn js-appNew">'),e.push(this.T("New Application")),e.push('</button>\n\n<br>\n<br>\n\n<div>\nOAuth URLs are:\n\n  <table class="settings-list" style="width: 100%;">\n    <thead>\n      <tr>\n        <th width="40%">'),e.push(this.T("Action")),e.push('\n        <th width="60%">'),e.push(this.T("URL")),e.push("\n    </thead>\n    <tbody>\n      <tr>\n        <td>"),e.push(this.T("Requesting the Grant")),e.push("\n        <td>"),e.push(n(this.C("http_type"))),e.push("://"),e.push(n(this.C("fqdn"))),e.push("/oauth/authorize\n      <tr>\n        <td>"),e.push(this.T("Getting an Access Token")),e.push("\n        <td>"),e.push(n(this.C("http_type"))),e.push("://"),e.push(n(this.C("fqdn"))),e.push("/oauth/token\n    </tbody>\n  </table>\n</div>\n\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/avatar"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<span class="avatar '),e.push(this.cssClass),e.push('" style="background-image: url('),e.push(this.url),e.push(')"'),e.push(this.placement),e.push(this.data),e.push(">\n  "),this.vip&&e.push(this.Icon("crown")),e.push("\n</span>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/avatar_group"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<span class="avatar avatar--group '),e.push(this.cssClass),e.push('">\n  '),e.push(this.Icon("team")),e.push("\n</span>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/avatar_system"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<span class="avatar '),e.push(this.cssClass),e.push('" style="background: white">\n  '),e.push(this.Icon("logo")),e.push("\n</span>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/avatar_unique"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<span class="avatar '),e.push(this.cssClass),e.push(' avatar--unique" style="background-position: -'),e.push(this.x),e.push("px -"),e.push(this.y),e.push('px;"'),e.push(this.placement),e.push(this.data),e.push(">\n  "),this.vip&&e.push(this.Icon("crown")),e.push("\n  "),e.push(n(this.initials)),e.push("\n</span>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/bot"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push("hi\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/calendar/holiday_selector"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s;e.push('<table class="settings-list">\n  <thead>\n    <tr>\n      <th>'),e.push(this.T("Active")),e.push("\n      <th>"),e.push(this.T("Date")),e.push('\n      <th style="width: 300px">'),e.push(this.T("Description")),e.push("\n      <th>"),e.push(this.T("Action")),e.push("\n  </thead>\n  <tbody>\n    "),s=this.days;for(t in s)i=s[t],e.push("\n    <tr "),i.active||e.push('class="is-inactive"'),e.push(' data-date="'),e.push(n(t)),e.push('">\n      <td class="u-positionOrigin">\n        <label class="checkbox-replacement checkbox-replacement--fullscreen">\n          <input type="checkbox" '),i.active&&e.push("checked"),e.push(' class="js-active js-boolean" name="public_holidays::'),e.push(n(t)),e.push('::active" value="true">\n          '),e.push(this.Icon("checkbox","icon-unchecked")),e.push("\n          "),e.push(this.Icon("checkbox-checked","icon-checked")),e.push("\n        </label>\n      <td>"),e.push(this.Tdate(t)),e.push('\n      <td class="settings-list-control-cell"><input class="form-control form-control--small js-summary '),i.active||e.push("is-disabled"),e.push('" type="text" name="public_holidays::'),e.push(n(t)),e.push('::summary" value="'),e.push(n(i.summary)),e.push('" required/>\n      <td class="settings-list-row-control">\n        '),i.feed||(e.push('\n          <div class="btn btn--text js-remove">\n            '),e.push(this.Icon("trash")),e.push(" "),e.push(this.T("Remove")),e.push("\n          </div>\n        ")),e.push("\n    ");e.push('\n\n    <tr class="settings-list-controlRow">\n      <td>\n      <td class="settings-list-control-cell js-datePicker">\n        <!-- not supported right now by ff\n        <input class="form-control form-control--small" type="date" placeholder="'),e.push(this.T("Date")),e.push('"/>\n        -->\n      <td class="settings-list-control-cell">\n        <input class="form-control form-control--small js-summary" type="text" placeholder="'),e.push(this.T("Description")),e.push('"/>\n      <td class="settings-list-row-control">\n        <div class="btn btn--text btn--create js-add">\n          '),e.push(this.Icon("plus-small")),e.push(" "),e.push(this.T("Add")),e.push("\n        </div>\n  </tbody>\n</table>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/calendar/holiday_selector_placeholder"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<tr class="" data-date="'),e.push(n(this.placeholderDate)),e.push('">\n  <td>\n    <label class="checkbox-replacement">\n      <input type="checkbox" checked class="js-active js-boolean" name="'),e.push(n(this.nameActive)),e.push('" value="true">\n      '),e.push(this.Icon("checkbox","icon-unchecked")),e.push("\n      "),e.push(this.Icon("checkbox-checked","icon-checked")),e.push("\n    </label>\n  <td>"),e.push(this.Tdate(this.placeholderDate)),e.push('\n  <td class="settings-list-control-cell"><input class="form-control form-control--small js-summary" type="text" name="'),e.push(n(this.nameSummary)),e.push('" value="'),e.push(n(this.placeholderSummary)),e.push('" required/>\n  <td class="settings-list-row-control">\n    <div class="btn btn--text js-remove">\n      '),e.push(this.Icon("trash")),e.push(" "),e.push(this.T("Remove")),e.push("\n    </div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/calendar/index"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o,a,l,c,u,p,h,d,f,g,m,v,y,b,w,k,T,S,C,A,x,j,I,D,P;for(e.push('<div class="page-header">\n  <div class="page-header-title">\n    <h1>'),e.push(this.T("Calendar")),e.push(" <small>"),e.push(this.T("Management")),e.push('</small></h1>\n  </div>\n\n  <div class="page-header-meta">\n    '),this.showDescription&&(e.push('\n      <a class="btn js-description">'),e.push(this.T("Description")),e.push("</a>\n    ")),e.push('\n    <a class="btn btn--success js-new">'),e.push(this.T("New Calendar")),e.push('</a>\n  </div>\n</div>\n<div class="page-content">\n  '),_.isEmpty(this.calendars)&&(e.push('\n  <div class="page-description">\n    '),e.push(this.description),e.push("\n  </div>\n  ")),e.push("\n\n  "),T=this.calendars,r=0,c=T.length;r<c;r++){if(t=T[r],e.push('\n  <div class="action" data-id="'),e.push(t.id),e.push('">\n    <div class="action-flow action-flow--row">\n      <div class="action-row">\n        <div class="action-flow action-flow--noWrap">\n          <h2>'),_.isEmpty(t.ical_url)||(e.push('<span title="'),e.push(this.Ti("Last sync at")),e.push(": "),e.push(this.Ttimestamp(t.last_sync)),t.last_log&&(e.push(": "),e.push(n(t.last_log))),e.push('">\n            '),t.last_log?(e.push("\n              "),e.push(this.Icon("status","error inline")),e.push("\n            ")):(e.push("\n              "),e.push(this.Icon("status","ok inline")),e.push("\n            ")),e.push("</span>")),e.push(" "),e.push(n(t.name)),e.push("</h2>\n          "),t["default"]&&(e.push('\n            <div class="action-label">'),e.push(this.T("Default")),e.push("</div>\n          ")),
e.push("\n        </div>\n      </div>\n      "),t.last_log&&(e.push('<div class="action-row"><div class="alert alert--danger">'),e.push(n(t.last_log)),e.push("</div></div>")),e.push('\n      <div class="action-row">\n        <div class="label">'),e.push(this.T("Time zone")),e.push("</div> "),e.push(n(t.timezone)),e.push('\n      </div>\n      <div class="action-block action-block--flex">\n        <div class="label">'),e.push(this.T("Business Hours")),e.push('</div>\n        <table class="table table-fluid">\n          <tr>\n            <td>'),e.push(this.T("Monday")),e.push("</td><td>"),!t.business_hours.mon.active||_.isEmpty(t.business_hours.mon.timeframes))e.push("-");else for(S=t.business_hours.mon.timeframes,o=0,u=S.length;o<u;o++)i=S[o],e.push(n(i[0])),e.push("-"),e.push(n(i[1])),e.push(" </td><td>");if(e.push("</td>\n          </tr>\n          <tr>\n            <td>"),e.push(this.T("Tuesday")),e.push("</td><td>"),!t.business_hours.tue.active||_.isEmpty(t.business_hours.tue.timeframes))e.push("-");else for(C=t.business_hours.tue.timeframes,a=0,p=C.length;a<p;a++)i=C[a],e.push(n(i[0])),e.push("-"),e.push(n(i[1])),e.push(" </td><td>");if(e.push("</td>\n          </tr>\n          <tr>\n            <td>"),e.push(this.T("Wednesday")),e.push("</td><td>"),!t.business_hours.wed.active||_.isEmpty(t.business_hours.wed.timeframes))e.push("-");else for(A=t.business_hours.wed.timeframes,l=0,h=A.length;l<h;l++)i=A[l],e.push(n(i[0])),e.push("-"),e.push(n(i[1])),e.push(" </td><td>");if(e.push("</td>\n          </tr>\n          <tr>\n            <td>"),e.push(this.T("Thursday")),e.push("</td><td>"),!t.business_hours.thu.active||_.isEmpty(t.business_hours.thu.timeframes))e.push("-");else for(x=t.business_hours.thu.timeframes,v=0,d=x.length;v<d;v++)i=x[v],e.push(n(i[0])),e.push("-"),e.push(n(i[1])),e.push(" </td><td>");if(e.push("</td>\n          </tr>\n          <tr>\n            <td>"),e.push(this.T("Friday")),e.push("</td><td>"),!t.business_hours.fri.active||_.isEmpty(t.business_hours.fri.timeframes))e.push("-");else for(j=t.business_hours.fri.timeframes,b=0,f=j.length;b<f;b++)i=j[b],e.push(n(i[0])),e.push("-"),e.push(n(i[1])),e.push(" </td><td>");if(e.push("</td>\n          </tr>\n          <tr>\n            <td>"),e.push(this.T("Saturday")),e.push("</td><td>"),!t.business_hours.sat.active||_.isEmpty(t.business_hours.sat.timeframes))e.push("-");else for(I=t.business_hours.sat.timeframes,w=0,g=I.length;w<g;w++)i=I[w],e.push(n(i[0])),e.push("-"),e.push(n(i[1])),e.push(" </td><td>");if(e.push("</td>\n          </tr>\n          <tr>\n            <td>"),e.push(this.T("Sunday")),e.push("</td><td>"),!t.business_hours.sun.active||_.isEmpty(t.business_hours.sun.timeframes))e.push("-");else for(D=t.business_hours.sun.timeframes,k=0,m=D.length;k<m;k++)i=D[k],e.push(n(i[0])),e.push("-"),e.push(n(i[1])),e.push(" </td><td>");e.push('</td>\n          </tr>\n        </table>\n      </div>\n      <div class="action-block action-block--flex">\n        <div class="label">'),e.push(this.T("Holidays")),e.push('</div>\n        <table class="table">\n          '),_.isEmpty(t.public_holidays_preview)&&e.push("-"),e.push("\n          "),P=t.public_holidays_preview;for(s in P)y=P[s],e.push("\n            <tr "),y.active||e.push('class="is-inactive"'),e.push('>\n              <td style="width: 96px">'),e.push(this.Tdate(s)),e.push("\n              <td>"),e.push(n(y.summary)),e.push("\n          ");e.push('\n        </table>\n      </div>\n    </div>\n    <div class="action-controls">\n      '),t["default"]?(e.push('\n        <div class="btn btn--danger btn--secondary is-disabled">'),e.push(this.T("Delete")),e.push("</div>\n      ")):(e.push('\n        <div class="btn btn--danger btn--secondary js-delete">'),e.push(this.T("Delete")),e.push('</div>\n        <div class="btn btn--secondary js-default">'),e.push(this.T("Set as Default")),e.push("</div>\n      ")),e.push('\n      <div class="btn js-edit">'),e.push(this.T("Edit")),e.push("</div>\n    </div>\n  </div>\n  ")}e.push("\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/channel/chat"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r;for(e.push('<div class="page-header">\n  <div class="page-header-title">\n    <div class="zammad-switch zammad-switch--small js-chatSetting">\n       <input name="chat" type="checkbox" id="setting-chat" '),this.chatSetting&&e.push("checked"),e.push('>\n       <label for="setting-chat"></label>\n    </div>\n    <h1>'),e.push(this.T("Chat")),e.push('</h1>\n  </div>\n</div>\n<div class="page-content">\n  <p>'),e.push(this.T("You can create chat widgets for your web pages to allow visitors to chat with you.")),e.push("</p>\n\n  <h2>"),e.push(this.T("Topics")),e.push("</h2>\n  <p>"),e.push(this.T("You can create multiple chat topics.")),e.push('</p>\n  <div class="js-topics"></div>\n\n  <h2>'),e.push(this.T("Designer")),e.push('</h2>\n\n  <div class="form-group">\n    <label class="formGroup-label">'),e.push(this.T("Preview Width")),e.push('</label>\n    <div class="control">\n      <div class="select-tabs js-selectBrowserWidth">\n        <div class="tab" data-value="375">iPhone 6</div>\n        <div class="tab" data-value="fit">1:1</div>\n        <div class="tab is-selected" data-value="1280">MacBook</div>\n      </div>\n    </div>\n  </div>\n\n  <label for="preview-iframe" class="formGroup-label">'),e.push(this.T("Preview")),e.push('</label>\n  <div class="browser chat-demo js-browser">\n    <form class="browser-head js-demo-head" novalidate>\n      <div class="browser-input">\n        <input type="url" class="js-testurl-input" id="preview-iframe" value="'),e.push(n(this.previewUrl)),e.push('" placeholder="www.zammad.org">\n        <div class="loading icon small muted"></div>\n      </div>\n      <input type="submit" class="btn" value="'),e.push(this.Ti("Load")),e.push('">\n    </form>\n    <div class="browser-body js-browserBody">\n      <div class="browser-website js-website">\n        <img class="js-screenshot">\n      </div>\n      <style>@import "/assets/chat/chat.css";</style>\n      <div class="chat-demo-animationHolder">\n        <div class="js-chat zammad-chat zammad-chat-is-open zammad-chat-is-loaded zammad-chat-is-shown is-open">\n          <div class="zammad-chat-header js-toggle-chat js-backgroundColor js-chatHeader">\n            <div class="zammad-chat-header-controls">\n              <span class="zammad-chat-agent-status" data-status="online">'),e.push(this.T("Online")),e.push('</span>\n              <span class="zammad-chat-header-icon">\n                <svg class="zammad-chat-header-icon-open" viewBox="0 0 13 7"><path d="M10.807 7l1.4-1.428-5-4.9L6.5-.02l-.7.7-4.9 4.9 1.414 1.413L6.5 2.886 10.807 7z" fill-rule="evenodd"></path></svg>\n                <svg class="zammad-chat-header-icon-close" viewBox="0 0 13 13"><path d="m2.241.12l-2.121 2.121 4.243 4.243-4.243 4.243 2.121 2.121 4.243-4.243 4.243 4.243 2.121-2.121-4.243-4.243 4.243-4.243-2.121-2.121-4.243 4.243-4.243-4.243" fill-rule="evenodd"></path></svg>\n              </span>\n            </div>\n            <div class="zammad-chat-agent">\n              <img class="zammad-chat-agent-avatar" src="/assets/images/chat-demo-avatar.png">\n              <span class="zammad-chat-agent-sentence">\n                <span class="zammad-chat-agent-name">'),e.push(this.T("John Smith")),e.push('</span>\n              </span>\n            </div>\n            <div class="zammad-chat-welcome zammad-chat-is-hidden">\n              <svg class="zammad-chat-icon" viewBox="0 0 24 24"><path d="M2 5C2 4 3 3 4 3h16c1 0 2 1 2 2v10C22 16 21 17 20 17H4C3 17 2 16 2 15V5zM12 17l6 4v-4h-6z" fill-rule="evenodd"></path></svg>\n              <span class="zammad-chat-welcome-text js-chat-welcome"><strong>Chat</strong> with us!</span>\n            </div>\n          </div>\n          <div class="zammad-chat-body">\n            <div class="zammad-chat-timestamp"><strong>'),e.push(this.T("today")),e.push('</strong> 14:45</div>\n            <div class="zammad-chat-message zammad-chat-message--customer">\n              <span class="zammad-chat-message-body js-backgroundColor">'),e.push(this.T("Hello! I need help with your product.")),e.push('</span>\n            </div>\n            <div class="zammad-chat-message zammad-chat-message--agent">\n              <span class="zammad-chat-message-body">'),e.push(this.T("Hi! Which one of our products?")),e.push('</span>\n            </div>\n          </div>\n          <form class="zammad-chat-controls">\n            <textarea class="zammad-chat-input" rows="1" placeholder="Ihre Nachricht..."></textarea>\n            <button type="submit" class="zammad-chat-button zammad-chat-send js-backgroundColor">'),e.push(this.T("Send")),e.push('</button>\n          </form>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <form class="js-params">\n    <fieldset>\n      <div class="input form-group formGroup--halfSize">\n        <div class="formGroup-label">\n          <label for="form-chat-title">'),e.push(this.T("Chat Title")),e.push('</label>\n        </div>\n        <div class="controls">\n          <input class="js-chatTitle" type="text" id="form-chat-title" name="title" placeholder="&lt;strong&gt;Chat&lt;/strong&gt; with us!">\n        </div>\n        <span class="help-block">'),e.push(this.T("Shown when the chat is closed.")),e.push('</span>\n      </div>\n      <div class="input form-group formGroup--halfSize">\n        <div class="formGroup-label">\n          <label for="form-chat-background">'),e.push(this.T("Background color")),e.push('</label>\n          <div class="align-right horizontal js-palette"></div>\n        </div>\n        <div class="controls controls--button">\n          <input class="js-color" type="text" id="form-chat-background" name="background">\n          <div class="controls-button js-eyedropper">\n            <div class="controls-button-inner u-clickable">\n              '),e.push(this.Icon("eyedropper")),e.push('\n            </div>\n          </div>\n        </div>\n        <span class="help-block">'),e.push(this.T("Can be in any CSS color format.")),e.push('</span>\n      </div>\n      <div class="input form-group formGroup--halfSize">\n        <div class="formGroup-label">\n          <label for="form-chat-fontsize">'),e.push(this.T("Font size")),e.push('</label>\n        </div>\n        <div class="controls">\n          <input type="text" id="form-chat-fontsize" name="fontSize" value="12px">\n        </div>\n        <span class="help-block">'),e.push(this.T("The default font size is 12px.")),e.push('</span>\n      </div>\n      <div class="switch form-group formGroup--halfSize">\n        <div class="formGroup-label">\n            <label for="form-chat-flat">'),e.push(this.T("Flat Design")),e.push('</label>\n          </div>\n        <div class="controls">\n          <div class="zammad-switch">\n             <input name="flat" type="checkbox" id="form-chat-flat">\n             <label for="form-chat-flat"></label>\n          </div>\n        </div>\n      </div>\n    </fieldset>\n  </form>\n\n  <hr>\n\n  <h2>'),e.push(this.T("Usage")),e.push("</h2>\n\n  <p>"),e.push(marked(this.T("Insert the widget code into the source code of every page the chat shall be visible on. It should be placed at the end of the page's source code before the \xa7</body>\xa7 closing tag."))),e.push("</p>\n\n  <h3>"),e.push(this.T("Requirements")),e.push("</h3>\n  <p>"),e.push(this.T("Zammad Chat requires jQuery. If you don't already use it on your website include it like this:")),e.push('</p>\n  <pre><code class="language-html js-code">&lt;script src="https://code.jquery.com/jquery-2.1.4.min.js"&gt;&lt;/script&gt;</code></pre>\n\n  <h3>'),e.push(this.T("Automatically show chat")),e.push(" ("),e.push(this.T("default")),e.push(")</h3>\n  <p>"),e.push(this.T("The chat will show up once the connection to the server got established and if there is someone online to chat with.")),e.push('</p>\n\n  <pre><code class="language-html js-code">&lt;script src="'),e.push(n(this.baseurl)),e.push('/assets/chat/chat.min.js"&gt;&lt;/script&gt;\n&lt;script&gt;\n$(function() {\n  new ZammadChat({\n<span class="js-modal-params"></span>\n  });\n});\n&lt;/script&gt;</code></pre>\n\n  <h3>'),e.push(this.T("Manually open chat")),e.push("</h3>\n  <p>"),e.push(this.T("If you want to open the chat by the press of a button set the option \xa7show\xa7 to \xa7false\xa7 and add the class \xa7open-zammad-chat\xa7 to the button.")),e.push('</p>\n  <pre><code class="language-html js-code">&lt;button class="open-zammad-chat"&gt;Chat with us&lt;/button&gt;\n\n&lt;script src="'),e.push(n(this.baseurl)),e.push('/assets/chat/chat.min.js"&gt;&lt;/script&gt;\n&lt;script&gt;\n$(function() {\n  new ZammadChat({\n<span class="js-modal-params"></span>,\n    show: false\n  });\n});\n&lt;/script&gt;</code></pre>\n\n  <h3>'),e.push(this.T("Why doesn't the chat show up?")),e.push("</h3>\n  <p>\n    "),e.push(this.T("There can be several reasons for the chat to not show up:")),e.push("\n    <ol>\n      <li>"),e.push(this.T("The browser is outdated. It does not support WebSocket - the technology we use for the chat.")),e.push("\n      <li>"),e.push(this.T("There is no agent online.")),e.push("\n      <li>"),e.push(this.T("The chat is turned off.")),e.push("\n      <li>"),e.push(this.T("There are too many people in queue for the chat.")),e.push("\n    </ol>\n    "),e.push(this.T("When you turn on debugging by setting the option \xa7debug\xa7 to \xa7true\xa7 the reason gets printed to the javascript console.")),e.push("\n  </p>\n\n  <hr>\n\n  <h3>"),e.push(this.T("Options")),e.push('</h3>\n\n  <table class="settings-list">\n    <thead>\n      <tr>\n        <th>'),e.push(this.T("Options")),e.push("\n        <th>"),e.push(this.T("Default")),e.push("\n        <th>"),e.push(this.T("Type")),e.push("\n        <th>"),e.push(this.T("Description")),e.push("\n    </thead>\n    <tbody>\n    "),r=this.apiOptions,t=0,i=r.length;t<i;t++)s=r[t],e.push("\n      <tr>\n        <td>"),e.push(n(s.name)),e.push('\n        <td style="white-space: nowrap;"><code class="language-javascript js-code">'),e.push(n(s["default"])),e.push('</code>\n        <td style="white-space: nowrap;"><code class="language-javascript js-code">'),e.push(n(s.type)),e.push("</code>\n        <td>"),e.push(this.T(s.description,s.descriptionSubstitute)),e.push("\n    ");e.push("\n    </tbody>\n  </table>\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/channel/color_swatch"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="color-swatch js-swatch" style="color: '),e.push(n(this.color)),e.push('" data-color="'),e.push(n(this.color)),e.push('"></div>\n')}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/channel/email_account_overview"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o,a,l,c,u,p,h,d,f,g,m,v,y,b;if(e.push("\n"),!_.isEmpty(this.accounts_fixed)){for(e.push("\n<h2>"),e.push(this.T("Fixed Email Accounts")),e.push('</h2>\n<div class="action">\n  <div class="action-flow">\n    <div class="action-block">\n      <ul>\n        '),g=this.accounts_fixed,r=0,c=g.length;r<c;r++)i=g[r],e.push("\n          <li>"),e.push(n(i.realname)),e.push(" &lt;"),e.push(n(i.email)),e.push("&gt;\n        ");e.push("\n      </ul>\n    </div>\n  </div>\n</div>\n")}if(e.push("\n\n<h2>"),e.push(this.T("Email Accounts")),e.push("</h2>\n\n"),!_.isEmpty(this.not_used_email_addresses)){for(e.push('\n<div class="action">\n  <div class="action-flow">\n    <div class="action-block">\n      '),e.push(this.T("Notice")),e.push(": "),e.push(this.T("Unassigned email addresses, assign them to a channel or delete them.")),e.push('</h3>\n      <ul class="list">\n      '),m=this.not_used_email_addresses,o=0,u=m.length;o<u;o++)i=m[o],e.push('\n        <li class="list-item" data-id="'),e.push(n(i.id)),e.push('">\n          <div class="list-item-name">\n            <a href="#" class="js-emailAddressEdit">'),e.push(n(i.realname)),e.push(" &lt;"),e.push(n(i.email)),e.push('&gt;</a>\n          </div>\n          <div class="list-item-delete js-emailAddressDelete">\n            '),e.push(this.Icon("diagonal-cross")),e.push("\n          </div>\n      ");e.push("\n      </ul>\n    </div>\n  </div>\n</div>\n")}if(e.push("\n\n"),_.isEmpty(this.account_channels))e.push("\n  <p>"),e.push(this.T("You have no configured account right now.")),e.push("</p>\n");else{for(e.push("\n  "),v=this.account_channels,a=0,p=v.length;a<p;a++){if(t=v[a],e.push('\n  <div class="action '),!0!==t.active&&e.push("is-inactive"),e.push('" data-id="'),e.push(t.id),e.push('">\n    <div class="action-flow" style="width: 100%;">\n      <div class="action-block action-block--flex">\n        <div class="horizontal">\n          <h3>'),e.push(this.Icon("status",t.status_in+" inline")),e.push(" "),e.push(this.T("Inbound")),e.push('</h3>\n          <div class="js-editInbound btn btn--text space-left">'),e.push(this.T("Edit")),e.push('</div>\n        </div>\n        <table class="key-value">\n          <tr>\n            <td>'),e.push(this.T("User")),e.push("\n            <td>"),e.push(n(t.options.inbound.options.user)),e.push("\n            "),t.options.inbound.options.folder&&(e.push("\n              ("),e.push(this.T("Folder")),e.push(": "),e.push(n(t.options.inbound.options.folder)),e.push(")\n            ")),e.push("\n          <tr>\n            <td>"),e.push(this.T("Host")),e.push("\n            <td>"),e.push(n(t.options.inbound.options.host)),e.push("\n          <tr>\n            <td>"),e.push(this.T("Protocol")),e.push("\n            <td>"),e.push(n(t.options.inbound.adapter)),e.push("\n        </table>\n\n        "),_.isEmpty(t.last_log_in)||(e.push('\n        <div class="alert alert--danger">\n          '),e.push(n(t.last_log_in)),e.push("\n        </div>\n        ")),e.push("\n\n        <hr>\n\n        <h3>"),e.push(this.T("Destination Group")),e.push('</h3>\n        <a href="#" class="js-channelGroupChange '),!1===t.group.active&&e.push("alert alert--danger"),e.push('">\n          '),s="",e.push("\n          "),t.group.displayName?(e.push("\n            "),s=t.group.displayName(),e.push("\n          ")):(e.push("\n            "),s=t.group,e.push("\n          ")),e.push("\n          "),!1===t.group.active?(e.push("\n            "),e.push(this.T("%s is inactive, please select a active one.",s)),e.push("\n          ")):(e.push("\n            "),e.push(n(s)),e.push("\n          ")),e.push('\n        </a>\n      </div>\n      <div class="action-block action-block--flex">\n        <div class="horizontal">\n          <h3>'),e.push(this.Icon("status",t.status_out+" inline")),e.push(" "),e.push(this.T("Outbound")),e.push('</h3>\n          <div class="js-editOutbound btn btn--text space-left">'),e.push(this.T("Edit")),e.push('</div>\n        </div>\n        <table class="key-value">\n        '),t.options.outbound&&t.options.outbound.options&&(e.push("\n          <tr>\n            <td>"),e.push(this.T("User")),e.push("\n            <td>"),e.push(n(t.options.outbound.options.user)),e.push("\n          <tr>\n            <td>"),e.push(this.T("Host")),e.push("\n            <td>"),e.push(n(t.options.outbound.options.host)),e.push("\n        ")),e.push("\n          <tr>\n            <td>"),e.push(this.T("Protocol")),e.push("\n            <td>"),e.push(n(t.options.outbound.adapter)),e.push("\n        </table>\n\n        "),_.isEmpty(t.last_log_out)||(e.push('\n        <div class="alert alert--danger">\n          '),e.push(n(t.last_log_out)),e.push("\n        </div>\n        ")),e.push("\n\n        <hr>\n\n        <h3>"),e.push(this.T("Email Address")),e.push('</h3>\n        <ul class="list">\n        '),_.isEmpty(t.email_addresses))e.push('\n          <li class="list-item">'),e.push(this.T("none")),e.push("\n        ");else{for(e.push("\n          "),y=t.email_addresses,l=0,h=y.length;l<h;l++)i=y[l],e.push('\n            <li class="list-item" data-id="'),e.push(n(i.id)),e.push('">\n              <div class="list-item-name">'),e.push(n(i.email)),e.push('</div>\n              <div class="btn btn--text js-emailAddressEdit space-left space-right">'),e.push(this.T("Edit")),e.push("</div>\n              "),t.email_addresses.length>1&&(e.push('\n              <div class="list-item-delete js-emailAddressDelete">\n                '),e.push(this.Icon("diagonal-cross")),e.push("\n              </div>\n              ")),e.push("\n          ");e.push("\n        ")}e.push('\n        </ul>\n        <a class="text-muted js-emailAddressNew" href="#">+ '),e.push(this.T("Add")),e.push('</a>\n\n      </div>\n    </div>\n    <div class="action-controls">\n      '),!0===t.active?(e.push('\n        <div class="btn btn--secondary js-channelDisable">'),e.push(this.T("Disable")),e.push("</div>\n      ")):(e.push('\n        <div class="btn btn--secondary js-channelEnable">'),e.push(this.T("Enable")),e.push("</div>\n      ")),e.push('\n      <div class="btn btn--danger btn--secondary js-channelDelete">'),e.push(this.T("Delete")),e.push("</div>\n    </div>\n  </div>\n  ")}e.push("\n")}if(e.push('\n\n<a class="btn btn--success js-channelNew">'),e.push(this.T("New")),e.push("</a>\n\n"),!_.isEmpty(this.notification_channels)&&!App.Config.get("system_online_service")){for(e.push("\n  <h2>"),e.push(this.T("Email Notification")),e.push("</h2>\n  "),b=this.notification_channels,f=0,d=b.length;f<d;f++)t=b[f],e.push('\n    <div class="action" data-id="'),e.push(t.id),e.push('">\n      <div class="action-flow action-flow--row">\n        <div class="action-block action-block--flex">\n          <div class="horizontal">\n            <h3>'),e.push(this.Icon("status",t.status_out+" inline")),e.push(" "),e.push(this.T("Outbound")),e.push('</h3>\n            <div class="btn btn--text js-editNotificationOutbound space-left">'),e.push(this.T("Edit")),e.push('</div>\n          </div>\n\n          <table class="key-value">\n          '),t.options.outbound&&t.options.outbound.options&&(e.push("\n            <tr>\n              <td>"),e.push(this.T("User")),e.push("\n              <td>"),e.push(n(t.options.outbound.options.user)),e.push("\n            <tr>\n              <td>"),e.push(this.T("Host")),e.push("\n              <td>"),e.push(n(t.options.outbound.options.host)),e.push("\n          ")),e.push("\n            <tr>\n              <td>"),e.push(this.T("Protocol")),e.push("\n              <td>"),e.push(n(t.options.outbound.adapter)),e.push("\n          </table>\n\n          "),"error"===t.status_in&&(e.push('\n            <div class="alert alert--danger">'),e.push(n(t.last_log_in)),e.push("</div>\n          ")),e.push("\n          "),"error"===t.status_out&&(e.push('\n            <div class="alert alert--danger">'),e.push(n(t.last_log_out)),e.push("</div>\n          ")),e.push('\n        </div>\n        <div class="action-block action-block--flex">\n          <h3>'),e.push(this.T("Email Address")),e.push('</h3>\n          <ul class="list">\n            <li class="list-item">'),e.push(n(this.config.notification_sender)),e.push("\n          </ul>\n        </div>\n      </div>\n    </div>\n  ");e.push("\n")}e.push("\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/channel/email_account_wizard"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="modal-dialog wizard">\n\n  <form class="modal-content setup wizard js-intro">\n    <div class="modal-header">\n      <div class="modal-close js-close">\n        '),e.push(this.Icon("diagonal-cross")),e.push('\n      </div>\n      <h1 class="modal-title">'),e.push(this.T("Email Account")),e.push('</h1>\n    </div>\n    <div class="modal-body">\n      <div class="wizard-body vertical justified">\n        <div class="alert alert--danger hide" role="alert"></div>\n        <div class="base-settings"></div>\n      </div>\n    </div>\n    <div class="modal-footer">\n        <div class="modal-leftFooter">\n          <button class="btn btn--text btn--secondary align-left js-expert">'),e.push(this.T("Experts")),e.push('</button>\n        </div>\n        <div class="modal-rightFooter">\n          <button class="btn btn--primary align-right js-submit">'),e.push(this.T("Connect")),e.push('</button>\n        </div>\n    </div>\n  </form>\n\n  <form class="modal-content setup wizard hide js-probe">\n    <div class="modal-header">\n      <div class="modal-close js-close">\n        '),e.push(this.Icon("diagonal-cross")),e.push('\n      </div>\n      <h1 class="modal-title">'),e.push(this.T("Email Account")),e.push('</h1>\n    </div>\n    <div class="modal-body">\n      <div class="wizard-body vertical justified">\n        <p class="wizard-loadingText">\n          <span class="loading icon"></span> '),e.push(this.T("Testing")),e.push(' <span class="js-email"></span>\n        </p>\n      </div>\n    </div>\n    <div class="modal-footer"></div>\n  </form>\n\n  <form class="modal-content setup wizard hide js-test">\n    <div class="modal-header">\n      <div class="modal-close js-close">\n        '),e.push(this.Icon("diagonal-cross")),e.push('\n      </div>\n      <h1 class="modal-title">'),e.push(this.T("Email Account")),e.push('</h1>\n    </div>\n    <div class="modal-body">\n      <div class="wizard-body vertical justified">\n        <p class="wizard-loadingText">\n          <span class="loading icon"></span> '),e.push(this.T("Verifying...")),e.push('\n        </p>\n      </div>\n    </div>\n    <div class="modal-footer"></div>\n  </form>\n\n  <form class="modal-content setup wizard hide js-verify">\n    <div class="modal-header">\n      <div class="modal-close js-close">\n        '),e.push(this.Icon("diagonal-cross")),e.push('\n      </div>\n      <h1 class="modal-title">'),e.push(this.T("Email Account")),e.push('</h1>\n    </div>\n    <div class="modal-body">\n      <div class="wizard-body vertical justified">\n        <div class="alert alert--danger hide" role="alert"></div>\n        <p class="wizard-loadingText">\n          <span class="loading icon"></span> '),e.push(this.T("Verify sending and receiving")),e.push('\n        </p>\n      </div>\n    </div>\n    <div class="modal-footer"></div>\n  </form>\n\n  <form class="modal-content setup wizard hide js-inbound">\n    <div class="modal-header">\n      <div class="modal-close js-close">\n        '),e.push(this.Icon("diagonal-cross")),e.push('\n      </div>\n      <h1 class="modal-title">'),e.push(this.T("Email Inbound")),e.push('</h1>\n    </div>\n    <div class="modal-body">\n      <div class="wizard-body vertical justified">\n        <div class="alert alert--danger hide" role="alert"></div>\n        <div class="base-inbound-settings"></div>\n      </div>\n    </div>\n    <div class="modal-footer">\n      <div class="modal-rightFooter">\n      <a class="btn btn--text btn--secondary js-goToSlide align-left" data-slide="js-intro">'),e.push(this.T("Go Back")),e.push('</a>\n      </div>\n      <div class="modal-rightFooter">\n        <button class="btn btn--primary align-right js-submit">'),e.push(this.T("Continue")),e.push('</button>\n      </div>\n    </div>\n  </form>\n\n  <form class="modal-content setup wizard hide js-inbound-acknowledge">\n    <div class="modal-header">\n      <div class="modal-close js-close">\n        '),e.push(this.Icon("diagonal-cross")),e.push('\n      </div>\n      <h1 class="modal-title">'),e.push(this.T("Email Inbound")),e.push('</h1>\n    </div>\n    <div class="modal-body">\n      <div class="wizard-body vertical justified">\n        <div class="alert alert--danger hide" role="alert"></div>\n        <p class="js-message">'),e.push(this.T("We have already found %s email(s) in your mailbox. Zammad will move it all from your mailbox into Zammad.","x")),e.push('</p>\n      </div>\n    </div>\n    <div class="modal-footer">\n      <div class="modal-rightFooter">\n      <a class="btn btn--text btn--secondary js-goToSlide js-back align-left" data-slide="js-inbound">'),e.push(this.T("Go Back")),e.push('</a>\n      </div>\n      <div class="modal-rightFooter">\n        <button class="btn btn--primary js-goToSlide js-next align-right js-submit" data-slide="js-outbound">'),e.push(this.T("Continue")),e.push('</button>\n      </div>\n    </div>\n  </form>\n\n  <form class="modal-content setup wizard hide js-outbound">\n    <div class="modal-header">\n        <div class="modal-close js-close">\n          '),e.push(this.Icon("diagonal-cross")),e.push('\n        </div>\n        <h1 class="modal-title">'),e.push(this.T("Email Outbound")),e.push('</h1>\n    </div>\n    <div class="modal-body">\n      <div class="wizard-body vertical justified">\n        <div class="alert alert--danger hide" role="alert"></div>\n        <div class="base-outbound-type"></div>\n        <div class="base-outbound-settings"></div>\n      </div>\n    </div>\n    <div class="modal-footer">\n      <div class="modal-rightFooter">\n      <a class="btn btn--text btn--secondary js-goToSlide align-left" data-slide="js-inbound">'),e.push(this.T("Go Back")),e.push('</a>\n      </div>\n      <div class="modal-rightFooter">\n        <button class="btn btn--primary align-right js-submit">'),e.push(this.T("Continue")),e.push("</button>\n      </div>\n    </div>\n  </form>\n\n</div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/channel/email_notification_wizard"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="modal-dialog wizard">\n\n  <form class="modal-content setup wizard hide js-probe">\n    <div class="modal-header">\n      <div class="modal-close js-close">\n        '),e.push(this.Icon("diagonal-cross")),e.push('\n      </div>\n      <h1 class="modal-title">'),e.push(this.T("Email Notification")),e.push('</h1>\n    </div>\n    <div class="modal-body">\n      <div class="wizard-body vertical justified">\n        <p class="wizard-loadingText">\n          <span class="loading icon"></span> '),e.push(this.T("Testing")),e.push(' <span class="js-email"></span>\n        </p>\n      </div>\n    </div>\n    <div class="modal-footer"></div>\n  </form>\n\n  <form class="modal-content setup wizard hide js-test">\n    <div class="modal-header">\n      <div class="modal-close js-close">\n        '),e.push(this.Icon("diagonal-cross")),e.push('\n      </div>\n      <h1 class="modal-title">'),e.push(this.T("Email Notification")),e.push('</h1>\n    </div>\n    <div class="modal-body">\n      <div class="wizard-body vertical justified">\n        <p class="wizard-loadingText">\n          <span class="loading icon"></span> '),e.push(this.T("Verifying...")),e.push('\n        </p>\n      </div>\n    </div>\n    <div class="modal-footer"></div>\n  </form>\n\n  <form class="modal-content setup wizard js-outbound">\n    <div class="modal-header">\n      <div class="modal-close js-close">\n        '),e.push(this.Icon("diagonal-cross")),e.push('\n      </div>\n      <h1 class="modal-title">'),
e.push(this.T("Email Notification")),e.push('</h1>\n    </div>\n    <div class="modal-body">\n      <div class="wizard-body vertical justified">\n        <div class="alert alert--danger hide" role="alert"></div>\n        <div class="base-outbound-type"></div>\n        <div class="base-outbound-settings"></div>\n      </div>\n    </div>\n    <div class="modal-footer">\n      <div class="modal-rightFooter">\n        <button class="btn btn--primary align-right">'),e.push(this.T("Continue")),e.push("</button>\n      </div>\n    </div>\n  </form>\n\n</div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/channel/form"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="page-header">\n  <div class="page-header-title">\n    <div class="zammad-switch zammad-switch--small js-formSetting">\n       <input name="form_ticket_create" type="checkbox" id="setting-form" '),this.formSetting&&e.push("checked"),e.push('>\n       <label for="setting-form"></label>\n    </div>\n    <h1>'),e.push(this.T("Form")),e.push(' <small></small></h1>\n  </div>\n</div>\n<div class="page-content">\n  <p>'),e.push(this.T("With form you can add a form to your web page which directly generates a ticket for you.")),e.push("</p>\n\n  <h2>"),e.push(this.T("Settings")),e.push('</h2>\n  <form class="js-paramsSetting">\n    <fieldset>\n      <div class="input form-group formGroup--halfSize">\n        <div class="formGroup-label">\n          <label for="form-group">'),e.push(this.T("Group selection for Ticket creation")),e.push('</label>\n        </div>\n        <div class="controls js-groupSelector" id="from-group"></div>\n      </div>\n    </fieldset>\n  </form>\n\n  <h2>'),e.push(this.T("Designer")),e.push('</h2>\n  <form class="js-paramsDesigner">\n\n    <fieldset>\n      <div class="input form-group formGroup--halfSize">\n        <div class="formGroup-label">\n          <label for="form-message-title">'),e.push(this.T("Title of the form")),e.push('</label>\n        </div>\n        <div class="controls">\n          <input type="text" id="form-message-title" name="messageTitle" value="'),e.push(this.Ti("Feedback Form")),e.push('">\n        </div>\n      </div>\n      <div class="input form-group formGroup--halfSize">\n        <div class="formGroup-label">\n          <label for="form-message-submit">'),e.push(this.T("Name of form submit button")),e.push('</label>\n        </div>\n        <div class="controls">\n          <input type="text" id="form-message-submit" name="messageSubmit" value="'),e.push(this.Ti("Submit")),e.push('">\n        </div>\n      </div>\n      <div class="input form-group">\n        <div class="formGroup-label">\n          <label for="form-message-thank-you">'),e.push(this.T("Message after sending form")),e.push('</label>\n        </div>\n        <div class="controls">\n          <textarea type="text" id="form-message-thank-you" name="messageThankYou" rows="3">'),e.push(this.Ti("Thank you for your inquiry (#%s)! We'll contact you as soon as possible.")),e.push('</textarea>\n        </div>\n      </div>\n    </fieldset>\n\n    <br>\n\n    <table class="settings-list">\n      <thead>\n        <tr>\n          <th style="white-space: nowrap;">'),e.push(this.T("Options")),e.push('</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          <td>\n            <label class="inline-label">\n              <span class="checkbox-replacement checkbox-replacement--inline">\n                <input type="checkbox" name="debug" value="true">\n                '),e.push(this.Icon("checkbox","icon-unchecked")),e.push("\n                "),e.push(this.Icon("checkbox-checked","icon-checked")),e.push("\n              </span>\n              "),e.push(this.T("Enable debugging for implementation.")),e.push('\n            </label>\n        <tr>\n          <td>\n            <label class="inline-label">\n              <span class="checkbox-replacement checkbox-replacement--inline">\n                <input type="checkbox" name="showTitle" value="true">\n                '),e.push(this.Icon("checkbox","icon-unchecked")),e.push("\n                "),e.push(this.Icon("checkbox-checked","icon-checked")),e.push("\n              </span>\n              "),e.push(this.T("Show title in form.")),e.push('\n            </label>\n        <tr>\n          <td>\n            <label class="inline-label">\n              <span class="checkbox-replacement checkbox-replacement--inline">\n                <input type="checkbox" name="modal" value="true" checked>\n                '),e.push(this.Icon("checkbox","icon-unchecked")),e.push("\n                "),e.push(this.Icon("checkbox-checked","icon-checked")),e.push("\n              </span>\n              "),e.push(this.T("Start modal dialog for form.")),e.push('\n            </label>\n        <tr>\n          <td>\n            <label class="inline-label">\n              <span class="checkbox-replacement checkbox-replacement--inline">\n                <input type="checkbox" name="noCSS" value="true">\n                '),e.push(this.Icon("checkbox","icon-unchecked")),e.push("\n                "),e.push(this.Icon("checkbox-checked","icon-checked")),e.push("\n              </span>\n              "),e.push(this.T("Don't load CSS for form. You need to generate your own CSS for the form.")),e.push('\n            </label>\n        <tr>\n          <td>\n            <label class="inline-label">\n              <span class="checkbox-replacement checkbox-replacement--inline">\n                <input type="checkbox" name="attachmentSupport" value="true">\n                '),e.push(this.Icon("checkbox","icon-unchecked")),e.push("\n                "),e.push(this.Icon("checkbox-checked","icon-checked")),e.push("\n              </span>\n              "),e.push(this.T("Add attachment option to upload.")),e.push('\n            </label>\n      </tbody>\n    </table>\n  </form>\n\n  <label class="formGroup-label">'),e.push(this.T("Preview")),e.push('</label>\n\n  <div class="browser form-demo js-browser">\n    <div class="browser-body js-browserBody">\n      <div class="browser-website centered vertical fit">\n        <div class="btn js-formBtn">'),e.push(this.T("Feedback")),e.push('</div>\n        <div class="js-formInline" style="width: 300px;"></div>\n        <script id="zammad_form_script" src="/assets/form/form.js"></script>\n      </div>\n    </div>\n  </div>\n  <h3>'),e.push(this.T("Requirements")),e.push("</h3>\n  <p>"),e.push(this.T("Zammad Forms requires jQuery. If you don't already use it on your website include it like this:")),e.push('</p>\n  <pre><code class="language-html js-code">&lt;script src="https://code.jquery.com/jquery-2.1.4.min.js"&gt;&lt;/script&gt;</code></pre>\n\n  <p>'),e.push(this.T("You need to add the following Javascript code snippet to your web page")),e.push(':</p>\n\n  <pre class="js-modal"><code class="language-html js-code js-paramsBlock">&lt;button id="feedback-form"&gt;Feedback&lt;/button&gt;\n\n&lt;script id="zammad_form_script" src="'),e.push(n(this.baseurl)),e.push('/assets/form/form.js"&gt;&lt;/script&gt;\n\n&lt;script&gt;\n$(function() {\n  $(\'#feedback-form\').ZammadForm({\n<span class="js-modal-params"></span>\n  });\n});\n&lt;/script&gt;</code></pre>\n</div>\n\n  <pre class="js-inlineForm"><code class="language-html js-code js-paramsBlock">&lt;div id="feedback-form"&gt;form will be placed in here&lt;/div&gt;\n\n&lt;script id="zammad_form_script" src="'),e.push(n(this.baseurl)),e.push('/assets/form/form.js"&gt;&lt;/script&gt;\n\n&lt;script&gt;\n$(function() {\n  $(\'#feedback-form\').ZammadForm({\n<span class="js-modal-params"></span>\n  });\n});\n&lt;/script&gt;</code></pre>\n</div>\n')}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/channel/topics"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r;for(e.push('<table class="settings-list">\n  <thead>\n    <tr>\n      <th style="white-space: nowrap;">'),e.push(this.T("chatId")),e.push('</th>\n      <th style="white-space: nowrap;">'),e.push(this.T("Name")),e.push('</th>\n      <th style="white-space: nowrap;">'),e.push(this.T("Note")),e.push('</th>\n      <th style="white-space: nowrap;">'),e.push(this.T("Max. clients in waitlist")),e.push('</th>\n      <th style="white-space: nowrap;">'),e.push(this.T("Delete")),e.push("</th>\n    </tr>\n  </thead>\n  <tbody>\n"),r=this.chats,i=0,s=r.length;i<s;i++)t=r[i],e.push('\n    <tr data-id="'),e.push(n(t.id)),e.push('">\n      <td>\n        <label class="inline-label">\n          '),e.push(n(t.id)),e.push('\n        </label>\n      <td>\n        <label class="inline-label">\n          <a class="js-edit is-clickable">'),e.push(n(t.name)),e.push('</a>\n        </label>\n      <td>\n        <label class="inline-label">\n          '),e.push(n(t.note)),e.push('\n        </label>\n      <td>\n        <label class="inline-label">\n          '),e.push(n(t.max_queue)),e.push('\n        </label>\n      <td class="settings-list-row-control">\n        <div class="btn btn--text js-remove">\n          '),e.push(this.Icon("trash")),e.push(" "),e.push(this.T("Remove")),e.push("\n        </div>\n");e.push('\n    <tr>\n      <td colspan="5" class="settings-list-action-cell js-add">\n        '),e.push(this.Icon("plus-small")),e.push(" "),e.push(this.T("Add")),e.push("\n  </tbody>\n</table>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/cti/caller_log"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o,a,l,c,u,p,h,d,f;for(e.push('<table class="table table-striped table-hover">\n  <thead>\n    <tr>\n      <th style="width: 40px;"></th>\n      <th>'),e.push(this.T("From")),e.push("</th>\n      <th>"),e.push(this.T("To")),e.push('</th>\n      <th style="width: 130px;">'),e.push(this.T("Status")),e.push('</th>\n      <th style="width: 100px;">'),e.push(this.T("Duration")),e.push('</th>\n      <th style="width: 170px;">'),e.push(this.T("Time")),e.push("</th>\n    </tr>\n  </thead>\n  <tbody>\n    "),u=this.list,i=0,a=u.length;i<a;i++){if(s=u[i],e.push("\n    <tr "),s.done&&e.push('class="is-grayed-out"'),e.push(' data-id="'),e.push(s.id),e.push('">\n      <td class="table-checkbox" style="vertical-align: middle">\n        <label class="checkbox-replacement'),!0===s.disabled&&e.push(" is-disabled"),e.push('">\n          <input type="checkbox" class="js-check"'),s.done&&e.push(" checked"),!0===s.disabled&&e.push(" disabled"),e.push(">\n          "),e.push(this.Icon("checkbox","icon-unchecked")),e.push("\n          "),e.push(this.Icon("checkbox-checked","icon-checked")),e.push("\n        </label>\n      </td>\n      <td>\n        "),d=!1,e.push("\n        "),s.preferences.from&&!_.isEmpty(s.preferences.from)){for(e.push("\n          "),p=s.preferences.from,r=0,l=p.length;r<l;r++)t=p[r],e.push("\n            "),t.user_id&&App.User.exists(t.user_id)?(e.push("\n              "),d=!0,e.push("\n              "),f=App.User.find(t.user_id),e.push("\n              "),"known"!==t.level&&(e.push(this.T("maybe")),e.push(" ")),e.push('\n              <span class="user-popover" data-id="'),e.push(f.id),e.push('">'),e.push(n(f.displayNameLong())),e.push("</span><br>\n            ")):t.comment&&(e.push("\n              "),d=!0,e.push("\n              "),e.push(this.T("maybe")),e.push(" "),e.push(n(t.comment)),e.push("<br>\n            ")),e.push("\n          ");e.push("\n        ")}if(e.push("\n        "),!d&&s.from_comment&&(e.push("\n          "),d=!0,e.push("\n          "),s.from_comment&&e.push(n(s.from_comment)),e.push("\n          <br>\n        ")),e.push("\n        "),d?(e.push("\n          <small>"),e.push(n(s.from_pretty)),e.push("</small>\n        ")):(e.push('\n          <span class="js-userNew u-clickable" href="#">'),e.push(n(s.from_pretty)),e.push("</span>\n        ")),e.push("\n      </td>\n      <td>\n        "),d=!1,e.push("\n        "),s.preferences.to&&!_.isEmpty(s.preferences.to)){for(e.push("\n          "),h=s.preferences.to,o=0,c=h.length;o<c;o++)t=h[o],e.push("\n            "),t.user_id&&App.User.exists(t.user_id)?(e.push("\n              "),d=!0,e.push("\n              "),f=App.User.find(t.user_id),e.push("\n              "),"known"!==t.level&&(e.push(this.T("maybe")),e.push(" ")),e.push('\n              <span class="user-popover" data-id="'),e.push(f.id),e.push('">'),e.push(n(f.displayNameLong())),e.push("</span><br>\n            ")):t.comment&&(e.push("\n              "),d=!0,e.push("\n              "),e.push(this.T("maybe")),e.push(" "),e.push(n(t.comment)),e.push("<br>\n            ")),e.push("\n          ");e.push("\n        ")}e.push("\n        "),!d&&s.to_comment&&(e.push("\n          "),d=!0,e.push("\n          "),s.to_comment&&e.push(n(s.to_comment)),e.push("\n          <br>\n        ")),e.push("\n        "),d?(e.push("\n          <small>"),e.push(n(s.to_pretty)),e.push("</small>\n        ")):(e.push("\n          "),e.push(n(s.to_pretty)),e.push("\n        ")),e.push('\n      </td>\n      <td style="vertical-align: middle">\n        '),s.state_human&&(e.push("\n        "),e.push(this.Icon("status",s.status_class+" inline")),e.push(" "),e.push(this.T(s.state_human)),e.push("\n        ")),e.push('\n      </td>\n      <td style="vertical-align: middle">'),e.push(n(s.duration)),e.push('</td>\n      <td style="vertical-align: middle">'),e.push(this.humanTime(s.created_at)),e.push("</td>\n    </tr>\n    ")}e.push("\n  </tbody>\n</table>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/cti/index"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="main flex">\n  <h1>'),e.push(this.T("Caller log")),e.push('</h1>\n  <div class="page-content js-callerLog"></div>\n</div>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/cti/not_configured"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r;for(e.push('<div class="main flex fullscreenMessage">\n  <div>\n    <h1>'),e.push(this.T("Not configured")),e.push("</h1>\n    <p>"),e.push(this.T("Sorry, there is currently no CTI backend enabled.")),e.push("</p>\n    <p>"),e.push(this.T("We support")),e.push(':</p>\n    <div class="btn-group-vertical" role="group">\n    '),r=this.backends,i=0,s=r.length;i<s;i++)t=r[i],e.push("\n      "),this.isAdmin&&(e.push('<a class="btn" href="'),e.push(t.url),e.push('">')),e.push(n(t.name)),this.isAdmin&&e.push("</a>"),e.push("\n    ");e.push("\n    </div>\n  </div>\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/customer_chat/chat_footer"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="chat-footer">\n  <div class="btn btn--primary js-createTicket">'),e.push(this.T("Turn chat into ticket")),e.push("</div>\n</div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/customer_chat/chat_list"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r;if(e.push("<hr>\n"),_.isEmpty(this.chat_sessions))e.push("\n"),e.push(this.T("none")),e.push("\n");else{for(e.push("\n<ul>\n"),r=this.chat_sessions,i=0,s=r.length;i<s;i++)t=r[i],e.push("\n  <li>"),e.push(n(t.name)),e.push(" "),t.geo_data&&(e.push("- "),e.push(n(t.geo_data))),e.push(" - "),t.user_id&&(e.push(n(t.user.displayName())),e.push(" -")),e.push(' <small class="">'),e.push(this.humanTime(t.created_at)),e.push("</small>\n");e.push("\n</ul>\n")}e.push("\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/customer_chat/chat_loader"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="chat-message chat-message--customer chat-message--loader js-loader">\n  <div class="chat-loader">\n    '),e.push(this.Icon("loading")),e.push("\n    "),e.push(this.Icon("loading")),e.push("\n    "),e.push(this.Icon("loading")),e.push("\n  </div>\n</div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/customer_chat/chat_message"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="chat-message chat-message--'),e.push(n(this.sender)),this.isNew&&e.push(n(" chat-message--new")),e.push('">'),e.push(this.message),e.push("</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/customer_chat/chat_notice_message"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="chat-notice-message">'),e.push(n(this.message)),e.push("</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/customer_chat/chat_status_message"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="chat-status-message">'),e.push(this.message),e.push("</div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/customer_chat/chat_timestamp"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="chat-timestamp js-timestamp"><span class="chat-timestamp-label">'),e.push(n(this.label)),e.push("</span> "),e.push(n(this.time)),e.push("</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/customer_chat/chat_window"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="chat-header">\n  <div class="chat-status js-status" data-status="online">\n    <div class="chat-status-holder">\n      '),e.push(this.Icon("status")),e.push("\n      "),e.push(this.Icon("status-modified-outer-circle")),e.push("\n      "),e.push(this.Icon("small-dot","icon-status-modified-inner-circle")),e.push('\n    </div>\n  </div>\n  <div class="chat-name">\n    <span class="js-name js-info u-clickable">'),e.push(n(this.name)),e.push("<span> #"),e.push(n(this.session.id)),e.push('\n  </div>\n  <div class="chat-disconnect js-disconnect">\n    <div class="btn btn--action btn--small">'),e.push(this.T("disconnect")),e.push('</div>\n  </div>\n  <div class="chat-close js-close is-hidden">\n    <div class="btn btn--action btn--small">'),e.push(this.T("close")),e.push('</div>\n  </div>\n</div>\n<div class="chat-scroll-hint js-scrollHint is-hidden">\n  '),e.push(this.Icon("chat")),e.push("\n  "),e.push(this.T("Scroll down to see new messages")),e.push('\n</div>\n<div class="chat-body-holder js-scrollHolder">\n  <div class="chat-body js-body"></div>\n  <div class="chat-body js-meta hidden">\n    '),this.session&&(e.push("\n    <ul>\n      <li>"),e.push(this.T("Created at")),e.push(": "),e.push(this.Ttimestamp(this.session.created_at)),e.push("</li>\n      "),this.session&&this.session.preferences&&(e.push("\n        "),this.session.preferences.geo_ip&&(e.push("\n          <li>GeoIP: "),e.push(n(this.session.preferences.geo_ip.country_name)),e.push(" "),e.push(n(this.session.preferences.geo_ip.city_name)),e.push("</li>\n        ")),e.push("\n        "),this.session.preferences.remote_ip&&(e.push("\n          <li>IP: "),e.push(n(this.session.preferences.remote_ip)),e.push("</li>\n        ")),e.push("\n        "),this.session.preferences.dns_name&&(e.push("\n          <li>DNS: "),e.push(n(this.session.preferences.dns_name)),e.push("</li>\n        ")),e.push("\n      ")),e.push("\n    </ul>\n    ")),e.push('\n    <form class="js-metaForm" style="max-width: 200px; width: 100%;"></form>\n  </div>\n</div>\n<div class="chat-controls">\n  <div class="chat-input">\n    <div class="form-control form-control--small form-control--multiline js-customerChatInput" contenteditable="true"></div>\n  </div>\n  <div class="btn btn--primary btn--slim btn--small js-send">'),e.push(this.T("Send")),e.push("</div>\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/customer_chat/index"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="chat main">\n  <div class="page-header">\n      <div class="page-header-title">\n        <h1>'),e.push(this.T("Customer Chat")),e.push('</h1>\n      </div>\n      <div class="page-header-center">\n        <div class="status-fields">\n          <div class="status-field js-acceptChat js-waitingCustomers">\n            <span class="badge js-badgeWaitingCustomers"></span> '),e.push(this.T("Waiting Customers")),e.push(' \n            <div class="status-badge js-info">\n              <div class="info-badge">'),e.push(this.Icon("info")),e.push('</div>\n            </div>\n          </div>\n          <div class="status-field js-chattingCustomers">\n            <span class="badge js-badgeChattingCustomers"></span> '),e.push(this.T("Chatting Customers")),e.push(' \n            <div class="status-badge js-info">\n              <div class="info-badge">'),e.push(this.Icon("info")),e.push('</div>\n            </div>\n          </div>\n          <div class="status-field js-activeAgents">\n            <span class="badge js-badgeActiveAgents"></span> '),e.push(this.T("Active Agents")),e.push(' \n            <div class="status-badge js-info">\n              <div class="info-badge">'),e.push(this.Icon("info")),e.push('</div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class="page-header-meta">\n        <div class="btn btn--action js-settings">'),e.push(this.T("Settings")),e.push('</div>\n      </div>\n    </div>\n  <div class="chat-workspace"></div>\n</div>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/customer_chat/setting"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o,a;for(e.push('<div class="select form-group">\n  <label for="a">'),e.push(this.T("Max. concurrent chats")),e.push('</label>\n  <div class="u-positionOrigin">\n    <select id="a" class="form-control" name="chat::max_windows">\n      '),i=s=1;s<=20;i=++s)e.push('\n        <option value="'),e.push(i),e.push('" '),parseInt(this.preferences.chat.max_windows)===i&&e.push("selected"),e.push(">"),e.push(i),e.push("</option>\n      ");for(e.push("\n    </select>\n    "),e.push(this.Icon("arrow-down","dropdown-arrow")),e.push("\n  </div>\n</div>\n"),this.errors.settings&&(e.push('\n<div class="alert alert--danger">'),e.push(this.T(this.errors.settings)),e.push("</div>\n")),e.push('\n<table class="settings-list">\n  <thead>\n    <tr>\n      <th>'),e.push(this.T("Topic")),e.push('\n      <th width="100%">'),e.push(this.T("Greeting")),e.push(" ("),e.push(this.T("Separate multiple values by ;")),e.push(")\n      <th>"),e.push(this.T("Enabled")),e.push("\n    </th></tr>\n  </thead>\n"),a=this.chats,r=0,o=a.length;r<o;r++)t=a[r],e.push("\n    <tr>\n      <td>"),e.push(n(t.name)),e.push('\n      <td class="settings-list-control-cell"><label class="inline-label"><input name="chat::phrase::'),e.push(t.id),e.push('" value="'),e.push(n(this.preferences.chat.phrase[t.id])),e.push('" class="form-control form-control--small" placeholder="'),e.push(this.T("Hello, my name is %s, what can I do for you?",App.Session.get("firstname"))),e.push('"/></label>\n      <td class="u-positionOrigin">\n        <label class="checkbox-replacement checkbox-replacement--fullscreen">\n            <input type="checkbox" name="chat::active::'),e.push(t.id),e.push('" '),this.preferences.chat.active[t.id]&&e.push("checked"),e.push(">\n            "),e.push(this.Icon("checkbox","icon-unchecked")),e.push("\n            "),e.push(this.Icon("checkbox-checked","icon-checked")),e.push("\n        </label>\n");e.push("\n  </tbody>\n</table>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/customer_chat/user_list"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r;if(e.push("<hr>\n"),_.isEmpty(this.users))e.push("\n"),e.push(this.T("none")),e.push("\n");else{for(e.push('\n<div class="userList">\n'),s=this.users,t=0,i=s.length;t<i;t++)r=s[t],e.push('\n  <div class="userList-entry">\n    '),e.push(r.avatar("30")),e.push('\n    <span class="userList-name">\n      '),e.push(n(r.displayName())),e.push("\n    </span>\n  </div>\n");e.push("\n</div>\n")}e.push("\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/customer_not_ticket_exists"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="">\n  <h1>'),e.push(this.T("Welcome!")),e.push('<small></small></h1>\n  <div class="container">\n    <div class="row">\n      <div class="span12">\n        <p>'),e.push(this.T("You have not created a ticket yet.")),e.push("</p>\n        <p>"),e.push(this.T('The way to communicate with us is this thing called "ticket".')),e.push("</p>\n        <p>"),e.push(this.T("Please click the button below to create your first one.")),e.push('</p>\n\n        <p><a class="btn btn--primary" href="#customer_ticket_new">'),e.push(this.T("Create your first ticket")),e.push("</a></p>\n      </div>\n    </div>\n  </div>\n</div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/customer_ticket_create"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="horizontal flex">\n  <div class="main no-padding flex">\n    <div class="newTicket">\n      <div class="box box--newTicket">\n        <div class="page-header">\n          <h1>'),e.push(this.T("New Ticket")),e.push('</h1>\n        </div>\n\n        <div class="page-content">\n          <form role="form" class="ticket-create" autocomplete="off">\n            <input type="hidden" name="form_id" value="'),e.push(n(this.form_id)),e.push('"/>\n\n            <div class="ticket-form-top"></div>\n            <div class="article-form-top"></div>\n\n            <div class="formset-inset">\n              <div class="ticket-form-middle horizontal two-columns"></div>\n              <div class="ticket-form-bottom"></div>\n            </div>\n\n            <div class="form-controls">\n              <a class="btn btn--text btn--subtle js-cancel" href="#/">'),e.push(this.T("Cancel & Go Back")),e.push('</a>\n              <button type="submit" class="btn btn--success js-submit align-right">'),e.push(this.T("Create")),e.push('</button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class="sidebar"></div>\n')}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/dashboard"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,
e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="dashboard main flex center">\n  <div class="tabs tabs--big">\n    <div class="tab active" data-area="stat-widgets">'),e.push(this.T("My Stats")),e.push('</div>\n    <div class="tab" data-area="first-steps-widgets">'),e.push(this.T("First Steps")),e.push('</div>\n  </div>\n  <div class="tab-content first-steps-widgets hidden"></div>\n  <div class="tab-content stat-widgets three-columns horizontal"></div>\n</div>\n<div class="sidebar optional">\n  <h2>'),e.push(this.T("Activity Stream")),e.push('</h2>\n  <div class="activity-description">\n    <p>'),e.push(this.T("Here you will find the latest activities of your system.")),e.push("</p>\n    <p>"),e.push(this.T("E. g. recent changed tickets, users or organizations.")),e.push('</p>\n  </div>\n  <div class="activity-entries js-activityContent">\n    <p>'),e.push(this.T("Here you will find the latest activities of your system.")),e.push("</p>\n    <p>"),e.push(this.T("E. g. recent changed tickets, users or organizations.")),e.push("</p>\n  </div>\n</div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/dashboard/activity_stream_item"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="js-item activity-entry">\n  <div class="activity-avatar js-avatar"></div>\n  <a href="'),e.push(this.item.link),e.push('" class="activity-body">\n    <span class="activity-message">\n      <span class="activity-text">\n        '),this.item.objectNative&&this.item.objectNative.activityMessage?(e.push("\n          "),e.push(this.item.objectNative.activityMessage(this.item)),e.push("\n        ")):(e.push("\n            Need objectNative in item "),e.push(n(item.object)),e.push(".find("),e.push(n(item.o_id)),e.push(")\n        ")),e.push("\n      </span>\n      "),e.push(this.humanTime(this.item.created_at,!1,"activity-time")),e.push('\n    </span>\n    <span class="activity-icon">\n      '),this.item.cssIcon&&(e.push("\n      "),e.push(this.Icon(this.item.cssIcon)),e.push("\n      ")),e.push("\n    </span>\n  </a>\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/dashboard/first_steps"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,n,i,s,r,o,a,l;for(e.push('<div class="box box--paper">\n  '),a=this.data,n=0,r=a.length;n<r;n++){for(t=a[n],e.push("\n  <h3>"),e.push(this.T(t.name)),e.push("</h3>\n    "),l=t.items,s=0,o=l.length;s<o;s++)i=l[s],e.push('\n    <a class="todo '),i.checked&&e.push("is-done"),e.push(" "),i["class"]&&e.push(i["class"]),e.push('" href="'),e.push(i.location),e.push('">\n      '),i.checked?(e.push("\n        "),e.push(this.Icon("checkmark")),e.push("\n      ")):(e.push("\n        "),e.push(this.Icon("small-dot")),e.push("\n      ")),e.push("\n      "),e.push(this.T(i.name)),e.push("\n    </a>\n    ");e.push("\n  ")}e.push("\n</div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/dashboard/first_steps_clues"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="modal-backdrop js-backdrop"></div>\n<div class="modal-spacer js-positionOrigin"></div>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/dashboard/first_steps_clues_content"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="modal-content">\n  <div class="modal-arrow js-arrow"></div>\n  <div class="modal-close js-close">\n    '),e.push(this.Icon("diagonal-cross")),e.push('\n  </div>\n  <div class="modal-header">'),e.push(this.T(this.headline)),e.push('</div>\n  <div class="modal-body">'),e.push(this.T(this.text)),e.push('</div>\n  <div class="modal-controls">\n    <div class="modal-control">\n      <div class="'),0===this.position&&e.push("is-disabled "),e.push('btn btn--text js-previous">'),e.push(this.T("Previous")),e.push('</div>\n    </div>\n    <div class="modal-control clue-count">'),e.push(n(this.position+1)),e.push("/"),e.push(n(this.max)),e.push('</div>\n    <div class="modal-control">\n      '),this.position+1===this.max?(e.push('\n        <div class="btn btn--text js-next">'),e.push(this.T("Finish")),e.push("</div>\n      ")):(e.push('\n        <div class="btn btn--text js-next">'),e.push(this.T("Next")),e.push("</div>\n      ")),e.push("\n    </div>\n  </div>\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/dashboard/first_steps_test_ticket_finish"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push("<p>"),e.push(this.T('A test ticket has been created, you can find it in your overview "%s" %l.',this.overviewName,this.overviewUrl)),e.push('</p>\n<div class="centered">\n  <a class="btn btn--success flex" href="'),e.push(this.ticketUrl),e.push('">'),e.push(this.T("Open Ticket# %s",this.ticketNumber)),e.push("</a>\n</div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/dashboard/first_steps_test_ticket_loading"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="wizard-body vertical justified">\n  <p class="wizard-loadingText">\n    <span class="loading icon"></span>\n  </p>\n</div>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/dashboard/stats"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,n,i,s,r,o;e.push('<div class="column">\n  <div class="time stat-widget vertical">\n    <div class="stat-title">'),e.push(this.T("\u2205 Waiting time today")),e.push('</div>\n    <div class="stat-graphic">\n      <div class="stat-stopwatch centered">\n        '),e.push(this.Icon("stopwatch","stat-icon stopwatch-icon")),e.push('\n        <canvas class="stat-dial"></canvas>\n        <div class="stat-amount"></div>\n      </div>\n    </div>\n    <div class="stat-label">'),e.push(this.T("My handling time: %s minutes",this.StatsTicketWaitingTime.handling_time)),e.push('</div>\n    <div class="stat-detail">'),e.push(this.T("Average: %s minutes",this.StatsTicketWaitingTime.average_per_agent)),e.push('</div>\n  </div>\n</div>\n<div class="column">\n  <div class="mood stat-widget vertical">\n    <div class="stat-title">'),e.push(this.T("Mood")),e.push('</div>\n    <div class="stat-graphic">\n      '),e.push(this.Icon("mood-"+this.StatsTicketEscalation.state,"stat-icon mood-icon")),e.push('\n    </div>\n    <div class="stat-label">'),e.push(this.T("%s of my tickets escalated.",this.StatsTicketEscalation.own)),e.push('</div>\n    <div class="stat-detail">'),e.push(this.T("Total: %s",this.StatsTicketEscalation.total)),e.push('</div>\n  </div>\n</div>\n<div class="column">\n  <div class="channel-distribution stat-widget vertical centered">\n    <div class="stat-title">'),e.push(this.T("Channel Distribution")),e.push('</div>\n    <div class="stat-graphic">\n      '),s=this.StatsTicketChannelDistribution.channels;for(n in s)t=s[n],e.push('\n      <div class="stats-row email-channel">\n        '),e.push(this.Icon(t.icon,"stat-channel-icon")),e.push('\n        <div class="stat-bars">\n          <div class="stat-bar primary" style="height: '),e.push(t.inbound_in_percent),e.push('%" title="'),e.push(this.Ti("Inbound")),e.push(": "),e.push(t.inbound_in_percent),e.push("% ("),e.push(t.inbound),e.push(')"></div>\n          <div class="stat-bar secondary" style="height: '),e.push(t.outbound_in_percent),e.push('%" title="'),e.push(this.Ti("Outbound")),e.push(": "),e.push(t.outbound_in_percent),e.push("% ("),e.push(t.outbound),e.push(')"></div>\n        </div>\n        <div class="stat-label"></div>\n      </div>\n      ');for(e.push('\n    </div>\n  </div>\n</div>\n<div class="column">\n  <div class="status stat-widget vertical">\n    <div class="stat-title">'),e.push(this.T("Assigned")),e.push('</div>\n    <div class="stat-graphic">\n      <div class="stat-tickets vertical reverse end">\n        '),o=parseInt(.16*this.StatsTicketLoadMeasure.percent),e.push("\n        "),i=1,r=o;1<=r?i<=r:i>=r;1<=r?++i:--i)e.push("\n          "),e.push(this.Icon("one-ticket","one-ticket "+this.StatsTicketLoadMeasure.state+"-color")),e.push("\n        ");e.push("\n      </div>\n      "),e.push(this.Icon("total-tickets","total-tickets")),e.push('\n    </div>\n    <div class="stat-label">'),e.push(this.T("Tickets assigned to me: %s of %s",this.StatsTicketLoadMeasure.own,this.StatsTicketLoadMeasure.total)),e.push('</div>\n    <div class="stat-detail">'),e.push(this.T("Average: %s",this.StatsTicketLoadMeasure.average_per_agent)),e.push('</div>\n  </div>\n</div>\n<div class="column">\n  <div class="in-process stat-widget vertical">\n    <div class="stat-title">'),e.push(this.T("Your tickets in process")),e.push('</div>\n    <div class="stat-graphic">\n      '),e.push(this.Icon("in-process","in-process-icon "+this.StatsTicketInProcess.state+"-color")),e.push('\n    </div>\n    <div class="stat-label" title="'),e.push(this.T("%s of your tickets are currently in process.",this.StatsTicketInProcess.in_process)),e.push('">'),e.push(this.T("%s% are currently in process",this.StatsTicketInProcess.percent)),e.push('</div>\n    <div class="stat-detail">'),e.push(this.T("Average: %s%",this.StatsTicketInProcess.average_per_agent)),e.push('</div>\n  </div>\n</div>\n<div class="column">\n  <div class="reopening stat-widget vertical">\n    <div class="stat-title">'),e.push(this.T("Reopening rate")),e.push('</div>\n    <div class="stat-graphic">\n      '),e.push(this.Icon("reopening","reopening-icon "+this.StatsTicketReopen.state+"-color")),e.push('\n    </div>\n    <div class="stat-label">'),e.push(this.T("%s% have been reopened",this.StatsTicketReopen.percent)),e.push('</div>\n    <div class="stat-detail">'),e.push(this.T("Average: %s%",this.StatsTicketReopen.average_per_agent)),e.push("</div>\n  </div>\n</div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/facebook/account_edit"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r;if(e.push('<div class="alert alert--danger hidden" role="alert"></div>\n<fieldset>\n\n  <h1>'),e.push(this.T("Wall")),e.push('</h1>\n  <p class="description">'),e.push(this.T("Choose which group %s will get added to.","wall postings")),e.push('</p>\n  <div class="js-wall">\n    <h2>'),e.push(n(this.channel.options.user.name)),e.push('</h2>\n    <div data-page-id="'),e.push(n(this.channel.options.user.id)),e.push('" class="js-groups"></div>\n  </div>\n\n  <hr>\n\n  <h1>'),e.push(this.T("Pages")),e.push('</h1>\n  <p class="description">'),e.push(this.T("Choose which group %s will get added to.","page postings")),e.push('</p>\n  <div class="js-pages">\n    '),this.channel.options.pages){for(e.push("\n      "),r=this.channel.options.pages,t=0,i=r.length;t<i;t++)s=r[t],e.push("\n        <h2>"),e.push(n(s.name)),e.push('</h2>\n        <div data-page-id="'),e.push(n(s.id)),e.push('" class="js-groups"></div>\n      ');e.push("\n    ")}e.push("\n  </div>\n\n</fieldset>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/facebook/app_config"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="alert alert--danger hidden" role="alert"></div>\n<p>\n  '),e.push(this.T("The tutorial on how to manage a %s is hosted on our [online documentation](https://zammad.org/documentation/channel/facebook).","Facebook App")),e.push("\n</p>\n<fieldset>\n  <h2>"),e.push(this.T("Enter your %s App Keys","Facebook")),e.push('</h2>\n  <div class="input form-group">\n    <div class="formGroup-label">\n      <label for="application_id">Facebook APP ID <span>*</span></label>\n    </div>\n    <div class="controls">\n      <input id="application_id" type="text" name="application_id" value="'),this.external_credential&&this.external_credential.credentials&&e.push(n(this.external_credential.credentials.application_id)),e.push('" class="form-control" required autocomplete="off">\n    </div>\n  </div>\n  <div class="input form-group">\n    <div class="formGroup-label">\n      <label for="application_secret">Facebook App Secret <span>*</span></label>\n    </div>\n    <div class="controls">\n      <input id="application_secret" type="text" name="application_secret" value="'),this.external_credential&&this.external_credential.credentials&&e.push(n(this.external_credential.credentials.application_secret)),e.push('" class="form-control" required autocomplete="off">\n    </div>\n  </div>\n  <h2>'),e.push(this.T("Your callback URL")),e.push('</h2>\n  <div class="input form-group">\n    <div class="controls">\n      <input class="form-control js-select" readonly value="'),e.push(n(this.callbackUrl)),e.push('">\n    </div>\n  </div>\n</fieldset>\n')}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/facebook/index"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="page-header">\n  <div class="page-header-title">\n    <h1>'),e.push(this.T("Facebook")),e.push(" <small>"),e.push(this.T("Accounts")),e.push('</small></h1>\n  </div>\n</div>\n\n<div class="page-content">\n  <div class="page-description">\n    <p>'),e.push(this.T("You can connect %s with Zammad. You need to connect your Zammad with %s first.","Facebook Accounts","Facebook")),e.push('</p>\n    <div class="btn btn--success js-configApp">'),e.push(this.T("Connect Facebook App")),e.push("</div>\n  </div>\n</div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/facebook/list"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o,a,l,c;for(e.push('<div class="page-header">\n  <div class="page-header-title">\n    <h1>'),e.push(this.T("Facebook")),e.push(" <small>"),e.push(this.T("Accounts")),e.push('</small></h1>\n  </div>\n\n  <div class="page-header-meta">\n    <a class="btn js-configApp">'),e.push(this.T("Configure App")),e.push('</a>\n    <a class="btn btn--success js-new">'),e.push(this.T("Add Account")),e.push('</a>\n  </div>\n</div>\n\n<div class="page-content">\n'),l=this.channels,i=0,r=l.length;i<r;i++){if(t=l[i],e.push('\n  <div class="action '),!0!==t.active&&e.push("is-inactive"),e.push('" data-id="'),e.push(n(t.id)),e.push('">\n    <div class="action-block action-row">\n      <h2>'),e.push(this.Icon("status","supergood-color inline")),e.push(" "),e.push(n(t.options.user.name)),e.push(' <span class="text-muted">'),e.push(n(t.options.user.id)),e.push('</span></h2>\n    </div>\n    <div class="action-flow action-flow--row">\n      <div class="action-block">\n        <h3>'),e.push(this.T("Wall")),e.push("</h3>\n        "),e.push(n(t.options.user.name)),e.push(" ->  "),e.push(n(t.options.sync.wall.groupName)),e.push('\n      </div>\n    </div>\n    <div class="action-flow action-flow--row">\n      <div class="action-block">\n        <h3>'),e.push(this.T("Pages")),e.push("</h3>\n        "),t.options.pages){for(e.push("\n          "),c=t.options.pages,s=0,o=c.length;s<o;s++)a=c[s],e.push("\n            "),e.push(n(a.name)),e.push(" -> "),e.push(n(a.groupName)),e.push("<br>\n            ("),e.push(n(a.perms)),e.push(")<br>\n          ");e.push("\n        ")}e.push('\n      </div>\n    </div>\n    <div class="action-controls">\n      <div class="btn btn--danger btn--secondary js-delete">'),e.push(this.T("Delete")),e.push("</div>\n      "),!0===t.active?(e.push('\n        <div class="btn btn--secondary js-disable">'),e.push(this.T("Disable")),e.push("</div>\n      ")):(e.push('\n        <div class="btn btn--secondary js-enable">'),e.push(this.T("Enable")),e.push("</div>\n      ")),e.push('\n      <div class="btn js-edit">'),e.push(this.T("Edit")),e.push("</div>\n    </div>\n  </div>\n")}e.push("\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/actions"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r;for(e.push('<div class="dropdown dropdown--actions">\n  <div class="dropdown-toggle" id="userAction" data-toggle="dropdown">\n    '),"small"!==this.type&&(e.push("\n      "),e.push(this.Icon("cog","dropdown-icon")),e.push("\n      <label>"),e.push(this.T("Action")),e.push("</label>\n    ")),e.push("\n    "),e.push(this.Icon("arrow-down")),e.push('\n  </div>\n  <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="userAction">\n    '),r=this.items,t=0,s=r.length;t<s;t++)i=r[t],e.push('\n      <li role="presentation" data-type="'),e.push(n(i.name)),e.push('"><a role="menuitem" tabindex="-1" href="#">'),e.push(this.T(i.title)),e.push("</a>\n    ");e.push("\n  </ul>\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/admin/empty"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push("<p>"),e.push(this.T(this.explanation)),e.push('</p>\n\n<table class="table table--placeholder">\n  <thead><tr><th>'),e.push(this.T("No Entries")),e.push("\n</table>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/admin/index"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r;if(e.push('<div class="page-header">\n  <div class="page-header-title">\n    <h1>'),e.push(this.T(this.head)),e.push(" <small>"),e.push(this.T("Management")),e.push('</small></h1>\n  </div>\n  <div class="page-header-meta">\n    '),this.showDescription&&(e.push('\n      <a class="btn js-description">'),e.push(this.T("Description")),e.push("</a>\n    ")),e.push("\n    "),this.buttons){for(e.push("\n      "),r=this.buttons,i=0,s=r.length;i<s;i++)t=r[i],e.push('\n        <a data-type="'),e.push(n(t["data-type"])),e.push('" class="btn '),e.push(n(t["class"])),e.push('" href="'),e.push(n(t.href)),e.push('">'),e.push(this.T(t.name)),e.push("</a>\n      ");e.push("\n    ")}e.push('\n  </div>\n</div>\n\n<div class="page-content">\n  <div class="table-overview"></div>\n</div>\n')}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/admin_level2/index"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r;if(e.push('<div class="sidebar">\n\n  <ul class="nav nav-pills nav-stacked">\n  '),this.menus){for(e.push("\n    "),r=this.menus,t=0,i=r.length;t<i;t++)s=r[t],e.push('\n      <li class="'),e.push(n(s["class"])),e.push('"><a href="'),e.push(n(this.page.nav)),e.push("/"),e.push(n(s.target)),e.push('" data-toggle="tabnav" data-target="'),e.push(n(s.target)),e.push('" >'),e.push(this.T(s.name)),e.push("</a></li>\n    ");e.push("\n  ")}e.push('\n  </ul>\n\n</div>\n<div class="main flex">\n\n  <div class="page-header">\n    <div class="page-header-title">\n      <h1>'),e.push(this.T(this.page.head)),e.push(" <small>"),e.push(this.T(this.page.sub_head)),e.push('</small></h1>\n    </div>\n  </div>\n  <div class="page-content">\n    <div class="nav-tab-content"></div>\n  </div>\n</div>\n')}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/attachment"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t;e.push('<div class="attachments"></div>\n<div class="article-attachment">\n  <div class="attachmentPlaceholder">\n    <span class="attachmentPlaceholder-inputHolder fileUpload">\n      '),t=_.uniqueId("fileUpload_"),e.push('\n      <input multiple="multiple" type="file" name="file" id="'),e.push(t),e.push('">\n      <label class="attachmentPlaceholder-label" for="'),e.push(t),e.push('">\n        '),e.push(this.T("select attachment...")),e.push('\n      </label>\n    </span>\n  </div>\n  <div class="attachmentUpload hide">\n    <div class="horizontal">\n      <div class="u-highlight">\n        '),e.push(this.T("Uploading")),e.push(' (<span class="js-percentage">0</span>%) ...\n      </div>\n      <div class="attachmentUpload-cancel js-cancel">\n        '),e.push(this.Icon("diagonal-cross")),e.push("</div>"),e.push(this.T("Cancel Upload")),e.push('\n      </div>\n    </div>\n    <div class="attachmentUpload-progressBar" style="width: 0%"></div>\n  </div>\n</div>\n<div class="fit dropArea">\n  <div class="dropArea-inner">\n    '),e.push(this.T("Drop files here")),e.push("\n  </div>\n</div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/attachment_item"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="attachment attachment--row">\n  <div class="attachment-name">'),e.push(n(this.filename)),e.push('</div>\n  <div class="attachment-size">'),e.push(n(this.humanFileSize(this.size))),e.push('</div>\n  <div class="attachment-delete js-delete" data-id="'),e.push(n(this.id)),e.push('">\n    '),e.push(this.Icon("diagonal-cross")),e.push(this.T("Delete File")),e.push("\n  </div>\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/attribute"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="'),e.push(n(this.attribute.tag)),e.push(" form-group"),this.attribute.item_class&&e.push(n(" "+this.attribute.item_class)),e.push('">\n  <div class="formGroup-label">\n    <label for="'),e.push(n(this.attribute.id)),e.push('"'),this.attribute.label_class&&(e.push(' class="'),e.push(n(this.attribute.label_class)),e.push('"')),e.push(">"),e.push(this.T(this.attribute.display)),e.push(" <span>"),this.attribute["null"]||e.push("*"),e.push("</span></label>\n    "),e.push(this.item),e.push("\n    "),this.bookmarkable&&e.push('\n    <div class="align-right js-bookmark formGroup-bookmark">\n      <div class="filled bookmark icon"></div>\n    </div>\n    '),e.push("\n    "),this.attribute.note&&(e.push('\n    <div class="help-message js-helpMessage" title="'),e.push(this.Ti(this.attribute.note)),e.push('">\n      '),e.push(this.Icon("help")),e.push("\n    </div>\n    ")),e.push('\n  </div>\n  <div class="controls">\n\t'),this.attribute.remove&&e.push('<span><a href="#" class="glyphicon glyphicon-minus"></a></span>'),e.push("\n\t"),this.attribute.add&&e.push('<span><a href="#" class="glyphicon glyphicon-plus"></a></span>'),e.push('\n    <span class="help-inline"></span>\n    <span class="help-block">'),this.attribute.help&&e.push(this.T(this.attribute.help)),e.push(this.attribute.helpLink),e.push("</span>\n  </div>\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/autocompletion"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<input id="'),e.push(n(this.attribute.id)),e.push('" type="hidden" name="'),e.push(n(this.attribute.name)),e.push('" value="'),e.push(n(this.attribute.value)),e.push('" '),e.push(n(this.attribute.required)),e.push(' />\n<input id="'),e.push(n(this.attribute.id)),e.push('_autocompletion" type="text" name="'),e.push(n(this.attribute.name)),e.push('_autocompletion" value="'),e.push(n(this.attribute.valueShown)),e.push('" class="form-control '),e.push(n(this.attribute["class"])),e.push('" '),e.push(n(this.attribute.required)),e.push(" "),e.push(n(this.attribute.autofocus)),e.push(" "),e.push(this.attribute.autocapitalize),e.push(" "),this.attribute.placeholder&&(e.push('placeholder="'),e.push(this.Ti(this.attribute.placeholder)),e.push('"')),e.push(' autocomplete="off"/>\n<input id="'),e.push(n(this.attribute.id)),e.push('_autocompletion_value_shown" type="hidden" name="'),e.push(n(this.attribute.name)),e.push('_autocompletion_value_shown" value="'),e.push(n(this.attribute.valueShown)),e.push('"/>\n')}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/business_hours"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o,a,l,c,u;e.push("<thead>\n  <tr>\n    "),r=this.days;for(s in r)t=r[s],e.push('\n    <th style="text-align: center">\n      <label class="day-name u-textTruncate">\n        <span class="checkbox-replacement checkbox-replacement--inline">\n          <input class="js-toggle-day" name="'),e.push(n(this.attribute.name)),e.push("::"),e.push(s),e.push('::active" value="true" data-target="'),e.push(s),e.push('" type="checkbox"'),this.hours[s].active&&e.push(" checked"),e.push(">\n          "),e.push(this.Icon("checkbox","icon-unchecked")),e.push("\n          "),e.push(this.Icon("checkbox-checked","icon-checked")),e.push('\n        </span>\n        <span class="label-text">'),e.push(t),e.push("</span>\n      </label>\n    ");for(e.push("\n</thead>\n<tbody>\n  "),u=i=0,o=this.maxTimeframes-1;0<=o?i<=o:i>=o;u=0<=o?++i:--i){e.push("\n  <tr>\n    "),a=this.days;for(s in a)t=a[s],e.push("\n      "),this.hours[s].timeframes[u]?(e.push('\n      <td data-day="'),e.push(s),e.push('" data-slot="'),e.push(u),e.push('" class="form-group day-time'),this.hours[s].active&&e.push(" is-active"),e.push('">\n        <label for="'),e.push(s),e.push('_start_time">from</label>\n        <input type="text" id="'),e.push(s),e.push('_start_time" name="'),e.push(n(this.attribute.name)),e.push("::"),e.push(s),e.push('::start" value="'),e.push(this.hours[s].timeframes[u][0]),e.push('" data-day="'),e.push(s),e.push('" data-slot="'),e.push(u),e.push('" data-i="0" class="form-control form-control--small time js-time">\n        <label for="monday_end_time">till</label>\n        <input type="text" id="monday_end_time" name="'),e.push(n(this.attribute.name)),e.push("::"),e.push(s),e.push('::end" value="'),e.push(this.hours[s].timeframes[u][1]),e.push('" data-day="'),e.push(s),e.push('" data-slot="'),e.push(u),e.push('" data-i="1" class="form-control form-control--small time js-time">\n      ')):e.push('\n      <td class="empty-cell">\n      '),e.push("\n    ");e.push("\n  ")}if(e.push("\n\n  "),this.maxTimeframes>1){e.push("\n  <tr>\n    "),l=this.days;for(s in l)t=l[s],e.push("\n      "),this.hours[s].timeframes.length>1?(e.push('\n      <td data-day="'),e.push(s),
e.push('" class="settings-list-action-cell js-remove-time'),this.hours[s].active&&e.push(" is-active"),e.push('">\n        '),e.push(this.Icon("minus-small")),e.push("\n      ")):e.push('\n      <td class="empty-cell">\n      '),e.push("\n    ");e.push("\n  ")}e.push("\n\n  <tr>\n    "),c=this.days;for(s in c)t=c[s],e.push('\n    <td data-day="'),e.push(s),e.push('" class="settings-list-action-cell js-add-time'),this.hours[s].active&&e.push(" is-active"),e.push('">\n      '),e.push(this.Icon("plus-small")),e.push("\n    ");e.push("\n</tbody>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/checkbox"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r;for(e.push('<div class="'),e.push(n(this.attribute["class"])),e.push(' checkbox">\n'),s=this.attribute.options,t=0,i=s.length;t<i;t++)r=s[t],e.push('\n  <label class="inline-label checkbox-replacement">\n    <input type="checkbox" value="'),e.push(n(r.value)),e.push('" name="'),e.push(n(this.attribute.name)),e.push('" '),e.push(n(r.checked)),e.push("/>\n    "),e.push(this.Icon("checkbox","icon-unchecked")),e.push("\n    "),e.push(this.Icon("checkbox-checked","icon-checked")),e.push('\n    <span class="label-text">'),e.push(n(r.name)),e.push(" "),r.note&&(e.push('- <span class="help-text">'),e.push(this.T(r.note)),e.push("</span>")),e.push("</span>\n  </label>\n");e.push("\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/column_select"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o,a,l,c,u,p;if(this.attribute.seperator)e.push('\n<input class="js-shadow hide" id="'),e.push(n(this.attribute.id)),e.push('" name="'),e.push(n(this.attribute.name)),e.push('" value="'),e.push(n(this.attribute.value)),e.push('">\n');else{for(e.push('\n<select\n  class="columnSelect-shadow js-shadow"\n  id="'),e.push(n(this.attribute.id)),e.push('"\n  name="'),e.push(n(this.attribute.name)),e.push('"\n  '),e.push(n(this.attribute.required)),e.push("\n  "),e.push(n(this.attribute.autofocus)),e.push('\n  value="'),e.push(n(this.attribute.value)),e.push('"\n  multiple\n>\n  '),c=this.attribute.options,t=0,r=c.length;t<r;t++)l=c[t],e.push('\n  <option value="'),e.push(n(l.value)),e.push('" '),l.selected&&e.push(n(" selected")),e.push(">"),e.push(n(l.name)),e.push("</option>\n  ");e.push("\n</select>\n")}for(e.push('\n<div class="columnSelect-column columnSelect-column--selected js-selected" data-name="'),e.push(n(this.attribute.name)),e.push('">\n  <div class="u-placeholder u-unselectable js-placeholder'),this.values.length&&e.push(n(" is-hidden")),e.push('">'),e.push(this.T("Nothing selected")),e.push("</div>\n  "),u=this.attribute.options,i=0,o=u.length;i<o;i++)l=u[i],e.push('\n  <div class="columnSelect-option js-remove js-option'),l.selected||e.push(n(" is-hidden")),e.push('" data-value="'),e.push(n(l.value)),e.push('">'),e.push(n(l.name)),e.push("</div>\n  ");for(e.push('\n</div>\n<div class="columnSelect-column columnSelect-column--sidebar" data-name="'),e.push(n(this.attribute.name)),e.push('">\n  '),this.attribute.options.length>10&&(e.push('\n  <div class="columnSelect-search">\n    '),e.push(this.Icon("magnifier")),e.push('\n    <input class="js-search" autocomplete="off">\n    <div class="columnSelect-search-clear js-clear is-hidden">\n      '),e.push(this.Icon("diagonal-cross")),e.push("\n    </div>\n  </div>\n  ")),e.push('\n  <div class="columnSelect-pool js-pool">\n    '),p=this.attribute.options,s=0,a=p.length;s<a;s++)l=p[s],e.push('\n    <div class="columnSelect-option js-select js-option'),l.selected&&e.push(n(" is-hidden")),e.push('" data-value="'),e.push(n(l.value)),e.push('" title="'),e.push(n(l.title)),e.push('">'),e.push(n(l.name)),e.push("</div>\n    ");e.push("\n  </div>\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/content_one"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="main flex"></div>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/content_two"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="sidebar"></div>\n<div class="main flex"></div>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/content_two_title"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="sidebar">\n</div>\n<div class="main flex">\n  <div class="page-header">\n    <div class="page-header-title">\n      <h1>'),e.push(this.T(this.head)),e.push(" <small>"),e.push(this.T(this.sub_head)),e.push('</small></h1>\n    </div>\n  </div>\n  <div class="page-content"></div>\n</div>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/date"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="control controls--date" data-name="'),e.push(n(this.attribute.nameRaw)),e.push('">\n  <input type="hidden" value="'),e.push(n(this.attribute.value)),e.push('" name="'),e.push(n(this.attribute.name)),e.push('">\n  <input type="text" value="" class="form-control js-datepicker '),e.push(n(this.attribute["class"])),e.push('" data-item="date">\n</div>\n')}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/datepicker"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="datepicker">\n    <div class="datepicker-days">\n        <table class=" table-condensed">\n            <thead>\n                <tr>\n                    <th colspan="7" class="datepicker-title"></th>\n                </tr>\n                <tr>\n                    <th class="prev">'),e.push(this.Icon("arrow-{start}")),e.push('</th>\n                    <th colspan="5" class="datepicker-switch"></th>\n                    <th class="next">'),e.push(this.Icon("arrow-{end}")),e.push('</th>\n                </tr>\n            </thead>\n        <tbody></tbody>\n        <tfoot>\n        <tr>\n            <th colspan="7" class="today"></th>\n        </tr>\n        <tr>\n            <th colspan="7" class="clear"></th>\n        </tr>\n        </tfoot>\n    </table>\n  </div>\n  <div class="datepicker-months">\n      <table class="table-condensed">\n          <thead>\n              <tr>\n                  <th colspan="7" class="datepicker-title"></th>\n              </tr>\n              <tr>\n                  <th class="prev">'),e.push(this.Icon("arrow-{start}")),e.push('</th>\n                  <th colspan="5" class="datepicker-switch"></th>\n                  <th class="next">'),e.push(this.Icon("arrow-{end}")),e.push('</th>\n              </tr>\n          </thead>\n          <tbody><tr><td colspan="7"></td></tr></tbody>\n          <tfoot>\n          <tr>\n              <th colspan="7" class="today"></th>\n          </tr>\n          <tr>\n              <th colspan="7" class="clear"></th>\n          </tr>\n          </tfoot>\n      </table>\n  </div>\n  <div class="datepicker-years">\n      <table class="table-condensed">\n          <thead>\n              <tr>\n                  <th colspan="7" class="datepicker-title"></th>\n              </tr>\n              <tr>\n                  <th class="prev">'),e.push(this.Icon("arrow-{start}")),e.push('</th>\n                  <th colspan="5" class="datepicker-switch"></th>\n                  <th class="next">'),e.push(this.Icon("arrow-{end}")),e.push('</th>\n              </tr>\n          </thead>\n          <tbody><tr><td colspan="7"></td></tr></tbody>\n          <tfoot>\n          <tr>\n              <th colspan="7" class="today"></th>\n          </tr>\n          <tr>\n              <th colspan="7" class="clear"></th>\n          </tr>\n          </tfoot>\n      </table>\n  </div>\n</div>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/datetime"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="controls controls--datetime" data-name="'),e.push(n(this.attribute.nameRaw)),e.push('">\n  <input type="hidden" value="'),e.push(n(this.attribute.value)),e.push('" name="'),e.push(n(this.attribute.name)),e.push('">\n  <input type="text" value="" class="form-control flex-shrink-horizontal js-datepicker '),e.push(n(this.attribute["class"])),e.push('" data-item="date">\n  <div class="controls-label">'),e.push(this.T("at")),e.push('</div>\n  <input type="text" value="" class="form-control time js-timepicker '),e.push(n(this.attribute["class"])),e.push('" data-item="time">\n</div>\n')}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/drox"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="drox">\n  <div class="drox-header">\n    <h2>\n      '),e.push(this.T(this.header)),e.push("\n      "),this.edit&&(e.push('\n      <a href="" data-type="edit" class="pull-right glyphicon glyphicon-edit" title="'),e.push(this.Ti("edit")),e.push('"></a>\n      ')),e.push('\n    </h2>\n  </div>\n  <div class="drox-body">\n  </div>\n</div>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/error/generic"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="fullscreenMessage">\n  '),e.push(this.Icon("diagonal-cross","icon-error")),e.push("\n  <h2>"),void 0!==this.status&&(e.push(this.T("Status Code")),e.push(": "),e.push(n(this.status)),e.push(". ")),e.push(this.T(this.detail)),e.push("</h2>\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/error/not_found"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="flex fullscreenMessage">\n  '),e.push(this.Icon("diagonal-cross","icon-error")),e.push("\n  <h2>"),e.push(this.T("Opps.. I'm sorry, but I can't find this %s.",this.objectName)),e.push("</h2>\n</div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/error/success"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="fullscreenMessage">\n  '),e.push(this.Icon("checkmark")),e.push("\n  <h2>"),e.push(this.T(this.detail)),e.push("</h2>\n</div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/error/unauthorized"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="flex fullscreenMessage">\n  '),e.push(this.Icon("diagonal-cross","icon-error")),e.push("\n  <h2>"),e.push(this.T("Opps.. I'm sorry, but you have insufficient rights to open this %s.",this.objectName)),e.push("</h2>\n</div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/history"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o,a,l,c;for(e.push('<div>\n<a href="#" data-type="sortorder">'),e.push(this.T("Change order")),e.push("</a>\n\n<hr>\n\n"),l=this.items,i=0,o=l.length;i<o;i++){for(s=l[i],e.push('\n  <span class="user-popover" data-id="'),e.push(n(s.created_by.id)),e.push('">'),e.push(n(s.created_by.displayName())),e.push("</span> -\n  "),e.push(this.humanTime(s.created_at)),e.push("\n  <ul>\n    "),c=s.records,r=0,a=c.length;r<a;r++)t=c[r],e.push("\n    <li>"),e.push(t),e.push("</li>\n    ");e.push("\n  </ul>\n  <hr>\n")}e.push("\n\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/ical_feed"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s;e.push('<div class="settings-row">\n  <label class="inline-label">\n    <span class="radio-replacement radio-replacement--inline">\n      <input type="radio" name="holiday-radio" value="list" class="js-check js-checkList">\n      '),e.push(this.Icon("radio","icon-unchecked")),e.push("\n      "),e.push(this.Icon("radio-checked","icon-checked")),e.push("\n    </span>\n    "),e.push(this.T("Subscribe to public holidays in")),e.push('\n  </label>\n  <div class="u-inlineBlock u-positionOrigin">\n    <select class="form-control form-control--small js-list">\n      <option value="">-</option>\n      '),i=this.icalFeeds;for(s in i)t=i[s],e.push('\n        <option value="'),e.push(n(s)),e.push('" '),this.attribute.value===s&&e.push("selected"),e.push(">"),e.push(this.T(t)),e.push("</option>\n      ");e.push("\n    </select>\n    "),e.push(this.Icon("arrow-down")),e.push('\n  </div>\n  <span class="text-small text-muted">('),e.push(this.T("iCalendar links from Google will get fetched once a day")),e.push(')</span>\n</div>\n\n<div class="settings-row">\n  <label class="inline-label">\n    <span class="radio-replacement radio-replacement--inline">\n      <input type="radio" name="holiday-radio" value="manual" class="js-check js-checkManual">\n      '),e.push(this.Icon("radio","icon-unchecked")),e.push("\n      "),e.push(this.Icon("radio-checked","icon-checked")),e.push("\n    </span>\n    "),e.push(this.T("Subscribe to iCalendar feed")),e.push('\n  </label>\n  <input class="form-control form-control--small form-control--inline js-manual" type="url" placeholder="'),e.push(n(this.attribute.placeholder)),e.push('">\n  <input type="hidden" class="js-shadow" name="'),e.push(n(this.attribute.name)),e.push('" value="'),e.push(n(this.attribute.value)),e.push('">\n</div>\n')}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/input"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<input id="'),e.push(n(this.attribute.id)),e.push('" type="'),e.push(n(this.attribute.type)),e.push('" name="'),e.push(n(this.attribute.name)),e.push('" value="'),e.push(n(this.attribute.value)),e.push('" class="form-control '),e.push(n(this.attribute["class"])),e.push('" '),this.attribute.placeholder&&(e.push('placeholder="'),e.push(this.Ti(this.attribute.placeholder)),e.push('"')),e.push(" "),e.push(n(this.attribute.required)),e.push(" "),e.push(n(this.attribute.autofocus)),e.push(" "),e.push(this.attribute.autocapitalize),e.push(" "),e.push(this.attribute.autocomplete),e.push(" "),void 0!==this.attribute.min&&(e.push(' min="'),e.push(n(this.attribute.min)),e.push('"')),void 0!==this.attribute.max&&(e.push(' max="'),e.push(n(this.attribute.max)),e.push('"')),this.attribute.step&&(e.push(' step="'),e.push(n(this.attribute.step)),e.push('"')),this.attribute.disabled&&e.push(" disabled"),e.push("/>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/login_preview"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="login branding centered darkBackground vertical">\n  '),this.maintananceChange&&(e.push("\n    "),this.C("maintenance_mode")&&(e.push('\n      <div class="hero-unit alert alert--danger">'),e.push(this.T("Zammad is currently in maintenance mode. Only administrators can login. Please wait until the maintenance window is over.")),e.push("</div>\n    ")),e.push("\n\n    "),this.logoChange&&!this.C("maintenance_login")||(e.push('\n    <form>\n      <div contenteditable id="maintenance-message" data-name="message" class="hero-unit alert alert--success js-textarea js-Login" '),this.C("maintenance_login")||e.push('style="opacity: 0.5;"'),e.push(">"),e.push(this.C("maintenance_login_message")),e.push("</div>\n    </form>\n    ")),e.push("\n  ")),e.push('\n\n  <div class="hero-unit">\n\n    '),this.logoChange?(e.push('\n      <img class="logo-preview" src="'),e.push(n(this.logoUrl)),e.push('">\n      <div class="logo-preview-placeholder">'),e.push(this.T("Your Logo")),e.push('</div>\n      <div class="centered">\n        <div class="btn btn--success fileUpload">'),e.push(this.T("Change")),e.push('<input type="file" class="js-upload" name="logo" accept="image/*"></div>\n      </div>\n    ')):(e.push('\n      <img class="company-logo" src="'),e.push(n(this.logoUrl)),e.push('">\n    ')),e.push('\n\n    <div class="form-group">\n      <label for="username">'),e.push(this.Ti("Username / email")),e.push('</label>\n      <input id="username" name="username" type="text" class="form-control" value="'),e.push(n(this.S("login"))),e.push('" autocapitalize="off" disabled="disabled"/>\n    </div>\n\n    <div class="form-group">\n      <label for="password">'),e.push(this.Ti("Password")),e.push('</label>\n      <input id="password" name="password" type="password" class="form-control" value="some_pass" disabled="disabled"/>\n    </div>\n\n    <div class="form-group">\n      <label><input name="remember_me" value="1" type="checkbox" disabled="disabled"/> '),e.push(this.T("Remember me")),e.push('</label>\n    </div>\n\n    <div class="form-controls">\n      <button class="btn btn--primary" type="submit" disabled="disabled">'),e.push(this.T("Sign in")),e.push("</button>\n    </div>\n  </div>\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/modal_loader"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="modal-dialog wizard">\n\n  <form class="modal-content setup wizard">\n    <div class="modal-header">\n      <h1 class="modal-title">'),e.push(this.T(this.head)),e.push('</h1>\n    </div>\n    <div class="modal-body">\n      <div class="wizard-body vertical justified">\n        <p class="wizard-loadingText">\n          <span class="loading icon js-loadingIcon"></span> <span class="js-loading">'),e.push(this.message),e.push(' </span>\n        </p>\n      </div>\n    </div>\n    <div class="modal-footer"></div>\n  </form>\n\n</div>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/navbar_level2/index"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="sidebar '),e.push(n(this.className)),e.push('"></div>\n<div class="main flex"></div>\n')}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/navbar_level2/navbar"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o,a,l,c;if(this.groups){for(e.push("\n  "),l=this.groups,i=0,o=l.length;i<o;i++){if(t=l[i],e.push("\n    "),!_.isEmpty(t.items)){if(e.push("\n      <h2>"),e.push(this.T(t.name)),e.push('</h2>\n      <ul class="nav nav-pills nav-stacked">\n      '),t.items){for(e.push("\n        "),c=t.items,r=0,a=c.length;r<a;r++)s=c[r],e.push("\n          <li "),s.active&&e.push('class="active js-item"'),e.push('><a href="'),e.push(n(s.target)),e.push('">'),e.push(this.T(s.name)),e.push("</a></li>\n        ");e.push("\n      ")}e.push("\n      </ul>\n    ")}e.push("\n  ")}e.push("\n")}e.push("\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/object_import/import_try"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div>\n<p class="alert alert--danger js-error hide"></p>\n\n<p>\n'),this.result.stats&&(e.push("\n  "),e.push(this.T("The test run was successful.")),e.push("\n  "),e.push(this.T("The following changes are made:")),e.push("\n  <ul>\n  "),void 0!==this.result.stats.deleted&&(e.push("\n    <li>"),e.push(this.T("%s Object(s) are deleted.",this.result.stats.deleted)),e.push("</li>\n  ")),e.push("\n  "),void 0!==this.result.stats.created&&(e.push("\n    <li>"),e.push(this.T("%s Object(s) are created.",this.result.stats.created)),e.push("</li>\n  ")),e.push("\n  "),void 0!==this.result.stats.updated&&(e.push("\n    <li>"),e.push(this.T("%s Object(s) are updated.",this.result.stats.updated)),e.push("</li>\n  ")),e.push("\n")),e.push("\n</p>\n\n</div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/object_import/imported"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r;if(e.push("<div>\n"),this.errors){for(e.push("\n  <ul>\n  "),r=this.errors,i=0,s=r.length;i<s;i++)t=r[i],e.push("\n    <li>"),e.push(n(t)),e.push("\n  ");e.push("\n")}e.push('\n</div>\n\n<div>\n<p class="alert alert--danger js-error hide"></p>\n<p>\n'),this.result.stats&&(e.push("\n  "),e.push(this.T("The import was successful.")),e.push("\n  "),e.push(this.T("The following changes have been made:")),e.push("\n  <ul>\n  "),void 0!==this.result.stats.deleted&&(e.push("\n    <li>"),e.push(this.T("%s Object(s) were deleted.",this.result.stats.deleted)),e.push("</li>\n  ")),e.push("\n  "),void 0!==this.result.stats.created&&(e.push("\n    <li>"),e.push(this.T("%s Object(s) have been created.",this.result.stats.created)),e.push("</li>\n  ")),e.push("\n  "),void 0!==this.result.stats.updated&&(e.push("\n    <li>"),e.push(this.T("%s Object(s) have been updated.",this.result.stats.updated)),e.push("</li>\n  ")),e.push("\n")),e.push("\n</p>\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/object_import/index"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div>\n<p class="alert alert--danger js-error hide"></p>\n\n<p>\n  '),e.push(this.T("Bulk import allows you to create and update many records at once.")),e.push("\n  "),e.push(this.T("The data must be in the comma separated values (CSV) format and saved as UTF-8. You can import a CSV file or paste the data directly into the text area.")),e.push("\n</p>\n\n<p>"),e.push(this.T("Alternatively, you can use the Zammad API to import data.")),e.push('</p>\n\n<h2><input checked="checked" disabled="disabled" type="checkbox" name="create" value="true"> '),e.push(this.T("Create new records")),e.push("</h2>\n"),e.push(this.T("Records that exist in the import data (but not in Zammad) will always be created.")),e.push('\n\n<h2><input checked="checked" disabled="disabled" type="checkbox" name="update" value="true"> '),e.push(this.T("Update existing records")),e.push("</h2>\n"),e.push(this.T("Update existing records with the attributes specified in the import data.")),e.push("\n\n"),!0===this.deleteOption&&(e.push('\n<h2><input type="checkbox" name="delete" value="true"> '),e.push(this.T("Delete records")),e.push("</h2>\n"),e.push(this.T("Delete all existing records first.")),e.push("\n")),e.push("\n\n<h2>"),e.push(this.T("Select CSV file")),e.push('</h2>\n<input name="file" type="file">\n\n<h2>'),e.push(this.T("Paste in CSV data")),e.push('</h2>\n<textarea cols="25" rows="6" name="data"></textarea>\n\n<p>'),e.push(this.T("Note")),e.push(': <a href="'),e.push(this.import_example_url),e.push('" target="_blank">'),e.push(this.T("Example CSV file for download.")),e.push("</a></p>\n</div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/object_import/result"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r;if(e.push("<div>\n"),e.push(this.T("Result")),e.push(": "),e.push(n(this.result)),e.push("\n"),this.errors){for(e.push("\n  <ul>\n  "),r=this.errors,i=0,s=r.length;i<s;i++)t=r[i],e.push("\n    <li>"),e.push(n(t)),e.push("\n  ");e.push("\n")}e.push("\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/object_search/input"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="tokenfield form-control u-positionOrigin">\n  <input class="js-objectId" type="hidden" value="'),e.push(n(this.value)),e.push('" name="'),e.push(this.attribute.name),e.push('" tabindex="-1">\n  '),this.attribute.multiple&&(e.push("\n    "),e.push(this.tokens),e.push("\n  ")),e.push('\n  <input name="'),e.push(this.attribute.name),e.push('_completion" class="user-select token-input js-objectSelect" autocapitalize="off" placeholder="'),e.push(this.Ti(this.attribute.placeholder)),e.push('" autocomplete="off" '),e.push(n(this.attribute.autofocus)),e.push(' role="textbox" aria-autocomplete="list" value="'),e.push(n(this.name)),e.push('" aria-haspopup="true">\n  '),!0!==this.attribute.disableCreateObject&&e.push(this.Icon("arrow-down","dropdown-arrow")),e.push('\n</div>\n\n<div class="dropdown-menu" aria-labelledby="customer_id">\n  <ul class="recipientList" role="menu"></ul>\n</div>\n')}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/object_search/item_object"]=function(t){t||(t={});var e=[],n=function(t){
return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<li class="recipientList-entry js-object" data-object-id="'),e.push(n(this.object.id)),e.push('">\n  <div class="recipientList-iconSpacer">\n    '),e.push(this.Icon(this.icon,"recipientList-icon")),e.push('\n  </div>\n  <div class="recipientList-name">\n    '),this.realname?(e.push("\n      "),e.push(n(this.realname)),e.push("\n    ")):(e.push("\n      "),e.push(n(this.object.displayName())),e.push("\n    ")),e.push("\n    "),this.object.organization&&(e.push('\n      <span class="recipientList-detail">- '),e.push(n(this.object.organization.displayName())),e.push("</span>\n    ")),e.push("\n  </div>\n  "),!1===this.object.active&&(e.push('\n    <div class="recipientList-status">'),e.push(n(this.Ti("inactive"))),e.push("</div>\n  ")),e.push("\n</li>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/object_search/item_organization"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<li class="recipientList-entry js-organization" data-organization-id="'),e.push(this.organization.id),e.push('">\n  <div class="recipientList-iconSpacer">\n    '),!1===this.organization.active?(e.push("\n    "),e.push(this.Icon("inactive-organization","recipientList-icon")),e.push("\n    ")):(e.push("\n    "),e.push(this.Icon("organization","recipientList-icon")),e.push("\n    ")),e.push('\n  </div>\n  <div class="recipientList-name">\n    '),e.push(n(this.organization.displayName())),e.push('\n    <span class="recipientList-detail">- '),e.push(n(this.objectCount)),e.push(" "),e.push(this.T(this.objectSingels)),e.push("</span>\n  </div>\n  "),!1===this.organization.active&&(e.push('\n    <div class="recipientList-status">'),e.push(n(this.Ti("inactive"))),e.push("</div>\n  ")),e.push("\n  "),e.push(this.Icon("arrow-right","recipientList-arrow")),e.push("\n</li>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/object_search/item_organization_members"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<ul class="recipientList-organizationMembers hide" organization-id="'),e.push(this.organization.id),e.push('">\n  <li class="recipientList-controls js-back">\n    <div class="btn btn--action btn--onDark">\n      '),e.push(this.Icon("arrow-left")),e.push('\n      <span class="btn-label">'),e.push(this.T("Back")),e.push("</span>\n    </div>\n</ul>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/object_search/new_object"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<li class="recipientList-entry recipientList--new js-objectNew" data-object-id="new">\n  <div class="recipientList-iconSpacer">\n    '),e.push(this.Icon("plus","recipientList-icon")),e.push('\n  </div>\n  <div class="recipientList-name">\n    '),e.push(this.T(this.objectCreate)),e.push("\n  </div>\n</li>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/page_loading"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="page-loading">\n  <div class="small loading icon"></div>\n  <div class="page-loading-label">'),e.push(this.T("Loading...")),e.push("</div>\n</div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/permission"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o,a,l,c,u,p,h,d,f;for(e.push('<div class="checkbox '),e.push(n(this.attribute["class"])),e.push('">\n'),u=this.permissions,s=0,a=u.length;s<a;s++){if(c=u[s],e.push("\n  "),c.name.match(/\./)){if(e.push('\n    <div style="padding-left: 20px;" class="js-subPermissionList">\n      <label class="inline-label checkbox-replacement">\n        <input type="checkbox" value="'),e.push(n(c.id)),e.push('" name="permission_ids" '),_.contains(this.params.permission_ids,c.id)&&e.push("checked"),e.push(" "),c.preferences.disabled&&e.push("disabled"),e.push(' data-permission-name="'),e.push(n(c.name)),e.push('"/>\n        '),e.push(this.Icon("checkbox","icon-unchecked")),e.push("\n        "),e.push(this.Icon("checkbox-checked","icon-checked")),e.push('\n        <span class="label-text">'),e.push(n(c.displayName().replace(/^.+?\./,""))),e.push(' - <span class="help-text">'),e.push(this.T.apply(this,[c.note].concat(c.preferences.translations))),e.push("</span></span>\n      </label>\n  "),_.contains(c.preferences.plugin,"groups")){e.push('\n    <div style="padding-left: 18px; padding-top: 10px;" class="js-groupList '),this.hideGroups&&e.push("js-groupListHide hidden"),e.push('">\n      <table class="settings-list">\n        <thead>\n          <th>'),e.push(this.T("Group")),e.push("\n          "),p=this.groupAccesses;for(o in p)f=p[o],e.push("\n            <th>"),e.push(this.T(f)),e.push("\n          ");for(e.push("\n        <tbody>\n      "),h=this.groups,r=0,l=h.length;r<l;r++){i=h[r],e.push("\n      "),t=[],e.push("\n      "),this.params.group_ids&&this.params.group_ids[i.id]&&(e.push("\n      "),t=this.params.group_ids[i.id],e.push("\n      ")),e.push("\n        <tr>\n          <td>\n            "),e.push(n(i.displayName())),e.push("\n          "),d=this.groupAccesses;for(o in d)f=d[o],e.push('\n            <td>\n            <label class="inline-label checkbox-replacement">\n              <input type="checkbox" value="'),e.push(n(o)),e.push('" name="group_ids::'),e.push(n(i.id)),e.push('" '),_.contains(t,o)&&e.push("checked"),e.push("/>\n              "),e.push(this.Icon("checkbox","icon-unchecked")),e.push("\n              "),e.push(this.Icon("checkbox-checked","icon-checked")),e.push("\n            </label>\n          ");e.push("\n        </tr>\n      ")}e.push("\n      </table>\n    </div>\n  ")}e.push("\n    </div>\n  ")}else e.push('\n  <label class="inline-label checkbox-replacement">\n    <input type="checkbox" value="'),e.push(n(c.id)),e.push('" name="permission_ids" '),_.contains(this.params.permission_ids,c.id)&&e.push("checked"),e.push(" "),c.preferences.disabled&&e.push("disabled"),e.push(' data-permission-name="'),e.push(n(c.name)),e.push('"/>\n    '),e.push(this.Icon("checkbox","icon-unchecked")),e.push("\n    "),e.push(this.Icon("checkbox-checked","icon-checked")),e.push('\n    <span class="label-text">'),e.push(n(c.displayName())),e.push(' - <span class="help-text">'),e.push(this.T.apply(this,[c.note].concat(c.preferences.translations))),e.push("</span></span>\n  </label>\n  ");e.push("\n")}e.push("\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/postmaster_match"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="horizontal-filters">\n  <div class="horizontal-filter js-filterElement">\n    <div class="horizontal-filter-body">\n      <div class="controls">\n        <div class="u-positionOrigin js-attributeSelector">\n          '),e.push(this.Icon("arrow-down","dropdown-arrow")),e.push('\n        </div>\n      </div>\n      <div class="controls">\n        <div class="u-positionOrigin js-operator">\n          <select></select>\n          '),e.push(this.Icon("arrow-down")),e.push('\n        </div>\n      </div>\n      <div class="controls js-value"></div>\n    </div>\n    <div class="filter-controls">\n      <div class="filter-control filter-control-remove js-remove" title="'),e.push(this.T("Remote")),e.push('">\n        '),e.push(this.Icon("minus-small")),e.push('\n      </div>\n      <div class="filter-control filter-control-add js-add" title="'),e.push(this.T("Add")),e.push('">\n        '),e.push(this.Icon("plus-small")),e.push("\n      </div>\n    </div>\n  </div>\n</div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/postmaster_set"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="horizontal-filters"></div>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this);(function(){this.JST||(this.JST={}),this.JST["app/views/generic/postmaster_set_row"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="horizontal-filter js-filterElement">\n  <div class="horizontal-filter-body">\n    <div class="controls">\n      <div class="u-positionOrigin js-attributeSelector">\n        '),e.push(this.Icon("arrow-down","dropdown-arrow")),e.push('\n      </div>\n    </div>\n    <div class="controls">\n      <div class="u-positionOrigin js-operator">\n        <select></select>\n        '),e.push(this.Icon("arrow-down")),e.push('\n      </div>\n    </div>\n    <div class="controls js-value"></div>\n  </div>\n  <div class="filter-controls">\n    <div class="filter-control filter-control-remove js-remove" title="'),e.push(this.T("Remote")),e.push('">\n      '),e.push(this.Icon("minus-small")),e.push('\n    </div>\n    <div class="filter-control filter-control-add js-add" title="'),e.push(this.T("Add")),e.push('">\n      '),e.push(this.Icon("plus-small")),e.push("\n    </div>\n  </div>\n</div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}).call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/radio"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r;for(e.push('<div class="'),e.push(n(this.attribute["class"])),e.push('">\n'),s=this.attribute.options,t=0,i=s.length;t<i;t++)r=s[t],e.push('\n    <label>\n      <input type="radio" value="'),e.push(n(r.value)),e.push('" name="'),e.push(n(this.attribute.name)),e.push('" '),e.push(n(r.checked)),e.push("> "),e.push(n(r.name)),e.push(" "),r.note&&(e.push("- "),e.push(this.T(r.note))),e.push("\n      "),e.push(this.Icon("radio")),e.push("\n      "),e.push(this.Icon("radio-checked")),e.push("\n    </label>\n");e.push("\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/richtext"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="richtext form-control">\n  <div contenteditable="true" id="'),e.push(n(this.attribute.id)),e.push('" data-name="'),e.push(n(this.attribute.name)),e.push('" class="richtext-content '),e.push(n(this.attribute["class"])),e.push('">'),e.push(this.attribute.value),e.push("</div>\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/searchable_select"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="dropdown-toggle" data-toggle="dropdown">\n  <input\n    class="searchableSelect-shadow form-control js-shadow"\n    '),this.attribute.id&&(e.push('id="'),e.push(n(this.attribute.id)),e.push('"')),e.push('\n    name="'),e.push(n(this.attribute.name)),e.push('"\n    '),e.push(n(this.attribute.required)),e.push("\n    "),e.push(n(this.attribute.autofocus)),e.push('\n    value="'),e.push(n(this.attribute.value)),e.push('"\n    tabindex="-1"\n  >\n  <input\n    class="searchableSelect-main form-control js-input'),this.attribute["class"]&&e.push(n(" "+this.attribute["class"])),e.push('"\n    placeholder="'),e.push(n(this.attribute.placeholder)),e.push('"\n    value="'),e.push(n(this.attribute.valueName)),e.push('"\n    autocomplete="off"\n    '),e.push(n(this.attribute.required)),e.push('\n   >\n  <div class="searchableSelect-autocomplete">\n    <span class="searchableSelect-autocomplete-invisible js-autocomplete-invisible"></span>\n    <span class="searchableSelect-autocomplete-visible js-autocomplete-visible"></span>\n  </div>\n  '),this.attribute.ajax||e.push(this.Icon("arrow-down","dropdown-arrow")),e.push('\n  <div class="small loading icon"></div>\n</div>\n<div class="dropdown-menu dropdown-menu-left dropdown-menu--has-submenu js-dropdown">\n  <ul class="js-optionsList" role="menu">\n    '),e.push(this.options),e.push("\n  </ul>\n  "),e.push(this.submenus),e.push("\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/searchable_select_option"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<li role="presentation" class="'),e.push(n(this["class"])),e.push('" data-value="'),e.push(n(this.option.value)),e.push('" title="'),e.push(n(this.option.name)),this.detail&&e.push(n(this.detail)),e.push('">\n  <span class="searchableSelect-option-text">\n    '),e.push(n(this.option.name)),this.detail&&(e.push('<span class="dropdown-detail">'),e.push(n(this.detail)),e.push("</span>")),e.push("\n  </span>\n  "),this.option.children&&(e.push("\n    "),e.push(this.Icon("arrow-right","recipientList-arrow")),e.push("\n  ")),e.push("\n</li>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/searchable_select_submenu"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<ul class="dropdown-submenu js-optionsSubmenu" role="menu" data-parent-value="'),e.push(this.parentValue),e.push('" hidden>\n  '),this.title&&(e.push('\n  <li class="dropdown-controls js-back">\n    '),e.push(this.Icon("arrow-left")),e.push('\n    <div class="dropdown-title">\n      '),e.push(this.title),e.push("\n    </div>\n  </li>\n  ")),e.push("\n  "),e.push(this.options),e.push("\n</ul>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/select"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r;if(e.push('<div class="controls controls--select">\n  <select id="'),e.push(n(this.attribute.id)),e.push('" class="form-control'),this.attribute["class"]&&e.push(n(" "+this.attribute["class"])),e.push('" name="'),e.push(n(this.attribute.name)),e.push('" '),e.push(n(this.attribute.multiple)),e.push(" "),e.push(n(this.attribute.required)),e.push(" "),e.push(n(this.attribute.autofocus)),e.push(" "),this.attribute.disabled&&e.push(" disabled"),e.push(">\n"),this.attribute.options){for(e.push("\n"),s=this.attribute.options,t=0,i=s.length;t<i;t++)r=s[t],e.push('\n    <option value="'),e.push(n(r.value)),e.push('" '),e.push(n(r.selected)),e.push(" "),e.push(n(r.disabled)),e.push(">"),e.push(n(r.name)),e.push("</option>\n");e.push("\n")}e.push("\n  </select>\n  "),this.attribute.multiple||(e.push("\n    "),e.push(this.Icon("arrow-down")),e.push("\n  ")),e.push("\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/sidebar_tabs"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o,a,l;for(a=this.items,t=0,r=a.length;t<r;t++)i=a[t],e.push('\n<div class="sidebar bottom-form-shadow flex hide" data-tab="'),e.push(n(i.name)),e.push('">\n  <div class="sidebar-header">\n    <h2 class="sidebar-header-headline js-headline">'),e.push(this.T(i.sidebarHead)),e.push('</h2>\n    <div class="sidebar-header-actions js-actions"></div>\n    <div class="tabsSidebar-close">\n      '),e.push(this.Icon("long-arrow-right")),e.push('\n    </div>\n  </div>\n  <hr>\n  <div class="sidebar-content"></div>\n</div>\n');for(e.push('\n<div class="tabsSidebar-tabs" style="'),e.push("rtl"===this.dir?"margin-right":"margin-left"),e.push(": -"),e.push(this.scrollbarWidth),e.push('px">\n'),l=this.items,s=0,o=l.length;s<o;s++)i=l[s],e.push('\n  <div class="tabsSidebar-tab" data-tab="'),e.push(n(i.name)),e.push('"></div>\n');e.push("\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/sidebar_tabs_item"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){!0===this.counterPossible&&(e.push('\n  <div class="tabsSidebar-tab-count js-tabCounter '),this.counter&&0!==this.counter||e.push("hide"),this.cssClass&&e.push(n(this.cssClass)),e.push('">'),e.push(n(this.counter)),e.push("</div>\n")),e.push("\n"),e.push(this.Icon(this.icon)),e.push("\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/sla_times"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<table class="settings-list settings-list--toggleRow">\n  <thead>\n    <tr>\n      <th>'),e.push(this.T("Active")),e.push("\n      <th>"),e.push(this.T("Type")),e.push("\n      <th>"),e.push(this.T("Time")),e.push(' <span class="text-muted">'),e.push(this.T("in hours")),e.push('</span>\n  </thead>\n  <tbody>\n    <tr>\n      <td>\n        <label class="checkbox-replacement dont-grey-out">\n          <input type="checkbox" class="js-activateRow" id="first_response_time">\n          '),e.push(this.Icon("checkbox","icon-unchecked")),e.push("\n          "),e.push(this.Icon("checkbox-checked","icon-checked")),e.push('\n        </label>\n      <td>\n        <label class="inline-label" for="first_response_time">'),e.push(this.T("First Response Time")),e.push('</label>\n        <p class="subtle">'),e.push(this.T("Timeframe for the first response.")),e.push('</p>\n      <td>\n        <input type="hidden" name="first_response_time" value="'),e.push(n(this.first_response_time)),e.push('" class="js-timeConvertTo">\n        <input type="text" value="'),e.push(n(this.first_response_time_in_text)),e.push('" class="form-control--small timeframe js-timeConvertFrom"  placeholder="hh:mm" name="first_response_time_in_text">\n\n    <tr>\n      <td>\n        <label class="checkbox-replacement dont-grey-out">\n          <input type="checkbox" class="js-activateRow" id="update_time">\n          '),e.push(this.Icon("checkbox","icon-unchecked")),e.push("\n          "),e.push(this.Icon("checkbox-checked","icon-checked")),e.push('\n        </label>\n      <td>\n        <label class="inline-label" for="update_time">'),e.push(this.T("Update Time")),e.push('</label>\n        <p class="subtle">'),e.push(this.T("Timeframe for every following response.")),e.push('</p>\n      <td>\n        <input type="hidden" name="update_time" value="'),e.push(n(this.update_time)),e.push('" class="js-timeConvertTo">\n        <input type="text" value="'),e.push(n(this.update_time_in_text)),e.push('" class="form-control--small timeframe js-timeConvertFrom" placeholder="hh:mm" name="update_time_in_text">\n\n    <tr>\n      <td>\n        <label class="checkbox-replacement dont-grey-out">\n          <input type="checkbox" id="solution_time" class="js-activateRow">\n          '),e.push(this.Icon("checkbox","icon-unchecked")),e.push("\n          "),e.push(this.Icon("checkbox-checked","icon-checked")),e.push('\n        </label>\n      <td>\n        <label class="inline-label" for="solution_time">'),e.push(this.T("Solution Time")),e.push('</label>\n        <p class="subtle">'),e.push(this.T("Timeframe for solving the problem.")),e.push('</p>\n      <td>\n        <input type="hidden" name="solution_time" value="'),e.push(n(this.solution_time)),e.push('" class="js-timeConvertTo">\n        <input type="text" value="'),e.push(n(this.solution_time_in_text)),e.push('" class="form-control--small timeframe js-timeConvertFrom" placeholder="hh:mm" name="solution_time_in_text">\n\n    </tr>\n  </tbody>\n</table>\n')}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/table"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o;for(e.push('<div class="js-pager"></div>\n<table class="table table-hover'),this["class"]&&(e.push(" "),e.push(n(this["class"]))),e.push('">\n  <thead>\n    <tr>\n    '),this.sortable&&e.push('\n      <th style="width: 36px" class="table-draggable"></th>\n    '),e.push("\n    "),this.checkbox&&(e.push('\n      <th style="width: 40px" class="table-checkbox">\n        <label class="checkbox-replacement">\n          <input type="checkbox" value="" name="bulk_all">\n          '),e.push(this.Icon("checkbox","icon-unchecked")),e.push("\n          "),e.push(this.Icon("checkbox-checked","icon-checked")),e.push("\n          "),e.push(this.Icon("checkbox-indeterminate","icon-indeterminate")),e.push("\n        </label>\n      </th>\n    ")),e.push("\n    "),this.radio&&e.push('\n      <th style="width: 40px" class="table-radio"></th>\n    '),e.push("\n    "),o=this.headers,i=s=0,r=o.length;s<r;i=++s)t=o[i],e.push('\n      <th class="js-tableHead'),t.className&&(e.push(" "),e.push(n(t.className))),t.align&&(e.push(" align-"),e.push(n(t.align))),e.push('" style="'),t.displayWidth&&(e.push("width:"),e.push(n(t.displayWidth)),e.push("px")),e.push('" data-column-key="'),e.push(n(t.name)),e.push('">\n        <div class="table-column-head'),this.tableId&&e.push(n(" js-sort")),e.push('">\n          <div class="table-column-title">'),e.push(this.T(t.display)),e.push('</div>\n          <div class="table-column-sortIcon">'),t.sortOrderIcon&&e.push(this.Icon(t.sortOrderIcon[0],t.sortOrderIcon[1])),e.push("</div>\n        </div>\n        "),this.tableId&&!t.unresizable&&i<this.headers.length-1&&e.push('\n          <div class="table-col-resize js-col-resize"></div>\n        '),e.push("\n      </th>\n    ");e.push('\n    </tr>\n  </thead>\n  <tbody class="js-tableBody">'),e.push(this.tableBody),e.push('</tbody>\n</table>\n<div class="js-pager"></div>\n')}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/table_pager"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s;for(e.push('<div class="btn-group btn-group--full" role="group" aria-label="" style="margin-bottom: 5px;">\n  '),i=t=0,s=this.pages;0<=s?t<=s:t>=s;i=0<=s?++t:--t)e.push('\n    <div class="btn btn--text btn--large js-page'),this.page!==i&&this.page!==i.toString()||e.push(" is-selected"),e.push('" data-page="'),e.push(n(i)),e.push('">'),e.push(n(i+1)),e.push("</div>\n  ");e.push("\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/table_row"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o,a,l,c,u,p,h,d,f,g,m,v,y,b;for(e.push('<tr class="item'),!1===this.object.active&&e.push(n(" is-inactive")),e.push('" data-id="'),e.push(n(this.object.id)),e.push('">\n'),this.sortable&&(e.push('\n  <td class="table-draggable">'),e.push(this.Icon("draggable")),e.push("</td>\n")),e.push("\n"),this.checkbox&&(e.push('\n  <td class="table-checkbox js-checkbox-field">\n    <label class="checkbox-replacement">\n      <input type="checkbox" value="'),e.push(n(this.object.id)),e.push('" name="bulk">\n      '),e.push(this.Icon("checkbox","icon-unchecked")),e.push("\n      "),e.push(this.Icon("checkbox-checked","icon-checked")),e.push("\n    </label>\n  </td>\n")),e.push("\n"),this.radio&&(e.push('\n  <td class="table-radio">\n    <label class="radio-replacement">\n      <input type="radio" value="'),e.push(n(this.object.id)),e.push('" name="radio">\n      '),e.push(this.Icon("radio","icon-unchecked")),e.push("\n      "),e.push(this.Icon("radio-checked","icon-checked")),e.push("\n    </label>\n  </td>\n")),e.push("\n"),g=this.headers,c=0,h=g.length;c<h;c++){if(l=g[c],e.push("\n  "),b=this.P(this.object,l.name,this.attributes,!0),e.push("\n  "),this.callbacks){e.push("\n  "),m=this.callbacks;for(i in m){if(r=m[i],e.push("\n  "),i===l.name){for(e.push("\n  "),u=0,d=r.length;u<d;u++)s=r[u],e.push("\n  "),b=s(b,this.object,l,this.headers),e.push("\n  ");e.push("\n  ")}e.push("\n  ")}e.push("\n  ")}if(e.push("\n  <td"),l.parentClass&&(e.push(' class="'),e.push(n(l.parentClass)),e.push('"')),l.title&&(e.push(' title="'),e.push(n(l.title)),e.push('"')),l.align&&(e.push(' style="text-align:'),e.push(n(l.align)),e.push('"')),e.push(">\n    "),"icon"===l.name)e.push("\n      "),e.push(this.Icon("task-state",l["class"])),e.push("\n    ");else if(l.icon)e.push("\n      "),e.push(this.Icon(l.icon)),e.push("\n    ");else if("action"===l.name){if(e.push("\n      "),this.actions.length>1){for(e.push('\n        <div class="dropdown dropdown--actions">\n          <div class="btn btn--table btn--text btn--secondary js-action" id="tableActions" data-toggle="dropdown">\n            '),e.push(this.Icon("overflow-button")),e.push('\n          </div>\n          <ul class="dropdown-menu dropdown-menu-right js-table-action-menu" role="menu" aria-labelledby="tableActions">\n            '),v=this.actions,p=0,f=v.length;p<f;p++)t=v[p],e.push('\n            <li role="presentation" class="'),e.push(n(t["class"])),e.push('" data-table-action="'),e.push(n(t.name)),e.push('">\n              <a role="menuitem" tabindex="-1">\n                <span class="dropdown-iconSpacer">\n                  '),e.push(this.Icon(t.icon)),e.push("\n                </span>\n                "),e.push(this.T(t.display)),e.push("\n              </a>\n            ");e.push("\n          </ul>\n        </div>\n      ")}else e.push('\n        <div class="btn btn--table btn--text btn--secondary '),e.push(n(this.actions[0]["class"])),e.push('" title="'),e.push(n(this.actions[0].display)),e.push('" data-table-action="'),e.push(n(this.actions[0].name)),e.push('">\n          '),e.push(this.Icon(this.actions[0].icon)),e.push("\n        </div>\n      ");e.push("\n    ")}else{if(e.push("\n      "),l.link&&(e.push('\n        <a href="'),e.push(l.link),e.push('" '),l.target&&(e.push('target="'),e.push(n(l.target)),e.push('"')),e.push(">\n      ")),e.push("\n      "),l.raw)e.push("\n        "),e.push(l.raw),e.push("\n      ");else{if(e.push("\n        "),l["class"]||l.data){if(e.push("\n        <span "),l["class"]&&(e.push('class="'),e.push(n(l["class"])),e.push('"')),e.push(" "),l.data){y=l.data;for(a in y)o=y[a],e.push("data-"),e.push(a),e.push('="'),e.push(n(o)),e.push('" ')}e.push(">\n        ")}e.push("\n        "),e.push(b),e.push("\n        "),(l["class"]||l.data)&&e.push("</span>"),e.push("\n      ")}e.push("\n      "),l.link&&e.push("</a>"),e.push("\n    ")}e.push("\n  </td>\n")}e.push("\n</tr>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),
this.JST["app/views/generic/table_row_group_by"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<tr>\n  <td colspan="'),e.push(n(this.columnsLength)),e.push('"><b>'),e.push(this.groupByName),this.groupByCount&&(e.push(" ("),e.push(n(this.groupByCount)),e.push(")")),e.push("</b></td>\n</tr>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/tabs"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r;if(e.push('<div class="page-header page-header--tabs">\n  <div class="page-header-title">\n    <h1>'),e.push(this.T(this.header)),e.push(" <small>"),e.push(this.T(this.subHeader)),e.push("</small></h1>\n  </div>\n  "),this.addTab&&(e.push('\n  <div class="page-header-meta">\n    <div class="btn btn--success btn--quad">\n      '),e.push(this.Icon("plus")),e.push("\n    </div>\n  </div>\n  ")),e.push('\n</div>\n<div class="page-content">\n  '),this.tabs.length>1){for(e.push('\n    <ul class="nav nav-tabs" role="tablist">\n    '),s=this.tabs,t=0,i=s.length;t<i;t++)r=s[t],e.push('\n      <li><a href="#'),e.push(n(r.target)),e.push('" role="tab" data-toggle="tab">'),e.push(this.T(r.name)),e.push("</a></li>\n    ");e.push("\n    </ul>\n  ")}e.push('\n  <div class="tab-content"></div>\n</div>\n')}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/textarea"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<textarea id="'),e.push(n(this.attribute.id)),e.push('" name="'),e.push(n(this.attribute.name)),e.push('" class="form-control '),e.push(n(this.attribute["class"])),e.push('" rows="'),e.push(n(this.attribute.rows)),e.push('" '),e.push(n(this.attribute.required)),e.push(" "),e.push(n(this.attribute.autofocus)),e.push(">"),e.push(n(this.attribute.value)),e.push("</textarea>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/ticket_perform_action/attribute_selector"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="flex horizontal">\n  <div class="controls">\n    <div class="u-positionOrigin js-operator">\n      <select></select>\n      '),e.push(this.Icon("arrow-down","dropdown-arrow")),e.push('\n    </div>\n  </div>\n  <div class="controls">\n    <div class="u-positionOrigin js-preCondition">\n      <select></select>\n      '),e.push(this.Icon("arrow-down","dropdown-arrow")),e.push('\n    </div>\n  </div>\n  <div class="controls js-value"></div>\n</div>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/ticket_perform_action/index"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="horizontal-filters"></div>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/ticket_perform_action/notification_email"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="flex">\n  <div class="controls js-recipient u-positionOrigin">\n    <select></select>\n    '),e.push(this.Icon("arrow-down","dropdown-arrow")),e.push('\n  </div>\n  <div class="controls js-subject"><input type="text" name="'),e.push(n(this.name)),e.push('::subject" value="'),e.push(n(this.meta.subject)),e.push('" style="width: 100%;" placeholder="'),e.push(this.T("Subject")),e.push('"></div>\n  <div class="controls js-body"><div class="richtext form-control"><div contenteditable="true" data-name="'),e.push(n(this.name)),e.push('::body">'),e.push(this.meta.body),e.push("</div></div></div>\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/ticket_perform_action/row"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="horizontal-filter js-filterElement">\n  <div class="horizontal-filter-body">\n    <div class="controls">\n      <div class="u-positionOrigin js-attributeSelector">\n        '),e.push(this.Icon("arrow-down","dropdown-arrow")),e.push('\n      </div>\n    </div>\n    <div class="js-setAttribute"></div>\n    <div class="js-setNotification flex"></div>\n  </div>\n  <div class="filter-controls">\n    <div class="filter-control filter-control-remove js-remove" title="'),e.push(this.Ti("Remote")),e.push('">\n      '),e.push(this.Icon("minus-small")),e.push('\n    </div>\n    <div class="filter-control filter-control-add js-add" title="'),e.push(this.Ti("Add")),e.push('">\n      '),e.push(this.Icon("plus-small")),e.push("\n    </div>\n  </div>\n</div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/ticket_selector"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="horizontal-filters js-filter">\n</div>\n<div class="js-preview '),!1===this.attribute.preview&&e.push("hide"),e.push('">\n  <h3>'),e.push(this.T("Preview")),e.push('<span class="subtitle js-previewCounterContainer hide"> <span class="u-highlight js-previewCounter">?</span> '),e.push(this.T("matches")),e.push('</span> <span class="tiny loading icon js-previewLoader hide" style="margin-left: 3px;"></span></h3>\n  <div class="js-previewTable"></div>\n</div>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/ticket_selector_row"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="horizontal-filter js-filterElement">\n  <div class="horizontal-filter-body">\n    <div class="controls">\n      <div class="u-positionOrigin js-attributeSelector">\n        '),e.push(this.Icon("arrow-down","dropdown-arrow")),e.push('\n      </div>\n    </div>\n    <div class="controls">\n      <div class="u-positionOrigin js-operator">\n        <select></select>\n        '),e.push(this.Icon("arrow-down","dropdown-arrow")),e.push('\n      </div>\n    </div>\n    <div class="controls">\n      <div class="u-positionOrigin js-preCondition">\n        <select></select>\n        '),e.push(this.Icon("arrow-down","dropdown-arrow")),e.push('\n      </div>\n    </div>\n    <div class="controls js-value horizontal horizontal-filter-value"></div>\n  </div>\n  <div class="filter-controls">\n    <div class="filter-control filter-control-remove js-remove" title="'),e.push(this.Ti("Remove")),e.push('">\n      '),e.push(this.Icon("minus-small")),e.push('\n    </div>\n    <div class="filter-control filter-control-add js-add" title="'),e.push(this.Ti("Add")),e.push('">\n      '),e.push(this.Icon("plus-small")),e.push("\n    </div>\n  </div>\n</div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/time_range"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s;e.push('<div class="controls u-positionOrigin js-valueRangeSelector"></div>\n<div class="controls u-positionOrigin">\n  <select class="form-control js-range" name="'),e.push(n(this.attribute.name)),e.push('::range">\n    '),i=this.ranges;for(t in i)s=i[t],e.push('\n      <option value="'),e.push(n(t)),e.push('" '),this.attribute.value&&this.attribute.value.range===t&&e.push("selected"),e.push(">"),e.push(s),e.push("</option>\n    ");e.push("\n  </select>\n  "),e.push(this.Icon("arrow-down","dropdown-arrow")),e.push("\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/time_range_value_selector"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s;e.push('<select class="form-control js-value" name="'),e.push(n(this.attribute.name)),e.push('::value">\n  '),i=this.values;for(t in i)s=i[t],e.push('\n    <option value="'),e.push(n(t)),e.push('" '),this.attribute.value&&this.attribute.value.value.toString()===t.toString()&&e.push("selected"),e.push(">"),e.push(s),e.push("</option>\n  ");e.push("\n</select>\n"),e.push(this.Icon("arrow-down","dropdown-arrow")),e.push("\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/timeplan"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push("<div>\n  <label>"),e.push(this.T("Days")),e.push('\n    <div class="days"></div>\n  </label>\n  <label>'),e.push(this.T("Hours")),e.push('\n    <div class="hours"></div>\n  </label>\n  <label>'),e.push(this.T("Minutes")),e.push('\n    <div class="minutes"></div>\n  </label>\n</div>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/timer"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o,a,l,c,u;e.push('<p>\n  <output class="timer-output js-timerResult"></output>\n</p>\n<div class="select-boxes">\n  <div class="select-box select-box--vertical js-day">\n    <div class="select-box-header">'),e.push(this.T("Day")),e.push("</div>\n    "),l=this.days;for(t in l)i=l[t],e.push('\n      <div data-type="day" class="select-value '),this.attribute.value.days[t]&&e.push("is-selected"),e.push('" data-value="'),e.push(t),e.push('">'),e.push(this.T(i)),e.push('</div>\n      <input type="hidden" class="js-boolean" name="'),e.push(n(this.attribute.name)),e.push("::days::"),e.push(t),e.push('" value="'),this.attribute.value.days[t]?e.push("true"):e.push("false"),e.push('">\n    ');e.push('\n  </div>\n  <div class="select-box select-box--four js-hour">\n    <div data-type="hour" class="select-box-header">'),e.push(this.T("Hour")),e.push("</div>\n    "),c=this.hours;for(s in c)r=c[s],e.push('\n      <div data-type="hour" class="select-value '),this.attribute.value.hours[s]&&e.push("is-selected"),e.push('" data-value="'),e.push(s),e.push('">'),e.push(r),e.push('</div>\n      <input type="hidden" class="js-boolean" name="'),e.push(n(this.attribute.name)),e.push("::hours::"),e.push(s),e.push('" value="'),this.attribute.value.hours[s]?e.push("true"):e.push("false"),e.push('">\n    ');e.push('\n  </div>\n  <div class="select-box select-box--vertical js-minute">\n    <div data-type="minute" class="select-box-header">'),e.push(this.T("Minute")),e.push("</div>\n    "),u=this.minutes;for(o in u)a=u[o],e.push('\n      <div data-type="minute" class="select-value '),this.attribute.value.minutes[o]&&e.push("is-selected"),e.push('" data-value="'),e.push(o),e.push('">'),e.push(a),e.push('</div>\n      <input type="hidden" class="js-boolean" name="'),e.push(n(this.attribute.name)),e.push("::minutes::"),e.push(o),e.push('" value="'),this.attribute.value.minutes[o]?e.push("true"):e.push("false"),e.push('">\n    ');e.push("\n  </div>\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/token"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="token" data-value="'),e.push(n(this.value)),e.push('">\n  <span class="token-label">'),e.push(n(this.name)),e.push('</span>\n  <span class="token-close js-remove">\xd7</span>\n</div>\n')}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/user_permission"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r;for(e.push('<div class="checkbox '),e.push(n(this.attribute["class"])),e.push(' checkbox">\n'),s=this.roles,t=0,i=s.length;t<i;t++)r=s[t],e.push('\n  <label class="inline-label checkbox-replacement">\n    <input type="checkbox" value="'),e.push(n(r.id)),e.push('" name="role_ids" '),this.rolesSelected[r.id]&&e.push("checked"),e.push("/>\n    "),e.push(this.Icon("checkbox","icon-unchecked")),e.push("\n    "),e.push(this.Icon("checkbox-checked","icon-checked")),e.push('\n    <span class="label-text">'),e.push(this.T(r.displayName())),e.push(" "),r.note&&(e.push('- <span class="help-text">'),e.push(this.T(r.note)),e.push("</span>")),e.push("</span>\n  </label>\n");e.push('\n  <div class="js-groups"></div>\n</div>\n')}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/generic/user_permission_group"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o,a,l,c,u;e.push('<div style="padding-left: 18px; padding-top: 10px; width: 95%;" class="js-groupList '),this.hideGroups&&e.push("js-groupListHide hidden"),e.push('">\n  <hr>\n  <table class="settings-list" style="width: 100%;">\n    <thead>\n      <th>'),e.push(this.T("Group")),e.push("\n      "),a=this.groupAccesses;for(s in a)u=a[s],e.push("\n        <th>"),e.push(this.T(u)),e.push("\n      ");for(e.push("\n    <tbody>\n  "),l=this.groups,i=0,r=l.length;i<r;i++){t=l[i],e.push("\n  "),o=[],e.push("\n  "),this.params.group_ids&&this.params.group_ids[t.id]&&(e.push("\n  "),o=this.params.group_ids[t.id],e.push("\n  ")),e.push("\n    <tr>\n      <td>\n        "),e.push(n(t.displayName())),e.push("\n      "),c=this.groupAccesses;for(s in c)u=c[s],e.push('\n        <td>\n        <label class="inline-label checkbox-replacement">\n          <input class="js-groupListItem" type="checkbox" value="'),e.push(n(s)),e.push('" name="group_ids::'),e.push(n(t.id)),e.push('" '),_.contains(o,s)&&e.push("checked"),e.push("/>\n          "),e.push(this.Icon("checkbox","icon-unchecked")),e.push("\n          "),e.push(this.Icon("checkbox-checked","icon-checked")),e.push("\n        </label>\n      ");e.push("\n    </tr>\n  ")}e.push("\n  </table>\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/getting_started/admin"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="main flex vertical centered darkBackground">\n  '),e.push(this.Icon("full-logo","wizard-logo")),e.push('\n  <form class="setup wizard js-admin">\n    <div class="wizard-slide">\n      <h2>'),e.push(this.T("Administrator Account")),e.push('</h2>\n      <div class="wizard-body vertical justified js-admin-form"></div>\n      <div class="wizard-controls center">\n        <a class="btn btn--text btn--secondary" href="#getting_started">'),e.push(this.T("Go Back")),e.push('</a>\n        <button class="btn btn--success align-right">'),e.push(this.T("Create")),e.push("</button>\n      </div>\n    </div>\n  </form>\n</div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/getting_started/agent"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="main flex vertical centered darkBackground">\n  '),e.push(this.Icon("full-logo","wizard-logo")),e.push('\n  <form class="setup wizard js-agent">\n    <div class="wizard-slide">\n      <h2>'),e.push(this.T("Invite Colleagues")),e.push('</h2>\n      <div class="wizard-body vertical justified js-agent-form"></div>\n      <div class="wizard-controls center">\n        <a class="btn btn--primary align-left" href="#getting_started/finish">'),e.push(this.T("Continue")),e.push('</a>\n        <button class="btn btn--success align-right">'),e.push(this.T("Invite")),e.push("</button>\n      </div>\n    </div>\n  </form>\n</div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/getting_started/auto_wizard_enabled"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="main flex vertical centered darkBackground">\n  '),e.push(this.Icon("full-logo","wizard-logo")),e.push('\n  <div class="setup wizard">\n    <div class="wizard-slide">\n      <div class="wizard-body vertical centered">\n        '),e.push(this.T("The auto wizard is enabled, please use the prodvided auto wizard url.")),e.push("\n      </div>\n    </div>\n  </div>\n</div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/getting_started/auto_wizard_failed"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="main flex vertical centered darkBackground">\n  '),e.push(this.Icon("full-logo","wizard-logo")),e.push('\n  <div class="setup wizard">\n    <div class="wizard-slide">\n      <div class="wizard-body vertical centered">\n        '),e.push(this.T(this.message)),e.push("\n      </div>\n    </div>\n  </div>\n</div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/getting_started/auto_wizard_splash"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="main flex vertical centered darkBackground">\n  '),e.push(this.Icon("full-logo","wizard-logo")),e.push("\n</div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/getting_started/base"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="main flex vertical centered darkBackground">\n  '),e.push(this.Icon("full-logo","wizard-logo")),e.push('\n  <form class="setup wizard js-base">\n    <div class="wizard-slide">\n      <h2>'),e.push(this.T("Organization")),e.push('</h2>\n      <div class="wizard-body vertical justified">\n        <fieldset>\n          <div class="form-group">\n            <label>'),e.push(this.T("Organization Name")),e.push('</label>\n            <div class="alert alert--danger hide" role="alert"></div>\n            <input class="form-control" name="organization" placeholder="'),e.push(this.Ti("Company Inc.")),e.push('" value="'),e.push(n(this.organization)),e.push('" required>\n          </div>\n          <div class="form-group">\n            <label>'),e.push(this.T("Logo")),e.push('</label>\n            <div class="alert alert--danger hide" role="alert"></div>\n            <img class="logo-preview" src="'),e.push(n(this.logoUrl)),e.push('">\n            <div class="logo-preview-placeholder">'),e.push(this.T("Your Logo")),e.push('</div>\n            <div class="btn btn--success fileUpload">'),e.push(this.T("Upload")),e.push('<input type="file" class="js-upload" name="logo" accept="image/*"></div>\n          </div>\n          '),this.C("system_online_service")||(e.push('\n          <div class="form-group">\n            <label>'),e.push(this.T("System URL")),e.push('</label>\n            <div class="alert alert--danger hide" role="alert"></div>\n            <input type="text" class="form-control" name="url" value="'),e.push(n(this.url)),e.push('" placeholder="http://zammad.example.com" required>\n            <p class="help-block">'),e.push(this.T("The URL to this installation of Zammad.")),e.push("</p>\n          </div>\n          ")),e.push('\n        </fieldset>\n      </div>\n      <div class="wizard-controls center">\n        <button class="btn btn--primary align-right">'),e.push(this.T("Next")),e.push("</button>\n      </div>\n    </div>\n  </form>\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/getting_started/channel"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r;for(e.push('<div class="main flex vertical centered darkBackground">\n  '),e.push(this.Icon("full-logo","wizard-logo")),e.push('\n  <form class="setup wizard js-channel">\n    <div class="wizard-slide">\n      <h2>'),e.push(this.T("Connect Channels")),e.push('</h2>\n      <div class="wizard-body vertical center">\n        <p class="help-block help-block--center">'),e.push(this.T("Set up the communication channels you want to use with your Zammad.")),e.push('</p>\n        <div class="wizard-buttonList vertical">\n\n          '),r=this.adapters,i=0,s=r.length;i<s;i++)t=r[i],e.push('\n            <a href="'),e.push(n(t.link)),e.push('" class="btn auth_provider auth_provider--wide '),e.push(n(t["class"])),e.push('">\n              <div class="'),e.push(n(t["class"])),e.push(' provider_icon"></div>\n              <div class="provider_name">'),e.push(this.T(t.name)),e.push("</div>\n            </a>\n          ");e.push('\n\n        </div>\n      </div>\n      <div class="wizard-controls center">\n        <a class="btn btn--text btn--secondary" href="#getting_started/email_notification">'),e.push(this.T("Go Back")),e.push('</a>\n        <a class="btn align-right" href="#getting_started/finish">'),e.push(this.T("Skip")),e.push("</a>\n      </div>\n    </div>\n  </form>\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/getting_started/email"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="main flex vertical centered darkBackground">\n  '),e.push(this.Icon("full-logo","wizard-logo")),e.push('\n\n  <form class="setup wizard js-intro">\n    <div class="wizard-slide">\n      <h2>'),e.push(this.T("Email Account")),e.push('</h2>\n      <div class="wizard-body vertical justified">\n        <div class="alert alert--danger hide" role="alert"></div>\n        <fieldset>\n          <div class="form-group">\n            <label>'),e.push(this.T("Full Name")),e.push('</label>\n            <input type="text" class="form-control" value="" name="realname" placeholder="'),e.push(this.Ti("Organization Support")),e.push('" required autocomplete="off">\n          </div>\n          <div class="form-group">\n            <label>'),e.push(this.T("Email")),e.push('</label>\n            <input type="email" class="form-control" value="" name="email" placeholder="'),e.push(this.Ti("support@example.com")),e.push('" required autocomplete="off">\n          </div>\n          <div class="form-group">\n            <label>'),e.push(this.T("Password")),e.push('</label>\n            <input type="password" class="form-control" name="password" value="" required autocomplete="off">\n          </div>\n        </fieldset>\n      </div>\n      <div class="wizard-controls center">\n        <a class="btn btn--text btn--secondary" href="#getting_started/channel">'),e.push(this.T("Go Back")),e.push('</a>\n        <button class="btn btn--primary align-right">'),e.push(this.T("Connect")),e.push('</button>\n      </div>\n    </div>\n  </form>\n\n  <form class="setup wizard hide js-probe">\n    <div class="wizard-slide">\n      <h2>'),e.push(this.T("Email Account")),e.push('</h2>\n      <div class="wizard-body vertical justified">\n        <p class="wizard-loadingText">\n          <span class="loading icon"></span> '),e.push(this.T("Testing")),e.push(' <span class="js-email"></span>\n        </p>\n      </div>\n    </div>\n  </form>\n\n  <form class="setup wizard hide js-test">\n    <div class="wizard-slide">\n      <h2>'),e.push(this.T("Email Account")),e.push('</h2>\n      <div class="wizard-body vertical justified">\n        <p class="wizard-loadingText">\n          <span class="loading icon"></span> '),e.push(this.T("Verifying...")),e.push('\n        </p>\n      </div>\n    </div>\n  </form>\n\n  <form class="setup wizard hide js-verify">\n    <div class="wizard-slide">\n      <h2>'),e.push(this.T("Email Account")),e.push('</h2>\n      <div class="wizard-body vertical justified">\n        <div class="alert alert--danger hide" role="alert"></div>\n        <p class="wizard-loadingText">\n          <span class="loading icon"></span> '),e.push(this.T("Verify sending and receiving")),e.push('\n        </p>\n      </div>\n    </div>\n  </form>\n\n  <form class="setup wizard hide js-inbound">\n    <div class="wizard-slide wizard-slide--large">\n      <h2>'),e.push(this.T("Email Inbound")),e.push('</h2>\n      <div class="wizard-body vertical justified">\n        <div class="alert alert--danger hide" role="alert"></div>\n        <div class="base-inbound-settings"></div>\n      </div>\n      <div class="wizard-controls center">\n        <a class="btn btn--text btn--secondary js-goToSlide" data-slide="js-intro">'),e.push(this.T("Go Back")),e.push('</a>\n        <button class="btn btn--primary align-right">'),e.push(this.T("Continue")),e.push('</button>\n      </div>\n    </div>\n  </form>\n\n  <form class="setup wizard hide js-inbound-acknowledge">\n    <div class="wizard-slide">\n      <h2>'),e.push(this.T("Email Inbound")),e.push('</h2>\n      <div class="wizard-body vertical justified">\n        <div class="alert alert--danger hide" role="alert"></div>\n        <p class="js-message">'),e.push(this.T("We have already found %s email(s) in your mailbox. Zammad will move it all from your mailbox into Zammad.","x")),e.push('</p>\n      </div>\n      <div class="wizard-controls center">\n        <a class="btn btn--text btn--secondary js-goToSlide js-back" data-slide="js-intro">'),e.push(this.T("Go Back")),e.push('</a>\n        <button class="btn btn--primary js-goToSlide js-next align-right" data-slide="js-outbound">'),e.push(this.T("Continue")),e.push('</button>\n      </div>\n    </div>\n  </form>\n\n  <form class="setup wizard hide js-outbound">\n    <div class="wizard-slide">\n      <h2>'),e.push(this.T("Email Outbound")),e.push('</h2>\n      <div class="wizard-body vertical justified">\n        <div class="alert alert--danger hide" role="alert"></div>\n        <div class="base-outbound-type"></div>\n        <div class="base-outbound-settings"></div>\n      </div>\n      <div class="wizard-controls center">\n        <a class="btn btn--text btn--secondary js-goToSlide" data-slide="js-inbound">'),
e.push(this.T("Go Back")),e.push('</a>\n        <button class="btn btn--primary align-right">'),e.push(this.T("Continue")),e.push("</button>\n      </div>\n    </div>\n  </form>\n\n</div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/getting_started/email_notification"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="main flex vertical centered darkBackground">\n  '),e.push(this.Icon("full-logo","wizard-logo")),e.push('\n\n  <form class="setup wizard js-outbound">\n    <div class="wizard-slide">\n      <h2>'),e.push(this.T("Email Notification")),e.push('</h2>\n      <div class="wizard-body vertical justified">\n        <div class="alert alert--danger hide" role="alert"></div>\n        <div class="base-outbound-type"></div>\n        <div class="base-outbound-settings"></div>\n      </div>\n      <div class="wizard-controls center">\n        <a class="btn btn--text btn--secondary" href="#getting_started/base">'),e.push(this.T("Go Back")),e.push('</a>\n        <button class="btn btn--primary align-right">'),e.push(this.T("Continue")),e.push('</button>\n      </div>\n    </div>\n  </form>\n\n  <form class="setup wizard hide js-test">\n    <div class="wizard-slide">\n      <h2>'),e.push(this.T("Email Notification")),e.push('</h2>\n      <div class="wizard-body vertical justified">\n        <p class="wizard-loadingText">\n          <span class="loading icon"></span> '),e.push(this.T("Verifying...")),e.push("\n        </p>\n      </div>\n    </div>\n  </form>\n\n</div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/getting_started/email_pre_configured"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r;if(e.push('<div class="main flex vertical centered darkBackground">\n  '),e.push(this.Icon("full-logo","wizard-logo")),e.push('\n  <form class="setup wizard js-channel">\n    <div class="wizard-slide">\n      <h2>'),e.push(this.T("Connect Channels")),e.push('</h2>\n      <div class="wizard-body vertical center">\n        <p class="help-block help-block--center">'),e.push(this.T("Your Zammad as the following email address.")),e.push("</p>\n        "),this.addresses){for(e.push("\n          "),r=this.addresses,i=0,s=r.length;i<s;i++)t=r[i],e.push("\n          <p>"),e.push(n(t.realname)),e.push(" &lt;"),e.push(n(t.email)),e.push("&gt;</p>\n          ");e.push("\n        ")}e.push('\n        <p class="help-block help-block--center">'),e.push(this.T("If you want to use more email adresses, you can configure them later.")),e.push('</p>\n      </div>\n      <div class="wizard-controls center">\n        <a class="btn btn--text btn--secondary" href="#getting_started/base">'),e.push(this.T("Go Back")),e.push('</a>\n        <a class="btn align-right" href="#getting_started/finish">'),e.push(this.T("Finish")),e.push("</a>\n      </div>\n    </div>\n  </form>\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/getting_started/finish"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="main flex vertical centered darkBackground">\n  '),e.push(this.Icon("full-logo","wizard-logo")),e.push('\n  <form class="setup wizard">\n    <div class="wizard-slide">\n      <h2>'),e.push(this.T("Setup Finished")),e.push('</h2>\n      <div class="wizard-body vertical justified">\n        <p class="wizard-loadingText">\n          <span class="loading icon"></span>'),e.push(this.T("Starting Zammad")),e.push("\n        </p>\n      </div>\n    </div>\n  </form>\n</div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/getting_started/intro"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="main flex vertical centered darkBackground">\n  '),e.push(this.Icon("full-logo","wizard-logo")),e.push('\n  <div class="setup wizard js-start">\n    <div class="wizard-slide">\n      <div class="wizard-body vertical centered">\n        <a class="btn btn--primary" href="#getting_started/admin">'),e.push(this.T("Setup new System")),e.push('</a>\n      </div>\n      <div class="wizard-aside">\n        '),e.push(this.T("Or")),e.push(' <span class="u-clickable u-highlight"><a href="#import">'),e.push(this.T("migrate from another system")),e.push("</a></span>.\n      </div>\n    </div>\n  </div>\n</div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/horizontal_menu"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<style>\nul.menu {\n    list-style-type: none;\n    margin: 0;\n    padding: 0;\n    width: 100%;\n    overflow: hidden;\n    border: 1px solid #e7e7e7;\n    background-color: #f3f3f3;\n}\n\nli {\n    float: left;\n}\n\nli a {\n    display: block;\n    color: #666;\n    text-align: center;\n    padding: 14px 16px;\n    text-decoration: none;\n}\n\nli a:hover:not(.active) {\n    background-color: #ddd;\n}\n\nli a.active {\n    color: white;\n    background-color: #4CAF50;\n}\n</style>\n<ul class="menu">\n  <li><a class="active" href="#home">Home</a></li>\n  <li><a href="#news">News</a></li>\n  <li><a href="#contact">Contact</a></li>\n  <li><a href="#about">About</a></li>\n</ul>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/import/index"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s;e.push('<div class="main flex vertical centered darkBackground">\n  '),e.push(this.Icon("full-logo","wizard-logo")),e.push('\n  <div class="import wizard">\n    <div class="wizard-slide vertical">\n      <h2>'),e.push(this.T("Import from")),e.push('</h2>\n      <div class="wizard-body flex vertical justified">\n          '),s=this.items;for(i in s)t=s[i],e.push('\n            <a href="'),e.push(n(t.url)),e.push('" class="import-source centered '),e.push(n(t["class"])),e.push('">\n              '),t.image?(e.push('\n                <img class="logo" src="'),e.push(n(this.C("image_path")+"/"+t.image)),e.push('" alt="'),e.push(n(t.name)),e.push('" height="37">\n              ')):(e.push("\n                "),e.push(n(t.name)),e.push(" (Beta)\n              ")),e.push("\n            </a>\n          ");e.push('\n      </div>\n      <div class="wizard-controls horizontal center">\n        <a class="btn btn--text btn--secondary" href="#getting_started">'),e.push(this.T("Go Back")),e.push("</a>\n      </div>\n    </div>\n  </div>\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/import/otrs"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="main flex vertical centered darkBackground">\n  '),e.push(this.Icon("full-logo","wizard-logo")),e.push('\n  <div class="import wizard">\n    <div class="wizard-slide vertical" data-slide="otrs-plugin">\n      <h2>'),e.push(this.T("Download %s Migration Plugin","OTRS")),e.push('</h2>\n      <div class="wizard-body flex vertical justified">\n        <p>\n          '),e.push(this.T("Download and install the %s Migration Plugin on your %s instance.","OTRS","OTRS")),e.push(':\n        </p>\n        <a class="btn btn--primary btn--download js-download" target=_blank href="https://addons.znuny.com/api/addon_repos/public/1085/latest" download>'),e.push(this.Icon("download")),e.push(" "),e.push(this.T("Migration Plugin for %s","OTRS 6")),e.push('</a>\n        <a class="btn btn--primary btn--download js-download" target=_blank href="https://addons.znuny.com/api/addon_repos/public/617/latest" download>'),e.push(this.Icon("download")),e.push(" "),e.push(this.T("Migration Plugin for %s","OTRS 5")),e.push('</a>\n        <a class="btn btn--primary btn--download js-download" target=_blank href="https://addons.znuny.com/api/addon_repos/public/383/latest" download>'),e.push(this.Icon("download")),e.push(" "),e.push(this.T("Migration Plugin for %s","OTRS 4")),e.push('</a>\n        <a class="btn btn--primary btn--download js-download" target=_blank href="https://addons.znuny.com/api/addon_repos/public/287/latest" download>'),e.push(this.Icon("download")),e.push(" "),e.push(this.T("Migration Plugin for %s","OTRS 3.3-3.1")),e.push('</a>\n      </div>\n      <div class="wizard-controls horizontal center">\n        <a class="btn btn--text btn--secondary" href="#import">'),e.push(this.T("Go Back")),e.push('</a>\n        <div class="btn btn--primary align-right hide js-otrs-link">'),e.push(this.T("Next")),e.push('</div>\n      </div>\n    </div>\n    <div class="wizard-slide vertical hide" data-slide="otrs-link">\n      <h2>'),e.push(this.T("Link %s","OTRS")),e.push('</h2>\n      <div class="wizard-body flex vertical justified">\n        <p>\n          '),e.push(this.T("Enter the link provided by the plugin at the end of the installation to link the two systems")),e.push(':\n        </p>\n        <div class="form-group">\n          <label for="otrs-link">'),e.push(this.T("Link %s","OTRS")),e.push('</label>\n          <div class="u-positionOrigin">\n            <input type="url" id="otrs-link" class="form-control" placeholder="http://example.com/otrs/public.pl?Action=ZammadMigrator;Key=31337" name="url">\n            <div class="input-feedback centered">\n              <div class="small loading icon"></div>\n              '),e.push(this.Icon("diagonal-cross","icon-error")),e.push("\n              "),e.push(this.Icon("checkmark")),e.push('\n            </div>\n          </div>\n          <div class="error otrs-link-error"></div>\n        </div>\n      </div>\n      <div class="wizard-controls horizontal center">\n        <a class="btn btn--text btn--secondary" href="#import">'),e.push(this.T("Go Back")),e.push('</a>\n        <div class="btn btn--primary align-right hide js-migration-check">'),e.push(this.T("Migrate %s Data","OTRS")),e.push('</div>\n      </div>\n    </div>\n\n    <div class="wizard-slide vertical hide" data-slide="otrs-import">\n      <h2>'),e.push(this.T("%s Migration","OTRS")),e.push('</h2>\n      <div class="alert alert--danger hide js-error" role="alert"></div>\n      <div class="wizard-body flex vertical justified">\n        <table class="progressTable">\n          <tr class="js-config">\n            <td>\n            <td><span>'),e.push(this.T("Configuration")),e.push('</span>\n            <td class="progressTable-progressCell">\n              <div class="horizontal center">\n                <div class="flex"><progress value="1"></progress></div>\n                '),e.push(this.Icon("checkmark")),e.push('\n              </div>\n          </tr>\n          <tr class="js-base">\n            <td><span class="js-done">-</span>/<span class="js-total">-</span>\n            <td><span>'),e.push(this.T("Base Objects")),e.push('</span>\n            <td class="progressTable-progressCell">\n              <div class="horizontal center">\n                <div class="flex"><progress max="42" value="42"></progress></div>\n                '),e.push(this.Icon("checkmark")),e.push('\n              </div>\n          </tr>\n          <tr class="js-user">\n            <td><span class="js-done">-</span>/<span class="js-total">-</span>\n            <td><span>'),e.push(this.T("Users")),e.push('</span>\n            <td class="progressTable-progressCell">\n              <div class="horizontal center">\n                <div class="flex"><progress max="42" value="42"></progress></div>\n                '),e.push(this.Icon("checkmark")),e.push('\n              </div>\n          </tr>\n          <tr class="js-ticket">\n            <td><span class="js-done">-</span>/<span class="js-total">-</span>\n            <td><span>'),e.push(this.T("Tickets")),e.push('</span>\n            <td class="progressTable-progressCell">\n              <div class="horizontal center">\n                <div class="flex"><progress max="134318" value="134318"></progress></div>\n                '),e.push(this.Icon("checkmark")),e.push('\n              </div>\n          </tr>\n        </table>\n      </div>\n      <div class="wizard-controls horizontal center">\n        <a href="#" class="btn btn--primary align-right hide js-finished">'),e.push(this.T("done")),e.push('</a>\n      </div>\n    </div>\n\n    <div class="wizard-slide vertical hide" data-slide="otrs-import-notice">\n      <h2>'),e.push(this.T("Notice")),e.push('</h2>\n      <div class="wizard-body flex vertical justified">\n        <p class="js-otrsProcesses hide">'),e.push(this.T("We detected OTRS BPM processes which can't get imported into Zammad, since we currently don't support these kind of workflows.")),e.push('</p>\n        <p class="js-otrsDynamicFields hide">'),e.push(this.T("We found a lot of dynamic fields which are not common in Zammad, as we follow a different approach to ticket attributes. Zammad uses also tags in addition to custom fields to classify tickets. This difference can create a new philosophy of your ticket attributes / tags compared to your current use of dynamic fields in OTRS.")),e.push('</p>\n      </div>\n      <div class="wizard-controls horizontal center">\n        <a class="btn btn--text btn--secondary" href="#import">'),e.push(this.T("Go Back")),e.push('</a>\n        <a href="#" class="btn btn--primary align-right js-migration-start">'),e.push(this.T("Continue anyway")),e.push("</a>\n      </div>\n    </div>\n\n  </div>\n</div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/import/zendesk"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="main flex vertical centered darkBackground">\n  '),e.push(this.Icon("full-logo","wizard-logo")),e.push('\n  <div class="import wizard">\n    <div class="wizard-slide vertical" data-slide="zendesk-url">\n      <h2>'),e.push(this.T("%s URL","Zendesk")),e.push('</h2>\n      <div class="wizard-body flex vertical justified">\n        <p>\n          '),e.push(this.T("Enter the URL of your %s system","Zendesk")),e.push(':\n        </p>\n        <div class="form-group">\n          <label for="zendesk-url">'),e.push(this.T("%s URL","Zendesk")),e.push('</label>\n          <div class="u-positionOrigin">\n            <input type="url" id="zendesk-url" class="form-control" placeholder="https://example.zendesk.com/" name="zendesk-url">\n            <div class="input-feedback centered">\n              <div class="small loading icon"></div>\n              '),e.push(this.Icon("diagonal-cross","icon-error")),e.push("\n              "),e.push(this.Icon("checkmark")),e.push('\n            </div>\n          </div>\n          <div class="error zendesk-url-error"></div>\n        </div>\n      </div>\n      <div class="wizard-controls horizontal center">\n        <a class="btn btn--text btn--secondary" href="#import">'),e.push(this.T("Go Back")),e.push('</a>\n        <div class="btn btn--primary align-right hide js-zendesk-credentials" data-target="zendesk-credentials">'),e.push(this.T("Enter credentials")),e.push('</div>\n      </div>\n    </div>\n\n    <div class="wizard-slide vertical hide" data-slide="zendesk-credentials">\n      <h2>'),e.push(this.T("%s credentials","Zendesk")),e.push('</h2>\n      <div class="wizard-body flex vertical justified">\n        <p>\n          <a class="js-zendeskUrlApiToken" href="#" target="_blank">'),e.push(this.T("Enter your email address and the %s API token gained from your admin interface.","Zendesk")),e.push("</a>\n        </p>\n        <p>\n          "),e.push(this.T("Attention: These will be your login password after the import is completed.")),e.push('\n        </p>\n        <div class="form-group">\n          <label for="zendesk-email">'),e.push(this.T("Email")),e.push('</label>\n          <div class="u-positionOrigin">\n            <input type="email" id="zendesk-email" class="form-control" placeholder="admin@example.com" name="zendesk-email">\n          </div>\n          <label for="zendesk-api-token">'),e.push(this.T("API token")),e.push('</label>\n          <div class="u-positionOrigin">\n            <input type="email" id="zendesk-api-token" class="form-control" placeholder="XYZ3133723421111" name="zendesk-api-token">\n            <div class="input-feedback centered">\n              <div class="small loading icon"></div>\n              '),e.push(this.Icon("diagonal-cross","icon-error")),e.push("\n              "),e.push(this.Icon("checkmark")),e.push('\n            </div>\n          </div>\n          <div class="error zendesk-api-token-error"></div>\n        </div>\n      </div>\n      <div class="wizard-controls horizontal center">\n        <a class="btn btn--text btn--secondary" href="#import">'),e.push(this.T("Go Back")),e.push('</a>\n        <div class="btn btn--primary align-right hide js-migration-start" data-target="zendesk-start-migration">'),e.push(this.T("Migrate %s Data","Zendesk")),e.push('</div>\n      </div>\n    </div>\n\n    <div class="wizard-slide vertical hide" data-slide="zendesk-import">\n      <h2>'),e.push(this.T("%s Migration","Zendesk")),e.push('</h2>\n      <div class="alert alert--danger hide js-error" role="alert"></div>\n      <div class="alert alert--info hide js-ticket-count-info" role="alert">'),e.push(this.T("There are more than 1000 tickets in the Zendesk system. Due to API rate limit restrictions we can't get the exact number of tickets yet and have to fetch them in batches of 1000. This might take some time, better grab a cup of coffee. The total number of tickets gets updated as soon as the currently known number is surpassed.")),e.push('</div>\n      <div class="wizard-body flex vertical justified">\n        <table class="progressTable">\n          <tr class="js-groups">\n            <td><span class="js-done">-</span>/<span class="js-total">-</span>\n            <td><span>'),e.push(this.T("Groups")),e.push('</span>\n            <td class="progressTable-progressCell">\n              <div class="horizontal center">\n                <div class="flex"><progress max="42" value="42"></progress></div>\n                '),e.push(this.Icon("checkmark")),e.push('\n              </div>\n          </tr>\n          <tr class="js-organizations">\n            <td><span class="js-done">-</span>/<span class="js-total">-</span>\n            <td><span>'),e.push(this.T("Organizations")),e.push('</span>\n            <td class="progressTable-progressCell">\n              <div class="horizontal center">\n                <div class="flex"><progress max="42" value="42"></progress></div>\n                '),e.push(this.Icon("checkmark")),e.push('\n              </div>\n          </tr>\n          <tr class="js-users">\n            <td><span class="js-done">-</span>/<span class="js-total">-</span>\n            <td><span>'),e.push(this.T("Users")),e.push('</span>\n            <td class="progressTable-progressCell">\n              <div class="horizontal center">\n                <div class="flex"><progress max="42" value="42"></progress></div>\n                '),e.push(this.Icon("checkmark")),e.push('\n              </div>\n          </tr>\n          <tr class="js-tickets">\n            <td><span class="js-done">-</span>/<span class="js-total">-</span>\n            <td><span>'),e.push(this.T("Tickets")),e.push('</span>\n            <td class="progressTable-progressCell">\n              <div class="horizontal center">\n                <div class="flex"><progress max="42" value="42"></progress></div>\n                '),e.push(this.Icon("checkmark")),e.push('\n              </div>\n          </tr>\n        </table>\n      </div>\n      <div class="wizard-controls horizontal center">\n        <a href="#" class="btn btn--primary align-right hide js-finished">'),e.push(this.T("done")),e.push("</a>\n      </div>\n    </div>\n\n  </div>\n</div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/integration/base"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,n,i,s;if(e.push('<div class="page-header">\n  <div class="page-header-title">\n    <div class="zammad-switch zammad-switch--small js-switch">\n       <input name="'),e.push(this.feature),e.push('" type="checkbox" id="setting-switch" '),this.featureEnabled&&e.push("checked"),e.push('>\n       <label for="setting-switch"></label>\n    </div>\n    <h1>'),e.push(this.T(this.header)),e.push('</h1>\n  </div>\n</div>\n<div class="page-content">\n  '),this.description){for(e.push("\n    "),s=this.description,t=0,i=s.length;t<i;t++)n=s[t],e.push("\n      <p>"),e.push(this.T.apply(this,n)),e.push("</p>\n    ");e.push("\n  ")}e.push('\n  <div class="js-form"></div>\n  <div class="js-scriptSnipped"></div>\n  <div class="js-log"></div>\n</div>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/integration/clearbit"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o,a,l,c;for(e.push('<form>\n\n  <div class="settings-entry">\n    <table class="settings-list js-baseSync" style="width: 100%;">\n      <thead>\n        <tr>\n          <th width="15%">'),e.push(this.T("Title")),e.push('\n          <th width="50%">'),e.push(this.T("Value")),e.push('\n          <th width="35%">'),e.push(this.T("Description")),e.push("\n      </thead>\n      <tbody>\n"),r=this.settings,i=0,s=r.length;i<s;i++)l=r[i],e.push("\n        <tr>\n          <td>"),e.push(this.T(l.display)),e.push('\n          <td data-name="'),e.push(l.name),e.push('">\n          <td><p class="help-text">'),e.push(this.RichText(l.note)),e.push("</p>\n");e.push("\n      </tbody>\n    </table>\n  </div>\n\n  <h2>"),e.push(this.T("Mapping")),e.push("</h2>\n\n  <p>"),e.push(this.T("What values of %s should be synced to users.","Clearbit")),e.push('</p>\n\n  <div class="settings-entry">\n    <table class="settings-list js-userSync" style="width: 100%;">\n      <thead>\n        <tr>\n          <th width="45%">'),e.push(this.T("Clearbit")),e.push('\n          <th width="45%">'),e.push(this.T("Zammad")),e.push('\n          <th width="10%">'),e.push(this.T("Action")),e.push("\n      </thead>\n      <tbody>\n"),o=this.config.user_sync;for(c in o)t=o[c],e.push('\n        <tr class="js-row">\n          <td class="settings-list-control-cell"><input name="source" value="'),e.push(n(c)),e.push('" class="form-control form-control--small js-summary">\n          <td class="settings-list-control-cell"><input name="destination" value="'),e.push(n(t)),e.push('" class="form-control form-control--small js-summary">\n          <td class="settings-list-row-control"><div class="btn btn--text js-remove">'),e.push(this.Icon("trash")),e.push(" "),e.push(this.T("Remove")),e.push("</div>\n");e.push('\n        <tr class="js-new">\n          <td class="settings-list-control-cell"><input name="source" value="" placeholder="person.attribute" class="form-control form-control--small js-summary">\n          <td class="settings-list-control-cell"><input name="destination" value="" placeholder="user.attribute" class="form-control form-control--small js-summary">\n          <td class="settings-list-row-control"><div class="btn btn--text btn--create js-add">'),e.push(this.Icon("plus-small")),e.push(" "),e.push(this.T("Add")),e.push("</div>\n      </tbody>\n    </table>\n  </div>\n\n  <p>"),e.push(this.T("What values of %s should be synced to organization.","Clearbit")),e.push('</p>\n\n  <div class="settings-entry">\n    <table class="settings-list js-organizationSync" style="width: 100%;">\n      <thead>\n        <tr>\n          <th width="45%">'),e.push(this.T("Clearbit")),e.push('\n          <th width="45%">'),e.push(this.T("Zammad")),e.push('\n          <th width="10%">'),e.push(this.T("Action")),e.push("\n      </thead>\n      <tbody>\n"),a=this.config.organization_sync;for(c in a)t=a[c],e.push('\n        <tr class="js-row">\n          <td class="settings-list-control-cell"><input name="source" value="'),e.push(n(c)),e.push('" class="form-control form-control--small js-summary">\n          <td class="settings-list-control-cell"><input name="destination" value="'),e.push(n(t)),e.push('" class="form-control form-control--small js-summary">\n          <td class="settings-list-row-control"><div class="btn btn--text js-remove">'),e.push(this.Icon("trash")),e.push(" "),e.push(this.T("Remove")),e.push("</div>\n");e.push('\n        <tr class="js-new">\n          <td class="settings-list-control-cell"><input name="source" value="" placeholder="company.attribute" class="form-control form-control--small js-summary">\n          <td class="settings-list-control-cell"><input name="destination" value="" placeholder="organization.attribute" class="form-control form-control--small js-summary">\n          <td class="settings-list-row-control"><div class="btn btn--text btn--create js-add">'),e.push(this.Icon("plus-small")),e.push(" "),e.push(this.T("Add")),e.push('</div>\n      </tbody>\n    </table>\n  </div>\n  <button type="submit" class="btn btn--primary js-submit">'),e.push(this.T("Save")),e.push("</button>\n</form>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/integration/cti"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o,a,l;for(e.push("<form>\n\n  <h2>"),e.push(this.T("Settings")),e.push("</h2>\n\n  <p>"),e.push(this.T("You need to configure the Zammad endpoints in the %s","PBX")),e.push(':<p>\n\n  <div class="settings-entry">\n    <table class="settings-list" style="width: 100%;">\n      <thead>\n        <tr>\n          <th width="20%">'),e.push(this.T("Type")),e.push('\n          <th width="80%">'),e.push(this.T("URL")),e.push('\n      </thead>\n      <tbody>\n        <tr>\n          <td class="settings-list-row-control">'),e.push(this.T("Endpoint")),e.push('\n          <td class="settings-list-control-cell"><input type="url" class="form-control form-control--small js-select" readonly value="'),e.push(this.C("http_type")),e.push("://"),e.push(this.C("fqdn")),e.push("/api/v1/cti/"),e.push(n(this.cti_token)),e.push('">\n      </tbody>\n    </table>\n  </div>\n\n  <h2>'),e.push(this.T("Inbound")),e.push("</h2>\n\n  <p>"),e.push(this.T("Blocked caller ids based on sender caller id.")),e.push('\n\n  <div class="settings-entry">\n    <table class="settings-list js-inboundBlockCallerId" style="width: 100%;">\n      <thead>\n        <tr>\n          <th width="50%">'),e.push(this.T("Caller id to block")),e.push('\n          <th width="40%">'),e.push(this.T("Note")),e.push('\n          <th width="10%">'),e.push(this.T("Action")),e.push("\n      </thead>\n      <tbody>\n"),o=this.config.inbound.block_caller_ids,t=0,s=o.length;t<s;t++)l=o[t],e.push('\n        <tr class="js-row">\n          <td class="settings-list-control-cell"><input name="caller_id" value="'),e.push(n(l.caller_id)),e.push('" class="form-control form-control--small js-summary">\n          <td class="settings-list-control-cell"><input name="note" value="'),e.push(n(l.note)),e.push('" class="form-control form-control--small js-summary">\n          <td class="settings-list-row-control"><div class="btn btn--text js-remove">'),e.push(this.Icon("trash")),e.push(" "),e.push(this.T("Remove")),e.push("</div>\n");for(e.push('\n        <tr>\n          <td class="settings-list-control-cell"><input name="caller_id" value="" placeholder="4930609854189" class="form-control form-control--small js-summary">\n          <td class="settings-list-control-cell"><input name="note" value="" placeholder="'),e.push(this.Ti("my onw note")),e.push('" class="form-control form-control--small js-summary">\n          <td class="settings-list-row-control"><div class="btn btn--text btn--create js-add">'),e.push(this.Icon("plus-small")),e.push(" "),e.push(this.T("Add")),e.push("</div>\n      </tbody>\n    </table>\n  </div>\n\n  <h2>"),e.push(this.T("Outbound")),e.push("</h2>\n\n  <p>"),e.push(this.T("Set caller id of outbound calls based on destination caller id.")),e.push('\n\n  <div class="settings-entry js-outboundRouting">\n    <table class="settings-list" style="width: 100%;">\n      <thead>\n        <tr>\n          <th width="30%">'),e.push(this.T("Destination caller id")),e.push('\n          <th width="30%">'),e.push(this.T("Set outbound caller id")),e.push('\n          <th width="30%">'),e.push(this.T("Note")),e.push('\n          <th width="10%">'),e.push(this.T("Action")),e.push("\n      </thead>\n      <tbody>\n"),a=this.config.outbound.routing_table,i=0,r=a.length;i<r;i++)l=a[i],e.push('\n        <tr class="js-row">\n          <td class="settings-list-control-cell"><input name="dest" value="'),e.push(n(l.dest)),e.push('" class="form-control form-control--small js-summary">\n          <td class="settings-list-control-cell"><input name="caller_id" value="'),e.push(n(l.caller_id)),e.push('" class="form-control form-control--small js-summary">\n          <td class="settings-list-control-cell"><input name="note" value="'),e.push(n(l.note)),e.push('" class="form-control form-control--small js-summary">\n          <td class="settings-list-row-control"><div class="btn btn--text js-remove">'),e.push(this.Icon("trash")),e.push(" "),e.push(this.T("Remove")),e.push("</div>\n")
;e.push('\n        <tr>\n          <td class="settings-list-control-cell"><input name="dest" value="" placeholder="49* or 3230123456789" class="form-control form-control--small js-summary">\n          <td class="settings-list-control-cell"><input name="caller_id" value="" placeholder="4930609854189" class="form-control form-control--small js-summary">\n          <td class="settings-list-control-cell"><input name="note" value="" placeholder="'),e.push(this.Ti("my onw note")),e.push('" class="form-control form-control--small js-summary">\n          <td class="settings-list-row-control"><div class="btn btn--text btn--create js-add">'),e.push(this.Icon("plus-small")),e.push(" "),e.push(this.T("Add")),e.push("</div>\n      </tbody>\n    </table>\n  </div>\n\n  <p>"),e.push(this.T("Default caller id.")),e.push('\n\n  <div class="settings-entry">\n    <table class="settings-list" style="width: 100%;">\n      <thead>\n        <tr>\n          <th width="50%">'),e.push(this.T("Default caller id")),e.push('\n          <th width="50%">'),e.push(this.T("Note")),e.push('\n      </thead>\n      <tbody>\n        <tr>\n          <td class="settings-list-control-cell"><input name="default_caller_id" value="'),e.push(n(this.config.outbound.default_caller_id)),e.push('" placeholder="4930609854189" class="form-control form-control--small js-summary">\n          <td class="settings-list-row-control">'),e.push(this.T("Default caller id for outbound calls.")),e.push('\n      </tbody>\n    </table>\n  </div>\n\n  <button type="submit" class="btn btn--primary js-submit">'),e.push(this.T("Save")),e.push("</button>\n</form>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/integration/exchange"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o,a,l;if(e.push('<div class="js-lastImport"></div>\n<div class="js-notConfigured">\n  <p>'),e.push(this.T("No %s configured.","Exchange")),e.push('</p>\n  <button type="submit" class="btn btn--primary js-wizard">'),e.push(this.T("Configure")),e.push('</button>\n</div>\n<div class="js-summary hide">\n  <h2>'),e.push(this.T("Settings")),e.push('</h2>\n  <table class="settings-list" style="width: 100%;">\n    <thead>\n      <tr>\n        <th width="30%">'),e.push(this.T("Name")),e.push('\n        <th width="70%">'),e.push(this.T("Value")),e.push('\n    </thead>\n    <tbody>\n      <tr>\n        <td class="settings-list-row-control">'),e.push(this.T("Endpoint")),e.push('\n        <td class="settings-list-row-control">'),e.push(n(this.config.endpoint)),e.push('\n      <tbody>\n        <tr>\n          <td class="settings-list-row-control">'),e.push(this.T("User")),e.push('\n          <td class="settings-list-row-control">'),e.push(n(this.config.user)),e.push('\n        <tr>\n          <td class="settings-list-row-control">'),e.push(this.T("Password")),e.push('\n          <td class="settings-list-row-control">'),e.push(n(this.M(this.config.password))),e.push("\n    </tbody>\n  </table>\n\n  <h2>"),e.push(this.T("Mapping")),e.push("</h2>\n\n  <h3>"),e.push(this.T("Folders")),e.push("</h3>\n  "),_.isEmpty(this.folders))e.push('\n    <table class="settings-list settings-list--stretch settings-list--placeholder">\n      <thead><tr><th>'),e.push(this.T("No Entries")),e.push("\n    </table>\n  ");else{for(e.push('\n    <table class="settings-list" style="width: 100%;">\n      <thead>\n        <tr>\n          <th>'),e.push(this.T("Folder")),e.push("\n        "),o=this.folders,i=0,r=o.length;i<r;i++)t=o[i],e.push('\n          <tr>\n            <td class="settings-list-row-control">'),e.push(n(t)),e.push("\n        ");e.push("\n      </thead>\n      <tbody>\n    </table>\n  ")}if(e.push("\n\n  <h3>"),e.push(this.T("User")),e.push("</h3>\n  "),_.isEmpty(this.config.attributes))e.push('\n    <table class="settings-list settings-list--stretch settings-list--placeholder">\n      <thead><tr><th>'),e.push(this.T("No Entries")),e.push("\n    </table>\n  ");else{e.push('\n    <table class="settings-list" style="width: 100%;">\n      <thead>\n        <tr>\n          <th width="40%">'),e.push(this.T("Exchange")),e.push('\n          <th width="60%">'),e.push(this.T("Zammad")),e.push("\n        "),a=this.config.attributes;for(s in a)l=a[s],e.push('\n          <tr>\n            <td class="settings-list-row-control">'),e.push(n(s)),e.push('\n            <td class="settings-list-row-control">'),e.push(n(l)),e.push("\n        ");e.push("\n      </thead>\n      <tbody>\n    </table>\n  ")}e.push('\n\n  <button type="submit" class="btn btn--primary js-wizard">'),e.push(this.T("Change")),e.push("</button>\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/integration/exchange_certificate_issue"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<form class="modal-content setup wizard hide '),e.push(n(this.wizardClass)),e.push('">\n  <input type="hidden" name="disable_ssl_verify" value="1">\n  <input type="hidden" name="endpoint" value="'),e.push(n(this.endpoint)),e.push('">\n  <input type="hidden" name="user" value="'),e.push(n(this.user)),e.push('">\n  <input type="hidden" name="password" value="'),e.push(n(this.password)),e.push('">\n  <div class="modal-header">\n    <div class="modal-close js-close">\n      '),e.push(this.Icon("diagonal-cross")),e.push('\n    </div>\n    <h1 class="modal-title">'),e.push(this.T("Your connection is not private")),e.push('</h1>\n  </div>\n  <div class="modal-body">\n    <div class="wizard-body vertical">\n      <p>'),e.push(this.T('The certificate of the domain |%s| could not be verified. This may allow hackers to steal your credentials. If you are sure that you are using a self-signed certificate, you can press "Proceed". Otherwise, please "Cancel".',this.domain)),e.push('</p>\n    </div>\n  </div>\n  <div class="modal-footer">\n    <div class="modal-leftFooter">\n      <button class="btn btn--text btn--danger btn--secondary js-submit">'),e.push(this.T("Proceed")),e.push('</button>\n    </div>\n    <div class="modal-rightFooter">\n      <a class="btn btn--primary align-right js-cancelSsl">'),e.push(this.T("Cancel")),e.push("</a>\n    </div>\n  </div>\n</form>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/integration/exchange_last_import"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s;if(e.push('<div class="box box--message">\n  <h2>'),e.push(this.T("Last sync")),e.push("</h2>\n  "),_.isEmpty(this.job.started_at))e.push("\n    "),this.job.result&&this.job.result.error?(e.push('\n        <div class="alert alert--danger" role="alert">'),e.push(this.T("An error occurred: %s",this.job.result.error)),e.push("</div>\n    ")):this.job.result&&this.job.result.info?(e.push('\n        <div class="alert alert--info" role="alert">'),e.push(this.T("Info: %s",this.job.result.info)),e.push("</div>\n    ")):(e.push("\n      <p>"),e.push(this.T("Job is waiting to get started...")),e.push("</p>\n    ")),e.push("\n  ");else{if(e.push("\n    "),this.job.finished_at?(e.push("\n      <p>"),e.push(this.Ttimestamp(this.job.started_at)),e.push(" - "),e.push(this.Ttimestamp(this.job.finished_at)),e.push("</p>\n      "),this.job.result&&this.job.result.error?(e.push('\n        <div class="alert alert--danger" role="alert">'),e.push(this.T("An error occurred: %s",this.job.result.error)),e.push("</div>\n      ")):this.job.result&&this.job.result.info&&(e.push('\n        <div class="alert alert--info" role="alert">'),e.push(this.T("Info: %s",this.job.result.info)),e.push("</div>\n      ")),e.push("\n    ")):(e.push("\n      "),this.job.result&&this.job.result.error?(e.push("\n        <p>"),e.push(this.Ttimestamp(this.job.started_at)),e.push('</p>\n        <div class="alert alert--danger" role="alert">'),e.push(this.T("An error occurred: %s",this.job.result.error)),e.push("</div>\n      ")):this.job.result&&!this.job.result.sum?(e.push("\n        <p>"),e.push(this.Ttimestamp(this.job.started_at)),e.push(" - "),e.push(this.T("Counting entries. This may take a while.")),e.push("</p>\n      ")):(e.push("\n        <p>"),e.push(this.Ttimestamp(this.job.started_at)),e.push(" - "),e.push(this.T("Running...")),e.push('</p>\n        <div class="flex">\n          <progress max="'),e.push(n(this.job.result.total)),e.push('" value="'),e.push(n(this.job.result.sum)),e.push('"></progress>\n        </div>\n      ')),e.push("\n    ")),e.push("\n    "),!_.isEmpty(this.job.result)&&this.job.result.sum){if(e.push("\n      <ul>\n        <li>"),e.push(this.T("%s user to %s user","Exchange","Zammad")),e.push(" ("),e.push(n(this.job.result.sum)),e.push("/"),e.push(n(this.job.result.total)),e.push("):\n          <ul>\n            <li>"),e.push(this.T("Users")),e.push(": "),e.push(n(this.job.result.created)),e.push(" "),e.push(this.T("created")),e.push(", "),e.push(n(this.job.result.updated)),e.push(" "),e.push(this.T("updated")),e.push(", "),e.push(n(this.job.result.unchanged)),e.push(" "),e.push(this.T("untouched")),e.push(", "),e.push(n(this.job.result.skipped)),e.push(" "),e.push(this.T("skipped")),e.push(", "),e.push(n(this.job.result.failed)),e.push(" "),e.push(this.T("failed")),e.push("\n          </ul>\n          </li>\n          "),!_.isEmpty(this.job.result.folders)){e.push("\n            <li>"),e.push(this.T("%s folders","Exchange")),e.push(":\n              <ul>\n                "),i=this.job.result.folders;for(t in i)s=i[t],e.push("\n                  <li>"),e.push(t),e.push(": "),e.push(n(s.created)),e.push(" "),e.push(this.T("created")),e.push(", "),e.push(n(s.updated)),e.push(" "),e.push(this.T("updated")),e.push(", "),e.push(n(s.unchanged)),e.push(" "),e.push(this.T("untouched")),e.push(", "),e.push(n(s.failed)),e.push(" "),e.push(this.T("failed")),e.push("\n                ");e.push("\n              </ul>\n            </li>\n          ")}e.push("\n      </ul>\n    ")}e.push("\n    "),this.job.finished_at&&(e.push('\n      <button type="submit" class="btn btn--primary js-start-sync">'),e.push(this.T("Start new")),e.push("</button>\n    ")),e.push("\n  ")}e.push("\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/integration/exchange_summary"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s;if(e.push("<ul>\n  <li>"),e.push(this.T("%s user to %s user","Exchange","Zammad")),e.push(" ("),e.push(n(this.job.result.total)),e.push("):\n    <ul>\n      <li>"),e.push(this.T("Users")),e.push(": "),e.push(n(this.job.result.created)),e.push(" "),e.push(this.T("created")),e.push(", "),e.push(n(this.job.result.updated)),e.push(" "),e.push(this.T("updated")),e.push(", "),e.push(n(this.job.result.unchanged)),e.push(" "),e.push(this.T("untouched")),e.push(", "),e.push(n(this.job.result.skipped)),e.push(" "),e.push(this.T("skipped")),e.push(", "),e.push(n(this.job.result.failed)),e.push(" "),e.push(this.T("failed")),e.push("\n    </ul>\n  </li>\n  "),!_.isEmpty(this.job.result.folders)){e.push("\n    <li>"),e.push(this.T("%s folders","Exchange")),e.push(":\n      <ul>\n        "),i=this.job.result.folders;for(t in i)s=i[t],e.push("\n          <li>"),e.push(t),e.push(": "),e.push(n(s.created)),e.push(" "),e.push(this.T("created")),e.push(", "),e.push(n(s.updated)),e.push(" "),e.push(this.T("updated")),e.push(", "),e.push(n(s.unchanged)),e.push(" "),e.push(this.T("untouched")),e.push(", "),e.push(n(s.failed)),e.push(" "),e.push(this.T("failed")),e.push("\n        ");e.push("\n      </ul>\n    </li>\n  ")}e.push("\n</ul>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/integration/exchange_user_attribute_row"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<tr class="js-entry">\n  <td style="max-width: 240px" class="settings-list-control-cell js-exchangeAttribute">\n  <td class="settings-list-control-cell js-userAttribute">\n  <td class="settings-list-row-control">\n    <div class="btn btn--text js-remove">\n      '),e.push(this.Icon("trash")),e.push(" "),e.push(this.T("Remove")),e.push("\n    </div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/integration/exchange_wizard"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="modal-dialog">\n\n  <form class="modal-content setup wizard js-discover">\n    <div class="modal-header">\n      <div class="modal-close js-close">\n        '),e.push(this.Icon("diagonal-cross")),e.push('\n      </div>\n      <h1 class="modal-title">'),e.push(this.T("Exchange")),e.push(" "),e.push(this.T("Configuration")),e.push('</h1>\n    </div>\n    <div class="modal-body">\n      <div class="wizard-body vertical justified">\n        <div class="alert alert--danger hide" role="alert"></div>\n        <table class="settings-list" style="width: 100%;">\n          <thead>\n            <tr>\n              <th width="30%">'),e.push(this.T("Name")),e.push('\n              <th width="70%">'),e.push(this.T("Value")),e.push('\n          </thead>\n          <tbody>\n            <tr>\n              <td class="settings-list-row-control">'),e.push(this.T("User")),e.push('\n              <td class="settings-list-control-cell"><input type="text" name="user" class="form-control form-control--small js-user" value="" placeholder="user@your-exchange.tld" autocomplete="off" required>\n            <tr>\n              <td class="settings-list-row-control">'),e.push(this.T("Password")),e.push('\n              <td class="settings-list-control-cell"><input type="password" name="password" class="form-control form-control--small js-password" value="" placeholder="" autocomplete="new-password" required>\n          </tbody>\n        </table>\n      </div>\n    </div>\n    <div class="modal-footer">\n      <div class="modal-rightFooter">\n        <button class="btn btn--primary align-right js-submit">'),e.push(this.T("Connect")),e.push('</button>\n      </div>\n    </div>\n  </form>\n\n  <div class="js-certificateIssuePlaceholder"></div>\n\n  <form class="modal-content setup wizard hide js-connect">\n    <div class="modal-header">\n      <div class="modal-close js-close">\n        '),e.push(this.Icon("diagonal-cross")),e.push('\n      </div>\n      <h1 class="modal-title">'),e.push(this.T("Exchange")),e.push(" "),e.push(this.T("Configuration")),e.push('</h1>\n    </div>\n    <div class="modal-body">\n      <div class="wizard-body vertical justified">\n        <p class="wizard-loadingText">\n          <span class="loading icon"></span> '),e.push(this.T("Connecting ...")),e.push('\n        </p>\n      </div>\n    </div>\n    <div class="modal-footer"></div>\n  </form>\n\n  <form class="modal-content setup wizard hide js-bind">\n    <div class="modal-header">\n      <div class="modal-close js-close">\n        '),e.push(this.Icon("diagonal-cross")),e.push('\n      </div>\n      <h1 class="modal-title">'),e.push(this.T("Exchange")),e.push(" "),e.push(this.T("Configuration")),e.push('</h1>\n    </div>\n    <div class="modal-body">\n      <div class="wizard-body vertical justified">\n        <div class="alert alert--danger hide" role="alert"></div>\n        <table class="settings-list" style="width: 100%;">\n          <thead>\n            <tr>\n              <th width="30%">'),e.push(this.T("Name")),e.push('\n              <th width="70%">'),e.push(this.T("Value")),e.push('\n          </thead>\n          <tbody>\n            <tr>\n              <td class="settings-list-row-control">'),e.push(this.T("Endpoint")),e.push('\n              <td class="settings-list-control-cell"><input type="text" name="endpoint" class="form-control form-control--small" value="" placeholder="https://outlook.office365.com/EWS/Exchange.asmx" autocomplete="off" required>\n\n            <tr>\n              <td class="settings-list-row-control">'),e.push(this.T("User")),e.push('\n              <td class="settings-list-control-cell"><input type="text" name="user" class="form-control form-control--small js-user" value="" placeholder="" autocomplete="off" required>\n            <tr>\n              <td class="settings-list-row-control">'),e.push(this.T("Password")),e.push('\n              <td class="settings-list-control-cell"><input type="password" name="password" class="form-control form-control--small js-password" value="" placeholder="" autocomplete="new-password" required>\n          </tbody>\n        </table>\n      </div>\n    </div>\n    <div class="modal-footer">\n      <div class="modal-rightFooter">\n        <button class="btn btn--primary align-right js-submit">'),e.push(this.T("Connect")),e.push('</button>\n      </div>\n    </div>\n  </form>\n\n  <form class="modal-content setup wizard hide js-folders">\n    <div class="modal-header">\n      <div class="modal-close js-close">\n        '),e.push(this.Icon("diagonal-cross")),e.push('\n      </div>\n      <h1 class="modal-title">'),e.push(this.T("Exchange")),e.push(" "),e.push(this.T("Folders")),e.push('</h1>\n    </div>\n    <div class="modal-body">\n      <div class="wizard-body vertical justified">\n        <div class="alert alert--danger hide" role="alert"></div>\n\n        <div class="column_select form-group">\n            <div class="formGroup-label">\n                <label for="folders">'),e.push(this.T("Import %s","Folders")),e.push('</label>\n            </div>\n            <div class="controls js-foldersSelect">\n            </div>\n        </div>\n\n      </div>\n    </div>\n    <div class="modal-footer">\n      <div class="modal-rightFooter">\n        <a class="btn btn--text btn--secondary js-goToSlide align-left" data-slide="js-bind">'),e.push(this.T("Go Back")),e.push('</a>\n      </div>\n      <div class="modal-rightFooter">\n        <button class="btn btn--primary align-right js-submitTry is-disabled">'),e.push(this.T("Continue")),e.push('</button>\n      </div>\n    </div>\n  </form>\n\n  <form class="modal-content setup wizard hide js-analyze">\n    <div class="modal-header">\n      <div class="modal-close js-close">\n        '),e.push(this.Icon("diagonal-cross")),e.push('\n      </div>\n      <h1 class="modal-title">'),e.push(this.T("Exchange")),e.push(" "),e.push(this.T("Configuration")),e.push('</h1>\n    </div>\n    <div class="modal-body">\n      <div class="wizard-body vertical justified">\n        <p class="wizard-loadingText">\n          <span class="loading icon"></span> '),e.push(this.T("Analyzing structure...")),e.push('\n        </p>\n      </div>\n    </div>\n    <div class="modal-footer"></div>\n  </form>\n\n  <div class="modal-content setup wizard hide js-mapping">\n    <div class="modal-header">\n      <div class="modal-close js-close">\n        '),e.push(this.Icon("diagonal-cross")),e.push('\n      </div>\n      <h1 class="modal-title">'),e.push(this.T("Exchange")),e.push(" "),e.push(this.T("Mapping")),e.push('</h1>\n    </div>\n    <div class="modal-body">\n      <div class="wizard-body vertical justified">\n        <div class="alert alert--danger hide" role="alert"></div>\n\n        <h2>'),e.push(this.T("User")),e.push('</h2>\n        <form class="js-userMappingForm">\n          <table class="settings-list js-userAttributeMap" style="width: 100%;">\n            <colgroup>\n              <col width="240">\n              <col>\n              <col>\n            </colgroup>\n            <thead>\n              <tr>\n                <th>'),e.push(this.T("%s Attribute","Exchange")),e.push("\n                <th>"),e.push(this.T("%s Attribute","Zammad")),e.push("\n                <th>"),e.push(this.T("Action")),e.push('\n            </thead>\n            <tbody>\n              <tr>\n                <td class="settings-list-row-control" colspan="3">\n                  <div class="btn btn--text btn--create js-add">\n                    '),e.push(this.Icon("plus-small")),e.push(" "),e.push(this.T("Add")),e.push('\n                  </div>\n            </tbody>\n          </table>\n        </form>\n\n      </div>\n    </div>\n    <div class="modal-footer">\n      <div class="modal-rightFooter">\n        <a class="btn btn--text btn--secondary js-goToSlide align-left" data-slide="js-bind">'),e.push(this.T("Go Back")),e.push('</a>\n      </div>\n      <div class="modal-rightFooter">\n        <button class="btn btn--primary align-right js-submitTry">'),e.push(this.T("Continue")),e.push('</button>\n      </div>\n    </div>\n  </div>\n\n  <form class="modal-content setup wizard hide js-dry">\n    <div class="modal-header">\n      <div class="modal-close js-close">\n        '),e.push(this.Icon("diagonal-cross")),e.push('\n      </div>\n      <h1 class="modal-title">'),e.push(this.T("Exchange")),e.push(" "),e.push(this.T("Configuration")),e.push('</h1>\n    </div>\n    <div class="modal-body">\n      <div class="wizard-body vertical justified">\n        <div class="js-preprogress">\n          <p class="wizard-loadingText">\n            <span class="loading icon"></span>\n            '),e.push(this.T("Counting entries. This may take a while.")),e.push('\n          </p>\n        </div>\n        <div class="js-analyzing hide">\n          <p class="wizard-loadingText">\n            '),e.push(this.T("Analyzing entries with given configuration...")),e.push('\n          </p>\n          <div class="centered js-progress">\n            <progress max="" value=""></progress>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class="modal-footer"></div>\n  </form>\n\n  <div class="modal-content setup wizard hide js-try">\n    <div class="modal-header">\n      <div class="modal-close js-close">\n        '),e.push(this.Icon("diagonal-cross")),e.push('\n      </div>\n      <h1 class="modal-title">'),e.push(this.T("Exchange")),e.push(" "),e.push(this.T("Configuration")),e.push('</h1>\n    </div>\n    <div class="modal-body">\n      <div class="wizard-body vertical justified">\n        <div class="alert alert--danger hide" role="alert"></div>\n        <p>'),e.push(this.T("With your current configuration the following will happen")),e.push(':</p>\n        <div class="js-summary"></div>\n      </div>\n    </div>\n    <div class="modal-footer">\n      <div class="modal-rightFooter">\n        <a class="btn btn--text btn--secondary js-goToSlide align-left" data-slide="js-mapping">'),e.push(this.T("Go Back")),e.push('</a>\n      </div>\n      <div class="modal-rightFooter">\n        <button class="btn btn--primary align-right js-submitSave">'),e.push(this.T("Save configuration")),e.push('</button>\n      </div>\n    </div>\n  </div>\n\n  <form class="modal-content setup wizard hide js-error">\n    <div class="modal-header">\n      <div class="modal-close js-close">\n        '),e.push(this.Icon("diagonal-cross")),e.push('\n      </div>\n      <h1 class="modal-title">'),e.push(this.T("Exchange")),e.push('</h1>\n    </div>\n    <div class="modal-body">\n      <div class="wizard-body vertical justified">\n        <div class="alert alert--danger hide" role="alert"></div>\n      </div>\n    </div>\n    <div class="modal-footer">\n      <div class="modal-rightFooter">\n        <button class="btn btn--primary align-right">'),e.push(this.T("Cancel")),e.push("</button>\n      </div>\n    </div>\n  </form>\n\n</div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/integration/idoit"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push("<form>\n  <h2>"),e.push(this.T("Settings")),e.push('</h2>\n  <div class="settings-entry">\n    <table class="settings-list" style="width: 100%;">\n      <thead>\n        <tr>\n          <th width="20%">'),e.push(this.T("Name")),e.push('\n          <th width="80%">'),e.push(this.T("Value")),e.push('\n      </thead>\n      <tbody>\n        <tr>\n          <td class="settings-list-row-control">'),e.push(this.T("API token")),e.push(' *\n          <td class="settings-list-control-cell"><input type="text" class="form-control form-control--small" value="'),e.push(n(this.config.api_token)),e.push('" name="api_token">\n        <tr>\n          <td class="settings-list-row-control">'),e.push(this.T("Endpoint")),e.push(' *\n          <td class="settings-list-control-cell"><input type="text" class="form-control form-control--small" value="'),e.push(n(this.config.endpoint)),e.push('" placeholder="https://idoit.example.com/i-doit/" name="endpoint">\n        <tr>\n          <td class="settings-list-row-control">'),e.push(this.T("Client ID")),e.push('\n          <td class="settings-list-control-cell"><input type="text" class="form-control form-control--small" value="'),e.push(n(this.config.client_id)),e.push('" name="client_id">\n      </tbody>\n    </table>\n  </div>\n\n  <button type="submit" class="btn btn--primary js-submit">'),e.push(this.T("Save")),e.push("</button>\n</form>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/integration/idoit_object_result"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r;if(e.push("<hr>\n"),_.isEmpty(this.items))e.push("\n  "),e.push(this.T("none")),e.push("\n");else{for(e.push('\n<table class="table">\n  <thead>\n    <th style="width: 30px"></th>\n    <th style="width: 100px">'),e.push(this.T("ID")),e.push("</th>\n    <th>"),e.push(this.T("Name")),e.push('</th>\n    <th style="width: 100px;">'),e.push(this.T("Status")),e.push("</th>\n  </thead>\n  <tbody>\n  "),r=this.items,t=0,s=r.length;t<s;t++)i=r[t],e.push('\n    <tr>\n      <td><input type="checkbox" name="object_id" value="'),e.push(n(i.id)),e.push('"/></td>\n      <td title="'),e.push(n(i.id)),e.push('">'),e.push(n(i.id)),e.push('</td>\n      <td title="'),e.push(n(i.title)),e.push('"><a href="'),e.push(i.link),e.push('" target="_blank">'),e.push(n(i.title)),e.push("</a></td>\n      <td>"),e.push(n(i.cmdb_status_title)),e.push("</td>\n    </tr>\n  ");e.push("\n  </tbody>\n</table>\n")}e.push("\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/integration/idoit_object_selector"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<form class="js-search flex horizontal">\n  <div class="controls controls--select js-typeSelect"></div>\n  <input type="text" name="title" value="" autocomplete="off" placeholder="'),e.push(this.Ti("Search")),e.push('" class="form-control js-searchField"/>\n</form>\n<form class="js-result"></form>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/integration/index"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r;for(e.push('<div class="page-header-title">\n  <h1>'),e.push(this.T(this.head)),e.push('</h1>\n</div>\n<div class="page-content">\n  <table class="table table-striped table-hover">\n    <thead>\n      <tr>\n        <th style="width: 30px;"></th>\n        <th style="width: 30%;">'),e.push(this.T("Service")),e.push("</th>\n        <th>"),e.push(this.T("Description")),e.push("</th>\n      </tr>\n    </thead>\n    <tbody>\n    "),r=this.integrations,t=0,s=r.length;t<s;t++)i=r[t],e.push('\n      <tr data-key="'),e.push(n(i.key)),e.push('">\n        <td>\n          '),i.state.current()?(e.push("\n            "),e.push(this.Icon("status","ok inline")),e.push("\n          ")):(e.push("\n            "),e.push(this.Icon("status","inactive inline")),e.push("\n          ")),e.push('\n        </td>\n        <td><a href="'),e.push(i.target),e.push('">'),e.push(n(i.name)),e.push("</a></td>\n        <td>"),e.push(this.T(i.description)),e.push("</td>\n      </tr>\n    ");e.push("\n    </tbody>\n  </table>\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/integration/ldap"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o,a;if(e.push('<div class="js-lastImport"></div>\n<div class="js-notConfigured">\n  <p>'),e.push(this.T("No %s configured.","LDAP")),e.push('</p>\n  <button type="submit" class="btn btn--primary js-wizard">'),e.push(this.T("Configure")),e.push('</button>\n</div>\n<div class="js-summary hide">\n  <h2>'),e.push(this.T("Settings")),e.push('</h2>\n  <table class="settings-list" style="width: 100%;">\n    <thead>\n      <tr>\n        <th width="30%">'),e.push(this.T("Name")),e.push('\n        <th width="70%">'),e.push(this.T("Value")),e.push('\n    </thead>\n    <tbody>\n      <tr>\n        <td class="settings-list-row-control">'),e.push(this.T("LDAP Host")),e.push('\n        <td class="settings-list-row-control">'),e.push(n(this.config.host_url)),e.push('\n      <tbody>\n        <tr>\n          <td class="settings-list-row-control">'),e.push(this.T("Base DN")),e.push('\n          <td class="settings-list-row-control">'),e.push(n(this.config.base_dn)),e.push('\n        <tr>\n          <td class="settings-list-row-control">'),e.push(this.T("Bind User")),e.push('\n          <td class="settings-list-row-control">'),e.push(n(this.config.bind_user)),
e.push('\n        <tr>\n          <td class="settings-list-row-control">'),e.push(this.T("Bind Password")),e.push('\n          <td class="settings-list-row-control">'),e.push(n(this.M(this.config.bind_pw))),e.push('\n        <tr>\n          <td class="settings-list-row-control">'),e.push(this.T("UID")),e.push('\n          <td class="settings-list-row-control">'),e.push(n(this.config.user_uid)),e.push('\n        <tr>\n          <td class="settings-list-row-control">'),e.push(this.T("User Filter")),e.push('\n          <td class="settings-list-row-control">'),e.push(n(this.config.user_filter)),e.push('\n        <tr>\n          <td class="settings-list-row-control">'),e.push(this.T("GID")),e.push('\n          <td class="settings-list-row-control">'),e.push(n(this.config.group_uid)),e.push('\n        <tr>\n          <td class="settings-list-row-control">'),e.push(this.T("Group Filter")),e.push('\n          <td class="settings-list-row-control">'),e.push(n(this.config.group_filter)),e.push("\n    </tbody>\n  </table>\n\n  <h2>"),e.push(this.T("Mapping")),e.push("</h2>\n\n  <h3>"),e.push(this.T("User")),e.push("</h3>\n  "),_.isEmpty(this.config.user_attributes))e.push('\n    <table class="settings-list settings-list--stretch settings-list--placeholder">\n      <thead><tr><th>'),e.push(this.T("No Entries")),e.push("\n    </table>\n  ");else{e.push('\n    <table class="settings-list" style="width: 100%;">\n      <thead>\n        <tr>\n          <th width="40%">'),e.push(this.T("LDAP")),e.push('\n          <th width="60%">'),e.push(this.T("Zammad")),e.push("\n        "),s=this.config.user_attributes;for(i in s)a=s[i],e.push('\n          <tr>\n            <td class="settings-list-row-control">'),e.push(n(i)),e.push('\n            <td class="settings-list-row-control">'),e.push(n(a)),e.push("\n        ");e.push("\n      </thead>\n      <tbody>\n    </table>\n  ")}if(e.push("\n\n  <h3>"),e.push(this.T("Role")),e.push("</h3>\n  "),_.isEmpty(this.group_role_map))e.push('\n    <table class="settings-list settings-list--stretch settings-list--placeholder">\n      <thead><tr><th>'),e.push(this.T("No Entries")),e.push("\n    </table>\n  ");else{e.push('\n    <table class="settings-list" style="width: 100%;">\n      <thead>\n        <tr>\n          <th width="40%">'),e.push(this.T("LDAP")),e.push('\n          <th width="60%">'),e.push(this.T("Zammad")),e.push("\n      <tbody>\n        "),r=this.group_role_map;for(o in r)t=r[o],e.push('\n          <tr>\n            <td class="settings-list-row-control">'),e.push(n(o)),e.push('\n            <td class="settings-list-row-control">'),e.push(n(t)),e.push("\n        ");e.push("\n  ")}e.push('\n    </table>\n\n  <button type="submit" class="btn btn--primary js-wizard">'),e.push(this.T("Change")),e.push("</button>\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/integration/ldap_group_role_row"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<tr class="js-entry">\n  <td style="max-width: 240px" class="settings-list-control-cell js-ldapList">\n  <td class="settings-list-control-cell js-roleList">\n  <td class="settings-list-row-control">\n    <div class="btn btn--text js-remove">\n      '),e.push(this.Icon("trash")),e.push(" "),e.push(this.T("Remove")),e.push("\n    </div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/integration/ldap_last_import"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s;if(e.push('<div class="box box--message">\n  <h2>'),e.push(this.T("Last sync")),e.push("</h2>\n  "),_.isEmpty(this.job.started_at))e.push("\n    "),this.job.result&&this.job.result.error?(e.push('\n        <div class="alert alert--danger" role="alert">'),e.push(this.T("An error occurred: %s",this.job.result.error)),e.push("</div>\n    ")):this.job.result&&this.job.result.info?(e.push('\n        <div class="alert alert--info" role="alert">'),e.push(this.T("Info: %s",this.job.result.info)),e.push("</div>\n    ")):(e.push("\n      <p>"),e.push(this.T("Job is waiting to get started...")),e.push("</p>\n    ")),e.push("\n  ");else{if(e.push("\n    "),this.job.finished_at?(e.push("\n      <p>"),e.push(this.Ttimestamp(this.job.started_at)),e.push(" - "),e.push(this.Ttimestamp(this.job.finished_at)),e.push("</p>\n      "),this.job.result&&this.job.result.error?(e.push('\n        <div class="alert alert--danger" role="alert">'),e.push(this.T("An error occurred: %s",this.job.result.error)),e.push("</div>\n      ")):this.job.result&&this.job.result.info&&(e.push('\n        <div class="alert alert--info" role="alert">'),e.push(this.T("Info: %s",this.job.result.info)),e.push("</div>\n      ")),e.push("\n    ")):(e.push("\n      "),this.job.result&&this.job.result.error?(e.push("\n        <p>"),e.push(this.Ttimestamp(this.job.started_at)),e.push('</p>\n        <div class="alert alert--danger" role="alert">'),e.push(this.T("An error occurred: %s",this.job.result.error)),e.push("</div>\n      ")):this.job.result.sum?(e.push("\n        <p>"),e.push(this.Ttimestamp(this.job.started_at)),e.push(" - "),e.push(this.T("Running...")),e.push('</p>\n        <div class="flex">\n          <progress max="'),e.push(n(this.job.result.total)),e.push('" value="'),e.push(n(this.job.result.sum)),e.push('"></progress>\n        </div>\n      ')):(e.push("\n        <p>"),e.push(this.Ttimestamp(this.job.started_at)),e.push(" - "),e.push(this.T("Counting entries. This may take a while.")),e.push("</p>\n      ")),e.push("\n    ")),e.push("\n    "),!_.isEmpty(this.job.result)&&this.job.result.sum){if(e.push("\n      <ul>\n        <li>"),e.push(this.T("%s user to %s user","LDAP","Zammad")),e.push(" ("),e.push(n(this.job.result.sum)),e.push("/"),e.push(n(this.job.result.total)),e.push("):\n          <ul>\n            <li>"),e.push(this.T("Users")),e.push(": "),e.push(n(this.job.result.created)),e.push(" "),e.push(this.T("created")),e.push(", "),e.push(n(this.job.result.updated)),e.push(" "),e.push(this.T("updated")),e.push(", "),e.push(n(this.job.result.unchanged)),e.push(" "),e.push(this.T("untouched")),e.push(", "),e.push(n(this.job.result.skipped)),e.push(" "),e.push(this.T("skipped")),e.push(", "),e.push(n(this.job.result.failed)),e.push(" "),e.push(this.T("failed")),e.push(", "),e.push(n(this.job.result.deactivated)),e.push(" "),e.push(this.T("deactivated")),e.push("\n          </ul>\n        "),!_.isEmpty(this.job.result.roles)){e.push("\n          <li>"),e.push(this.T("%s groups to %s roles assignments","LDAP","Zammad")),e.push(":\n            <ul>\n              "),t=this.job.result.roles;for(s in t)i=t[s],e.push("\n                <li> "),e.push(this.T(s)),e.push(": "),e.push(n(i.created)),e.push(" "),e.push(this.T("created")),e.push(", "),e.push(n(i.updated)),e.push(" "),e.push(this.T("updated")),e.push(", "),e.push(n(i.unchanged)),e.push(" "),e.push(this.T("untouched")),e.push(", "),e.push(n(i.failed)),e.push(" "),e.push(this.T("failed")),e.push(", "),e.push(n(i.deactivated)),e.push(" "),e.push(this.T("deactivated")),e.push("\n              ");e.push("\n            </ul>\n        ")}e.push("\n      </ul>\n    ")}e.push("\n    "),this.job.finished_at&&(e.push('\n      <button type="submit" class="btn btn--primary js-start-sync">'),e.push(this.T("Start new")),e.push("</button>\n    ")),e.push("\n  ")}e.push("\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/integration/ldap_ssl_verify_row"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<tr>\n  <td class="settings-list-row-control">'),e.push(this.T("SSL verification")),e.push('\n  <td class="settings-list-control-cell js-sslVerify">\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/integration/ldap_summary"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s;if(e.push("<ul>\n  <li>"),e.push(this.T("%s user to %s user","LDAP","Zammad")),e.push(" ("),e.push(n(this.job.result.sum)),e.push("):\n    <ul>\n      <li>"),e.push(this.T("Users")),e.push(": "),e.push(n(this.job.result.created)),e.push(" "),e.push(this.T("created")),e.push(", "),e.push(n(this.job.result.updated)),e.push(" "),e.push(this.T("updated")),e.push(", "),e.push(n(this.job.result.unchanged)),e.push(" "),e.push(this.T("untouched")),e.push(", "),e.push(n(this.job.result.skipped)),e.push(" "),e.push(this.T("skipped")),e.push(", "),e.push(n(this.job.result.failed)),e.push(" "),e.push(this.T("failed")),e.push(", "),e.push(n(this.job.result.deactivated)),e.push(" "),e.push(this.T("deactivated")),e.push("\n    </ul>\n  </li>\n  "),!_.isEmpty(this.job.result.roles)){e.push("\n    <li>"),e.push(this.T("%s groups to %s roles assignments","LDAP","Zammad")),e.push(":\n      <ul>\n        "),t=this.job.result.roles;for(s in t)i=t[s],e.push("\n          <li>"),e.push(this.T(s)),e.push(": "),e.push(n(i.created)),e.push(" "),e.push(this.T("created")),e.push(", "),e.push(n(i.updated)),e.push(" "),e.push(this.T("updated")),e.push(", "),e.push(n(i.unchanged)),e.push(" "),e.push(this.T("untouched")),e.push(", "),e.push(n(i.failed)),e.push(" "),e.push(this.T("failed")),e.push(", "),e.push(n(i.deactivated)),e.push(" "),e.push(this.T("deactivated")),e.push("\n        ");e.push("\n      </ul>\n    </li>\n  ")}e.push("\n</ul>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/integration/ldap_user_attribute_row"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<tr class="js-entry">\n  <td style="max-width: 240px" class="settings-list-control-cell js-ldapAttribute">\n  <td class="settings-list-control-cell js-userAttribute">\n  <td class="settings-list-row-control">\n    <div class="btn btn--text js-remove">\n      '),e.push(this.Icon("trash")),e.push(" "),e.push(this.T("Remove")),e.push("\n    </div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/integration/ldap_wizard"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="modal-dialog">\n\n  <form class="modal-content setup wizard js-discover">\n    <div class="modal-header">\n      <div class="modal-close js-close">\n        '),e.push(this.Icon("diagonal-cross")),e.push('\n      </div>\n      <h1 class="modal-title">'),e.push(this.T("LDAP")),e.push(" "),e.push(this.T("Configuration")),e.push('</h1>\n    </div>\n    <div class="modal-body">\n      <div class="wizard-body vertical justified">\n        <div class="alert alert--danger hide" role="alert"></div>\n        <table class="settings-list" style="width: 100%;">\n          <thead>\n            <tr>\n              <th width="30%">'),e.push(this.T("Name")),e.push('\n              <th width="70%">'),e.push(this.T("Value")),e.push('\n          </thead>\n          <tbody>\n            <tr>\n              <td class="settings-list-row-control">'),e.push(this.T("Host")),e.push('\n              <td class="settings-list-control-cell"><input type="text" name="host_url" class="form-control form-control--small js-hostUrl" value="" placeholder="ldaps://ldap.example.com" autocomplete="off">\n          </tbody>\n        </table>\n      </div>\n    </div>\n    <div class="modal-footer">\n      <div class="modal-rightFooter">\n        <button class="btn btn--primary align-right js-submit">'),e.push(this.T("Connect")),e.push('</button>\n      </div>\n    </div>\n  </form>\n\n  <form class="modal-content setup wizard hide js-connect">\n    <div class="modal-header">\n      <div class="modal-close js-close">\n        '),e.push(this.Icon("diagonal-cross")),e.push('\n      </div>\n      <h1 class="modal-title">'),e.push(this.T("LDAP")),e.push(" "),e.push(this.T("Configuration")),e.push('</h1>\n    </div>\n    <div class="modal-body">\n      <div class="wizard-body vertical justified">\n        <p class="wizard-loadingText">\n          <span class="loading icon"></span> '),e.push(this.T("Connecting ...")),e.push(' <span class="js-host"></span>\n        </p>\n      </div>\n    </div>\n    <div class="modal-footer"></div>\n  </form>\n\n  <form class="modal-content setup wizard hide js-bind">\n    <div class="modal-header">\n      <div class="modal-close js-close">\n        '),e.push(this.Icon("diagonal-cross")),e.push('\n      </div>\n      <h1 class="modal-title">'),e.push(this.T("LDAP")),e.push(" "),e.push(this.T("Configuration")),e.push('</h1>\n    </div>\n    <div class="modal-body">\n      <div class="wizard-body vertical justified">\n        <div class="alert alert--danger hide" role="alert"></div>\n        <table class="settings-list" style="width: 100%;">\n          <thead>\n            <tr>\n              <th width="30%">'),e.push(this.T("Name")),e.push('\n              <th width="70%">'),e.push(this.T("Value")),e.push('\n          </thead>\n          <tbody>\n            <tr>\n              <td class="settings-list-row-control">'),e.push(this.T("Base DN")),e.push('\n              <td class="settings-list-control-cell js-baseDn">\n            <tr>\n              <td class="settings-list-row-control">'),e.push(this.T("Bind User")),e.push('\n              <td class="settings-list-control-cell"><input type="text" name="bind_user" class="form-control form-control--small" value="" placeholder="" autocomplete="off">\n            <tr>\n              <td class="settings-list-row-control">'),e.push(this.T("Bind Password")),e.push('\n              <td class="settings-list-control-cell"><input type="password" name="bind_pw" class="form-control form-control--small" value=""  autocomplete="new-password">\n          </tbody>\n        </table>\n      </div>\n    </div>\n    <div class="modal-footer">\n      <div class="modal-rightFooter">\n        <a class="btn btn--text btn--secondary js-goToSlide align-left" data-slide="js-discover">'),e.push(this.T("Go Back")),e.push('</a>\n      </div>\n      <div class="modal-rightFooter">\n        <button class="btn btn--primary align-right js-submit">'),e.push(this.T("Continue")),e.push('</button>\n      </div>\n    </div>\n  </form>\n\n  <form class="modal-content setup wizard hide js-analyze">\n    <div class="modal-header">\n      <div class="modal-close js-close">\n        '),e.push(this.Icon("diagonal-cross")),e.push('\n      </div>\n      <h1 class="modal-title">'),e.push(this.T("LDAP")),e.push(" "),e.push(this.T("Configuration")),e.push('</h1>\n    </div>\n    <div class="modal-body">\n      <div class="wizard-body vertical justified">\n        <p class="wizard-loadingText">\n          <span class="loading icon"></span> '),e.push(this.T("Analyzing structure...")),e.push('\n        </p>\n      </div>\n    </div>\n    <div class="modal-footer"></div>\n  </form>\n\n  <form class="modal-content setup wizard hide js-dry">\n    <div class="modal-header">\n      <div class="modal-close js-close">\n        '),e.push(this.Icon("diagonal-cross")),e.push('\n      </div>\n      <h1 class="modal-title">'),e.push(this.T("LDAP")),e.push(" "),e.push(this.T("Configuration")),e.push('</h1>\n    </div>\n    <div class="modal-body">\n      <div class="wizard-body vertical justified">\n        <div class="js-preprogress">\n          <p class="wizard-loadingText">\n            <span class="loading icon"></span>\n            '),e.push(this.T("Counting entries. This may take a while.")),e.push('\n          </p>\n        </div>\n        <div class="js-analyzing hide">\n          <p class="wizard-loadingText">\n            '),e.push(this.T("Analyzing entries with given configuration...")),e.push('\n          </p>\n          <div class="centered js-progress">\n            <progress max="" value=""></progress>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class="modal-footer"></div>\n  </form>\n\n  <div class="modal-content setup wizard hide js-mapping">\n    <div class="modal-header">\n      <div class="modal-close js-close">\n        '),e.push(this.Icon("diagonal-cross")),e.push('\n      </div>\n      <h1 class="modal-title">'),e.push(this.T("LDAP")),e.push(" "),e.push(this.T("Mapping")),e.push('</h1>\n    </div>\n    <div class="modal-body">\n      <div class="wizard-body vertical justified">\n        <div class="alert alert--danger hide" role="alert"></div>\n\n        <h2>'),e.push(this.T("User")),e.push('</h2>\n        <form class="js-userMappingForm">\n          <table class="settings-list js-userAttributeMap" style="width: 100%;">\n            <colgroup>\n              <col width="240">\n              <col>\n              <col>\n            </colgroup>\n            <thead>\n              <tr>\n                <th>'),e.push(this.T("%s Attribute","LDAP")),e.push("\n                <th>"),e.push(this.T("%s Attribute","Zammad")),e.push("\n                <th>"),e.push(this.T("Action")),e.push('\n            </thead>\n            <tbody>\n              <tr>\n                <td class="settings-list-row-control" colspan="3">\n                  <div class="btn btn--text btn--create js-add">\n                    '),e.push(this.Icon("plus-small")),e.push(" "),e.push(this.T("Add")),e.push("\n                  </div>\n            </tbody>\n          </table>\n        </form>\n\n        <h2>"),e.push(this.T("Roles")),e.push('</h2>\n        <form class="js-groupRoleForm">\n          <table class="settings-list js-groupRoleMap" style="width: 100%;">\n            <colgroup>\n              <col width="240">\n              <col>\n              <col>\n            </colgroup>\n            <thead>\n              <tr>\n                <th>'),e.push(this.T("%s Group","LDAP")),e.push("\n                <th>"),e.push(this.T("%s Role","Zammad")),e.push("\n                <th>"),e.push(this.T("Action")),e.push('\n            </thead>\n            <tbody>\n              <tr>\n                <td class="settings-list-row-control" colspan="3">\n                  <div class="btn btn--text btn--create js-add">\n                    '),e.push(this.Icon("plus-small")),e.push(" "),e.push(this.T("Add")),e.push("\n                  </div>\n            </tbody>\n          </table>\n        </form>\n\n        <h2>"),e.push(this.T("Expert")),e.push('</h2>\n        <form class="js-expertForm">\n          <table class="settings-list js-expert" style="width: 100%;">\n            <thead>\n              <tr>\n                <th width="30%">'),e.push(this.T("Name")),e.push('\n                <th width="70%">'),e.push(this.T("Value")),e.push('\n            </thead>\n            <tbody>\n              <tr>\n                <td class="settings-list-row-control">'),e.push(this.T("User filter")),e.push('\n                <td class="settings-list-control-cell"><input type="text" name="user_filter" class="form-control form-control--small" value="" placeholder="" autocomplete="off">\n              <tr>\n                <td class="settings-list-row-control">'),e.push(this.T("Users without assigned LDAP groups")),e.push('\n                <td class="settings-list-control-cell js-unassignedUsers">\n            </tbody>\n          </table>\n        </form>\n\n      </div>\n    </div>\n    <div class="modal-footer">\n      <div class="modal-rightFooter">\n        <a class="btn btn--text btn--secondary js-goToSlide align-left" data-slide="js-bind">'),e.push(this.T("Go Back")),e.push('</a>\n      </div>\n      <div class="modal-rightFooter">\n        <button class="btn btn--primary align-right js-submitTry">'),e.push(this.T("Continue")),e.push('</button>\n      </div>\n    </div>\n  </div>\n\n  <div class="modal-content setup wizard hide js-try">\n    <div class="modal-header">\n      <div class="modal-close js-close">\n        '),e.push(this.Icon("diagonal-cross")),e.push('\n      </div>\n      <h1 class="modal-title">'),e.push(this.T("LDAP")),e.push(" "),e.push(this.T("Configuration")),e.push('</h1>\n    </div>\n    <div class="modal-body">\n      <div class="wizard-body vertical justified">\n        <div class="alert alert--danger hide" role="alert"></div>\n        <p>'),e.push(this.T("With your current configuration the following will happen")),e.push(':</p>\n        <div class="js-summary"></div>\n      </div>\n    </div>\n    <div class="modal-footer">\n      <div class="modal-rightFooter">\n        <a class="btn btn--text btn--secondary js-goToSlide align-left" data-slide="js-mapping">'),e.push(this.T("Go Back")),e.push('</a>\n      </div>\n      <div class="modal-rightFooter">\n        <button class="btn btn--primary align-right js-submitSave">'),e.push(this.T("Save configuration")),e.push('</button>\n      </div>\n    </div>\n  </div>\n\n  <form class="modal-content setup wizard hide js-error">\n    <div class="modal-header">\n      <div class="modal-close js-close">\n        '),e.push(this.Icon("diagonal-cross")),e.push('\n      </div>\n      <h1 class="modal-title">'),e.push(this.T("LDAP")),e.push('</h1>\n    </div>\n    <div class="modal-body">\n      <div class="wizard-body vertical justified">\n        <div class="alert alert--danger hide" role="alert"></div>\n      </div>\n    </div>\n    <div class="modal-footer">\n      <div class="modal-rightFooter">\n        <button class="btn btn--primary align-right">'),e.push(this.T("Cancel")),e.push("</button>\n      </div>\n    </div>\n  </form>\n\n</div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/integration/sipgate"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o,a,l;for(e.push("<form>\n\n  <h2>sipgate.io "),e.push(this.T("Settings")),e.push("</h2>\n\n  <p>"),e.push(this.T("You need to configure the Zammad endpoints in the Sipgate web interface")),e.push(':<p>\n\n  <div class="settings-entry">\n    <table class="settings-list" style="width: 100%;">\n      <thead>\n        <tr>\n          <th width="20%">'),e.push(this.T("Type")),e.push('\n          <th width="80%">'),e.push(this.T("URL")),e.push('\n      </thead>\n      <tbody>\n        <tr>\n          <td class="settings-list-row-control">'),e.push(this.T("Inbound")),e.push('\n          <td class="settings-list-control-cell"><input type="url" class="form-control form-control--small js-select" readonly value="'),e.push(this.C("http_type")),e.push("://"),e.push(this.C("fqdn")),e.push('/api/v1/sipgate/in">\n        <tr>\n          <td class="settings-list-row-control">'),e.push(this.T("Outbound")),e.push('\n          <td class="settings-list-control-cell"><input type="url" class="form-control form-control--small js-select" readonly value="'),e.push(this.C("http_type")),e.push("://"),e.push(this.C("fqdn")),e.push('/api/v1/sipgate/out">\n      </tbody>\n    </table>\n  </div>\n\n  <h2>'),e.push(this.T("Inbound")),e.push("</h2>\n\n  <p>"),e.push(this.T("Blocked caller ids based on sender caller id.")),e.push('\n\n  <div class="settings-entry">\n    <table class="settings-list js-inboundBlockCallerId" style="width: 100%;">\n      <thead>\n        <tr>\n          <th width="50%">'),e.push(this.T("Caller id to block")),e.push('\n          <th width="40%">'),e.push(this.T("Note")),e.push('\n          <th width="10%">'),e.push(this.T("Action")),e.push("\n      </thead>\n      <tbody>\n"),o=this.config.inbound.block_caller_ids,t=0,s=o.length;t<s;t++)l=o[t],e.push('\n        <tr class="js-row">\n          <td class="settings-list-control-cell"><input name="caller_id" value="'),e.push(n(l.caller_id)),e.push('" class="form-control form-control--small js-summary">\n          <td class="settings-list-control-cell"><input name="note" value="'),e.push(n(l.note)),e.push('" class="form-control form-control--small js-summary">\n          <td class="settings-list-row-control"><div class="btn btn--text js-remove">'),e.push(this.Icon("trash")),e.push(" "),e.push(this.T("Remove")),e.push("</div>\n");for(e.push('\n        <tr>\n          <td class="settings-list-control-cell"><input name="caller_id" value="" placeholder="4930609854189" class="form-control form-control--small js-summary">\n          <td class="settings-list-control-cell"><input name="note" value="" placeholder="'),e.push(this.Ti("my onw note")),e.push('" class="form-control form-control--small js-summary">\n          <td class="settings-list-row-control"><div class="btn btn--text btn--create js-add">'),e.push(this.Icon("plus-small")),e.push(" "),e.push(this.T("Add")),e.push("</div>\n      </tbody>\n    </table>\n  </div>\n\n  <h2>"),e.push(this.T("Outbound")),e.push("</h2>\n\n  <p>"),e.push(this.T("Set caller id of outbound calls based on destination caller id.")),e.push('\n\n  <div class="settings-entry js-outboundRouting">\n    <table class="settings-list" style="width: 100%;">\n      <thead>\n        <tr>\n          <th width="30%">'),e.push(this.T("Destination caller id")),e.push('\n          <th width="30%">'),e.push(this.T("Set outbound caller id")),e.push('\n          <th width="30%">'),e.push(this.T("Note")),e.push('\n          <th width="10%">'),e.push(this.T("Action")),e.push("\n      </thead>\n      <tbody>\n"),a=this.config.outbound.routing_table,i=0,r=a.length;i<r;i++)l=a[i],e.push('\n        <tr class="js-row">\n          <td class="settings-list-control-cell"><input name="dest" value="'),e.push(n(l.dest)),e.push('" class="form-control form-control--small js-summary">\n          <td class="settings-list-control-cell"><input name="caller_id" value="'),e.push(n(l.caller_id)),e.push('" class="form-control form-control--small js-summary">\n          <td class="settings-list-control-cell"><input name="note" value="'),e.push(n(l.note)),e.push('" class="form-control form-control--small js-summary">\n          <td class="settings-list-row-control"><div class="btn btn--text js-remove">'),e.push(this.Icon("trash")),e.push(" "),e.push(this.T("Remove")),e.push("</div>\n");e.push('\n        <tr>\n          <td class="settings-list-control-cell"><input name="dest" value="" placeholder="49* or 3230123456789" class="form-control form-control--small js-summary">\n          <td class="settings-list-control-cell"><input name="caller_id" value="" placeholder="4930609854189" class="form-control form-control--small js-summary">\n          <td class="settings-list-control-cell"><input name="note" value="" placeholder="'),e.push(this.Ti("my onw note")),e.push('" class="form-control form-control--small js-summary">\n          <td class="settings-list-row-control"><div class="btn btn--text btn--create js-add">'),e.push(this.Icon("plus-small")),e.push(" "),e.push(this.T("Add")),e.push("</div>\n      </tbody>\n    </table>\n  </div>\n\n  <p>"),e.push(this.T("Default caller id.")),e.push('\n\n  <div class="settings-entry">\n    <table class="settings-list" style="width: 100%;">\n      <thead>\n        <tr>\n          <th width="50%">'),e.push(this.T("Default caller id")),e.push('\n          <th width="50%">'),e.push(this.T("Note")),e.push('\n      </thead>\n      <tbody>\n        <tr>\n          <td class="settings-list-control-cell"><input name="default_caller_id" value="'),e.push(n(this.config.outbound.default_caller_id)),e.push('" placeholder="4930609854189" class="form-control form-control--small js-summary">\n          <td class="settings-list-row-control">'),e.push(this.T("Default caller id for outbound calls.")),e.push('\n      </tbody>\n    </table>\n  </div>\n\n  <button type="submit" class="btn btn--primary js-submit">'),e.push(this.T("Save")),e.push("</button>\n</form>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/karma/index"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o,a,l,c,u,p,h,d;for(e.push("<div>\n\n"),e.push(this.T("Zammad Karma is a powerful tool that tracks and visualizes your productivity.")),e.push("\n\n<hr>\n\n<h2>"),e.push(this.T("Karma Level")),e.push("</h2>\n\n"),e.push(this.T("You are an |%s|.",App.i18n.translatePlain(this.user.level))),e.push(" "),e.push(this.T("Your karma is |%s|.",this.user.score)),e.push('\n\n<table class="table">\n'),p=this.levels,i=0,o=p.length;i<o;i++)c=p[i],e.push('\n  <tr>\n    <td style="width: 60px;">'),e.push(n(c.start)),e.push('</td>\n    <td style="width: 40px;">\u2192 </td>\n    <td style="width: 100px;">'),null===c.end?e.push("\u221e"):e.push(n(c.end)),e.push("</td>\n    <td>"),e.push(this.T(c.name)),e.push("</td>\n    <td>"),this.user.level===c.name&&(e.push("("),e.push(this.T("Your current level")),e.push(")")),e.push("</td>\n  </tr>\n");for(e.push("\n</table>\n\n<hr>\n\n<h2>"),e.push(this.T("Latest updates")),e.push('</h2>\n\n<table class="table">\n'),h=this.logs,s=0,a=h.length;s<a;s++){for(u=h[s],e.push('\n  <tr>\n    <td style="width: 180px;">'),e.push(this.humanTime(u.created_at)),e.push('</td>\n    <td style="width: 80px;">'),e.push(u.score_total),e.push("</td>\n    <td>\n      "),d=u.comments,r=0,l=d.length;r<l;r++)t=d[r],e.push("\n        "),t.score>=0&&e.push("+"),e.push(t.score),e.push(" "),e.push(this.T(t.description)),e.push("\n      ");e.push("\n    </td>\n  </tr>\n")}e.push("\n</table>\n\n<hr>\n\n<h2>"),e.push(this.T("What affects your Zammad Karma?")),e.push("</h2>\n\n<p>"),e.push(this.T("You |accumulate positive Karma| when you regularly answer and close tickets on time and when you use advanced features such as text modules, ticket reminders or tagging tickets. Zammad |Karma will decrease| when you have re-opend tickets, escalated tickets or tickets that are two or more days overdue.")),e.push("</p>\n\n<!--\n<p>"),e.push(this.T('You\u2019re able to set goals regarding the number of tickets you want to answer or close you want to complete either daily or weekly. Reaching these self-set goals will result in bonus Karma. Zammad also tracks how many days/weeks you have attained your goals, and achieving ongoing "streaks" will similarly result in positive Karma.')),e.push("</p>\n\n\n<h2>"),e.push(this.T("Karma Trends")),e.push("</h2>\n\n\n<h2>"),e.push(this.T("last week")),e.push("</h2>\n\n\n<h2>"),e.push(this.T("last month")),e.push("</h2>\n-->\n\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/keyboard_shortcuts"]=function(t){t||(t={});var e=[],n=function(t){
return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o,a,l,c,u,p,h,d,f,g,m,v,y,b,w,k,T,S,C,A,x,j,I,D;for(e.push('<div class="horizontal">\n  <div class="flex">\n'),k=this.areas,i=0,c=k.length;i<c;i++){if(t=k[i],e.push("\n  "),"left"===t.location){for(e.push("\n    <h2>"),e.push(this.T(t.headline)),e.push("</h2>\n    "),T=t.content,r=0,u=T.length;r<u;r++){for(s=T[r],e.push("\n      "),s.where&&(e.push("<p><i>"),e.push(this.T(s.where)),e.push("</i></p>")),e.push("\n      "),S=s.shortcuts,o=0,p=S.length;o<p;o++){if(D=S[o],e.push("\n        "),D.hotkeys&&(e.push("\n          <kbd>"),e.push(this.hotkeys.join("</kbd> <kbd>")),e.push("</kbd>\n        ")),e.push("\n        "),D.keyPrefix&&(e.push("\n          "),e.push(n(D.keyPrefix)),e.push("\n        ")),e.push("\n        "),_.isArray(D.key)){for(e.push("\n          "),C=D.key,l=0,h=C.length;l<h;l++)a=C[l],e.push("\n            <kbd>"),e.push(a),e.push("</kbd>\n          ");e.push("\n        ")}else e.push("\n          <kbd>"),e.push(D.key),e.push("</kbd>\n        ");e.push("\n        "),e.push(this.T(D.description)),e.push("<br>\n      ")}e.push("\n    ")}e.push("\n  ")}e.push("\n")}for(e.push('\n  </div>\n  <div class="flex">\n'),A=this.areas,v=0,d=A.length;v<d;v++){if(t=A[v],e.push("\n  "),"right"===t.location){for(e.push("\n    <h2>"),e.push(this.T(t.headline)),e.push("</h2>\n    "),x=t.content,y=0,f=x.length;y<f;y++){for(s=x[y],e.push("\n      "),s.where&&(e.push("<p><i>"),e.push(this.T(s.where)),e.push("</i></p>")),e.push("\n      "),j=s.shortcuts,b=0,g=j.length;b<g;b++){if(D=j[b],e.push("\n        "),D.hotkeys?(e.push("\n          <kbd>"),e.push(this.hotkeys.join("</kbd> <kbd>")),e.push("</kbd>\n        ")):D.magicKey&&(e.push("\n          <kbd>"),e.push(n(this.magicKey)),e.push("</kbd>\n        ")),e.push("\n        "),D.keyPrefix&&(e.push("\n          "),e.push(n(D.keyPrefix)),e.push("\n        ")),e.push("\n        "),_.isArray(D.key)){for(e.push("\n          "),I=D.key,w=0,m=I.length;w<m;w++)a=I[w],e.push("\n            <kbd>"),e.push(a),e.push("</kbd>\n          ");e.push("\n        ")}else e.push("\n          <kbd>"),e.push(D.key),e.push("</kbd>\n        ");e.push("\n        "),e.push(this.T(D.description)),e.push("<br>\n      ")}e.push("\n    ")}e.push("\n  ")}e.push("\n")}e.push("\n  </div>\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/link/add"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push("<fieldset>\n  "),e.push(this.T("Link")),e.push("\n  "),e.push(this.T(this.link_object)),e.push('\n  <input type="text" name="ticket_number" value="" class="span2" required/>\n  '),e.push(this.T("as")),e.push('\n  <select name="link_type" class="span2" required>\n    <option value="normal">'),e.push(this.T("Normal")),e.push('</option>\n    <option value="child">'),e.push(this.T("Child")),e.push('</option>\n    <option value="parent">'),e.push(this.T("Parent")),e.push("</option>\n  </select>\n  "),e.push(this.T("of")),e.push("\n  Ticket#\n  "),e.push(n(this.object.number)),e.push(".\n\n  <hr>\n  <h4>"),e.push(this.T("Recent Customer Tickets")),e.push('</h4>\n  <div id="ticket-merge-customer-tickets"></div>\n  <hr>\n  <h4>'),e.push(this.T("Recent viewed Tickets")),e.push('</h4>\n  <div id="ticket-merge-recent-tickets"></div>\n</fieldset>\n')}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/link/info"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o;e.push("<label>"),e.push(this.T("Links")),e.push("</label>\n");for(o in this.links){for(e.push('\n<div class="ticketLinks">\n  <div class="list-title">'),e.push(this.T(o)),e.push('</div>\n  <ol class="tasks tasks--standalone">\n    '),r=this.links[o],t=0,s=r.length;t<s;t++)i=r[t],e.push('\n    <li class="task">\n      <div class="icon-holder">\n        '),e.push(this.Icon("task-state",i.iconClass())),e.push('\n      </div>\n      <div class="task-text">\n        <a class="name ticket-popover" data-id="'),e.push(i.id),e.push('" href="#ticket/zoom/'),e.push(n(i.id)),e.push('">'),e.push(n(i.title)),e.push("</a>\n        "),e.push(this.humanTime(i.created_at)),e.push('\n      </div>\n      <div class="list-item-delete js-delete" data-object="Ticket" data-object-id="'),e.push(n(i.id)),e.push('" data-link-type="'),e.push(n(o)),e.push('" data-type="remove">\n        '),e.push(this.Icon("diagonal-cross")),e.push("\n      </div>\n    ");e.push("\n  </ol>\n</div>\n")}e.push('\n<div class="text-muted u-clickable js-add">+ '),e.push(this.T("Add Link")),e.push("</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/login"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r;if(e.push('<div class="login fullscreen">\n  <div class="fullscreen-center">\n    <div class="fullscreen-body">\n      <p>'),e.push(this.T("Login with %s",this.C("fqdn"))),e.push("</p>\n\n      "),this.C("maintenance_mode")&&(e.push('\n        <div class="hero-unit alert alert--danger js-maintenanceMode">'),e.push(this.T("Zammad is currently in maintenance mode. Only administrators can login. Please wait until the maintenance window is over.")),e.push("</div>\n      ")),e.push("\n      "),this.C("maintenance_login")&&this.C("maintenance_login_message")&&(e.push('\n        <div class="hero-unit alert alert--success js-maintenanceLogin">'),e.push(this.C("maintenance_login_message")),e.push("</div>\n      ")),e.push('\n\n      <div class="hero-unit">\n        <img class="company-logo" src="'),e.push(n(this.logoUrl)),e.push('" alt="'),e.push(n(this.C("product_name"))),e.push('">\n        <form id="login">\n          <div class="form-group">\n            <div class="formGroup-label">\n              <label for="username">'),e.push(this.Ti("Username / email")),e.push('</label>\n            </div>\n            <input id="username" name="username" type="text" class="form-control" value="'),e.push(n(this.item.username)),e.push('" autocapitalize="off" />\n          </div>\n\n          <div class="form-group">\n            <div class="formGroup-label">\n              <label for="password">'),e.push(this.Ti("Password")),e.push('</label>\n            </div>\n            <input id="password" name="password" type="password" class="form-control" autocomplete="off"/>\n          </div>\n\n          <div class="form-group">\n    <!--\n            <label for="remember_me">'),e.push(this.Ti("Remember me")),e.push('</label>\n            <input id="remember_me" name="remember_me" value="1" type="checkbox"/>\n    -->\n            <label class="inline-label checkbox-replacement">\n              <input name="remember_me" value="1" type="checkbox">\n              '),e.push(this.Icon("checkbox","icon-unchecked")),e.push("\n              "),e.push(this.Icon("checkbox-checked","icon-checked")),e.push('\n              <span class="label-text">'),e.push(this.T("Remember me")),e.push('</span>\n            </label>\n          </div>\n\n          <div class="form-controls">\n            <button class="btn btn--primary" type="submit">'),e.push(this.T("Sign in")),e.push("</button>\n\n            "),this.C("user_lost_password")&&(e.push('\n              <a href="#password_reset" class="btn btn--text btn--secondary align-right">'),e.push(this.T("Forgot password?")),e.push("</a>\n            ")),e.push("\n          </div>\n\n          "),!_.isEmpty(this.auth_providers)){for(e.push('\n          <div class="separator">\n            <span class="separator-text">'),e.push(this.T("or sign in using")),e.push('</span>\n          </div>\n\n          <div class="auth-providers">\n            '),r=this.auth_providers,i=0,s=r.length;i<s;i++)t=r[i],e.push('\n              <a class="auth-provider auth-provider--'),e.push(n(t["class"])),e.push('" href="'),e.push(n(t.url)),e.push('">\n                '),e.push(this.Icon(t["class"]+"-button","provider-icon")),e.push('\n                <span class="provider-name">'),e.push(this.T(t.name)),e.push("</span>\n              </a>\n            ");e.push("\n          </div>\n          ")}e.push("\n        </form>\n      </div>\n\n      <p>\n        "),e.push(this.T("You're already registered with your email address if you've been in touch with our support team.")),e.push("<br>\n        "),this.C("user_lost_password")&&(e.push("\n          "),e.push(this.T("You can request your password")),e.push(' <a href="#password_reset">'),e.push(this.T("here")),e.push("</a>.\n        ")),e.push("\n      </p>\n\n    "),this.C("user_create_account")&&(e.push('\n      <hr>\n      <p>\n        <a href="#signup">'),e.push(this.T("Register as a new customer")),e.push("</a>\n      </p>\n    ")),e.push('\n    </div>\n  </div>\n  <div class="poweredBy">\n    <a href="https://zammad.org" target="_blank">'),e.push(this.Icon("logo")),e.push("</a>\n    "),e.push(this.T("Powered by")),e.push('\n    <a href="https://zammad.org" target="_blank">'),e.push(this.Icon("logotype","logotype")),e.push("</a>\n  </div>\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/maintenance"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="page-header">\n  <div class="page-header-title">\n    <h1>'),e.push(this.T("Maintenance")),e.push('<small></small></h1>\n  </div>\n</div>\n<div class="page-content">\n\n  <div class="settings-entry">\n    <div class="page-header-title">\n      <div class="zammad-switch zammad-switch--small js-modeSetting">\n         <input name="chat" type="checkbox" id="setting-mode" '),this.C("maintenance_mode")&&e.push("checked"),e.push('>\n         <label for="setting-mode"></label>\n      </div>\n      <h2>'),e.push(this.T("Mode")),e.push("</h2>\n    </div>\n    <p>\u26a0 "),e.push(this.T("Enable or disable the maintenance mode of Zammad. If enabled, _all non-administrators get logged out_ and _only administrators can start a new session_.")),e.push('</p>\n  </div>\n\n  <div class="settings-entry">\n    <div class="page-header-title">\n      <div class="zammad-switch zammad-switch--small js-loginSetting">\n         <input name="chat" type="checkbox" id="setting-login" '),this.C("maintenance_login")&&e.push("checked"),e.push('>\n         <label for="setting-login"></label>\n      </div>\n      <h2>@'),e.push(this.T("Login")),e.push("</h2>\n    </div>\n    <p>"),e.push(this.T("Put a message on the login page. To change it, click on the text area below and change it in-line.")),e.push('</p>\n    <div class="js-loginPreview"></div>\n  </div>\n\n  <div class="settings-entry">\n    <h2>'),e.push(this.T("Message")),e.push("</h2>\n    <p>"),e.push(this.T("Send a message to all logged in users.")),e.push('</p>\n    <form class="js-Message">\n      <div class="form-group">\n        <label for="maintenance-title">'),e.push(this.T("Title")),e.push('</label>\n        <div class="controls">\n          <input type="text" id="maintenance-title" name="head" class="form-control" required>\n        </div>\n      </div>\n      <div class="form-group">\n        <label for="maintenance-message">'),e.push(this.T("Message")),e.push('</label>\n        <div class="controls">\n          <div contenteditable id="maintenance-message" data-name="message" class="form-control form-control--multiline js-textarea richtext-content"></div>\n        </div>\n      </div>\n      <div class="form-group">\n        <label class="inline-label checkbox-replacement">\n          <input name="reload" type="checkbox" value="1">\n          '),e.push(this.Icon("checkbox","icon-unchecked")),e.push("\n          "),e.push(this.Icon("checkbox-checked","icon-checked")),e.push('\n          <span class="label-text">'),e.push(this.T("Reload application")),e.push('</span>\n        </label>\n      </div>\n      <button class="btn btn--primary js-submit">'),e.push(this.T("Send to clients")),e.push("</button>\n    </form>\n  </div>\n</div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/modal"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o,a,l;if(e.push('<div class="modal-dialog">\n  <form autocomplete="off">\n    <div class="modal-content">\n      <div class="modal-header">\n  '),this.buttonClose&&(e.push('\n        <div class="modal-close js-close">\n          '),e.push(this.Icon("diagonal-cross")),e.push("\n        </div>\n  ")),e.push("\n  "),this.head&&(e.push('\n        <h1 class="modal-title">'),this.headPrefix&&(e.push(this.T(this.headPrefix)),e.push(": ")),e.push(this.T(this.head)),e.push("</h1>\n  ")),e.push('\n      </div>\n      <div class="modal-body">\n      '),e.push(this.content),e.push('\n      </div>\n      <div class="modal-footer">\n  '),this.buttonCancel)e.push('\n        <div class="modal-leftFooter">\n          <a class="btn '),e.push(n(this.buttonCancelClass)),e.push(' js-cancel align-left" href="#">'),e.push(this.T(this.buttonCancel)),e.push("</a>\n        </div>\n  ");else if(this.leftButtons){for(e.push("\n    "),a=this.leftButtons,i=0,r=a.length;i<r;i++)t=a[i],e.push('\n        <div class="modal-leftFooter">\n          <div class="btn '),e.push(n(t.className)),e.push(' align-left" href="#">'),e.push(this.T(t.text)),e.push("</div>\n        </div>\n    ");e.push("\n  ")}for(e.push("\n  "),l=this.centerButtons,s=0,o=l.length;s<o;s++)t=l[s],e.push('\n        <div class="modal-centerFooter">\n          <div class="btn '),e.push(n(t.className)),e.push(' align-center">'),e.push(this.T(t.text)),e.push("</div>\n        </div>\n  ");e.push("\n  "),this.buttonSubmit&&(e.push('\n        <div class="modal-rightFooter">\n          <button type="submit" class="btn '),e.push(n(this.buttonClass)),e.push(' js-submit align-right">'),e.push(this.T(this.buttonSubmit)),e.push("</button>\n        </div>\n  ")),e.push("\n      </div>\n    </div>\n  </form>\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/monitoring"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r;if(e.push('<div class="page-header">\n  <div class="page-header-title">\n    <h1>'),e.push(this.T("Monitoring")),e.push('<small></small></h1>\n  </div>\n</div>\n<div class="page-content">\n\n  <div class="settings-entry">\n    <div class="page-header-title">\n      <h2>'),e.push(this.T("Current Token")),e.push('</h2>\n    </div>\n    <p><input class="js-select js-token" type="text" value="'),e.push(n(this.data.token)),e.push('" readonly></p>\n    <button class="btn btn--primary js-resetToken">'),e.push(this.T("Reset")),e.push('</button>\n  </div>\n\n  <div class="settings-entry">\n    <div class="page-header-title">\n      <h2>'),e.push(this.T("Health Check")),e.push("</h2>\n    </div>\n    <p>"),e.push(this.T("Health information can be retrieved as JSON using")),e.push(':</p>\n    <input class="js-select js-url" type="text" value="'),e.push(this.C("http_type")),e.push("://"),e.push(this.C("fqdn")),e.push("/"),e.push(this.C("api_path")),e.push("/monitoring/health_check?token="),e.push(n(this.data.token)),e.push('" readonly></p>\n  </div>\n\n  <div class="settings-entry">\n    <div class="page-header-title">\n      <h2>'),_.isEmpty(this.data.issues)?e.push(this.Icon("status","ok inline")):e.push(this.Icon("status","error inline")),e.push(" "),e.push(this.T("Current Status")),e.push("</h2>\n    </div>\n    <ul>\n      "),_.isEmpty(this.data.issues))e.push("\n        <li>"),e.push(this.T("no issues")),e.push("\n      ");else{for(e.push("\n        "),r=this.data.issues,t=0,s=r.length;t<s;t++)i=r[t],e.push("\n          <li>"),e.push(n(i)),e.push("\n        ");e.push("\n      ")}e.push("\n    </ul>\n    "),_.contains(this.data.actions,"restart_failed_jobs")&&(e.push('\n      <button class="btn btn--primary js-restartFailedJobs">'),e.push(this.T("Restart failed jobs")),e.push("</button>\n    ")),e.push("\n  </div>\n\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/navigation"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="search">\n  <form class="search-holder">\n    <input id="global-search" type="search" autocomplete="off">\n    '),e.push(this.Icon("magnifier")),e.push('\n    <div class="empty-search js-emptySearch">\n      '),e.push(this.Icon("diagonal-cross")),e.push('\n    </div>\n  </form>\n  <div class="logo js-toggleNotifications">\n    '),e.push(this.Icon("logo")),e.push('\n    <div class="activity-counter js-notificationsCounter"></div>\n  </div>\n  <div class="global-search-menu">\n    <a href="#search" class="global-search-detail-link nav-tab nav-tab--search js-details-link">\n      <div class="nav-tab-icon">\n        '),e.push(this.Icon("searchdetail")),e.push('\n      </div>\n      <div class="nav-tab-name flex u-textTruncate">\n        '),e.push(this.T("Show Search Details")),e.push("\n        "),e.push(this.Icon("long-arrow-right")),e.push('\n      </div>\n    </a>\n    <ul class="global-search-result js-global-search-result" role="menu"></ul>\n  </div>\n</div>\n<div class="menu js-menu"></div>\n<div class="tasks tasks-navigation"></div>\n'),_.isEmpty(this.user)||e.push('\n  <ul class="user-menu navbar-items-personal"></ul>\n'),e.push("\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/navigation/menu"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o,a,l;for(a=this.items,t=0,r=a.length;t<r;t++){if(i=a[t],e.push("\n  "),i.child){for(e.push('\n  <div class="dropdown'),this.openTab[i.target]&&e.push(" open"),e.push('">\n    <a href="'),e.push(n(i.target)),e.push('" class="menu-item js-'),e.push(i["class"]),e.push('MenuItem dropdown-toggle" data-toggle="dropdown">\n        '),e.push(this.Icon(i["class"],"menu-item-icon")),e.push('\n        <span class="menu-item-name flex">\n          '),e.push(this.T(i.name)),e.push("\n        </span>\n        "),e.push(this.Icon("arrow-down","dropdown-icon")),e.push('\n    </a>\n    <ul class="dropdown-menu dropdown-menu--light">\n      '),l=i.child,s=0,o=l.length;s<o;s++)i=l[s],e.push("\n        "),i.divider&&e.push('\n          <li class="divider"></li>\n        '),e.push("\n        "),i.navheader&&(e.push('\n          <li class="dropdown-header">'),e.push(this.T(i.navheader)),e.push("</li>\n        ")),e.push('\n        <li><a href="'),e.push(n(i.target)),e.push('">'),e.push(this.T(i.name)),void 0!==i.count&&(e.push('<span class="badge badge--text count">'),e.push(n(i.count)),e.push("</span>")),e.push("</a></li>\n      ");e.push("\n    </ul>\n  </div>\n  ")}else e.push('\n  <a class="menu-item js-'),e.push(i["class"]),e.push("MenuItem "),this.activeTab[i.target]&&e.push("is-active"),e.push('" href="'),e.push(n(i.target)),e.push('" data-key="'),e.push(i.key),e.push('">\n    '),e.push(this.Icon(i["class"],"menu-item-icon")),e.push('\n    <span class="menu-item-name">\n      '),e.push(this.T(i.name)),e.push("\n    </span>\n    "),void 0!==i.counter&&0!==i.counter&&(e.push('\n      <span class="counter badge badge--big">'),e.push(n(i.counter)),e.push("</span>\n    ")),e.push("\n    "),void 0!==i["switch"]&&(e.push('\n      <span class="zammad-switch zammad-switch--dark zammad-switch--small zammad-switch--green js-switch">\n         <input type="checkbox" id="'),e.push(i["class"]),e.push('-switch" '),i["switch"]&&e.push("checked"),e.push('>\n         <label for="'),e.push(i["class"]),e.push('-switch"></label>\n      </span>\n    ')),e.push("\n  </a>\n  ");e.push("\n")}e.push("\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/navigation/personal"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o,a,l,c;for(l=this.items,t=0,o=l.length;t<o;t++){if(s=l[t],e.push("\n  "),_.isEmpty(s.child))e.push('\n    <li class="settings">\n      <a class="list-button fit horizontal centered" href="'),e.push(n(s.target)),e.push('" title="'),e.push(this.Ti(s.name)),e.push('">\n        '),e.push(this.Icon(s.icon,"user-menu-icon")),e.push("\n      </a>\n    </li>\n  ");else{for(e.push('\n    <li class="'),s["class"]&&e.push(s["class"]),e.push(" dropup "),this.openTab[s.target]&&e.push("open"),e.push('">\n      <a class="list-button dropdown-toggle js-action" data-toggle="dropdown" href="'),e.push(n(s.target)),e.push('" title="'),s.translate?e.push(this.Ti(s.name)):e.push(n(s.name)),e.push('">\n        <span class="dropdown-nose"></span>\n        '),"user"===s["class"]?e.push('\n          <span class="js-avatar"></span>\n        '):(e.push("\n          "),e.push(this.Icon(s.icon,"user-menu-icon")),e.push("\n        ")),e.push('\n      </a>\n      <ul class="dropdown-menu dropdown-menu--light" role="menu">\n        '),c=s.child,i=r=0,a=c.length;r<a;i=++r)s=c[i],e.push("\n          "),s.divider&&i>0&&e.push('\n            <li class="divider"></li>\n          '),e.push("\n          "),s.navheader&&(e.push('\n            <li class="dropdown-header">'),e.push(this.T(s.navheader)),e.push("</li>\n          ")),e.push('\n          <li>\n            <a href="'),e.push(n(s.target)),e.push('" class="horizontal center">\n              <span class="flex u-textTruncate">'),s.translate?e.push(this.T(s.name)):e.push(n(s.name)),e.push("</span>\n              "),void 0!==s.count&&(e.push('<span class="badge badge--text count">'),e.push(n(s.count)),e.push("</span>")),e.push("\n              "),s.iconClass&&e.push(this.Icon(s.iconClass)),e.push("\n            </a>\n          </li>\n        ");e.push("\n      </ul>\n    </li>\n  ")}e.push("\n")}e.push("\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/navigation/result"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o,a,l;l=this.result;for(t in l){for(o=l[t],e.push("\n  "),i&&o.length>0&&e.push(' <li class="divider"></li> '),e.push("\n  "),i=!0,e.push("\n  "),s=0,a=o.length;s<a;s++)r=o[s],e.push('\n    <li>\n      <a href="'),e.push(r.url),e.push('" class="nav-tab nav-tab--search '),e.push(n(r["class"])),e.push('" data-id="'),e.push(n(r.id)),e.push('">\n        <div class="nav-tab-icon">\n          '),e.push(this.Icon(r.icon,r.iconClass)),e.push('\n        </div>\n        <span class="nav-tab-name flex u-textTruncate">'),e.push(n(r.display)),e.push("</span>\n      </a>\n    </li>\n  ");e.push("\n")}e.push("\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/navigation/vertical"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o,a,l;for(a=this.items,t=0,r=a.length;t<r;t++){if(i=a[t],e.push("\n  "),i.child){for(e.push('\n  <div class="dropdown'),this.openTab[i.target]&&e.push(" open"),e.push('">\n    <a href="'),e.push(n(i.target)),e.push('" class="menu-item js-'),e.push(i["class"]),e.push('MenuItem dropdown-toggle" data-toggle="dropdown">\n        '),e.push(this.Icon(i["class"],"menu-item-icon")),e.push('\n        <span class="menu-item-name flex">\n          '),e.push(this.T(i.name)),e.push("\n        </span>\n        "),e.push(this.Icon("arrow-down","dropdown-icon")),e.push('\n    </a>\n    <ul class="dropdown-menu dropdown-menu--light">\n      '),l=i.child,s=0,o=l.length;s<o;s++)i=l[s],e.push("\n        "),i.divider&&e.push('\n          <li class="divider"></li>\n        '),e.push("\n        "),i.navheader&&(e.push('\n          <li class="dropdown-header">'),e.push(this.T(i.navheader)),e.push("</li>\n        ")),e.push('\n        <li><a href="'),e.push(n(i.target)),e.push('">'),e.push(this.T(i.name)),void 0!==i.count&&(e.push('<span class="badge badge--text count">'),e.push(n(i.count)),e.push("</span>")),e.push("</a></li>\n      ");e.push("\n    </ul>\n  </div>\n  ")}else e.push('\n  <a class="menu-item js-'),e.push(i["class"]),e.push("MenuItem "),this.activeTab[i.target]&&e.push("is-active"),e.push('" href="'),e.push(n(i.target)),e.push('" data-key="'),e.push(i.key),e.push('">\n    '),e.push(this.Icon(i["class"],"menu-item-icon")),e.push('\n    <span class="menu-item-name">\n      '),e.push(this.T(i.name)),e.push("\n    </span>\n    "),void 0!==i.counter&&0!==i.counter&&(e.push('\n      <span class="counter badge badge--big">'),e.push(n(i.counter)),e.push("</span>\n    ")),e.push("\n    "),void 0!==i["switch"]&&(e.push('\n      <span class="zammad-switch zammad-switch--dark zammad-switch--small zammad-switch--green js-switch">\n         <input type="checkbox" id="'),e.push(i["class"]),e.push('-switch" '),i["switch"]&&e.push("checked"),e.push('>\n         <label for="'),e.push(i["class"]),e.push('-switch"></label>\n      </span>\n    ')),e.push("\n  </a>\n  ");e.push("\n")}e.push("\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/notify"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="noty_message">\n  '),"error"===this.type&&(e.push("\n    "),e.push(this.Icon("diagonal-cross","icon-error")),e.push("\n  ")),e.push("\n  "),"success"===this.type&&(e.push("\n    "),e.push(this.Icon("checkmark")),e.push("\n  ")),e.push('\n  <span class="noty_text"></span>\n</div>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/object_manager/attribute"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="js-data">\n  <div class="js-dataType"></div>\n  <div class="js-dataMap" style="padding: 30px 0 0 30px;"></div>\n  <div class="" style="padding-bottom: 10px">'),e.push(this.T("Here you define which authorization has access to the attribute.")),e.push('</div>\n  <div class="js-dataScreens"></div>\n</div>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/object_manager/attribute/autocompletion"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div>\nAuto-Vervollst\xe4ndigung\n  <div class="js-autocompletionDefault"></div>\n  <div class="js-autocompletionUrl"></div>\n  <div class="js-autocompletionMethod"></div>\n</div>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/object_manager/attribute/boolean"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div>\n  <table class="settings-list" style="width: 100%;">\n    <thead>\n      <tr>\n        <th>'),e.push(this.T("Key")),e.push("\n        <th>"),e.push(this.T("Display")),e.push('\n        <th style="width: 30px">'),e.push(this.T("Default")),e.push('\n    </thead>\n    <tbody>\n      <tr>\n        <td class="settings-list-control-cell">\n          true\n        <td class="settings-list-control-cell">\n          <input class="form-control form-control--small js-valueTrue" type="text" value="'),this.params.data_option&&this.params.data_option.options&&e.push(n(this.params.data_option.options[!0])),e.push('" name="data_option::options::true" placeholder="'),e.push(this.T("yes")),e.push('" required/>\n        <td class="settings-list-row-control">\n          <input class="js-selected js-boolean" type="radio" name="data_option::default" value="true" '),this.params.data_option&&"true"===this.params.data_option["default"]&&e.push("checked"),e.push('/>\n      <tr>\n        <td class="settings-list-control-cell">\n          false\n        <td class="settings-list-control-cell">\n          <input class="form-control form-control--small js-valueFalse" type="text" value="'),
this.params.data_option&&this.params.data_option.options&&e.push(n(this.params.data_option.options[!1])),e.push('" name="data_option::options::false" placeholder="'),e.push(this.T("no")),e.push('" required/>\n        <td class="settings-list-row-control">\n          <input class="js-selected js-boolean" type="radio" name="data_option::default" value="false" '),this.params.data_option&&"false"===this.params.data_option["default"]&&e.push("checked"),e.push("/>\n    </tbody>\n  </table>\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/object_manager/attribute/date"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div>\n  <div class="js-dateFuture"></div>\n  <div class="js-datePast"></div>\n  <div class="js-dateDiff"></div>\n</div>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/object_manager/attribute/datetime"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div>\n  <div class="js-datetimeFuture"></div>\n  <div class="js-datetimePast"></div>\n  <div class="js-datetimeDiff"></div>\n</div>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/object_manager/attribute/input"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div>\n  <div class="js-inputDefault"></div>\n  <div class="js-inputType"></div>\n  <div class="js-inputMaxlength"></div>\n</div>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/object_manager/attribute/integer"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div>\n  <div class="js-integerDefault"></div>\n  <div class="js-integerMin"></div>\n  <div class="js-integerMax"></div>\n</div>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/object_manager/attribute/select"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o,a;if(e.push('<div>\n  <table class="settings-list js-Table" style="width: 100%;">\n    <thead>\n      <tr>\n        <th>'),e.push(this.T("Key")),e.push("\n        <th>"),e.push(this.T("Display")),e.push('\n        <th style="width: 30px">'),e.push(this.T("Default")),e.push('\n        <th style="width: 30px">'),e.push(this.T("Action")),e.push("\n    </thead>\n    <tbody>\n      "),this.params.data_option&&this.params.data_option.sorted){for(e.push("\n        "),o=this.params.data_option.sorted,i=0,r=o.length;i<r;i++)a=o[i],s=a[0],t=a[1],e.push('\n        <tr>\n          <td class="settings-list-control-cell">\n            <input class="form-control form-control--small js-key" type="text" value="'),e.push(n(s)),e.push('" required/>\n          <td class="settings-list-control-cell">\n            <input class="form-control form-control--small js-value" type="text" value="'),e.push(n(t)),e.push('" name="data_option::options::'),e.push(n(s)),e.push('" required/>\n          <td class="settings-list-row-control">\n            <input class="js-selected" type="radio" name="data_option::default" value="'),e.push(n(s)),e.push('" '),this.params.data_option["default"]===s&&e.push("checked"),e.push('/>\n          <td class="settings-list-row-control">\n            <div class="btn btn--text js-remove">\n              '),e.push(this.Icon("trash")),e.push(" "),e.push(this.T("Remove")),e.push("\n            </div>\n        ");e.push("\n      ")}e.push('\n      <tr>\n        <td class="settings-list-control-cell">\n          <input class="form-control form-control--small js-key" type="text" placeholder="'),e.push(this.T("Key")),e.push('"/>\n        <td class="settings-list-control-cell">\n          <input class="form-control form-control--small js-value" type="text" placeholder="'),e.push(this.T("Display")),e.push('"/>\n        <td class="settings-list-row-control">\n          <input class="js-selected" type="radio"/>\n        <td class="settings-list-row-control">\n          <div class="btn btn--text btn--create js-add">\n            '),e.push(this.Icon("plus-small")),e.push(" "),e.push(this.T("Add")),e.push('\n          </div>\n    </tbody>\n  </table>\n  <table class="hidden">\n    <tbody>\n      <tr class="js-template">\n        <td class="settings-list-control-cell">\n          <input class="form-control form-control--small js-key" type="text" value="" required/>\n        <td class="settings-list-control-cell">\n          <input class="form-control form-control--small js-value" type="text" value="" required/>\n        <td class="settings-list-row-control">\n          <input class="js-selected" type="radio" name="data_option::default"/>\n        <td class="settings-list-row-control">\n          <div class="btn btn--text js-remove">\n            '),e.push(this.Icon("trash")),e.push(" "),e.push(this.T("Remove")),e.push("\n          </div>\n  </table>\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/object_manager/attribute/tree_select"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div>\n  <table class="settings-list js-Table" style="width: 100%;">\n    <thead>\n      <tr>\n        <th>'),e.push(this.T("Key")),e.push('\n        <th style="width: 180px">'),e.push(this.T("Action")),e.push('\n      </tr>\n    </thead>\n    <tbody class="js-treeTable"></tbody>\n  </table>\n  <table class="hidden">\n    <tbody>\n      <tr class="js-template">\n        <td class="settings-list-control-cell">\n          <input class="form-control form-control--small js-key" type="text" value="" data-level="" required/>\n        <td class="settings-list-row-control">\n          <div class="btn btn--text js-remove" style="margin-left: -10px;">\n            '),e.push(this.Icon("trash")),e.push('\n          </div>\n          <div class="btn btn--text btn--create js-addChild" style="margin-left: -10px;">\n            '),e.push(this.Icon("plus-small")),e.push(" "),e.push(this.T("children")),e.push('\n          </div>\n          <div class="btn btn--text btn--create js-addRow" style="margin-left: -10px;">\n            '),e.push(this.Icon("plus-small")),e.push(" "),e.push(this.T("row")),e.push("\n          </div>\n      </tr>\n    </tbody>\n  </table>\n</div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/object_manager/index"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o,a,l;if(e.push('<div class="page-header">\n  <div class="page-header-title">\n    <h1>'),e.push(this.T(this.head)),e.push(" <small>"),e.push(this.T("Object Manager")),e.push('</small></h1>\n  </div>\n  <div class="page-header-meta">\n  <!--\n    <a class="btn js-restore">'),e.push(this.T("Restore Defaults")),e.push('</a>\n  -->\n    <a class="btn btn--success js-new">'),e.push(this.T("New Attribute")),e.push('</a>\n  </div>\n</div>\n<div class="page-content">\n  '),!_.isEmpty(this.itemsToChange)){for(e.push('\n  <div class="box box--message">\n    <h2>'),e.push(this.T("Database Update required")),e.push("</h2>\n    <p>\n      "),e.push(this.T("Changes were made that require a database update.")),e.push("\n      "),e.push(this.T("This might take some time where the system can't be used.")),e.push("\n      "),e.push(this.T("Please execute database changes only in a maintenance time-slot.")),e.push("\n    </p>\n    <p>\n      "),e.push(this.T("Changes")),e.push(":\n      <ul>\n      "),a=this.itemsToChange,t=0,r=a.length;t<r;t++)i=a[t],e.push("\n        <li>\n          "),!0===i.to_create?(e.push("\n            "),e.push(this.T("Create")),e.push(": "),e.push(n(i.object)),e.push("."),e.push(n(i.name)),e.push(" ("),e.push(n(i.data_type)),e.push(")\n          ")):!0===i.to_delete?(e.push("\n            "),e.push(this.T("Delete")),e.push(": "),e.push(n(i.object)),e.push("."),e.push(n(i.name)),e.push(" ("),e.push(n(i.data_type)),e.push(")\n          ")):(i.to_migrate||!0===i.to_config)&&(e.push("\n            "),e.push(this.T("Changed")),e.push(": "),e.push(n(i.object)),e.push("."),e.push(n(i.name)),e.push(" ("),e.push(n(i.data_type)),e.push(")\n          ")),e.push("\n      ");e.push('\n      </ul>\n    </p>\n    <div class="box-controls">\n      <div class="btn btn--text btn--secondary js-discard">'),e.push(this.T("Discard Changes")),e.push('</div>\n      <div class="btn btn--primary js-execute align-right">'),e.push(this.T("Update Database")),e.push("</div>\n    </div>\n  </div>\n  ")}for(e.push('\n<!--\n  <div class="box box--message">\n    <div class="box-progress">\n      <div class="box-progress-title">'),e.push(this.T("Updating Database")),e.push('</div>\n      <div class="box-progress-body">\n        <progress max="100" value="50"></progress>\n      </div>\n    </div>\n  </div>\n-->\n  <table class="table table-striped table-hover is-disabled">\n    <thead>\n      <tr>\n        <th class="">'),e.push(this.T("Display")),e.push('</th>\n        <th class="">'),e.push(this.T("Name")),e.push('</th>\n        <th class="" style="width: 200px;">'),e.push(this.T("Type")),e.push('</th>\n        <th class="" style="width: 140px;">'),e.push(this.T("Action")),e.push("</th>\n      </tr>\n    </thead>\n    <tbody>\n      "),l=this.items,s=0,o=l.length;s<o;s++)i=l[s],e.push('\n      <tr class="'),!1===i.editable?e.push("is-grayed-out u-notAllowed"):(!1===i.active&&e.push("is-inactive"),e.push(" js-edit u-clickable")),e.push('" data-id="'),e.push(i.id),e.push('">\n        <td>'),e.push(n(i.display)),e.push("</td>\n        <td>"),e.push(n(i.name)),e.push("</td>\n        <td>"),e.push(n(i.data_type)),e.push("</td>\n        <td>\n          "),!0===i.to_create?(e.push("\n            "),e.push(this.T("will be created")),e.push("\n          ")):!0===i.to_delete?(e.push("\n            "),e.push(this.T("will be deleted")),e.push("\n          ")):!0===i.to_migrate||!0===i.to_config?(e.push("\n            "),e.push(this.T("has changed")),e.push("\n          ")):i.editable&&(e.push("\n            "),i.deletable?(e.push('\n              <a href="#" class="js-delete" title="'),e.push(this.Ti("Delete")),e.push('">'),e.push(this.Icon("trash")),e.push("</a>\n            ")):(e.push('\n              <span class="is-disabled" title="'),e.push(n(i.not_deletable_reason)),e.push('">'),e.push(this.Icon("trash")),e.push("</span>\n            ")),e.push("\n          ")),e.push("\n        </td>\n      </tr>\n      ");e.push("\n    </tbody>\n  </table>\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/object_manager/screens"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o,a;e.push('<div>\n  <table class="settings-list" style="width: 100%;">\n    <thead>\n      <tr>\n        <th>'),e.push(this.T("Permissions")),e.push("\n        <th>"),e.push(this.T("Screen")),e.push('\n        <th style="width: 50%;">'),e.push(this.T("Options")),e.push("\n    </thead>\n    <tbody>\n      "),s=this.data;for(r in s){a=s[r],e.push('\n        <tr>\n          <td class="settings-list-control-cell">\n            '),e.push(n(r)),e.push('\n          <td class="settings-list-control-cell">\n          <td class="settings-list-row-control">\n        ');for(o in a){i=a[o],e.push('\n        <tr>\n          <td class="settings-list-control-cell">\n          <td class="settings-list-control-cell">\n            '),e.push(n(o)),e.push('\n          <td class="settings-list-row-control">\n            ');for(t in i)i[t],e.push("\n              "),e.push(this.T(t)),e.push(': <input class="js-boolean" name="screens::'),e.push(n(o)),e.push("::"),e.push(n(r)),e.push("::"),e.push(n(t)),e.push('" type="checkbox" '),this.params&&this.params.screens&&this.params.screens[o]&&this.params.screens[o][r]&&!0===this.params.screens[o][r][t]&&e.push("checked"),e.push(' value="true">\n            ');e.push("\n        ")}e.push("\n      ")}e.push("\n    </tbody>\n  </table>\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/organization_profile/index"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="profile">\n  <div class="profile-window">\n    <div class="profile-section vertical centered">\n      <div class="align-right profile-action js-action"></div>\n      <div class="profile-organizationIcon">\n        '),e.push(this.Icon("organization")),e.push('\n      </div>\n      <h1 class="js-name"></h1>\n    </div>\n    <div class="js-object-container"></div>\n    <div class="profile-section js-ticket-stats"></div>\n  </div>\n</div>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/organization_profile/member"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="userList-entry">\n  '),e.push(this.user.avatar("40")),e.push('\n  <a href="'),e.push(this.user.uiUrl()),e.push('" class="userList-name user-popover" data-id="'),e.push(this.user.id),e.push('">'),e.push(n(this.user.displayName())),e.push("</a>\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/organization_profile/object"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r;for(e.push('<div class="profile-section">\n  <div class="profile-details horizontal wrap">\n    '),s=this.organizationData,t=0,i=s.length;t<i;t++)r=s[t],e.push("\n      "),"richtext"===r.tag?(e.push('\n        <div class="profile-detailsEntry" style="width: 100%;">\n          <label>'),e.push(this.T(r.display)),e.push('</label>\n          <div contenteditable="true" data-name="'),e.push(n(r.name)),e.push('" data-type="update" data-placeholder="'),e.push(this.Ti("Add a Note")),e.push('">'),e.push(this.organization[r.name]),e.push("</div>\n        </div>\n      ")):(e.push("\n        "),this.organization[r.name]&&(e.push('\n          <div class="profile-detailsEntry">\n            <label>'),e.push(this.T(r.display)),e.push("</label>\n            "),e.push(this.P(this.organization,r.name)),e.push("\n          </div>\n        ")),e.push("\n      ")),e.push("\n    ");e.push("\n  </div>\n</div>\n"),this.organization.members&&(e.push('\n<div class="profile-section profile-memberSection">\n  <label>'),e.push(this.T("Members")),e.push('</label>\n  <div class="userList js-userList"></div>\n</div>\n')),e.push("\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/package"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o,a,l,c;for(e.push('<div class="page-header-title">\n  <h1>'),e.push(this.T("Package")),e.push(" <small>"),e.push(this.T("Management")),e.push('</small></h1>\n</div>\n\n<div class="page-content">\n  <!--\n  <ul class="nav nav-tabs nav-stacked">\n    <li class=""><a data-type="" >'),e.push(this.T("Installed")),e.push('</a></li>\n    <li class=""><a data-type="" >'),e.push(this.T("Store")),e.push('</a></li>\n  </ul>\n  -->\n  <p>\n    <form action="'),e.push(n(App.Config.get("api_path"))),e.push('/packages" method="post" enctype="multipart/form-data" class="horizontal center">\n      <input type="hidden" name="authenticity_token" value="'),e.push(n(App.Ajax.token())),e.push('"/>\n      <input type="file" name="file_upload"/>\n      <button class="align-right btn btn--primary" type="submit">'),e.push(this.T("Install Package")),e.push('</button>\n    </form>\n  </p>\n\n  <table class="table table-striped table-hover">\n    <thead>\n      <tr>\n        <th>'),e.push(this.T("Name")),e.push("</th>\n        <th>"),e.push(this.T("Version")),e.push("</th>\n        <th>"),e.push(this.T("Vendor")),e.push("</th>\n        <th>"),e.push(this.T("State")),e.push("</th>\n        <th>"),e.push(this.T("Action")),e.push("</th>\n      </tr>\n    </thead>\n    <tbody>\n    "),l=this.packages,i=0,o=l.length;i<o;i++){for(s=l[i],e.push('\n      <tr data-id="'),e.push(n(s.id)),e.push('">\n        <td>'),e.push(n(s.name)),e.push("</td>\n        <td>"),e.push(n(s.version)),e.push('</td>\n        <td><a href="'),e.push(s.url),e.push('" target="_blank">'),e.push(n(s.vendor)),e.push("</a></td>\n        <td>"),e.push(this.T(s.state)),e.push("</td>\n        <td>"),c=s.action,r=0,a=c.length;r<a;r++)t=c[r],e.push('<a href="#" class="action" data-type="'),e.push(n(t)),e.push('">'),e.push(this.T(t)),e.push("</a><br/>");e.push("</td>\n      </tr>\n    ")}e.push("\n    </tbody>\n  </table>\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/password/reset"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="reset_password fullscreen">\n  <div class="fullscreen-center">\n    <div class="hero-unit fullscreen-body">\n      '),this.sent?(e.push("\n        <h2>"),e.push(this.T("We've sent password reset instructions to your email address.")),e.push("<small></small></h2>\n        <p>"),e.push(this.T("If you don't receive instructions within a minute or two, check your email's spam and junk filters, or try resending your request.")),e.push('</p>\n        <a href="#" class="subtle retry">&raquo; '),e.push(this.T("again")),e.push(" &laquo;</a>\n      ")):(e.push("\n        <h2>"),e.push(this.T("Forgot your password?")),e.push('<small></small></h2>\n        <form class="form-password">\n          <div class="form-password-item"></div>\n          <div class="form-controls">\n            <a class="btn btn--text btn--subtle js-cancel" href="#login">'),e.push(this.T("Cancel & Go Back")),e.push('</a>\n            <button class="btn btn--primary js-submit align-right">'),e.push(this.T("Submit")),e.push("</button>\n          </div>\n        </form>\n      ")),e.push("\n    </div>\n  </div>\n</div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/password/reset_change"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="fullHeight vertical center justified reset_password fit">\n  <div class="hero-unit">\n    <h2>'),e.push(this.T("Choose your new password.")),e.push('<small></small></h2>\n    <form>\n      <div class="form-password-change"></div>\n      <div class="form-controls">\n        <a class="btn btn--text btn--subtle js-cancel" href="#/">'),e.push(this.T("Cancel & Go Back")),e.push('</a>\n        <button class="btn btn--primary js-submit align-right">'),e.push(this.T("Submit")),e.push("</button>\n      </div>\n    </form>\n  </div>\n</div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/password/reset_failed"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="reset_password fullscreen">\n  <div class="fullscreen-center">\n    <div class="hero-unit fullscreen-body">\n      <h2>'),e.push(this.T(this.head)),e.push("<small></small></h2>\n      <p>"),e.push(this.message),e.push('</p>\n      <a href="#password_reset" class="btn btn--text btn--secondary retry">&raquo; '),e.push(this.T("try again")),e.push(" &laquo;</a>\n    </div>\n  </div>\n</div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/popover/organization"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o,a,l,c;for(e.push("<hr>\n"),o=this.organizationData,t=0,s=o.length;t<s;t++)l=o[t],e.push("\n  "),this.organization[l.name]&&(e.push('\n    <div class="popover-block">\n      <label>'),e.push(this.T(l.display)),e.push("</label>\n      "),e.push(this.P(this.organization,l.name)),e.push("\n    </div>\n  ")),e.push("\n");if(e.push("\n</div>\n"),this.organization.members){for(e.push('\n  <hr>\n  <div class="popover-block">\n    <label>'),e.push(this.T("Members")),e.push("</label>\n    "),a=this.organization.members,i=0,r=a.length;i<r;i++)c=a[i],e.push('\n      <div class="person">'),e.push(n(c.displayName())),e.push("</div>\n    ");e.push("\n  </div>\n")}e.push("\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/popover/ticket"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push("<div>\n  "),e.push(this.Icon(this.ticket.icon(),this.ticket.iconClass())),e.push(' <span class="'),e.push(this.T(this.ticket.iconTextClass())),e.push('">'),e.push(this.ticket.iconTitle()),e.push('</span>\n</div>\n<hr>\n<div class="popover-block">\n  <label>'),e.push(this.T("Agent")),e.push('</label>\n  <div class="person">\n    '),e.push(n(this.ticket.owner.displayName())),e.push("\n    "),this.ticket.owner.organization&&(e.push('\n      <span class="organization">'),e.push(n(this.ticket.owner.organization.displayName())),e.push("</span>\n    ")),e.push('\n  </div>\n</div>\n<div class="popover-block">\n  <label>'),e.push(this.T("Customer")),e.push('</label>\n  <div class="person">\n    '),e.push(n(this.ticket.customer.displayName())),e.push("\n    "),this.ticket.customer.organization&&(e.push('\n      <span class="organization">'),e.push(n(this.ticket.customer.organization.displayName())),e.push("</span>\n    ")),e.push('\n  </div>\n</div>\n<hr>\n<div class="horizontal two-columns">\n  <div class="column">\n    <label>#</label>\n    <div class="u-textTruncate">'),e.push(this.P(this.ticket,"number")),e.push('</div>\n  </div>\n  <div class="column">\n    <label>'),e.push(this.T("Priority")),e.push('</label>\n    <div class="u-textTruncate">'),e.push(this.P(this.ticket,"priority")),e.push('</div>\n  </div>\n  <div class="column">\n    <label>'),e.push(this.T("Created")),e.push('</label>\n    <div class="u-textTruncate">'),e.push(this.P(this.ticket,"created_at")),e.push('</div>\n  </div>\n  <div class="column">\n    <label>'),e.push(this.T("Group")),e.push('</label>\n    <div class="u-textTruncate">'),e.push(this.P(this.ticket,"group")),e.push("</div>\n  </div>\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/popover/user"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o,a,l,c,u,p,h,d,f;for(this.user.organization&&(e.push('\n<div class="user-organization"><a href="'),e.push(this.user.organization.uiUrl()),e.push('">'),e.push(n(this.user.organization.displayName())),e.push("</a></div>\n")),e.push("\n<hr>\n"),p=this.userData,i=0,a=p.length;i<a;i++)f=p[i],e.push("\n  "),this.user[f.name]&&(e.push('\n  <div class="popover-block">\n    <label>'),e.push(this.T(f.display)),e.push("</label>\n    "),e.push(this.P(this.user,f.name)),e.push("\n  </div>\n  ")),e.push("\n");if(e.push("\n"),!_.isEmpty(this.user.accounts)){e.push('\n    <div class="popover-block">\n      <label>'),e.push(this.T("Linked Accounts")),e.push("</label>\n      ");for(t in this.user.accounts)e.push('\n        <a href="'),e.push(n(this.user.accounts[t].link)),e.push('" target="_blank">'),e.push(n(t)),e.push("</a>\n      ");e.push("\n    </div>\n")}if(e.push("\n"),!_.isEmpty(this.user.links)){for(e.push("\n  "),h=this.user.links,r=0,l=h.length;r<l;r++){for(u=h[r],e.push('\n    <div class="popover-block">\n      <label>'),e.push(this.T(u.title)),e.push("</label>\n      "),d=u.items,o=0,c=d.length;o<c;o++)s=d[o],e.push("\n        "),s.url?(e.push('\n          <a href="'),e.push(n(s.url)),e.push('" title="'),e.push(this.Ti(s.title)),e.push('" style="'),e.push(n(s.style)),e.push('" data-type="'),e.push(n(s.data)),e.push('" class="'),e.push(n(s["class"])),e.push('" '),u.new_window&&e.push('target="_blank"'),e.push(">\n        ")):(e.push('\n          <span title="'),e.push(this.Ti(s.title)),e.push('" style="'),e.push(n(s.style)),e.push('" data-type="'),e.push(n(s.data)),e.push('" class="'),e.push(n(s["class"])),e.push('">\n        ')),e.push("\n          "),e.push(this.T(s.name)),e.push(" "),void 0!==s.count&&(e.push('<span class="count">('),e.push(n(s.count)),e.push(")</span>")),e.push("\n        "),s.url?e.push("\n          </a>\n        "):e.push("\n          </span>\n        "),e.push("\n      ");e.push("\n    </div>\n  ")}e.push("\n")}e.push("\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/popover/user_ticket_list"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r;for(e.push('<ol class="tasks tasks--standalone">\n  '),s=this.tickets,t=0,i=s.length;t<i;t++)r=s[t],e.push('\n  <li class="task">\n    <div class="icon-holder" title="'),e.push(r.iconTitle()),e.push('">\n      '),e.push(this.Icon("task-state",r.iconClass())),e.push('\n    </div>\n    <div class="task-text">\n      <a class="name" data-id="'),e.push(r.id),e.push('" href="'),e.push(r.uiUrl()),e.push('">#'),e.push(n(r.number)),e.push(" "),e.push(n(r.title)),e.push("</a>\n      "),e.push(this.humanTime(r.created_at,!1,"time")),e.push("\n    </div>\n  </li>\n  ");e.push("\n</ol>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/profile/avatar-holder"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="avatar-holder">\n  <span class="avatar size-80" data-avatar-id="'),e.push(this.avatar.id),e.push('" style="background-image: url('),e.push(this.src),e.push(')"></span>\n  <div class="avatar-delete">\n    '),e.push(this.Icon("diagonal-cross")),e.push("\n  </div>\n</div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/profile/avatar"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,n,i,s,r;for(e.push('<div class="page-header">\n  <div class="page-header-title">\n    <h1>'),e.push(this.T("Avatar")),e.push('</h1>\n  </div>\n  <div class="page-header-meta">\n  '),this.webcamSupport&&(e.push('\n    <div class="btn btn--success js-openCamera">'),e.push(this.T("Camera")),e.push("</div>\n  ")),e.push('\n    <div class="btn btn--success fileUpload">'),e.push(this.T("Upload")),e.push('<input type="file" class="js-upload" accept="image/*"></div>\n  </div>\n</div>\n<div class="page-content avatar-gallery">\n  '),r=this.avatars,i=0,s=r.length;i<s;i++)t=r[i],
e.push('\n  <div class="avatar-holder">\n    '),t.initial?(e.push("\n      "),n="",e.push("\n      "),t["default"]&&(e.push("\n      "),n="is-active",e.push("\n      ")),e.push("\n      "),e.push(App.Session.get().avatar("80","",n,!0,t)),e.push("\n    ")):(e.push('\n      <span class="avatar size-80 '),t["default"]&&e.push("is-active"),e.push('" data-avatar-id="'),e.push(t.id),e.push('" style="background-image: url('),e.push(t.content),e.push(')"></span>\n      '),t.deletable&&(e.push('\n        <div class="avatar-delete">\n          '),e.push(this.Icon("diagonal-cross")),e.push("\n        </div>\n      ")),e.push("\n    ")),e.push("\n  </div>\n  ");e.push("\n</div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/profile/calendar_subscriptions"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s;e.push('<div class="page-header">\n  <div class="page-header-title">\n    <h1>'),e.push(this.T("Calendar")),e.push('</h1>\n  </div>\n</div>\n<div class="page-content">\n  <h2>'),e.push(this.T("Ticket Subscriptions")),e.push("</h2>\n\n  <p>"),e.push(this.T("See your tickets from within your favorite calendar by adding the following URL to your calendar app.")),e.push('</p>\n\n  <label for="calendar-subscription-url">'),e.push(this.T("URL")),e.push('</label>\n  <form class="form--flexibleWidth">\n    <div class="form-group">\n      <div class="controls">\n        <input type="url" class="form-control js-select" readonly value="'),e.push(n(this.baseurl)),e.push('/ical/tickets" id="calendar-subscription-url">\n      </div>\n    </div>\n  </form>\n\n  <h3>'),e.push(this.T("Subscription Settings")),e.push('</h3>\n  <div class="form-group">\n    <div class="formGroup-label">\n      <label for="notification-sound">'),e.push(this.T("Alarm")),e.push('</label>\n    </div>\n    <div class="controls">\n      <label class="checkbox-replacement inline-label">\n        <input type="checkbox" name="alarm" value="true" '),this.preferences.alarm&&e.push("checked"),e.push("/>\n        "),e.push(this.Icon("checkbox","icon-unchecked")),e.push("\n        "),e.push(this.Icon("checkbox-checked","icon-checked")),e.push('\n        <span class="label-text">'),e.push(this.T("Add alarm to pending reminder and escalated tickets.")),e.push('</span>\n      </label>\n    </div>\n  </div>\n  <table class="settings-list">\n    <thead>\n      <tr>\n        <th style="white-space: nowrap;">'),e.push(this.T("Status Type")),e.push('\n        <th colspan="2">'),e.push(this.T("Options")),e.push('\n        <th width="100%">'),e.push(this.T("Direct URL")),e.push("\n      </tr>\n    </thead>\n    <tbody>\n      "),i=this.preferences;for(s in i)t=i[s],e.push("\n        "),_.isObject(t)&&(e.push('\n          <tr>\n            <td style="text-transform: capitalize">\n              '),e.push(n(this.translationTable[s])),e.push('\n            <td>\n              <label class="inline-label checkbox-replacement">\n                <input type="checkbox" name="'),e.push(n(s)),e.push('/own"'),e.push(n(t.own?" checked":void 0)),e.push(">\n                "),e.push(this.Icon("checkbox","icon-unchecked")),e.push("\n                "),e.push(this.Icon("checkbox-checked","icon-checked")),e.push('\n                <span class="label-text">'),e.push(this.T("My Tickets")),e.push('</span>\n              </label>\n            <td>\n              <label class="inline-label checkbox-replacement">\n                <input type="checkbox" name="'),e.push(n(s)),e.push('/not_assigned"'),e.push(n(t.not_assigned?" checked":void 0)),e.push(">\n                "),e.push(this.Icon("checkbox","icon-unchecked")),e.push("\n                "),e.push(this.Icon("checkbox-checked","icon-checked")),e.push('\n                <span class="label-text">'),e.push(this.T("Not Assigned")),e.push('</span>\n              </label>\n            <td>\n              <div class="btn btn--table btn--text js-showLink">'),e.push(this.T("Show")),e.push('</div>\n              <input class="form-control form-control--borderless js-select is-hidden" readonly value="'),e.push(this.baseurl),e.push("/ical/tickets/"),e.push(n(s)),e.push('">\n          </tr>\n        ')),e.push("\n      ");e.push("\n    </tbody>\n  </table>\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/profile/camera"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="camera">\n  <canvas class="camera-preview" height="256" width="256"></canvas>\n  <video></video>\n</div>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/profile/devices"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r;for(e.push('<div class="page-header">\n  <div class="page-header-title"><h1>'),e.push(this.T("Devices")),e.push('</h1></div>\n</div>\n\n<form class="page-content">\n\n  <p>'),e.push(this.T("All computers and browsers that have access to your Zammad appear here.")),e.push('</p>\n\n  <table class="settings-list">\n    <thead>\n      <tr>\n        <th>'),e.push(this.T("Name")),e.push("</th>\n        <th>"),e.push(this.T("Location")),e.push("</th>\n        <th>"),e.push(this.T("Most recent activity")),e.push("</th>\n        <th>"),e.push(this.T("Remove")),e.push("</th>\n      </tr>\n    </thead>\n    <tbody>\n    "),r=this.devices,i=0,s=r.length;i<s;i++)t=r[i],e.push("\n      <tr>\n        <td>"),e.push(n(t.name)),e.push("</td>\n        <td>"),e.push(n(t.location)),e.push("</td>\n        <td>"),e.push(this.humanTime(t.updated_at)),e.push('</td>\n        <td class="settings-list-controls">\n          <div>\n            <a class="settings-list-control" href="#" data-device-id="'),e.push(t.id),e.push('" data-type="delete" title="'),e.push(this.Ti("Delete")),e.push('"'),t.current&&e.push("disabled"),e.push(">"),e.push(this.Icon("trash")),e.push("</a>\n          </div>\n      </tr>\n    ");e.push("\n    </tbody>\n  </table>\n\n</form>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/profile/imageCropper"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="imageCropper vertical center">\n  <div class="horizontal justified center">\n    <p>'),e.push(this.T("Avatar")),e.push('</p>\n    <div class="imageCropper-preview"></div>\n    <p>'),e.push(this.T("Preview")),e.push('</p>\n  </div>\n  <div class="imageCropper-holder">\n    <img class="imageCropper-image">\n  </div>\n</div>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/profile/language"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="page-header">\n  <div class="page-header-title">\n    <h1>'),e.push(this.T("Language")),e.push('</h1>\n  </div>\n</div>\n<div class="page-content">\n  <p>'),e.push(this.T("Change your language.")),e.push('</p>\n  <form class="settings-entry horizontal end">\n    <div class="form-item language_item flex"></div>\n    <button type="submit" class="btn btn--primary">'),e.push(this.T("Submit")),e.push("</button>\n  </form>\n</div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/profile/linked_accounts"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s;e.push('<div class="page-header">\n  <div class="page-header-title">\n    <h1>'),e.push(this.T("Link Accounts")),e.push('</h1>\n  </div>\n</div>\n<div class="page-content">\n  <ul>\n    '),s=this.auth_providers;for(t in s)i=s[t],e.push("\n      <li> "),e.push(this.T(i.name)),e.push("\n        "),this.user.accounts&&this.user.accounts[t]?(e.push('\n          "'),e.push(n(this.user.accounts[t].username)),e.push('" <a href="#" data-uid="'),e.push(n(this.user.accounts[t].uid)),e.push('" data-provider="'),e.push(n(t)),e.push('" class="js-remove">'),e.push(this.T("remove")),e.push("</a>\n        ")):(e.push('<a href="'),e.push(n(i.url)),e.push('">\n          '),e.push(this.T("Add")),e.push("</a>\n        ")),e.push("\n      </li>\n    ");e.push("\n  </ul>\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/profile/notification"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o,a,l,c,u,p,h;if(e.push('<div class="page-header">\n  <div class="page-header-title"><h1>'),e.push(this.T("Notifications")),e.push('</h1></div>\n</div>\n\n<form class="page-content form--flexibleWidth">\n\n  <div class="settings-entry">\n    <table class="settings-list">\n      <thead>\n        <tr>\n          <th>\n          <th width="18%" style="text-align: center;">'),e.push(this.T("My Tickets")),e.push('\n          <th width="18%" style="text-align: center;">'),e.push(this.T("Not Assigned")),e.push('*\n          <th width="18%" style="text-align: center;">'),e.push(this.T("All Tickets")),e.push('*\n          <th width="120px" class="settings-list-separator" style="text-align: center;">'),e.push(this.T("Also notify via email")),e.push("\n      </thead>\n      <tbody>\n      "),this.config.matrix){e.push("\n        "),l=this.config.matrix;for(r in l)h=l[r],e.push("\n        <tr>\n          <td>\n            "),e.push(this.T(h.name)),e.push('\n          <td class="u-positionOrigin">\n            <label class="checkbox-replacement checkbox-replacement--fullscreen">\n              <input type="checkbox" name="matrix.'),e.push(n(r)),e.push('.criteria.owned_by_me" value="true" '),h.criteria&&h.criteria.owned_by_me&&e.push("checked"),e.push("/>\n              "),e.push(this.Icon("checkbox","icon-unchecked")),e.push("\n              "),e.push(this.Icon("checkbox-checked","icon-checked")),e.push('\n            </label>\n          <td class="u-positionOrigin">\n            <label class="checkbox-replacement checkbox-replacement--fullscreen">\n              <input type="checkbox" name="matrix.'),e.push(n(r)),e.push('.criteria.owned_by_nobody" value="true"  '),h.criteria&&h.criteria.owned_by_nobody&&e.push("checked"),e.push("/>\n              "),e.push(this.Icon("checkbox","icon-unchecked")),e.push("\n              "),e.push(this.Icon("checkbox-checked","icon-checked")),e.push('\n            </label>\n          <td class="u-positionOrigin">\n            <label class="checkbox-replacement checkbox-replacement--fullscreen">\n              <input type="checkbox" name="matrix.'),e.push(n(r)),e.push('.criteria.no" value="true"  '),h.criteria&&h.criteria.no&&e.push("checked"),e.push("/>\n              "),e.push(this.Icon("checkbox","icon-unchecked")),e.push("\n              "),e.push(this.Icon("checkbox-checked","icon-checked")),e.push('\n            </label>\n          <td class="u-positionOrigin settings-list-separator">\n            <label class="checkbox-replacement checkbox-replacement--fullscreen">\n              <input type="checkbox" name="matrix.'),e.push(n(r)),e.push('.channel" value="email" '),h.channel&&h.channel.email&&e.push("checked"),e.push("/>\n              "),e.push(this.Icon("checkbox","icon-unchecked")),e.push("\n              "),e.push(this.Icon("checkbox-checked","icon-checked")),e.push("\n            </label>\n        ");e.push("\n      ")}if(e.push("\n      </tbody>\n    </table>\n  </div>\n\n  "),this.groups){for(e.push("\n  <h2>* "),e.push(this.T("Limit Groups")),e.push('</h2>\n  <div class="settings-entry">\n    <table class="settings-list">\n      <thead>\n        <tr>\n          <th>'),e.push(this.T("Group")),e.push("\n          <th>"),e.push(this.T("Not Assigned")),e.push(" & "),e.push(this.T("All Tickets")),e.push("\n      </thead>\n      <tbody>\n      "),c=this.groups,i=0,o=c.length;i<o;i++)t=c[i],e.push("\n        <tr>\n          <td>"),e.push(n(t.displayName())),e.push('\n          <td class="u-positionOrigin">\n            <label class="checkbox-replacement checkbox-replacement--fullscreen">\n              <input type="checkbox" name="group_ids" value="'),e.push(n(t.id)),e.push('" '),_.include(this.config.group_ids,t.id.toString())&&e.push("checked"),e.push("/>\n              "),e.push(this.Icon("checkbox","icon-unchecked")),e.push("\n              "),e.push(this.Icon("checkbox-checked","icon-checked")),e.push("\n            </label>\n      ");e.push("\n      </tbody>\n    </table>\n  </div>\n  ")}for(e.push("\n\n  <h2>"),e.push(this.T("Sounds")),e.push('</h2>\n  <div class="form-group">\n    <div class="formGroup-label">\n      <label for="notification-sound">'),e.push(this.T("Notification Sound")),e.push('</label>\n    </div>\n    <div class="controls controls--select">\n      <select class="form-control js-notificationSound" id="notification-sound" name="notification_sound::file">\n        '),u=this.sounds,s=0,a=u.length;s<a;s++)p=u[s],e.push('\n        <option value="'),e.push(n(p.file)),e.push('"'),p.selected&&e.push(n(" selected")),e.push(">"),e.push(n(p.name)),e.push("</option>\n        ");e.push("\n      </select>\n      "),e.push(this.Icon("arrow-down")),e.push('\n    </div>\n  </div>\n  <div class="form-group">\n    <label class="inline-label">\n      <span class="checkbox-replacement checkbox-replacement--inline">\n        <input type="checkbox" name="notification_sound::enabled" value="true" '),this.notificationSoundEnabled&&e.push(" checked"),e.push(' class="js-SoundEnableDisable">\n        '),e.push(this.Icon("checkbox","icon-unchecked")),e.push("\n        "),e.push(this.Icon("checkbox-checked","icon-checked")),e.push("\n      </span>\n      "),e.push(this.T("Play user interface sound effects")),e.push('\n    </label>\n  </div>\n\n  <button type="submit" class="btn btn--primary">'),e.push(this.T("Submit")),e.push("</button>\n</form>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/profile/out_of_office"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="page-header">\n  <div class="page-header-title"><h1>'),e.push(this.T("Out of Office")),e.push('</h1></div>\n</div>\n\n<form class="action">\n  <div class="action-flow action-flow--row">\n    <div class="action-row">\n      <div class="action-flow action-flow--noWrap">\n        <h2><span class="action-form-status">\n            '),!0===this.localData.out_of_office?(e.push("\n              "),e.push(this.Icon("status","ok inline")),e.push("\n            ")):(e.push("\n              "),e.push(this.Icon("status","error inline")),e.push("\n            ")),e.push('</span> <input id="out_of_office_reason" name="out_of_office_text" class="form-control form-control--inline" type="text" placeholder="'),e.push(this.Ti("e. g.")),e.push(" "),e.push(this.Ti(this.placeholder)),e.push('" value="'),_.isEmpty(this.localData.out_of_office_text)||e.push(n(this.localData.out_of_office_text)),e.push('"></h2>\n      </div>\n    </div>\n    <div class="action-block action-block--flex">\n      <div class="label">'),e.push(this.T("From")),e.push('</div>\n      <div class="form-group js-startDate"></div>\n    </div>\n    <div class="action-block action-block--flex">\n      <div class="label">'),e.push(this.T("Till")),e.push('</div>\n      <div class="form-group js-endDate"></div>\n    </div>\n    <div class="action-row">\n      <label for="out_of_office_replacement">'),e.push(this.T("Replacement")),e.push('</label>\n      <div class="dropdown js-recipientDropdown"></div>\n    </div>\n    <div class="action-controls">\n      <div class="btn btn--danger js-disabled">'),e.push(this.Ti("Disable")),e.push('</div>\n      <div class="btn btn--create js-enable">'),e.push(this.Ti("Enable")),e.push("</div>\n    </div>\n  </div>\n</form>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/profile/password"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="page-header">\n  <div class="page-header-title">\n    <h1>'),e.push(this.T("Change your password")),e.push('</h1>\n  </div>\n</div>\n<div class="page-content">\n  <form class="settings-entry form--flexibleWidth">\n    <div class="password_item"></div>\n    <button type="submit" class="btn btn--primary">'),e.push(this.T("Submit")),e.push("</button>\n  </form>\n</div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/profile/token_access"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r;if(e.push('<div class="page-header">\n  <div class="page-header-title"><h1>'),e.push(this.T("Token Access")),e.push("</h1></div>\n</div>\n<p>"),e.push(this.T("You can generate a personal access token for each application you use that needs access to the Zammad API.")),e.push("</p>\n\n<h2>"),e.push(this.T("Add a Personal Access Token")),e.push("</h2>\n<p>"),e.push(this.T("Pick a name for the application, and we'll give you a unique token.")),e.push('</p>\n<a class="btn btn--primary js-create">'),e.push(this.T("Create")),e.push("</a>\n\n<hr>\n\n<h2>"),e.push(this.T("Personal Access Tokens")),e.push('</h2>\n<table class="settings-list js-tokenList">\n  <thead>\n    <tr>\n      <th>'),e.push(this.T("Name")),e.push("</th>\n      <th>"),e.push(this.T("Permissions")),e.push("</th>\n      <th>"),e.push(this.T("Created")),e.push("</th>\n      <th>"),e.push(this.T("Expires")),e.push("</th>\n      <th>"),e.push(this.T("Last used")),e.push("</th>\n      <th>"),e.push(this.T("Delete")),e.push("</th>\n    </tr>\n  </thead>\n  <tbody>\n  "),_.isEmpty(this.tokens))e.push('\n    <tr>\n      <td colspan="6">'),e.push(this.T("none")),e.push("\n  ");else{for(e.push("\n    "),s=this.tokens,t=0,i=s.length;t<i;t++)r=s[t],e.push("\n      <tr>\n        <td>"),e.push(n(r.label)),e.push("</td>\n        <td>"),r.preferences&&r.preferences.permission&&e.push(n(r.preferences.permission.join(", "))),e.push("</td>\n        <td>"),e.push(this.humanTime(r.created_at)),e.push("</td>\n        <td>"),e.push(this.Tdate(r.expires_at)),e.push("</td>\n        <td>"),e.push(this.humanTime(r.last_used_at)),e.push('</td>\n        <td class="settings-list-controls">\n          <div>\n            <a class="settings-list-control js-delete" href="#" data-token-id="'),e.push(r.id),e.push('" title="'),e.push(this.Ti("Delete")),e.push('">'),e.push(this.Icon("trash")),e.push("</a>\n          </div>\n      </tr>\n    ");e.push("\n  ")}e.push("\n  </tbody>\n</table>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/profile/token_access_create"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r;for(e.push('<div class="input form-group">\n  <div class="formGroup-label">\n    <label for="token-label">'),e.push(this.T("Name")),e.push(' *</label>\n  </div>\n  <div class="controls"><input id="token-label" type="text" name="label" value="" class="form-control js-input" required></div>\n</div>\n\n<div class="input form-group">\n  <div class="formGroup-label">\n    <label for="token-label">'),e.push(this.T("Expires")),e.push('</label>\n  </div>\n  <div class="controls js-date"></div>\n</div>\n\n<div class="permission form-group checkbox">\n  <div class="checkbox">\n  '),r=this.permissions,t=0,i=r.length;t<i;t++)s=r[t],e.push("\n    "),s.name.match(/\./)?(e.push('\n      <div style="padding-left: 20px;" class="js-subPermissionList">\n        <label class="inline-label checkbox-replacement">\n          <input type="checkbox" value="'),e.push(n(s.name)),e.push('" name="permission" '),this.params&&_.contains(this.params.permissions,s.id)&&e.push("checked"),e.push(" "),s.preferences.disabled&&e.push("disabled"),e.push("/>\n          "),e.push(this.Icon("checkbox","icon-unchecked")),e.push("\n          "),e.push(this.Icon("checkbox-checked","icon-checked")),e.push('\n          <span class="label-text">'),e.push(n(s.name.replace(/^.+?\./,""))),e.push(' - <span class="help-text">'),e.push(this.T.apply(this,[s.note].concat(s.preferences.translations))),e.push("</span></span></span>\n        </label>\n      </div>\n    ")):(e.push('\n    <label class="inline-label checkbox-replacement">\n      <input type="checkbox" value="'),e.push(n(s.name)),e.push('" name="permission" '),this.params&&_.contains(this.params.permissions,s.id)&&e.push("checked"),e.push(" "),s.preferences.disabled&&e.push("disabled"),e.push("/>\n      "),e.push(this.Icon("checkbox","icon-unchecked")),e.push("\n      "),e.push(this.Icon("checkbox-checked","icon-checked")),e.push('\n      <span class="label-text">'),e.push(n(s.name)),e.push(' - <span class="help-text">'),e.push(this.T.apply(this,[s.note].concat(s.preferences.translations))),e.push("</span></span>\n    </label>\n    ")),e.push("\n  ");e.push("\n  </div>\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/profile/token_access_created"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push(this.T("For security reasons, the API token is shown only once. You'll need to copy it somewhere safe before continuing.")),e.push('\n\n<form>\n  <div class="input form-group">\n    <div class="controls"><input type="text" value="'),e.push(n(this.name)),e.push('" class="form-control input js-select" readonly></div>\n  </div>\n</form>\n')}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/report/download_button"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<a class="btn btn--action" href="'),e.push(this.downloadUrl),e.push('" target="_blank" data-type="attachment">'),e.push(this.Icon("download")),e.push("<span>"),e.push(this.T("Download %s record(s)",this.count)),e.push("</span></a>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/report/download_content"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div>\n  <div class="js-dataDownloadHeader"></div>\n  <div class="js-dataDownloadButton"></div>\n  <div class="spacer"></div>\n  <div class="js-dataDownloadTable"></div>\n</div>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/report/download_header"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o,a,l,c;for(e.push('<ul class="nav nav-tabs">\n  '),l=this.profiles,i=0,r=l.length;i<r;i++){for(a=l[i],e.push("\n    "),c=this.metric.backend,s=0,o=c.length;s<o;s++)t=c[s],e.push("\n      "),t.dataDownload&&(e.push("\n      <li "),t.name===this.downloadBackendSelected&&e.push('class="is-active active"'),e.push('><a href="#" class="js-dataDownloadBackendSelector" data-toggle="tab" data-profile-id="'),e.push(n(a.id)),e.push('" data-backend="'),e.push(n(t.name)),e.push('">'),e.push(this.T(t.display)),e.push("</a></li>\n      ")),e.push("\n    ");e.push("\n  ")}e.push("\n</ul>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/report/main"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="main flex">\n\n  <div class="page-header">\n    <div class="page-header-title">\n      <h1>'),e.push(this.T("Reporting")),e.push(' <small></small></h1>\n    </div>\n  </div>\n\n  <div class="page-body page-body--two-column">\n    <div class="page-aside js-aside"></div>\n\n    <div class="page-main">\n      <div class="js-timeRangePicker"></div>\n      <div class="well">\n\n        <div id="placeholder" class="" style="height:350px;"></div>\n        <span class=" muted" id="download-chart" style="font-size: 8px;"></span>\n\n        <div class="js-timePicker"></div>\n        <div class="js-dataDownload"></div>\n      </div>\n    </div>\n  </div>\n</div>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/report/sidebar"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o,a,l,c,u,p,h;e.push('<div class="panel-group" id="accordion">\n  '),u=this.metrics;for(r in u){for(l=u[r],e.push('\n    <div class="panel panel-default" data-metric="'),e.push(n(l.name)),e.push('">\n      <a class="panel-heading" data-toggle="collapse" data-parent="#accordion" href="#collapse-'),e.push(n(l.name)),e.push('">\n        <span class="panel-title">\n          '),e.push(this.T(l.display)),e.push('\n        </span>\n      </a>\n      <div id="collapse-'),e.push(n(l.name)),e.push('" class="panel-collapse collapse '),l.name===this.params.metric&&e.push("in"),e.push('">\n        <div class="panel-body">\n          <ul class="type area_select">\n            '),p=l.backend,i=0,o=p.length;i<o;i++)t=p[i],e.push('\n              <li>\n                <label class="inline-label checkbox-replacement">\n                  <input class="js-backendSelector" type="checkbox" value="'),e.push(n(t.name)),e.push('"'),this.params.backendSelected[t.name]&&e.push(" checked"),e.push(">\n                  "),e.push(this.Icon("checkbox","icon-unchecked")),e.push("\n                  "),e.push(this.Icon("checkbox-checked","icon-checked")),e.push('\n                  <span class="label-text">'),e.push(this.T(t.display)),e.push("</span>\n                </label>\n              </li>\n            ");e.push("\n          </ul>\n        </div>\n      </div>\n    </div>\n  ")}for(e.push("\n</div>\n\n<h3>"),e.push(this.T("Profiles")),e.push('</h3>\n<ul class="checkbox-list">\n  '),h=this.profiles,s=0,a=h.length;s<a;s++)c=h[s],e.push('\n    <li>\n      <label class="inline-label radio-replacement">\n        <input class="js-profileSelector" type="radio" name="profile_id" value="'),e.push(n(c.id)),e.push('"'),this.params.profileSelected[c.id]&&e.push(" checked"),e.push(">\n        "),e.push(this.Icon("radio","icon-unchecked")),e.push("\n        "),e.push(this.Icon("radio-checked","icon-checked")),e.push('\n        <span class="label-text">'),e.push(n(c.name)),e.push("</span>\n      </label>\n    </li>\n  ");e.push("\n</ul>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/report/time_picker"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o,a,l,c,u,p,h,d,f;if(e.push('<div class="">\n  '),"day"===this.params.timeRange){for(e.push('\n    <div class="btn-group btn-group--full" role="group" aria-label="">\n      '),p=this.timeRangeDay,t=0,a=p.length;t<a;t++)i=p[t],e.push('\n        <div class="btn btn--text btn--large js-timePickerDay'),this.params.day===i.value&&e.push(" is-selected"),e.push('" data-id="'),e.push(n(this.params.timeRange)),e.push('" data-type="'),e.push(n(i.value)),e.push('">'),e.push(n(i.display)),e.push("</div>\n      ");e.push("\n    </div>\n  ")}if(e.push("\n\n  "),"day"===this.params.timeRange||"month"===this.params.timeRange){for(e.push('\n    <div class="btn-group btn-group--full" role="group" aria-label="">\n      '),h=this.timeRangeMonth,s=0,l=h.length;s<l;s++)i=h[s],
e.push('\n        <div class="btn btn--text btn--large js-timePickerMonth'),this.params.month===i.value&&e.push(" is-selected"),e.push('" data-id="'),e.push(n(this.params.timeRange)),e.push('" data-type="'),e.push(n(i.value)),e.push('">'),e.push(n(i.display)),e.push("</div>\n      ");e.push("\n    </div>\n  ")}if(e.push("\n\n  "),"week"===this.params.timeRange){for(e.push('\n    <div class="btn-group btn-group--full" role="group" aria-label="">\n      '),d=this.timeRangeWeek,r=0,c=d.length;r<c;r++)i=d[r],e.push('\n        <div class="btn btn--text btn--large js-timePickerWeek'),this.params.week===i.value&&e.push(" is-selected"),e.push('" data-id="'),e.push(n(this.params.timeRange)),e.push('" data-type="'),e.push(n(i.value)),e.push('">'),e.push(n(i.display)),e.push("</div>\n      ");e.push("\n    </div>\n  ")}if(e.push("\n\n  "),"realtime"!==this.params.timeRange){for(e.push('\n    <div class="btn-group btn-group--full" role="group" aria-label="">\n      '),f=this.timeRangeYear,o=0,u=f.length;o<u;o++)i=f[o],e.push('\n        <div class="btn btn--text btn--large js-timePickerYear'),this.params.year===i.value&&e.push(" is-selected"),e.push('" data-id="'),e.push(n(this.params.timeRange)),e.push('" data-type="'),e.push(n(i.value)),e.push('">'),e.push(n(i.display)),e.push("</div>\n      ");e.push("\n    </div>\n  ")}e.push("\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/report/time_range_picker"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="tabs">\n  <div class="tab js-timeRange active" data-type="year">'),e.push(this.T("Year")),e.push('</div>\n  <div class="tab js-timeRange" data-type="month">'),e.push(this.T("Month")),e.push('</div>\n  <div class="tab js-timeRange" data-type="week">'),e.push(this.T("Week")),e.push('</div>\n  <div class="tab js-timeRange" data-type="day">'),e.push(this.T("Day")),e.push('</div>\n  <div class="tab js-timeRange" data-type="realtime">'),e.push(this.T("Realtime")),e.push("</div>\n</div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/search/index"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r;for(e.push('<div class="flex main vertical">\n\n  <div class="detail-search">\n    <div class="detail-search-header">\n      <div class="searchfield">\n        <input class="js-search form-control'),e.push(n(this.query?void 0:" is-empty")),e.push('" name="query" placeholder="'),e.push(this.Ti('Find what you search. E. g. "search phrase"')),e.push('" value="'),e.push(n(this.query)),e.push('" type="search" autocomplete="off">\n        '),e.push(this.Icon("magnifier")),e.push('\n        <div class="empty-search js-emptySearch">\n          '),e.push(this.Icon("diagonal-cross")),e.push('\n        </div>\n      </div>\n\n      <div class="tabs tabs-wide">\n        '),s=this.tabs,t=0,i=s.length;t<i;t++)r=s[t],e.push('\n          <div data-tab-content="'),e.push(r.model),e.push('" class="tab js-tab js-tab'),e.push(r.model),r.active&&e.push(" active"),e.push('">\n            <span class="tab-name">'),e.push(this.T(r.name)),e.push('</span>\n            <span class="tab-badge js-counter">'),e.push(r.count),e.push("</span>\n          </div>\n        ");e.push('\n      </div>\n    </div>\n\n    <div class="js-content"></div>\n  </div>\n\n</div>\n')}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/session"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r;for(e.push('<div class="page-header-title">\n  <h1>'),e.push(this.T("Sessions")),e.push('<small></small></h1>\n</div>\n<div class="page-content">\n  <table class="table table-striped table-hover">\n    <thead>\n      <tr>\n        <th>'),e.push(this.T("User")),e.push("</th>\n        <th>"),e.push(this.T("Browser")),e.push("</th>\n        <th>"),e.push(this.T("Location")),e.push("</th>\n        <th>"),e.push(this.T("Age")),e.push("</th>\n        <th>"),e.push(this.T("Update")),e.push("</th>\n        <th>"),e.push(this.T("Action")),e.push("</th>\n      </tr>\n    </thead>\n    <tbody>\n      "),s=this.sessions,t=0,i=s.length;t<i;t++)r=s[t],e.push("\n      <tr>\n        <td>"),r.data.user&&e.push(n(r.data.user.displayName())),e.push('</td>\n        <td title="'),e.push(n(r.data.user_agent)),e.push('">'),e.push(n(r.data.user_agent)),e.push('</td>\n        <td title="'),e.push(n(r.data.remote_ip)),e.push('">'),r.data.geo&&r.data.geo.country_name?(e.push(n(r.data.geo.country_name)),e.push(" "),e.push(n(r.data.geo.city_name))):e.push(n(r.data.remote_ip)),e.push("</td>\n        <td>"),e.push(this.humanTime(r.created_at)),e.push("</td>\n        <td>"),e.push(this.humanTime(r.updated_at)),e.push('</td>\n        <td><a href="#" data-session-id="'),e.push(r.id),e.push('" class="js-delete" title="'),e.push(this.Ti("Delete")),e.push('">'),e.push(this.Icon("trash")),e.push("</a></td>\n      </tr>\n      ");e.push("\n    </tbody>\n  </table>\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/settings/form"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,n,i,s;for(e.push('<form>\n  <div class="settings-entry">\n    <table class="settings-list" style="width: 100%;">\n      <thead>\n        <tr>\n          <th width="15%">'),e.push(this.T("Title")),e.push('\n          <th width="50%">'),e.push(this.T("Value")),e.push('\n          <th width="35%">'),e.push(this.T("Description")),e.push("\n      </thead>\n      <tbody>\n"),i=this.settings,t=0,n=i.length;t<n;t++)s=i[t],e.push("\n        <tr>\n          <td>"),e.push(this.T(s.title)),e.push('\n          <td data-name="'),e.push(s.name),e.push('">\n          <td><p class="help-text">'),e.push(this.RichText(s.description)),e.push("</p>\n");e.push('\n      </tbody>\n    </table>\n  </div>\n  <button type="submit" class="btn btn--primary js-submit">'),e.push(this.T("Submit")),e.push("</button>\n</form>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/settings/item"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<form class="settings-entry" id="'),e.push(n(this.setting.name)),e.push('">\n  <h2>'),e.push(this.T(this.setting.title)),e.push('</h2>\n  <p class="help-text">'),e.push(this.T(this.setting.description)),e.push('</p>\n  <div class="horizontal end">\n    <div class="form-item flex"></div>\n    <button type="submit" class="btn btn--primary">'),e.push(this.T("Submit")),e.push("</button>\n  </div>\n</form>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/settings/logo"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<form class="settings-entry" id="'),e.push(n(this.setting.name)),e.push('">\n  <h2>'),e.push(this.T(this.setting.title)),e.push("</h2>\n  <p>"),e.push(this.T(this.setting.description)),e.push('</p>\n  <div class="js-loginPreview"></div>\n  <div class="setting-controls">\n    <button type="submit" class="btn btn--primary">'),e.push(this.T("Submit")),e.push("</button>\n  </div>\n</form>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/settings/proxy"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<form class="settings-entry" id="'),e.push(n(this.setting.name)),e.push('">\n  <h2>'),e.push(this.T(this.setting.title)),e.push('</h2>\n  <p class="help-text">'),e.push(this.T("Proxy address.")),e.push('</p>\n  <div class="horizontal end">\n    <div class="form-item flex">\n      <input type="text" name="proxy" value="'),e.push(n(this.proxy)),e.push('" placeholder="proxy.example.com:3128" class="form-control">\n    </div>\n  </div>\n  <p class="help-text">'),e.push(this.T("Username for proxy connection.")),e.push('</p>\n  <div class="horizontal end">\n    <div class="form-item flex">\n      <input type="text" name="proxy_username" value="'),e.push(n(this.proxy_username)),e.push('" class="form-control">\n    </div>\n  </div>\n  <p class="help-text">'),e.push(this.T("Password for proxy connection.")),e.push('</p>\n  <div class="horizontal end">\n    <div class="form-item flex">\n      <input type="text" name="proxy_password" value="'),e.push(n(this.proxy_password)),e.push('" class="form-control">\n    </div>\n  </div>\n  <p class="help-text">'),e.push(this.T("No proxy for the following hosts.")),e.push('</p>\n  <div class="horizontal end">\n    <div class="form-item flex">\n      <input type="text" name="proxy_no" value="'),e.push(n(this.proxy_no)),e.push('" placeholder="localhost,127.0.0.1" class="form-control">\n    </div>\n  </div>\n  <div class="horizontal justify-end form-controls">\n    <button class="btn btn js-test">'),e.push(this.T("Test Connection")),e.push('</button>\n    <button class="btn btn--primary js-submit hide">'),e.push(this.T("Submit")),e.push("</button>\n  <div>\n</form>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/settings/storage_provider"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<form class="settings-entry" id="'),e.push(n(this.setting.name)),e.push('">\n  <h2>'),e.push(this.T(this.setting.title)),e.push('</h2>\n  <p class="help-text">'),e.push(this.T("You can switch between the backend for new attachments even on a system that is already in production without any loss of data.")),e.push('</p>\n  <p class="help-text">'),e.push(this.T("If you want to move already stored attachments from one backend to another, you need to execute the following via console.")),e.push('</p>\n  </p>\n  <p class="help-text">'),e.push(this.T('Move all from "%s" to "%s"',"filesystem","database")),e.push(":</p>\n  </p>\n  <code>\n  rails&gt; Store::File.move('File', 'DB')\n  </code>\n  <p class=\"help-text\">"),e.push(this.T('Move all from "%s" to "%s"',"database","filesystem")),e.push(':</p>\n  </p>\n  <code>\n  rails&gt; Store::File.move(\'DB\', \'File\')\n  </code>\n  <br>\n  <br>\n  <div class="horizontal end">\n    <div class="form-item flex"></div>\n    <button type="submit" class="btn btn--primary">'),e.push(this.T("Submit")),e.push("</button>\n  </div>\n</form>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/settings/switch"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r;for(e.push('<div class="page-header">\n  <div class="page-header-title">\n    <div class="zammad-switch zammad-switch--small js-setting" data-name="'),e.push(n(this.setting.name)),e.push('">\n       <input name="'),e.push(n(this.setting.name)),e.push('" type="checkbox" id="setting-'),e.push(n(this.setting.name)),e.push('" '),this.checked&&e.push("checked"),e.push('>\n       <label for="setting-'),e.push(n(this.setting.name)),e.push('"></label>\n    </div>\n    <h1>'),e.push(this.T.apply(this,[this.setting.title].concat(this.setting.preferences.title_i18n))),e.push('</h1>\n  </div>\n</div>\n<div class="page-content">\n  <p class="help-text">'),e.push(this.T.apply(this,[this.setting.description].concat(this.setting.preferences.description_i18n))),e.push("</p>\n  "),r=this.subSetting,t=0,i=r.length;t<i;t++)s=r[t],e.push('\n  <form class="settings-entry" data-name="'),e.push(n(s.name)),e.push('">\n    <div class="horizontal end">\n      <div class="form-item flex"></div>\n      <button type="submit" class="btn btn--primary">'),e.push(this.T("Submit")),e.push("</button>\n    </div>\n  </form>\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/settings/ticket_auto_assignment"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="page-header">\n  <div class="page-header-title">\n      <div class="zammad-switch zammad-switch--small js-ticketAutoAssignment">\n         <input name="ticket_auto_assignment" type="checkbox" id="ticket_auto_assignment" '),this.C("ticket_auto_assignment")&&e.push("checked"),e.push('>\n         <label for="ticket_auto_assignment"></label>\n      </div>\n    <h1>'),e.push(this.T("Auto Assignment")),e.push('<small></small></h1>\n  </div>\n</div>\n<div class="page-content">\n  <form class="settings-entry">\n    <p>'),e.push(this.T("Enable automatic assignment the first time an agent opens a ticket.")),e.push("</p>\n    <p>"),e.push(this.T("Tickets are only assigned automatically if they do not already have an owner.")),e.push('</p>\n    <div class="js-selector"></div>\n    <p>'),e.push(this.T('Define an exception of "automatic assignment" for certain users (e.g. executives).')),e.push('</p>\n    <div class="js-users"></div>\n    <button type="submit" class="btn btn--primary js-timeAccountingFilter">'),e.push(this.T("Save")),e.push('</button>\n    <button type="submit" class="btn btn--danger js-timeAccountingFilterReset">'),e.push(this.T("Reset")),e.push("</button>\n  </form>\n</div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/settings/ticket_hook_position"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<form class="settings-entry" id="'),e.push(n(this.setting.name)),e.push('">\n  <h2>'),e.push(this.T(this.setting.title)),e.push('</h2>\n  <p class="help-text">'),e.push(this.T("The format of the subject.")),e.push("</p>\n  <ul>\n    <li>"),e.push(this.T("|Right| means |Some Subject [Ticket#12345]|")),e.push("\n    <li>"),e.push(this.T("|Left| means |[Ticket#12345] Some Subject|")),e.push("\n    <li>"),e.push(this.T('|None| means |Some Subject| (without ticket number). In the last case you should enable "postmaster___follow___up___search___in" to recognize followups based on email headers and/or body.')),e.push('\n  </ul>\n  <div class="horizontal end">\n    <div class="js-form form-item flex"></div>\n    <button type="submit" class="btn btn--primary">'),e.push(this.T("Submit")),e.push("</button>\n  </div>\n</form>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/settings/ticket_number"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="settings-entry" id="'),e.push(n(this.setting.name)),e.push('">\n  <h2>'),e.push(this.T(this.setting.title)),e.push('</h2>\n  <p class="help-text">\n  '),e.push(this.T("Selects the ticket number generator module.")),e.push("\n  <ul>\n    <li>"),e.push(this.T('|Increment| increments the ticket number, the SystemID and the counter are used with "SystemID.Counter" format (e.g. 1010138, 1010139).')),e.push("\n    <li>"),e.push(this.T('With |Date| the ticket numbers will be generated by the current date, the SystemID and the counter. The format looks like "Year.Month.Day.SystemID.Counter" (e.g. 201206231010138, 201206231010139).')),e.push('\n  </ul>\n  <form class="js-form"></form>\n  <br>\n  <div class="js-formPreferences"></div>\n  <br>\n  <label class="formGroup-label">'),e.push(this.T("Preview")),e.push('</label>\n  <div class="js-preview"></div>\n  <br>\n  <form class="horizontal end">\n    <button type="submit" class="btn btn--primary">'),e.push(this.T("Submit")),e.push("</button>\n  </form>\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/settings/ticket_number_date"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="js-date js-formPreferencesItem hidden" data-backend="Ticket::Number::Date">\n  <label class="formGroup-label">'),e.push(this.T("Options")),e.push("</label>\n  <div>"),e.push(this.T('With Checksum, a checksum will be appended to the counter. The format looks like "%s" (e. g. %s).',"Year.Month.Day.SystemID.Counter.CheckSum","2012070110101520, 2012070110101535")),e.push('</div>\n  <br>\n  <form class="js-formItem"></form>\n</div>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/settings/ticket_number_increment"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="js-increment js-formPreferencesItem hidden" data-backend="Ticket::Number::Increment">\n  <label class="formGroup-label">'),e.push(this.T("Options")),e.push("</label>\n  <div>"),e.push(this.T('With Checksum, a checksum will be appended to the counter. The format looks like "%s" (e. g. %s).',"SystemID.Counter.CheckSum","10101384, 10101392")),e.push('</div>\n  <br>\n  <form class="js-formItem"></form>\n</div>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/signup"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="signup fullscreen">\n  <div class="fullscreen-center">\n    <div class="hero-unit fullscreen-body">\n      <h1>'),e.push(this.T("Join %s",this.C("product_name"))),e.push('</h1>\n      <form>\n        <div class="form-controls">\n          <a class="btn btn--text btn--subtle js-cancel" href="#login">'),e.push(this.T("Cancel & Go Back")),e.push('</a>\n          <button class="btn btn--primary js-submit align-right">'),e.push(this.T("Create my account")),e.push("</button>\n        </div>\n      </form>\n    </div>\n  </div>\n</div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/sla/index"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o,a,l,c;for(e.push('<div class="page-header">\n  <div class="page-header-title">\n    <h1>'),e.push(this.T("SLA")),e.push(" <small>"),e.push(this.T("Management")),e.push('</small></h1>\n  </div>\n\n  <div class="page-header-meta">\n    '),this.showDescription&&(e.push('\n      <a class="btn js-description">'),e.push(this.T("Description")),e.push("</a>\n    ")),e.push('\n    <a class="btn btn--success js-new">'),e.push(this.T("New SLA")),e.push('</a>\n  </div>\n</div>\n\n<div class="page-content">\n  '),_.isEmpty(this.slas)&&(e.push('\n  <div class="page-description">\n    '),e.push(this.description),e.push("\n  </div>\n  ")),e.push("\n\n  "),o=this.slas,t=0,s=o.length;t<s;t++){for(c=o[t],e.push('\n  <div class="action" data-id="'),e.push(c.id),e.push('">\n    <div class="action-flow action-flow--row">\n      <div class="action-row">\n        <h2>'),e.push(n(c.name)),e.push('</h2>\n      </div>\n      <div class="action-block action-block--flex">\n        <div class="label">'),e.push(this.T("Filter")),e.push("</div>\n        "),a=c.rules,i=0,r=a.length;i<r;i++)l=a[i],e.push("\n          "),e.push(l),e.push("<br>\n        ");e.push("\n      </div>\n      "),e.push(this.Icon("arrow-right","action-flow-icon")),e.push('\n      <div class="action-block action-block--flex">\n        <div class="label">'),e.push(this.T("Escalation Times")),e.push("</div>\n        "),c.first_response_time&&(e.push("\n          "),e.push(c.first_response_time_in_text),e.push(" "),e.push(this.T("hours")),e.push(" - "),e.push(this.T("First Response Time")),e.push("\n        ")),e.push("\n        "),c.update_time&&(e.push("\n          <br>\n          "),e.push(c.update_time_in_text),e.push(" "),e.push(this.T("hours")),e.push(" - "),e.push(this.T("Update Time")),e.push("\n        ")),e.push("\n        "),c.solution_time&&(e.push("\n          <br>\n          "),e.push(c.solution_time_in_text),e.push(" "),e.push(this.T("hours")),e.push(" - "),e.push(this.T("Solution Time")),e.push("\n        ")),e.push('\n        <br>\n      </div>\n    </div>\n    <div class="action-block">\n      <div class="label">'),e.push(this.T("Calendar")),e.push("</div>\n      "),e.push(n(c.calendar.displayName())),e.push('\n    </div>\n    <div class="action-controls">\n      <div class="sla-toggle btn btn--danger btn--secondary js-delete">'),e.push(this.T("Delete")),e.push('</div>\n      <div class="sla-edit btn js-edit">'),e.push(this.T("Edit")),e.push("</div>\n    </div>\n  </div>\n  ")}e.push("\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/tag/edit"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<form>\n  <div class="form-item">\n    <input type="text" name="name" class="" value="'),e.push(n(this.name)),e.push('" autocomplete="off">\n  </div>\n</form>\n')}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/tag/index"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="page-header">\n  <div class="page-header-title">\n    <h1>'),e.push(this.T("Tags")),e.push('<small></small></h1>\n  </div>\n</div>\n<div class="page-content">\n\n  <div class="settings-entry">\n    <div class="page-header-title">\n      <div class="zammad-switch zammad-switch--small js-newTagSetting">\n         <input name="chat" type="checkbox" id="tag-new" '),this.C("tag_new")&&e.push("checked"),e.push('>\n         <label for="tag-new"></label>\n      </div>\n      <h2>'),e.push(this.T("New Tags")),e.push("</h2>\n    </div>\n    <p>\u26a0 "),e.push(this.T("Allow users to add new tags.")),e.push('</p>\n  </div>\n\n  <div class="settings-entry vertical">\n    <h2>'),e.push(this.T("Manage Tags")),e.push('</h2>\n    <form class="horizontal form-group formGroup--halfSize js-create">\n      <div class="form-item">\n        <input type="text" name="name" class="" autocomplete="off">\n      </div>\n      <button type="submit" class="btn btn--primary js-submit">'),e.push(this.T("Add")),e.push('</button>\n    </form>\n    <div class="js-Table"></div>\n  </div>\n</div>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/tag/table"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r;for(e.push('<table class="table table-striped table-hover">\n  <thead>\n    <tr>\n      <th>'),e.push(this.T("Name")),e.push("</th>\n      <th>"),e.push(this.T("Count")),e.push("</th>\n      <th>"),e.push(this.T("Action")),e.push("</th>\n    </tr>\n  </thead>\n  <tbody>\n    "),r=this.list,t=0,s=r.length;t<s;t++)i=r[t],e.push('\n    <tr data-id="'),e.push(n(i.id)),e.push('" class="js-edit u-clickable">\n      <td class="js-name">'),e.push(n(i.name)),e.push('</td>\n      <td class="js-search"><a href="#">'),e.push(n(i.count)),e.push('</a></td>\n      <td class="js-delete"><a href="#" title="'),e.push(this.Ti("Delete")),e.push('">'),e.push(this.Icon("trash")),e.push("</a></td>\n    </tr>\n    ");e.push("\n  </tbody>\n</table>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/telegram/bot_add"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="alert alert--danger hidden" role="alert"></div>\n<p>\n  '),e.push(this.T("The tutorial on how to manage a %s is hosted on our [online documentation](https://zammad.org/documentation/channel/telegram).","Telegram Bot")),e.push("\n</p>\n<fieldset>\n  <h2>"),e.push(this.T("Enter your %s App Keys","Telegram")),e.push('</h2>\n  <div class="input form-group">\n    <div class="formGroup-label">\n      <label for="api_token">'),e.push(this.T("%s Api Token","Telegram")),e.push(' <span>*</span></label>\n    </div>\n    <div class="controls">\n      <input id="api_token" type="text" name="api_token" value="" class="form-control" required autocomplete="off">\n    </div>\n  </div>\n  <h2>'),e.push(this.T("Settings")),e.push('</h2>\n  <div class="input form-group">\n    <div class="formGroup-label">\n      <label for="welcome">'),e.push(this.T("Welcome message")),e.push(' <span>*</span></label>\n    </div>\n    <div class="controls">\n      <input id="welcome" type="text" name="welcome" value="" placeholder="'),e.push(this.Ti("You are welcome! Just ask me something!")),e.push('" class="form-control" required autocomplete="off">\n    </div>\n  </div>\n  <div class="input form-group">\n    <div class="formGroup-label">\n      <label for="">'),e.push(this.T("Choose which group %s will get added to.","messages")),e.push(' <span>*</span></label>\n    </div>\n    <div class="controls">\n      <div class="js-messagesGroup"></div>\n    </div>\n  </div>\n</fieldset>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/telegram/bot_edit"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="alert alert--danger hidden" role="alert"></div>\n<fieldset>\n  <h2>'),e.push(this.T("Enter your %s App Keys","Telegram")),e.push('</h2>\n  <div class="input form-group">\n    <div class="formGroup-label">\n      <label for="api_token">'),e.push(this.T("%s Api Token","Telegram")),e.push(' <span>*</span></label>\n    </div>\n    <div class="controls">\n      <input id="api_token" type="text" name="api_token" value="'),e.push(n(this.channel.options.api_token)),e.push('" class="form-control" required autocomplete="off">\n    </div>\n  </div>\n  <h2>'),e.push(this.T("Settings")),e.push('</h2>\n  <div class="input form-group">\n    <div class="formGroup-label">\n      <label for="welcome">'),e.push(this.T("welcome message")),e.push(' <span>*</span></label>\n    </div>\n    <div class="controls">\n      <input id="welcome" type="text" name="welcome" value="'),e.push(n(this.channel.options.welcome)),e.push('" placeholder="'),e.push(this.Ti("You are welcome! Just ask me something!")),e.push('" class="form-control" required autocomplete="off">\n    </div>\n  </div>\n  <div class="input form-group">\n    <div class="formGroup-label">\n      <label for="">'),e.push(this.T("Choose which group %s will get added to.","messages")),e.push(' <span>*</span></label>\n    </div>\n    <div class="controls">\n      <div class="js-messagesGroup"></div>\n    </div>\n  </div>\n</fieldset>\n')}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/telegram/index"]=function(t){t||(t={})
;var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r;if(e.push('<div class="page-header">\n  <div class="page-header-title">\n    <h1>'),e.push(this.T("Telegram")),e.push(" <small>"),e.push(this.T("Bots")),e.push('</small></h1>\n  </div>\n\n  <div class="page-header-meta">\n    <a class="btn btn--success js-new">'),e.push(this.T("Add Bot")),e.push('</a>\n  </div>\n</div>\n\n<div class="page-content">\n\n'),_.isEmpty(this.channels))e.push('\n  <div class="page-description">\n    <p>'),e.push(this.T("You have no configured %s right now.","Telegram Bot")),e.push("</p>\n  </div>\n");else{for(e.push("\n\n"),r=this.channels,i=0,s=r.length;i<s;i++)t=r[i],e.push('\n  <div class="action '),!0!==t.active&&e.push("is-inactive"),e.push('" data-id="'),e.push(n(t.id)),e.push('">\n    <div class="action-block action-row">\n      <h2>'),e.push(this.Icon("status","supergood-color inline")),e.push(" "),e.push(n(t.options.bot.first_name)),e.push(' <span class="text-muted">@'),e.push(n(t.options.bot.username)),e.push('</span></h2>\n    </div>\n    <div class="action-flow action-flow--row">\n      <div class="action-block">\n        <h3>'),e.push(this.T("Messages")),e.push("</h3>\n        @"),e.push(n(t.options.bot.username)),e.push("\n      </div>\n      "),e.push(this.Icon("arrow-right","action-flow-icon")),e.push('\n      <div class="action-block">\n        <h3>'),e.push(this.T("Group")),e.push("</h3>\n        "),t.options&&(e.push("\n          "),e.push(n(t.options.groupName)),e.push("\n        ")),e.push('\n      </div>\n    </div>\n    <div class="action-controls">\n      <div class="btn btn--danger btn--secondary js-delete">'),e.push(this.T("Delete")),e.push("</div>\n      "),!0===t.active?(e.push('\n        <div class="btn btn--secondary js-disable">'),e.push(this.T("Disable")),e.push("</div>\n      ")):(e.push('\n        <div class="btn btn--secondary js-enable">'),e.push(this.T("Enable")),e.push("</div>\n      ")),e.push('\n      <div class="btn js-edit">'),e.push(this.T("Edit")),e.push("</div>\n    </div>\n  </div>\n");e.push("\n</div>\n")}}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/ticket_overview/batch_dragger"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="batch-dragger zIndex-10">\n\t<div class="batch-dragger-counter js-batch-dragger-count"></div>\n</div>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/ticket_overview/batch_overlay"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="batch-overlay-backdrop js-batch-overlay-backdrop"></div>\n<div class="batch-overlay-cancel js-batch-cancel">\n  '),e.push(this.T("drag here to cancel")),e.push('\n</div>\n<div class="batch-overlay-circle batch-overlay-circle--top js-batch-macro-circle">\n  <div class="batch-overlay-circle-label">'),e.push(this.T("run macro")),e.push("</div>\n  "),e.push(this.Icon("arrow-up")),e.push('\n</div>\n<div class="batch-overlay-circle batch-overlay-circle--bottom js-batch-assign-circle">\n  '),e.push(this.Icon("arrow-down")),e.push('\n  <div class="batch-overlay-circle-label">'),e.push(this.T("assign tickets")),e.push('</div>\n</div>\n<div class="batch-overlay-assign batch-overlay-box js-batch-assign">\n  <div class="batch-overlay-box-inner js-batch-assign-inner"></div>\n</div>\n<div class="batch-overlay-macro batch-overlay-box js-batch-macro"></div>\n<div class="batch-overlay-assign batch-overlay-assign-group batch-overlay-box js-batch-assign-group">\n  <div class="batch-overlay-assign-group-name js-batch-assign-group-name"></div>\n  <div class="batch-overlay-box-inner js-batch-assign-group-inner"></div>\n</div>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/ticket_overview/batch_overlay_macro"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r;for(e.push('<div class="batch-overlay-box-inner">\n'),r=this.macros,t=0,i=r.length;t<i;t++)s=r[t],e.push('\n  <div class="batch-overlay-macro-entry js-batch-overlay-entry js-batch-hover-target" data-action="macro" data-id="'),e.push(n(s.id)),e.push('">\n    <div class="batch-overlay-macro-entry-name">'),e.push(n(s.name)),e.push("</div>\n  </div>\n");e.push("\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/ticket_overview/batch_overlay_user_group"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o,a,l,c;for(a=this.users,i=0,r=a.length;i<r;i++)c=a[i],e.push('\n<div class="batch-overlay-assign-entry js-batch-overlay-entry" data-action="user_assign" data-id="'),e.push(n(c.id)),e.push('" data-group-id="'),e.push(n(this.groupId)),e.push('">\n  <div class="js-batch-hover-target">'),e.push(c.avatar(80)),e.push('</div>\n  <div class="batch-overlay-assign-entry-name">'),e.push(c.displayName()),e.push("</div>\n</div>\n");for(e.push("\n"),l=this.groups,s=0,o=l.length;s<o;s++)t=l[s],e.push('\n<div class="batch-overlay-assign-entry js-batch-overlay-entry" data-action="group_assign" data-id="'),e.push(n(t.id)),e.push('">\n\t<div class="js-batch-hover-target">'),e.push(t.avatar(80)),e.push('</div>\n  <div class="batch-overlay-assign-entry-name">'),e.push(t.displayName()),e.push('</div>\n  <div class="batch-overlay-assign-entry-detail">'),e.push(this.T("%s people",t.valid_users_count)),e.push("</div>\n</div>\n");e.push("\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/ticket_overview/index"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="js-error hide fullscreenMessage"></div>\n<div class="sidebar"></div>\n<div class="main flex">\n  <div class="overview-header"></div>\n  <div class="overview-table"></div>\n</div>\n<div class="batch-overlay js-batch-overlay"></div>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/ticket_zoom"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="tabsSidebar-holder">\n  <div class="scrollPageHeader tabsSidebar-sidebarSpacer" style="'),e.push("rtl"===this.dir?"left":"right"),e.push(": "),e.push(this.scrollbarWidth),e.push('px">\n    <small>'),e.push(this.C("ticket_hook")),e.push(' <span class="ticket-number">'),e.push(this.ticket.number),e.push('</span></small>\n    <div class="js-ticketTitleContainer ticket-title"></div>\n    <div class="js-highlighterContainer highlighter"></div>\n    <div class="js-overviewNavigatorContainer overview-navigator"></div>\n  </div>\n  <div class="main no-padding flex tabsSidebar-sidebarSpacer tabsSidebar-tabsSpacer">\n    <div class="ticketZoom">\n      <div class="ticketZoom-controls">\n        <div class="js-settingContainer"></div>\n        <div class="spacer"></div>\n        <div class="js-highlighterContainer highlighter"></div>\n        <div class="js-overviewNavigatorContainer overview-navigator"></div>\n      </div>\n      <div class="ticketZoom-header">\n        <div class="flex vertical center">\n          <div class="js-avatar"></div>\n          <div class="js-ticketTitleContainer ticket-title"></div>\n          <div class="js-ticketMetaContainer"></div>\n        </div>\n      </div>\n      <div class="ticket-article"></div>\n      <div class="article-new"></div>\n    </div>\n  </div>\n\n  <div class="tabsSidebar tabsSidebar--attributeBarSpacer vertical"></div>\n\n  <div class="attributeBar js-attributeBar"></div>\n</div>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/ticket_zoom/article_new"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o,a,l,c;for(e.push('<form class="article-add '),this.article.internal?e.push("is-internal"):e.push("is-public"),e.push('" data-type="'),e.push(n(this.article.type)),e.push('">\n  <input type="hidden" name="type" value="'),e.push(n(this.article.type)),e.push('">\n  <input type="hidden" name="internal" value="'),e.push(n(this.article.internal)),e.push('">\n  <input type="hidden" name="form_id" value="'),e.push(n(this.form_id)),e.push('">\n  <input type="hidden" name="subtype" value="'),e.push(n(this.article.subtype)),e.push('">\n  <input type="hidden" name="in_reply_to" value="'),e.push(n(this.article.in_reply_to)),e.push('">\n  <div class="editControls">\n    <div class="js-avatar"></div>\n    <div class="editControls-item is-hidden pop-select">\n      <div class="editControls-iconHolder centered js-selectedArticleType">\n        '),a=this.articleTypes,i=0,r=a.length;i<r;i++)t=a[i],e.push('\n        <div class="editControls-icon js-selectableTypes'),t.icon!==this.article.icon&&e.push(" hide"),e.push('" data-type="'),e.push(t.name),e.push('">\n        '),e.push(this.Icon(t.icon)),e.push("\n        </div>\n        ");for(e.push('\n      </div>\n      <div class="pop-selector is-hidden js-articleTypes">\n        '),l=this.articleTypes,s=0,o=l.length;s<o;s++)t=l[s],e.push('\n        <div class="editControls-icon pop-selectable js-articleTypeItem" data-value="'),e.push(n(t.name)),e.push('">\n          '),e.push(this.Icon(t.icon,"pop-selectable-icon")),e.push("\n        </div>\n        ");e.push("\n      </div>\n    </div>\n    "),this.internalSelector&&(e.push('\n    <div class="editControls-item is-hidden js-toggleVisibility js-selectInternalPublic">\n      <div class="editControls-iconHolder">\n        <div class="editControls-icon icon-internal" title="'),e.push(this.Ti("set to public")),e.push('">\n          '),e.push(this.Icon("lock")),e.push('\n        </div>\n        <div class="editControls-icon icon-public" title="'),e.push(this.Ti("set to internal")),e.push('">\n          '),e.push(this.Icon("lock-open")),e.push("\n        </div>\n      </div>\n    </div>\n    ")),e.push('\n  </div>\n  <div class="article-content bubble-gap">\n    <div class="internal-border">\n\n      <div class="input form-group">\n        <div class="formGroup-label">\n          <label for="">'),e.push(this.T("To")),e.push('</label>\n        </div>\n        <div class="controls"><input type="text" name="to" value="'),e.push(n(this.article.to)),e.push('" class="form-control js-mail-inputs js-to" required="required"></div>\n      </div>\n      <div class="input form-group">\n        <div class="formGroup-label">\n          <label for="">'),e.push(this.T("Cc")),e.push('</label>\n        </div>\n        <div class="controls"><input type="text" name="cc" value="'),e.push(n(this.article.cc)),e.push('" class="form-control js-mail-inputs js-cc"></div>\n      </div>\n      <div class="input form-group">\n        <div class="formGroup-label">\n          <label for="">'),e.push(this.T("Subject")),e.push('</label>\n        </div>\n        <div class="controls"><input type="text" name="subject" value="'),e.push(n(this.article.subject)),e.push('" class="form-control js-mail-inputs2 js-subject"></div>\n      </div>\n\n      <div class="textBubble js-writeArea">\n        <div class="bubble-arrow"></div>\n        <div class="js-textarea richtext-content articleNewEdit-body" contenteditable="true" data-name="body">'),e.push(this.article.body),e.push('</div>\n        <!-- .textBubble grows with textarea (and expanding clone) -->\n        <div class="textBubble-footer js-textSizeLimit">\n          <div class="textBubble-signatur"><span class="js-signature"></span></div>\n          <div class="textBubble-letterCount js-letterCount"></div>\n        </div>\n        <div class="attachments"></div>\n        <div class="article-attachment">\n          <div class="attachmentPlaceholder">\n            <span class="attachmentPlaceholder-hint">'),e.push(this.T("Enter Answer or")),e.push('</span>\n            <span class="attachmentPlaceholder-inputHolder fileUpload">\n              '),c=_.uniqueId("fileUpload_"),e.push('\n              <input multiple="multiple" type="file" name="file" id="'),e.push(c),e.push('">\n              <label class="attachmentPlaceholder-label" for="'),e.push(c),e.push('">\n                '),e.push(this.T("select attachment...")),e.push('\n              </label>\n            </span>\n          </div>\n          <div class="attachmentUpload hide">\n            <div class="horizontal">\n              <div class="u-highlight">\n                '),e.push(this.T("Uploading")),e.push(' (<span class="js-percentage">0</span>%) ...\n              </div>\n              <div class="attachmentUpload-cancel js-cancel">\n                '),e.push(this.Icon("diagonal-cross")),e.push(this.T("Cancel Upload")),e.push('\n              </div>\n            </div>\n            <div class="attachmentUpload-progressBar" style="width: 0%"></div>\n          </div>\n        </div>\n        <div class="dropArea">\n          <div class="dropArea-inner">\n            '),e.push(this.T("Drop files here")),e.push("\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</form>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/ticket_zoom/article_view"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o,a,l,c,u;if(e.push('<div class="article-meta-clip top">\n  <div class="article-content-meta top hide">\n    <div class="article-meta top">\n    '),this.article.from&&(e.push('\n      <div class="horizontal article-meta-row">\n        <div class="article-meta-key u-textTruncate">'),e.push(this.T("From")),e.push('</div>\n        <div class="article-meta-value flex contain-text">'),e.push(this.AddressLine(this.article.from)),e.push("</div>\n      </div>\n    ")),e.push("\n    "),this.article.reply_to&&(e.push('\n      <div class="horizontal article-meta-row">\n        <div class="article-meta-key u-textTruncate">'),e.push(this.T("Reply-To")),e.push('</div>\n        <div class="article-meta-value flex contain-text">'),e.push(this.AddressLine(this.article.reply_to)),e.push("</div>\n      </div>\n    ")),e.push("\n    "),this.article.to&&(e.push('\n      <div class="horizontal article-meta-row">\n        <div class="article-meta-key u-textTruncate">'),e.push(this.T("To")),e.push('</div>\n        <div class="article-meta-value flex contain-text">'),e.push(this.AddressLine(this.article.to)),e.push("</div>\n      </div>\n    ")),e.push("\n    "),this.article.cc&&(e.push('\n      <div class="horizontal article-meta-row">\n        <div class="article-meta-key u-textTruncate">'),e.push(this.T("Cc")),e.push('</div>\n        <div class="article-meta-value flex contain-text">'),e.push(this.AddressLine(this.article.cc)),e.push("</div>\n      </div>\n    ")),e.push("\n    "),this.article.subject&&(e.push('\n      <div class="horizontal article-meta-row">\n        <div class="article-meta-key u-textTruncate">'),e.push(this.T("Subject")),e.push('</div>\n        <div class="article-meta-value flex contain-text">'),e.push(n(this.article.subject)),e.push("</div>\n      </div>\n    ")),e.push('\n    </div>\n  </div>\n</div>\n<div class="article-content">\n  '),"Agent"!==this.article.sender.name?(e.push("\n  "),"left",e.push("\n  ")):(e.push("\n  "),"right",e.push("\n  ")),e.push('\n  <div class="js-avatar"></div>\n  <div class="bubble-gap">\n    <div class="internal-border">\n      <div class="textBubble">\n        <div class="bubble-arrow"></div>\n        <div class="textBubble-content" id="article-content-'),e.push(n(this.article.id)),e.push('" data-id="'),e.push(n(this.article.id)),e.push('">\n          <div class="richtext-content">'),e.push(this.article.html),e.push('</div>\n          <div class="textBubble-overflowContainer hide">\n            <div class="btn btn--text js-toggleFold">'),e.push(this.T("See more")),e.push("</div>\n          </div>\n        </div>\n        "),!_.isEmpty(this.attachments)){for(e.push('\n          <div class="attachments attachments--list">\n            '),e.push(this.Icon("paperclip")),e.push('\n            <div class="attachments-title">'),e.push(this.attachments.length),e.push(" "),e.push(this.T("Attached Files")),e.push("</div>\n            "),c=this.attachments,s=0,o=c.length;s<o;s++)t=c[s],e.push("\n              "),this.C("ui_ticket_zoom_attachments_preview")?(e.push('\n                <a class="attachment attachment--preview" title="'),e.push(t.preferences["Content-Type"]),e.push('" target="_blank" href="'),e.push(n(App.Config.get("api_path"))),e.push("/ticket_attachment/"),e.push(n(this.article.ticket_id)),e.push("/"),e.push(n(this.article.id)),e.push("/"),e.push(n(t.id)),e.push('?disposition=attachment" data-type="attachment"'),this.canDownload(t.preferences["Content-Type"])&&e.push(" download"),e.push('>\n                  <div class="attachment-icon">\n                  '),t.preferences&&t.preferences["Content-Type"]&&this.ContentTypeIcon(t.preferences["Content-Type"])?(e.push("\n                    "),this.canPreview(t.preferences["Content-Type"])?(e.push('\n                      <img src="'),e.push(n(App.Config.get("api_path"))),e.push("/ticket_attachment/"),e.push(n(this.article.ticket_id)),e.push("/"),e.push(n(this.article.id)),e.push("/"),e.push(n(t.id)),e.push('">\n                    ')):(e.push("\n                      "),e.push(this.Icon(this.ContentTypeIcon(t.preferences["Content-Type"]))),e.push("\n                    ")),e.push("\n                  ")):(e.push("\n                    "),e.push(this.Icon("file-unknown")),e.push("\n                  ")),e.push('\n                  </div>\n                  <span class="attachment-name u-highlight">'),e.push(n(t.filename)),e.push('</span>\n                  <div class="attachment-size">'),e.push(this.humanFileSize(t.size)),e.push("</div>\n                </a>\n              ")):(e.push('\n                <div class="attachment attachment--row">\n                  <a class="attachment-name u-highlight" href="'),e.push(n(App.Config.get("api_path"))),e.push("/ticket_attachment/"),e.push(n(this.article.ticket_id)),e.push("/"),e.push(n(this.article.id)),e.push("/"),e.push(n(t.id)),e.push('?disposition=attachment" target="_blank" data-type="attachment">'),e.push(n(t.filename)),e.push('</a>\n                  <div class="attachment-size">'),e.push(this.humanFileSize(t.size)),e.push("</div>\n                </div>\n              ")),e.push("\n            ");e.push("\n          </div>\n        ")}if(e.push('\n      </div>\n    </div>\n  </div>\n</div>\n<div class="article-meta-clip bottom">\n  <div class="article-content-meta bottom hide">\n    <div class="article-meta bottom">\n      <div class="horizontal article-meta-row">\n        <div class="article-meta-key">'),e.push(this.T("Channel")),e.push('</div>\n        <div class="article-meta-value">\n          '),e.push(this.Icon(this.article.type.name,"article-meta-icon")),e.push("\n          "),e.push(this.T(this.article.type.name)),e.push("\n          "),this.links){for(e.push("\n            "),i=0,e.push("\n            "),u=this.links,r=0,a=u.length;r<a;r++)l=u[r],e.push("\n              "),i>0&&e.push("|"),e.push('\n              <a class="text-muted" href="'),e.push(l.url),e.push('" target="'),e.push(l.target),e.push('">'),e.push(this.T(l.name)),e.push("</a>\n              "),i=1,e.push("\n            ");e.push("\n          ")}e.push('\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class="js-article-actions"></div>\n\n<small class="task-subline">'),e.push(this.humanTime(this.article.created_at)),e.push("</small>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/ticket_zoom/article_view_actions"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r;for(e.push('<div class="article-content article-actions horizontal stretch">\n  '),r=this.actions,i=0,s=r.length;i<s;i++)t=r[i],e.push('\n    <a href="'),e.push(n(t.href)),e.push('" data-type="'),e.push(n(t.type)),e.push('" class="article-action js-ArticleAction u-clickable'),t["class"]&&(e.push(" "),e.push(n(t["class"]))),e.push('">\n      '),e.push(this.Icon(t.icon,"article-action-icon")),e.push('<span class="article-action-name">'),e.push(this.T(t.name)),e.push("</span>\n    </a>\n  ");e.push("\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/ticket_zoom/article_view_delivery_failed"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="article-meta-clip"></div>\n<div class="article-content">\n  <div class="small task-subline alert alert--warning">\n    '),e.push(this.T("Delivery failed")),e.push(': "'),e.push(n(this.article.body)),e.push('"\n  </div>\n</div>\n<div class="article-meta-clip"></div>\n')}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/ticket_zoom/article_view_system"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="small task-subline">\n"'),e.push(n(this.article.subject)),e.push('" -&gt; "'),e.push(n(this.article.to)),e.push('"\n</div>\n')}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/ticket_zoom/attribute_bar"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r;if(e.push('<div class="flex horizontal js-avatars"></div>\n<div class="buttonDropdown btn js-reset '),this.resetButtonShown||e.push("hide"),e.push('">'),e.push(this.T("Discard your unsaved changes.")),e.push('</div>\n<div class="buttonDropdown dropdown dropdown--actions dropup">\n  <div class="btn btn--text btn--icon--last" data-toggle="dropdown">\n    <span class="js-secondaryActionButtonLabel"></span> '),e.push(this.Icon("arrow-up")),e.push('\n  </div>\n  <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="secondaryAction">\n    <li class="js-secondaryAction" role="menuitem">\n      <span class="js-secondaryActionLabel" data-type="closeTab">'),e.push(this.T("Close tab")),e.push('</span>\n      <span class="dropdown-selectedSpacer js-selectedIcon">\n        '),e.push(this.Icon("checkmark")),e.push("\n      </span>\n    "),this.overview_id&&(e.push('\n    <li class="js-secondaryAction" role="menuitem">\n      <span class="js-secondaryActionLabel" data-type="closeNextInOverview">'),e.push(this.T("Next in overview")),e.push('</span>\n      <span class="dropdown-selectedSpacer js-selectedIcon">\n        '),e.push(this.Icon("checkmark")),e.push("\n      </span>\n    ")),e.push('\n    <li class="js-secondaryAction" role="menuitem">\n      <span class="js-secondaryActionLabel" data-type="stayOnTab">'),e.push(this.T("Stay on tab")),e.push('</span>\n      <span class="dropdown-selectedSpacer js-selectedIcon">\n        '),e.push(this.Icon("checkmark")),e.push('\n      </span>\n  </ul>\n</div>\n<form class="buttonDropdown">\n'),this.macroDisabled)e.push('\n  <button class="btn btn--primary js-submit">'),e.push(this.T("Update")),e.push("</button>\n");else{for(e.push('\n  <div class="buttonDropdown dropdown dropup js-submitDropdown">\n    <button class="btn btn--primary btn--split--first js-submit">'),e.push(this.T("Update")),e.push('</button>\n    <button class="btn btn--primary btn--slim btn--split--last js-openDropdownMacro">'),e.push(this.Icon("arrow-up")),e.push('</button>\n    <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="userAction">\n      '),r=this.macros,t=0,i=r.length;t<i;t++)s=r[t],e.push('\n        <li class="js-dropdownActionMacro" role="menuitem" data-id="'),e.push(n(s.id)),e.push('">'),e.push(this.T(s.displayName())),e.push("\n      ");e.push("\n    </ul>\n  </div>\n")}e.push("\n</form>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/ticket_zoom/highlighter"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o;for(e.push('<div class="btn btn--action btn--split--first js-highlight centered">\n  '),e.push(this.Icon("marker","js-highlight-icon")),e.push('\n</div>\n<div class="dropdown dropdown--actions">\n  <div class="btn btn--action btn--split--last btn--slim centered" data-toggle="dropdown" aria-expanded="true">\n    '),e.push(this.Icon("arrow-down")),e.push('\n  </div>\n  <ul class="dropdown-menu dropdown-menu-right" role="menu">\n    '),o=this.colors,i=s=0,r=o.length;s<r;i=++s)t=o[i],e.push('\n    <li role="presentation">\n      <a role="menuitem" tabindex="-1" class="js-highlightColor" data-key="'),e.push(n(i)),e.push('">\n        <span class="dropdown-iconSpacer">\n          <span class="color-swatch icon" style="color: '),e.push(n(t.color)),e.push('"></span>\n        </span>\n        '),e.push(this.Ti(t.name)),e.push('\n        <span class="dropdown-selectedSpacer js-selectedIcon'),i===this.activeColorIndex&&e.push(n(" is-selected")),e.push('">\n          '),e.push(this.Icon("checkmark")),e.push("\n        </span>\n      </a>\n    ");e.push("\n  </ul>\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/ticket_zoom/meta"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<small class="task-subline">\n  '),e.push(this.C("ticket_hook")),e.push(' <span class="ticket-number js-objectNumber" data-number="'),e.push(this.C("ticket_hook")),e.push(this.ticket.number),e.push('">'),e.push(this.ticket.number),e.push("</span> - "),e.push(this.T("created")),e.push(" "),e.push(this.humanTime(this.ticket.created_at)),e.push(" "),!this.isCustomer&&this.ticket.escalation_at&&(e.push(" - "),e.push(this.T("escalation")),e.push(" "),e.push(this.humanTime(this.ticket.escalation_at,!0))),e.push("\n</small>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/ticket_zoom/overview_navigator"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="pagination-counter" title="'),e.push(this.Ti(this.title)),e.push('">\n  <span class="pagination-item-current">'),e.push(n(this.current_position)),e.push('</span>/<span class="pagination-total-items">'),e.push(n(this.total_count)),e.push('</span>\n</div>\n<ul class="pagination">\n  <li '),this.previous||e.push('class="disabled"'),e.push(' title="'),e.push(this.Ti("Previous in overview")),e.push('">\n    <a class="centered previous" href="'),this.previous&&e.push(this.previous.uiUrl()),e.push('" data-id="'),this.previous&&e.push(this.previous.id),e.push('">\n      '),this.previous?(e.push("\n        "),e.push(this.Icon("arrow-left")),e.push("\n      ")):(e.push("\n        "),e.push(this.Icon("arrow-left","arrow--disabled")),e.push("\n      ")),e.push("\n    </a>\n  <li "),this.next||e.push('class="disabled"'),e.push(' title="'),e.push(this.Ti("Next in overview")),e.push('">\n    <a class="centered next" href="'),this.next&&e.push(this.next.uiUrl()),e.push('" data-id="'),this.next&&e.push(this.next.id),e.push('">\n      '),this.next?(e.push("\n        "),e.push(this.Icon("arrow-right")),e.push("\n      ")):(e.push("\n        "),e.push(this.Icon("arrow-right","arrow--disabled")),e.push("\n      ")),e.push("\n    </a>\n</ul>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/ticket_zoom/setting"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){
(function(){e.push('<div class="btn btn--action js-setting centered">\n  '),e.push(this.Icon("cog","dropdown-icon")),e.push("\n</div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/ticket_zoom/sidebar_article_attachment"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r;for(e.push('<div class="attachments-block js-attachments">\n  <div class="attachments-block-headline">'),e.push(this.humanTime(this.article.created_at)),e.push("</div>\n  "),r=this.article.attachments,i=0,s=r.length;i<s;i++)t=r[i],e.push('\n    <a class="attachment attachment--preview" title="'),e.push(t.preferences["Content-Type"]),e.push('" target="_blank" href="'),e.push(n(App.Config.get("api_path"))),e.push("/ticket_attachment/"),e.push(n(this.article.ticket_id)),e.push("/"),e.push(n(this.article.id)),e.push("/"),e.push(n(t.id)),e.push('?disposition=attachment" data-type="attachment"'),this.canDownload(t.preferences["Content-Type"])&&e.push(" download"),e.push('>\n      <div class="attachment-icon">\n      '),t.preferences&&t.preferences["Content-Type"]&&this.ContentTypeIcon(t.preferences["Content-Type"])?(e.push("\n        "),this.canPreview(t.preferences["Content-Type"])?(e.push('\n          <img src="'),e.push(n(App.Config.get("api_path"))),e.push("/ticket_attachment/"),e.push(n(this.article.ticket_id)),e.push("/"),e.push(n(this.article.id)),e.push("/"),e.push(n(t.id)),e.push('">\n        ')):(e.push("\n          "),e.push(this.Icon(this.ContentTypeIcon(t.preferences["Content-Type"]))),e.push("\n        ")),e.push("\n      ")):(e.push("\n        "),e.push(this.Icon("file-unknown")),e.push("\n      ")),e.push('\n      </div>\n      <span class="attachment-name u-highlight">'),e.push(n(t.filename)),e.push('</span>\n      <div class="attachment-size">'),e.push(this.humanFileSize(t.size)),e.push("</div>\n    </a>\n  ");e.push("\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/ticket_zoom/sidebar_idoit"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r;for(r=this.objects,t=0,i=r.length;t<i;t++)s=r[t],e.push('\n  <div class="sidebar-block">\n    <label class="horizontal">\n      '),e.push(this.T("ID")),e.push(": "),e.push(this.T(s.id)),e.push('\n      <div class="list-item-delete js-delete" data-object-id="'),e.push(n(s.id)),e.push('" data-type="remove">\n        '),e.push(this.Icon("diagonal-cross")),e.push('\n      </div>\n    </label>\n    <a href="'),e.push(s.link),e.push('" target="_blank">'),e.push(n(s.title)),e.push("<br></a>\n    "),e.push(this.T("Status")),e.push(": "),e.push(n(s.cmdb_status_title)),e.push("<br>\n    "),e.push(this.T("Type")),e.push(": "),e.push(n(s.type_title)),e.push("<br>\n  </div>\n");e.push("\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/ticket_zoom/sidebar_ticket"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<form>\n  <fieldset class="edit"></fieldset>\n</form>\n<div class="tags"></div>\n<div class="links"></div>\n<div class="js-timeUnit"></div>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/ticket_zoom/time_accounting"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<form>\n  <input type="text" name="time_unit" placeholder="'),e.push(this.T("Please enter your time which you want to account.")),e.push('"/>\n</form>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/ticket_zoom/time_unit"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push("<div>\n  <label>"),e.push(this.T("Accounted Time")),e.push("</label>\n  <div>"),e.push(n(this.ticket.time_unit)),e.push("</div>\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/ticket_zoom/title"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div contenteditable="true" class="ticket-title-update js-objectTitle" data-placeholder="'),e.push(this.Ti("Enter Title...")),e.push('">'),e.push(n(this.object.title)),e.push("</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/time_accounting/by_customer"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r;if(this.rows.length){for(e.push('\n<table class="table table-striped table-hover">\n  <thead>\n  <tr>\n    <th>'),e.push(this.T("Customer")),e.push("\n    <th>"),e.push(this.T("Organization")),e.push("\n    <th>"),e.push(this.T("Time Units")),e.push("\n  </thead>\n  <tbody>\n  "),s=this.rows,t=0,i=s.length;t<i;t++)r=s[t],e.push('\n  <tr>\n    <td><a href="#user/profile/'),e.push(r.customer.id),e.push('">'),e.push(n(r.customer.email)),e.push("</a>\n    <td>"),r.organization&&e.push(n(r.organization.name)),e.push("\n    <td>"),e.push(n(r.time_unit)),e.push("\n  ");e.push("\n  </tbody>\n</table>\n</div>\n")}else e.push('\n  <table class="settings-list settings-list--stretch settings-list--placeholder">\n    <thead><tr><th>'),e.push(this.T("No Entries")),e.push("\n  </table>\n");e.push("\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/time_accounting/by_organization"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r;if(this.rows.length){for(e.push('\n<table class="table table-striped table-hover">\n  <thead>\n  <tr>\n    <th>'),e.push(this.T("Organization")),e.push("\n    <th>"),e.push(this.T("Time Units")),e.push("\n  </thead>\n  <tbody>\n  "),s=this.rows,t=0,i=s.length;t<i;t++)r=s[t],e.push('\n  <tr>\n    <td><a href="#organization/profile/'),e.push(r.organization.id),e.push('">'),e.push(n(r.organization.name)),e.push("</a>\n    <td>"),e.push(n(r.time_unit)),e.push("\n  ");e.push("\n  </tbody>\n</table>\n</div>\n")}else e.push('\n  <table class="settings-list settings-list--stretch settings-list--placeholder">\n    <thead><tr><th>'),e.push(this.T("No Entries")),e.push("\n  </table>\n");e.push("\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/time_accounting/by_ticket"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r;if(this.rows.length){for(e.push('\n<table class="table table-striped table-hover">\n  <thead>\n  <tr>\n    <th>'),e.push(this.T("Ticket#")),e.push("\n    <th>"),e.push(this.T("Title")),e.push("\n    <th>"),e.push(this.T("Customer")),e.push("\n    <th>"),e.push(this.T("Organization")),e.push("\n    <th>"),e.push(this.T("Agent")),e.push("\n    <th>"),e.push(this.T("Time Units")),e.push("\n    <th>"),e.push(this.T("Time Units Total")),e.push("\n    <th>"),e.push(this.T("Created at")),e.push("\n    <th>"),e.push(this.T("Closed at")),e.push("\n  </thead>\n  <tbody>\n  "),s=this.rows,t=0,i=s.length;t<i;t++)r=s[t],e.push('\n  <tr>\n    <td><a href="#ticket/zoom/'),e.push(r.ticket.id),e.push('">'),e.push(n(r.ticket.number)),e.push('</a>\n    <td title="'),e.push(n(r.ticket.title)),e.push('">'),e.push(n(r.ticket.title)),e.push("\n    <td>"),e.push(n(r.customer)),e.push("\n    <td>"),e.push(n(r.organization)),e.push("\n    <td>"),e.push(n(r.agent)),e.push("\n    <td>"),e.push(n(r.time_unit)),e.push("\n    <td>"),e.push(n(r.ticket.time_unit)),e.push("\n    <td>"),e.push(this.humanTime(r.ticket.created_at)),e.push("\n    <td>"),e.push(this.humanTime(r.ticket.close_at)),e.push("\n  ");e.push("\n  </tbody>\n</table>\n</div>\n")}else e.push('\n  <table class="settings-list settings-list--stretch settings-list--placeholder">\n    <thead><tr><th>'),e.push(this.T("No Entries")),e.push("\n  </table>\n");e.push("\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/time_accounting/index"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o,a,l;for(e.push('<div class="page-header">\n  <div class="page-header-title">\n      <div class="zammad-switch zammad-switch--small js-timeAccountingSetting">\n         <input name="chat" type="checkbox" id="time-accounting" '),this.C("time_accounting")&&e.push("checked"),e.push('>\n         <label for="time-accounting"></label>\n      </div>\n    <h1>'),e.push(this.T("Time Accounting")),e.push('<small></small></h1>\n  </div>\n</div>\n<div class="page-content">\n\n  <div class="settings-entry">\n    <div class="page-header-title">\n      <h2>'),e.push(this.T("Selector")),e.push("</h2>\n    </div>\n    <p>"),e.push(this.T("Enable time accounting for following matching tickets.")),e.push('</p>\n    <div class="js-selector"></div>\n    <button type="submit" class="btn btn--primary js-timeAccountingFilter">'),e.push(this.T("Save")),e.push('</button>\n    <button type="submit" class="btn btn--danger js-timeAccountingFilterReset">'),e.push(this.T("Reset")),e.push('</button>\n  </div>\n\n  <div class="settings-entry">\n\n    <h2>'),e.push(this.T("Overviews")),e.push('</h2>\n    <div class="well">\n      <div class="btn-group btn-group--full" role="group" aria-label="">\n        '),a=this.timeRangeYear,t=0,r=a.length;t<r;t++)i=a[t],e.push('\n          <div class="btn btn--text btn--large js-timePickerYear'),this.year===i.value&&e.push(" is-selected"),e.push('" data-id="'),e.push(n(this.timeRange)),e.push('" data-type="'),e.push(n(i.value)),e.push('">'),e.push(n(i.display)),e.push("</div>\n        ");for(e.push('\n      </div>\n\n      <div class="btn-group btn-group--full" role="group" aria-label="">\n        '),l=this.timeRangeMonth,s=0,o=l.length;s<o;s++)i=l[s],e.push('\n          <div class="btn btn--text btn--large js-timePickerMonth'),this.month===i.value&&e.push(" is-selected"),e.push('" data-id="'),e.push(n(this.timeRange)),e.push('" data-type="'),e.push(n(i.value)),e.push('">'),e.push(n(i.display)),e.push("</div>\n        ");e.push("\n      </div>\n    </div>\n    <h3>"),e.push(this.T("Ticket")),e.push(' <a href="'),e.push(this.apiPath),e.push("/time_accounting/log/by_ticket/"),e.push(n(this.year)),e.push("/"),e.push(n(this.month)),e.push('?download=true" class="js-downloadByTicket" data-type="attachment">'),e.push(this.Icon("download")),e.push('</a></h3>\n    <div class="js-tableTicket"></div>\n    <br>\n    <h3>'),e.push(this.T("Customer")),e.push(' <a href="'),e.push(this.apiPath),e.push("/time_accounting/log/by_customer/"),e.push(n(this.year)),e.push("/"),e.push(n(this.month)),e.push('?download=true" class="js-downloadByCustomer" data-type="attachment">'),e.push(this.Icon("download")),e.push('</a></h3>\n    <div class="js-tableCustomer"></div>\n    <br>\n    <h3>'),e.push(this.T("Organization")),e.push(' <a href="'),e.push(this.apiPath),e.push("/time_accounting/log/by_organization/"),e.push(n(this.year)),e.push("/"),e.push(n(this.month)),e.push('?download=true" class="js-downloadByOrganization" data-type="attachment">'),e.push(this.Icon("download")),e.push('</a></h3>\n    <div class="js-tableOrganization"></div>\n  </div>\n\n</div>\n')}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/translation/index"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="page-header">\n  <div class="page-header-title">\n    <h1>'),e.push(this.T("Translations")),e.push(" <small>"),e.push(n(this.currentLanguage)),e.push('</small></h1>\n  </div>\n  <div class="page-header-meta">\n    <a class="btn btn--success js-syncChanges">'),e.push(this.T("Get latest translations")),e.push('</a>\n    <a class="btn btn--danger hidden js-changes js-resetChanges">'),e.push(this.T("Reset changes")),e.push('</a>\n    <a class="btn btn--primary hidden js-changes js-pushChanges">'),e.push(this.T("Push my changes")),e.push('</a>\n  </div>\n</div>\n<div class="page-content">\n\n  <div class="box box--message">\n    <h2>'),e.push(this.T("Inline translation")),e.push("</h2>\n    <p>"),e.push(this.T('To make translations easier you can enable and disable the inline translation feature by pressing "%s".',"ctrl+alt+t")),e.push("</p>\n    <p>"),e.push(this.T("Text with disabled inline translations looks like")),e.push('\u2002<button class="btn btn-primary">'),e.push(this.Ti("Some Text")),e.push("</button></p>\n    <p>"),e.push(this.T("Text with enabled inline translations looks like")),e.push('\u2002<button class="btn btn-primary"><span class="translation" contenteditable="true">'),e.push(this.Ti("Some Text")),e.push("</button></span></p>\n    <p>"),e.push(this.T("Just click into the marker and update the words just in place. Enjoy!")),e.push("</p>\n    <p>"),e.push(this.T("If you want to translate it via the translation table, just go ahead below.")),e.push('</p>\n  </div>\n\n  <div class="js-ToDo"></div>\n  <div class="js-List"></div>\n</div>\n')}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/translation/list"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o,a,l,c,u;for(e.push("<h2>"),e.push(this.T("Date & Time")),e.push('</h2>\n<table class="translationOverview js-translated table table-striped table-hover">\n  <thead>\n    <tr>\n      <th class="translationOverview-source">'),e.push(this.T("Type")),e.push('</th>\n      <th class="translationOverview-target">'),e.push(this.T("Target")),e.push('</th>\n      <th class="translationOverview-initial">'),e.push(this.T("Original")),e.push('</th>\n      <th class="translationOverview-action">'),e.push(this.T("Action")),e.push("</th>\n    </tr>\n  </thead>\n  <tbody>\n  "),l=this.times,i=0,o=l.length;i<o;i++)u=l[i],e.push("\n    "),t=!1,e.push("\n    "),u[2]!==u[3]&&(t=!0),e.push("\n    <tr "),t&&e.push('class="warning"'),e.push('>\n      <td title="'),e.push(n(u[1])),e.push('">'),e.push(n(u[1])),e.push('\n      <td class="translationOverview-itemContainer"><input class="js-Item translationOverview-item form-control" value="'),e.push(n(u[2])),e.push('" data-source="'),e.push(n(u[1])),e.push('" data-initial="'),e.push(n(u[3])),e.push('" data-id="'),e.push(n(u[0])),e.push('" data-format="'),e.push(n(u[4])),e.push('">\n      <td title="'),e.push(n(u[3])),e.push('">'),e.push(n(u[3])),e.push('\n      <td><a href="#" class="js-Reset btn btn--text'),t||e.push(" hidden"),e.push('">'),e.push(this.T("Reset")),e.push("</a>\n  ");if(e.push("\n  </tbody>\n</table>\n\n<h2>"),e.push(this.T("Words")),e.push("</h2>\n"),_.isEmpty(this.strings)&&!this.notSourceTranslation)e.push("\n<div>"),e.push(this.T("English is the source language, so we have nothing to translate.")),e.push("</div>\n");else{for(e.push('\n<table class="translationOverview js-translated table table-striped table-hover">\n  <thead>\n    <tr>\n      <th class="translationOverview-source">'),e.push(this.T("Source")),e.push('</th>\n      <th class="translationOverview-target">'),e.push(this.T("Target")),e.push('</th>\n      <th class="translationOverview-initial">'),e.push(this.T("Original")),e.push('</th>\n      <th class="translationOverview-action">'),e.push(this.T("Action")),e.push("</th>\n    </tr>\n  </thead>\n  <tbody>\n    "),c=this.strings,r=0,a=c.length;r<a;r++)s=c[r],e.push("\n    "),t=!1,e.push("\n    "),s[2]!==s[3]&&(t=!0),e.push("\n    <tr "),t&&e.push('class="warning"'),e.push('>\n      <td class="noTruncate" title="'),e.push(n(s[1])),e.push('">'),e.push(n(s[1])),e.push('\n      <td class="translationOverview-itemContainer"><input class="js-Item translationOverview-item form-control" value="'),e.push(n(s[2])),e.push('" data-source="'),e.push(n(s[1])),e.push('" data-initial="'),e.push(n(s[3])),e.push('" data-id="'),e.push(n(s[0])),e.push('" data-format="'),e.push(n(s[4])),e.push('">\n      <td class="noTruncate" title="'),e.push(n(s[3])),e.push('">'),e.push(n(s[3])),e.push('\n      <td><a href="#" class="js-Reset btn btn--text'),t||e.push(" hidden"),e.push('">'),e.push(this.T("Reset")),e.push("</a>\n    ");e.push("\n  </tbody>\n</table>\n")}e.push("\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/translation/support"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push("<p "),!1===this.better&&e.push('class="hidden"'),e.push(">\n"),e.push(this.T("Only %s% of this language is translated, help to improve Zammad and complete the translation.",this.percent)),e.push("\n</p>\n<p "),!0===this.better&&e.push('class="hidden"'),e.push(">\n"),e.push(this.T("Up to %s% of this language is translated, help to make Zammad even better and complete the translation.",this.percent)),e.push("\n</p>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/translation/todo"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r;for(e.push("<h2>"),e.push(this.T("Words")),e.push(": "),e.push(this.T("not translated")),e.push('</h2>\n<table class="translationOverview table table-striped table-hover">\n  <thead>\n    <tr>\n      <th class="translationOverview-source">'),e.push(this.T("Source")),e.push('</th>\n      <th class="translationOverview-target">'),e.push(this.T("Target")),e.push('</th>\n      <th class="translationOverview-action">'),e.push(this.T("Action")),e.push("</th>\n    </tr>\n  </thead>\n  <tbody>\n    "),r=this.list,t=0,s=r.length;t<s;t++)i=r[t],e.push('\n    <tr>\n      <td title="'),e.push(n(i[1])),e.push('">'),e.push(n(i[1])),e.push('\n      <td class="translationOverview-itemContainer"><input class="js-Item translationOverview-item form-control" value="'),e.push(n(i[2])),e.push('" data-source="'),e.push(n(i[1])),e.push('" data-id="'),e.push(n(i[0])),e.push('">\n      <td><a href="#" class="js-create btn btn--text">'),e.push(this.T("Create")),e.push('</a> / <a href="#" class="js-theSame btn btn--text">'),e.push(this.T("is the same")),e.push("</a>\n    ");e.push("\n  </tbody>\n</table>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/twitter/account_edit"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="alert alert--danger hidden" role="alert"></div>\n<fieldset>\n\n  <h3>'),e.push(this.T("Search Terms")),e.push('</h3>\n  <p class="description">'),e.push(this.T("Tweets containing search terms are automatically turned into tickets.")),e.push('</p>\n\n  <table class="settings-list">\n    <thead>\n      <tr>\n        <th>'),e.push(this.T("Search Term")),e.push("\n        <th>"),e.push(this.T("Group")),e.push("\n        <th>"),e.push(this.T("Action")),e.push('\n    </thead>\n    <tbody class="js-searchTermList">\n      <tr>\n        <td colspan="3">\n          '),e.push(this.T("Empty")),e.push('\n    </tbody>\n    <tfoot>\n      <tr>\n        <td colspan="3" class="settings-list-action-cell js-searchTermAdd">\n          '),e.push(this.Icon("plus-small")),e.push("\n    </tfoot>\n  </table>\n\n  <h3>"),e.push(this.T("Mentions Group")),e.push('</h3>\n  <p class="description">'),e.push(this.T("Choose which group %s will get added to.","mentions")),e.push('</p>\n  <div class="js-mentionsGroup"></div>\n\n  <h3>'),e.push(this.T("Direct Messages Group")),e.push('</h3>\n  <p class="description">'),e.push(this.T("Choose which group %s will get added to.","direct messages")),e.push('</p>\n  <div class="js-directMessagesGroup"></div>\n\n  <h3>'),e.push(this.T("Retweets")),e.push('</h3>\n  <p class="description">'),e.push(this.T("Choose if retweets should also be converted to tickets.")),e.push('</p>\n  <input name="track_retweets" type="checkbox" id="setting-chat" value="true" '),this.channel.options.sync.track_retweets&&e.push("checked"),e.push("> "),e.push(this.T("Track retweets")),e.push("\n\n</fieldset>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/twitter/app_config"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="alert alert--danger hidden" role="alert"></div>\n<p>\n  '),e.push(this.T("The tutorial on how to manage a %s is hosted on our [online documentation](https://zammad.org/documentation/channel/twitter).","Twitter App")),e.push("\n</p>\n<fieldset>\n  <h2>"),e.push(this.T("Enter your %s App Keys","Twitter")),e.push('</h2>\n  <div class="input form-group">\n    <div class="formGroup-label">\n      <label for="consumer_key">Twitter Consumer Key <span>*</span></label>\n    </div>\n    <div class="controls">\n      <input id="consumer_key" type="text" name="consumer_key" value="'),this.external_credential&&this.external_credential.credentials&&e.push(n(this.external_credential.credentials.consumer_key)),e.push('" class="form-control" required autocomplete="off" >\n    </div>\n  </div>\n  <div class="input form-group">\n    <div class="formGroup-label">\n      <label for="consumer_secret">Twitter Consumer Secret <span>*</span></label>\n    </div>\n    <div class="controls">\n      <input id="consumer_secret" type="text" name="consumer_secret" value="'),this.external_credential&&this.external_credential.credentials&&e.push(n(this.external_credential.credentials.consumer_secret)),e.push('" class="form-control" required autocomplete="off" >\n    </div>\n  </div>\n  <h2>'),e.push(this.T("Your callback URL")),e.push('</h2>\n  <div class="input form-group">\n    <div class="controls">\n      <input class="form-control js-select" readonly value="'),e.push(n(this.callbackUrl)),e.push('">\n    </div>\n  </div>\n</fieldset>\n')}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/twitter/index"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="page-header">\n  <div class="page-header-title">\n    <h1>'),e.push(this.T("Twitter")),e.push(" <small>"),e.push(this.T("Accounts")),e.push('</small></h1>\n  </div>\n</div>\n\n<div class="page-content">\n  <div class="page-description">\n    <p>'),e.push(this.T("You can connect %s with Zammad. You need to connect your Zammad with %s first.","Twitter Accounts","Twitter")),e.push('</p>\n    <div class="btn btn--success js-configApp">'),e.push(this.T("Connect Twitter App")),e.push("</div>\n  </div>\n</div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/twitter/list"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o,a,l,c,u,p,h;for(e.push('<div class="page-header">\n  <div class="page-header-title">\n    <h1>'),e.push(this.T("Twitter")),e.push(" <small>"),e.push(this.T("Accounts")),e.push('</small></h1>\n  </div>\n\n  <div class="page-header-meta">\n    <a class="btn js-configApp">'),e.push(this.T("Configure App")),e.push('</a>\n    <a class="btn btn--success js-new">'),e.push(this.T("Add Account")),e.push('</a>\n  </div>\n</div>\n\n<div class="page-content">\n'),c=this.channels,i=0,o=c.length;i<o;i++){if(t=c[i],e.push('\n  <div class="action '),!0!==t.active&&e.push("is-inactive"),e.push('" data-id="'),e.push(n(t.id)),e.push('">\n    <div class="action-block action-row">\n      <h2>'),e.push(this.Icon("status","supergood-color inline")),e.push(" "),e.push(n(t.options.user.name)),e.push(' <span class="text-muted">@'),e.push(n(t.options.user.screen_name)),e.push('</span></h2>\n    </div>\n    <div class="action-flow action-flow--row">\n      <div class="action-block">\n        <h3>'),e.push(this.T("Search Terms")),e.push("</h3>\n        "),t.options.sync.search){for(e.push("\n          "),u=t.options.sync.search,s=0,a=u.length;s<a;s++)h=u[s],e.push("\n            "),e.push(n(h.term)),e.push("<br>\n          ");e.push("\n        ")}if(e.push("\n      </div>\n      "),e.push(this.Icon("arrow-right","action-flow-icon")),e.push('\n      <div class="action-block">\n        <h3>'),e.push(this.T("Group")),e.push("</h3>\n        "),t.options.sync.search){for(e.push("\n          "),p=t.options.sync.search,r=0,l=p.length;r<l;r++)h=p[r],e.push("\n            "),e.push(n(h.groupName)),e.push("<br>\n          ");e.push("\n        ")}e.push('\n      </div>\n    </div>\n    <div class="action-flow action-flow--row">\n      <div class="action-block">\n        <h3>'),e.push(this.T("Mentions")),e.push("</h3>\n        @"),e.push(n(t.options.user.screen_name)),e.push("\n      </div>\n      "),e.push(this.Icon("arrow-right","action-flow-icon")),e.push('\n      <div class="action-block">\n        <h3>'),e.push(this.T("Group")),e.push("</h3>\n        "),t.options.sync.mentions&&(e.push("\n          "),e.push(n(t.options.sync.mentions.groupName)),e.push("\n        ")),e.push('\n      </div>\n    </div>\n    <div class="action-flow action-flow--row">\n      <div class="action-block">\n        <h3>'),e.push(this.T("Direct Messages")),e.push("</h3>\n        @"),e.push(n(t.options.user.screen_name)),e.push("\n      </div>\n      "),e.push(this.Icon("arrow-right","action-flow-icon")),e.push('\n      <div class="action-block">\n        <h3>'),e.push(this.T("Group")),e.push("</h3>\n        "),t.options.sync.direct_messages&&(e.push("\n          "),e.push(n(t.options.sync.direct_messages.groupName)),e.push("\n        ")),e.push('\n      </div>\n    </div>\n    <div class="action-flow action-flow--row">\n      <div class="action-block">\n        <h3>'),e.push(this.T("Retweets")),e.push("</h3>\n        "),t.options.sync.track_retweets?(e.push("\n          "),e.push(this.T("Retweets are converted to Tickets")),e.push(".\n        ")):(e.push("\n          "),e.push(this.T("Conversion of retweets to tickets is turned off")),e.push(".\n        ")),e.push('\n      </div>\n    </div>\n    <div class="action-controls">\n      <div class="btn btn--danger btn--secondary js-delete">'),e.push(this.T("Delete")),e.push("</div>\n      "),!0===t.active?(e.push('\n        <div class="btn btn--secondary js-disable">'),e.push(this.T("Disable")),e.push("</div>\n      ")):(e.push('\n        <div class="btn btn--secondary js-enable">'),e.push(this.T("Enable")),e.push("</div>\n      ")),e.push('\n      <div class="btn js-edit">'),e.push(this.T("Edit")),e.push("</div>\n    </div>\n  </div>\n")}e.push("\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/twitter/search_term"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<tr>\n  <td class="settings-list-control-cell"><input name="search::term" value="'),e.push(n(this.term)),
e.push('" class="form-control form-control--small">\n  <td class="settings-list-control-cell"><div class="js-termGroup" data-index="'),e.push(n(this.index)),e.push('"></div>\n  <td class="settings-list-row-control">\n    <div class="btn btn--text js-searchTermRemove" data-index="'),e.push(n(this.index)),e.push('">\n      '),e.push(this.Icon("trash")),e.push(" "),e.push(this.T("Remove")),e.push("\n    </div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/user"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o,a,l,c;if(e.push('<div class="page-header">\n  <div class="page-header-title">\n    <h1>'),e.push(this.T(this.head)),e.push(" <small>"),e.push(this.T("Management")),e.push('</small></h1>\n  </div>\n  <div class="page-header-meta">\n    '),this.buttons){for(e.push("\n    "),a=this.buttons,i=0,r=a.length;i<r;i++)t=a[i],e.push('\n      <a data-type="'),e.push(n(t["data-type"])),e.push('" class="btn '),e.push(n(t["class"])),e.push('">'),e.push(this.T(t.name)),e.push("</a>\n    ");e.push("\n    ")}for(e.push('\n  </div>\n</div>\n<div class="page-content">\n  <div class="searchfield">\n    <input class="js-search form-control" name="search" placeholder="'),e.push(this.Ti("Search for users")),e.push('" type="search">\n    '),e.push(this.Icon("magnifier")),e.push('\n  </div>\n\n  <div class="userSearch horizontal">\n    <div class="userSearch-label">'),e.push(this.T("Roles")),e.push(':</div>\n    <div class="tabs tabs-wide">\n      '),l=this.roles,s=0,o=l.length;s<o;s++)c=l[s],e.push('\n        <div class="tab" data-id="'),e.push(n(c.id)),e.push('">'),e.push(this.T(c.displayName())),e.push("</div>\n      ");e.push('\n    </div>\n  </div>\n\n  <div class="table-overview"></div>\n</div>\n')}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/user_profile/index"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="profile">\n  <div class="profile-window">\n    <div class="profile-section vertical centered">\n      <div class="align-right profile-action js-action"></div>\n      '),e.push(this.user.avatar("80")),e.push('\n      <h1 class="js-name"></h1>\n      '),this.user.organization&&e.push('\n        <div class="profile-organization js-organization"></div>\n      '),e.push('\n    </div>\n    <div class="profile-section js-object-container"></div>\n    <div class="profile-section js-ticket-stats"></div>\n  </div>\n</div>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/user_profile/object"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r;for(e.push('<div class="profile-details horizontal wrap">\n  '),s=this.userData,t=0,i=s.length;t<i;t++)r=s[t],e.push("\n    "),"richtext"===r.tag?(e.push('\n      <div class="profile-detailsEntry" style="width: 100%;">\n        <label>'),e.push(this.T(r.display)),e.push('</label>\n        <div contenteditable="true" data-name="'),e.push(n(r.name)),e.push('" data-type="update" data-placeholder="'),e.push(this.Ti("Add a Note")),e.push('">'),e.push(this.user[r.name]),e.push("</div>\n      </div>\n    ")):(e.push("\n      "),this.user[r.name]&&(e.push('\n        <div class="profile-detailsEntry">\n          <label>'),e.push(this.T(r.display)),e.push("</label>\n          "),e.push(this.P(this.user,r.name)),e.push("\n        </div>\n      ")),e.push("\n    ")),e.push("\n  ");e.push("\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/user_profile/organization"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<a href="'),e.push(this.organization.uiUrl()),e.push('">'),e.push(n(this.organization.displayName())),e.push("</a>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/version"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="page-header-title">\n  <h1>'),e.push(this.T("Version")),e.push('<small></small></h1>\n</div>\n<div class="page-content">\n  <p>\n    '),e.push(this.T("This is Zammad version %s",this.version)),e.push("\n  </p>\n</div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/vertical"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('\n\n<div class="search">\n  <form class="search-holder">\n    <input id="global-search" type="search" autocomplete="off">\n    '),e.push(this.Icon("magnifier")),e.push('\n    <div class="empty-search js-emptySearch">\n      '),e.push(this.Icon("diagonal-cross")),e.push('\n    </div>\n  </form>\n  <div class="logo js-toggleNotifications">\n<img src="/assets/images/logo.png" width="40">\n    <div class="activity-counter js-notificationsCounter"></div>\n  </div>\n  <div class="global-search-menu">\n    <a href="#search" class="global-search-detail-link nav-tab nav-tab--search js-details-link">\n      <div class="nav-tab-icon">\n        '),e.push(this.Icon("searchdetail")),e.push('\n      </div>\n      <div class="nav-tab-name flex u-textTruncate">\n        '),e.push(this.T("Show Search Details")),e.push("\n        "),e.push(this.Icon("long-arrow-down")),e.push('\n      </div>\n    </a>\n    <ul class="global-search-result js-global-search-result" role="menu"></ul>\n  </div>\n</div>\n<div class="menu js-menu"></div>\n<div class="tasks tasks-navigation"></div>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/widget/http_log"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o,a,l,c;if(e.push("<hr>\n<h2>"),e.push(this.T("Recent logs")),e.push("</h2>\n"),this.description){for(e.push("\n  "),l=this.description,t=0,r=l.length;t<r;t++)i=l[t],e.push("\n    <p>"),e.push(this.T.apply(this,i)),e.push("</p>\n  ");e.push("\n")}if(e.push('\n<div class="settings-entry">\n'),this.records.length){for(e.push('\n  <table class="settings-list settings-list--stretch">\n    <thead>\n      <tr>\n        <th width="10%">'),e.push(this.T("Direction")),e.push("\n        <th>"),e.push(this.T("Request")),e.push('\n        <th width="25%">'),e.push(this.T("Created at")),e.push("\n    </thead>\n    <tbody>\n"),c=this.records,s=0,o=c.length;s<o;s++)a=c[s],e.push('\n      <tr data-id="'),e.push(n(a.id)),e.push('" class="js-record">\n        <td>'),e.push(this.T(a.direction)),e.push('\n        <td><a href="#">'),e.push(n(a.status)),e.push(" "),e.push(n(a.method)),e.push(" "),e.push(n(a.url)),e.push("</a>\n        <td>"),e.push(this.humanTime(a.created_at)),e.push("\n");e.push("\n    </tbody>\n  </table>\n")}else e.push('\n<table class="settings-list settings-list--stretch settings-list--placeholder">\n  <thead><tr><th>'),e.push(this.T("No Entries")),e.push("\n</table>\n");e.push("\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/widget/http_log_show"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="settings-entry">\n  <table class="settings-list" style="width: 100%;">\n    <tbody>\n      <tr>\n        <td width="20%">'),e.push(this.T("Direction")),e.push("\n        <td>"),e.push(this.T(this.record.direction)),e.push("\n      <tr>\n        <td>"),e.push(this.T("URL")),e.push("\n        <td>"),e.push(n(this.record.url)),e.push("\n      <tr>\n        <td>"),e.push(this.T("Method")),e.push("\n        <td>"),e.push(n(this.record.method)),e.push("\n      <tr>\n        <td>"),e.push(this.T("Status")),e.push("\n        <td>"),e.push(n(this.record.status)),e.push("\n      <tr>\n        <td>"),e.push(this.T("Request")),e.push("\n        <td>"),e.push(App.Utils.text2html(this.record.request.content)),e.push("\n      <tr>\n        <td>"),e.push(this.T("Response")),e.push("\n        <td>"),e.push(App.Utils.text2html(this.record.response.content)),e.push("\n      <tr>\n        <td>"),e.push(this.T("Created at")),e.push("\n        <td>"),e.push(this.datetime(this.record.created_at)),e.push("\n    </tbody>\n  </table>\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/widget/invite_user"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="modal-dialog wizard">\n\n  <form class="modal-content setup wizard js-user">\n    <div class="modal-header">\n      <div class="modal-close js-close">\n        '),e.push(this.Icon("diagonal-cross")),e.push('\n      </div>\n      <h1 class="modal-title">'),e.push(this.T(this.head)),e.push('</h1>\n    </div>\n    <div class="modal-body">\n      <div class="wizard-body vertical justified">\n        <div class="js-form"></div>\n      </div>\n    </div>\n    <div class="modal-footer">\n      <div class="modal-rightFooter">\n      <a class="btn btn--text btn--secondary js-close" data-slide="js-inbound">'),e.push(this.T("Cancel")),e.push('</a>\n      </div>\n      <div class="modal-rightFooter">\n        <button class="btn btn--primary align-right">'),e.push(this.T("Invite")),e.push('</button>\n      </div>\n    </div>\n  </form>\n\n  <form class="modal-content setup wizard hide js-waiting">\n    <div class="modal-header">\n      <div class="modal-close js-close">\n        '),e.push(this.Icon("diagonal-cross")),e.push('\n      </div>\n      <h1 class="modal-title">'),e.push(this.T(this.head)),e.push('</h1>\n    </div>\n    <div class="modal-body">\n      <div class="wizard-body vertical justified">\n        <p class="wizard-loadingText">\n          <span class="loading icon"></span> '),e.push(this.T("Sending...")),e.push('\n        </p>\n      </div>\n    </div>\n    <div class="modal-footer"></div>\n  </form>\n\n  <form class="modal-content setup wizard hide js-success">\n    <div class="modal-header">\n      <div class="modal-close js-close">\n        '),e.push(this.Icon("diagonal-cross")),e.push('\n      </div>\n      <h1 class="modal-title">'),e.push(this.T(this.head)),e.push('</h1>\n    </div>\n    <div class="modal-body">\n      <div class="wizard-body vertical justified">\n        <p class="wizard-loadingText">\n          <span class="loading icon"></span> '),e.push(this.T("done")),e.push('\n        </p>\n      </div>\n    </div>\n    <div class="modal-footer"></div>\n  </form>\n\n</div>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/widget/online_notification"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="arrow js-arrow"></div>\n<div class="popover-notificationsHeader js-header">\n  <div class="popover-title">'),e.push(this.T("Notifications")),e.push(" <span class='popover-notificationsCounter js-notificationsCounter'>"),e.push(this.count),e.push('</span></div>\n  <a class="btn btn--text btn--subtle js-mark'),this.count||e.push(" hide"),e.push('">'),e.push(this.T("Mark all as read")),e.push('</a>\n</div>\n<div class="popover-content js-content">\n  <div class="activity-placeholder js-noNotifications">\n    '),e.push(this.T("No unread notifications for you. :)")),e.push('\n  </div>\n  <div class="js-items"></div>\n</div>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/widget/online_notification_item"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="js-item activity-entry activity-entry--removeable'),this.item.seen&&e.push(" is-inactive"),e.push('" data-id="'),e.push(this.item.id),e.push('">\n  <a class="activity-avatar user-popover" data-id="'),e.push(n(this.item.created_by_id)),e.push('" '),1!==this.item.created_by_id&&(e.push('href="'),e.push(this.item.created_by.uiUrl()),e.push('"')),e.push(">\n    "),e.push(this.item.created_by.avatar()),e.push('\n  </a>\n  <div class="activity-body">\n    <a class="activity-message js-locationVerify" href="'),e.push(this.item.link),e.push('">\n      <span class="activity-text">\n        '),this.item.objectNative&&this.item.objectNative.activityMessage?(e.push("\n          "),e.push(this.item.objectNative.activityMessage(this.item)),e.push("\n        ")):(e.push("\n          Need objectNative in item "),e.push(n(this.item.object)),e.push(".find("),e.push(n(this.item.o_id)),e.push(")\n        ")),e.push("\n      </span>\n      "),e.push(this.humanTime(this.item.created_at,!1,"activity-time")),e.push('\n    </a>\n    <div class="activity-remove js-remove">\n      <div class="activity-remove-icon-holder">\n        '),e.push(this.Icon("diagonal-cross")),e.push("\n      </div>\n    </div>\n  </div>\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/widget/organization"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o,a,l,c;for(e.push('<div class="sidebar-block">\n    <div class="avatar organizationInfo-avatar size-50">\n      <a href="'),e.push(this.organization.uiUrl()),e.push('">\n        '),e.push(this.Icon("organization")),e.push('\n      </a>\n    </div>\n    <h3 title="'),e.push(this.Ti("Name")),e.push('">'),e.push(n(this.organization.displayName())),e.push("</h3>\n</div>\n\n"),o=this.organizationData,t=0,s=o.length;t<s;t++)l=o[t],e.push("\n  "),(this.organization[l.name]||"note"===l.name)&&(e.push('\n    <div class="sidebar-block">\n    '),"richtext"!==l.tag?(e.push("\n      <label>"),e.push(this.T(l.display)),e.push("</label>\n      "),e.push(this.P(this.organization,l.name)),e.push("\n    ")):(e.push("\n      <label>"),e.push(this.T(l.display)),e.push('</label>\n      <div contenteditable="true" data-name="'),e.push(n(l.name)),e.push('" data-type="update-org" data-placeholder="'),e.push(this.Ti("Add a Note")),e.push('">'),e.push(this.organization[l.name]),e.push("</div>\n    ")),e.push("\n    </div>\n  ")),e.push("\n");if(e.push("\n\n"),this.organization.members){for(e.push('\n<hr>\n<div class="sidebar-block">\n  <label>'),e.push(this.T("Members")),e.push('</label>\n  <div class="userList">\n'),a=this.organization.members,i=0,r=a.length;i<r;i++)c=a[i],e.push('\n    <div class="userList-entry">\n      '),e.push(c.avatar("40")),e.push('\n      <a href="'),e.push(c.uiUrl()),e.push('" class="userList-name user-popover" data-id="'),e.push(c.id),e.push('">\n        '),e.push(n(c.displayName())),e.push("\n      </a>\n    </div>\n");e.push("\n  </div>\n</div>\n")}e.push("\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/widget/script_snipped"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,n,i,s;if(e.push("<hr>\n<h2>"),e.push(this.T("Usage")),e.push("</h2>\n"),this.description){for(e.push("\n  "),s=this.description,t=0,i=s.length;t<i;t++)n=s[t],e.push("\n    <p>"),e.push(this.T.apply(this,n)),e.push("</p>\n  ");e.push("\n")}e.push('\n<pre><code class="language-'),e.push(this.style),e.push(' js-code">'),e.push(this.content),e.push("</code></pre>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/widget/switch_back_to_user"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push(this.Icon("switchView","switchBackToUser-icon")),e.push('\n<div class="switchBackToUser-text">'),e.push(this.T('Zammad looks like this for "%s"',this.S("firstname")+" "+this.S("lastname"))),e.push('</div>\n<div class="align-right horizontal center js-close u-clickable">\n  '),e.push(this.T("Back to my view")),e.push('\n  <div class="switchBackToUser-close">\n    '),e.push(this.Icon("diagonal-cross")),e.push("\n  </div>\n</div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/widget/tag"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r;for(e.push("<label>"),e.push(this.T("Tags")),e.push('</label>\n<ul class="list list--sidebar">\n  '),s=this.tags,t=0,i=s.length;t<i;t++)r=s[t],e.push('\n  <li class="list-item">\n    <a href="#" class="list-item-name js-tag">'),e.push(n(r)),e.push('</a>\n    <div class="list-item-delete js-delete">\n      '),e.push(this.Icon("diagonal-cross")),e.push("\n    </div>\n  ");e.push('\n</ul>\n<div class="text-muted js-newTagLabel u-clickable">+ '),e.push(this.T("Add Tag")),e.push('</div>\n<form>\n  <input type="text" name="new_tag" class="hide js-newTagInput" autocomplete="off">\n</form>\n')}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/widget/task_item"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<a href="'),e.push(this.item.meta.url),e.push('" title="'),e.push(n(this.item.meta.title)),e.push('" class="nav-tab task js-item js-locationVerify '),e.push(n(this.item.meta["class"])),this.item.active&&e.push(" is-active"),this.item.notify&&e.push(" is-modified"),e.push('" data-key="'),e.push(this.item.key),e.push('">\n  <div class="nav-tab-icon" title="'),e.push(this.Ti(this.item.meta.iconTitle)),e.push('">\n    '),"task"===this.item.meta.type?(e.push("\n      "),this.item.notify?(e.push("\n        "),e.push(this.Icon("small-dot","icon-status-modified-inner-circle icon-task-state "+this.item.meta.iconClass)),e.push("\n        "),e.push(this.Icon("status-modified-outer-circle","icon-task-state "+this.item.meta.iconClass)),e.push("\n      ")):(e.push("\n        "),e.push(this.Icon("task-state",this.item.meta.iconClass)),e.push("\n      ")),e.push("\n    ")):(e.push("\n      "),e.push(this.Icon(this.item.meta.iconClass)),e.push("\n    ")),e.push('\n  </div>\n  <div class="nav-tab-name u-textTruncate flex">'),e.push(n(this.item.meta.head)),e.push('</div>\n  <div class="nav-tab-close js-close" title="'),e.push(this.Ti("close")),e.push('">\n    <div class="nav-tab-close-inner">\n      '),e.push(this.Icon("diagonal-cross")),e.push("\n    </div>\n  </div>\n</a>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/widget/template"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="templates-manage">\n  <form>\n    <div class="form-group">\n      <label class="" for="template_name">'),e.push(this.T("Select Template")),e.push('</label>\n      <div id="form-template"></div>\n    </div>\n    <div class="horizontal">\n      <button type="submit" class="btn btn--action js-delete">'),e.push(this.T("Delete")),e.push('</button>\n      <button type="submit" class="btn btn--action align-right js-apply">'),e.push(this.T("Apply")),e.push('</button>\n    </div>\n  </form>\n  <hr>\n  <form>\n    <div class="form-group">\n      <label class="" for="template_name">'),e.push(this.T("Save as template")),e.push('</label>\n      <input type="text" name="name" id="template_name" class="form-control js-name" value="'),e.push(n(this.template.name)),e.push('"/>\n    </div>\n    <div class="horizontal">\n      <button type="submit" class="btn btn--action align-right js-save">'),e.push(this.T("Save")),e.push('</button>\n    </div>\n  </form>\n</div>\n\n<div class="templates-welcome">\n  <p>'),e.push(this.T("No template created yet.")),e.push("</p>\n  <p>"),e.push(this.T("With templates you can pre-fill ticket attributes.")),e.push("</p>\n  <p>"),e.push(this.T("Choose attributes and then save them as a new template.")),e.push('</p>\n  <p><a class="js-create u-clickable">'),e.push(this.T("Save new template")),e.push("</a></p>\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/widget/text_module"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="well hide">\n<!--\n  <h3>'),e.push(this.T("Text Modules")),e.push("</h3>\n  "),e.push(this.T("Search")),e.push('\n  <br>\n-->\n  <input type="text" name="" id="text-module-search" class="span2" value="'),e.push(n(this.search)),e.push('" autocomplete="off"/>\n  <a href="#" class="close">&times;</a>\n  <br>\n  <div id="form-text-module" class="max-size-scroll"></div>\n  <!--<button type="submit" class="btn" data-type="text_module_edit">'),e.push(this.T("Edit")),e.push('</button>-->\n<!--\n  <button type="submit" class="btn" data-type="text_module_delete">'),e.push(this.T("Delete")),e.push("</button>\n-->\n<!--\n  "),e.push(this.T("Preview ")),e.push('\n  <br>\n  <textarea id="text-module-preview-content" class="span2"></textarea>\n-->\n  <hr>\n  <form>\n    <label class="" for="text_module_name">'),e.push(this.T("Save as")),e.push('</label>\n    <input type="text" name="name" id="text_module_name" class="span2" value=""/>\n    <button type="submit" class="btn" data-type="save">'),e.push(this.T("Save")),e.push("</button>\n  </form>\n</div>\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/widget/ticket_stats"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){this.user&&this.user.organization&&(e.push('\n  <div class="tabs tabs--big">\n    <div class="tab js-userTab active">'),e.push(this.T("Tickets of User")),e.push(" "),e.push("("+this.user_total+")"),e.push('</div>\n    <div class="tab js-orgTab">'),e.push(this.T("Tickets of Organization")),e.push(" "),e.push("("+this.organization_total+")"),e.push("</div>\n  </div>\n")),e.push('\n\n<div class="js-user '),!this.user&&this.organization&&e.push("hide"),e.push('">\n  <div class="profile-ticketLists">\n    <div class="profile-ticketList js-user-open-tickets"></div>\n    <div class="profile-ticketList js-user-closed-tickets"></div>\n  </div>\n\n  <div class="frequency stat-widget vertical js-user-frequency"></div>\n</div>\n\n<div class="js-org '),this.user&&e.push("hide"),e.push('">\n  <div class="profile-ticketLists">\n    <div class="profile-ticketList js-org-open-tickets"></div>\n    <div class="profile-ticketList js-org-closed-tickets"></div>\n  </div>\n\n  <div class="frequency stat-widget vertical js-org-frequency"></div>\n</div>\n')}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/widget/ticket_stats_frequency"]=function(t){t||(t={});var e=[],n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,n,i,s;for(e.push('<div class="stat-title">'),e.push(this.T("Frequency")),e.push('</div>\n<div class="stat-graphic">\n  '),s=this.ticket_volume_by_year,t=0,i=s.length;t<i;t++)n=s[t],e.push('\n    <div class="stats-row">\n      <div class="stat-bars">\n        <div class="stat-bar primary" style="height: '),e.push(n.closed_in_percent),e.push('%"></div>\n        <div class="stat-bar secondary" style="height: '),e.push(n.created_in_percent),e.push('%"></div>\n      </div>\n      <div class="stat-label">'),e.push(this.T(n.text.substr(0,3))),e.push("</div>\n    </div>\n  ");e.push('\n</div>\n<div class="stat-legend">\n  <div class="stat-legendEntry primary">\n    <span class="primary stat-circle"></span>\n    <span class="stat-legend-label">'),e.push(this.T("Closed")),e.push('</span>\n  </div>\n  <div class="stat-legendEntry secondary">\n    <span class="secondary stat-circle"></span>\n    <span class="stat-legend-label">'),e.push(this.T("Created")),e.push("</span>\n  </div>\n</div>\n")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["app/views/widget/ticket_stats_list"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o;if(e.push("<label>"),e.push(this.T(this.head)),e.push(" ("),e.push(n(this.ticket_ids.length)),e.push(")</label>\n"),this.ticket_ids.length){for(e.push('\n<ol class="tasks tasks--standalone">\n  '),s=this.ticket_ids_show,t=0,i=s.length;t<i;t++)o=s[t],e.push("\n  "),r=App.Ticket.fullLocal(o),e.push('\n  <li class="task">\n    <div class="icon-holder" title="'),e.push(r.iconTitle()),e.push('">\n      '),e.push(this.Icon("task-state",r.iconClass())),e.push('\n    </div>\n    <div class="task-text">\n      <a class="name ticket-popover" data-id="'),e.push(o),e.push('" href="'),e.push(r.uiUrl()),e.push('">'),e.push(n(r.title)),e.push("</a>\n       "),e.push(this.humanTime(r.created_at,!1,"time")),e.push("\n    </div>\n  </li>\n  ");e.push("\n</ol>\n")}else e.push('\n<div class="profile-ticketsPlaceholder vertical centered">\n  <div class="'),e.push(this.iconClass),e.push('"></div>\n  '),e.push(this.T("none")),e.push("\n</div>\n");e.push("\n"),this.ticket_ids.length>this.ticket_ids_show.length&&(e.push('\n  <a href="#" class="js-showAll">'),e.push(this.T("Show all...")),e.push("</a>\n")),e.push("\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}.call(this);(function(){this.JST||(this.JST={}),this.JST["app/views/widget/user"]=function(t){t||(t={});var e=[],n=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?s(t):""},i=t.safe,s=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,i,s,r,o,a,l,c,u,p,h,d,f;for(e.push('<div class="sidebar-block">\n  '),e.push(this.user.avatar("50","","userInfo-avatar")),e.push('\n  <h3 title="'),e.push(this.Ti("Name")),e.push('">'),e.push(n(this.user.displayName())),e.push("</h3>\n</div>\n"),p=this.userData,i=0,a=p.length;i<a;i++)f=p[i],e.push("\n  "),(this.user[f.name]||"note"===f.name)&&(e.push('\n    <div class="sidebar-block">\n    <label>'),e.push(this.T(f.display)),e.push("</label>\n    "),"richtext"!==f.tag?(e.push("\n      "),f.link?(e.push('<a href="'),e.push(f.link),e.push(n(this.user[f.name])),e.push('" target="_blank">'),e.push(this.P(this.user,f.name)),e.push("</a>\n    ")):(e.push("\n      "),e.push(this.P(this.user,f.name)),e.push("\n    ")),e.push("\n    ")):(e.push('\n      <div contenteditable="true" data-name="'),e.push(n(f.name)),e.push('" data-type="update" data-placeholder="'),e.push(this.Ti("Add a Note")),e.push('">'),e.push(this.user[f.name]),e.push("</div>\n    ")),e.push("\n    </div>\n  ")),e.push("\n");if(e.push("\n"),!_.isEmpty(this.user.accounts)){
e.push('\n  <div class="sidebar-block">\n    <label>'),e.push(this.T("Linked Accounts")),e.push("</label>\n  ");for(t in this.user.accounts)e.push('\n    <a href="'),e.push(n(this.user.accounts[t].link)),e.push('" target="_blank">'),e.push(n(t)),e.push("</a>\n  ");e.push("\n  </div>\n")}if(e.push("\n"),!_.isEmpty(this.user.links)){for(e.push("\n  "),h=this.user.links,r=0,l=h.length;r<l;r++){for(u=h[r],e.push('\n  <div class="sidebar-block">\n    <label>'),e.push(this.T(u.title)),e.push("</label>\n"),d=u.items,o=0,c=d.length;o<c;o++)s=d[o],e.push("\n  "),s.url?(e.push('\n    <a href="'),e.push(n(s.url)),e.push('" title="'),e.push(this.Ti(s.title)),e.push('" style="'),e.push(n(s.style)),e.push('" data-type="'),e.push(n(s.data)),e.push('" class="'),e.push(n(s["class"])),e.push('" '),u.new_window&&e.push('target="_blank"'),e.push(">\n  ")):(e.push('\n    <span title="'),e.push(this.Ti(s.title)),e.push('" style="'),e.push(n(s.style)),e.push('" data-type="'),e.push(n(s.data)),e.push('" class="'),e.push(n(s["class"])),e.push('">\n  ')),e.push("\n    "),e.push(this.T(s.name)),e.push(" "),void 0!==s.count&&(e.push('<span class="count">('),e.push(n(s.count)),e.push(")</span>")),e.push("\n  "),s.url?e.push("\n    </a>\n  "):e.push("\n    </span>\n  "),e.push("\n  </div>\n");e.push("\n  ")}e.push("\n")}e.push("\n")}).call(this)}.call(t),t.safe=i,t.escape=s,e.join("")}}).call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};App._CollectionSingletonBase=function(){function e(){this.clear=t(this.clear,this),this.callback=t(this.callback,this),this.trigger=t(this.trigger,this),this.fetch=t(this.fetch,this),this.unbindById=t(this.unbindById,this),this.unbind=t(this.unbind,this),this.bind=t(this.bind,this),this.set=t(this.set,this),this.get=t(this.get,this);var e;this.callbacks={},this.counter=0,this.key="collection-"+this.event,e=App.SessionStorage.get(this.key),e&&this.set(e),App.Event.bind(this.event,function(t){return function(e){return t.set(e),t.callback(e)}}(this)),App.Event.bind("auth:logout",function(t){return function(e){return t.clear(e)}}(this))}return e.prototype.event="to_be_defined",e.prototype.restEndpoint="/to_be_defined",e.prototype.get=function(){return this.collectionData},e.prototype.set=function(t){return App.SessionStorage.set("collection-"+this.event,t),this.collectionData=t},e.prototype.bind=function(t,e,n){var i;if(null==e&&(e=!0),null==n&&(n=!1),this.counter+=1,i=this.counter,e)if(void 0===this.collectionData)this.fetch();else if(t(this.collectionData),n)return;return this.callbacks[i]={callback:t,one:n},i},e.prototype.unbind=function(t){var e,n,i,s;i=this.callbacks,s=[];for(n in i)e=i[n],t===e.callback?s.push(delete this.callbacks[n]):s.push(void 0);return s},e.prototype.unbindById=function(t){return delete this.callbacks[t]},e.prototype.fetch=function(){if(!this.fetchActive)return this.fetchActive=!0,App.Ajax.request({id:"collection-"+this.event,type:"GET",url:App.Config.get("api_path")+this.restEndpoint,processData:!0,success:function(t){return function(e){return t.fetchActive=!1,t.set(e),t.callback(e)}}(this),error:function(t){return function(){return t.fetchActive=!1}}(this)})},e.prototype.trigger=function(){return this.callback(this.get())},e.prototype.callback=function(t){var e,n,i,s,r;s=this.callbacks,r=[];for(i in s)e=s[i],n=function(n){return function(){if(e.callback(t),e.one)return delete n.callbacks[i]}}(this),App.QueueManager.add(this.key,n),r.push(App.QueueManager.run(this.key));return r},e.prototype.clear=function(){return this.collectionData=void 0},e}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.ObjectOrganizationAutocompletion=function(n){function i(){this.hideOrganizationMembers=t(this.hideOrganizationMembers,this),this.showOrganizationMembers=t(this.showOrganizationMembers,this),this.emptyResultList=t(this.emptyResultList,this),this.searchObject=t(this.searchObject,this),this.onKeyUp=t(this.onKeyUp,this),this.build=t(this.build,this),this.buildObjectNew=t(this.buildObjectNew,this),this.buildObjectItem=t(this.buildObjectItem,this),this.buildOrganizationMembers=t(this.buildOrganizationMembers,this),this.navigateByKeyboard=t(this.navigateByKeyboard,this),this.removeToken=t(this.removeToken,this),this.removeThisToken=t(this.removeThisToken,this),this.createToken=t(this.createToken,this),this.executeCallback=t(this.executeCallback,this),this.selectObject=t(this.selectObject,this),this.onObjectClick=t(this.onObjectClick,this),this.resetObjectSelection=t(this.resetObjectSelection,this),this.onBlur=t(this.onBlur,this),this.focusInput=t(this.focusInput,this),this.onFocus=t(this.onFocus,this),this.close=t(this.close,this),this.open=t(this.open,this),this.element=t(this.element,this),i.__super__.constructor.apply(this,arguments),this.lazySearch=_.debounce(this.searchObject,200),this.key=Math.floor(999999*Math.random()).toString(),this.attribute.source||(this.attribute.source=this.apiPath+"/search/user-organization"),this.build(),this.attribute.value&&this.callback&&this.callback(this.attribute.value)}return e(i,n),i.prototype.className="dropdown js-recipientDropdown",i.prototype.events={"hide.bs.dropdown .js-recipientDropdown":"hideOrganizationMembers","click .js-organization":"showOrganizationMembers","click .js-back":"hideOrganizationMembers","click .js-object":"onObjectClick","click .js-objectNew":"newObject","focus .js-objectSelect":"onFocus","click .js-objectSelect":"stopPropagation","blur .js-objectSelect":"onBlur","click .form-control":"focusInput",click:"stopPropagation","change .js-objectId":"executeCallback","click .js-remove":"removeThisToken"},i.prototype.elements={".recipientList":"recipientList",".js-objectSelect":"objectSelect",".js-objectId":"objectId",".form-control":"formControl"},i.prototype.templateObjectItem="generic/object_search/item_object",i.prototype.templateObjectNew="generic/object_search/new_object",i.prototype.templateOrganizationItem="generic/object_search/item_organization",i.prototype.templateOrganizationItemMembers="generic/object_search/item_organization_members",i.prototype.objectSingle="User",i.prototype.objectIcon="user",i.prototype.inactiveObjectIcon="inactive-user",i.prototype.objectSingels="People",i.prototype.objectCreate="Create new object",i.prototype.referenceAttribute="member_ids",i.prototype.element=function(){return this.el},i.prototype.release=function(){return $(window).off("click.ObjectOrganizationAutocompletion")},i.prototype.open=function(){if(!this.el.hasClass("open"))return this.el.addClass("open"),$(window).on("click.ObjectOrganizationAutocompletion",this.close),$(window).on("keydown.ObjectOrganizationAutocompletion",this.navigateByKeyboard)},i.prototype.close=function(){return $(window).off("keydown.ObjectOrganizationAutocompletion"),this.el.removeClass("open"),$(window).off("click.ObjectOrganizationAutocompletion")},i.prototype.onFocus=function(){return this.formControl.addClass("focus"),this.open()},i.prototype.focusInput=function(){if(!this.formControl.hasClass("focus"))return this.objectSelect.focus()},i.prototype.onBlur=function(){var t,e;return e=this.objectSelect.val(),_.isEmpty(e)?void this.objectId.val(""):(!0===this.attribute.guess&&(t=this.objectId.val(),(_.isEmpty(t)||t.match(/^guess:/))&&(_.isEmpty(e)||this.objectId.val("guess:"+e))),this.formControl.removeClass("focus"))},i.prototype.resetObjectSelection=function(){return this.objectId.val("").trigger("change")},i.prototype.onObjectClick=function(t){var e;return e=$(t.currentTarget).data("object-id"),this.selectObject(e),this.close()},i.prototype.selectObject=function(t){return this.attribute.multiple&&this.objectId.val()&&(t=_.chain(this.objectId.val().split(",")).push(t).join(",").value()),this.objectSelect.val(""),this.objectId.val(t).trigger("change")},i.prototype.executeCallback=function(){var t,e,n;if(n=this.objectId.val().split(",").pop(),n&&App[this.objectSingle].exists(n)&&(e=App[this.objectSingle].find(n),t=e.displayName(),this.attribute.multiple?this.createToken(t,n):(e.email&&(t.match(/\@|,|;|\^|\+|#|\xa7|\$|%|&|\/|\(|\)|=|\?|!|\*|\[|\]/)&&(t='"'+t+'"'),t+=" <"+e.email+">"),this.objectSelect.val(t))),this.callback)return this.callback(n)},i.prototype.createToken=function(t,e){return this.objectSelect.before(App.view("generic/token")({name:t,value:e}))},i.prototype.removeThisToken=function(t){return this.removeToken($(t.currentTarget).parents(".token"))},i.prototype.removeToken=function(t){var e,n,i;switch(t){case"last":if(i=this.$(".token").last(),!i.size())return;break;default:i=t}return n=this.$(".token").index(i),e=this.objectId.val().split(","),e.splice(n,1),this.objectId.val(e.join(",")),i.remove()},i.prototype.navigateByKeyboard=function(t){var e,n,i;switch(t.keyCode){case 27:return this.recipientList.hasClass("is-shown")?this.objectSelect.val("").trigger("change"):void this.hideOrganizationMembers();case 8:if(""===this.objectSelect.val())return this.removeToken("last");break;case 9:return this.close();case 37:case 39:break;case 38:if(t.preventDefault(),this.recipientList.hasClass("is-shown"))return void(0===this.recipientList.find("li.is-active").length?this.recipientList.find("li").last().addClass("is-active"):0!==this.recipientList.find("li.is-active").prev().length&&this.recipientList.find("li.is-active").removeClass("is-active").prev().addClass("is-active"));n=this.$(".recipientList-organizationMembers").not(".hide"),0===n.not(".hide").find("li.is-active").length?n.not(".hide").find("li").last().addClass("is-active"):0!==n.not(".hide").find("li.is-active").prev().length&&n.not(".hide").find("li.is-active").removeClass("is-active").prev().addClass("is-active");break;case 40:if(t.preventDefault(),this.recipientList.hasClass("is-shown"))return void(0===this.recipientList.find("li.is-active").length?this.recipientList.find("li").first().addClass("is-active"):0!==this.recipientList.find("li.is-active").next().length&&this.recipientList.find("li.is-active").removeClass("is-active").next().addClass("is-active"));n=this.$(".recipientList-organizationMembers").not(".hide"),0===n.not(".hide").find("li.is-active").length?n.find("li").first().addClass("is-active"):0!==n.not(".hide").find("li.is-active").next().length&&n.not(".hide").find("li.is-active").removeClass("is-active").next().addClass("is-active");break;case 13:if(t.preventDefault(),t.stopPropagation(),!this.recipientList.hasClass("is-shown")){if(i=this.$(".recipientList-organizationMembers").not(".hide"),i.find(".js-back.is-active").get(0))return void this.hideOrganizationMembers();if(!(e=i.find("li.is-active").data("object-id")))return;return this.selectObject(e),void(this.attribute.multiple||this.close())}if(e=this.recipientList.find("li.is-active").data("object-id"))return void("new"===e?this.newObject():(this.selectObject(e),this.attribute.multiple||this.close()));if(!this.recipientList.find("li.is-active").data("organization-id"))return;return this.showOrganizationMembers(void 0,this.recipientList.find("li.is-active"))}},i.prototype.buildOrganizationItem=function(t){var e;return e=0,t[this.referenceAttribute]&&(e=t[this.referenceAttribute].length),App.view(this.templateOrganizationItem)({organization:t,objectSingels:this.objectSingels,objectCount:e})},i.prototype.buildOrganizationMembers=function(t){var e,n,i,s,r,o,a;if(r=$(App.view(this.templateOrganizationItemMembers)({organization:t})),t[this.referenceAttribute]){for(o=t[this.referenceAttribute],a=[],e=0,n=o.length;e<n;e++)s=o[e],i=App[this.objectSingle].fullLocal(s),a.push(r.append(this.buildObjectItem(i)));return a}},i.prototype.buildObjectItem=function(t){var e;return e=this.objectIcon,!1===t.active&&this.inactiveObjectIcon&&(e=this.inactiveObjectIcon),App.view(this.templateObjectItem)({object:t,icon:e})},i.prototype.buildObjectNew=function(){return App.view(this.templateObjectNew)({objectCreate:this.objectCreate})},i.prototype.build=function(){var t,e,n,i,s,r,o,a;if(o="",n="",a="",this.attribute.multiple&&this.attribute.value)for("object"!=typeof this.attribute.value&&(this.attribute.value=[this.attribute.value]),a=this.attribute.value.join(","),r=this.attribute.value,t=0,e=r.length;t<e;t++)s=r[t],App[this.objectSingle].exists(s)?o+=App.view("generic/token")({name:App[this.objectSingle].find(s).displayName(),value:s}):this.log("objectId doesn't exist",s);else(a=this.attribute.value)&&(App[this.objectSingle].exists(a)?(i=App[this.objectSingle].find(a),n=i.displayName(),i.email&&(n+=" <"+i.email+">")):this.params&&this.params[this.attribute.name+"_completion"]?n=this.params[this.attribute.name+"_completion"]:this.log("objectId doesn't exist",a));return this.html(App.view("generic/object_search/input")({attribute:this.attribute,value:a,tokens:o,name:n})),this.attribute.disableCreateObject||this.recipientList.append(this.buildObjectNew()),this.searchTerm="",this.objectSelect.on("keyup",this.onKeyUp)},i.prototype.onKeyUp=function(t){var e;if(e=$(t.target).val().trim(),this.searchTerm!==e)return this.searchTerm=e,this.hideOrganizationMembers(),_.isEmpty(e)?(this.emptyResultList(),this.attribute.disableCreateObject||this.recipientList.append(this.buildObjectNew()),void this.resetObjectSelection()):e&&(!this.attribute.minLengt||this.attribute.minLengt<=e.length)?this.lazySearch(e):void 0},i.prototype.searchObject=function(t){return this.ajax({id:"searchObject"+this.key,type:"GET",url:this.attribute.source,data:{query:t},processData:!0,success:function(t){return function(e){var n,i,s,r,o,a;for(t.emptyResultList(),App.Collection.loadAssets(e.assets),a=e.result,n=0,s=a.length;n<s;n++)i=a[n],"Organization"===i.type&&(o=App.Organization.fullLocal(i.id),t.recipientList.append(t.buildOrganizationItem(o)),o[t.referenceAttribute]&&t.$(".dropdown-menu").append(t.buildOrganizationMembers(o))),i.type===t.objectSingle&&(r=App[t.objectSingle].fullLocal(i.id),t.recipientList.append(t.buildObjectItem(r)));return t.attribute.disableCreateObject||t.recipientList.append(t.buildObjectNew()),t.recipientList.find(".js-object").first().addClass("is-active")}}(this)})},i.prototype.emptyResultList=function(){return this.recipientList.empty(),this.$(".recipientList-organizationMembers").remove()},i.prototype.showOrganizationMembers=function(t,e){var n;if(t&&(t.stopPropagation(),e=$(t.currentTarget)),n=e.data("organization-id"),this.organizationList=this.$("[organization-id="+n+"]"),this.organizationList.get(0))return this.recipientList.removeClass("is-shown"),this.$(".recipientList-organizationMembers").addClass("is-shown"),$.Velocity.hook(this.organizationList,"translateX","100%"),this.organizationList.removeClass("hide"),this.organizationList.velocity({properties:{translateX:0},options:{duration:240}}),this.recipientList.velocity({properties:{translateX:"-100%"},options:{duration:240,complete:function(t){return function(){return t.recipientList.height(t.organizationList.height())}}(this)}})},i.prototype.hideOrganizationMembers=function(t){if(t&&t.stopPropagation(),this.recipientList.addClass("is-shown"),this.$(".recipientList-organizationMembers").removeClass("is-shown"),this.organizationList)return this.recipientList.velocity({properties:{translateX:0},options:{duration:240}}),this.recipientList.height(""),this.organizationList.velocity({properties:{translateX:"100%"},options:{duration:240,complete:function(t){return function(){return t.organizationList.addClass("hide")}}(this)}})},i.prototype.newObject=function(t){if(t)return t.preventDefault()},i}(App.Controller)}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};App.Ajax=function(){function e(){}var n;return n=void 0,e.request=function(e){return void 0===n&&null==n&&(n=new t),n.request(e)},e.abort=function(e){return void 0===n&&null==n&&(n=new t),n.abort(e)},e.abortAll=function(){return void 0===n&&null==n&&(n=new t),n.abortAll()},e.queue=function(){return void 0===n&&null==n&&(n=new t),n.queue()},e.current=function(){return void 0===n&&null==n&&(n=new t),n.current()},e.token=function(){return void 0===n&&null==n&&(n=new t),n.token()},e}(),t=function(){function t(t){this.args=t,this._hide_spinner=e(this._hide_spinner,this),this._show_spinner=e(this._show_spinner,this),this.token=e(this.token,this),this.current=e(this.current,this),this.queue=e(this.queue,this),this.runNextInQueue=e(this.runNextInQueue,this),this.abortAll=e(this.abortAll,this),this.abort=e(this.abort,this),this.removeCurrentRequest=e(this.removeCurrentRequest,this),this.addCurrentRequest=e(this.addCurrentRequest,this),this.runNextInQueue(),$(document).bind("ajaxSend",function(t){return function(){return t._show_spinner()}}(this)).bind("ajaxComplete",function(t){return function(e,n){var i;if(t._hide_spinner(),i=n.getResponseHeader("CSRF-TOKEN"))return t.currentToken=i,t.defaults.headers["X-CSRF-Token"]=i,Spine.Ajax.defaults.headers["X-CSRF-Token"]=i}}(this)),$(document).bind("ajaxError",function(t,e){var n,i;if(i=e.status,n=e.responseText,i||n||(n="General communication error, maybe internet is not available!"),0!==i&&200!==i&&401!==i&&404!==i&&422!==i&&502!==i)return new App.ControllerModal({head:"StatusCode: "+i,contentInline:"<pre>"+App.Utils.htmlEscape(n)+"</pre>",buttonClose:!0,buttonSubmit:!1})})}return t.prototype.defaults={contentType:"application/json",dataType:"json",processData:!1,headers:{"X-Requested-With":"XMLHttpRequest"},cache:!1,async:!0},t.prototype.currentToken=null,t.prototype.currentRequest={},t.prototype.queueList=[],t.prototype.queueRunning=!1,t.prototype.count=0,t.prototype.request=function(t){var e;return e=$.extend({},this.defaults,t),e.id?(this.abort(e.id),this.addCurrentRequest(e.id,e),e.id):(e.id="rand-"+(new Date).getTime()+"-"+Math.floor(99999*Math.random()),e.queue?(this.queueList.push(e),this.queueRunning||this.runNextInQueue()):this.addCurrentRequest(e.id,e),e.id)},t.prototype.addCurrentRequest=function(t,e,n){if(e.complete=function(e){return function(){if(n&&(e.queueRunning=!1),e.removeCurrentRequest(t),n)return e.runNextInQueue()}}(this),this.currentRequest[t]=$.ajax(e),!0!==e.async)return this.removeCurrentRequest(t)},t.prototype.removeCurrentRequest=function(t){return this.currentRequest[t]=void 0,delete this.currentRequest[t]},t.prototype.abort=function(t){return this.currentRequest[t]&&(this.currentRequest[t].abort(),this.currentRequest[t]=void 0,delete this.currentRequest[t]),this.queueList=_.filter(this.queueList,function(e){if(e.id!==t)return e})},t.prototype.abortAll=function(){var t,e,n;t=[],n=this.currentRequest;for(e in n)n[e],this.abort(e),t.push(e);return t},t.prototype.runNextInQueue=function(){var t;if(this.queueList&&this.queueList[0])return this.queueRunning=!0,t=this.queueList.shift(),this.addCurrentRequest(t.id,t,!0)},t.prototype.queue=function(){return this.queueList},t.prototype.current=function(){return this.currentRequest},t.prototype.token=function(){return this.currentToken},t.prototype._show_spinner=function(){return this.count++,$(".spinner").show()},t.prototype._hide_spinner=function(){return this.count--,0===this.count?$(".spinner").hide():"ajax"===App.WebSocket.channel()&&1===this.count?$(".spinner").hide():void 0},t}()}.call(this),function(){App.Audio=function(){function t(){}return t.play=function(t,e){var n,i;if(null==e&&(e=.1),window.Audio&&(n=new window.Audio,n.canPlayType&&("maybe"===(i=n.canPlayType("audio/mp3"))||"probably"===i)))return $(n).prop("src",t),n.load(),n.preload="auto",n.volume=e,n.play()},t}()}.call(this),function(){App.Auth=function(){function t(){}return t.login=function(t){return App.Log.debug("Auth","login",t),t.data.fingerprint=App.Browser.fingerprint(),App.Ajax.request({id:"login",type:"POST",url:App.Config.get("api_path")+"/signin",data:JSON.stringify(t.data),success:function(e){return function(n,i,s){return e._login(n),t.success(n,i,s)}}(this),error:function(e){return function(n,i,s){return e._loginError(),t.error(n,i,s)}}(this)})},t.loginCheck=function(t){var e;return e={fingerprint:App.Browser.fingerprint()},App.Log.debug("Auth","loginCheck"),App.Ajax.request({id:"login_check",async:!1,type:"POST",url:App.Config.get("api_path")+"/signshow",data:JSON.stringify(e),success:function(e){return function(n){if(e._login(n,"check"),t)return t()}}(this),error:function(t){return function(){return t._loginError()}}(this)})},t.logout=function(){var t;return App.Log.debug("Auth","logout"),App.Ajax.abortAll(),t=function(t){return function(){return Spine.Ajax.clearQueue(),App.Ajax.request({id:"logout",type:"DELETE",url:App.Config.get("api_path")+"/signout",success:function(){return t._logout()},error:function(){return t._loginError()}})}}(this),Spine.Ajax.queue(t)},t._login=function(t,e){var n,i,s,r,o,a,l;if(App.Log.debug("Auth","_login:success",t),t.error){r=t.config;for(n in r)l=r[n],App.Config.set(n,l);return t.collections&&App.Collection.resetCollections(t.collections),App.Session.init(),this._updateModelAttributes(t.models),App.i18n.set(App.i18n.detectBrowserLocale()),App.Event.trigger("auth"),App.Event.trigger("auth:logout"),App.Event.trigger("ui:rerender"),App.TaskManager.tasksInitial(),!1}"check"!==e&&App.Event.trigger("clearStore"),this._updateModelAttributes(t.models),o=t.config;for(n in o)l=o[n],App.Config.set(n,l);return t.collections&&App.Collection.resetCollections(t.collections),t.assets&&App.Collection.loadAssets(t.assets),a=App.User.fullLocal(t.session.id),App.Session.set(a),App.Event.trigger("auth",t.session),s=App.Session.get("preferences"),s&&s.locale&&(i=s.locale),i||(i=App.i18n.detectBrowserLocale()),App.i18n.set(i),App.Event.trigger("auth:login",t.session),App.Event.trigger("ui:rerender"),App.TaskManager.tasksInitial()},t._updateModelAttributes=function(t){var e,n,i;if(!_.isEmpty(t)){i=[];for(n in t)e=t[n],App[n]&&_.isFunction(App[n].updateAttributes)?i.push(App[n].updateAttributes(e)):i.push(void 0);return i}},t._logout=function(t){var e,n;null==t&&(t=!0),App.Log.debug("Auth","_logout"),App.TaskManager.reset(),App.Session.init(),App.Ajax.abortAll();for(e in App)n=App[e],_.isFunction(n.clearInMemory)&&n.clearInMemory();return App.Event.trigger("auth"),App.Event.trigger("auth:logout"),t&&(window.location.href="#login",App.Event.trigger("ui:rerender")),App.Event.trigger("clearStore")},t._loginError=function(){return App.Log.debug("Auth","_loginError:error"),App.Session.init(),App.Event.trigger("auth"),App.Event.trigger("auth:logout"),App.Event.trigger("ui:rerender"),App.Event.trigger("clearStore")},t}()}.call(this),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.Browser=function(){function e(){}return e.detection=function(){var t;return t=new UAParser,{browser:t.getBrowser(),device:t.getDevice(),os:t.getOS()}},e.check=function(){var e,n;return e=this.detection(),n={Chrome:37,Firefox:36,Explorer:10,Safari:6,Opera:22},!(e.browser&&n[e.browser.name]&&e.browser.major<n[e.browser.name])||(new t({data:e,version:n[e.browser.name]}),App.Log.error("Browser","Browser not supported"),!1)},e.fingerprint=function(){var t,e,n,i,s,r;return i=window.localStorage,i&&(e=i.getItem("fingerprint")),e||(t=this.detection(),s=window.screen.availWidth+"x"+window.screen.availHeight+"/"+window.screen.pixelDepth,r=(new Date).toString().match(/\s\(.+?\)$/),n=function(t){return t.split("").reduce(function(t,e){return(t=(t<<5)-t+e.charCodeAt(0))&t},0)},e=n(""+t.browser.name+t.browser.major+t.os+s+r),i&&i.setItem("fingerprint",e),e)},e.magicKey=function(){var t,e;return t=this.detection(),e="ctrl",t&&t.os&&t.os.name.toString().match(/mac/i)&&(e="cmd"),e},e.hotkeys=function(){var t,e;return t=this.detection(),e="ctrl+shift",t&&t.os&&t.os.name.toString().match(/mac/i)&&(e="alt+ctrl"),e},e}(),t=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.buttonClose=!1,n.prototype.buttonCancel=!1,n.prototype.buttonSubmit=!1,n.prototype.backdrop=!1,n.prototype.keyboard=!1,n.prototype.head="Browser too old!",n.prototype.content=function(){return"Your Browser is not supported ("+this.data.browser.name+" "+this.data.browser.major+" on "+this.data.os.name+"). Please use a newer one (e. g. "+this.data.browser.name+" "+this.version+" or higher)."},n}(App.ControllerModal)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.BusinessHours=function(n){function i(){this.validate=t(this.validate,this),this.toggleDay=t(this.toggleDay,this),this.removeTime=t(this.removeTime,this),this.addTime=t(this.addTime,this),this.onTimeChange=t(this.onTimeChange,this),this.updateMaxTimeframes=t(this.updateMaxTimeframes,this),this.render=t(this.render,this);var e,n,s;i.__super__.constructor.apply(this,arguments),this.days={mon:App.i18n.translateInline("Monday"),tue:App.i18n.translateInline("Tuesday"),wed:App.i18n.translateInline("Wednesday"),thu:App.i18n.translateInline("Thursday"),fri:App.i18n.translateInline("Friday"),sat:App.i18n.translateInline("Saturday"),sun:App.i18n.translateInline("Sunday")};for(e in this.days)this.hours[e]||(this.hours[e]={});s=this.hours;for(e in s)n=s[e],n.active||(n.active=!1),n.timeframes||(n.timeframes=[])}return e(i,n),i.prototype.className="settings-list settings-list--fixed settings-list--stretch settings-list--toggleColumn",i.prototype.tag="table",i.prototype.events={"click .js-toggle-day":"toggleDay","click .js-add-time":"addTime","click .js-remove-time":"removeTime"},i.prototype.render=function(){var t;return this.updateMaxTimeframes(),t=App.view("generic/business_hours")({attribute:this.attribute,days:this.days,hours:this.options.hours,maxTimeframes:this.maxTimeframes}),this.html(t),this.$(".js-time").timepicker({showMeridian:!1}).on("changeTime.timepicker",this.onTimeChange),this.el.toggleClass("is-invalid",!this.validate())},i.prototype.updateMaxTimeframes=function(){var t;return t=_.max(this.hours,function(t){return t.timeframes.length}),this.maxTimeframes=t.timeframes.length},i.prototype.onTimeChange=function(t){var e,n,i,s;return i=this.$(t.currentTarget),e=i.attr("data-day"),s=i.attr("data-slot"),n=i.attr("data-i"),this.options.hours[e].timeframes[s][n]=t.time.hoursAndMinutes,this.el.toggleClass("is-invalid",!this.validate())},i.prototype.addTime=function(t){var e;return e=this.$(t.currentTarget).attr("data-day"),this.options.hours[e].timeframes.push(["13:00","17:00"]),this.render()},i.prototype.removeTime=function(t){var e;return e=this.$(t.currentTarget).attr("data-day"),this.options.hours[e].timeframes.pop(),this.render()},i.prototype.toggleDay=function(t){var e,n;return e=this.$(t.currentTarget),n=e.attr("data-target"),this.options.hours[n].active=e.prop("checked"),this.$("[data-day="+n+"]").toggleClass("is-active",e.prop("checked")),this.el.toggleClass("is-invalid",!this.validate())},i.prototype.validate=function(){var t,e,n,i,s,r;i=this.options.hours;for(t in i){if(e=i[t],!e.active)break;if("00:00"===e.timeframes[0][0]&&"00:00"===e.timeframes[e.timeframes.length-1][1])return!0;for(r=n=0,s=e.timeframes.length-1;0<=s?n<=s:n>=s;r=0<=s?++n:--n){if(!this.earlier(e.timeframes[r][0],e.timeframes[r][1]))return!1;if(r>0&&!this.later(e.timeframes[r][0],e.timeframes[r-1][1]))return!1}}return!0},i.prototype.later=function(t,e){var n,i,s,r,o,a;return o=t.split(":").map(function(t){return parseInt(t,10)}),n=o[0],s=o[1],a=e.split(":").map(function(t){return parseInt(t,10)}),i=a[0],r=a[1],n>i||n===i&&s>r},i.prototype.earlier=function(t,e){var n,i,s,r,o,a;return o=t.split(":").map(function(t){return parseInt(t,10)}),n=o[0],s=o[1],a=e.split(":").map(function(t){return parseInt(t,10)}),i=a[0],r=a[1],n<i||n===i&&s<r},i}(Spine.Controller)}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};App.ClipBoard=function(){function e(){}var n;return n=void 0,e.bind=function(e){return void 0===n&&null==n&&(n=new t),n.bind(e)},e.getSelected=function(e){return void 0===n&&null==n&&(n=new t),n.getSelected(e)},e.getSelectedLast=function(e){return void 0===n&&null==n&&(n=new t),n.getSelectedLast(e)},e.getPosition=function(e){return void 0===n&&null==n&&(n=new t),n.getPosition(e)},e.setPosition=function(e,i){return void 0===n&&null==n&&(n=new t),n.setPosition(e,i)},e.keycode=function(e){return void 0===n&&null==n&&(n=new t),n.keycode(e)},e}(),t=function(){function t(){this._updateSelection=e(this._updateSelection,this),this.selection={html:"",text:""},this.selectionLast={html:"",text:""}}return t.prototype.bind=function(t){return $(t).bind("mouseup",function(t){return function(){return t._updateSelection()}}(this)),$(t).bind("keyup",function(t){return function(e){if(91===e.keyCode&&t._updateSelection(),37===e.keyCode||38===e.keyCode||39===e.keyCode||40===e.keyCode)return t._updateSelection()}}(this))},t.prototype._updateSelection=function(){var t,e,n,i,s;for(i=["html","text"],s=[],t=0,n=i.length;t<n;t++)e=i[t],this.selection[e]=this._getSelected(e),this.selection[e]?s.push(this.selectionLast[e]=this.selection[e]):s.push(void 0);return s},t.prototype._getSelected=function(t){var e,n,i,s,r,o,a;if(a="",n="",window.getSelection?(o=window.getSelection(),a=o.toString()):document.getSelection?(o=document.getSelection(),a=o.toString()):document.selection&&(o=document.selection.createRange(),a=o.text),"text"===t)return a?$.trim(a.toString()):"";if(o&&o.rangeCount){for(e=document.createElement("div"),i=s=1,r=o.rangeCount;1<=r?s<=r:s>=r;i=1<=r?++s:--s)e.appendChild(o.getRangeAt(i-1).cloneContents());n=e.innerHTML}return n},t.prototype.getSelected=function(t){return this.selection[t]},t.prototype.getSelectedLast=function(t){return this.selectionLast[t]},t.prototype.getPosition=function(t){var e,n;return n=0,t=document.getElementById(t),document.selection?(t.focus(),e=document.selection.createRange(),e.moveStart("character",-t.value.length),n=e.text.length):(t.selectionStart||"0"===t.selectionStart)&&(n=t.selectionStart),n},t.prototype.setPosition=function(t,e){var n;return t=document.getElementById(t),t.setSelectionRange?(t.focus(),t.setSelectionRange(e,e)):t.createTextRange?(n=t.createTextRange(),n.collapse(!0),n.moveEnd("character",e),n.moveStart("character",e),n.select()):void 0},t.prototype.keycode=function(t){var e,n,i;n=this.keycodesTable();for(e in n)if(i=n[e],i.toString()===t.toString())return e},t.prototype.keycodesTable=function(){return{backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,space:32,pause_break:"19",caps_lock:"20",escape:"27",page_up:"33","page down":"34",end:"35",home:"36",left_arrow:"37",up_arrow:"38",right_arrow:"39",down_arrow:"40",insert:"45","delete":"46",0:"48",1:"49",2:"50",3:"51",4:"52",5:"53",6:"54",7:"55",8:"56",9:"57",a:"65",b:"66",c:"67",d:"68",e:"69",f:"70",g:"71",h:"72",i:"73",j:"74",k:"75",l:"76",m:"77",n:"78",o:"79",p:"80",q:"81",r:"82",s:"83",t:"84",u:"85",v:"86",w:"87",x:"88",y:"89",z:"90","left_window key":"91","right_window key":"92",select_key:"93","numpad 0":"96","numpad 1":"97","numpad 2":"98","numpad 3":"99","numpad 4":"100","numpad 5":"101","numpad 6":"102","numpad 7":"103","numpad 8":"104","numpad 9":"105",multiply:"106",add:"107",subtract:"109","decimal point":"110",divide:"111",f1:"112",f2:"113",f3:"114",f4:"115",f5:"116",f6:"117",f7:"118",f8:"119",f9:"120",f10:"121",f11:"122",f12:"123",num_lock:"144",scroll_lock:"145",semi_colon:"186",equal_sign:"187",comma:"188",dash:"189",period:"190",forward_slash:"191",grave_accent:"192",open_bracket:"219",backslash:"220",closebracket:"221",single_quote:"222"}},t}()}.call(this),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.Collection=function(){function e(){}var n;return n=void 0,e.init=function(){return n=new t},e.load=function(e){return void 0===n&&null==n&&(n=new t),n.load(e)},e.loadAssets=function(e,i){return void 0===n&&null==n&&(n=new t),n.loadAssets(e,i)},e.reset=function(e){return void 0===n&&null==n&&(n=new t),n.reset(e)},e.resetCollections=function(e){return void 0===n&&null==n&&(n=new t),n.resetCollections(e)},e}(),t=function(t){function n(t){this.args=t,App.Event.bind("loadAssets",function(t){return function(e){return e?t.loadAssets(e):void t.log("error","loadAssets:trigger, got no data, cant load assets")}}(this)),App.Event.bind("resetCollection",function(t){return function(e){
return e?t.resetCollections(e):void t.log("error","resetCollection:trigger, got no data, cant for collections")}}(this))}return e(n,t),n.include(App.LogInclude),n.prototype.resetCollections=function(t){var e,n,i;n=[];for(i in t)e=t[i],this.log("debug","resetCollection:trigger",i,e),n.push(this.reset({type:i,data:e}));return n},n.prototype.reset=function(t){var e;return e=App[t.type],e?e.refresh(t.data,{clear:!0}):void this.log("error","reset","no such collection "+t.type,t)},n.prototype.loadAssets=function(t,e){var n,i,s,r,o;if(null==e&&(e={}),!_.isEmpty(t)){s={};for(o in t)n=t[o],e.targetModel&&e.targetModel===o||(i=this.load({type:o,data:n,later:!0}),_.isEmpty(i)||(s[o]=i));for(o in s)n=s[o],App[o].refresh(n);if(e.targetModel){r=[];for(o in t)n=t[o],e.targetModel===o?r.push(this.load({type:o,data:n})):r.push(void 0);return r}}},n.prototype.load=function(t){var e,n,i,s,r,o,a;if(!_.isEmpty(t.data)){if(!(e=App[t.type]))return void this.log("error","reset","no such collection "+t.type,t);if(_.isArray(t.data))return this.log("debug","refresh",t.data),void e.refresh(t.data);s=[],r=[],a=t.data;for(i in a)o=a[i],!t.refresh&&e&&(this.log("debug","refresh try",t.type,i),o.updated_at?(n=e.updatedAt(i),n?n<o.updated_at&&(t.later?(r.push(o),this.log("debug","refresh newer later",t.type,i)):(s.push(o),this.log("debug","refresh newer",t.type,i))):(s.push(o),this.log("debug","refresh new no current updated_at",t.type,i))):(s.push(o),this.log("debug","refresh new",t.type,i)));return _.isEmpty(s)?r:(e.refresh(s),r)}},n}(Spine.Module)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.ColumnSelect=function(n){function i(){this.element=t(this.element,this),i.__super__.constructor.apply(this,arguments),this.render(),this.throttledRemove=_.throttle(function(t){return function(){return t.remove(t.pickedValue)}}(this),300,{trailing:!1}),this.throttledSelect=_.throttle(function(t){return function(){return t.select(t.pickedValue)}}(this),300,{trailing:!1}),this.attribute.onChange&&this.shadow.on("change",function(t){return function(){return t.attribute.onChange(t.shadow.val())}}(this))}return e(i,n),i.prototype.elements={".js-pool":"pool",".js-selected":"selected",".js-shadow":"shadow",".js-placeholder":"placeholder",".js-pool .js-option":"poolOptions",".js-selected .js-option":"selectedOptions",".js-search":"search",".js-clear":"clearButton"},i.prototype.events={"click .js-select":"onSelect","click .js-remove":"onRemove","input .js-search":"filter","click .js-clear":"clear","keydown .js-search":"onFilterKeydown"},i.prototype.className="form-control columnSelect",i.prototype.element=function(){return this.el},i.prototype.render=function(){var t,e,n,i,s,r,o,a;if(!_.isEmpty(this.attribute.seperator))for(a=[],this.attribute.value?a=this.attribute.value.split(";"):this.attribute["default"]&&(a=this.attribute["default"].split(";")),t=0,n=a.length;t<n;t++)for(o=a[t],r=this.options.attribute.options,e=0,i=r.length;e<i;e++)s=r[e],s.value===o&&(s.selected=!0);return this.values=[],_.each(this.options.attribute.options,function(t){return function(e){if(e.selected)return t.values.push(e.value.toString())}}(this)),this.html(App.view("generic/column_select")({attribute:this.options.attribute,values:this.values}))},i.prototype.onSelect=function(t){return this.pickedValue=$(t.currentTarget).attr("data-value"),this.throttledSelect()},i.prototype.select=function(t){if(this.selected.find("[data-value='"+t+"']").removeClass("is-hidden"),this.pool.find("[data-value='"+t+"']").addClass("is-hidden"),this.values.push(t),_.isEmpty(this.attribute.seperator)?(this.shadow.val(this.values),this.shadow.trigger("change")):this.shadow.val(this.values.join(";")),this.placeholder.addClass("is-hidden"),this.search.val()&&0===this.poolOptions.not(".is-filtered").not(".is-hidden").size())return this.clear()},i.prototype.onRemove=function(t){return this.pickedValue=$(t.currentTarget).attr("data-value"),this.throttledRemove()},i.prototype.remove=function(t){if(this.pool.find("[data-value='"+t+"']").removeClass("is-hidden"),this.selected.find("[data-value='"+t+"']").addClass("is-hidden"),this.values.splice(this.values.indexOf(t),1),_.isEmpty(this.attribute.seperator)?(this.shadow.val(this.values),this.shadow.trigger("change")):this.shadow.val(this.values.join(";")),!this.values.length)return this.placeholder.removeClass("is-hidden")},i.prototype.filter=function(t){var e;return e=$(t.currentTarget).val(),this.poolOptions.each(function(t,n){if(!$(n).hasClass("is-hidden"))return $(n).text().toLowerCase().indexOf(e.toLowerCase())>-1?$(n).removeClass("is-filtered"):$(n).addClass("is-filtered")}),this.clearButton.toggleClass("is-hidden",0===e.length)},i.prototype.clear=function(){return this.search.val(""),this.poolOptions.removeClass("is-filtered"),this.clearButton.addClass("is-hidden")},i.prototype.onFilterKeydown=function(t){var e;if(13===t.keyCode)return t.stopPropagation(),t.preventDefault(),e=this.poolOptions.not(".is-filtered").not(".is-hidden").first(),e?this.select(e.attr("data-value")):void 0},i}(Spine.Controller)}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var s in e)i.call(e,s)&&(t[s]=e[s]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;App.Delay=function(){function e(){}var n;return n=void 0,e.set=function(e,i,s,r,o){return void 0===n&&null==n&&(n=new t),n.set(e,i,s,r,o)},e.clear=function(e,i){return void 0===n&&null==n&&(n=new t),n.clear(e,i)},e.clearLevel=function(e){return void 0===n&&null==n&&(n=new t),n.clearLevel(e)},e.reset=function(){return void 0===n&&null==n&&(n=new t),n.reset()},e.count=function(){return void 0===n&&null==n&&(n=new _intervalSingleton),n.count()},e._all=function(){return void 0===n&&null==n&&(n=new t),n._all()},e}(),t=function(t){function i(){this._all=e(this._all,this),this.count=e(this.count,this),this.reset=e(this.reset,this),this.clearLevel=e(this.clearLevel,this),this.clear=e(this.clear,this),this.set=e(this.set,this),this.levelStack={}}return n(i,t),i.include(App.LogInclude),i.prototype.set=function(t,e,n,i,s){var r,o;return i||(i="_all"),n&&this.clear(n,i),n||(n=Math.floor(99999*Math.random())),this.log("debug","set",n,e,i,t,s),o=function(e){return function(){return e.clear(n,i),s?(App.QueueManager.add("delay",t),App.QueueManager.run("delay")):t()}}(this),r=setTimeout(o,e),this.levelStack[i]||(this.levelStack[i]={}),this.levelStack[i][n.toString()]={delay_id:r,timeout:e,level:i},n.toString()},i.prototype.clear=function(t,e){var n;if(e||(e="_all"),this.levelStack[e]&&(n=this.levelStack[e][t.toString()]))return this.log("debug","clear",n),clearTimeout(n.delay_id),delete this.levelStack[e][t.toString()],_.isEmpty(this.levelStack[e])?delete this.levelStack[e]:void 0},i.prototype.clearLevel=function(t){var e,n;if(this.levelStack[t]){n=this.levelStack[t];for(e in n)n[e],this.clear(e,t);return delete this.levelStack[t]}},i.prototype.reset=function(){var t,e,n,i;i=this.levelStack;for(n in i){t=i[n];for(e in t)t[e],this.clear(e,n);this.levelStack[n]={}}return!0},i.prototype.count=function(){var t,e,n,i;if(!this.levelStack)return 0;t=0,i=this.levelStack;for(e in i)n=i[e],t+=Object.keys(n).length;return t},i.prototype._all=function(){return this.levelStack},i}(Spine.Module)}.call(this),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.Event=function(){function e(){}var n;return n=void 0,e.init=function(){return n=new t},e.bind=function(e,i,s){return void 0===n&&null==n&&(n=new t),n.bind(e,i,s,!1)},e.prototype.one=function(t,e,i){return this.bind(t,e,i,!0),n.bind(t,e,i,!0)},e.unbind=function(e,i,s){return void 0===n&&null==n&&(n=new t),n.unbind(e,i,s)},e.trigger=function(e,i){return void 0===n&&null==n&&(n=new t),n.trigger(e,i)},e.unbindLevel=function(e){return void 0===n&&null==n&&(n=new t),n.unbindLevel(e)},e.count=function(){return void 0===n&&null==n&&(n=new t),n.count()},e._allBindings=function(){return void 0===n&&null==n&&(n=new t),n._allBindings()},e}(),t=function(t){function n(){this.eventCurrent={}}return e(n,t),n.include(App.LogInclude),n.prototype.unbindLevel=function(t){var e,n,i,s;if(this.eventCurrent[t]){for(s=this.eventCurrent[t],e=0,i=s.length;e<i;e++)n=s[e],this.unbind(n.event,n.callback,t);return delete this.eventCurrent[t]}},n.prototype.bind=function(t,e,n,i){var s,r,o,a,l;for(null==i&&(i=!1),n||(n="_all"),this.eventCurrent[n]||(this.eventCurrent[n]=[]),r=t.split(" "),l=[],o=0,a=r.length;o<a;o++)s=r[o],this.eventCurrent[n].push({event:s,callback:e,one:!1}),i?l.push(this.log("debug","one",s,e)):l.push(this.log("debug","bind",s,e));return l},n.prototype.unbind=function(t,e,n){var i,s,r,o,a;for(n||(n="_all"),this.eventCurrent[n]||(this.eventCurrent[n]=[]),s=t.split(" "),a=[],r=0,o=s.length;r<o;r++)i=s[r],this.eventCurrent[n]=_.filter(this.eventCurrent[n],function(t){if(e){if(t.event!==i&&t.callback!==e)return t}else if(t.event!==i)return t}),a.push(this.log("debug","unbind",i,e));return a},n.prototype.trigger=function(t,e){var n,i,s,r,o,a,l,c;r=t.split(" "),l=this.eventCurrent,c=[];for(a in l)n=l[a],c.push(function(){var t;t=[];for(o in n)i=n[o],t.push(function(){var t,n,o;for(o=[],t=0,n=r.length;t<n;t++)s=r[t],i.event===s?(i.callback(e),!0===i.one?o.push(this.unbind(s,i.callback,a)):o.push(void 0)):o.push(void 0);return o}.call(this));return t}.call(this));return c},n.prototype.count=function(){var t,e,n,i;if(!this.eventCurrent)return 0;t=0,i=this.eventCurrent;for(e in i)n=i[e],t+=Object.keys(n).length;return t},n.prototype._allBindings=function(){return this.eventCurrent},n}(Spine.Module)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.GlobalSearch=function(n){function i(){this.close=t(this.close,this),this.renderTry=t(this.renderTry,this),this.search=t(this.search,this),i.__super__.constructor.apply(this,arguments),this.searchResultCache={},this.lastQuery=void 0,this.apiPath=App.Config.get("api_path"),this.ajaxId="search-"+Math.floor(999999*Math.random())}return e(i,n),i.prototype.search=function(t){var e,n;return n=t.query,e=new Date,this.searchResultCache[n]&&this.searchResultCache[n].time>e.setSeconds(e.getSeconds()-20)?void this.renderTry(this.searchResultCache[n].result,n):App.Ajax.request({id:this.ajaxId,type:"GET",url:this.apiPath+"/search",data:{query:n,limit:this.limit||10},processData:!0,success:function(t){return function(e){var i,s,r,o,a,l,c;for(App.Collection.loadAssets(e.assets),c={},l=e.result,i=0,a=l.length;i<a;i++)s=l[i],App[s.type]&&App[s.type].find?(c[s.type]||(c[s.type]=[]),r=App[s.type].find(s.id),r.searchResultAttributes?(o=r.searchResultAttributes(),c[s.type].push(o)):App.Log.error("_globalSearchSingleton","No such model "+s.type.toLocaleLowerCase()+".searchResultAttributes()")):App.Log.error("_globalSearchSingleton","No such model App."+s.type);return t.renderTry(c,n)}}(this)})},i.prototype.renderTry=function(t,e){var n;if(n=!1,this.lastQuery===e&&this.searchResultCache[e]&&(n=difference(this.searchResultCache[e].result,t)),!1===n||!_.isEmpty(n))return this.lastQuery=e,this.searchResultCache[e]={result:t,time:new Date},this.render(t)},i.prototype.close=function(){return this.lastQuery=void 0},i}(App.Controller)}.call(this),function(){var t,e=[].slice,n=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;App.i18n=function(){function n(){}var i;return i=void 0,n.init=function(e){return null!=i?i:i=new t(e)},n.translateDeep=function(){var n,s;return s=arguments[0],n=2<=arguments.length?e.call(arguments,1):[],void 0===i&&null==i&&(i=new t),i.translateDeep(s,n)},n.translateContent=function(){var n,s;return s=arguments[0],n=2<=arguments.length?e.call(arguments,1):[],void 0===i&&null==i&&(i=new t),i.translateContent(s,n)},n.translatePlain=function(){var n,s;return s=arguments[0],n=2<=arguments.length?e.call(arguments,1):[],void 0===i&&null==i&&(i=new t),i.translatePlain(s,n)},n.translateInline=function(){var n,s;return s=arguments[0],n=2<=arguments.length?e.call(arguments,1):[],void 0===i&&null==i&&(i=new t),i.translateInline(s,n)},n.translateTimestamp=function(e,n){return null==n&&(n=0),void 0===i&&null==i&&(i=new t),i.timestamp(e,n)},n.translateDate=function(e,n){return null==n&&(n=0),void 0===i&&null==i&&(i=new t),i.date(e,n)},n.dir=function(){return void 0===i&&null==i&&(i=new t),i.dir()},n.get=function(){return void 0===i&&null==i&&(i=new t),i.get()},n.set=function(e){return void 0===i&&null==i&&(i=new t),i.set(e)},n.setMap=function(e,n,s){return void 0===i&&null==i&&(i=new t),i.setMap(e,n,s)},n.meta=function(){return void 0===i&&null==i&&(i=new t),i.meta()},n.notTranslatedFeatureEnabled=function(e){return void 0===i&&null==i&&(i=new t),i.notTranslatedFeatureEnabled(e)},n.getNotTranslated=function(e){return void 0===i&&null==i&&(i=new t),i.getNotTranslated(e)},n.removeNotTranslated=function(e,n){return void 0===i&&null==i&&(i=new t),i.removeNotTranslated(e,n)},n.setNotTranslated=function(e,n){return void 0===i&&null==i&&(i=new t),i.setNotTranslated(e,n)},n.timeFormat=function(){return void 0===i&&null==i&&(i=new t),i.mapTime},n.detectBrowserLocale=function(){var t,e,n,i,s,r,o,a,l,c,u,p,h;if(!window.navigator.userLanguage&&!window.navigator.language)return"en-us";if(window.navigator.languages){for(t=App.Locale.all(),p=window.navigator.languages,n=0,o=p.length;n<o;n++)for(e=p[n],i=0,a=t.length;i<a;i++)if(u=t[i],e===u.locale)return u.locale;for(h=window.navigator.languages,s=0,l=h.length;s<l;s++)for(e=h[s],e=e.substr(0,2),r=0,c=t.length;r<c;r++)if(u=t[r],e===u.alias)return u.locale}return window.navigator.userLanguage||window.navigator.language||"en-us"},n}(),t=function(t){function e(){this.timestamp=n(this.timestamp,this),this.date=n(this.date,this),this.setNotTranslated=n(this.setNotTranslated,this),this.removeNotTranslated=n(this.removeNotTranslated,this),this.getNotTranslated=n(this.getNotTranslated,this),this.setMap=n(this.setMap,this),this.meta=n(this.meta,this),this.translate=n(this.translate,this),this.translatePlain=n(this.translatePlain,this),this.translateContent=n(this.translateContent,this),this.translateDeep=n(this.translateDeep,this),this.translateInline=n(this.translateInline,this),this.mapTime={},this.mapString={},this.mapMeta={total:0,translated:0},this._notTranslatedLog=!1,this._notTranslated={},this.dateFormat="yyyy-mm-dd",this.timestampFormat="yyyy-mm-dd HH:MM",this.dirToSet="ltr"}return i(e,t),e.include(App.LogInclude),e.prototype.dir=function(){return this.dirToSet},e.prototype.get=function(){return this.locale},e.prototype.set=function(t){var e,n,i,s,r,o,a,l,c;for(t=t.toLowerCase(),this.dirToSet="ltr",l=!1,c=App.Locale.all(),e=0,s=c.length;e<s;e++)a=c[e],a.locale===t&&(t=a.locale,this.dirToSet=a.dir,l=!0);if(!l)for(n=0,r=c.length;n<r;n++)a=c[n],a.alias===t&&(t=a.locale,this.dirToSet=a.dir,l=!0);if(!l)for(t=t.substr(0,2),i=0,o=c.length;i<o;i++)a=c[i],a.alias===t&&(t=a.locale,this.dirToSet=a.dir,l=!0);if(t!==this.locale)return this.locale=t,this._notTranslatedLog=this.notTranslatedFeatureEnabled(this.locale),$("html").prop("lang",t.substr(0,2)),$("html").prop("dir",this.dirToSet),this.mapString={},App.Ajax.request({id:"i18n-set-"+this.locale,type:"GET",url:App.Config.get("api_path")+"/translations/lang/"+this.locale,async:!1,success:function(t){return function(e){var n,i,s,r,o,a;for(t.mapMeta.total=e.total,r=[],a=e.list,i=0,s=a.length;i<s;i++)o=a[i],"time"===o[3]?t.mapTime[o[1]]=o[2]:(t.mapString[o[1]]=o[2],n={id:o[0],source:o[1],target:o[2],locale:t.locale},r.push(n));return t.mapMeta.translated=r.length,t.mapMeta.mapToLoad=r,App.Event.trigger("i18n:language:change")}}(this)})},e.prototype.translateInline=function(t,e){return t?this.translate(t,e,!0):t},e.prototype.translateDeep=function(t,e){return _.isArray(t)?_.map(t,function(t){return function(n){return t.translateDeep(n,e)}}(this)):_.isObject(t)?_.reduce(_.keys(t),function(e){return function(n,i){return n[i]=e.translateDeep(t[i]),n}}(this),{}):this.translateInline(t,e)},e.prototype.translateContent=function(t,e){return t?App.Config.get("translation_inline")?'<span class="translation" onkeydown="arguments[0].stopPropagation(); return true" onclick="arguments[0].stopPropagation(); return false" contenteditable="true" title="'+App.Utils.htmlEscape(t)+'">'+App.Utils.htmlEscape(this.translate(t))+"</span>":this.translate(t,e,!0,!0):t},e.prototype.translatePlain=function(t,e){return this.translate(t,e)},e.prototype.translate=function(t,e,n,i){var s,r,o,a;if("string"!=typeof t&&t&&t.toString&&(t=t.toString()),void 0===t)return"";if(""===t)return"";if(void 0!==this.mapString[t]?(this._translated=!0,a=this.mapString[t]):(this._translated=!1,a=t,this._notTranslatedLog&&!0===App.Config.get("developer_mode")&&(this._notTranslated[this.locale]||(this._notTranslated[this.locale]={}),this._notTranslated[this.locale][t]||this.log("notice","translation for '"+t+"' in '"+this.locale+"' is missing"),this._notTranslated[this.locale][t]=!0)),n&&(a=App.Utils.htmlEscape(a)),i&&(a=a.replace(/\|\|(.+?)\|\|/gm,"<i>$1</i>").replace(/\|(.+?)\|/gm,"<b>$1</b>").replace(/_(.+?)_/gm,"<u>$1</u>").replace(/\/\/(.+?)\/\//gm,"<del>$1</del>").replace(/\xa7(.+?)\xa7/gm,"<kbd>$1</kbd>")),e)for(r=0,o=e.length;r<o;r++)s=e[r],a=a.replace(/%(s|l)/,function(t){return"%s"===t?n?App.Utils.htmlEscape(s):s:'<a href="'+s+'">\ud83d\udd17</a>'});return i&&(a=a.replace(/\[(.+?)\]\((.+?)\)/gm,'<a href="$2" target="_blank">$1</a>')),this.log("debug","translate",t,e,a),a},e.prototype.meta=function(){return this.mapMeta},e.prototype.setMap=function(t,e,n){return null==n&&(n="string"),"time"===n?""===e?delete this.mapTime[t]:this.mapTime[t]=e:""===e?delete this.mapString[t]:this.mapString[t]=e},e.prototype.notTranslatedFeatureEnabled=function(t){return"en"!==t.substr(0,2)},e.prototype.getNotTranslated=function(t){var e,n;if(n=this._notTranslated[t||this.locale],t&&t!==this.locale)return n;for(e in n)n[e],this.mapString[e]&&""!==this.mapString[e]&&delete n[e];return n},e.prototype.removeNotTranslated=function(t,e){if(this._notTranslated[t])return delete this._notTranslated[t][e]},e.prototype.setNotTranslated=function(t,e){return this._notTranslated[t]||(this._notTranslated[t]={}),this._notTranslated[t][e]=!0},e.prototype.date=function(t,e){return t?this.convert(t,e,this.mapTime.date||this.dateFormat):t},e.prototype.timestamp=function(t,e){return t?this.convert(t,e,this.mapTime.timestamp||this.timestampFormat):t},e.prototype.convert=function(t,e,n){var i,s,r,o,a,l,c,u,p;return l=function(t,e){for(;t.toString().length<e;)t="0"+t;return t},c=new Date(t),e&&(c=new Date(c.getTime()+6e4*c.getTimezoneOffset())),o=c.getDate(),a=c.getMonth()+1,u=c.getFullYear(),p=c.getYear()-100,r=c.getSeconds(),s=c.getMinutes(),i=c.getHours(),n=n.replace(/dd/,l(o,2)).replace(/d/,o).replace(/mm/,l(a,2)).replace(/m/,a).replace(/yyyy/,u).replace(/yy/,p).replace(/SS/,l(r,2)).replace(/MM/,l(s,2)).replace(/HH/,l(i,2))},e}(Spine.Module)}.call(this),function(){App.ImageService=function(){function t(){}return t.resizeForAvatar=function(e,n,i,s){return t.checkUrl(e)?s(e):t.resize(e,n,i,2,"image/jpeg",.7,s)},t.resizeForApp=function(e,n,i,s){return t.checkUrl(e)?s(e):t.resize(e,n,i,2,"image/png",.7,s)},t.resize=function(t,e,n,i,s,r,o,a){var l;return null==e&&(e="auto"),null==n&&(n="auto"),null==i&&(i=1),null==a&&(a=!0),l=new Image,l.onload=function(){var t,a,c,u,p,h,d;return p=l.width,u=l.height,console.log("ImageService","current size",p,u),console.log("ImageService","sizeFactor",i),"auto"===n&&"auto"===e&&(e=p,n=u),"auto"!==e&&e>p&&(e=p),"auto"!==n&&n>u&&(n=u),"auto"===n&&(c=p/e,n=u/c),"auto"===e&&(c=p/n,e=u/c),t=document.createElement("canvas"),d=!1,e<p&&e*i<p||n<u&&n*i<u?(d=!0,e*=i,n*=i,t.width=e,t.height=n,a=t.getContext("2d"),a.drawImage(l,0,0,e,n)):(t.width=p,t.height=u,a=t.getContext("2d"),a.drawImage(l,0,0,p,u)),"auto"===r&&(r=e<200&&n<200?1:e<400&&n<400?.9:e<600&&n<600?.8:e<900&&n<900?.7:.6),h=t.toDataURL(s,r),d?(console.log("ImageService","resize",e/i,n/i,r,.75*h.length/1024/1024,"in mb"),void o(h,e/i,n/i,!0)):(console.log("ImageService","no resize",e,n,r,.75*h.length/1024/1024,"in mb"),o(h,e,n,!1))},l.src=t},t.checkUrl=function(t){var e;return e=/\.svg$/i,e.test(t)},t}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.Run=function(n){function i(){this.start=t(this.start,this),i.__super__.constructor.apply(this,arguments),this.el=$("#app"),App.Event.trigger("app:init"),App.Browser.check()&&($(".splash").hide(),App.Collection.init(),App.Auth.loginCheck(this.start))}return e(i,n),i.prototype.start=function(){return App.WebSocket.connect(),this.frontendTimeUpdate(),this.setupWidget("Navigations","nav",this.el),this.setupWidget("Widgets","widget",this.el),App.ClipBoard.bind(this.el),App.Event.trigger("app:ready")},i.prototype.setupWidget=function(t,e,n){var i,s,r,o,a,l,c;if(App.Event.trigger(e+":init"),c=App.Config.get(t))for(a=Object.keys(c).sort(),s=0,o=a.length;s<o;s++){r=a[s],l=c[r];try{new l({el:n,key:r})}catch(t){i=t,this.log("error","widget "+r+":",i)}}return App.Event.trigger(e+":ready")},i}(App.Controller),App.Content=function(t){function n(){var t,e,i,s;n.__super__.constructor.apply(this,arguments),t=this.Config.get("Routes"),i=function(t){return function(e,n){return t.route(e,function(t){var i;return this.log("debug","execute page controller",e,t),App.Event.unbindLevel("page"),App.Delay.clearLevel("page"),App.Interval.clearLevel("page"),this.el.unbind(),this.el.undelegate(),i=App.Config.get("History"),i[10]&&i.shift(),i.push(window.location.hash),function(t){return function(i){var s;i.el=t.el;try{return new n(i)}catch(n){return s=n,t.log("error","route "+e+":",s)}}}(this)(t)})}}(this);for(s in t)e=t[s],i(s,e);Spine.Route.setup()}return e(n,t),n.prototype.className="content flex horizontal",n}(App.ControllerWidgetPermanent),App.Config.set("content",App.Content,"Widgets")}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var s in e)i.call(e,s)&&(t[s]=e[s]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;App.Interval=function(){function e(){}var n;return n=void 0,e.set=function(e,i,s,r,o){return void 0===n&&null==n&&(n=new t),n.set(e,i,s,r,o)},e.clear=function(e,i){return void 0===n&&null==n&&(n=new t),n.clear(e,i)},e.clearLevel=function(e){return void 0===n&&null==n&&(n=new t),n.clearLevel(e)},e.reset=function(){return void 0===n&&null==n&&(n=new t),n.reset()},e.count=function(){return void 0===n&&null==n&&(n=new t),n.count()},e._all=function(){return void 0===n&&null==n&&(n=new t),n._all()},e}(),t=function(t){function i(){this._all=e(this._all,this),this.count=e(this.count,this),this.reset=e(this.reset,this),this.clearLevel=e(this.clearLevel,this),this.clear=e(this.clear,this),this.set=e(this.set,this),this.levelStack={}}return n(i,t),i.include(App.LogInclude),i.prototype.set=function(t,e,n,i,s){var r,o;return i||(i="_all"),n&&this.clear(n,i),n||(n=Math.floor(99999*Math.random())),this.log("debug","set",n,e,i,t,s),o=function(){return s?(App.QueueManager.add("interval",t),App.QueueManager.run("interval")):t()},o(),r=setInterval(o,e),this.levelStack[i]||(this.levelStack[i]={}),this.levelStack[i][n.toString()]={interval_id:r,timeout:e,level:i},n.toString()},i.prototype.clear=function(t,e){var n;if(e||(e="_all"),this.levelStack[e]&&(n=this.levelStack[e][t.toString()]))return this.log("debug","clear",n),clearInterval(n.interval_id),delete this.levelStack[e][t.toString()],_.isEmpty(this.levelStack[e])?delete this.levelStack[e]:void 0},i.prototype.clearLevel=function(t){var e,n;if(this.levelStack[t]){n=this.levelStack[t];for(e in n)n[e],this.clear(e,t);return delete this.levelStack[t]}},i.prototype.reset=function(){var t,e,n,i;i=this.levelStack;for(n in i){t=i[n];for(e in t)t[e],this.clear(e,n);this.levelStack[n]={}}return!0},i.prototype.count=function(){var t,e,n,i;if(!this.levelStack)return 0;t=0,i=this.levelStack;for(e in i)n=i[e],t+=Object.keys(n).length;return t},i.prototype._all=function(){return this.levelStack},i}(Spine.Module)}.call(this),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.event="ticket_overview_index",n.prototype.restEndpoint="/ticket_overviews",n}(App._CollectionSingletonBase),App.OverviewIndexCollection=function(){function e(){}var n;return n=new t,e.get=function(){return n.get()},e.one=function(t,e){return null==e&&(e=!0),n.bind(t,e,!0)},e.bind=function(t,e){return null==e&&(e=!0),n.bind(t,e,!1)},e.unbind=function(t){return n.unbind(t)},e.unbindById=function(t){return n.unbindById(t)},e.trigger=function(){return n.trigger()},e.fetch=function(){return n.fetch()},e}()}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(){this.clear=e(this.clear,this),this.callback=e(this.callback,this),this.trigger=e(this.trigger,this),this.fetch=e(this.fetch,this),this.overview={},this.callbacks={},this.fetchActive={},this.counter=0,App.Event.bind("ticket_overview_list",function(t){return function(e){return e.assets&&(App.Collection.loadAssets(e.assets),delete e.assets),t.overview[e.overview.view]||(t.overview[e.overview.view]={}),t.overview[e.overview.view]=e,t.callback(e.overview.view,e)}}(this)),App.Event.bind("auth:logout",function(t){return function(e){return t.clear(e)}}(this))}return t.prototype.get=function(t){return this.overview[t]},t.prototype.bind=function(t,e,n){return null==n&&(n=!0),this.counter+=1,this.callbacks[this.counter]={view:t,callback:e},n&&(void 0===this.overview[t]?this.fetch(t):this.callback(t,this.overview[t])),this.counter},t.prototype.unbind=function(t){return delete this.callbacks[t]},t.prototype.fetch=function(t){if(!t)throw"No view to fetch list!";if(App.OverviewIndexCollection.fetch(),!this.fetchActive[t])return this.fetchActive[t]=!0,App.Ajax.request({id:"ticket_overview_"+t,type:"GET",url:App.Config.get("api_path")+"/ticket_overviews",data:{view:t},processData:!0,success:function(e){return function(n){return e.fetchActive[t]=!1,n.assets&&(App.Collection.loadAssets(n.assets),delete n.assets),n.index&&n.index.overview&&(e.overview[n.index.overview.view]=n.index),e.callback(t,n.index)}}(this),error:function(e){return function(){return e.fetchActive[t]=!1}}(this)})},t.prototype.trigger=function(t){return this.callback(t,this.get(t))},t.prototype.callback=function(t,e){var n,i,s,r,o;r=this.callbacks,o=[];for(i in r)s=r[i],s.view===t?(n=function(){return s.callback(e)},App.QueueManager.add("ticket_overviews",n),o.push(App.QueueManager.run("ticket_overviews"))):o.push(void 0);return o},t.prototype.clear=function(){return this.overview={},this.callbacks={},this.fetchActive={},this.counter=0},t}(),App.OverviewListCollection=function(){function e(){}var n;return n=new t,e.get=function(e){return void 0===n&&null==n&&(n=new t),n.get(e)},e.bind=function(e,i,s){return void 0===n&&null==n&&(n=new t),n.bind(e,i,s)},e.unbind=function(e){return void 0===n&&null==n&&(n=new t),n.unbind(e)},e.fetch=function(e){return void 0===n&&null==n&&(n=new t),n.fetch(e)},e.trigger=function(e){return void 0===n&&null==n&&(n=new t),n.trigger(e)},e}()}.call(this),function(){App.PrettyDate=function(){function t(){}return t.humanTime=function(t,e,n,i){var s,r,o,a,l,c,u,p,h,d,f,g,m,v,y;return null==n&&(n=!0),null==i&&(i=void 0),t?(o=new Date,r=new Date(t),l=(o-r)/1e3,"",e&&(l>0&&"-",l>=0?g='class="label label-danger"':l>-3600&&(g='class="label label-warning"')),c="future",l>-1&&(c="past"),l.toString().match("-")&&(l=l.toString().replace("-",""),l=parseFloat(l)),l<60?App.i18n.translateInline("just now"):(void 0===i&&window.App&&window.App.Config&&(i=window.App.Config.get("pretty_date_format")),"absolute"!==i||"past"!==c&&"future"!==c?"past"===c&&!e&&l>604800?App.i18n.translateDate(t):(f="",s=0,l>=86400&&(s++,m=Math.floor(l/86400),a=n?m>1||0===m?App.i18n.translateInline("days"):App.i18n.translateInline("day"):App.i18n.translateInline("d"),f=m+" "+a,l-=86400*m,m>=9||l<3600||2===s)?(f="past"===c?App.i18n.translateInline("%s ago",f):App.i18n.translateInline("in %s",f),e&&(f="<span "+g+">"+f+"</b>"),f):l>=3600&&(s++,m=Math.floor(l/3600%24),u=n?m>1||0===m?App.i18n.translateInline("hours"):App.i18n.translateInline("hour"):App.i18n.translateInline("h"),""!==f&&(f+=" "),f=f+m+" "+u,l-=3600*m,m>=9||l<60||2===s)?(f="past"===c?App.i18n.translateInline("%s ago",f):App.i18n.translateInline("in %s",f),e&&(f="<span "+g+">"+f+"</b>"),f):(m=Math.floor(l/60%60),p=n?m>1||0===m?App.i18n.translateInline("minutes"):App.i18n.translateInline("minute"):App.i18n.translateInline("m"),""!==f&&(f+=" "),f=f+m+" "+p,f="past"===c?App.i18n.translateInline("%s ago",f):App.i18n.translateInline("in %s",f),e&&(f="<span "+g+">"+f+"</b>"),f)):(y=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],v=y[r.getDay()],d=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],h=d[r.getMonth()],f=l<518400?App.i18n.translateInline(v)+" "+r.getHours()+":"+this.s(r.getMinutes(),2):r.getYear()===o.getYear()?App.i18n.translateInline(v)+" "+r.getDate()+". "+App.i18n.translateInline(h)+" "+r.getHours()+":"+this.s(r.getMinutes(),2):App.i18n.translateInline(v)+" "+App.i18n.translateTimestamp(t),e&&(f="<span "+g+">"+f+"</b>"),f))):""},t.s=function(t,e){for(;t.toString().length<e;)t="0"+t;return t},t}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.SearchableSelect=function(n){function i(){this.highlightItem=t(this.highlightItem,this),this.onInput=t(this.onInput,this),this.navigate=t(this.navigate,this),this.toggle=t(this.toggle,this),this.onKeyUp=t(this.onKeyUp,this),this.onDropdownHidden=t(this.onDropdownHidden,this),this.onDropdownShown=t(this.onDropdownShown,this),this.element=t(this.element,this),i.__super__.constructor.apply(this,arguments),this.render()}return e(i,n),i.prototype.events={"input .js-input":"onInput","blur .js-input":"onBlur","focus .js-input":"onFocus","focus .js-shadow":"onShadowFocus","click .js-option":"selectItem","click .js-enter":"navigateIn","click .js-back":"navigateOut","mouseenter .js-option":"highlightItem","mouseenter .js-enter":"highlightItem","mouseenter .js-back":"highlightItem","shown.bs.dropdown":"onDropdownShown","hidden.bs.dropdown":"onDropdownHidden","keyup .js-input":"onKeyUp"},i.prototype.elements={".js-dropdown":"dropdown",".js-option, .js-enter":"optionItems",".js-input":"input",".js-shadow":"shadowInput",".js-optionsList":"optionsList",".js-optionsSubmenu":"optionsSubmenu",".js-autocomplete-invisible":"invisiblePart",".js-autocomplete-visible":"visiblePart"},i.prototype.className="searchableSelect dropdown dropdown--actions",i.prototype.element=function(){return this.el},i.prototype.render=function(){var t;return t=_.find(this.attribute.options,function(t){return t.selected}),t?(this.attribute.valueName=t.name,this.attribute.value=t.value):this.attribute.unknown&&this.attribute.value?this.attribute.valueName=this.attribute.value:this.hasSubmenu(this.attribute.options)&&(this.attribute.valueName=this.getName(this.attribute.value,this.attribute.options)),this.html(App.view("generic/searchable_select")({attribute:this.attribute,options:this.renderAllOptions("",this.attribute.options,0),submenus:this.renderSubmenus(this.attribute.options)})),this.currentMenu=this.findMenuContainingValue(this.attribute.value),this.level=this.getIndex(this.currentMenu)},
i.prototype.renderSubmenus=function(t){var e,n,i,s;if(e="",t)for(n=0,i=t.length;n<i;n++)s=t[n],s.children&&(e+=App.view("generic/searchable_select_submenu")({options:this.renderOptions(s.children),parentValue:s.value,title:s.name}),this.hasSubmenu(s.children)&&(e+=this.renderSubmenus(s.children)));return e},i.prototype.hasSubmenu=function(t){var e,n,i;if(!t)return!1;for(e=0,n=t.length;e<n;e++)if(i=t[e],i.children)return!0;return!1},i.prototype.getName=function(t,e){var n,i,s,r;for(n=0,i=e.length;n<i;n++){if(r=e[n],r.value===t)return r.name;if(r.children&&void 0!==(s=this.getName(t,r.children)))return s}},i.prototype.renderOptions=function(t){var e,n,i,s;for(e="",n=0,i=t.length;n<i;n++)s=t[n],e+=App.view("generic/searchable_select_option")({option:s,"class":s.children?"js-enter":"js-option"});return e},i.prototype.renderAllOptions=function(t,e,n){var i,s,r,o,a;if(s="",e)for(r=0,o=e.length;r<o;r++)a=e[r],i=a.children?"js-enter":"js-option",n&&n>0&&(i+=" is-hidden is-child"),s+=App.view("generic/searchable_select_option")({option:a,"class":i,detail:t}),a.children&&(s+=this.renderAllOptions(t+" \u2014 "+a.name,a.children,n+1));return s},i.prototype.onDropdownShown=function(){return this.input.on("click",this.stopPropagation),this.highlightFirst(),$(document).on("keydown.searchable_select",this.navigate),this.level>0&&this.showSubmenu(this.currentMenu),this.isOpen=!0},i.prototype.onDropdownHidden=function(){return this.input.off("click",this.stopPropagation),this.unhighlightCurrentItem(),$(document).off("keydown.searchable_select"),this.isOpen=!1},i.prototype.onKeyUp=function(){if(""===this.input.val().trim())return this.shadowInput.val("")},i.prototype.toggle=function(){return this.currentItem=null,this.$('[data-toggle="dropdown"]').dropdown("toggle")},i.prototype.stopPropagation=function(t){return t.stopPropagation()},i.prototype.navigate=function(t){switch(t.keyCode){case 40:return this.nudge(t,1);case 38:return this.nudge(t,-1);case 39:return this.autocompleteOrNavigateIn(t);case 37:return this.autocompleteOrNavigateOut(t);case 13:return this.onEnter(t);case 27:return this.onEscape(t);case 9:return this.onTab(t)}},i.prototype.onEscape=function(){if(this.isOpen)return event.stopPropagation(),this.toggle()},i.prototype.getCurrentOptions=function(){return this.currentMenu.find(".js-option, .js-enter, .js-back")},i.prototype.getOptionIndex=function(t,e){return t.find(".js-option, .js-enter").filter('[data-value="'+e+'"]').index()},i.prototype.nudge=function(t,e){var n,i,s,r;return this.isOpen?(s=this.getCurrentOptions(),t.preventDefault(),r=s.not(".is-hidden"),i=s.filter(".is-active"),n=r.index(i),(n+=e)<0||n>r.size()-1?void 0:(this.unhighlightCurrentItem(),this.currentItem=r.eq(n),this.currentItem.addClass("is-active"),this.clearAutocomplete())):this.toggle()},i.prototype.autocompleteOrNavigateIn=function(t){return this.currentItem.hasClass("js-enter")?this.navigateIn(t):this.fillWithAutocompleteSuggestion(t)},i.prototype.autocompleteOrNavigateOut=function(t){return 0!==this.level?this.navigateOut(t):this.fillWithAutocompleteSuggestion(t)},i.prototype.fillWithAutocompleteSuggestion=function(t){var e;if(this.suggestion)return e=39===t.keyCode?this.suggestion.length:this.invisiblePart.text().length+1,this.input.val(this.suggestion),this.shadowInput.val(this.suggestionValue),this.clearAutocomplete(),this.toggle(),this.input.prop("selectionStart",e),this.input.prop("selectionEnd",e)},i.prototype.autocomplete=function(t,e){var n;return this.suggestion=e,this.suggestionValue=t,n=e.indexOf(this.query),this.query&&0===n?(this.invisiblePart.text(this.query),this.visiblePart.text(e.slice(this.query.length))):this.clearAutocomplete()},i.prototype.clearAutocomplete=function(){return this.suggestion=null,this.visiblePart.text(""),this.invisiblePart.text("")},i.prototype.selectItem=function(t){if(t.currentTarget.textContent)return this.input.val(t.currentTarget.textContent.trim()),this.input.trigger("change"),this.shadowInput.val(t.currentTarget.getAttribute("data-value")),this.shadowInput.trigger("change")},i.prototype.navigateIn=function(t){return t.stopPropagation(),this.selectItem(t),this.navigateDepth(1)},i.prototype.navigateOut=function(t){return t.stopPropagation(),this.navigateDepth(-1)},i.prototype.navigateDepth=function(t){var e,n;if(!this.animating)return t>0?(e=this.currentItem.attr("data-value"),n=this.optionsSubmenu.filter('[data-parent-value="'+e+'"]')):n=this.findMenuContainingValue(this.currentMenu.attr("data-parent-value")),this.animateToSubmenu(n,t),this.level+=t},i.prototype.animateToSubmenu=function(t,e){var n,i,s;return this.animating=!0,t.prop("hidden",!1),this.dropdown.height(Math.max(t.height(),this.currentMenu.height())),n=this.currentItem,this.currentMenu.data("current_item_index",this.currentItem.index()),i=t.data("current_item_index")||1,-1===e&&(s=this.currentMenu.attr("data-parent-value"),i=this.getOptionIndex(t,s)),this.currentItem=t.children().eq(i),this.currentItem.addClass("is-active"),t.velocity({properties:{translateX:[0,100*e+"%"]},options:{duration:240}}),this.currentMenu.velocity({properties:{translateX:[-100*e+"%",0]},options:{duration:240,complete:function(e){return function(){return n.removeClass("is-active"),$.Velocity.hook(e.currentMenu,"translateX",""),e.currentMenu.prop("hidden",!0),e.dropdown.height(t.height()),e.currentMenu=t,e.animating=!1}}(this)}})},i.prototype.showSubmenu=function(t){return this.currentMenu.prop("hidden",!0),t.prop("hidden",!1),this.dropdown.height(t.height())},i.prototype.findMenuContainingValue=function(t){var e;return t?(!t.split&&t.toString&&(t=t.toString()),e=t.split("::"),1===e.length?this.optionsList:(e.pop(),this.optionsSubmenu.filter('[data-parent-value="'+e.join("::")+'"]'))):this.optionsList},i.prototype.getIndex=function(t){var e;return e=t.attr("data-parent-value"),e?e.split("::").length:0},i.prototype.onTab=function(t){if(this.isOpen)return t.preventDefault()},i.prototype.onEnter=function(t){var e,n;return this.currentItem&&this.currentItem.hasClass("js-back")?this.navigateOut(t):(this.clearAutocomplete(),this.isOpen?(t.preventDefault(),!this.currentItem&&this.attribute.unknown||(n=this.currentItem.text().trim(),e=this.currentItem.attr("data-value"),this.input.val(n),this.shadowInput.val(e)),this.input.trigger("change"),this.shadowInput.trigger("change"),this.currentItem&&this.currentItem.hasClass("js-enter")?(this.navigateIn(t),void(this.currentItem=null)):(this.currentItem=null,this.toggle())):void(""===this.shadowInput.val()?(t.preventDefault(),this.toggle()):(this.trigger("enter"),this.el.trigger("enter"))))},i.prototype.onBlur=function(){return this.clearAutocomplete()},i.prototype.onFocus=function(){var t;return t=this.input.val().length,this.input.prop("selectionStart",t),this.input.prop("selectionEnd",t)},i.prototype.onShadowFocus=function(){return this.input.focus()},i.prototype.onInput=function(){if(this.isOpen||this.toggle(),this.query=this.input.val(),this.filterByQuery(this.query),this.attribute.unknown)return this.shadowInput.val(this.query)},i.prototype.filterByQuery=function(t){var e;return t=escapeRegExp(t),e=new RegExp(t.split(" ").join(".*"),"i"),this.optionsList.addClass("is-filtered"),this.optionItems.addClass("is-hidden").filter(function(){return this.textContent.match(e)}).removeClass("is-hidden"),t||this.optionItems.filter(".is-child").addClass("is-hidden"),this.attribute.unknown&&this.optionItems.length===this.optionItems.filter(".is-hidden").length?(this.optionItems.not(".is-child").removeClass("is-hidden"),this.unhighlightCurrentItem(),this.optionsList.removeClass("is-filtered")):this.highlightFirst(!0)},i.prototype.highlightFirst=function(t){if(this.unhighlightCurrentItem(),this.currentItem=this.getCurrentOptions().not(".is-hidden").first(),this.currentItem.addClass("is-active"),t)return this.autocomplete(this.currentItem.attr("data-value"),this.currentItem.text().trim())},i.prototype.highlightItem=function(t){return this.unhighlightCurrentItem(),this.currentItem=$(t.currentTarget),this.currentItem.addClass("is-active")},i.prototype.unhighlightCurrentItem=function(){if(this.currentItem)return this.currentItem.removeClass("is-active"),this.currentItem=null},i}(Spine.Controller)}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var s in e)i.call(e,s)&&(t[s]=e[s]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;App.TaskManager=function(){function e(){}var n;return n=void 0,e.init=function(e){return null==e&&(e={}),e.force?void(n=new t(e)):null!=n?n:n=new t(e)},e.all=function(){return n.all()},e.allWithMeta=function(){return n?n.allWithMeta():[]},e.execute=function(t){if(n)return n.execute(t)},e.get=function(t){if(n)return n.get(t)},e.update=function(t,e){if(n)return n.update(t,e)},e.remove=function(t){if(n)return n.remove(t)},e.notify=function(t){if(n)return n.notify(t)},e.mute=function(t){if(n)return n.mute(t)},e.reorder=function(t){if(n)return n.reorder(t)},e.touch=function(t){if(n)return n.touch(t)},e.reset=function(){if(n)return n.reset()},e.tasksInitial=function(){return void 0===n&&null==n&&(n=new t),n.tasksInitial()},e.worker=function(t){if(n)return n.worker(t)},e.nextTaskUrl=function(){if(n)return n.nextTaskUrl()},e.TaskbarId=function(){if(n)return n.TaskbarId()},e.hideAll=function(){if(n)return n.showControllerHideOthers()},e.preferencesSubscribe=function(t,e){if(n)return n.preferencesSubscribe(t,e)},e.preferencesUnsubscribe=function(t){if(n)return n.preferencesUnsubscribe(t)},e.preferencesTrigger=function(t){if(n)return n.preferencesTrigger(t)},e}(),t=function(t){function i(t){null==t&&(t={}),this.preferencesTrigger=e(this.preferencesTrigger,this),this.preferencesUnsubscribe=e(this.preferencesUnsubscribe,this),this.preferencesSubscribe=e(this.preferencesSubscribe,this),this.tasksInitial=e(this.tasksInitial,this),this.tasksAutoCleanup=e(this.tasksAutoCleanup,this),this.tasksAutoCleanupDelay=e(this.tasksAutoCleanupDelay,this),this.taskUpdateLoop=e(this.taskUpdateLoop,this),this.taskUpdateTrigger=e(this.taskUpdateTrigger,this),this.TaskbarId=e(this.TaskbarId,this),this.nextTaskUrl=e(this.nextTaskUrl,this),this.reset=e(this.reset,this),this.release=e(this.release,this),this.reorder=e(this.reorder,this),this.mute=e(this.mute,this),this.notify=e(this.notify,this),this.remove=e(this.remove,this),this.update=e(this.update,this),this.getWithMeta=e(this.getWithMeta,this),this.get=e(this.get,this),this.hide=e(this.hide,this),this.show=e(this.show,this),this.showControllerHideOthers=e(this.showControllerHideOthers,this),this.startController=e(this.startController,this),i.__super__.constructor.apply(this,arguments),t.el?this.el=t.el:this.el=$("#app"),this.offlineModus=t.offlineModus,this.tasksInitial(),this.bind("taskbar:preferences",function(t){return function(e){return t.tasksPreferences[e.key]=e.preferences,t.preferencesTrigger(e.key)}}(this))}return n(i,t),i.include(App.LogInclude),i.prototype.init=function(){return this.domStore={},this.shownStore={},this.workers={},this.allTasksByKey={},this.tasksToUpdate={},this.tasksPreferences={},this.tasksPreferencesCallbacks={},this.activeTaskHistory=[],this.queue=[],this.queueRunning=!1},i.prototype.all=function(){var t,e,n,i;t=[],n=this.allTasksByKey;for(e in n)i=n[e],t.push(i);return _.sortBy(t,function(t){return t.prio})},i.prototype.allWithMeta=function(){var t,e,n,i;for(t=this.all(),e=0,n=t.length;e<n;e++)i=t[e],i=this.getMeta(i);return t},i.prototype.getMeta=function(t){var e,n,i,s,r;if(i={url:"#",id:!1,iconClass:"loading",title:App.i18n.translateInline("Loading..."),head:App.i18n.translateInline("Loading...")},(r=App.TaskManager.worker(t.key))&&(e=r.meta()))for(n in e)s=e[n],i[n]=s;return t.meta=i,t},i.prototype.newPrio=function(){var t,e,n,i,s;for(n=1,i=this.all(),t=0,e=i.length;t<e;t++)s=i[t],s.prio&&s.prio>n&&(n=s.prio);return++n},i.prototype.domID=function(t){return"content_permanent_"+t},i.prototype.worker=function(t){if(this.workers[t])return this.workers[t]},i.prototype.execute=function(t){return this.queue.push(t),this.run()},i.prototype.run=function(){var t,e,n;if(this.queue[0]&&!this.queueRunning){for(this.queueRunning=!0,n=[];;){e=this.queue.shift();try{this.executeSingel(e)}catch(n){t=n,this.log("error","executeSingel task:",e.key,t)}if(!this.queue[0]){this.queueRunning=!1;break}n.push(void 0)}return n}},i.prototype.executeSingel=function(t){var e,n,i,s,r;if(t.key=App.Utils.htmlAttributeCleanup(t.key),!t.init||!this.workers[t.key]){if(t.init&&(t.params.init=!0),t.params&&(t.show?t.params.shown=!0:delete t.params.shown),t.show&&this.activeTaskHistory.push(_.clone(t)),s=this.get(t.key),s||this.workers[t.key]||t.persistent||(s=new App.Taskbar,s.load({key:t.key,params:t.params,callback:t.controller,client_id:123,prio:this.newPrio(),notify:!1,active:t.show}),this.allTasksByKey[t.key]=s.attributes(),this.touch(t.key),r=this,this.tasksToUpdate[t.key]="inCreate",s.save({done:function(){var e,n;"inCreate"===r.tasksToUpdate[t.key]&&delete r.tasksToUpdate[t.key],r.allTasksByKey[t.key]=this.attributes(),r.tasksPreferences[t.key]=clone(this.preferences),r.preferencesTrigger(t.key),e=[];for(n in r.allTasks)r.allTasks[n]&&r.allTasks[n].key===this.key?(s=this.attributes(),e.push(r.allTasks[n]=s)):e.push(void 0);return e},fail:function(){if("inCreate"===r.tasksToUpdate[t.key])return delete r.tasksToUpdate[t.key]}})),t.show&&this.$("#content").empty(),t.show){i=this.allTasksByKey;for(n in i)s=i[n],n!==t.key?s.active&&(s.active=!1,this.taskUpdate(s)):(e=!1,s.active||(e=!0,s.active=!0),s.notify&&(e=!0,s.notify=!1),e&&this.taskUpdate(s))}return this.startController(t)}},i.prototype.startController=function(t){var e,n,i,s;return this.log("debug","controller start try...",t),s=_.clone(t.params),e=this.domID(t.key),n=this.domStore[e],n?i=n.el:(i=$('<div id="'+e+'" class="content horizontal flex"></div>'),this.domStore[e]={el:i}),s.el=i,s.task_key=t.key,s.taskKey=t.key,t.show||(s.doNotLog=1),this.workers[t.key]||(this.workers[t.key]=new App[t.controller](s)),t.show?this.showControllerHideOthers(t.key,s):this.hide(t.key),this.tasksAutoCleanupDelay()},i.prototype.showControllerHideOthers=function(t,e){var n,i;for(n in this.workers)n!==t&&!1!==this.shownStore[n]&&this.hide(n);this.$("#content").addClass("hide"),i=[];for(n in this.workers)n===t?i.push(this.show(n,e)):i.push(void 0);return i},i.prototype.show=function(t,e){var n,i,s;return n=this.workers[t],this.shownStore[t]=!0,this.preferencesTrigger(t),i=this.domID(t),s=this.domStore[i],!this.$("#"+i).get(0)&&s&&s.el?(this.frontendTimeUpdateElement(s.el),this.el.append(s.el),this.$("#"+i).removeClass("hide").addClass("active"),n&&s.position&&n.setPosition(s.position)):this.$("#"+i).removeClass("hide").addClass("active"),n&&(n.active&&_.isFunction(n.active)&&n.active(!0),n.show&&_.isFunction(n.show)&&n.show(e)),!0},i.prototype.hide=function(t){var e,n,i,s,r;return e=this.workers[t],this.shownStore[t]=!1,s=this.$("#"+this.domID(t)),s.get(0)&&(n=this.domID(t),i=this.domStore[n],e&&_.isFunction(e.currentPosition)?(r=e.currentPosition(),i.position=r,s.addClass("hide").removeClass("active"),i.el=s.detach()):s.addClass("hide").removeClass("active")),!!e&&(e.active&&_.isFunction(e.active)&&e.active(!1),e.hide&&_.isFunction(e.hide)&&e.hide(),this.anyPopoversDestroy(),!0)},i.prototype.get=function(t){return this.allTasksByKey[t]},i.prototype.getWithMeta=function(t){var e;if(e=this.get(t))return this.getMeta(e)},i.prototype.update=function(t,e){var n,i,s,r;if(!(s=this.get(t)))throw"No such task with '"+t+"' to update";for(n in e)r=e[n],s[n]=r;return i=!1,1===Object.keys(e).length&&e.state&&(i=!0),this.taskUpdate(s,i)},i.prototype.remove=function(t){var e;if(e=this.allTasksByKey[t],delete this.allTasksByKey[t],e)return App.Event.trigger("taskRemove",[e]),this.taskDestroy(e),this.release(t)},i.prototype.notify=function(t){var e;if(!(e=this.get(t)))throw"No such task with '"+t+"' to notify";if(!e.notify)return e.notify=!0,this.taskUpdate(e)},i.prototype.mute=function(t){var e;if(!(e=this.get(t)))throw"No such task with '"+t+"' to mute";if(e.notify)return e.notify=!1,this.taskUpdate(e)},i.prototype.reorder=function(t){var e,n,i,s,r;for(s=0,e=0,i=t.length;e<i;e++){if(n=t[e],!(r=this.get(n)))throw"No such task with '"+n+"' of order";s++,r.prio!==s&&(r.prio=s,this.taskUpdate(r,!0))}return App.Event.trigger("taskCollectionOrderSet",t)},i.prototype.release=function(t){var e,n,i,s;e=this.domID(t),i=this.domStore[e],i&&(i.el&&($("#app").append('<div id="'+e+'_trash" class="hide"></div>'),$("#app #"+e+"_trash").append(i.el).remove(),i.el=void 0),i=void 0),delete this.domStore[this.domID(t)],s=this.workers[t],s&&(s=void 0),delete this.workers[t],delete this.tasksPreferences[t];try{return n=this.$("#"+this.domID(t)),n.html(""),n.remove()}catch(e){return this.log("notice","invalid key '"+t+"'")}},i.prototype.reset=function(){var t,e,n;e=this.allTasksByKey;for(t in e)e[t],this.release(t);n=this.workers;for(t in n)n[t],this.release(t);return this.init(),App.Taskbar.deleteAll(),App.Event.trigger("taskInit")},i.prototype.nextTaskUrl=function(){for(var t,e,n,i;;){if(!(e=this.activeTaskHistory.pop()))break;if(!e.key)break;if((t=this.workers[e.key])&&t.url)return t.url()}return i=this.all(),!!((n=i[i.length-1])&&(t=this.workers[n.key])&&t.url)&&t.url()},i.prototype.TaskbarId=function(){return this.TaskbarIdInt||(this.TaskbarIdInt=Math.floor(99999999*Math.random())),this.TaskbarIdInt},i.prototype.taskUpdate=function(t,e){if(null==e&&(e=!1),this.log("debug","UPDATE task",t,e),"inCreate"!==this.tasksToUpdate[t.key]&&(this.tasksToUpdate[t.key]="toUpdate",this.taskUpdateTrigger(),!e))return this.touch(t.key)},i.prototype.touch=function(t){var e;return e=function(e){return function(){var n;if(n=e.getWithMeta(t))return n.active&&n.meta&&e.title(n.meta.title),App.Event.trigger("taskUpdate",[n])}}(this),App.Delay.set(e,20,"task-"+t,void 0)},i.prototype.taskUpdateTrigger=function(){return App.Delay.set(this.taskUpdateLoop,2e3,"check_update_to_server_pending","task",!0)},i.prototype.taskUpdateLoop=function(){var t,e,n,i,s;if(!this.offlineModus){e=[];for(t in this.tasksToUpdate)if(t&&(n=this.get(t)))if("toUpdate"===this.tasksToUpdate[n.key]){if(this.tasksToUpdate[n.key]="inProgress",!(i=App.Taskbar.findByAttribute("key",n.key))){delete s.tasksToUpdate[this.key];continue}i.load(n),i.isOnline()?(s=this,e.push(i.save({done:function(){if("inProgress"===s.tasksToUpdate[this.key])return delete s.tasksToUpdate[this.key]},fail:function(){if(s.log("error","can't update task",this),"inProgress"===s.tasksToUpdate[this.key])return delete s.tasksToUpdate[this.key]}}))):e.push(void 0)}else e.push(void 0);return e}},i.prototype.taskDestroy=function(t){return"inProgress"===this.tasksToUpdate[t.key]||"inCreate"===this.tasksToUpdate[t.key]?void App.Delay.set(function(e){return function(){return e.taskDestroy(t)}}(this),800,void 0,"task",!0):(delete this.tasksToUpdate[t.key],delete this.tasksPreferences[t.key],t.id&&App.Taskbar.exists(t.id)?App.Taskbar.destroy(t.id):void 0)},i.prototype.tasksAutoCleanupDelay=function(){var t;return t=function(t){return function(){return t.tasksAutoCleanup()}}(this),App.Delay.set(t,12e3,"task-autocleanup",void 0,!0)},i.prototype.tasksAutoCleanup=function(){var t,e,n,i,s,r,o;if(t=function(t){return function(){return Object.keys(t.allTasksByKey).length}}(this),i=30,t()>i){for(s=App.Taskbar.search({sortBy:"updated_at",order:"ASC"}),r=[],e=0,n=s.length;e<n;e++)o=s[e],t()>i?o.active?r.push(void 0):_.isEmpty(o.state)||_.isEmpty(o.state.ticket)&&_.isEmpty(o.state.article)?(this.log("notice","More then "+i+" tasks open, close oldest untouched task "+o.key),r.push(this.remove(o.key))):r.push(void 0):r.push(void 0);return r}},i.prototype.tasksInitial=function(){var t,e,n,i,s,r,o,a,l,c,u,p;for(this.init(),c=App.Taskbar.all(),n=0,s=c.length;n<s;n++)a=c[n],a.active=!1,this.allTasksByKey[a.key]=a.attributes(),this.tasksPreferences[a.key]=a.preferences;if(App.Event.trigger("taskbar:init"),p=App.Session.get("id"),u=void 0,p&&(u=App.User.find(p)),r=App.Config.get("permanentTask"),l=0,r)for(i in r)t=r[i],(!t.permission||u&&u.permission(t.permission))&&(l+=1,function(t){return function(e,n,i){return App.Delay.set(function(){return t.execute({key:e,controller:n.controller,params:{},show:!1,persistent:!0,init:!0})},350*i,void 0,"task",!0)}}(this)(i,t,l));o=this.allTasksByKey,e=function(t){return function(e,n){return App.Delay.set(function(){return t.execute({key:e.key,controller:e.callback,params:e.params,show:!1,persistent:!1,init:!0})},350*n,void 0,"task",!0)}}(this);for(i in o)a=o[i],l+=1,e(a,l);return App.Event.trigger("taskbar:ready")},i.prototype.preferencesSubscribe=function(t,e){var n;return this.tasksPreferencesCallbacks[t]||(this.tasksPreferencesCallbacks[t]={}),n=""+t+Math.floor(999999*Math.random()),this.tasksPreferencesCallbacks[t][n]=e,n},i.prototype.preferencesUnsubscribe=function(t){var e,n,i,s,r,o;if(this.tasksPreferencesCallbacks){n=this.tasksPreferencesCallbacks;for(e in n){o=n[e];for(r in o)o[r],r===t&&delete o[r]}i=this.tasksPreferencesCallbacks,s=[];for(e in i)o=i[e],_.isEmpty(o)?s.push(delete this.tasksPreferencesCallbacks[e]):s.push(void 0);return s}},i.prototype.preferencesTrigger=function(t){var e,n,i,s;if(this.tasksPreferencesCallbacks[t]&&this.tasksPreferences[t]){n=this.tasksPreferencesCallbacks[t],i=[];for(s in n)e=n[s],i.push(e(this.tasksPreferences[t]));return i}},i}(App.Controller)}.call(this),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.event="ticket_create_attributes",n.prototype.restEndpoint="/ticket_create",n}(App._CollectionSingletonBase),App.TicketCreateCollection=function(){function e(){}var n;return n=new t,e.get=function(){return n.get()},e.one=function(t,e){return null==e&&(e=!0),n.bind(t,e,!0)},e.bind=function(t,e){return null==e&&(e=!0),n.bind(t,e,!1)},e.unbind=function(t){return n.unbind(t)},e.unbindById=function(t){return n.unbindById(t)},e.trigger=function(){return n.trigger()},e.fetch=function(){return n.fetch()},e}()}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var s in e)i.call(e,s)&&(t[s]=e[s]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;App.UserOrganizationAutocompletion=function(i){function s(){return this.buildObjectItem=e(this.buildObjectItem,this),this.newObject=e(this.newObject,this),s.__super__.constructor.apply(this,arguments)}return n(s,i),s.prototype.objectSingle="User",s.prototype.objectIcon="user",s.prototype.inactiveObjectIcon="inactive-user",s.prototype.objectSingels="People",s.prototype.objectCreate="Create new Customer",s.prototype.referenceAttribute="member_ids",s.prototype.newObject=function(e){return e&&e.preventDefault(),new t({parent:this,container:this.el.closest(".content")})},s.prototype.buildObjectItem=function(t){var e,n;return n=t.displayName(),this.Config.get("ui_user_organization_selector_with_email")&&!_.isEmpty(t.email)&&(n+=" <"+t.email+">"),e=this.objectIcon,!1===t.active&&this.inactiveObjectIcon&&(e=this.inactiveObjectIcon),App.view(this.templateObjectItem)({realname:n,object:t,icon:e})},s}(App.ObjectOrganizationAutocompletion),t=function(t){function i(){return this.onSubmit=e(this.onSubmit,this),i.__super__.constructor.apply(this,arguments)}return n(i,t),i.prototype.buttonClose=!0,i.prototype.buttonCancel=!0,i.prototype.buttonSubmit=!0,i.prototype.head="User",i.prototype.headPrefix="New",i.prototype.content=function(){return this.controller=new App.ControllerForm({model:App.User,screen:"edit",autofocus:!0}),this.controller.form},i.prototype.onSubmit=function(t){var e,n,i,s,r,o;if(n=this.formParam(t.target),!n.login&&n.email&&(n.login=n.email),!n.role_ids||_.isEmpty(n.role_ids)){s=[];for(i in App.Role.all())i&&!0===i.active&&!0===i.default_at_signup&&s.push(i.id);n.role_ids=s}return this.log("notice","updateAttributes",n),o=new App.User,o.load(n),(e=o.validate())?(this.log("error",e),void this.formValidate({form:t.target,errors:e})):(r=this,o.save({done:function(){var t;return t=function(t){return r.parent.el.find("[name=customer_id]").val(t.id).trigger("change"),r.parent.close(),r.close()},App.User.full(this.id,t,!0)},fail:function(e,n){return r.log("errors",n),r.formEnable(t),r.controller.showAlert(n.error_human||n.error||"Unable to create object!")}}))},i}(App.ControllerModal)}.call(this),function(){App.Utils=function(){function t(){}return t.mapTagAttributes={TABLE:["align","bgcolor","border","cellpadding","cellspacing","frame","rules","sortable","summary","width","style"],TD:["abbr","align","axis","colspan","headers","rowspan","valign","width","style"],TH:["abbr","align","axis","colspan","headers","rowspan","scope","sorted","valign","width","style"],TR:["width","style"],A:["href","hreflang","name","rel"],IMG:["align","alt","border","height","src","srcset","width","style"]},t.mapCss={TABLE:["background","background-color","color","font-size","vertical-align","margin","margin-top","margin-right","margin-bottom","margin-left","padding","padding-top","padding-right","padding-bottom","padding-left","text-align","border","border-top","border-right","border-bottom","border-left","border-collapse","border-style","border-spacing","border-top-width","border-right-width","border-bottom-width","border-left-width","border-top-color","border-right-color","border-bottom-color","border-left-color","border-top-style","border-right-style","border-bottom-style","border-left-style"],TH:["background","background-color","color","font-size","vertical-align","margin","margin-top","margin-right","margin-bottom","margin-left","padding","padding-top","padding-right","padding-bottom","padding-left","text-align","border","border-top","border-right","border-bottom","border-left","border-collapse","border-style","border-spacing","border-top-width","border-right-width","border-bottom-width","border-left-width","border-top-color","border-right-color","border-bottom-color","border-left-color","border-top-style","border-right-style","border-bottom-style","border-left-style"],TR:["background","background-color","color","font-size","vertical-align","margin","margin-top","margin-right","margin-bottom","margin-left","padding","padding-top","padding-right","padding-bottom","padding-left","text-align","border","border-top","border-right","border-bottom","border-left","border-collapse","border-style","border-spacing","border-top-width","border-right-width","border-bottom-width","border-left-width","border-top-color","border-right-color","border-bottom-color","border-left-color","border-top-style","border-right-style","border-bottom-style","border-left-style"],TD:["background","background-color","color","font-size","vertical-align","margin","margin-top","margin-right","margin-bottom","margin-left","padding","padding-top","padding-right","padding-bottom","padding-left","text-align","border","border-top","border-right","border-bottom","border-left","border-collapse","border-style","border-spacing","border-top-width","border-right-width","border-bottom-width","border-left-width","border-top-color","border-right-color","border-bottom-color","border-left-color","border-top-style","border-right-style","border-bottom-style","border-left-style"],IMG:["width","height"]},t.textCleanup=function(t){return $.trim(t).replace(/(\r\n|\n\r)/g,"\n").replace(/\r/g,"\n").replace(/[ ]\n/g,"\n").replace(/\n{3,20}/g,"\n\n")},t.text2html=function(t){return t=this.textCleanup(t),t=this.linkify(t),t="<div>"+t.replace(/\n/g,"</div><div>")+"</div>",t.replace(/<div><\/div>/g,"<div><br></div>")},t.html2text=function(t,e){return t?e?(t=t.replace(/([A-z])\n([A-z])/gm,"$1 $2").replace(/\n|\r/g,"").replace(/<(br|hr)>/g,"\n").replace(/<(br|hr)\/>/g,"\n").replace(/<\/(div|p|blockquote|form|textarea|address|tr)>/g,"\n"),$("<div>"+t+"</div>").text()):(t=t.replace(/([A-z])\n([A-z])/gm,"$1 $2").replace(/>\n/g,">").replace(/\n|\r/g,""),t=t.replace(/<(br|hr)>/g,"\n").replace(/<(br|hr)\/>/g,"\n").replace(/<(div)(|.+?)>/g,"").replace(/<(p|blockquote|form|textarea|address|tr)(|.+?)>/g,"\n").replace(/<\/(div|p|blockquote|form|textarea|address|tr)>/g,"\n"),$("<div>"+t+"</div>").text().trim().replace(/\n{3,20}/g,"\n\n")):t},t.linkify=function(t){return window.linkify(t)},t.phoneify=function(t){return _.isEmpty(t)?t:"tel:"+(t=t.replace(/[^0-9,\+,#,\*]+/g,"").replace(/(.)\+/,"$1"))},t.wrap=function(t,e){var n,i,s,r,o,a,l,c,u,p,h,d,f;for(null==e&&(e=82),d="",n=0,c=t.split(/\n/),s=0,o=c.length;s<o;s++){for(l=c[s],n+=1,i=0,p=0,f="",h=l.split(/\s/),r=0,a=h.length;r<a;r++)u=h[r],i+=1,p+u.length>e&&(p=0,f=f.trim(),f+="\n",d+=f,f=""),p+=u.length,f+=u,i!==h.length&&(p+=1,f+=" ");d+=f,f="",n!==c.length&&(d+="\n")}return d},t.quote=function(t,e){return null==e&&(e=82),t=this.textCleanup(t),t=this.wrap(t,e),$.trim(t).replace(/^(.*)$/gm,function(t){return t?"> "+t:">"})},t.escapeRegExp=function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},t.htmlEscape=function(t){return t&&t.replace?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"):t},t.htmlStrip=function(t){for(var e,n,i;;){if(!(n=t.get(0)))break;if(!(e=n.firstChild))break;if(1!==e.nodeType||"BR"!==e.tagName)break;if(!e.remove)break;e.remove()}for(i=[];;){if(!(n=t.get(0)))break;if(!(e=n.lastChild))break;if(1!==e.nodeType||"BR"!==e.tagName)break;if(!e.remove)break;i.push(e.remove())}return i},t.htmlLastLineEmpty=function(t){var e,n;return!!(n=t.get(0))&&(!!(e=n.lastChild)&&(1===e.nodeType&&"BR"===e.tagName))},t.htmlRemoveTags=function(t){return t=this._checkTypeOf(t),this._removeComments(t),this._removeWordMarkup(t),t.find("div, span, p, li, ul, ol, a, b, u, i, label, small, strong, strike, pre, code, center, blockquote, form, fieldset, textarea, font, address, table, thead, tbody, tr, th, td, h1, h2, h3, h4, h5, h6").replaceWith(function(){return $(this).contents()}),t.find("div, span, p, li, ul, ol, a, b, u, i, label, small, strong, strike, pre, code, center, blockquote, form, fieldset, textarea, font, table, thead, tbody, tr, th, td, h1, h2, h3, h4, h5, h6, br, hr, img, svg, input, select, button, style, applet, embed, noframes, canvas, script, frame, iframe, meta, link, title, head").remove(),t},t.htmlRemoveRichtext=function(t,e){return null==e&&(e=!0),t?(t=this._checkTypeOf(t),this._removeComments(t),this._removeWordMarkup(t),t.find("li, ul, ol, a, b, u, i, label, small, strong, strike, pre, code, center, blockquote, form, fieldset, textarea, font, address, table, thead, tbody, tr, th, td, h1, h2, h3, h4, h5, h6").replaceWith(function(){return $(this).contents()}),t.find("li, ul, ol, a, b, u, i, label, small, strong, strike, pre, code, center, blockquote, form, fieldset, textarea, font, address, table, thead, tbody, tr, th, td, h1, h2, h3, h4, h5, h6, hr, img, svg, input, select, button, style, applet, embed, noframes, canvas, script, frame, iframe, meta, link, title, head").remove(),this._removeAttributes(t,e),t):t},t.htmlCleanup=function(t){var e;return t?(t=this._checkTypeOf(t),this._removeComments(t),this._removeWordMarkup(t),this._stripDoubleDomainAnchors(t),t.find("font, small, time, form, label").replaceWith(function(){return $(this).contents()}),e="div",t.find("textarea").each(function(){var t,n,i;return n=this.outerHTML,i=new RegExp("<"+this.tagName,"i"),t=n.replace(i,"<"+e),i=new RegExp("</"+this.tagName,"i"),t=t.replace(i,"</"+e),$(this).replaceWith(t)}),t.find("font, svg, input, select, button, style, applet, embed, noframes, canvas, script, frame, iframe, meta, link, title, head, fieldset").remove(),this._cleanAttributes(t),t):t},t._checkTypeOf=function(t){var e;if("string"!=typeof t)return t;try{return e=$(t),e.length>1?$("<div>"+t+"</div>"):e&&e.get(0)?e:$("<div>"+t+"</div>")}catch(e){return e,$("<div>"+t+"</div>")}},t._cleanAttribute=function(t){var e,n,i,s,r,o,a,l,c,u,p,h,d,f,g;if(t){if(this.mapTagAttributes[t.nodeName])for(n=t.attributes,s=0,l=n.length;s<l;s++)(e=n[s])&&e.name&&!_.contains(this.mapTagAttributes[t.nodeName],e.name)&&t.removeAttribute(e.name);else this._removeAttribute(t);if(this.mapCss[t.nodeName]){for(i=t.style,g="",r=0,c=i.length;r<c;r++)h=i[r],g+=h+":"+i[h]+";";if(g&&g.split){for(f="",d=g.split(";"),a=0,u=d.length;a<u;a++)p=d[a],h=p.split(":"),h[0]&&h[0].trim&&(o=h[0].trim(),_.contains(this.mapCss[t.nodeName],o)&&(f+=p+";"));return""!==f?t.setAttribute("style",f):t.removeAttribute("style")}}}},
t._cleanAttributes=function(t,e){return null==e&&(e=!0),e&&t.each(function(t){return function(e,n){return t._cleanAttribute(n)}}(this)),t.find("*").each(function(t){return function(e,n){return t._cleanAttribute(n)}}(this)),t},t._removeAttribute=function(t){var e,n,i,s,r;if(t){for(e=$(t),r=t.attributes,i=0,s=r.length;i<s;i++)(n=r[i])&&n.name&&t.removeAttribute(n.name);return e.removeAttr("style").removeAttr("class").removeAttr("lang").removeAttr("type").removeAttr("align").removeAttr("id").removeAttr("wrap").removeAttr("title").removeAttrs(/data-/)}},t._removeAttributes=function(t,e){return null==e&&(e=!0),e&&t.each(function(t){return function(e,n){return t._removeAttribute(n)}}(this)),t.find("*").each(function(t){return function(e,n){return t._removeAttribute(n)}}(this)),t},t._removeComments=function(t){return t.contents().each(function(){if(8===this.nodeType)return $(this).remove()}),t},t._removeWordMarkup=function(t){var e,n,i;return t.get(0)?(n=!1,e=t.get(0).outerHTML,i=new RegExp("<(/w|w):[A-Za-z]"),e.match(i)&&(n=!0,e=e.replace(i,"")),i=new RegExp("<(/o|o):[A-Za-z]"),e.match(i)&&(n=!0,e=e.replace(i,"")),n?window.word_filter(t):t):t},t._stripDoubleDomainAnchors=function(t){return t.find("a").each(function(){var t,e;if(null!=(e=$(this).attr("href")))return t=e.replace(/^https?:\/\/.*(?=(https?|#{config.http_type}):\/\/)/,""),e!==t?$(this).attr("href",t):void 0})},t.signatureCheck=function(t,e){var n,i,s,r;return n=$("<div>"+t+"</div>").text().trim(),n=n.replace(/(\n|\r|\t)/g,""),r=$("<div>"+e+"</div>").text().trim(),r=r.replace(/(\n|\r|\t)/g,""),i=function(t){return(t+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")},s=new RegExp(i(r),"mi"),!n.match(s)},t.signatureIdentify=function(t,e,n){var i,s,r,o,a,l,c,u,p,h,d,f,g,m;if(null==e&&(e=!1),null==n&&(n=!1),g=this.html2text(t),m=g.split("\n"),!e&&m.length<10&&g.length<300)return t;if(o=function(t){return(t+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")},i=function(t){return t.match(/(<|>|&)/)&&(t=t.replace(/(.+?)(<|>|&).+?$/,"$1").trim()),t},r=[],h=function(t,e){var n,i,s,r,o;for(r=0,n=0,i=t.length;n<i;n++)if(s=t[n],r+=1,s&&s.match(/^\s{0,10}--\s{0,10}$/))return o={line:s,lineCount:r,type:"separator"},void e.push(o)},h(m,r),d=function(t,e){var n,s,r,o,a;for(o=0,n=0,s=t.length;n<s;n++){if(r=t[n],o+=1,r&&r.match(/^(Am)\s.{6,20}\s(um)\s.{3,10}\s(schrieb)\s.{1,250}:/))return a={line:i(r),lineCount:o,type:"thunderbird"},void e.push(a);if(r&&r.match(/^(On)\s.{6,20}\s.{3,10},\s.{1,250}(wrote):/))return a={line:i(r),lineCount:o,type:"thunderbird"},void e.push(a);if(r&&r.match(/^.{1,250}\s(wrote),\son\s.{3,20}:/))return a={line:i(r),lineCount:o,type:"thunderbird"},void e.push(a)}},d(m,r),l=function(t,e){var n,s,r,o,a;for(o=0,n=0,s=t.length;n<s;n++){if(r=t[n],o+=1,r&&r.match(/^(On)\s.{6,20}\s.{3,10}\s.{1,250}\s(wrote):/))return a={line:i(r),lineCount:o,type:"apple"},void e.push(a);if(r&&r.match(/^(Am)\s.{6,20}\s(um)\s.{3,10}\s(schrieb)\s.{1,250}:/))return a={line:i(r),lineCount:o,type:"apple"},void e.push(a)}},l(m,r),p=function(t,e){var n,s,r,o,a;for(o=0,n=0,s=t.length;n<s;n++)if(r=t[n],o+=1,r&&r.match(/^.{6,10}\s.{3,10}\s-\s.{1,250}\s(wrote|schrieb|a \xe9crit|escribi\xf3):/))return a={line:i(r),lineCount:o,type:"Otrs"},void e.push(a)},p(m,r),u=function(t,e){var n,i,s,r,o,a,l,c;for(a=0,i=void 0,n=0,c=5,s=0,r=t.length;s<r;s++)if(o=t[s],a+=1,i){if(o&&o.match(/^(Subject|Betreff|Objet)(\s|):\s.+?/))return l={line:i,lineCount:a,type:"Ms"},void e.push(l);a>n+c&&(i=void 0)}else o&&o.match(/^(From|Von|De)(\s|):\s.+?/)&&(i=o.replace(/\s{0,5}(\[|<).+?(\]|>)/g,""),n=a)},u(m,r),f=function(t,e){var n,s,r,o,a;for(o=0,n=0,s=t.length;n<s;n++)if(r=t[n],o+=1,r&&r.match(/^.{1,250}\s(wrote|schrieb|a \xe9crit|escribi\xf3):/))return a={line:i(r),lineCount:o,type:"Word14"},void e.push(a)},f(m,r),c=function(t,e){var n,s,r,o,a;for(o=0,n=0,s=t.length;n<s;n++)if(r=t[n],o+=1,r&&r.match(/.{1,250}\s(wrote|schrieb|a \xe9crit|escribi\xf3)\s.{1,250}:/))return a={line:i(r),lineCount:o,type:"gmail"},void e.push(a)},c(m,r),s='<span class="js-signatureMarker"></span>',!r||!r[0]||n){if(a=new RegExp('(<div data-signature="true" data-signature-id=".{1,5}">)'),t.match(a))return t.replace(a,s+"$1");if(a=new RegExp('(<div data-signature-id=".{1,5}" data-signature="true">)'),t.match(a))return t.replace(a,s+"$1")}return(r&&r[0]||(a=new RegExp('(<blockquote type="cite">)'),!t.match(a)))&&(r&&r[0]||(a=new RegExp('(<blockquote class="(ecxgmail_quote|gmail_quote)">)'),!t.match(a)))?r&&r[0]?(r=_.sortBy(r,"lineCount"),"separator"===r[0].type?(a=new RegExp(">(s{0,10}"+o(App.Utils.htmlEscape(r[0].line))+")s{0,10}<"),t.replace(a,">"+s+"$1<")):(a=new RegExp(">(s{0,10}"+o(App.Utils.htmlEscape(r[0].line))+")"),t.replace(a,">"+s+"$1"))):t:t.replace(a,s+"$1")},t.replaceTags=function(t,e){return t=t.replace(/#\{\s{0,2}(.+?)\s{0,2}\}/g,function(t,n){var i,s,r,o,a,l;for(n=n.replace(/<.+?>/g,""),a=n.split(/\./),i=e,s=0,r=a.length;s<r;s++){if(!((o=a[s])in i)){i="";break}i=i[o]}return l="function"==typeof i?i():void 0!==i&&null!==i&&i.toString?i.toString():"",""===l&&(l="-"),l})},t.removeEmptyLines=function(t){return t.replace(/^\s*[\r\n]/gm,"")},t.htmlAttributeCleanup=function(t){return t.replace(/((?![-a-zA-Z0-9_]+).|\n|\r|\t)/gm,"")},t.formDiff=function(t,e){var n,i;return i=clone(t),this._formDiffNormalizer(i),n=clone(e),this._formDiffNormalizer(n),this._formDiffChanges(i,n)},t._formDiffChanges=function(t,e,n){var i,s;null==n&&(n={});for(i in t)t[i],t[i]!==e[i]&&(_.isArray(t[i])&&_.isArray(e[i])?(s=_.difference(t[i],e[i]),_.isEmpty(s)||(n[i]=s)):_.isObject(t[i])&&_.isObject(e[i])?n=this._formDiffChanges(t[i],e[i],n):n[i]=t[i]);return n},t._formDiffNormalizer=function(t){var e,n,i,s,r,o;if(void 0!==t){if(_.isArray(t)){for(r=[],e=n=0,s=t.length;0<=s?n<s:n>s;e=0<=s?++n:--n)r.push(t[e]=this._formDiffNormalizer(t[e]));return r}if(_.isObject(t)){o=[];for(i in t)t[i],_.isArray(t[i])?o.push(this._formDiffNormalizer(t[i])):_.isObject(t[i])?o.push(this._formDiffNormalizer(t[i])):o.push(t[i]=this._formDiffNormalizerItem(i,t[i]));return o}return this._formDiffNormalizerItem("",t)}},t._formDiffNormalizerItem=function(t,e){return"owner_id"===t&&"1"===e.toString()?e="":"number"==typeof e?e=e.toString():null===e&&(e=void 0),e},t.checkAttachmentReference=function(t){var e,n,i,s,r,o;if(!t)return!1;for(r=["Attachment","attachment","Attached","attached","Enclosed","enclosed","Enclosure","enclosure"],i=0,s=r.length;i<s;i++){if(o=r[i],n=new RegExp("\\W"+o+"\\W","i"),t.match(n))return o;if(e=App.i18n.translateContent(o),n=new RegExp("\\W"+e+"\\W","i"),t.match(n))return e}return!1},t.humanFileSize=function(t){return t>1048576?t=Math.round(10*t/1048576)/10+" MB":t>1024?t=Math.round(t/1024)+" KB":t+=" Bytes",t},t.decimal=function(t,e){var n,i,s,r;return null==e&&(e=2),void 0===t?"":null===t?"":(t.toString&&(t=t.toString()),""===t?t:t.match(/[A-z]/)?t:(i=function(t,e){for(;t.toString().length<e;)t+="0";return t},(r=t.match(/^(.+?)\.(.+?)$/))&&r[2]?(s=r[2].length,n=e-s,n>0?r[1]+"."+i(r[2],e):r[1]+"."+r[2].substr(0,e)):t+"."+i(0,e)))},t.sortByValue=function(t,e){var n,i,s,r,o,a,l,c,u;null==e&&(e="ASC"),n=[],i={};for(s in t)c=t[s],u=c.toString().toLowerCase(),n.push(u),i[u]=[s,c];for(n=n.sort(),"DESC"===e&&(n=n.reverse()),a={},r=0,o=n.length;r<o;r++)s=n[r],l=i[s],a[l[0]]=l[1];return a},t.sortByKey=function(t,e){var n,i,s,r,o,a;null==e&&(e="ASC"),n=[];for(i in t)t[i],s=i.toString?i.toString().toLowerCase():i,n.push(s);for(n=n.sort(),"DESC"===e&&(n=n.reverse()),a={},r=0,o=n.length;r<o;r++)i=n[r],a[i]=t[i];return a},t.formatTime=function(t,e){if(void 0===t)return"";if(null===t)return"";for(t.toString&&(t=t.toString());t.length<e;)t="0"+t;return t},t.icon=function(t,e){var n,i,s,r,o;if(null==e&&(e=""),t){if(n={ltr:{start:"left",end:"right"},rtl:{start:"right",end:"left"}},t.indexOf("{")>0){r=n[App.i18n.dir()];for(i in r)o=r[i],t=t.replace("{"+i+"}",o)}return s=window.svgPolyfill?"":"assets/images/icons.svg",'<svg class="icon icon-'+t+" "+e+'"><use xlink:href="'+s+"#icon-"+t+'" /></svg>'}},t.getScrollBarWidth=function(){var t,e;return t=$("<div>").css({visibility:"hidden",width:100,overflow:"scroll"}).appendTo("body"),e=$("<div>").css({width:"100%"}).appendTo(t).outerWidth(),t.remove(),100-e},t.diffPositionAdd=function(t,e){var n,i;return n=[],i=function(t,e,n){var s,r,o,a,l;for(r in e)if(t[r]!==e[r]){if(a=parseInt(r),_.contains(t,e[r]))return!1;t.splice(a,0,e[r]),l=0;for(o in t)if(e[o]===e[r]){l=parseInt(o);break}s={position:l,id:e[r]},n.push(s),i(t,e,n)}return!0},!!i(t,e,n)&&n},t.textLengthWithUrl=function(t,e){var n,i;return null==e&&(e=23),n=0,t?(i=Array(e+1).join("X"),t=t.replace(/http(s|):\/\/[-A-Za-z0-9+&@#\/%?=~_\|!:,.;]+[-A-Za-z0-9+&@#\/%=~_|]/gim,i),t.length):n},t.parseAddressListLocal=function(t){var e,n,i,s,r,o,a,l,c;if(l=emailAddresses.parseAddressList(t),c=[],!_.isEmpty(l)){for(e=0,i=l.length;e<i;e++)(a=l[e])&&a.address&&c.push(a.address);return c}if(_.isEmpty(l)&&t.match("@"))for(l=t.split(","),o=/(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/,n=0,s=l.length;n<s;n++)(a=l[n])&&a.match("@")&&(r=a.match(o))&&r[0]&&c.push(r[0]);return c},t.contentTypeCleanup=function(t){return t?t=t.replace(/^(.+?\/.+?)(\b|\s).+?$/,"$1"):t},t.getRecipientArticle=function(t,e,n,i,s,r){var o,a,l,c,u,p,h,d,f,g,m,v,y,b,w,k,T,S,C;if(null==s&&(s=[]),l={to:"",cc:"",body:"",in_reply_to:""},e.message_id&&(l.in_reply_to=e.message_id),"phone"===i.name)return e.sender.name,e.to&&(l.to=e.to),(l.to&&!l.to.match(/@/)||!l.to)&&(l.to=t.customer.email),l;if("email"===i.name||"web"===i.name){for(v=[],p=0,f=s.length;p<f;p++)(a=s[p])&&!_.isEmpty(a.email)&&v.push(a.email.toString().toLowerCase());if(u=function(t){return!_.isEmpty(t)&&_.contains(v,t.toString().toLowerCase())},c=void 0,n&&n.email&&(c=n.email.toLowerCase()),S=!1,!_.isEmpty(e.from)&&(C=App.Utils.parseAddressListLocal(e.from)))for(h=0,g=C.length;h<g;h++)(T=C[h])&&T.match("@")&&(S=u(T));if(w=!1,!_.isEmpty(e.to)&&(k=App.Utils.parseAddressListLocal(e.to))&&k[0])for(d=0,m=k.length;d<m&&(y=k[d],!0!==(w=u(y)));d++);S?l.to=e.to:"Agent"===e.sender.name&&c&&e.from&&e.from.toString().toLowerCase().match(c)&&!w?l.to=e.to:(e.reply_to?l.to=e.reply_to:l.to=e.from,l.to&&!l.to.match(/@/)&&(l.to=e.created_by.email)),b={},o=function(t,e){var n,i,s,r,o;if(i="",k=App.Utils.parseAddressListLocal(t),!_.isEmpty(k))for(r=0,n=k.length;r<n;r++)o=k[r],_.isEmpty(o)||(s=o.toString().toLowerCase(),u(s)||b[s]||(b[s]=!0,i&&(i+=", "),i+=s));return _.isEmpty(e)||(_.isEmpty(i)||(i+=", "),i+=e),i},l.to&&(l.to=o(l.to)),r&&(e.from&&(l.to=o(e.from,l.to)),e.to&&(l.to=o(e.to,l.to)),e.cc&&(l.cc=o(e.cc,l.cc)))}return l},t.tokaniceEmails=function(t){var e,n;return n=App.Config.get("api_path")+"/users/search",e=function(){return $(t).tokenfield({createTokensOnBlur:!0,autocomplete:{source:n,minLength:2}}).on("tokenfield:createtoken",function(t){return!t.attrs.value.match(/@/)||t.attrs.value.match(/\s/)?(t.preventDefault(),!1):(t.attrs.label=t.attrs.value,!0)})},App.Delay.set(e,500,void 0,"tags")},t.htmlImage2DataUrl=function(t){return t&&t.match(/<img/i)?(t=this._checkTypeOf("<div>"+t+"</div>"),t.find("img").each(function(){var t,e;if(e=$(this).attr("src"),!e.match(/^data:/i))return t=App.Utils._htmlImage2DataUrl(this),$(this).attr("src",t)}),t.get(0).innerHTML):t},t._htmlImage2DataUrl=function(t){var e,n;return e=document.createElement("canvas"),e.width=t.width,e.height=t.height,n=e.getContext("2d"),n.drawImage(t,0,0),e.toDataURL("image/png")},t}()}.call(this),function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;App.WebSocket=function(){function t(){}var n;return n=void 0,t.connect=function(){return void 0===n&&null==n&&(n=new e),n},t.close=function(t){return void 0===n&&null==n&&(n=new e),n.close(t)},t.send=function(t){return void 0===n&&null==n&&(n=new e),n.send(t)},t.auth=function(t){return void 0===n&&null==n&&(n=new e),n.auth(t)},t.channel=function(){return void 0===n&&null==n&&(n=new e),n.channel()},t._spool=function(){return void 0===n&&null==n&&(n=new e),n.spool()},t.support=function(){return void 0===n&&null==n&&(n=new e),n.support()},t}(),e=function(e){function s(t){this.args=t,this._ajaxReceive=n(this._ajaxReceive,this),this._ajaxSendQueue=n(this._ajaxSendQueue,this),this._ajaxSend=n(this._ajaxSend,this),this._ajaxInit=n(this._ajaxInit,this),this._receiveMessage=n(this._receiveMessage,this),this.connect=n(this.connect,this),this.ping=n(this.ping,this),this.close=n(this.close,this),this.spool=n(this.spool,this),this.auth=n(this.auth,this),this.send=n(this.send,this),s.__super__.constructor.apply(this,arguments),App.Event.bind("auth",function(t){return function(){return t.auth()}}(this),"ws"),App.Event.bind("ws:send",function(t){return function(e){return t.send(e)}}(this),"ws"),App.Event.bind("ws:login",function(t){return function(){return t.spool()}}(this),"ws"),App.Event.bind("spool:sent",function(t){return function(e){return t.lastSpoolMessage=e.timestamp,t.sentSpoolFinished=!0,App.Delay.clear("reset-spool-sent-if-not-returned","ws")}}(this),"ws"),this.connect(),$(document).bind("visibilitychange",function(t){return function(){if(t.log("debug","visibilitychange"),!document.hidden&&t.connectionEstablished)return t.log("debug","ping"),t.ping()}}(this))}return i(s,e),s.include(App.LogInclude),s.prototype.queue=[],s.prototype.supported=!0,s.prototype.lastSpoolMessage=void 0,s.prototype.sentSpoolFinished=!0,s.prototype.connectionKeepDown=!1,s.prototype.connectionEstablished=!1,s.prototype.connectionWasEstablished=!1,s.prototype.tryToConnect=!1,s.prototype.backend="websocket",s.prototype.backend_port="",s.prototype.client_id=void 0,s.prototype.error=!1,s.prototype.channel=function(){if(this.connectionEstablished)return this.backend},s.prototype.support=function(){return this.supported},s.prototype.send=function(t){var e;return"ajax"===this.backend?this._ajaxSend(t):1!==this.ws.readyState?this.queue.push(t):(e=JSON.stringify(t),this.ws.send(e))},s.prototype.auth=function(t){if(this.supported)return t={event:"login",session_id:App.Config.get("session_id"),fingerprint:App.Browser.fingerprint()},this.send(t)},s.prototype.spool=function(){var t,e;if(this.sentSpoolFinished)return this.sentSpoolFinished=!1,t={event:"spool"},this.lastSpoolMessage&&(t.timestamp=this.lastSpoolMessage),this.log("debug","spool",t),e=function(t){return function(){return t.sentSpoolFinished=!0}}(this),App.Delay.set(e,6e4,"reset-spool-sent-finished-if-not-returned","ws"),this.send(t)},s.prototype.close=function(t){if(null==t&&(t={}),t.force&&(this.connectionKeepDown=!0),"ajax"!==this.backend)return this.ws.close()},s.prototype.ping=function(){var t;if("ajax"!==this.backend)return this.log("debug","send websocket ping"),this.send({event:"ping"}),App.Delay.clear("websocket-ping-check","ws"),t=function(t){return function(){return t.log("debug","no websocket ping response, reconnect..."),t.close()}}(this),App.Delay.set(t,9e4,"websocket-ping-check","ws")},s.prototype.pong=function(){if("ajax"!==this.backend)return this.log("debug","received websocket pong"),App.Delay.set(this.ping,6e4,"websocket-pong","ws")},s.prototype.connect=function(){var e,n;return window.WebSocket?(n="ws://","https:"===window.location.protocol&&(n="wss://"),"websocket"===this.backend?(e="",window.location.port&&""!==window.location.port&&(e=":"+window.location.port),this.ws=new window.WebSocket(""+n+window.location.hostname+e+"/ws")):"websocketPort"===this.backend?(this.backend_port=App.Config.get("websocket_port")||"6042",this.ws=new window.WebSocket(""+n+window.location.hostname+":"+this.backend_port+"/")):this._ajaxInit(),this.ws.onopen=function(t){return function(){var n,i,s,r;for(t.backend_port&&(e=":"+t.backend_port),t.log("debug","new websocket ("+t.channel()+e+") connection open"),t.connectionEstablished=!0,t.connectionWasEstablished=!0,App.Delay.clear("websocket-no-connection-try-reconnect-message","ws"),t.error&&(t.error.close(),t.error=!1,t.tryToConnect=!1),t.auth(),r=t.queue,n=0,s=r.length;n<s;n++)i=r[n],t.log("debug","empty ws queue",i),t.send(i);return t.queue=[],App.Delay.set(t.ping,6e4,"websocket-send-ping-to-heck-connection","ws")}}(this),this.ws.onmessage=function(t){return function(e){var n;return n=JSON.parse(e.data),t.log("debug","ws:onmessage",n),t._receiveMessage(n)}}(this),this.ws.onclose=function(n){return function(){var i;if(n.log("debug","close websocket connection"),!n.connectionKeepDown){if(n.connectionEstablished&&(n.connectionEstablished=!1),!n.connectionWasEstablished){if("websocket"===n.backend)return n.log("debug","no websocket connection on /ws, use :port/"),n.backend="websocketPort",void n.connect();if("websocketPort"===n.backend)return n.backend_port&&(e=":"+n.backend_port),n.log("debug","no websocket connection on port "+e+", use ajax long polling as fallback"),n.backend="ajax",void n.connect()}return n.error||(i=function(){return n.error=new t},n.tryToConnect||App.Delay.set(i,7e3,"websocket-no-connection-try-reconnect-message","ws"),n.tryToConnect=!0),App.Delay.set(n.connect,4500,"websocket-try-reconnect-after-x-sec","ws")}}}(this),this.ws.onerror=function(t){return function(e){return t.log("debug","ws:onerror",e)}}(this)):(this.supported=!1,this.backend="ajax",this.log("debug","no support of websocket, use ajax long polling"),void this._ajaxInit())},s.prototype._receiveMessage=function(t){var e,n,i,s;for(null==t&&(t=[]),s=[],e=0,i=t.length;e<i;e++)n=t[e],this.log("debug","onmessage",n),n.spool&&(this.lastSpoolMessage=Math.round(+new Date/1e3)),"pong"===n.event&&this.pong(),n.event?(this.log("debug","onmessage event: "+n.event),s.push(App.Event.trigger(n.event,n.data))):s.push(void 0);return s},s.prototype._ajaxInit=function(t){if(null==t&&(t={}),!this._ajaxInitDone||t.force)return App.Ajax.request({id:"ws-login",type:"POST",url:this.Config.get("api_path")+"/message_send",data:JSON.stringify({data:{event:"login"}}),processData:!1,queue:!1,success:function(t){return function(e){return e.client_id&&(t.log("debug","ajax:new client_id",e.client_id),t.client_id=e.client_id,t._ajaxReceive(),t._ajaxSendQueue()),t._ajaxInitDone=!0}}(this),error:function(t){return function(){var e;return t._ajaxInitDone=!0,e=function(){return t._ajaxInit({force:!0})},App.Delay.set(e,1e4,"_ajaxInit-reconnect-on-error","ws")}}(this)})},s.prototype._ajaxSend=function(t){return this.log("debug","ajax:sendmessage",t),this.client_id&&void 0!==this.client_id&&this._ajaxInitDone?(this.queue.push(t),this._ajaxSendQueue()):(this._ajaxInit(),this.queue.push(t))},s.prototype._ajaxSendQueue=function(){var t,e;for(e=[];!_.isEmpty(this.queue);)t=this.queue.shift(),e.push(App.Ajax.request({type:"POST",url:this.Config.get("api_path")+"/message_send",data:JSON.stringify({client_id:this.client_id,data:t}),processData:!1,queue:!0,success:function(t){return function(e){if(e&&e.error)return t.client_id=void 0,t._ajaxInit({force:!0})}}(this),error:function(t){return function(){return t.client_id=void 0,t._ajaxInit({force:!0})}}(this)}));return e},s.prototype._ajaxReceive=function(){if(this.client_id&&!0!==this._ajaxReceiveWorking)return this._ajaxReceiveWorking=!0,App.Ajax.request({id:"message_receive",type:"POST",url:this.Config.get("api_path")+"/message_receive",data:JSON.stringify({client_id:this.client_id}),processData:!1,success:function(t){return function(e){return t.log("debug","ajax:onmessage",e),t._receiveMessage(e),e&&e.error&&(t.client_id=void 0,t._ajaxInit({force:!0})),t._ajaxReceiveWorking=!1,t._ajaxReceive()}}(this),error:function(t){return function(){return t.client_id=void 0,t._ajaxInit({force:!0}),t._ajaxReceiveWorking=!1}}(this)})},s}(App.Controller),t=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.buttonClose=!1,e.prototype.buttonCancel=!1,e.prototype.buttonSubmit=!1,e.prototype.backdrop="static",e.prototype.keyboard=!1,e.prototype.head="Lost network connection!",e.prototype.content=function(){return"Trying to reconnect..."},e}(App.ControllerModal)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;App.SearchableAjaxSelect=function(n){function i(){return this.showLoader=t(this.showLoader,this),this.onAjaxResponse=t(this.onAjaxResponse,this),this.onInput=t(this.onInput,this),i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.onInput=function(){var t;return i.__super__.onInput.apply(this,arguments),t=underscored(this.options.attribute.object),this.apiPath=App.Config.get("api_path"),this.searchResultCache=this.searchResultCache||{},this.cacheKey=t+"+"+this.query,this.searchResultCache[this.cacheKey]?this.onAjaxResponse(this.searchResultCache[this.cacheKey]):(clearTimeout(this.loaderTimeoutId),this.loaderTimeoutId=setTimeout(this.showLoader,1e3),App.Ajax.request({id:this.options.attribute.id,type:"GET",url:this.apiPath+"/search/"+t,data:{query:this.query,limit:this.options.attribute.limit},processData:!0,success:this.onAjaxResponse}))},i.prototype.onAjaxResponse=function(t){var e,n,i,s,r,o,a,l;for(clearTimeout(this.loaderTimeoutId),this.el.removeClass("is-loading"),this.searchResultCache[this.cacheKey]=t,App.Collection.loadAssets(t.assets),s=[],o=t.result,e=0,n=o.length;e<n;e++)i=o[e],"Ticket"===i.type?(a=App.Ticket.find(i.id),t={name:"#"+a.number+" - "+a.title,value:a.id},s.push(t)):"User"===i.type?(l=App.User.find(i.id),t={name:""+l.displayName(),value:l.id},s.push(t)):"Organization"===i.type&&(r=App.Organization.find(i.id),t={name:""+r.displayName(),value:r.id},s.push(t));return this.optionsList.html(this.renderOptions(s)),this.refreshElements(),this.filterByQuery(this.query)},i.prototype.showLoader=function(){return this.el.addClass("is-loading")},i}(App.SearchableSelect)}.call(this),window.console||(window.console={}),console.log||(console.log=function(){}),Date.prototype.getWeek=function(){var t=new Date(this.getFullYear(),0,1);return Math.ceil(((this-t)/864e5+t.getDay()+1)/7)},jQuery.event.special.remove={remove:function(t){t.handler&&t.handler()}},$("body").on("click",".checkbox-replacement, .radio-replacement",function(t){$(t.currentTarget).find("input").addClass("is-active")}),$("body").on("blur",".checkbox-replacement input, .radio-replacement input",function(){$(this).removeClass("is-active")}),jQuery.fn.removeAttrs=function(t){return this.each(function(){var e=$(this);$.each(this.attributes,function(n,i){i&&i.specified&&t.test(i.name)&&e.removeAttr(i.name)})})},jQuery.fn.extend({serializeArrayWithType:function(){var t=/\r?\n/g,e=/^(?:submit|button|image|reset|file)$/i,n=/^(?:input|select|textarea|keygen)/i,i=/^(?:checkbox|radio)$/i;return this.map(function(){var t=jQuery.prop(this,"elements");return t?jQuery.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&n.test(this.nodeName)&&!e.test(t)&&(this.checked||!i.test(t))}).map(function(e,n){var i=jQuery(this),s=i.val(),r=i.data("field-type");return null==s?i.prop("multiple")?{name:n.name,value:null,type:r}:null:jQuery.isArray(s)?jQuery.map(s,function(e){return{name:n.name,value:e.replace(t,"\r\n"),type:r}}):{name:n.name,value:s.replace(t,"\r\n"),type:r}}).get()}}),jQuery(function(){new App.Run});